var xx=e=>{throw TypeError(e)};var Vd=(e,t,n)=>t.has(e)||xx("Cannot "+n);var G=(e,t,n)=>(Vd(e,t,"read from private field"),n?n.call(e):t.get(e)),qe=(e,t,n)=>t.has(e)?xx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ie=(e,t,n,r)=>(Vd(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),sn=(e,t,n)=>(Vd(e,t,"access private method"),n);var Gl=(e,t,n,r)=>({set _(o){Ie(e,t,o,n)},get _(){return G(e,t,r)}});function K4(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function J4(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Vw={exports:{}},Hu={},Uw={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=Symbol.for("react.element"),G4=Symbol.for("react.portal"),q4=Symbol.for("react.fragment"),Y4=Symbol.for("react.strict_mode"),X4=Symbol.for("react.profiler"),Q4=Symbol.for("react.provider"),Z4=Symbol.for("react.context"),ek=Symbol.for("react.forward_ref"),tk=Symbol.for("react.suspense"),nk=Symbol.for("react.memo"),rk=Symbol.for("react.lazy"),vx=Symbol.iterator;function ok(e){return e===null||typeof e!="object"?null:(e=vx&&e[vx]||e["@@iterator"],typeof e=="function"?e:null)}var Hw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ww=Object.assign,Kw={};function Ji(e,t,n){this.props=e,this.context=t,this.refs=Kw,this.updater=n||Hw}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ji.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jw(){}Jw.prototype=Ji.prototype;function yp(e,t,n){this.props=e,this.context=t,this.refs=Kw,this.updater=n||Hw}var wp=yp.prototype=new Jw;wp.constructor=yp;Ww(wp,Ji.prototype);wp.isPureReactComponent=!0;var yx=Array.isArray,Gw=Object.prototype.hasOwnProperty,Cp={current:null},qw={key:!0,ref:!0,__self:!0,__source:!0};function Yw(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)Gw.call(t,r)&&!qw.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Dl,type:e,key:s,ref:i,props:o,_owner:Cp.current}}function sk(e,t){return{$$typeof:Dl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ep(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dl}function ik(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wx=/\/+/g;function Ud(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ik(""+e.key):t.toString(36)}function Rc(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Dl:case G4:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Ud(i,0):r,yx(o)?(n="",e!=null&&(n=e.replace(wx,"$&/")+"/"),Rc(o,t,n,"",function(c){return c})):o!=null&&(Ep(o)&&(o=sk(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(wx,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",yx(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Ud(s,a);i+=Rc(s,t,n,l,o)}else if(l=ok(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Ud(s,a++),i+=Rc(s,t,n,l,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ql(e,t,n){if(e==null)return e;var r=[],o=0;return Rc(e,r,"","",function(s){return t.call(n,s,o++)}),r}function ak(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wn={current:null},Fc={transition:null},lk={ReactCurrentDispatcher:wn,ReactCurrentBatchConfig:Fc,ReactCurrentOwner:Cp};function Xw(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:ql,forEach:function(e,t,n){ql(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ql(e,function(){t++}),t},toArray:function(e){return ql(e,function(t){return t})||[]},only:function(e){if(!Ep(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Oe.Component=Ji;Oe.Fragment=q4;Oe.Profiler=X4;Oe.PureComponent=yp;Oe.StrictMode=Y4;Oe.Suspense=tk;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;Oe.act=Xw;Oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ww({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Cp.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Gw.call(t,l)&&!qw.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Dl,type:e.type,key:o,ref:s,props:r,_owner:i}};Oe.createContext=function(e){return e={$$typeof:Z4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Q4,_context:e},e.Consumer=e};Oe.createElement=Yw;Oe.createFactory=function(e){var t=Yw.bind(null,e);return t.type=e,t};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(e){return{$$typeof:ek,render:e}};Oe.isValidElement=Ep;Oe.lazy=function(e){return{$$typeof:rk,_payload:{_status:-1,_result:e},_init:ak}};Oe.memo=function(e,t){return{$$typeof:nk,type:e,compare:t===void 0?null:t}};Oe.startTransition=function(e){var t=Fc.transition;Fc.transition={};try{e()}finally{Fc.transition=t}};Oe.unstable_act=Xw;Oe.useCallback=function(e,t){return wn.current.useCallback(e,t)};Oe.useContext=function(e){return wn.current.useContext(e)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(e){return wn.current.useDeferredValue(e)};Oe.useEffect=function(e,t){return wn.current.useEffect(e,t)};Oe.useId=function(){return wn.current.useId()};Oe.useImperativeHandle=function(e,t,n){return wn.current.useImperativeHandle(e,t,n)};Oe.useInsertionEffect=function(e,t){return wn.current.useInsertionEffect(e,t)};Oe.useLayoutEffect=function(e,t){return wn.current.useLayoutEffect(e,t)};Oe.useMemo=function(e,t){return wn.current.useMemo(e,t)};Oe.useReducer=function(e,t,n){return wn.current.useReducer(e,t,n)};Oe.useRef=function(e){return wn.current.useRef(e)};Oe.useState=function(e){return wn.current.useState(e)};Oe.useSyncExternalStore=function(e,t,n){return wn.current.useSyncExternalStore(e,t,n)};Oe.useTransition=function(){return wn.current.useTransition()};Oe.version="18.3.1";Uw.exports=Oe;var h=Uw.exports;const Et=zw(h),Qw=K4({__proto__:null,default:Et},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ck=h,uk=Symbol.for("react.element"),dk=Symbol.for("react.fragment"),fk=Object.prototype.hasOwnProperty,hk=ck.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pk={key:!0,ref:!0,__self:!0,__source:!0};function Zw(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)fk.call(t,r)&&!pk.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:uk,type:e,key:s,ref:i,props:o,_owner:hk.current}}Hu.Fragment=dk;Hu.jsx=Zw;Hu.jsxs=Zw;Vw.exports=Hu;var p=Vw.exports,eC={exports:{}},Jn={},tC={exports:{}},nC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,I){var U=M.length;M.push(I);e:for(;0<U;){var N=U-1>>>1,L=M[N];if(0<o(L,I))M[N]=I,M[U]=L,U=N;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var I=M[0],U=M.pop();if(U!==I){M[0]=U;e:for(var N=0,L=M.length,H=L>>>1;N<H;){var $=2*(N+1)-1,fe=M[$],ce=$+1,Y=M[ce];if(0>o(fe,U))ce<L&&0>o(Y,fe)?(M[N]=Y,M[ce]=U,N=ce):(M[N]=fe,M[$]=U,N=$);else if(ce<L&&0>o(Y,U))M[N]=Y,M[ce]=U,N=ce;else break e}}return I}function o(M,I){var U=M.sortIndex-I.sortIndex;return U!==0?U:M.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,d=null,f=3,m=!1,g=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(M){for(var I=n(c);I!==null;){if(I.callback===null)r(c);else if(I.startTime<=M)r(c),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(c)}}function E(M){if(w=!1,y(M),!g)if(n(l)!==null)g=!0,j(b);else{var I=n(c);I!==null&&B(E,I.startTime-M)}}function b(M,I){g=!1,w&&(w=!1,v(P),P=-1),m=!0;var U=f;try{for(y(I),d=n(l);d!==null&&(!(d.expirationTime>I)||M&&!T());){var N=d.callback;if(typeof N=="function"){d.callback=null,f=d.priorityLevel;var L=N(d.expirationTime<=I);I=e.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&r(l),y(I)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var $=n(c);$!==null&&B(E,$.startTime-I),H=!1}return H}finally{d=null,f=U,m=!1}}var D=!1,A=null,P=-1,R=5,k=-1;function T(){return!(e.unstable_now()-k<R)}function F(){if(A!==null){var M=e.unstable_now();k=M;var I=!0;try{I=A(!0,M)}finally{I?_():(D=!1,A=null)}}else D=!1}var _;if(typeof x=="function")_=function(){x(F)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,K=O.port2;O.port1.onmessage=F,_=function(){K.postMessage(null)}}else _=function(){C(F,0)};function j(M){A=M,D||(D=!0,_())}function B(M,I){P=C(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,j(b))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var U=f;f=I;try{return M()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var U=f;f=M;try{return I()}finally{f=U}},e.unstable_scheduleCallback=function(M,I,U){var N=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?N+U:N):U=N,M){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=U+L,M={id:u++,callback:I,priorityLevel:M,startTime:U,expirationTime:L,sortIndex:-1},U>N?(M.sortIndex=U,t(c,M),n(l)===null&&M===n(c)&&(w?(v(P),P=-1):w=!0,B(E,U-N))):(M.sortIndex=L,t(l,M),g||m||(g=!0,j(b))),M},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(M){var I=f;return function(){var U=f;f=I;try{return M.apply(this,arguments)}finally{f=U}}}})(nC);tC.exports=nC;var mk=tC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=h,Wn=mk;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rC=new Set,Ja={};function Ns(e,t){Ri(e,t),Ri(e+"Capture",t)}function Ri(e,t){for(Ja[e]=t,e=0;e<t.length;e++)rC.add(t[e])}var no=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L0=Object.prototype.hasOwnProperty,xk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cx={},Ex={};function vk(e){return L0.call(Ex,e)?!0:L0.call(Cx,e)?!1:xk.test(e)?Ex[e]=!0:(Cx[e]=!0,!1)}function yk(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wk(e,t,n,r){if(t===null||typeof t>"u"||yk(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cn(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tn[e]=new Cn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tn[t]=new Cn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tn[e]=new Cn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tn[e]=new Cn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tn[e]=new Cn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tn[e]=new Cn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tn[e]=new Cn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tn[e]=new Cn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tn[e]=new Cn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Sp=/[\-:]([a-z])/g;function bp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Sp,bp);tn[t]=new Cn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Sp,bp);tn[t]=new Cn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Sp,bp);tn[t]=new Cn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tn[e]=new Cn(e,1,!1,e.toLowerCase(),null,!1,!1)});tn.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tn[e]=new Cn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dp(e,t,n,r){var o=tn.hasOwnProperty(t)?tn[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wk(t,n,o,r)&&(n=null),r||o===null?vk(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var uo=gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yl=Symbol.for("react.element"),Ks=Symbol.for("react.portal"),Js=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),O0=Symbol.for("react.profiler"),oC=Symbol.for("react.provider"),sC=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),z0=Symbol.for("react.suspense_list"),kp=Symbol.for("react.memo"),Co=Symbol.for("react.lazy"),iC=Symbol.for("react.offscreen"),Sx=Symbol.iterator;function ia(e){return e===null||typeof e!="object"?null:(e=Sx&&e[Sx]||e["@@iterator"],typeof e=="function"?e:null)}var At=Object.assign,Hd;function Ca(e){if(Hd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Hd=t&&t[1]||""}return`
`+Hd+e}var Wd=!1;function Kd(e,t){if(!e||Wd)return"";Wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{Wd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ca(e):""}function Ck(e){switch(e.tag){case 5:return Ca(e.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return e=Kd(e.type,!1),e;case 11:return e=Kd(e.type.render,!1),e;case 1:return e=Kd(e.type,!0),e;default:return""}}function V0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Js:return"Fragment";case Ks:return"Portal";case O0:return"Profiler";case Ap:return"StrictMode";case $0:return"Suspense";case z0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sC:return(e.displayName||"Context")+".Consumer";case oC:return(e._context.displayName||"Context")+".Provider";case Pp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kp:return t=e.displayName||null,t!==null?t:V0(e.type)||"Memo";case Co:t=e._payload,e=e._init;try{return V0(e(t))}catch{}}return null}function Ek(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V0(t);case 8:return t===Ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ko(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sk(e){var t=aC(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xl(e){e._valueTracker||(e._valueTracker=Sk(e))}function lC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=aC(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function tu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function U0(e,t){var n=t.checked;return At({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ko(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cC(e,t){t=t.checked,t!=null&&Dp(e,"checked",t,!1)}function H0(e,t){cC(e,t);var n=Ko(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?W0(e,t.type,n):t.hasOwnProperty("defaultValue")&&W0(e,t.type,Ko(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Dx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function W0(e,t,n){(t!=="number"||tu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ea=Array.isArray;function ui(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ko(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function K0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return At({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ax(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ee(92));if(Ea(n)){if(1<n.length)throw Error(ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ko(n)}}function uC(e,t){var n=Ko(t.value),r=Ko(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Px(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ql,fC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ql.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ga(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bk=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(e){bk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ra[t]=Ra[e]})});function hC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ra.hasOwnProperty(e)&&Ra[e]?(""+t).trim():t+"px"}function pC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=hC(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Dk=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G0(e,t){if(t){if(Dk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function q0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y0=null;function Tp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var X0=null,di=null,fi=null;function kx(e){if(e=kl(e)){if(typeof X0!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=qu(t),X0(e.stateNode,e.type,t))}}function mC(e){di?fi?fi.push(e):fi=[e]:di=e}function gC(){if(di){var e=di,t=fi;if(fi=di=null,kx(e),t)for(e=0;e<t.length;e++)kx(t[e])}}function xC(e,t){return e(t)}function vC(){}var Jd=!1;function yC(e,t,n){if(Jd)return e(t,n);Jd=!0;try{return xC(e,t,n)}finally{Jd=!1,(di!==null||fi!==null)&&(vC(),gC())}}function qa(e,t){var n=e.stateNode;if(n===null)return null;var r=qu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ee(231,t,typeof n));return n}var Q0=!1;if(no)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){Q0=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{Q0=!1}function Ak(e,t,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fa=!1,nu=null,ru=!1,Z0=null,Pk={onError:function(e){Fa=!0,nu=e}};function kk(e,t,n,r,o,s,i,a,l){Fa=!1,nu=null,Ak.apply(Pk,arguments)}function Tk(e,t,n,r,o,s,i,a,l){if(kk.apply(this,arguments),Fa){if(Fa){var c=nu;Fa=!1,nu=null}else throw Error(ee(198));ru||(ru=!0,Z0=c)}}function Is(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tx(e){if(Is(e)!==e)throw Error(ee(188))}function Rk(e){var t=e.alternate;if(!t){if(t=Is(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Tx(o),e;if(s===r)return Tx(o),t;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?e:t}function CC(e){return e=Rk(e),e!==null?EC(e):null}function EC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=EC(e);if(t!==null)return t;e=e.sibling}return null}var SC=Wn.unstable_scheduleCallback,Rx=Wn.unstable_cancelCallback,Fk=Wn.unstable_shouldYield,Mk=Wn.unstable_requestPaint,It=Wn.unstable_now,Nk=Wn.unstable_getCurrentPriorityLevel,Rp=Wn.unstable_ImmediatePriority,bC=Wn.unstable_UserBlockingPriority,ou=Wn.unstable_NormalPriority,Ik=Wn.unstable_LowPriority,DC=Wn.unstable_IdlePriority,Wu=null,_r=null;function jk(e){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Wu,e,void 0,(e.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:Lk,_k=Math.log,Bk=Math.LN2;function Lk(e){return e>>>=0,e===0?32:31-(_k(e)/Bk|0)|0}var Zl=64,ec=4194304;function Sa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function su(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Sa(a):(s&=i,s!==0&&(r=Sa(s)))}else i=n&~o,i!==0?r=Sa(i):s!==0&&(r=Sa(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-wr(t),o=1<<n,r|=e[n],t&=~o;return r}function Ok(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $k(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-wr(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=Ok(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function eh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function AC(){var e=Zl;return Zl<<=1,!(Zl&4194240)&&(Zl=64),e}function Gd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Al(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wr(t),e[t]=n}function zk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-wr(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Fp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-wr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var et=0;function PC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kC,Mp,TC,RC,FC,th=!1,tc=[],Io=null,jo=null,_o=null,Ya=new Map,Xa=new Map,bo=[],Vk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fx(e,t){switch(e){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":Ya.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(t.pointerId)}}function la(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=kl(t),t!==null&&Mp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Uk(e,t,n,r,o){switch(t){case"focusin":return Io=la(Io,e,t,n,r,o),!0;case"dragenter":return jo=la(jo,e,t,n,r,o),!0;case"mouseover":return _o=la(_o,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return Ya.set(s,la(Ya.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Xa.set(s,la(Xa.get(s)||null,e,t,n,r,o)),!0}return!1}function MC(e){var t=fs(e.target);if(t!==null){var n=Is(t);if(n!==null){if(t=n.tag,t===13){if(t=wC(n),t!==null){e.blockedOn=t,FC(e.priority,function(){TC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Y0=r,n.target.dispatchEvent(r),Y0=null}else return t=kl(n),t!==null&&Mp(t),e.blockedOn=n,!1;t.shift()}return!0}function Mx(e,t,n){Mc(e)&&n.delete(t)}function Hk(){th=!1,Io!==null&&Mc(Io)&&(Io=null),jo!==null&&Mc(jo)&&(jo=null),_o!==null&&Mc(_o)&&(_o=null),Ya.forEach(Mx),Xa.forEach(Mx)}function ca(e,t){e.blockedOn===t&&(e.blockedOn=null,th||(th=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,Hk)))}function Qa(e){function t(o){return ca(o,e)}if(0<tc.length){ca(tc[0],e);for(var n=1;n<tc.length;n++){var r=tc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Io!==null&&ca(Io,e),jo!==null&&ca(jo,e),_o!==null&&ca(_o,e),Ya.forEach(t),Xa.forEach(t),n=0;n<bo.length;n++)r=bo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<bo.length&&(n=bo[0],n.blockedOn===null);)MC(n),n.blockedOn===null&&bo.shift()}var hi=uo.ReactCurrentBatchConfig,iu=!0;function Wk(e,t,n,r){var o=et,s=hi.transition;hi.transition=null;try{et=1,Np(e,t,n,r)}finally{et=o,hi.transition=s}}function Kk(e,t,n,r){var o=et,s=hi.transition;hi.transition=null;try{et=4,Np(e,t,n,r)}finally{et=o,hi.transition=s}}function Np(e,t,n,r){if(iu){var o=nh(e,t,n,r);if(o===null)of(e,t,r,au,n),Fx(e,r);else if(Uk(o,e,t,n,r))r.stopPropagation();else if(Fx(e,r),t&4&&-1<Vk.indexOf(e)){for(;o!==null;){var s=kl(o);if(s!==null&&kC(s),s=nh(e,t,n,r),s===null&&of(e,t,r,au,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else of(e,t,r,null,n)}}var au=null;function nh(e,t,n,r){if(au=null,e=Tp(r),e=fs(e),e!==null)if(t=Is(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return au=e,null}function NC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nk()){case Rp:return 1;case bC:return 4;case ou:case Ik:return 16;case DC:return 536870912;default:return 16}default:return 16}}var Fo=null,Ip=null,Nc=null;function IC(){if(Nc)return Nc;var e,t=Ip,n=t.length,r,o="value"in Fo?Fo.value:Fo.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return Nc=o.slice(e,1<r?1-r:void 0)}function Ic(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nc(){return!0}function Nx(){return!1}function Gn(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nc:Nx,this.isPropagationStopped=Nx,this}return At(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nc)},persist:function(){},isPersistent:nc}),t}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jp=Gn(Gi),Pl=At({},Gi,{view:0,detail:0}),Jk=Gn(Pl),qd,Yd,ua,Ku=At({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ua&&(ua&&e.type==="mousemove"?(qd=e.screenX-ua.screenX,Yd=e.screenY-ua.screenY):Yd=qd=0,ua=e),qd)},movementY:function(e){return"movementY"in e?e.movementY:Yd}}),Ix=Gn(Ku),Gk=At({},Ku,{dataTransfer:0}),qk=Gn(Gk),Yk=At({},Pl,{relatedTarget:0}),Xd=Gn(Yk),Xk=At({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qk=Gn(Xk),Zk=At({},Gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eT=Gn(Zk),tT=At({},Gi,{data:0}),jx=Gn(tT),nT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oT[e])?!!t[e]:!1}function _p(){return sT}var iT=At({},Pl,{key:function(e){if(e.key){var t=nT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ic(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(e){return e.type==="keypress"?Ic(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ic(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aT=Gn(iT),lT=At({},Ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_x=Gn(lT),cT=At({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),uT=Gn(cT),dT=At({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),fT=Gn(dT),hT=At({},Ku,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pT=Gn(hT),mT=[9,13,27,32],Bp=no&&"CompositionEvent"in window,Ma=null;no&&"documentMode"in document&&(Ma=document.documentMode);var gT=no&&"TextEvent"in window&&!Ma,jC=no&&(!Bp||Ma&&8<Ma&&11>=Ma),Bx=" ",Lx=!1;function _C(e,t){switch(e){case"keyup":return mT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gs=!1;function xT(e,t){switch(e){case"compositionend":return BC(t);case"keypress":return t.which!==32?null:(Lx=!0,Bx);case"textInput":return e=t.data,e===Bx&&Lx?null:e;default:return null}}function vT(e,t){if(Gs)return e==="compositionend"||!Bp&&_C(e,t)?(e=IC(),Nc=Ip=Fo=null,Gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jC&&t.locale!=="ko"?null:t.data;default:return null}}var yT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ox(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yT[e.type]:t==="textarea"}function LC(e,t,n,r){mC(r),t=lu(t,"onChange"),0<t.length&&(n=new jp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Na=null,Za=null;function wT(e){qC(e,0)}function Ju(e){var t=Xs(e);if(lC(t))return e}function CT(e,t){if(e==="change")return t}var OC=!1;if(no){var Qd;if(no){var Zd="oninput"in document;if(!Zd){var $x=document.createElement("div");$x.setAttribute("oninput","return;"),Zd=typeof $x.oninput=="function"}Qd=Zd}else Qd=!1;OC=Qd&&(!document.documentMode||9<document.documentMode)}function zx(){Na&&(Na.detachEvent("onpropertychange",$C),Za=Na=null)}function $C(e){if(e.propertyName==="value"&&Ju(Za)){var t=[];LC(t,Za,e,Tp(e)),yC(wT,t)}}function ET(e,t,n){e==="focusin"?(zx(),Na=t,Za=n,Na.attachEvent("onpropertychange",$C)):e==="focusout"&&zx()}function ST(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ju(Za)}function bT(e,t){if(e==="click")return Ju(t)}function DT(e,t){if(e==="input"||e==="change")return Ju(t)}function AT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var br=typeof Object.is=="function"?Object.is:AT;function el(e,t){if(br(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!L0.call(t,o)||!br(e[o],t[o]))return!1}return!0}function Vx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ux(e,t){var n=Vx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vx(n)}}function zC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function VC(){for(var e=window,t=tu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=tu(e.document)}return t}function Lp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PT(e){var t=VC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zC(n.ownerDocument.documentElement,n)){if(r!==null&&Lp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Ux(n,s);var i=Ux(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kT=no&&"documentMode"in document&&11>=document.documentMode,qs=null,rh=null,Ia=null,oh=!1;function Hx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oh||qs==null||qs!==tu(r)||(r=qs,"selectionStart"in r&&Lp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ia&&el(Ia,r)||(Ia=r,r=lu(rh,"onSelect"),0<r.length&&(t=new jp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qs)))}function rc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ys={animationend:rc("Animation","AnimationEnd"),animationiteration:rc("Animation","AnimationIteration"),animationstart:rc("Animation","AnimationStart"),transitionend:rc("Transition","TransitionEnd")},ef={},UC={};no&&(UC=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Gu(e){if(ef[e])return ef[e];if(!Ys[e])return e;var t=Ys[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in UC)return ef[e]=t[n];return e}var HC=Gu("animationend"),WC=Gu("animationiteration"),KC=Gu("animationstart"),JC=Gu("transitionend"),GC=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zo(e,t){GC.set(e,t),Ns(t,[e])}for(var tf=0;tf<Wx.length;tf++){var nf=Wx[tf],TT=nf.toLowerCase(),RT=nf[0].toUpperCase()+nf.slice(1);Zo(TT,"on"+RT)}Zo(HC,"onAnimationEnd");Zo(WC,"onAnimationIteration");Zo(KC,"onAnimationStart");Zo("dblclick","onDoubleClick");Zo("focusin","onFocus");Zo("focusout","onBlur");Zo(JC,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Kx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Tk(r,t,void 0,e),e.currentTarget=null}function qC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;Kx(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;Kx(o,a,c),s=l}}}if(ru)throw e=Z0,ru=!1,Z0=null,e}function dt(e,t){var n=t[ch];n===void 0&&(n=t[ch]=new Set);var r=e+"__bubble";n.has(r)||(YC(t,e,2,!1),n.add(r))}function rf(e,t,n){var r=0;t&&(r|=4),YC(n,e,r,t)}var oc="_reactListening"+Math.random().toString(36).slice(2);function tl(e){if(!e[oc]){e[oc]=!0,rC.forEach(function(n){n!=="selectionchange"&&(FT.has(n)||rf(n,!1,e),rf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oc]||(t[oc]=!0,rf("selectionchange",!1,t))}}function YC(e,t,n,r){switch(NC(t)){case 1:var o=Wk;break;case 4:o=Kk;break;default:o=Np}n=o.bind(null,t,n,e),o=void 0,!Q0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function of(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=fs(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}yC(function(){var c=s,u=Tp(n),d=[];e:{var f=GC.get(e);if(f!==void 0){var m=jp,g=e;switch(e){case"keypress":if(Ic(n)===0)break e;case"keydown":case"keyup":m=aT;break;case"focusin":g="focus",m=Xd;break;case"focusout":g="blur",m=Xd;break;case"beforeblur":case"afterblur":m=Xd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=uT;break;case HC:case WC:case KC:m=Qk;break;case JC:m=fT;break;case"scroll":m=Jk;break;case"wheel":m=pT;break;case"copy":case"cut":case"paste":m=eT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=_x}var w=(t&4)!==0,C=!w&&e==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var x=c,y;x!==null;){y=x;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,v!==null&&(E=qa(x,v),E!=null&&w.push(nl(x,E,y)))),C)break;x=x.return}0<w.length&&(f=new m(f,g,null,n,u),d.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==Y0&&(g=n.relatedTarget||n.fromElement)&&(fs(g)||g[ro]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?fs(g):null,g!==null&&(C=Is(g),g!==C||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(w=Ix,E="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(w=_x,E="onPointerLeave",v="onPointerEnter",x="pointer"),C=m==null?f:Xs(m),y=g==null?f:Xs(g),f=new w(E,x+"leave",m,n,u),f.target=C,f.relatedTarget=y,E=null,fs(u)===c&&(w=new w(v,x+"enter",g,n,u),w.target=y,w.relatedTarget=C,E=w),C=E,m&&g)t:{for(w=m,v=g,x=0,y=w;y;y=zs(y))x++;for(y=0,E=v;E;E=zs(E))y++;for(;0<x-y;)w=zs(w),x--;for(;0<y-x;)v=zs(v),y--;for(;x--;){if(w===v||v!==null&&w===v.alternate)break t;w=zs(w),v=zs(v)}w=null}else w=null;m!==null&&Jx(d,f,m,w,!1),g!==null&&C!==null&&Jx(d,C,g,w,!0)}}e:{if(f=c?Xs(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var b=CT;else if(Ox(f))if(OC)b=DT;else{b=ST;var D=ET}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=bT);if(b&&(b=b(e,c))){LC(d,b,n,u);break e}D&&D(e,f,c),e==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&W0(f,"number",f.value)}switch(D=c?Xs(c):window,e){case"focusin":(Ox(D)||D.contentEditable==="true")&&(qs=D,rh=c,Ia=null);break;case"focusout":Ia=rh=qs=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Hx(d,n,u);break;case"selectionchange":if(kT)break;case"keydown":case"keyup":Hx(d,n,u)}var A;if(Bp)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Gs?_C(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(jC&&n.locale!=="ko"&&(Gs||P!=="onCompositionStart"?P==="onCompositionEnd"&&Gs&&(A=IC()):(Fo=u,Ip="value"in Fo?Fo.value:Fo.textContent,Gs=!0)),D=lu(c,P),0<D.length&&(P=new jx(P,e,null,n,u),d.push({event:P,listeners:D}),A?P.data=A:(A=BC(n),A!==null&&(P.data=A)))),(A=gT?xT(e,n):vT(e,n))&&(c=lu(c,"onBeforeInput"),0<c.length&&(u=new jx("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=A))}qC(d,t)})}function nl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lu(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=qa(e,n),s!=null&&r.unshift(nl(e,s,o)),s=qa(e,t),s!=null&&r.push(nl(e,s,o))),e=e.return}return r}function zs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jx(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=qa(n,s),l!=null&&i.unshift(nl(n,l,a))):o||(l=qa(n,s),l!=null&&i.push(nl(n,l,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var MT=/\r\n?/g,NT=/\u0000|\uFFFD/g;function Gx(e){return(typeof e=="string"?e:""+e).replace(MT,`
`).replace(NT,"")}function sc(e,t,n){if(t=Gx(t),Gx(e)!==t&&n)throw Error(ee(425))}function cu(){}var sh=null,ih=null;function ah(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lh=typeof setTimeout=="function"?setTimeout:void 0,IT=typeof clearTimeout=="function"?clearTimeout:void 0,qx=typeof Promise=="function"?Promise:void 0,jT=typeof queueMicrotask=="function"?queueMicrotask:typeof qx<"u"?function(e){return qx.resolve(null).then(e).catch(_T)}:lh;function _T(e){setTimeout(function(){throw e})}function sf(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Qa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Qa(t)}function Bo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var qi=Math.random().toString(36).slice(2),Ir="__reactFiber$"+qi,rl="__reactProps$"+qi,ro="__reactContainer$"+qi,ch="__reactEvents$"+qi,BT="__reactListeners$"+qi,LT="__reactHandles$"+qi;function fs(e){var t=e[Ir];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ro]||n[Ir]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yx(e);e!==null;){if(n=e[Ir])return n;e=Yx(e)}return t}e=n,n=e.parentNode}return null}function kl(e){return e=e[Ir]||e[ro],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function qu(e){return e[rl]||null}var uh=[],Qs=-1;function es(e){return{current:e}}function ft(e){0>Qs||(e.current=uh[Qs],uh[Qs]=null,Qs--)}function lt(e,t){Qs++,uh[Qs]=e.current,e.current=t}var Jo={},pn=es(Jo),Mn=es(!1),bs=Jo;function Fi(e,t){var n=e.type.contextTypes;if(!n)return Jo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Nn(e){return e=e.childContextTypes,e!=null}function uu(){ft(Mn),ft(pn)}function Xx(e,t,n){if(pn.current!==Jo)throw Error(ee(168));lt(pn,t),lt(Mn,n)}function XC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ee(108,Ek(e)||"Unknown",o));return At({},n,r)}function du(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jo,bs=pn.current,lt(pn,e),lt(Mn,Mn.current),!0}function Qx(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=XC(e,t,bs),r.__reactInternalMemoizedMergedChildContext=e,ft(Mn),ft(pn),lt(pn,e)):ft(Mn),lt(Mn,n)}var qr=null,Yu=!1,af=!1;function QC(e){qr===null?qr=[e]:qr.push(e)}function OT(e){Yu=!0,QC(e)}function ts(){if(!af&&qr!==null){af=!0;var e=0,t=et;try{var n=qr;for(et=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qr=null,Yu=!1}catch(o){throw qr!==null&&(qr=qr.slice(e+1)),SC(Rp,ts),o}finally{et=t,af=!1}}return null}var Zs=[],ei=0,fu=null,hu=0,tr=[],nr=0,Ds=null,Yr=1,Xr="";function ls(e,t){Zs[ei++]=hu,Zs[ei++]=fu,fu=e,hu=t}function ZC(e,t,n){tr[nr++]=Yr,tr[nr++]=Xr,tr[nr++]=Ds,Ds=e;var r=Yr;e=Xr;var o=32-wr(r)-1;r&=~(1<<o),n+=1;var s=32-wr(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Yr=1<<32-wr(t)+o|n<<o|r,Xr=s+e}else Yr=1<<s|n<<o|r,Xr=e}function Op(e){e.return!==null&&(ls(e,1),ZC(e,1,0))}function $p(e){for(;e===fu;)fu=Zs[--ei],Zs[ei]=null,hu=Zs[--ei],Zs[ei]=null;for(;e===Ds;)Ds=tr[--nr],tr[nr]=null,Xr=tr[--nr],tr[nr]=null,Yr=tr[--nr],tr[nr]=null}var Un=null,Vn=null,vt=!1,yr=null;function eE(e,t){var n=or(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Un=e,Vn=Bo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Un=e,Vn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ds!==null?{id:Yr,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=or(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Un=e,Vn=null,!0):!1;default:return!1}}function dh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fh(e){if(vt){var t=Vn;if(t){var n=t;if(!Zx(e,t)){if(dh(e))throw Error(ee(418));t=Bo(n.nextSibling);var r=Un;t&&Zx(e,t)?eE(r,n):(e.flags=e.flags&-4097|2,vt=!1,Un=e)}}else{if(dh(e))throw Error(ee(418));e.flags=e.flags&-4097|2,vt=!1,Un=e}}}function ev(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Un=e}function ic(e){if(e!==Un)return!1;if(!vt)return ev(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ah(e.type,e.memoizedProps)),t&&(t=Vn)){if(dh(e))throw tE(),Error(ee(418));for(;t;)eE(e,t),t=Bo(t.nextSibling)}if(ev(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vn=Bo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vn=null}}else Vn=Un?Bo(e.stateNode.nextSibling):null;return!0}function tE(){for(var e=Vn;e;)e=Bo(e.nextSibling)}function Mi(){Vn=Un=null,vt=!1}function zp(e){yr===null?yr=[e]:yr.push(e)}var $T=uo.ReactCurrentBatchConfig;function da(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function ac(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tv(e){var t=e._init;return t(e._payload)}function nE(e){function t(v,x){if(e){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function o(v,x){return v=zo(v,x),v.index=0,v.sibling=null,v}function s(v,x,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,x,y,E){return x===null||x.tag!==6?(x=pf(y,v.mode,E),x.return=v,x):(x=o(x,y),x.return=v,x)}function l(v,x,y,E){var b=y.type;return b===Js?u(v,x,y.props.children,E,y.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Co&&tv(b)===x.type)?(E=o(x,y.props),E.ref=da(v,x,y),E.return=v,E):(E=zc(y.type,y.key,y.props,null,v.mode,E),E.ref=da(v,x,y),E.return=v,E)}function c(v,x,y,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=mf(y,v.mode,E),x.return=v,x):(x=o(x,y.children||[]),x.return=v,x)}function u(v,x,y,E,b){return x===null||x.tag!==7?(x=Cs(y,v.mode,E,b),x.return=v,x):(x=o(x,y),x.return=v,x)}function d(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=pf(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yl:return y=zc(x.type,x.key,x.props,null,v.mode,y),y.ref=da(v,null,x),y.return=v,y;case Ks:return x=mf(x,v.mode,y),x.return=v,x;case Co:var E=x._init;return d(v,E(x._payload),y)}if(Ea(x)||ia(x))return x=Cs(x,v.mode,y,null),x.return=v,x;ac(v,x)}return null}function f(v,x,y,E){var b=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:a(v,x,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yl:return y.key===b?l(v,x,y,E):null;case Ks:return y.key===b?c(v,x,y,E):null;case Co:return b=y._init,f(v,x,b(y._payload),E)}if(Ea(y)||ia(y))return b!==null?null:u(v,x,y,E,null);ac(v,y)}return null}function m(v,x,y,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(y)||null,a(x,v,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Yl:return v=v.get(E.key===null?y:E.key)||null,l(x,v,E,b);case Ks:return v=v.get(E.key===null?y:E.key)||null,c(x,v,E,b);case Co:var D=E._init;return m(v,x,y,D(E._payload),b)}if(Ea(E)||ia(E))return v=v.get(y)||null,u(x,v,E,b,null);ac(x,E)}return null}function g(v,x,y,E){for(var b=null,D=null,A=x,P=x=0,R=null;A!==null&&P<y.length;P++){A.index>P?(R=A,A=null):R=A.sibling;var k=f(v,A,y[P],E);if(k===null){A===null&&(A=R);break}e&&A&&k.alternate===null&&t(v,A),x=s(k,x,P),D===null?b=k:D.sibling=k,D=k,A=R}if(P===y.length)return n(v,A),vt&&ls(v,P),b;if(A===null){for(;P<y.length;P++)A=d(v,y[P],E),A!==null&&(x=s(A,x,P),D===null?b=A:D.sibling=A,D=A);return vt&&ls(v,P),b}for(A=r(v,A);P<y.length;P++)R=m(A,v,P,y[P],E),R!==null&&(e&&R.alternate!==null&&A.delete(R.key===null?P:R.key),x=s(R,x,P),D===null?b=R:D.sibling=R,D=R);return e&&A.forEach(function(T){return t(v,T)}),vt&&ls(v,P),b}function w(v,x,y,E){var b=ia(y);if(typeof b!="function")throw Error(ee(150));if(y=b.call(y),y==null)throw Error(ee(151));for(var D=b=null,A=x,P=x=0,R=null,k=y.next();A!==null&&!k.done;P++,k=y.next()){A.index>P?(R=A,A=null):R=A.sibling;var T=f(v,A,k.value,E);if(T===null){A===null&&(A=R);break}e&&A&&T.alternate===null&&t(v,A),x=s(T,x,P),D===null?b=T:D.sibling=T,D=T,A=R}if(k.done)return n(v,A),vt&&ls(v,P),b;if(A===null){for(;!k.done;P++,k=y.next())k=d(v,k.value,E),k!==null&&(x=s(k,x,P),D===null?b=k:D.sibling=k,D=k);return vt&&ls(v,P),b}for(A=r(v,A);!k.done;P++,k=y.next())k=m(A,v,P,k.value,E),k!==null&&(e&&k.alternate!==null&&A.delete(k.key===null?P:k.key),x=s(k,x,P),D===null?b=k:D.sibling=k,D=k);return e&&A.forEach(function(F){return t(v,F)}),vt&&ls(v,P),b}function C(v,x,y,E){if(typeof y=="object"&&y!==null&&y.type===Js&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Yl:e:{for(var b=y.key,D=x;D!==null;){if(D.key===b){if(b=y.type,b===Js){if(D.tag===7){n(v,D.sibling),x=o(D,y.props.children),x.return=v,v=x;break e}}else if(D.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Co&&tv(b)===D.type){n(v,D.sibling),x=o(D,y.props),x.ref=da(v,D,y),x.return=v,v=x;break e}n(v,D);break}else t(v,D);D=D.sibling}y.type===Js?(x=Cs(y.props.children,v.mode,E,y.key),x.return=v,v=x):(E=zc(y.type,y.key,y.props,null,v.mode,E),E.ref=da(v,x,y),E.return=v,v=E)}return i(v);case Ks:e:{for(D=y.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(v,x.sibling),x=o(x,y.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=mf(y,v.mode,E),x.return=v,v=x}return i(v);case Co:return D=y._init,C(v,x,D(y._payload),E)}if(Ea(y))return g(v,x,y,E);if(ia(y))return w(v,x,y,E);ac(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(v,x.sibling),x=o(x,y),x.return=v,v=x):(n(v,x),x=pf(y,v.mode,E),x.return=v,v=x),i(v)):n(v,x)}return C}var Ni=nE(!0),rE=nE(!1),pu=es(null),mu=null,ti=null,Vp=null;function Up(){Vp=ti=mu=null}function Hp(e){var t=pu.current;ft(pu),e._currentValue=t}function hh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function pi(e,t){mu=e,Vp=ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fn=!0),e.firstContext=null)}function ar(e){var t=e._currentValue;if(Vp!==e)if(e={context:e,memoizedValue:t,next:null},ti===null){if(mu===null)throw Error(ee(308));ti=e,mu.dependencies={lanes:0,firstContext:e}}else ti=ti.next=e;return t}var hs=null;function Wp(e){hs===null?hs=[e]:hs.push(e)}function oE(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Wp(t)):(n.next=o.next,o.next=n),t.interleaved=n,oo(e,r)}function oo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Eo=!1;function Kp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,oo(e,n)}return o=r.interleaved,o===null?(t.next=t,Wp(r)):(t.next=o.next,o.next=t),r.interleaved=t,oo(e,n)}function jc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fp(e,n)}}function nv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function gu(e,t,n,r){var o=e.updateQueue;Eo=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=o.baseState;i=0,u=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,w=a;switch(f=t,m=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){d=g.call(m,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(m,d,f):g,f==null)break e;d=At({},d,f);break e;case 2:Eo=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,i|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Ps|=i,e.lanes=i,e.memoizedState=d}}function rv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ee(191,o));o.call(r)}}}var Tl={},Br=es(Tl),ol=es(Tl),sl=es(Tl);function ps(e){if(e===Tl)throw Error(ee(174));return e}function Jp(e,t){switch(lt(sl,t),lt(ol,e),lt(Br,Tl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:J0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=J0(t,e)}ft(Br),lt(Br,t)}function Ii(){ft(Br),ft(ol),ft(sl)}function iE(e){ps(sl.current);var t=ps(Br.current),n=J0(t,e.type);t!==n&&(lt(ol,e),lt(Br,n))}function Gp(e){ol.current===e&&(ft(Br),ft(ol))}var Ct=es(0);function xu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lf=[];function qp(){for(var e=0;e<lf.length;e++)lf[e]._workInProgressVersionPrimary=null;lf.length=0}var _c=uo.ReactCurrentDispatcher,cf=uo.ReactCurrentBatchConfig,As=0,Dt=null,$t=null,Ut=null,vu=!1,ja=!1,il=0,zT=0;function an(){throw Error(ee(321))}function Yp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!br(e[n],t[n]))return!1;return!0}function Xp(e,t,n,r,o,s){if(As=s,Dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_c.current=e===null||e.memoizedState===null?WT:KT,e=n(r,o),ja){s=0;do{if(ja=!1,il=0,25<=s)throw Error(ee(301));s+=1,Ut=$t=null,t.updateQueue=null,_c.current=JT,e=n(r,o)}while(ja)}if(_c.current=yu,t=$t!==null&&$t.next!==null,As=0,Ut=$t=Dt=null,vu=!1,t)throw Error(ee(300));return e}function Qp(){var e=il!==0;return il=0,e}function Rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Dt.memoizedState=Ut=e:Ut=Ut.next=e,Ut}function lr(){if($t===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var t=Ut===null?Dt.memoizedState:Ut.next;if(t!==null)Ut=t,$t=e;else{if(e===null)throw Error(ee(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Ut===null?Dt.memoizedState=Ut=e:Ut=Ut.next=e}return Ut}function al(e,t){return typeof t=="function"?t(e):t}function uf(e){var t=lr(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=$t,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var u=c.lane;if((As&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,Dt.lanes|=u,Ps|=u}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,br(r,t.memoizedState)||(Fn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Dt.lanes|=s,Ps|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function df(e){var t=lr(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);br(s,t.memoizedState)||(Fn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function aE(){}function lE(e,t){var n=Dt,r=lr(),o=t(),s=!br(r.memoizedState,o);if(s&&(r.memoizedState=o,Fn=!0),r=r.queue,Zp(dE.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,ll(9,uE.bind(null,n,r,o,t),void 0,null),Wt===null)throw Error(ee(349));As&30||cE(n,t,o)}return o}function cE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uE(e,t,n,r){t.value=n,t.getSnapshot=r,fE(t)&&hE(e)}function dE(e,t,n){return n(function(){fE(t)&&hE(e)})}function fE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!br(e,n)}catch{return!0}}function hE(e){var t=oo(e,1);t!==null&&Cr(t,e,1,-1)}function ov(e){var t=Rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:e},t.queue=e,e=e.dispatch=HT.bind(null,Dt,e),[t.memoizedState,e]}function ll(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pE(){return lr().memoizedState}function Bc(e,t,n,r){var o=Rr();Dt.flags|=e,o.memoizedState=ll(1|t,n,void 0,r===void 0?null:r)}function Xu(e,t,n,r){var o=lr();r=r===void 0?null:r;var s=void 0;if($t!==null){var i=$t.memoizedState;if(s=i.destroy,r!==null&&Yp(r,i.deps)){o.memoizedState=ll(t,n,s,r);return}}Dt.flags|=e,o.memoizedState=ll(1|t,n,s,r)}function sv(e,t){return Bc(8390656,8,e,t)}function Zp(e,t){return Xu(2048,8,e,t)}function mE(e,t){return Xu(4,2,e,t)}function gE(e,t){return Xu(4,4,e,t)}function xE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vE(e,t,n){return n=n!=null?n.concat([e]):null,Xu(4,4,xE.bind(null,t,e),n)}function em(){}function yE(e,t){var n=lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wE(e,t){var n=lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function CE(e,t,n){return As&21?(br(n,t)||(n=AC(),Dt.lanes|=n,Ps|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fn=!0),e.memoizedState=n)}function VT(e,t){var n=et;et=n!==0&&4>n?n:4,e(!0);var r=cf.transition;cf.transition={};try{e(!1),t()}finally{et=n,cf.transition=r}}function EE(){return lr().memoizedState}function UT(e,t,n){var r=$o(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SE(e))bE(t,n);else if(n=oE(e,t,n,r),n!==null){var o=yn();Cr(n,e,r,o),DE(n,t,r)}}function HT(e,t,n){var r=$o(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SE(e))bE(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,br(a,i)){var l=t.interleaved;l===null?(o.next=o,Wp(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=oE(e,t,o,r),n!==null&&(o=yn(),Cr(n,e,r,o),DE(n,t,r))}}function SE(e){var t=e.alternate;return e===Dt||t!==null&&t===Dt}function bE(e,t){ja=vu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function DE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fp(e,n)}}var yu={readContext:ar,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},WT={readContext:ar,useCallback:function(e,t){return Rr().memoizedState=[e,t===void 0?null:t],e},useContext:ar,useEffect:sv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Bc(4194308,4,xE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bc(4,2,e,t)},useMemo:function(e,t){var n=Rr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=UT.bind(null,Dt,e),[r.memoizedState,e]},useRef:function(e){var t=Rr();return e={current:e},t.memoizedState=e},useState:ov,useDebugValue:em,useDeferredValue:function(e){return Rr().memoizedState=e},useTransition:function(){var e=ov(!1),t=e[0];return e=VT.bind(null,e[1]),Rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Dt,o=Rr();if(vt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=t(),Wt===null)throw Error(ee(349));As&30||cE(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,sv(dE.bind(null,r,s,e),[e]),r.flags|=2048,ll(9,uE.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rr(),t=Wt.identifierPrefix;if(vt){var n=Xr,r=Yr;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=il++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},KT={readContext:ar,useCallback:yE,useContext:ar,useEffect:Zp,useImperativeHandle:vE,useInsertionEffect:mE,useLayoutEffect:gE,useMemo:wE,useReducer:uf,useRef:pE,useState:function(){return uf(al)},useDebugValue:em,useDeferredValue:function(e){var t=lr();return CE(t,$t.memoizedState,e)},useTransition:function(){var e=uf(al)[0],t=lr().memoizedState;return[e,t]},useMutableSource:aE,useSyncExternalStore:lE,useId:EE,unstable_isNewReconciler:!1},JT={readContext:ar,useCallback:yE,useContext:ar,useEffect:Zp,useImperativeHandle:vE,useInsertionEffect:mE,useLayoutEffect:gE,useMemo:wE,useReducer:df,useRef:pE,useState:function(){return df(al)},useDebugValue:em,useDeferredValue:function(e){var t=lr();return $t===null?t.memoizedState=e:CE(t,$t.memoizedState,e)},useTransition:function(){var e=df(al)[0],t=lr().memoizedState;return[e,t]},useMutableSource:aE,useSyncExternalStore:lE,useId:EE,unstable_isNewReconciler:!1};function mr(e,t){if(e&&e.defaultProps){t=At({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ph(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:At({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qu={isMounted:function(e){return(e=e._reactInternals)?Is(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=yn(),o=$o(e),s=Zr(r,o);s.payload=t,n!=null&&(s.callback=n),t=Lo(e,s,o),t!==null&&(Cr(t,e,o,r),jc(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=yn(),o=$o(e),s=Zr(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Lo(e,s,o),t!==null&&(Cr(t,e,o,r),jc(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yn(),r=$o(e),o=Zr(n,r);o.tag=2,t!=null&&(o.callback=t),t=Lo(e,o,r),t!==null&&(Cr(t,e,r,n),jc(t,e,r))}};function iv(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!el(n,r)||!el(o,s):!0}function AE(e,t,n){var r=!1,o=Jo,s=t.contextType;return typeof s=="object"&&s!==null?s=ar(s):(o=Nn(t)?bs:pn.current,r=t.contextTypes,s=(r=r!=null)?Fi(e,o):Jo),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function av(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qu.enqueueReplaceState(t,t.state,null)}function mh(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Kp(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=ar(s):(s=Nn(t)?bs:pn.current,o.context=Fi(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ph(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Qu.enqueueReplaceState(o,o.state,null),gu(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ji(e,t){try{var n="",r=t;do n+=Ck(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function ff(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var GT=typeof WeakMap=="function"?WeakMap:Map;function PE(e,t,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Cu||(Cu=!0,Ah=r),gh(e,t)},n}function kE(e,t,n){n=Zr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){gh(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gh(e,t),typeof r!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function lv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new GT;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=lR.bind(null,e,t,n),t.then(e,e))}function cv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uv(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zr(-1,1),t.tag=2,Lo(n,t,1))),n.lanes|=1),e)}var qT=uo.ReactCurrentOwner,Fn=!1;function xn(e,t,n,r){t.child=e===null?rE(t,null,n,r):Ni(t,e.child,n,r)}function dv(e,t,n,r,o){n=n.render;var s=t.ref;return pi(t,o),r=Xp(e,t,n,r,s,o),n=Qp(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,so(e,t,o)):(vt&&n&&Op(t),t.flags|=1,xn(e,t,r,o),t.child)}function fv(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!lm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,TE(e,t,s,r,o)):(e=zc(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(i,r)&&e.ref===t.ref)return so(e,t,o)}return t.flags|=1,e=zo(s,r),e.ref=t.ref,e.return=t,t.child=e}function TE(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(el(s,r)&&e.ref===t.ref)if(Fn=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Fn=!0);else return t.lanes=e.lanes,so(e,t,o)}return xh(e,t,n,r,o)}function RE(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ri,Ln),Ln|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lt(ri,Ln),Ln|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,lt(ri,Ln),Ln|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,lt(ri,Ln),Ln|=r;return xn(e,t,o,n),t.child}function FE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xh(e,t,n,r,o){var s=Nn(n)?bs:pn.current;return s=Fi(t,s),pi(t,o),n=Xp(e,t,n,r,s,o),r=Qp(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,so(e,t,o)):(vt&&r&&Op(t),t.flags|=1,xn(e,t,n,o),t.child)}function hv(e,t,n,r,o){if(Nn(n)){var s=!0;du(t)}else s=!1;if(pi(t,o),t.stateNode===null)Lc(e,t),AE(t,n,r),mh(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=ar(c):(c=Nn(n)?bs:pn.current,c=Fi(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&av(t,i,r,c),Eo=!1;var f=t.memoizedState;i.state=f,gu(t,r,i,o),l=t.memoizedState,a!==r||f!==l||Mn.current||Eo?(typeof u=="function"&&(ph(t,n,u,r),l=t.memoizedState),(a=Eo||iv(t,n,a,r,f,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,sE(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:mr(t.type,a),i.props=c,d=t.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=ar(l):(l=Nn(n)?bs:pn.current,l=Fi(t,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==l)&&av(t,i,r,l),Eo=!1,f=t.memoizedState,i.state=f,gu(t,r,i,o);var g=t.memoizedState;a!==d||f!==g||Mn.current||Eo?(typeof m=="function"&&(ph(t,n,m,r),g=t.memoizedState),(c=Eo||iv(t,n,c,r,f,g,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return vh(e,t,n,r,s,o)}function vh(e,t,n,r,o,s){FE(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Qx(t,n,!1),so(e,t,s);r=t.stateNode,qT.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Ni(t,e.child,null,s),t.child=Ni(t,null,a,s)):xn(e,t,a,s),t.memoizedState=r.state,o&&Qx(t,n,!0),t.child}function ME(e){var t=e.stateNode;t.pendingContext?Xx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xx(e,t.context,!1),Jp(e,t.containerInfo)}function pv(e,t,n,r,o){return Mi(),zp(o),t.flags|=256,xn(e,t,n,r),t.child}var yh={dehydrated:null,treeContext:null,retryLane:0};function wh(e){return{baseLanes:e,cachePool:null,transitions:null}}function NE(e,t,n){var r=t.pendingProps,o=Ct.current,s=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),lt(Ct,o&1),e===null)return fh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=td(i,r,0,null),e=Cs(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=wh(n),t.memoizedState=yh,e):tm(t,i));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return YT(e,t,i,r,a,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=zo(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=zo(a,s):(s=Cs(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?wh(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=yh,r}return s=e.child,e=s.sibling,r=zo(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function tm(e,t){return t=td({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lc(e,t,n,r){return r!==null&&zp(r),Ni(t,e.child,null,n),e=tm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YT(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=ff(Error(ee(422))),lc(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=td({mode:"visible",children:r.children},o,0,null),s=Cs(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ni(t,e.child,null,i),t.child.memoizedState=wh(i),t.memoizedState=yh,s);if(!(t.mode&1))return lc(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ee(419)),r=ff(s,r,void 0),lc(e,t,i,r)}if(a=(i&e.childLanes)!==0,Fn||a){if(r=Wt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,oo(e,o),Cr(r,e,o,-1))}return am(),r=ff(Error(ee(421))),lc(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=cR.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Vn=Bo(o.nextSibling),Un=t,vt=!0,yr=null,e!==null&&(tr[nr++]=Yr,tr[nr++]=Xr,tr[nr++]=Ds,Yr=e.id,Xr=e.overflow,Ds=t),t=tm(t,r.children),t.flags|=4096,t)}function mv(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hh(e.return,t,n)}function hf(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function IE(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(xn(e,t,r.children,n),r=Ct.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mv(e,n,t);else if(e.tag===19)mv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(Ct,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&xu(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),hf(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&xu(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}hf(t,!0,n,null,s);break;case"together":hf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function so(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ps|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,n=zo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XT(e,t,n){switch(t.tag){case 3:ME(t),Mi();break;case 5:iE(t);break;case 1:Nn(t.type)&&du(t);break;case 4:Jp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;lt(pu,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(lt(Ct,Ct.current&1),t.flags|=128,null):n&t.child.childLanes?NE(e,t,n):(lt(Ct,Ct.current&1),e=so(e,t,n),e!==null?e.sibling:null);lt(Ct,Ct.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return IE(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),lt(Ct,Ct.current),r)break;return null;case 22:case 23:return t.lanes=0,RE(e,t,n)}return so(e,t,n)}var jE,Ch,_E,BE;jE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ch=function(){};_E=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ps(Br.current);var s=null;switch(n){case"input":o=U0(e,o),r=U0(e,r),s=[];break;case"select":o=At({},o,{value:void 0}),r=At({},r,{value:void 0}),s=[];break;case"textarea":o=K0(e,o),r=K0(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=cu)}G0(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ja.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ja.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&dt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};BE=function(e,t,n,r){n!==r&&(t.flags|=4)};function fa(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ln(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function QT(e,t,n){var r=t.pendingProps;switch($p(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(t),null;case 1:return Nn(t.type)&&uu(),ln(t),null;case 3:return r=t.stateNode,Ii(),ft(Mn),ft(pn),qp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ic(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yr!==null&&(Th(yr),yr=null))),Ch(e,t),ln(t),null;case 5:Gp(t);var o=ps(sl.current);if(n=t.type,e!==null&&t.stateNode!=null)_E(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return ln(t),null}if(e=ps(Br.current),ic(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ir]=t,r[rl]=s,e=(t.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(o=0;o<ba.length;o++)dt(ba[o],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":bx(r,s),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dt("invalid",r);break;case"textarea":Ax(r,s),dt("invalid",r)}G0(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sc(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sc(r.textContent,a,e),o=["children",""+a]):Ja.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&dt("scroll",r)}switch(n){case"input":Xl(r),Dx(r,s,!0);break;case"textarea":Xl(r),Px(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=cu)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dC(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Ir]=t,e[rl]=r,jE(e,t,!1,!1),t.stateNode=e;e:{switch(i=q0(n,r),n){case"dialog":dt("cancel",e),dt("close",e),o=r;break;case"iframe":case"object":case"embed":dt("load",e),o=r;break;case"video":case"audio":for(o=0;o<ba.length;o++)dt(ba[o],e);o=r;break;case"source":dt("error",e),o=r;break;case"img":case"image":case"link":dt("error",e),dt("load",e),o=r;break;case"details":dt("toggle",e),o=r;break;case"input":bx(e,r),o=U0(e,r),dt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=At({},r,{value:void 0}),dt("invalid",e);break;case"textarea":Ax(e,r),o=K0(e,r),dt("invalid",e);break;default:o=r}G0(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?pC(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&fC(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ga(e,l):typeof l=="number"&&Ga(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ja.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dt("scroll",e):l!=null&&Dp(e,s,l,i))}switch(n){case"input":Xl(e),Dx(e,r,!1);break;case"textarea":Xl(e),Px(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ko(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ui(e,!!r.multiple,s,!1):r.defaultValue!=null&&ui(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ln(t),null;case 6:if(e&&t.stateNode!=null)BE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(n=ps(sl.current),ps(Br.current),ic(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ir]=t,(s=r.nodeValue!==n)&&(e=Un,e!==null))switch(e.tag){case 3:sc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sc(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ir]=t,t.stateNode=r}return ln(t),null;case 13:if(ft(Ct),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&Vn!==null&&t.mode&1&&!(t.flags&128))tE(),Mi(),t.flags|=98560,s=!1;else if(s=ic(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ee(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[Ir]=t}else Mi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ln(t),s=!1}else yr!==null&&(Th(yr),yr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ct.current&1?zt===0&&(zt=3):am())),t.updateQueue!==null&&(t.flags|=4),ln(t),null);case 4:return Ii(),Ch(e,t),e===null&&tl(t.stateNode.containerInfo),ln(t),null;case 10:return Hp(t.type._context),ln(t),null;case 17:return Nn(t.type)&&uu(),ln(t),null;case 19:if(ft(Ct),s=t.memoizedState,s===null)return ln(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)fa(s,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=xu(e),i!==null){for(t.flags|=128,fa(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lt(Ct,Ct.current&1|2),t.child}e=e.sibling}s.tail!==null&&It()>_i&&(t.flags|=128,r=!0,fa(s,!1),t.lanes=4194304)}else{if(!r)if(e=xu(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!vt)return ln(t),null}else 2*It()-s.renderingStartTime>_i&&n!==1073741824&&(t.flags|=128,r=!0,fa(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=It(),t.sibling=null,n=Ct.current,lt(Ct,r?n&1|2:n&1),t):(ln(t),null);case 22:case 23:return im(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ln&1073741824&&(ln(t),t.subtreeFlags&6&&(t.flags|=8192)):ln(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function ZT(e,t){switch($p(t),t.tag){case 1:return Nn(t.type)&&uu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ii(),ft(Mn),ft(pn),qp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Gp(t),null;case 13:if(ft(Ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ft(Ct),null;case 4:return Ii(),null;case 10:return Hp(t.type._context),null;case 22:case 23:return im(),null;case 24:return null;default:return null}}var cc=!1,dn=!1,eR=typeof WeakSet=="function"?WeakSet:Set,le=null;function ni(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(e,t,r)}else n.current=null}function Eh(e,t,n){try{n()}catch(r){Rt(e,t,r)}}var gv=!1;function tR(e,t){if(sh=iu,e=VC(),Lp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var m;d!==n||o!==0&&d.nodeType!==3||(a=i+o),d!==s||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++c===o&&(a=i),f===s&&++u===r&&(l=i),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ih={focusedElem:e,selectionRange:n},iu=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,C=g.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?w:mr(t.type,w),C);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(E){Rt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return g=gv,gv=!1,g}function _a(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Eh(t,n,s)}o=o.next}while(o!==r)}}function Zu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Sh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function LE(e){var t=e.alternate;t!==null&&(e.alternate=null,LE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ir],delete t[rl],delete t[ch],delete t[BT],delete t[LT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function OE(e){return e.tag===5||e.tag===3||e.tag===4}function xv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||OE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=cu));else if(r!==4&&(e=e.child,e!==null))for(bh(e,t,n),e=e.sibling;e!==null;)bh(e,t,n),e=e.sibling}function Dh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Dh(e,t,n),e=e.sibling;e!==null;)Dh(e,t,n),e=e.sibling}var Xt=null,vr=!1;function mo(e,t,n){for(n=n.child;n!==null;)$E(e,t,n),n=n.sibling}function $E(e,t,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Wu,n)}catch{}switch(n.tag){case 5:dn||ni(n,t);case 6:var r=Xt,o=vr;Xt=null,mo(e,t,n),Xt=r,vr=o,Xt!==null&&(vr?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(vr?(e=Xt,n=n.stateNode,e.nodeType===8?sf(e.parentNode,n):e.nodeType===1&&sf(e,n),Qa(e)):sf(Xt,n.stateNode));break;case 4:r=Xt,o=vr,Xt=n.stateNode.containerInfo,vr=!0,mo(e,t,n),Xt=r,vr=o;break;case 0:case 11:case 14:case 15:if(!dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Eh(n,t,i),o=o.next}while(o!==r)}mo(e,t,n);break;case 1:if(!dn&&(ni(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Rt(n,t,a)}mo(e,t,n);break;case 21:mo(e,t,n);break;case 22:n.mode&1?(dn=(r=dn)||n.memoizedState!==null,mo(e,t,n),dn=r):mo(e,t,n);break;default:mo(e,t,n)}}function vv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eR),t.forEach(function(r){var o=uR.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function fr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,vr=!1;break e;case 3:Xt=a.stateNode.containerInfo,vr=!0;break e;case 4:Xt=a.stateNode.containerInfo,vr=!0;break e}a=a.return}if(Xt===null)throw Error(ee(160));$E(s,i,o),Xt=null,vr=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Rt(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zE(t,e),t=t.sibling}function zE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fr(t,e),Tr(e),r&4){try{_a(3,e,e.return),Zu(3,e)}catch(w){Rt(e,e.return,w)}try{_a(5,e,e.return)}catch(w){Rt(e,e.return,w)}}break;case 1:fr(t,e),Tr(e),r&512&&n!==null&&ni(n,n.return);break;case 5:if(fr(t,e),Tr(e),r&512&&n!==null&&ni(n,n.return),e.flags&32){var o=e.stateNode;try{Ga(o,"")}catch(w){Rt(e,e.return,w)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cC(o,s),q0(a,i);var c=q0(a,s);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];u==="style"?pC(o,d):u==="dangerouslySetInnerHTML"?fC(o,d):u==="children"?Ga(o,d):Dp(o,u,d,c)}switch(a){case"input":H0(o,s);break;case"textarea":uC(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ui(o,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?ui(o,!!s.multiple,s.defaultValue,!0):ui(o,!!s.multiple,s.multiple?[]:"",!1))}o[rl]=s}catch(w){Rt(e,e.return,w)}}break;case 6:if(fr(t,e),Tr(e),r&4){if(e.stateNode===null)throw Error(ee(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(w){Rt(e,e.return,w)}}break;case 3:if(fr(t,e),Tr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qa(t.containerInfo)}catch(w){Rt(e,e.return,w)}break;case 4:fr(t,e),Tr(e);break;case 13:fr(t,e),Tr(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(om=It())),r&4&&vv(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(dn=(c=dn)||u,fr(t,e),dn=c):fr(t,e),Tr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(le=e,u=e.child;u!==null;){for(d=le=u;le!==null;){switch(f=le,m=f.child,f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return);break;case 1:ni(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){Rt(r,n,w)}}break;case 5:ni(f,f.return);break;case 22:if(f.memoizedState!==null){wv(d);continue}}m!==null?(m.return=f,le=m):wv(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{o=d.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hC("display",i))}catch(w){Rt(e,e.return,w)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){Rt(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fr(t,e),Tr(e),r&4&&vv(e);break;case 21:break;default:fr(t,e),Tr(e)}}function Tr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(OE(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ga(o,""),r.flags&=-33);var s=xv(e);Dh(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=xv(e);bh(e,a,i);break;default:throw Error(ee(161))}}catch(l){Rt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nR(e,t,n){le=e,VE(e)}function VE(e,t,n){for(var r=(e.mode&1)!==0;le!==null;){var o=le,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||cc;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||dn;a=cc;var c=dn;if(cc=i,(dn=l)&&!c)for(le=o;le!==null;)i=le,l=i.child,i.tag===22&&i.memoizedState!==null?Cv(o):l!==null?(l.return=i,le=l):Cv(o);for(;s!==null;)le=s,VE(s),s=s.sibling;le=o,cc=a,dn=c}yv(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,le=s):yv(e)}}function yv(e){for(;le!==null;){var t=le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dn||Zu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:mr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&rv(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}rv(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Qa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}dn||t.flags&512&&Sh(t)}catch(f){Rt(t,t.return,f)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function wv(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function Cv(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zu(4,t)}catch(l){Rt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){Rt(t,o,l)}}var s=t.return;try{Sh(t)}catch(l){Rt(t,s,l)}break;case 5:var i=t.return;try{Sh(t)}catch(l){Rt(t,i,l)}}}catch(l){Rt(t,t.return,l)}if(t===e){le=null;break}var a=t.sibling;if(a!==null){a.return=t.return,le=a;break}le=t.return}}var rR=Math.ceil,wu=uo.ReactCurrentDispatcher,nm=uo.ReactCurrentOwner,sr=uo.ReactCurrentBatchConfig,Ve=0,Wt=null,Bt=null,en=0,Ln=0,ri=es(0),zt=0,cl=null,Ps=0,ed=0,rm=0,Ba=null,Tn=null,om=0,_i=1/0,Gr=null,Cu=!1,Ah=null,Oo=null,uc=!1,Mo=null,Eu=0,La=0,Ph=null,Oc=-1,$c=0;function yn(){return Ve&6?It():Oc!==-1?Oc:Oc=It()}function $o(e){return e.mode&1?Ve&2&&en!==0?en&-en:$T.transition!==null?($c===0&&($c=AC()),$c):(e=et,e!==0||(e=window.event,e=e===void 0?16:NC(e.type)),e):1}function Cr(e,t,n,r){if(50<La)throw La=0,Ph=null,Error(ee(185));Al(e,n,r),(!(Ve&2)||e!==Wt)&&(e===Wt&&(!(Ve&2)&&(ed|=n),zt===4&&Do(e,en)),In(e,r),n===1&&Ve===0&&!(t.mode&1)&&(_i=It()+500,Yu&&ts()))}function In(e,t){var n=e.callbackNode;$k(e,t);var r=su(e,e===Wt?en:0);if(r===0)n!==null&&Rx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Rx(n),t===1)e.tag===0?OT(Ev.bind(null,e)):QC(Ev.bind(null,e)),jT(function(){!(Ve&6)&&ts()}),n=null;else{switch(PC(r)){case 1:n=Rp;break;case 4:n=bC;break;case 16:n=ou;break;case 536870912:n=DC;break;default:n=ou}n=YE(n,UE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function UE(e,t){if(Oc=-1,$c=0,Ve&6)throw Error(ee(327));var n=e.callbackNode;if(mi()&&e.callbackNode!==n)return null;var r=su(e,e===Wt?en:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Su(e,r);else{t=r;var o=Ve;Ve|=2;var s=WE();(Wt!==e||en!==t)&&(Gr=null,_i=It()+500,ws(e,t));do try{iR();break}catch(a){HE(e,a)}while(!0);Up(),wu.current=s,Ve=o,Bt!==null?t=0:(Wt=null,en=0,t=zt)}if(t!==0){if(t===2&&(o=eh(e),o!==0&&(r=o,t=kh(e,o))),t===1)throw n=cl,ws(e,0),Do(e,r),In(e,It()),n;if(t===6)Do(e,r);else{if(o=e.current.alternate,!(r&30)&&!oR(o)&&(t=Su(e,r),t===2&&(s=eh(e),s!==0&&(r=s,t=kh(e,s))),t===1))throw n=cl,ws(e,0),Do(e,r),In(e,It()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:cs(e,Tn,Gr);break;case 3:if(Do(e,r),(r&130023424)===r&&(t=om+500-It(),10<t)){if(su(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){yn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=lh(cs.bind(null,e,Tn,Gr),t);break}cs(e,Tn,Gr);break;case 4:if(Do(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-wr(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rR(r/1960))-r,10<r){e.timeoutHandle=lh(cs.bind(null,e,Tn,Gr),r);break}cs(e,Tn,Gr);break;case 5:cs(e,Tn,Gr);break;default:throw Error(ee(329))}}}return In(e,It()),e.callbackNode===n?UE.bind(null,e):null}function kh(e,t){var n=Ba;return e.current.memoizedState.isDehydrated&&(ws(e,t).flags|=256),e=Su(e,t),e!==2&&(t=Tn,Tn=n,t!==null&&Th(t)),e}function Th(e){Tn===null?Tn=e:Tn.push.apply(Tn,e)}function oR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!br(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Do(e,t){for(t&=~rm,t&=~ed,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-wr(t),r=1<<n;e[n]=-1,t&=~r}}function Ev(e){if(Ve&6)throw Error(ee(327));mi();var t=su(e,0);if(!(t&1))return In(e,It()),null;var n=Su(e,t);if(e.tag!==0&&n===2){var r=eh(e);r!==0&&(t=r,n=kh(e,r))}if(n===1)throw n=cl,ws(e,0),Do(e,t),In(e,It()),n;if(n===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cs(e,Tn,Gr),In(e,It()),null}function sm(e,t){var n=Ve;Ve|=1;try{return e(t)}finally{Ve=n,Ve===0&&(_i=It()+500,Yu&&ts())}}function ks(e){Mo!==null&&Mo.tag===0&&!(Ve&6)&&mi();var t=Ve;Ve|=1;var n=sr.transition,r=et;try{if(sr.transition=null,et=1,e)return e()}finally{et=r,sr.transition=n,Ve=t,!(Ve&6)&&ts()}}function im(){Ln=ri.current,ft(ri)}function ws(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,IT(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch($p(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uu();break;case 3:Ii(),ft(Mn),ft(pn),qp();break;case 5:Gp(r);break;case 4:Ii();break;case 13:ft(Ct);break;case 19:ft(Ct);break;case 10:Hp(r.type._context);break;case 22:case 23:im()}n=n.return}if(Wt=e,Bt=e=zo(e.current,null),en=Ln=t,zt=0,cl=null,rm=ed=Ps=0,Tn=Ba=null,hs!==null){for(t=0;t<hs.length;t++)if(n=hs[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}hs=null}return e}function HE(e,t){do{var n=Bt;try{if(Up(),_c.current=yu,vu){for(var r=Dt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}vu=!1}if(As=0,Ut=$t=Dt=null,ja=!1,il=0,nm.current=null,n===null||n.return===null){zt=1,cl=t,Bt=null;break}e:{var s=e,i=n.return,a=n,l=t;if(t=en,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=cv(i);if(m!==null){m.flags&=-257,uv(m,i,a,s,t),m.mode&1&&lv(s,c,t),t=m,l=c;var g=t.updateQueue;if(g===null){var w=new Set;w.add(l),t.updateQueue=w}else g.add(l);break e}else{if(!(t&1)){lv(s,c,t),am();break e}l=Error(ee(426))}}else if(vt&&a.mode&1){var C=cv(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),uv(C,i,a,s,t),zp(ji(l,a));break e}}s=l=ji(l,a),zt!==4&&(zt=2),Ba===null?Ba=[s]:Ba.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=PE(s,l,t);nv(s,v);break e;case 1:a=l;var x=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Oo===null||!Oo.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=kE(s,a,t);nv(s,E);break e}}s=s.return}while(s!==null)}JE(n)}catch(b){t=b,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function WE(){var e=wu.current;return wu.current=yu,e===null?yu:e}function am(){(zt===0||zt===3||zt===2)&&(zt=4),Wt===null||!(Ps&268435455)&&!(ed&268435455)||Do(Wt,en)}function Su(e,t){var n=Ve;Ve|=2;var r=WE();(Wt!==e||en!==t)&&(Gr=null,ws(e,t));do try{sR();break}catch(o){HE(e,o)}while(!0);if(Up(),Ve=n,wu.current=r,Bt!==null)throw Error(ee(261));return Wt=null,en=0,zt}function sR(){for(;Bt!==null;)KE(Bt)}function iR(){for(;Bt!==null&&!Fk();)KE(Bt)}function KE(e){var t=qE(e.alternate,e,Ln);e.memoizedProps=e.pendingProps,t===null?JE(e):Bt=t,nm.current=null}function JE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ZT(n,t),n!==null){n.flags&=32767,Bt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,Bt=null;return}}else if(n=QT(n,t,Ln),n!==null){Bt=n;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);zt===0&&(zt=5)}function cs(e,t,n){var r=et,o=sr.transition;try{sr.transition=null,et=1,aR(e,t,n,r)}finally{sr.transition=o,et=r}return null}function aR(e,t,n,r){do mi();while(Mo!==null);if(Ve&6)throw Error(ee(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(zk(e,s),e===Wt&&(Bt=Wt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uc||(uc=!0,YE(ou,function(){return mi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sr.transition,sr.transition=null;var i=et;et=1;var a=Ve;Ve|=4,nm.current=null,tR(e,n),zE(n,e),PT(ih),iu=!!sh,ih=sh=null,e.current=n,nR(n),Mk(),Ve=a,et=i,sr.transition=s}else e.current=n;if(uc&&(uc=!1,Mo=e,Eu=o),s=e.pendingLanes,s===0&&(Oo=null),jk(n.stateNode),In(e,It()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Cu)throw Cu=!1,e=Ah,Ah=null,e;return Eu&1&&e.tag!==0&&mi(),s=e.pendingLanes,s&1?e===Ph?La++:(La=0,Ph=e):La=0,ts(),null}function mi(){if(Mo!==null){var e=PC(Eu),t=sr.transition,n=et;try{if(sr.transition=null,et=16>e?16:e,Mo===null)var r=!1;else{if(e=Mo,Mo=null,Eu=0,Ve&6)throw Error(ee(331));var o=Ve;for(Ve|=4,le=e.current;le!==null;){var s=le,i=s.child;if(le.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(le=c;le!==null;){var u=le;switch(u.tag){case 0:case 11:case 15:_a(8,u,s)}var d=u.child;if(d!==null)d.return=u,le=d;else for(;le!==null;){u=le;var f=u.sibling,m=u.return;if(LE(u),u===c){le=null;break}if(f!==null){f.return=m,le=f;break}le=m}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}le=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,le=i;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_a(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,le=v;break e}le=s.return}}var x=e.current;for(le=x;le!==null;){i=le;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,le=y;else e:for(i=x;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zu(9,a)}}catch(b){Rt(a,a.return,b)}if(a===i){le=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,le=E;break e}le=a.return}}if(Ve=o,ts(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Wu,e)}catch{}r=!0}return r}finally{et=n,sr.transition=t}}return!1}function Sv(e,t,n){t=ji(n,t),t=PE(e,t,1),e=Lo(e,t,1),t=yn(),e!==null&&(Al(e,1,t),In(e,t))}function Rt(e,t,n){if(e.tag===3)Sv(e,e,n);else for(;t!==null;){if(t.tag===3){Sv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oo===null||!Oo.has(r))){e=ji(n,e),e=kE(t,e,1),t=Lo(t,e,1),e=yn(),t!==null&&(Al(t,1,e),In(t,e));break}}t=t.return}}function lR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=yn(),e.pingedLanes|=e.suspendedLanes&n,Wt===e&&(en&n)===n&&(zt===4||zt===3&&(en&130023424)===en&&500>It()-om?ws(e,0):rm|=n),In(e,t)}function GE(e,t){t===0&&(e.mode&1?(t=ec,ec<<=1,!(ec&130023424)&&(ec=4194304)):t=1);var n=yn();e=oo(e,t),e!==null&&(Al(e,t,n),In(e,n))}function cR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),GE(e,n)}function uR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),GE(e,n)}var qE;qE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mn.current)Fn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Fn=!1,XT(e,t,n);Fn=!!(e.flags&131072)}else Fn=!1,vt&&t.flags&1048576&&ZC(t,hu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Lc(e,t),e=t.pendingProps;var o=Fi(t,pn.current);pi(t,n),o=Xp(null,t,r,e,o,n);var s=Qp();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nn(r)?(s=!0,du(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Kp(t),o.updater=Qu,t.stateNode=o,o._reactInternals=t,mh(t,r,e,n),t=vh(null,t,r,!0,s,n)):(t.tag=0,vt&&s&&Op(t),xn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Lc(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=fR(r),e=mr(r,e),o){case 0:t=xh(null,t,r,e,n);break e;case 1:t=hv(null,t,r,e,n);break e;case 11:t=dv(null,t,r,e,n);break e;case 14:t=fv(null,t,r,mr(r.type,e),n);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:mr(r,o),xh(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:mr(r,o),hv(e,t,r,o,n);case 3:e:{if(ME(t),e===null)throw Error(ee(387));r=t.pendingProps,s=t.memoizedState,o=s.element,sE(e,t),gu(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=ji(Error(ee(423)),t),t=pv(e,t,r,n,o);break e}else if(r!==o){o=ji(Error(ee(424)),t),t=pv(e,t,r,n,o);break e}else for(Vn=Bo(t.stateNode.containerInfo.firstChild),Un=t,vt=!0,yr=null,n=rE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mi(),r===o){t=so(e,t,n);break e}xn(e,t,r,n)}t=t.child}return t;case 5:return iE(t),e===null&&fh(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,ah(r,o)?i=null:s!==null&&ah(r,s)&&(t.flags|=32),FE(e,t),xn(e,t,i,n),t.child;case 6:return e===null&&fh(t),null;case 13:return NE(e,t,n);case 4:return Jp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ni(t,null,r,n):xn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:mr(r,o),dv(e,t,r,o,n);case 7:return xn(e,t,t.pendingProps,n),t.child;case 8:return xn(e,t,t.pendingProps.children,n),t.child;case 12:return xn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,lt(pu,r._currentValue),r._currentValue=i,s!==null)if(br(s.value,i)){if(s.children===o.children&&!Mn.current){t=so(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hh(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(ee(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),hh(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}xn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,pi(t,n),o=ar(o),r=r(o),t.flags|=1,xn(e,t,r,n),t.child;case 14:return r=t.type,o=mr(r,t.pendingProps),o=mr(r.type,o),fv(e,t,r,o,n);case 15:return TE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:mr(r,o),Lc(e,t),t.tag=1,Nn(r)?(e=!0,du(t)):e=!1,pi(t,n),AE(t,r,o),mh(t,r,o,n),vh(null,t,r,!0,e,n);case 19:return IE(e,t,n);case 22:return RE(e,t,n)}throw Error(ee(156,t.tag))};function YE(e,t){return SC(e,t)}function dR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(e,t,n,r){return new dR(e,t,n,r)}function lm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fR(e){if(typeof e=="function")return lm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pp)return 11;if(e===kp)return 14}return 2}function zo(e,t){var n=e.alternate;return n===null?(n=or(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")lm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Js:return Cs(n.children,o,s,t);case Ap:i=8,o|=8;break;case O0:return e=or(12,n,t,o|2),e.elementType=O0,e.lanes=s,e;case $0:return e=or(13,n,t,o),e.elementType=$0,e.lanes=s,e;case z0:return e=or(19,n,t,o),e.elementType=z0,e.lanes=s,e;case iC:return td(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oC:i=10;break e;case sC:i=9;break e;case Pp:i=11;break e;case kp:i=14;break e;case Co:i=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=or(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Cs(e,t,n,r){return e=or(7,e,r,t),e.lanes=n,e}function td(e,t,n,r){return e=or(22,e,r,t),e.elementType=iC,e.lanes=n,e.stateNode={isHidden:!1},e}function pf(e,t,n){return e=or(6,e,null,t),e.lanes=n,e}function mf(e,t,n){return t=or(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hR(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gd(0),this.expirationTimes=Gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gd(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function cm(e,t,n,r,o,s,i,a,l){return e=new hR(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=or(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kp(s),e}function pR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ks,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function XE(e){if(!e)return Jo;e=e._reactInternals;e:{if(Is(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var n=e.type;if(Nn(n))return XC(e,n,t)}return t}function QE(e,t,n,r,o,s,i,a,l){return e=cm(n,r,!0,e,o,s,i,a,l),e.context=XE(null),n=e.current,r=yn(),o=$o(n),s=Zr(r,o),s.callback=t??null,Lo(n,s,o),e.current.lanes=o,Al(e,o,r),In(e,r),e}function nd(e,t,n,r){var o=t.current,s=yn(),i=$o(o);return n=XE(n),t.context===null?t.context=n:t.pendingContext=n,t=Zr(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Lo(o,t,i),e!==null&&(Cr(e,o,i,s),jc(e,o,i)),i}function bu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function um(e,t){bv(e,t),(e=e.alternate)&&bv(e,t)}function mR(){return null}var ZE=typeof reportError=="function"?reportError:function(e){console.error(e)};function dm(e){this._internalRoot=e}rd.prototype.render=dm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));nd(e,t,null,null)};rd.prototype.unmount=dm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ks(function(){nd(null,e,null,null)}),t[ro]=null}};function rd(e){this._internalRoot=e}rd.prototype.unstable_scheduleHydration=function(e){if(e){var t=RC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bo.length&&t!==0&&t<bo[n].priority;n++);bo.splice(n,0,e),n===0&&MC(e)}};function fm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function od(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Dv(){}function gR(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=bu(i);s.call(c)}}var i=QE(t,r,e,0,null,!1,!1,"",Dv);return e._reactRootContainer=i,e[ro]=i.current,tl(e.nodeType===8?e.parentNode:e),ks(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=bu(l);a.call(c)}}var l=cm(e,0,!1,null,null,!1,!1,"",Dv);return e._reactRootContainer=l,e[ro]=l.current,tl(e.nodeType===8?e.parentNode:e),ks(function(){nd(t,l,n,r)}),l}function sd(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=bu(i);a.call(l)}}nd(t,i,e,o)}else i=gR(n,t,e,o,r);return bu(i)}kC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sa(t.pendingLanes);n!==0&&(Fp(t,n|1),In(t,It()),!(Ve&6)&&(_i=It()+500,ts()))}break;case 13:ks(function(){var r=oo(e,1);if(r!==null){var o=yn();Cr(r,e,1,o)}}),um(e,1)}};Mp=function(e){if(e.tag===13){var t=oo(e,134217728);if(t!==null){var n=yn();Cr(t,e,134217728,n)}um(e,134217728)}};TC=function(e){if(e.tag===13){var t=$o(e),n=oo(e,t);if(n!==null){var r=yn();Cr(n,e,t,r)}um(e,t)}};RC=function(){return et};FC=function(e,t){var n=et;try{return et=e,t()}finally{et=n}};X0=function(e,t,n){switch(t){case"input":if(H0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=qu(r);if(!o)throw Error(ee(90));lC(r),H0(r,o)}}}break;case"textarea":uC(e,n);break;case"select":t=n.value,t!=null&&ui(e,!!n.multiple,t,!1)}};xC=sm;vC=ks;var xR={usingClientEntryPoint:!1,Events:[kl,Xs,qu,mC,gC,sm]},ha={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vR={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=CC(e),e===null?null:e.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||mR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Wu=dc.inject(vR),_r=dc}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xR;Jn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(t))throw Error(ee(200));return pR(e,t,null,n)};Jn.createRoot=function(e,t){if(!fm(e))throw Error(ee(299));var n=!1,r="",o=ZE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=cm(e,1,!1,null,null,n,!1,r,o),e[ro]=t.current,tl(e.nodeType===8?e.parentNode:e),new dm(t)};Jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=CC(t),e=e===null?null:e.stateNode,e};Jn.flushSync=function(e){return ks(e)};Jn.hydrate=function(e,t,n){if(!od(t))throw Error(ee(200));return sd(null,e,t,!0,n)};Jn.hydrateRoot=function(e,t,n){if(!fm(e))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=QE(t,null,e,1,n??null,o,!1,s,i),e[ro]=t.current,tl(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new rd(t)};Jn.render=function(e,t,n){if(!od(t))throw Error(ee(200));return sd(null,e,t,!1,n)};Jn.unmountComponentAtNode=function(e){if(!od(e))throw Error(ee(40));return e._reactRootContainer?(ks(function(){sd(null,null,e,!1,function(){e._reactRootContainer=null,e[ro]=null})}),!0):!1};Jn.unstable_batchedUpdates=sm;Jn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!od(n))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return sd(e,t,n,!1,r)};Jn.version="18.3.1-next-f1338f8080-20240426";function eS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eS)}catch(e){console.error(e)}}eS(),eC.exports=Jn;var Rl=eC.exports;const yR=zw(Rl);var tS,Av=Rl;tS=Av.createRoot,Av.hydrateRoot;function wR(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,o,s,i=[],a="",l=e.split("/");for(l[0]||l.shift();o=l.shift();)n=o[0],n==="*"?(i.push(n),a+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),s=o.indexOf(".",1),i.push(o.substring(1,~r?r:~s?s:o.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+o.substring(s))):a+="/"+o;return{keys:i,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}var nS={exports:{}},rS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=h;function CR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ER=typeof Object.is=="function"?Object.is:CR,SR=Bi.useState,bR=Bi.useEffect,DR=Bi.useLayoutEffect,AR=Bi.useDebugValue;function PR(e,t){var n=t(),r=SR({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return DR(function(){o.value=n,o.getSnapshot=t,gf(o)&&s({inst:o})},[e,n,t]),bR(function(){return gf(o)&&s({inst:o}),e(function(){gf(o)&&s({inst:o})})},[e]),AR(n),n}function gf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ER(e,n)}catch{return!0}}function kR(e,t){return t()}var TR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kR:PR;rS.useSyncExternalStore=Bi.useSyncExternalStore!==void 0?Bi.useSyncExternalStore:TR;nS.exports=rS;var RR=nS.exports;const FR=Qw.useInsertionEffect,MR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NR=MR?h.useLayoutEffect:h.useEffect,IR=FR||NR,oS=e=>{const t=h.useRef([e,(...n)=>t[0](...n)]).current;return IR(()=>{t[0]=e}),t[1]},jR="popstate",hm="pushState",pm="replaceState",_R="hashchange",Pv=[jR,hm,pm,_R],BR=e=>{for(const t of Pv)addEventListener(t,e);return()=>{for(const t of Pv)removeEventListener(t,e)}},sS=(e,t)=>RR.useSyncExternalStore(BR,e,t),LR=()=>location.search,OR=({ssrSearch:e=""}={})=>sS(LR,()=>e),kv=()=>location.pathname,$R=({ssrPath:e}={})=>sS(kv,e?()=>e:kv),zR=(e,{replace:t=!1,state:n=null}={})=>history[t?pm:hm](n,"",e),VR=(e={})=>[$R(e),zR],Tv=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Tv]>"u"){for(const e of[hm,pm]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Tv,{value:!0})}const UR=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",iS=(e="")=>e==="/"?"":e,HR=(e,t)=>e[0]==="~"?e.slice(1):iS(t)+e,WR=(e="",t)=>UR(Rv(iS(e)),Rv(t)),Rv=e=>{try{return decodeURI(e)}catch{return e}},aS={hook:VR,searchHook:OR,parser:wR,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},lS=h.createContext(aS),Fl=()=>h.useContext(lS),cS={},uS=h.createContext(cS),KR=()=>h.useContext(uS),id=e=>{const[t,n]=e.hook(e);return[WR(e.base,t),oS((r,o)=>n(HR(r,e.base),o))]},mm=()=>id(Fl()),dS=(e,t,n,r)=>{const{pattern:o,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),i=o.exec(n)||[],[a,...l]=i;return a!==void 0?[!0,(()=>{const c=s!==!1?Object.fromEntries(s.map((d,f)=>[d,l[f]])):i.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},fS=({children:e,...t})=>{var u,d;const n=Fl(),r=t.hook?aS:n;let o=r;const[s,i]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=s),t.hrefs=t.hrefs??((d=t.hook)==null?void 0:d.hrefs);let a=h.useRef({}),l=a.current,c=l;for(let f in r){const m=f==="base"?r[f]+(t[f]||""):t[f]||r[f];l===c&&m!==c[f]&&(a.current=c={...c}),c[f]=m,m!==r[f]&&(o=c)}return h.createElement(lS.Provider,{value:o,children:e})},Fv=({children:e,component:t},n)=>t?h.createElement(t,{params:n}):typeof e=="function"?e(n):e,JR=e=>{let t=h.useRef(cS),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},Vs=({path:e,nest:t,match:n,...r})=>{const o=Fl(),[s]=id(o),[i,a,l]=n??dS(o.parser,e,s,t),c=JR({...KR(),...a});if(!i)return null;const u=l?h.createElement(fS,{base:l},Fv(r,c)):Fv(r,c);return h.createElement(uS.Provider,{value:c,children:u})},GR=h.forwardRef((e,t)=>{const n=Fl(),[r,o]=id(n),{to:s="",href:i=s,onClick:a,asChild:l,children:c,className:u,replace:d,state:f,...m}=e,g=oS(C=>{C.ctrlKey||C.metaKey||C.altKey||C.shiftKey||C.button!==0||(a==null||a(C),C.defaultPrevented||(C.preventDefault(),o(i,e)))}),w=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return l&&h.isValidElement(c)?h.cloneElement(c,{onClick:g,href:w}):h.createElement("a",{...m,onClick:g,href:w,className:u!=null&&u.call?u(r===i):u,children:c,ref:t})}),hS=e=>Array.isArray(e)?e.flatMap(t=>hS(t&&t.type===h.Fragment?t.props.children:t)):[e],qR=({children:e,location:t})=>{const n=Fl(),[r]=id(n);for(const o of hS(e)){let s=0;if(h.isValidElement(o)&&(s=dS(n.parser,o.props.path,t||r,o.props.nest))[0])return h.cloneElement(o,{match:s})}return null};var ad=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ld=typeof window>"u"||"Deno"in globalThis;function gr(){}function YR(e,t){return typeof e=="function"?e(t):e}function XR(e){return typeof e=="number"&&e>=0&&e!==1/0}function QR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Mv(e,t){return typeof e=="function"?e(t):e}function ZR(e,t){return typeof e=="function"?e(t):e}function Nv(e,t){const{type:n="all",exact:r,fetchStatus:o,predicate:s,queryKey:i,stale:a}=e;if(i){if(r){if(t.queryHash!==gm(i,t.options))return!1}else if(!dl(t.queryKey,i))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||o&&o!==t.state.fetchStatus||s&&!s(t))}function Iv(e,t){const{exact:n,status:r,predicate:o,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(ul(t.options.mutationKey)!==ul(s))return!1}else if(!dl(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||o&&!o(t))}function gm(e,t){return((t==null?void 0:t.queryKeyHashFn)||ul)(e)}function ul(e){return JSON.stringify(e,(t,n)=>Rh(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function dl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!dl(e[n],t[n])):!1}function pS(e,t){if(e===t)return e;const n=jv(e)&&jv(t);if(n||Rh(e)&&Rh(t)){const r=n?e:Object.keys(e),o=r.length,s=n?t:Object.keys(t),i=s.length,a=n?[]:{};let l=0;for(let c=0;c<i;c++){const u=n?c:s[c];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(a[u]=void 0,l++):(a[u]=pS(e[u],t[u]),a[u]===e[u]&&e[u]!==void 0&&l++)}return o===i&&l===o?e:a}return t}function jv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Rh(e){if(!_v(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!_v(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _v(e){return Object.prototype.toString.call(e)==="[object Object]"}function eF(e){return new Promise(t=>{setTimeout(t,e)})}function tF(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?pS(e,t):t}function nF(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function rF(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var xm=Symbol();function mS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===xm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var gs,Ao,Ci,Nw,oF=(Nw=class extends ad{constructor(){super();qe(this,gs);qe(this,Ao);qe(this,Ci);Ie(this,Ci,t=>{if(!ld&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,Ao)||this.setEventListener(G(this,Ci))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Ao))==null||t.call(this),Ie(this,Ao,void 0))}setEventListener(t){var n;Ie(this,Ci,t),(n=G(this,Ao))==null||n.call(this),Ie(this,Ao,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){G(this,gs)!==t&&(Ie(this,gs,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof G(this,gs)=="boolean"?G(this,gs):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},gs=new WeakMap,Ao=new WeakMap,Ci=new WeakMap,Nw),gS=new oF,Ei,Po,Si,Iw,sF=(Iw=class extends ad{constructor(){super();qe(this,Ei,!0);qe(this,Po);qe(this,Si);Ie(this,Si,t=>{if(!ld&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Po)||this.setEventListener(G(this,Si))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Po))==null||t.call(this),Ie(this,Po,void 0))}setEventListener(t){var n;Ie(this,Si,t),(n=G(this,Po))==null||n.call(this),Ie(this,Po,t(this.setOnline.bind(this)))}setOnline(t){G(this,Ei)!==t&&(Ie(this,Ei,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return G(this,Ei)}},Ei=new WeakMap,Po=new WeakMap,Si=new WeakMap,Iw),Du=new sF;function iF(){let e,t;const n=new Promise((o,s)=>{e=o,t=s});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),e(o)},n.reject=o=>{r({status:"rejected",reason:o}),t(o)},n}function aF(e){return Math.min(1e3*2**e,3e4)}function xS(e){return(e??"online")==="online"?Du.isOnline():!0}var vS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function xf(e){return e instanceof vS}function yS(e){let t=!1,n=0,r=!1,o;const s=iF(),i=w=>{var C;r||(f(new vS(w)),(C=e.abort)==null||C.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>gS.isFocused()&&(e.networkMode==="always"||Du.isOnline())&&e.canRun(),u=()=>xS(e.networkMode)&&e.canRun(),d=w=>{var C;r||(r=!0,(C=e.onSuccess)==null||C.call(e,w),o==null||o(),s.resolve(w))},f=w=>{var C;r||(r=!0,(C=e.onError)==null||C.call(e,w),o==null||o(),s.reject(w))},m=()=>new Promise(w=>{var C;o=v=>{(r||c())&&w(v)},(C=e.onPause)==null||C.call(e)}).then(()=>{var w;o=void 0,r||(w=e.onContinue)==null||w.call(e)}),g=()=>{if(r)return;let w;const C=n===0?e.initialPromise:void 0;try{w=C??e.fn()}catch(v){w=Promise.reject(v)}Promise.resolve(w).then(d).catch(v=>{var D;if(r)return;const x=e.retry??(ld?0:3),y=e.retryDelay??aF,E=typeof y=="function"?y(n,v):y,b=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(t||!b){f(v);return}n++,(D=e.onFail)==null||D.call(e,n,v),eF(E).then(()=>c()?void 0:m()).then(()=>{t?f(v):g()})})};return{promise:s,cancel:i,continue:()=>(o==null||o(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?g():m().then(g),s)}}function lF(){let e=[],t=0,n=a=>{a()},r=a=>{a()},o=a=>setTimeout(a,0);const s=a=>{t?e.push(a):o(()=>{n(a)})},i=()=>{const a=e;e=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||i()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var vn=lF(),xs,jw,wS=(jw=class{constructor(){qe(this,xs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),XR(this.gcTime)&&Ie(this,xs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ld?1/0:5*60*1e3))}clearGcTimeout(){G(this,xs)&&(clearTimeout(G(this,xs)),Ie(this,xs,void 0))}},xs=new WeakMap,jw),bi,Di,er,cn,Sl,vs,xr,Jr,_w,cF=(_w=class extends wS{constructor(t){super();qe(this,xr);qe(this,bi);qe(this,Di);qe(this,er);qe(this,cn);qe(this,Sl);qe(this,vs);Ie(this,vs,!1),Ie(this,Sl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ie(this,er,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ie(this,bi,dF(this.options)),this.state=t.state??G(this,bi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=G(this,cn))==null?void 0:t.promise}setOptions(t){this.options={...G(this,Sl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,er).remove(this)}setData(t,n){const r=tF(this.state.data,t,this.options);return sn(this,xr,Jr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){sn(this,xr,Jr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,o;const n=(r=G(this,cn))==null?void 0:r.promise;return(o=G(this,cn))==null||o.cancel(t),n?n.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,bi))}isActive(){return this.observers.some(t=>ZR(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!QR(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,cn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,cn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),G(this,er).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(G(this,cn)&&(G(this,vs)?G(this,cn).cancel({revert:!0}):G(this,cn).cancelRetry()),this.scheduleGc()),G(this,er).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||sn(this,xr,Jr).call(this,{type:"invalidate"})}fetch(t,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,cn))return G(this,cn).continueRetry(),G(this,cn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,o=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Ie(this,vs,!0),r.signal)})},s=()=>{const d=mS(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return o(f),Ie(this,vs,!1),this.options.persister?this.options.persister(d,f,this):d(f)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};o(i),(l=this.options.behavior)==null||l.onFetch(i,this),Ie(this,Di,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=i.fetchOptions)==null?void 0:c.meta))&&sn(this,xr,Jr).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const a=d=>{var f,m,g,w;xf(d)&&d.silent||sn(this,xr,Jr).call(this,{type:"error",error:d}),xf(d)||((m=(f=G(this,er).config).onError)==null||m.call(f,d,this),(w=(g=G(this,er).config).onSettled)==null||w.call(g,this.state.data,d,this)),this.scheduleGc()};return Ie(this,cn,yS({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,m,g,w;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(C){a(C);return}(m=(f=G(this,er).config).onSuccess)==null||m.call(f,d,this),(w=(g=G(this,er).config).onSettled)==null||w.call(g,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{sn(this,xr,Jr).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{sn(this,xr,Jr).call(this,{type:"pause"})},onContinue:()=>{sn(this,xr,Jr).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),G(this,cn).start()}},bi=new WeakMap,Di=new WeakMap,er=new WeakMap,cn=new WeakMap,Sl=new WeakMap,vs=new WeakMap,xr=new WeakSet,Jr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...uF(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return xf(o)&&o.revert&&G(this,Di)?{...G(this,Di),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),vn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,er).notify({query:this,type:"updated",action:t})})},_w);function uF(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function dF(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fr,Bw,fF=(Bw=class extends ad{constructor(t={}){super();qe(this,Fr);this.config=t,Ie(this,Fr,new Map)}build(t,n,r){const o=n.queryKey,s=n.queryHash??gm(o,n);let i=this.get(s);return i||(i=new cF({cache:this,queryKey:o,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(o)}),this.add(i)),i}add(t){G(this,Fr).has(t.queryHash)||(G(this,Fr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=G(this,Fr).get(t.queryHash);n&&(t.destroy(),n===t&&G(this,Fr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){vn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return G(this,Fr).get(t)}getAll(){return[...G(this,Fr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Nv(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Nv(t,r)):n}notify(t){vn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){vn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){vn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fr=new WeakMap,Bw),Mr,gn,ys,Nr,vo,Lw,hF=(Lw=class extends wS{constructor(t){super();qe(this,Nr);qe(this,Mr);qe(this,gn);qe(this,ys);this.mutationId=t.mutationId,Ie(this,gn,t.mutationCache),Ie(this,Mr,[]),this.state=t.state||pF(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){G(this,Mr).includes(t)||(G(this,Mr).push(t),this.clearGcTimeout(),G(this,gn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ie(this,Mr,G(this,Mr).filter(n=>n!==t)),this.scheduleGc(),G(this,gn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){G(this,Mr).length||(this.state.status==="pending"?this.scheduleGc():G(this,gn).remove(this))}continue(){var t;return((t=G(this,ys))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,s,i,a,l,c,u,d,f,m,g,w,C,v,x,y,E,b,D,A;Ie(this,ys,yS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,R)=>{sn(this,Nr,vo).call(this,{type:"failed",failureCount:P,error:R})},onPause:()=>{sn(this,Nr,vo).call(this,{type:"pause"})},onContinue:()=>{sn(this,Nr,vo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,gn).canRun(this)}));const n=this.state.status==="pending",r=!G(this,ys).canStart();try{if(!n){sn(this,Nr,vo).call(this,{type:"pending",variables:t,isPaused:r}),await((s=(o=G(this,gn).config).onMutate)==null?void 0:s.call(o,t,this));const R=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,t));R!==this.state.context&&sn(this,Nr,vo).call(this,{type:"pending",context:R,variables:t,isPaused:r})}const P=await G(this,ys).start();return await((c=(l=G(this,gn).config).onSuccess)==null?void 0:c.call(l,P,t,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,P,t,this.state.context)),await((m=(f=G(this,gn).config).onSettled)==null?void 0:m.call(f,P,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,P,null,t,this.state.context)),sn(this,Nr,vo).call(this,{type:"success",data:P}),P}catch(P){try{throw await((v=(C=G(this,gn).config).onError)==null?void 0:v.call(C,P,t,this.state.context,this)),await((y=(x=this.options).onError)==null?void 0:y.call(x,P,t,this.state.context)),await((b=(E=G(this,gn).config).onSettled)==null?void 0:b.call(E,void 0,P,this.state.variables,this.state.context,this)),await((A=(D=this.options).onSettled)==null?void 0:A.call(D,void 0,P,t,this.state.context)),P}finally{sn(this,Nr,vo).call(this,{type:"error",error:P})}}finally{G(this,gn).runNext(this)}}},Mr=new WeakMap,gn=new WeakMap,ys=new WeakMap,Nr=new WeakSet,vo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vn.batch(()=>{G(this,Mr).forEach(r=>{r.onMutationUpdate(t)}),G(this,gn).notify({mutation:this,type:"updated",action:t})})},Lw);function pF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bn,bl,Ow,mF=(Ow=class extends ad{constructor(t={}){super();qe(this,Bn);qe(this,bl);this.config=t,Ie(this,Bn,new Map),Ie(this,bl,Date.now())}build(t,n,r){const o=new hF({mutationCache:this,mutationId:++Gl(this,bl)._,options:t.defaultMutationOptions(n),state:r});return this.add(o),o}add(t){const n=fc(t),r=G(this,Bn).get(n)??[];r.push(t),G(this,Bn).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=fc(t);if(G(this,Bn).has(n)){const o=(r=G(this,Bn).get(n))==null?void 0:r.filter(s=>s!==t);o&&(o.length===0?G(this,Bn).delete(n):G(this,Bn).set(n,o))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=G(this,Bn).get(fc(t)))==null?void 0:r.find(o=>o.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=G(this,Bn).get(fc(t)))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){vn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...G(this,Bn).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Iv(n,r))}findAll(t={}){return this.getAll().filter(n=>Iv(t,n))}notify(t){vn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return vn.batch(()=>Promise.all(t.map(n=>n.continue().catch(gr))))}},Bn=new WeakMap,bl=new WeakMap,Ow);function fc(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Bv(e){return{onFetch:(t,n)=>{var u,d,f,m,g;const r=t.options,o=(f=(d=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],i=((g=t.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let w=!1;const C=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},v=mS(t.options,t.fetchOptions),x=async(y,E,b)=>{if(w)return Promise.reject();if(E==null&&y.pages.length)return Promise.resolve(y);const D={queryKey:t.queryKey,pageParam:E,direction:b?"backward":"forward",meta:t.options.meta};C(D);const A=await v(D),{maxPages:P}=t.options,R=b?rF:nF;return{pages:R(y.pages,A,P),pageParams:R(y.pageParams,E,P)}};if(o&&s.length){const y=o==="backward",E=y?gF:Lv,b={pages:s,pageParams:i},D=E(r,b);a=await x(b,D,y)}else{const y=e??s.length;do{const E=l===0?i[0]??r.initialPageParam:Lv(r,a);if(l>0&&E==null)break;a=await x(a,E),l++}while(l<y)}return a};t.options.persister?t.fetchFn=()=>{var w,C;return(C=(w=t.options).persister)==null?void 0:C.call(w,c,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Lv(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function gF(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var kt,ko,To,Ai,Pi,Ro,ki,Ti,$w,xF=($w=class{constructor(e={}){qe(this,kt);qe(this,ko);qe(this,To);qe(this,Ai);qe(this,Pi);qe(this,Ro);qe(this,ki);qe(this,Ti);Ie(this,kt,e.queryCache||new fF),Ie(this,ko,e.mutationCache||new mF),Ie(this,To,e.defaultOptions||{}),Ie(this,Ai,new Map),Ie(this,Pi,new Map),Ie(this,Ro,0)}mount(){Gl(this,Ro)._++,G(this,Ro)===1&&(Ie(this,ki,gS.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,kt).onFocus())})),Ie(this,Ti,Du.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,kt).onOnline())})))}unmount(){var e,t;Gl(this,Ro)._--,G(this,Ro)===0&&((e=G(this,ki))==null||e.call(this),Ie(this,ki,void 0),(t=G(this,Ti))==null||t.call(this),Ie(this,Ti,void 0))}isFetching(e){return G(this,kt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return G(this,ko).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,kt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=G(this,kt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Mv(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return G(this,kt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=G(this,kt).get(r.queryHash),s=o==null?void 0:o.state.data,i=YR(t,s);if(i!==void 0)return G(this,kt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return vn.batch(()=>G(this,kt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,kt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=G(this,kt);vn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=G(this,kt),r={type:"active",...e};return vn.batch(()=>(n.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=vn.batch(()=>G(this,kt).findAll(e).map(o=>o.cancel(n)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(e={},t={}){return vn.batch(()=>{if(G(this,kt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=vn.batch(()=>G(this,kt).findAll(e).filter(o=>!o.isDisabled()).map(o=>{let s=o.fetch(void 0,n);return n.throwOnError||(s=s.catch(gr)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(gr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=G(this,kt).build(this,t);return n.isStaleByTime(Mv(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(gr).catch(gr)}fetchInfiniteQuery(e){return e.behavior=Bv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(gr).catch(gr)}ensureInfiniteQueryData(e){return e.behavior=Bv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Du.isOnline()?G(this,ko).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,kt)}getMutationCache(){return G(this,ko)}getDefaultOptions(){return G(this,To)}setDefaultOptions(e){Ie(this,To,e)}setQueryDefaults(e,t){G(this,Ai).set(ul(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...G(this,Ai).values()];let n={};return t.forEach(r=>{dl(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){G(this,Pi).set(ul(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...G(this,Pi).values()];let n={};return t.forEach(r=>{dl(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...G(this,To).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===xm&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...G(this,To).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){G(this,kt).clear(),G(this,ko).clear()}},kt=new WeakMap,ko=new WeakMap,To=new WeakMap,Ai=new WeakMap,Pi=new WeakMap,Ro=new WeakMap,ki=new WeakMap,Ti=new WeakMap,$w),vF=h.createContext(void 0),yF=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),p.jsx(vF.Provider,{value:e,children:t}));async function wF(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}const CF=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await wF(n),await n.json())},EF=new xF({defaultOptions:{queries:{queryFn:CF({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),SF=1,bF=1e6;let vf=0;function DF(){return vf=(vf+1)%Number.MAX_SAFE_INTEGER,vf.toString()}const yf=new Map,Ov=e=>{if(yf.has(e))return;const t=setTimeout(()=>{yf.delete(e),Oa({type:"REMOVE_TOAST",toastId:e})},bF);yf.set(e,t)},AF=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,SF)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Ov(n):e.toasts.forEach(r=>{Ov(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Vc=[];let Uc={toasts:[]};function Oa(e){Uc=AF(Uc,e),Vc.forEach(t=>{t(Uc)})}function PF({...e}){const t=DF(),n=o=>Oa({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Oa({type:"DISMISS_TOAST",toastId:t});return Oa({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function Ml(){const[e,t]=h.useState(Uc);return h.useEffect(()=>(Vc.push(t),()=>{const n=Vc.indexOf(t);n>-1&&Vc.splice(n,1)}),[e]),{...e,toast:PF,dismiss:n=>Oa({type:"DISMISS_TOAST",toastId:n})}}function se(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function $v(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function cd(...e){return t=>{let n=!1;const r=e.map(o=>{const s=$v(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():$v(e[o],null)}}}}function Le(...e){return h.useCallback(cd(...e),e)}function kF(e,t){const n=h.createContext(t),r=s=>{const{children:i,...a}=s,l=h.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function o(s){const i=h.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,o]}function En(e,t=[]){let n=[];function r(s,i){const a=h.createContext(i),l=n.length;n=[...n,i];const c=d=>{var v;const{scope:f,children:m,...g}=d,w=((v=f==null?void 0:f[e])==null?void 0:v[l])||a,C=h.useMemo(()=>g,Object.values(g));return p.jsx(w.Provider,{value:C,children:m})};c.displayName=s+"Provider";function u(d,f){var w;const m=((w=f==null?void 0:f[e])==null?void 0:w[l])||a,g=h.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>h.createContext(i));return function(a){const l=(a==null?void 0:a[e])||s;return h.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,TF(o,...t)]}function TF(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Li(e){const t=FF(e),n=h.forwardRef((r,o)=>{const{children:s,...i}=r,a=h.Children.toArray(s),l=a.find(MF);if(l){const c=l.props.children,u=a.map(d=>d===l?h.Children.count(c)>1?h.Children.only(null):h.isValidElement(c)?c.props.children:null:d);return p.jsx(t,{...i,ref:o,children:h.isValidElement(c)?h.cloneElement(c,void 0,u):null})}return p.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var RF=Li("Slot");function FF(e){const t=h.forwardRef((n,r)=>{const{children:o,...s}=n;if(h.isValidElement(o)){const i=IF(o),a=NF(s,o.props);return o.type!==h.Fragment&&(a.ref=r?cd(r,i):i),h.cloneElement(o,a)}return h.Children.count(o)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var CS=Symbol("radix.slottable");function ES(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=CS,t}function MF(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===CS}function NF(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function IF(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ud(e){const t=e+"CollectionProvider",[n,r]=En(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=w=>{const{scope:C,children:v}=w,x=Et.useRef(null),y=Et.useRef(new Map).current;return p.jsx(o,{scope:C,itemMap:y,collectionRef:x,children:v})};i.displayName=t;const a=e+"CollectionSlot",l=Li(a),c=Et.forwardRef((w,C)=>{const{scope:v,children:x}=w,y=s(a,v),E=Le(C,y.collectionRef);return p.jsx(l,{ref:E,children:x})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=Li(u),m=Et.forwardRef((w,C)=>{const{scope:v,children:x,...y}=w,E=Et.useRef(null),b=Le(C,E),D=s(u,v);return Et.useEffect(()=>(D.itemMap.set(E,{ref:E,...y}),()=>void D.itemMap.delete(E))),p.jsx(f,{[d]:"",ref:b,children:x})});m.displayName=u;function g(w){const C=s(e+"CollectionConsumer",w);return Et.useCallback(()=>{const x=C.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(C.itemMap.values()).sort((D,A)=>y.indexOf(D.ref.current)-y.indexOf(A.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:i,Slot:c,ItemSlot:m},g,r]}var jF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Se=jF.reduce((e,t)=>{const n=Li(`Primitive.${t}`),r=h.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function vm(e,t){e&&Rl.flushSync(()=>e.dispatchEvent(t))}function Ft(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function _F(e,t=globalThis==null?void 0:globalThis.document){const n=Ft(e);h.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var BF="DismissableLayer",Fh="dismissableLayer.update",LF="dismissableLayer.pointerDownOutside",OF="dismissableLayer.focusOutside",zv,SS=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nl=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=e,c=h.useContext(SS),[u,d]=h.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=h.useState({}),g=Le(t,A=>d(A)),w=Array.from(c.layers),[C]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=w.indexOf(C),x=u?w.indexOf(u):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,E=x>=v,b=zF(A=>{const P=A.target,R=[...c.branches].some(k=>k.contains(P));!E||R||(o==null||o(A),i==null||i(A),A.defaultPrevented||a==null||a())},f),D=VF(A=>{const P=A.target;[...c.branches].some(k=>k.contains(P))||(s==null||s(A),i==null||i(A),A.defaultPrevented||a==null||a())},f);return _F(A=>{x===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},f),h.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(zv=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Vv(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=zv)}},[u,f,n,c]),h.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Vv())},[u,c]),h.useEffect(()=>{const A=()=>m({});return document.addEventListener(Fh,A),()=>document.removeEventListener(Fh,A)},[]),p.jsx(Se.div,{...l,ref:g,style:{pointerEvents:y?E?"auto":"none":void 0,...e.style},onFocusCapture:se(e.onFocusCapture,D.onFocusCapture),onBlurCapture:se(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:se(e.onPointerDownCapture,b.onPointerDownCapture)})});Nl.displayName=BF;var $F="DismissableLayerBranch",bS=h.forwardRef((e,t)=>{const n=h.useContext(SS),r=h.useRef(null),o=Le(t,r);return h.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(Se.div,{...e,ref:o})});bS.displayName=$F;function zF(e,t=globalThis==null?void 0:globalThis.document){const n=Ft(e),r=h.useRef(!1),o=h.useRef(()=>{});return h.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){DS(LF,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function VF(e,t=globalThis==null?void 0:globalThis.document){const n=Ft(e),r=h.useRef(!1);return h.useEffect(()=>{const o=s=>{s.target&&!r.current&&DS(OF,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Vv(){const e=new CustomEvent(Fh);document.dispatchEvent(e)}function DS(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?vm(o,s):o.dispatchEvent(s)}var UF=Nl,HF=bS,io=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},WF="Portal",dd=h.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,s]=h.useState(!1);io(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?yR.createPortal(p.jsx(Se.div,{...r,ref:t}),i):null});dd.displayName=WF;function KF(e,t){return h.useReducer((n,r)=>t[n][r]??n,e)}var Sn=e=>{const{present:t,children:n}=e,r=JF(t),o=typeof n=="function"?n({present:r.isPresent}):h.Children.only(n),s=Le(r.ref,GF(o));return typeof n=="function"||r.isPresent?h.cloneElement(o,{ref:s}):null};Sn.displayName="Presence";function JF(e){const[t,n]=h.useState(),r=h.useRef({}),o=h.useRef(e),s=h.useRef("none"),i=e?"mounted":"unmounted",[a,l]=KF(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const c=hc(r.current);s.current=a==="mounted"?c:"none"},[a]),io(()=>{const c=r.current,u=o.current;if(u!==e){const f=s.current,m=hc(c);e?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),io(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=m=>{const w=hc(r.current).includes(m.animationName);if(m.target===t&&w&&(l("ANIMATION_END"),!o.current)){const C=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=C)})}},f=m=>{m.target===t&&(s.current=hc(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:h.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function hc(e){return(e==null?void 0:e.animationName)||"none"}function GF(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Vr({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=qF({defaultProp:t,onChange:n}),s=e!==void 0,i=s?e:r,a=Ft(n),l=h.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else o(c)},[s,e,o,a]);return[i,l]}function qF({defaultProp:e,onChange:t}){const n=h.useState(e),[r]=n,o=h.useRef(r),s=Ft(t);return h.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var YF="VisuallyHidden",fd=h.forwardRef((e,t)=>p.jsx(Se.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));fd.displayName=YF;var XF=fd,ym="ToastProvider",[wm,QF,ZF]=ud("Toast"),[AS,R7]=En("Toast",[ZF]),[e8,hd]=AS(ym),PS=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:i}=e,[a,l]=h.useState(null),[c,u]=h.useState(0),d=h.useRef(!1),f=h.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ym}\`. Expected non-empty \`string\`.`),p.jsx(wm.Provider,{scope:t,children:p.jsx(e8,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:h.useCallback(()=>u(m=>m+1),[]),onToastRemove:h.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:i})})};PS.displayName=ym;var kS="ToastViewport",t8=["F8"],Mh="toast.viewportPause",Nh="toast.viewportResume",TS=h.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=t8,label:o="Notifications ({hotkey})",...s}=e,i=hd(kS,n),a=QF(n),l=h.useRef(null),c=h.useRef(null),u=h.useRef(null),d=h.useRef(null),f=Le(t,d,i.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;h.useEffect(()=>{const C=v=>{var y;r.length!==0&&r.every(E=>v[E]||v.code===E)&&((y=d.current)==null||y.focus())};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),h.useEffect(()=>{const C=l.current,v=d.current;if(g&&C&&v){const x=()=>{if(!i.isClosePausedRef.current){const D=new CustomEvent(Mh);v.dispatchEvent(D),i.isClosePausedRef.current=!0}},y=()=>{if(i.isClosePausedRef.current){const D=new CustomEvent(Nh);v.dispatchEvent(D),i.isClosePausedRef.current=!1}},E=D=>{!C.contains(D.relatedTarget)&&y()},b=()=>{C.contains(document.activeElement)||y()};return C.addEventListener("focusin",x),C.addEventListener("focusout",E),C.addEventListener("pointermove",x),C.addEventListener("pointerleave",b),window.addEventListener("blur",x),window.addEventListener("focus",y),()=>{C.removeEventListener("focusin",x),C.removeEventListener("focusout",E),C.removeEventListener("pointermove",x),C.removeEventListener("pointerleave",b),window.removeEventListener("blur",x),window.removeEventListener("focus",y)}}},[g,i.isClosePausedRef]);const w=h.useCallback(({tabbingDirection:C})=>{const x=a().map(y=>{const E=y.ref.current,b=[E,...p8(E)];return C==="forwards"?b:b.reverse()});return(C==="forwards"?x.reverse():x).flat()},[a]);return h.useEffect(()=>{const C=d.current;if(C){const v=x=>{var b,D,A;const y=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!y){const P=document.activeElement,R=x.shiftKey;if(x.target===C&&R){(b=c.current)==null||b.focus();return}const F=w({tabbingDirection:R?"backwards":"forwards"}),_=F.findIndex(O=>O===P);wf(F.slice(_+1))?x.preventDefault():R?(D=c.current)==null||D.focus():(A=u.current)==null||A.focus()}};return C.addEventListener("keydown",v),()=>C.removeEventListener("keydown",v)}},[a,w]),p.jsxs(HF,{ref:l,role:"region","aria-label":o.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&p.jsx(Ih,{ref:c,onFocusFromOutsideViewport:()=>{const C=w({tabbingDirection:"forwards"});wf(C)}}),p.jsx(wm.Slot,{scope:n,children:p.jsx(Se.ol,{tabIndex:-1,...s,ref:f})}),g&&p.jsx(Ih,{ref:u,onFocusFromOutsideViewport:()=>{const C=w({tabbingDirection:"backwards"});wf(C)}})]})});TS.displayName=kS;var RS="ToastFocusProxy",Ih=h.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,s=hd(RS,n);return p.jsx(fd,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:i=>{var c;const a=i.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});Ih.displayName=RS;var pd="Toast",n8="toast.swipeStart",r8="toast.swipeMove",o8="toast.swipeCancel",s8="toast.swipeEnd",FS=h.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:s,...i}=e,[a=!0,l]=Vr({prop:r,defaultProp:o,onChange:s});return p.jsx(Sn,{present:n||a,children:p.jsx(l8,{open:a,...i,ref:t,onClose:()=>l(!1),onPause:Ft(e.onPause),onResume:Ft(e.onResume),onSwipeStart:se(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:se(e.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:se(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:se(e.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});FS.displayName=pd;var[i8,a8]=AS(pd,{onClose(){}}),l8=h.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:s,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:m,...g}=e,w=hd(pd,n),[C,v]=h.useState(null),x=Le(t,O=>v(O)),y=h.useRef(null),E=h.useRef(null),b=o||w.duration,D=h.useRef(0),A=h.useRef(b),P=h.useRef(0),{onToastAdd:R,onToastRemove:k}=w,T=Ft(()=>{var K;(C==null?void 0:C.contains(document.activeElement))&&((K=w.viewport)==null||K.focus()),i()}),F=h.useCallback(O=>{!O||O===1/0||(window.clearTimeout(P.current),D.current=new Date().getTime(),P.current=window.setTimeout(T,O))},[T]);h.useEffect(()=>{const O=w.viewport;if(O){const K=()=>{F(A.current),c==null||c()},j=()=>{const B=new Date().getTime()-D.current;A.current=A.current-B,window.clearTimeout(P.current),l==null||l()};return O.addEventListener(Mh,j),O.addEventListener(Nh,K),()=>{O.removeEventListener(Mh,j),O.removeEventListener(Nh,K)}}},[w.viewport,b,l,c,F]),h.useEffect(()=>{s&&!w.isClosePausedRef.current&&F(b)},[s,b,w.isClosePausedRef,F]),h.useEffect(()=>(R(),()=>k()),[R,k]);const _=h.useMemo(()=>C?LS(C):null,[C]);return w.viewport?p.jsxs(p.Fragment,{children:[_&&p.jsx(c8,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:_}),p.jsx(i8,{scope:n,onClose:T,children:Rl.createPortal(p.jsx(wm.ItemSlot,{scope:n,children:p.jsx(UF,{asChild:!0,onEscapeKeyDown:se(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||T(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Se.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":w.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:se(e.onKeyDown,O=>{O.key==="Escape"&&(a==null||a(O.nativeEvent),O.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:se(e.onPointerDown,O=>{O.button===0&&(y.current={x:O.clientX,y:O.clientY})}),onPointerMove:se(e.onPointerMove,O=>{if(!y.current)return;const K=O.clientX-y.current.x,j=O.clientY-y.current.y,B=!!E.current,M=["left","right"].includes(w.swipeDirection),I=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,U=M?I(0,K):0,N=M?0:I(0,j),L=O.pointerType==="touch"?10:2,H={x:U,y:N},$={originalEvent:O,delta:H};B?(E.current=H,pc(r8,d,$,{discrete:!1})):Uv(H,w.swipeDirection,L)?(E.current=H,pc(n8,u,$,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(K)>L||Math.abs(j)>L)&&(y.current=null)}),onPointerUp:se(e.onPointerUp,O=>{const K=E.current,j=O.target;if(j.hasPointerCapture(O.pointerId)&&j.releasePointerCapture(O.pointerId),E.current=null,y.current=null,K){const B=O.currentTarget,M={originalEvent:O,delta:K};Uv(K,w.swipeDirection,w.swipeThreshold)?pc(s8,m,M,{discrete:!0}):pc(o8,f,M,{discrete:!0}),B.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),c8=e=>{const{__scopeToast:t,children:n,...r}=e,o=hd(pd,t),[s,i]=h.useState(!1),[a,l]=h.useState(!1);return f8(()=>i(!0)),h.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(dd,{asChild:!0,children:p.jsx(fd,{...r,children:s&&p.jsxs(p.Fragment,{children:[o.label," ",n]})})})},u8="ToastTitle",MS=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return p.jsx(Se.div,{...r,ref:t})});MS.displayName=u8;var d8="ToastDescription",NS=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return p.jsx(Se.div,{...r,ref:t})});NS.displayName=d8;var IS="ToastAction",jS=h.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?p.jsx(BS,{altText:n,asChild:!0,children:p.jsx(Cm,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${IS}\`. Expected non-empty \`string\`.`),null)});jS.displayName=IS;var _S="ToastClose",Cm=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,o=a8(_S,n);return p.jsx(BS,{asChild:!0,children:p.jsx(Se.button,{type:"button",...r,ref:t,onClick:se(e.onClick,o.onClose)})})});Cm.displayName=_S;var BS=h.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...o}=e;return p.jsx(Se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function LS(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),h8(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...LS(r))}}),t}function pc(e,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?vm(o,s):o.dispatchEvent(s)}var Uv=(e,t,n=0)=>{const r=Math.abs(e.x),o=Math.abs(e.y),s=r>o;return t==="left"||t==="right"?s&&r>n:!s&&o>n};function f8(e=()=>{}){const t=Ft(e);io(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function h8(e){return e.nodeType===e.ELEMENT_NODE}function p8(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wf(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var m8=PS,OS=TS,$S=FS,zS=MS,VS=NS,US=jS,HS=Cm;function WS(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=WS(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function KS(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=WS(e))&&(r&&(r+=" "),r+=t);return r}const Hv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Wv=KS,Il=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Wv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const f=Hv(u)||Hv(d);return o[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...m}=u;return Object.entries(m).every(g=>{let[w,C]=g;return Array.isArray(C)?C.includes({...s,...a}[w]):{...s,...a}[w]===C})?[...c,d,f]:c},[]);return Wv(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JS=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>h.createElement("svg",{ref:l,...x8,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:JS("lucide",o),...a},[...i.map(([c,u])=>h.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(e,t)=>{const n=h.forwardRef(({className:r,...o},s)=>h.createElement(v8,{ref:s,iconNode:t,className:JS(`lucide-${g8(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=ze("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=ze("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=ze("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=ze("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=ze("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=ze("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=ze("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=ze("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=ze("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=ze("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=ze("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=ze("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=ze("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=ze("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ze("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=ze("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=ze("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=ze("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=ze("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Sm="-",V8=e=>{const t=H8(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(Sm);return a[0]===""&&a.length!==1&&a.shift(),tb(a,t)||U8(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},tb=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?tb(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(Sm);return(i=t.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},Jv=/^\[(.+)\]$/,U8=e=>{if(Jv.test(e)){const t=Jv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},H8=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return K8(Object.entries(e.classGroups),n).forEach(([s,i])=>{jh(i,r,s,t)}),r},jh=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:Gv(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(W8(o)){jh(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{jh(i,Gv(t,s),n,r)})})},Gv=(e,t)=>{let n=e;return t.split(Sm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},W8=e=>e.isThemeGetter,K8=(e,t)=>t?e.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[t+i,a])):s);return[n,o]}):e,J8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},nb="!",G8=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,o=t[0],s=t.length,i=a=>{const l=[];let c=0,u=0,d;for(let C=0;C<a.length;C++){let v=a[C];if(c===0){if(v===o&&(r||a.slice(C,C+s)===t)){l.push(a.slice(u,C)),u=C+s;continue}if(v==="/"){d=C;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),m=f.startsWith(nb),g=m?f.substring(1):f,w=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:w}};return n?a=>n({className:a,parseClassName:i}):i},q8=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Y8=e=>({cache:J8(e.cacheSize),parseClassName:G8(e),...V8(e)}),X8=/\s+/,Q8=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,s=[],i=e.trim().split(X8);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let g=!!m,w=r(g?f.substring(0,m):f);if(!w){if(!g){a=c+(a.length>0?" "+a:a);continue}if(w=r(f),!w){a=c+(a.length>0?" "+a:a);continue}g=!1}const C=q8(u).join(":"),v=d?C+nb:C,x=v+w;if(s.includes(x))continue;s.push(x);const y=o(w,g);for(let E=0;E<y.length;++E){const b=y[E];s.push(v+b)}a=c+(a.length>0?" "+a:a)}return a};function Z8(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=rb(t))&&(r&&(r+=" "),r+=n);return r}const rb=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=rb(e[r]))&&(n&&(n+=" "),n+=t);return n};function eM(e,...t){let n,r,o,s=i;function i(l){const c=t.reduce((u,d)=>d(u),e());return n=Y8(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Q8(l,n);return o(l,u),u}return function(){return s(Z8.apply(null,arguments))}}const ut=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ob=/^\[(?:([a-z-]+):)?(.+)\]$/i,tM=/^\d+\/\d+$/,nM=new Set(["px","full","screen"]),rM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=e=>gi(e)||nM.has(e)||tM.test(e),go=e=>Yi(e,"length",mM),gi=e=>!!e&&!Number.isNaN(Number(e)),Cf=e=>Yi(e,"number",gi),pa=e=>!!e&&Number.isInteger(Number(e)),lM=e=>e.endsWith("%")&&gi(e.slice(0,-1)),Me=e=>ob.test(e),xo=e=>rM.test(e),cM=new Set(["length","size","percentage"]),uM=e=>Yi(e,cM,sb),dM=e=>Yi(e,"position",sb),fM=new Set(["image","url"]),hM=e=>Yi(e,fM,xM),pM=e=>Yi(e,"",gM),ma=()=>!0,Yi=(e,t,n)=>{const r=ob.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},mM=e=>oM.test(e)&&!sM.test(e),sb=()=>!1,gM=e=>iM.test(e),xM=e=>aM.test(e),vM=()=>{const e=ut("colors"),t=ut("spacing"),n=ut("blur"),r=ut("brightness"),o=ut("borderColor"),s=ut("borderRadius"),i=ut("borderSpacing"),a=ut("borderWidth"),l=ut("contrast"),c=ut("grayscale"),u=ut("hueRotate"),d=ut("invert"),f=ut("gap"),m=ut("gradientColorStops"),g=ut("gradientColorStopPositions"),w=ut("inset"),C=ut("margin"),v=ut("opacity"),x=ut("padding"),y=ut("saturate"),E=ut("scale"),b=ut("sepia"),D=ut("skew"),A=ut("space"),P=ut("translate"),R=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",Me,t],F=()=>[Me,t],_=()=>["",Kr,go],O=()=>["auto",gi,Me],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",Me],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>[gi,Me];return{cacheSize:500,separator:":",theme:{colors:[ma],spacing:[Kr,go],blur:["none","",xo,Me],brightness:N(),borderColor:[e],borderRadius:["none","","full",xo,Me],borderSpacing:F(),borderWidth:_(),contrast:N(),grayscale:I(),hueRotate:N(),invert:I(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[lM,go],inset:T(),margin:T(),opacity:N(),padding:F(),saturate:N(),scale:N(),sepia:I(),skew:N(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[xo]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),Me]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",pa,Me]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",pa,Me]}],"grid-cols":[{"grid-cols":[ma]}],"col-start-end":[{col:["auto",{span:["full",pa,Me]},Me]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[ma]}],"row-start-end":[{row:["auto",{span:[pa,Me]},Me]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,t]}],"min-w":[{"min-w":[Me,t,"min","max","fit"]}],"max-w":[{"max-w":[Me,t,"none","full","min","max","fit","prose",{screen:[xo]},xo]}],h:[{h:[Me,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,t,"auto","min","max","fit"]}],"font-size":[{text:["base",xo,go]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cf]}],"font-family":[{font:[ma]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",gi,Cf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kr,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kr,go]}],"underline-offset":[{"underline-offset":["auto",Kr,Me]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),dM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hM]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:j()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[Kr,Me]}],"outline-w":[{outline:[Kr,go]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Kr,go]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",xo,pM]}],"shadow-color":[{shadow:[ma]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",xo,Me]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[y]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:N()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:N()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[pa,Me]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Kr,go,Cf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yM=eM(vM);function ie(...e){return yM(KS(e))}const wM=m8,ib=h.forwardRef(({className:e,...t},n)=>p.jsx(OS,{ref:n,className:ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ib.displayName=OS.displayName;const CM=Il("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ab=h.forwardRef(({className:e,variant:t,...n},r)=>p.jsx($S,{ref:r,className:ie(CM({variant:t}),e),...n}));ab.displayName=$S.displayName;const EM=h.forwardRef(({className:e,...t},n)=>p.jsx(US,{ref:n,className:ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));EM.displayName=US.displayName;const lb=h.forwardRef(({className:e,...t},n)=>p.jsx(HS,{ref:n,className:ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:p.jsx(md,{className:"h-4 w-4"})}));lb.displayName=HS.displayName;const cb=h.forwardRef(({className:e,...t},n)=>p.jsx(zS,{ref:n,className:ie("text-sm font-semibold",e),...t}));cb.displayName=zS.displayName;const ub=h.forwardRef(({className:e,...t},n)=>p.jsx(VS,{ref:n,className:ie("text-sm opacity-90",e),...t}));ub.displayName=VS.displayName;function SM(){const{toasts:e}=Ml();return p.jsxs(wM,{children:[e.map(function({id:t,title:n,description:r,action:o,...s}){return p.jsxs(ab,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(cb,{children:n}),r&&p.jsx(ub,{children:r})]}),o,p.jsx(lb,{})]},t)}),p.jsx(ib,{})]})}var bM=Qw[" useId ".trim().toString()]||(()=>{}),DM=0;function xi(e){const[t,n]=h.useState(bM());return io(()=>{n(r=>r??String(DM++))},[e]),t?`radix-${t}`:""}const AM=["top","right","bottom","left"],Go=Math.min,On=Math.max,Au=Math.round,mc=Math.floor,Lr=e=>({x:e,y:e}),PM={left:"right",right:"left",bottom:"top",top:"bottom"},kM={start:"end",end:"start"};function _h(e,t,n){return On(e,Go(t,n))}function ao(e,t){return typeof e=="function"?e(t):e}function lo(e){return e.split("-")[0]}function Xi(e){return e.split("-")[1]}function bm(e){return e==="x"?"y":"x"}function Dm(e){return e==="y"?"height":"width"}function qo(e){return["top","bottom"].includes(lo(e))?"y":"x"}function Am(e){return bm(qo(e))}function TM(e,t,n){n===void 0&&(n=!1);const r=Xi(e),o=Am(e),s=Dm(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=Pu(i)),[i,Pu(i)]}function RM(e){const t=Pu(e);return[Bh(e),t,Bh(t)]}function Bh(e){return e.replace(/start|end/g,t=>kM[t])}function FM(e,t,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?s:i;default:return[]}}function MM(e,t,n,r){const o=Xi(e);let s=FM(lo(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(Bh)))),s}function Pu(e){return e.replace(/left|right|bottom|top/g,t=>PM[t])}function NM(e){return{top:0,right:0,bottom:0,left:0,...e}}function db(e){return typeof e!="number"?NM(e):{top:e,right:e,bottom:e,left:e}}function ku(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function qv(e,t,n){let{reference:r,floating:o}=e;const s=qo(t),i=Am(t),a=Dm(i),l=lo(t),c=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-o.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-o.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Xi(t)){case"start":m[i]-=f*(n&&c?-1:1);break;case"end":m[i]+=f*(n&&c?-1:1);break}return m}const IM=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=qv(c,r,l),f=r,m={},g=0;for(let w=0;w<a.length;w++){const{name:C,fn:v}=a[w],{x,y,data:E,reset:b}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});u=x??u,d=y??d,m={...m,[C]:{...m[C],...E}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(c=b.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):b.rects),{x:u,y:d}=qv(c,f,l)),w=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:m}};async function fl(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=ao(t,e),g=db(m),C=a[f?d==="floating"?"reference":"floating":d],v=ku(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(C)))==null||n?C:C.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},b=ku(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:y,strategy:l}):x);return{top:(v.top-b.top+g.top)/E.y,bottom:(b.bottom-v.bottom+g.bottom)/E.y,left:(v.left-b.left+g.left)/E.x,right:(b.right-v.right+g.right)/E.x}}const jM=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=ao(e,t)||{};if(c==null)return{};const d=db(u),f={x:n,y:r},m=Am(o),g=Dm(m),w=await i.getDimensions(c),C=m==="y",v=C?"top":"left",x=C?"bottom":"right",y=C?"clientHeight":"clientWidth",E=s.reference[g]+s.reference[m]-f[m]-s.floating[g],b=f[m]-s.reference[m],D=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let A=D?D[y]:0;(!A||!await(i.isElement==null?void 0:i.isElement(D)))&&(A=a.floating[y]||s.floating[g]);const P=E/2-b/2,R=A/2-w[g]/2-1,k=Go(d[v],R),T=Go(d[x],R),F=k,_=A-w[g]-T,O=A/2-w[g]/2+P,K=_h(F,O,_),j=!l.arrow&&Xi(o)!=null&&O!==K&&s.reference[g]/2-(O<F?k:T)-w[g]/2<0,B=j?O<F?O-F:O-_:0;return{[m]:f[m]+B,data:{[m]:K,centerOffset:O-K-B,...j&&{alignmentOffset:B}},reset:j}}}),_M=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,...C}=ao(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=lo(o),x=qo(a),y=lo(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=f||(y||!w?[Pu(a)]:RM(a)),D=g!=="none";!f&&D&&b.push(...MM(a,w,g,E));const A=[a,...b],P=await fl(t,C),R=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&R.push(P[v]),d){const O=TM(o,i,E);R.push(P[O[0]],P[O[1]])}if(k=[...k,{placement:o,overflows:R}],!R.every(O=>O<=0)){var T,F;const O=(((T=s.flip)==null?void 0:T.index)||0)+1,K=A[O];if(K)return{data:{index:O,overflows:k},reset:{placement:K}};let j=(F=k.filter(B=>B.overflows[0]<=0).sort((B,M)=>B.overflows[1]-M.overflows[1])[0])==null?void 0:F.placement;if(!j)switch(m){case"bestFit":{var _;const B=(_=k.filter(M=>{if(D){const I=qo(M.placement);return I===x||I==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(I=>I>0).reduce((I,U)=>I+U,0)]).sort((M,I)=>M[1]-I[1])[0])==null?void 0:_[0];B&&(j=B);break}case"initialPlacement":j=a;break}if(o!==j)return{reset:{placement:j}}}return{}}}};function Yv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Xv(e){return AM.some(t=>e[t]>=0)}const BM=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=ao(e,t);switch(r){case"referenceHidden":{const s=await fl(t,{...o,elementContext:"reference"}),i=Yv(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Xv(i)}}}case"escaped":{const s=await fl(t,{...o,altBoundary:!0}),i=Yv(s,n.floating);return{data:{escapedOffsets:i,escaped:Xv(i)}}}default:return{}}}}};async function LM(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=lo(n),a=Xi(n),l=qo(n)==="y",c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,d=ao(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:f*c}:{x:f*c,y:m*u}}const OM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,l=await LM(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},$M=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:C=>{let{x:v,y:x}=C;return{x:v,y:x}}},...l}=ao(e,t),c={x:n,y:r},u=await fl(t,l),d=qo(lo(o)),f=bm(d);let m=c[f],g=c[d];if(s){const C=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=m+u[C],y=m-u[v];m=_h(x,m,y)}if(i){const C=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=g+u[C],y=g-u[v];g=_h(x,g,y)}const w=a.fn({...t,[f]:m,[d]:g});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[f]:s,[d]:i}}}}}},zM=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ao(e,t),u={x:n,y:r},d=qo(o),f=bm(d);let m=u[f],g=u[d];const w=ao(a,t),C=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const y=f==="y"?"height":"width",E=s.reference[f]-s.floating[y]+C.mainAxis,b=s.reference[f]+s.reference[y]-C.mainAxis;m<E?m=E:m>b&&(m=b)}if(c){var v,x;const y=f==="y"?"width":"height",E=["top","left"].includes(lo(o)),b=s.reference[d]-s.floating[y]+(E&&((v=i.offset)==null?void 0:v[d])||0)+(E?0:C.crossAxis),D=s.reference[d]+s.reference[y]+(E?0:((x=i.offset)==null?void 0:x[d])||0)-(E?C.crossAxis:0);g<b?g=b:g>D&&(g=D)}return{[f]:m,[d]:g}}}},VM=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:l=()=>{},...c}=ao(e,t),u=await fl(t,c),d=lo(o),f=Xi(o),m=qo(o)==="y",{width:g,height:w}=s.floating;let C,v;d==="top"||d==="bottom"?(C=d,v=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,C=f==="end"?"top":"bottom");const x=w-u.top-u.bottom,y=g-u.left-u.right,E=Go(w-u[C],x),b=Go(g-u[v],y),D=!t.middlewareData.shift;let A=E,P=b;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=x),D&&!f){const k=On(u.left,0),T=On(u.right,0),F=On(u.top,0),_=On(u.bottom,0);m?P=g-2*(k!==0||T!==0?k+T:On(u.left,u.right)):A=w-2*(F!==0||_!==0?F+_:On(u.top,u.bottom))}await l({...t,availableWidth:P,availableHeight:A});const R=await i.getDimensions(a.floating);return g!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function gd(){return typeof window<"u"}function Qi(e){return fb(e)?(e.nodeName||"").toLowerCase():"#document"}function Hn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ur(e){var t;return(t=(fb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function fb(e){return gd()?e instanceof Node||e instanceof Hn(e).Node:!1}function Dr(e){return gd()?e instanceof Element||e instanceof Hn(e).Element:!1}function zr(e){return gd()?e instanceof HTMLElement||e instanceof Hn(e).HTMLElement:!1}function Qv(e){return!gd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Hn(e).ShadowRoot}function jl(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Ar(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function UM(e){return["table","td","th"].includes(Qi(e))}function xd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Pm(e){const t=km(),n=Dr(e)?Ar(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function HM(e){let t=Yo(e);for(;zr(t)&&!Oi(t);){if(Pm(t))return t;if(xd(t))return null;t=Yo(t)}return null}function km(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Oi(e){return["html","body","#document"].includes(Qi(e))}function Ar(e){return Hn(e).getComputedStyle(e)}function vd(e){return Dr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Yo(e){if(Qi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Qv(e)&&e.host||Ur(e);return Qv(t)?t.host:t}function hb(e){const t=Yo(e);return Oi(t)?e.ownerDocument?e.ownerDocument.body:e.body:zr(t)&&jl(t)?t:hb(t)}function hl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=hb(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=Hn(o);if(s){const a=Lh(i);return t.concat(i,i.visualViewport||[],jl(o)?o:[],a&&n?hl(a):[])}return t.concat(o,hl(o,[],n))}function Lh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function pb(e){const t=Ar(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=zr(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=Au(n)!==s||Au(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function Tm(e){return Dr(e)?e:e.contextElement}function vi(e){const t=Tm(e);if(!zr(t))return Lr(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=pb(t);let i=(s?Au(n.width):n.width)/r,a=(s?Au(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const WM=Lr(0);function mb(e){const t=Hn(e);return!km()||!t.visualViewport?WM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function KM(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Hn(e)?!1:t}function Ts(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Tm(e);let i=Lr(1);t&&(r?Dr(r)&&(i=vi(r)):i=vi(e));const a=KM(s,n,r)?mb(s):Lr(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const f=Hn(s),m=r&&Dr(r)?Hn(r):r;let g=f,w=Lh(g);for(;w&&r&&m!==g;){const C=vi(w),v=w.getBoundingClientRect(),x=Ar(w),y=v.left+(w.clientLeft+parseFloat(x.paddingLeft))*C.x,E=v.top+(w.clientTop+parseFloat(x.paddingTop))*C.y;l*=C.x,c*=C.y,u*=C.x,d*=C.y,l+=y,c+=E,g=Hn(w),w=Lh(g)}}return ku({width:u,height:d,x:l,y:c})}function Rm(e,t){const n=vd(e).scrollLeft;return t?t.left+n:Ts(Ur(e)).left+n}function gb(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:Rm(e,r)),s=r.top+t.scrollTop;return{x:o,y:s}}function JM(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=Ur(r),a=t?xd(t.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Lr(1);const u=Lr(0),d=zr(r);if((d||!d&&!s)&&((Qi(r)!=="body"||jl(i))&&(l=vd(r)),zr(r))){const m=Ts(r);c=vi(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const f=i&&!d&&!s?gb(i,l,!0):Lr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function GM(e){return Array.from(e.getClientRects())}function qM(e){const t=Ur(e),n=vd(e),r=e.ownerDocument.body,o=On(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=On(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Rm(e);const a=-n.scrollTop;return Ar(r).direction==="rtl"&&(i+=On(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function YM(e,t){const n=Hn(e),r=Ur(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=km();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function XM(e,t){const n=Ts(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=zr(e)?vi(e):Lr(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function Zv(e,t,n){let r;if(t==="viewport")r=YM(e,n);else if(t==="document")r=qM(Ur(e));else if(Dr(t))r=XM(t,n);else{const o=mb(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return ku(r)}function xb(e,t){const n=Yo(e);return n===t||!Dr(n)||Oi(n)?!1:Ar(n).position==="fixed"||xb(n,t)}function QM(e,t){const n=t.get(e);if(n)return n;let r=hl(e,[],!1).filter(a=>Dr(a)&&Qi(a)!=="body"),o=null;const s=Ar(e).position==="fixed";let i=s?Yo(e):e;for(;Dr(i)&&!Oi(i);){const a=Ar(i),l=Pm(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||jl(i)&&!l&&xb(e,i))?r=r.filter(u=>u!==i):o=a,i=Yo(i)}return t.set(e,r),r}function ZM(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?xd(t)?[]:QM(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const d=Zv(t,u,o);return c.top=On(d.top,c.top),c.right=Go(d.right,c.right),c.bottom=Go(d.bottom,c.bottom),c.left=On(d.left,c.left),c},Zv(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function e3(e){const{width:t,height:n}=pb(e);return{width:t,height:n}}function t3(e,t,n){const r=zr(t),o=Ur(t),s=n==="fixed",i=Ts(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Lr(0);if(r||!r&&!s)if((Qi(t)!=="body"||jl(o))&&(a=vd(t)),r){const f=Ts(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else o&&(l.x=Rm(o));const c=o&&!r&&!s?gb(o,a):Lr(0),u=i.left+a.scrollLeft-l.x-c.x,d=i.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:i.width,height:i.height}}function Ef(e){return Ar(e).position==="static"}function ey(e,t){if(!zr(e)||Ar(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ur(e)===n&&(n=n.ownerDocument.body),n}function vb(e,t){const n=Hn(e);if(xd(e))return n;if(!zr(e)){let o=Yo(e);for(;o&&!Oi(o);){if(Dr(o)&&!Ef(o))return o;o=Yo(o)}return n}let r=ey(e,t);for(;r&&UM(r)&&Ef(r);)r=ey(r,t);return r&&Oi(r)&&Ef(r)&&!Pm(r)?n:r||HM(e)||n}const n3=async function(e){const t=this.getOffsetParent||vb,n=this.getDimensions,r=await n(e.floating);return{reference:t3(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function r3(e){return Ar(e).direction==="rtl"}const o3={convertOffsetParentRelativeRectToViewportRelativeRect:JM,getDocumentElement:Ur,getClippingRect:ZM,getOffsetParent:vb,getElementRects:n3,getClientRects:GM,getDimensions:e3,getScale:vi,isElement:Dr,isRTL:r3};function yb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function s3(e,t){let n=null,r;const o=Ur(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:m}=c;if(a||t(),!f||!m)return;const g=mc(d),w=mc(o.clientWidth-(u+f)),C=mc(o.clientHeight-(d+m)),v=mc(u),y={rootMargin:-g+"px "+-w+"px "+-C+"px "+-v+"px",threshold:On(0,Go(1,l))||1};let E=!0;function b(D){const A=D[0].intersectionRatio;if(A!==l){if(!E)return i();A?i(!1,A):r=setTimeout(()=>{i(!1,1e-7)},1e3)}A===1&&!yb(c,e.getBoundingClientRect())&&i(),E=!1}try{n=new IntersectionObserver(b,{...y,root:o.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(e)}return i(!0),s}function i3(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Tm(e),u=o||s?[...c?hl(c):[],...hl(t)]:[];u.forEach(v=>{o&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?s3(c,n):null;let f=-1,m=null;i&&(m=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=m)==null||y.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let g,w=l?Ts(e):null;l&&C();function C(){const v=Ts(e);w&&!yb(w,v)&&n(),w=v,g=requestAnimationFrame(C)}return n(),()=>{var v;u.forEach(x=>{o&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),d==null||d(),(v=m)==null||v.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const a3=OM,l3=$M,c3=_M,u3=VM,d3=BM,ty=jM,f3=zM,h3=(e,t,n)=>{const r=new Map,o={platform:o3,...n},s={...o.platform,_c:r};return IM(e,t,{...o,platform:s})};var Hc=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Tu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Tu(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Tu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function wb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ny(e,t){const n=wb(e);return Math.round(t*n)/n}function Sf(e){const t=h.useRef(e);return Hc(()=>{t.current=e}),t}function p3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=h.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=h.useState(r);Tu(f,r)||m(r);const[g,w]=h.useState(null),[C,v]=h.useState(null),x=h.useCallback(M=>{M!==D.current&&(D.current=M,w(M))},[]),y=h.useCallback(M=>{M!==A.current&&(A.current=M,v(M))},[]),E=s||g,b=i||C,D=h.useRef(null),A=h.useRef(null),P=h.useRef(u),R=l!=null,k=Sf(l),T=Sf(o),F=Sf(c),_=h.useCallback(()=>{if(!D.current||!A.current)return;const M={placement:t,strategy:n,middleware:f};T.current&&(M.platform=T.current),h3(D.current,A.current,M).then(I=>{const U={...I,isPositioned:F.current!==!1};O.current&&!Tu(P.current,U)&&(P.current=U,Rl.flushSync(()=>{d(U)}))})},[f,t,n,T,F]);Hc(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(M=>({...M,isPositioned:!1})))},[c]);const O=h.useRef(!1);Hc(()=>(O.current=!0,()=>{O.current=!1}),[]),Hc(()=>{if(E&&(D.current=E),b&&(A.current=b),E&&b){if(k.current)return k.current(E,b,_);_()}},[E,b,_,k,R]);const K=h.useMemo(()=>({reference:D,floating:A,setReference:x,setFloating:y}),[x,y]),j=h.useMemo(()=>({reference:E,floating:b}),[E,b]),B=h.useMemo(()=>{const M={position:n,left:0,top:0};if(!j.floating)return M;const I=ny(j.floating,u.x),U=ny(j.floating,u.y);return a?{...M,transform:"translate("+I+"px, "+U+"px)",...wb(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:U}},[n,a,j.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:_,refs:K,elements:j,floatingStyles:B}),[u,_,K,j,B])}const m3=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ty({element:r.current,padding:o}).fn(n):{}:r?ty({element:r,padding:o}).fn(n):{}}}},g3=(e,t)=>({...a3(e),options:[e,t]}),x3=(e,t)=>({...l3(e),options:[e,t]}),v3=(e,t)=>({...f3(e),options:[e,t]}),y3=(e,t)=>({...c3(e),options:[e,t]}),w3=(e,t)=>({...u3(e),options:[e,t]}),C3=(e,t)=>({...d3(e),options:[e,t]}),E3=(e,t)=>({...m3(e),options:[e,t]});var S3="Arrow",Cb=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return p.jsx(Se.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});Cb.displayName=S3;var b3=Cb;function yd(e){const[t,n]=h.useState(void 0);return io(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Fm="Popper",[Eb,wd]=En(Fm),[D3,Sb]=Eb(Fm),bb=e=>{const{__scopePopper:t,children:n}=e,[r,o]=h.useState(null);return p.jsx(D3,{scope:t,anchor:r,onAnchorChange:o,children:n})};bb.displayName=Fm;var Db="PopperAnchor",Ab=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=Sb(Db,n),i=h.useRef(null),a=Le(t,i);return h.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:p.jsx(Se.div,{...o,ref:a})});Ab.displayName=Db;var Mm="PopperContent",[A3,P3]=Eb(Mm),Pb=h.forwardRef((e,t)=>{var Y,ne,ue,Te,Pe,re;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...w}=e,C=Sb(Mm,n),[v,x]=h.useState(null),y=Le(t,xe=>x(xe)),[E,b]=h.useState(null),D=yd(E),A=(D==null?void 0:D.width)??0,P=(D==null?void 0:D.height)??0,R=r+(s!=="center"?"-"+s:""),k=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(c)?c:[c],F=T.length>0,_={padding:k,boundary:T.filter(T3),altBoundary:F},{refs:O,floatingStyles:K,placement:j,isPositioned:B,middlewareData:M}=p3({strategy:"fixed",placement:R,whileElementsMounted:(...xe)=>i3(...xe,{animationFrame:m==="always"}),elements:{reference:C.anchor},middleware:[g3({mainAxis:o+P,alignmentAxis:i}),l&&x3({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?v3():void 0,..._}),l&&y3({..._}),w3({..._,apply:({elements:xe,rects:ve,availableWidth:he,availableHeight:Ue})=>{const{width:ct,height:Je}=ve.reference,Ye=xe.floating.style;Ye.setProperty("--radix-popper-available-width",`${he}px`),Ye.setProperty("--radix-popper-available-height",`${Ue}px`),Ye.setProperty("--radix-popper-anchor-width",`${ct}px`),Ye.setProperty("--radix-popper-anchor-height",`${Je}px`)}}),E&&E3({element:E,padding:a}),R3({arrowWidth:A,arrowHeight:P}),f&&C3({strategy:"referenceHidden",..._})]}),[I,U]=Rb(j),N=Ft(g);io(()=>{B&&(N==null||N())},[B,N]);const L=(Y=M.arrow)==null?void 0:Y.x,H=(ne=M.arrow)==null?void 0:ne.y,$=((ue=M.arrow)==null?void 0:ue.centerOffset)!==0,[fe,ce]=h.useState();return io(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),p.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:B?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(Te=M.transformOrigin)==null?void 0:Te.x,(Pe=M.transformOrigin)==null?void 0:Pe.y].join(" "),...((re=M.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(A3,{scope:n,placedSide:I,onArrowChange:b,arrowX:L,arrowY:H,shouldHideArrow:$,children:p.jsx(Se.div,{"data-side":I,"data-align":U,...w,ref:y,style:{...w.style,animation:B?void 0:"none"}})})})});Pb.displayName=Mm;var kb="PopperArrow",k3={top:"bottom",right:"left",bottom:"top",left:"right"},Tb=h.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=P3(kb,r),i=k3[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(b3,{...o,ref:n,style:{...o.style,display:"block"}})})});Tb.displayName=kb;function T3(e){return e!==null}var R3=e=>({name:"transformOrigin",options:e,fn(t){var C,v,x;const{placement:n,rects:r,middlewareData:o}=t,i=((C=o.arrow)==null?void 0:C.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,u]=Rb(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=o.arrow)==null?void 0:v.x)??0)+a/2,m=(((x=o.arrow)==null?void 0:x.y)??0)+l/2;let g="",w="";return c==="bottom"?(g=i?d:`${f}px`,w=`${-l}px`):c==="top"?(g=i?d:`${f}px`,w=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,w=i?d:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,w=i?d:`${m}px`),{data:{x:g,y:w}}}});function Rb(e){const[t,n="center"]=e.split("-");return[t,n]}var F3=bb,Fb=Ab,Mb=Pb,Nb=Tb,[Cd,F7]=En("Tooltip",[wd]),Nm=wd(),Ib="TooltipProvider",M3=700,ry="tooltip.open",[N3,jb]=Cd(Ib),_b=e=>{const{__scopeTooltip:t,delayDuration:n=M3,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=e,i=h.useRef(!0),a=h.useRef(!1),l=h.useRef(0);return h.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(N3,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:h.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:h.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:s})};_b.displayName=Ib;var Bb="Tooltip",[M7,Ed]=Cd(Bb),Oh="TooltipTrigger",I3=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Ed(Oh,n),s=jb(Oh,n),i=Nm(n),a=h.useRef(null),l=Le(t,a,o.onTriggerChange),c=h.useRef(!1),u=h.useRef(!1),d=h.useCallback(()=>c.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(Fb,{asChild:!0,...i,children:p.jsx(Se.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:se(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:se(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:se(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:se(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:se(e.onBlur,o.onClose),onClick:se(e.onClick,o.onClose)})})});I3.displayName=Oh;var j3="TooltipPortal",[N7,_3]=Cd(j3,{forceMount:void 0}),$i="TooltipContent",Lb=h.forwardRef((e,t)=>{const n=_3($i,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=e,i=Ed($i,e.__scopeTooltip);return p.jsx(Sn,{present:r||i.open,children:i.disableHoverableContent?p.jsx(Ob,{side:o,...s,ref:t}):p.jsx(B3,{side:o,...s,ref:t})})}),B3=h.forwardRef((e,t)=>{const n=Ed($i,e.__scopeTooltip),r=jb($i,e.__scopeTooltip),o=h.useRef(null),s=Le(t,o),[i,a]=h.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:d}=r,f=h.useCallback(()=>{a(null),d(!1)},[d]),m=h.useCallback((g,w)=>{const C=g.currentTarget,v={x:g.clientX,y:g.clientY},x=V3(v,C.getBoundingClientRect()),y=U3(v,x),E=H3(w.getBoundingClientRect()),b=K3([...y,...E]);a(b),d(!0)},[d]);return h.useEffect(()=>()=>f(),[f]),h.useEffect(()=>{if(l&&u){const g=C=>m(C,u),w=C=>m(C,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",w),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",w)}}},[l,u,m,f]),h.useEffect(()=>{if(i){const g=w=>{const C=w.target,v={x:w.clientX,y:w.clientY},x=(l==null?void 0:l.contains(C))||(u==null?void 0:u.contains(C)),y=!W3(v,i);x?f():y&&(f(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,i,c,f]),p.jsx(Ob,{...e,ref:s})}),[L3,O3]=Cd(Bb,{isInside:!1}),$3=ES("TooltipContent"),Ob=h.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=e,l=Ed($i,n),c=Nm(n),{onClose:u}=l;return h.useEffect(()=>(document.addEventListener(ry,u),()=>document.removeEventListener(ry,u)),[u]),h.useEffect(()=>{if(l.trigger){const d=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),p.jsx(Nl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(Mb,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx($3,{children:r}),p.jsx(L3,{scope:n,isInside:!0,children:p.jsx(XF,{id:l.contentId,role:"tooltip",children:o||r})})]})})});Lb.displayName=$i;var $b="TooltipArrow",z3=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Nm(n);return O3($b,n).isInside?null:p.jsx(Nb,{...o,...r,ref:t})});z3.displayName=$b;function V3(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function U3(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function H3(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function W3(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s].x,l=t[s].y,c=t[i].x,u=t[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function K3(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),J3(t)}function J3(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var G3=_b,zb=Lb;const q3=G3,Y3=h.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(zb,{ref:r,sideOffset:t,className:ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));Y3.displayName=zb.displayName;const Im=h.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ie("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Im.displayName="Card";const X3=h.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ie("flex flex-col space-y-1.5 p-6",e),...t}));X3.displayName="CardHeader";const Q3=h.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ie("text-2xl font-semibold leading-none tracking-tight",e),...t}));Q3.displayName="CardTitle";const Z3=h.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ie("text-sm text-muted-foreground",e),...t}));Z3.displayName="CardDescription";const jm=h.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ie("p-6 pt-0",e),...t}));jm.displayName="CardContent";const eN=h.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ie("flex items-center p-6 pt-0",e),...t}));eN.displayName="CardFooter";function tN(){return p.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:p.jsx(Im,{className:"w-full max-w-md mx-4",children:p.jsxs(jm,{className:"pt-6",children:[p.jsxs("div",{className:"flex mb-4 gap-2",children:[p.jsx(S8,{className:"h-8 w-8 text-red-500"}),p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),p.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const _m=Il("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),be=h.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},s)=>{const i=r?RF:"button";return p.jsx(i,{className:ie(_m({variant:t,size:n,className:e})),ref:s,...o})});be.displayName="Button";const bf=e=>e.map(t=>typeof t=="object"?JSON.stringify(t):t),S={log:(...e)=>{typeof console<"u"&&console.log&&console.log("[Phojo]",...bf(e))},warn:(...e)=>{typeof console<"u"&&console.warn&&console.warn("[Phojo WARN]",...bf(e))},error:(...e)=>{typeof console<"u"&&console.error&&console.error("[Phojo ERROR]",...bf(e))}};function nN(e,t,n){const r=o=>{if(Array.isArray(o))return o.map(r);if(o!==null&&typeof o=="object"){const s={};return Object.keys(o).sort().forEach(i=>{s[i]=r(o[i])}),s}else return o};return JSON.stringify(r(e),t,n)}async function rN(e,t,n){const r=t.getJournalById(e);if(!r)throw new Error(`Journal with ID ${e} not found`);const o=await n.getAllEntries({includeDeleted:!0}),s=await n.getAllImageMetadata({includeDeleted:!0}),i={name:r.name,color:r.color,updatedAt:r.journalPropertiesUpdatedAt},a=r.journalPropertiesUpdatedAt,l=s.map(f=>{var m,g,w,C,v,x;return{id:f.id,contentHash:((m=f.photoMetadata)==null?void 0:m.contentHash)||"",originalFilename:((g=f.photoMetadata)==null?void 0:g.filename)||"",mimeType:((w=f.photoMetadata)==null?void 0:w.mimeType)||"",width:(C=f.photoMetadata)==null?void 0:C.width,height:(v=f.photoMetadata)==null?void 0:v.height,exifDate:(x=f.photoMetadata)==null?void 0:x.exifDate,createdAt:f.createdAt,updatedAt:f.updatedAt,isDeleted:f.isDeleted}}),c={};o.forEach(f=>{const{id:m,...g}=f;f.isDeleted===!1&&delete g.isDeleted,c[m]=g});const u={};return l.forEach(f=>{const{id:m,...g}=f;f.isDeleted===!1&&delete g.isDeleted,u[m]=g}),{schemaVersion:1,journalContentLastModified:a,journalProperties:i,entries:c,photoMetadata:u}}async function oy(e,t,n,r){const o=await n.getAllEntries({includeDeleted:!0}),s=new Set(o.map(c=>c.id)),i=await n.getAllImageMetadata({includeDeleted:!0}),a=new Set(i.map(c=>c.id));for(const[c,u]of Object.entries(t.entries))try{const d={id:c,...u},f=s.has(c)?await n.getEntryById(c):null;if(f){const m=new Date(d.updatedAt).getTime(),g=new Date(f.updatedAt).getTime();m>g?(await n.saveSyncedEntry(d,f),S.log(`[Sync] Updated entry ${c} from sync data`)):S.log(`[Sync] Kept local entry ${c} (newer or same age as sync data)`)}else await n.saveSyncedEntry(d,null),S.log(`[Sync] Created new entry ${c} from sync data`);s.delete(c)}catch(d){S.error(`[Sync] Error processing synced entry ${c}:`,d)}for(const[c,u]of Object.entries(t.photoMetadata))try{const d={id:c,...u},f=a.has(c)?await n.getImageMetadataById(c):null;if(f){const m=new Date(d.updatedAt).getTime(),g=new Date(f.updatedAt).getTime();if(m>g){const w={id:d.id,photoFilename:d.originalFilename,photoMetadata:{filename:d.originalFilename,mimeType:d.mimeType,width:d.width,height:d.height,exifDate:d.exifDate,contentHash:d.contentHash},createdAt:d.createdAt,updatedAt:d.updatedAt,isDeleted:d.isDeleted};await n.saveImageMetadata([w]),S.log(`[Sync] Updated photo metadata ${c} from sync data`)}else S.log(`[Sync] Kept local photo metadata ${c} (newer than sync data)`)}else{const m={id:d.id,photoFilename:d.originalFilename,photoMetadata:{filename:d.originalFilename,mimeType:d.mimeType,width:d.width,height:d.height,exifDate:d.exifDate,contentHash:d.contentHash},createdAt:d.createdAt,updatedAt:d.updatedAt,isDeleted:d.isDeleted};await n.saveImageMetadata([m]),S.log(`[Sync] Created new photo metadata ${c} from sync data`)}a.delete(c)}catch(d){S.error(`[Sync] Error processing synced photo metadata ${c}:`,d)}for(const c of s)try{const u=await n.getEntryById(c);u&&!u.isDeleted&&(await n.deleteEntry(c),S.log(`[Sync] Soft-deleted local entry ${c} not in sync data`))}catch(u){S.error(`[Sync] Error processing local-only entry ${c}:`,u)}for(const c of a)try{const u=await n.getImageMetadataById(c);await n.deleteImageMetadata(c),S.log(`[Sync] Soft-deleted local photo metadata ${c} not in sync data`)}catch(u){S.error(`[Sync] Error processing local-only photo metadata ${c}:`,u)}const l=r.getJournalById(e);if(l){const c=new Date(l.journalPropertiesUpdatedAt).getTime();if(new Date(t.journalProperties.updatedAt).getTime()>c){const d={name:t.journalProperties.name,color:t.journalProperties.color,journalPropertiesUpdatedAt:t.journalProperties.updatedAt};r.updateJournalMetadata(e,d),S.log(`[Sync] Updated journal properties for ${e} from sync data`)}else S.log(`[Sync] Kept local journal properties for ${e} (newer than sync data)`)}}const So="PhojoCacheDB",sy=4,Rn="entries",Vo="imageMetadata",Uo="photoBlobs",zn="cacheStatus",Df="saveQueue",Er="pending-blob-operations",rr=new Map;function Vb(e){rr.has(e)&&(S.log(`[IDB] Removing database ${e} from connection cache`),rr.delete(e))}async function zi(e=So){return new Promise((t,n)=>{const r=rr.get(e);if(r)try{if(r.objectStoreNames.length>0){t(r);return}}catch{S.warn(`[IDB] Existing database connection for ${e} is invalid, removing from cache`),rr.delete(e)}S.log(`[IDB] Opening database ${e} version ${sy}...`);const o=indexedDB.open(e,sy);o.onerror=s=>{var i;S.error(`[IDB] Database error opening ${e}:`,o.error),n(`IndexedDB error: ${(i=o.error)==null?void 0:i.message}`)},o.onsuccess=s=>{S.log(`[IDB] Database ${e} opened successfully.`);const i=o.result;i.onclose=()=>{S.warn(`[IDB] Database ${e} connection closed unexpectedly.`),rr.delete(e)},i.onversionchange=()=>{S.warn(`[IDB] Database ${e} version change detected. Closing connection.`),i.close(),rr.delete(e)},rr.set(e,i),t(i)},o.onupgradeneeded=s=>{S.log(`[IDB] Upgrading database ${e} from version ${s.oldVersion} to ${s.newVersion}.`);const i=o.result,a=s.oldVersion||0;if(!i.objectStoreNames.contains(Rn))i.createObjectStore(Rn).createIndex("byDate","date",{unique:!1}),S.log(`[IDB] Object store created: ${Rn} with index 'byDate'`);else if(a<2){const l=s.target.transaction.objectStore(Rn);l.indexNames.contains("byDate")||(l.createIndex("byDate","date",{unique:!1}),S.log(`[IDB] Added 'byDate' index to ${Rn} store`))}if(i.objectStoreNames.contains(Vo)||(i.createObjectStore(Vo),S.log(`[IDB] Object store created: ${Vo}`)),i.objectStoreNames.contains(Uo)||(i.createObjectStore(Uo),S.log(`[IDB] Object store created: ${Uo}`)),!i.objectStoreNames.contains(zn))i.createObjectStore(zn).createIndex("lastAccessed","lastAccessed",{unique:!1}),S.log(`[IDB] Object store created: ${zn} with index 'lastAccessed'`);else if(a<2){const l=s.target.transaction.objectStore(zn);l.indexNames.contains("lastAccessed")||(l.createIndex("lastAccessed","lastAccessed",{unique:!1}),S.log(`[IDB] Re-created 'lastAccessed' index on ${zn}`))}a>=3&&i.objectStoreNames.contains(Df)&&(i.deleteObjectStore(Df),S.log(`[IDB] Removed old object store: ${Df}`)),a<4&&!i.objectStoreNames.contains(Er)&&(i.createObjectStore(Er),S.log(`[IDB] Object store created: ${Er}`)),S.log(`[IDB] Database ${e} upgrade complete.`)},o.onblocked=()=>{S.warn(`[IDB] Database ${e} open request blocked, possibly due to open connections in other tabs.`),n(new Error("IndexedDB open request blocked. Please close other tabs using this app and retry."))}})}async function cr(e,t,n,r){if(!r||r.objectStoreNames.length===0){const o=r==null?void 0:r.name;throw o&&rr.has(o)&&(S.warn(`[IDB] Invalid database connection detected for ${o} before transaction, removing from cache`),rr.delete(o)),new Error("Invalid database connection")}return new Promise((o,s)=>{let i=null;try{i=r.transaction(e,t),i.onerror=a=>{S.error(`[IDB] Transaction error on stores ${JSON.stringify(e)}:`,i==null?void 0:i.error),s((i==null?void 0:i.error)||new Error("Unknown transaction error"))},i.onabort=a=>{S.warn(`[IDB] Transaction aborted on stores ${JSON.stringify(e)}:`,i==null?void 0:i.error),s((i==null?void 0:i.error)||new Error("Transaction aborted"))},n(i).then(o).catch(a=>{S.error(`[IDB] Error during transaction action on stores ${JSON.stringify(e)}:`,a);try{i==null||i.abort()}catch(l){S.error("[IDB] Error aborting transaction after action error:",l)}s(a)})}catch(a){S.error(`[IDB] Failed to initiate transaction on stores ${JSON.stringify(e)}:`,a),r!=null&&r.name&&(S.warn(`[IDB] Removing database ${r.name} from cache due to transaction failure`),rr.delete(r.name)),s(a)}})}async function _l(e,t,n,r){await cr(t,"readwrite",o=>new Promise((s,i)=>{const l=o.objectStore(t).put(r,n);l.onsuccess=()=>s(),l.onerror=()=>i(l.error)}),e)}async function Vi(e,t,n){return cr(t,"readonly",r=>new Promise((o,s)=>{const a=r.objectStore(t).get(n);a.onsuccess=()=>o(a.result),a.onerror=()=>s(a.error)}),e)}async function oN(e,t,n){await cr(t,"readwrite",r=>new Promise((o,s)=>{const a=r.objectStore(t).delete(n);a.onsuccess=()=>o(),a.onerror=()=>s(a.error)}),e),S.log(`[IDB] Data delete successful for key '${String(n)}' in store '${t}'.`)}async function sN(e,t){return cr(zn,"readonly",n=>new Promise((r,o)=>{try{const a=n.objectStore(zn).index("lastAccessed").openCursor(),l=[];a.onsuccess=c=>{const u=c.target.result;if(u){const d=u.primaryKey,f=u.value;l.push({key:d,lastAccessed:f.lastAccessed,type:f.type}),l.length<t?u.continue():r(l)}else r(l)},a.onerror=()=>{S.error("[IDB] Error querying by lastAccessed:",a.error),o(a.error)}}catch(s){S.error("[IDB] Error setting up index query:",s),o(s)}}),e)}async function $a(e,t,n){const r=n.toString().padStart(2,"0"),o=`${t}-${r}-01`,s=new Date(t,n,0).getDate(),i=`${t}-${r}-${s.toString().padStart(2,"0")}`;return cr(Rn,"readonly",async a=>new Promise((l,c)=>{try{const d=a.objectStore(Rn).index("byDate"),f=IDBKeyRange.bound(o,i),m=d.getAll(f);m.onsuccess=()=>{const g=m.result;if(g&&g.length>0){const w=g.map(C=>({...C,createdAt:typeof C.createdAt=="string"?C.createdAt:new Date(C.createdAt||0).toISOString(),updatedAt:typeof C.updatedAt=="string"?C.updatedAt:new Date(C.updatedAt||0).toISOString()}));l(w)}else l(void 0)},m.onerror=()=>{S.error(`[IDB] Failed to query entries for ${t}-${r}:`,m.error),c(m.error)}}catch(u){S.error("[IDB] Error querying entries by date:",u),c(u)}}),e)}async function Da(e,t){return cr(Rn,"readwrite",async n=>new Promise((r,o)=>{try{if(t.length===0){r();return}const s=n.objectStore(Rn);let i=0,a=null;const l=(c,u)=>{if(a)return;const d=c.target;if(c.type==="error"){a=d.error,S.error(`[IDB] Failed to store entry ${u}:`,a);try{n.abort()}catch{}o(a);return}c.type==="success"&&(i++,i===t.length&&(S.log(`[IDB] Successfully cached ${t.length} entries.`),r()))};for(const c of t){if(a)break;const u={...c,createdAt:typeof c.createdAt=="object"?c.createdAt.toISOString():c.createdAt,updatedAt:typeof c.updatedAt=="object"?c.updatedAt.toISOString():c.updatedAt},d=s.put(u,c.id);d.onsuccess=f=>l(f,c.id),d.onerror=f=>l(f,c.id)}}catch(s){try{n.abort()}catch{}o(s)}}),e)}async function iN(e){return cr(Vo,"readonly",async t=>new Promise((n,r)=>{const s=t.objectStore(Vo).getAll();s.onsuccess=()=>{const i=s.result;if(i&&i.length>0){const a=i.map(l=>({...l,createdAt:typeof l.createdAt=="object"?l.createdAt.toISOString():typeof l.createdAt=="string"?l.createdAt:new Date(l.createdAt||0).toISOString(),updatedAt:typeof l.updatedAt=="object"?l.updatedAt.toISOString():typeof l.updatedAt=="string"?l.updatedAt:new Date(l.updatedAt||0).toISOString()}));n(a)}else n(void 0)},s.onerror=()=>{S.error("[IDB] Failed to get all metadata:",s.error),r(s.error)}}),e)}async function Bm(e){return cr(Rn,"readonly",async t=>new Promise((n,r)=>{const s=t.objectStore(Rn).getAll();s.onsuccess=()=>{const i=s.result;if(i&&i.length>0){const a=i.map(l=>({...l,createdAt:typeof l.createdAt=="object"?l.createdAt.toISOString():typeof l.createdAt=="string"?l.createdAt:new Date(l.createdAt||0).toISOString(),updatedAt:typeof l.updatedAt=="object"?l.updatedAt.toISOString():typeof l.updatedAt=="string"?l.updatedAt:new Date(l.updatedAt||0).toISOString()}));n(a)}else n(void 0)},s.onerror=()=>{S.error("[IDB] Failed to get all entries:",s.error),r(s.error)}}),e)}async function aN(e,t){return cr(Vo,"readwrite",async n=>new Promise((r,o)=>{try{if(t.length===0){r();return}const s=n.objectStore(Vo);let i=0,a=null;const l=(c,u)=>{if(a)return;const d=c.target;if(c.type==="error"){a=d.error,S.error(`[IDB] Failed to store metadata ${u}:`,a);try{n.abort()}catch{}o(a);return}c.type==="success"&&(i++,i===t.length&&(S.log(`[IDB] Successfully cached ${t.length} metadata entries.`),r()))};for(const c of t){if(a)break;const u={...c,createdAt:typeof c.createdAt=="object"?c.createdAt.toISOString():typeof c.createdAt=="string"?c.createdAt:new Date(c.createdAt||0).toISOString()},d=s.put(u,c.id);d.onsuccess=f=>l(f,c.id),d.onerror=f=>l(f,c.id)}}catch(s){S.error("[IDB] Error caching metadata:",s);try{n.abort()}catch{}o(s)}}),e)}async function gc(e,t){return Vi(e,Uo,t)}async function xc(e,t,n,r){const o=Date.now(),s={blob:n,timestamp:o,lastAccessed:o,type:r},i={lastAccessed:o,size:n.size,type:r};await cr([Uo,zn],"readwrite",a=>new Promise(async(l,c)=>{try{const u=a.objectStore(Uo),d=a.objectStore(zn),f=new Promise((g,w)=>{const C=u.put(s,t);C.onsuccess=()=>g(),C.onerror=()=>w(C.error)}),m=new Promise((g,w)=>{const C=d.put(i,t);C.onsuccess=()=>g(),C.onerror=()=>w(C.error)});await Promise.all([f,m]),l()}catch(u){S.error(`[IDB] Error caching blob/status for ${t}:`,u),c(u)}}),e)}async function $h(e,t){await cr([Uo,zn],"readwrite",n=>new Promise(async(r,o)=>{try{const s=n.objectStore(Uo),i=n.objectStore(zn),a=new Promise((c,u)=>{const d=s.delete(t);d.onsuccess=()=>c(),d.onerror=()=>u(d.error)}),l=new Promise((c,u)=>{const d=i.delete(t);d.onsuccess=()=>c(),d.onerror=()=>u(d.error)});await Promise.all([a,l]),r()}catch(s){S.error(`[IDB] Error deleting blob/status for ${t}:`,s),o(s)}}),e),S.log(`[IDB] Deleted blob and status for ${t}`)}async function vc(e,t){try{const n=await Vi(e,zn,t);if(!n)return;const r={...n,lastAccessed:Date.now()};await _l(e,zn,t,r)}catch(n){S.error(`[IDB] Error updating access time for ${t}:`,n)}}async function lN(e){const t=rr.get(e);return t&&(S.log(`[IDB] Closing connection to ${e} before deletion`),t.close(),rr.delete(e)),new Promise((n,r)=>{S.log(`[IDB] Deleting database ${e}...`);const o=indexedDB.deleteDatabase(e);o.onsuccess=()=>{S.log(`[IDB] Database ${e} deleted successfully`),n()},o.onerror=()=>{S.error(`[IDB] Error deleting database ${e}:`,o.error),r(o.error)},o.onblocked=()=>{S.warn(`[IDB] Database deletion blocked for ${e}. Some connections might still be open.`),r(new Error(`Database deletion blocked for ${e}. Some connections might still be open.`))}})}async function iy(e,t){if(!t.id)throw new Error("Entry must have an ID");const n={...t,createdAt:t.createdAt instanceof Date?t.createdAt.toISOString():t.createdAt,updatedAt:t.updatedAt instanceof Date?t.updatedAt.toISOString():t.updatedAt};if(await _l(e,Rn,n.id,n),n.date){const r=new Date(n.date),o=r.getFullYear(),s=r.getMonth()+1;try{const i=await $a(e,o,s)||[];i.findIndex(l=>l.id===n.id)===-1?(i.push(n),await Da(e,i),S.log(`[IDB] Added entry ${n.id} to ${o}-${s} cache`)):S.log(`[IDB] Entry ${n.id} already in ${o}-${s} cache`)}catch(i){S.warn("[IDB] Error updating month cache for new entry:",i)}}return n.id}async function Af(e,t,n){if(!t.id||!n.id)throw new Error("Entry must have an ID");const r={...t,createdAt:t.createdAt instanceof Date?t.createdAt.toISOString():t.createdAt,updatedAt:t.updatedAt instanceof Date?t.updatedAt.toISOString():t.updatedAt};await _l(e,Rn,r.id,r);const o=new Date(n.date),s=o.getFullYear(),i=o.getMonth()+1,a=new Date(r.date),l=a.getFullYear(),c=a.getMonth()+1,u=s!==l||i!==c;try{if(u){const d=await $a(e,s,i)||[],f=d.filter(w=>w.id!==r.id);f.length!==d.length&&(await Da(e,f),S.log(`[IDB] Removed entry ${r.id} from ${s}-${i} cache`));const m=await $a(e,l,c)||[],g=m.findIndex(w=>w.id===r.id);g===-1?(m.push(r),await Da(e,m),S.log(`[IDB] Added entry ${r.id} to ${l}-${c} cache`)):(m[g]=r,await Da(e,m),S.log(`[IDB] Updated entry ${r.id} in ${l}-${c} cache`))}else{const d=await $a(e,l,c)||[],f=d.findIndex(m=>m.id===r.id);f!==-1&&(d[f]=r,await Da(e,d),S.log(`[IDB] Updated entry ${r.id} in ${l}-${c} cache`))}}catch(d){S.warn("[IDB] Error updating month cache for updated entry:",d)}return r.id}zi(So).catch(e=>S.error("[IDB] Initial DB open failed:",e));function Bl(e){return e.objectStoreNames.contains(Er)}async function zh(e,t,n,r){if(!Bl(e)){console.warn(`Cannot add blob to queue: sync queue store doesn't exist in database ${e.name}`);return}const o={journalId:t,contentHash:n.contentHash,extension:n.extension,type:r,timestamp:new Date().toISOString(),attempts:0};try{await _l(e,Er,n.contentHash,o)}catch(s){throw console.error("Error adding blob to sync queue:",s),s}}async function cN(e,t){try{if(!Bl(e))return[];const n=[];return await cr(Er,"readonly",async r=>{const s=r.objectStore(Er).openCursor();return new Promise((i,a)=>{s.onsuccess=l=>{const c=l.target.result;c?(n.push(c.value),c.continue()):i()},s.onerror=()=>{a(new Error("Error iterating cursors in sync queue"))}})},e),n}catch(n){return console.error("Error getting pending blobs:",n),[]}}async function ay(e,t,n){try{if(!Bl(e))return;await oN(e,Er,n)}catch(r){throw console.error("Error removing blob from sync queue:",r),r}}async function uN(e,t,n){try{if(!Bl(e))return;const r=await Vi(e,Er,n);r&&(r.attempts++,r.lastAttempt=new Date().toISOString(),await _l(e,Er,n,r))}catch(r){throw console.error("Error incrementing blob attempt:",r),r}}async function ly(e,t,n,r){try{if(!Bl(e))return!1;const o=await Vi(e,Er,n);return!!o&&o.type===r}catch(o){return console.error("Error checking if blob is in queue:",o),!1}}var Ub={exports:{}};function dN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pf={exports:{}};const fN={},hN=Object.freeze(Object.defineProperty({__proto__:null,default:fN},Symbol.toStringTag,{value:"Module"})),pN=J4(hN);var cy;function $e(){return cy||(cy=1,function(e,t){(function(n,r){e.exports=r()})(Be,function(){var n=n||function(r,o){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Be<"u"&&Be.crypto&&(s=Be.crypto),!s&&typeof dN=="function")try{s=pN}catch{}var i=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function x(){}return function(y){var E;return x.prototype=y,E=new x,x.prototype=null,E}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(x){var y=a(this);return x&&y.mixIn(x),(!y.hasOwnProperty("init")||this.init===y.init)&&(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var y in x)x.hasOwnProperty(y)&&(this[y]=x[y]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(x,y){x=this.words=x||[],y!=o?this.sigBytes=y:this.sigBytes=x.length*4},toString:function(x){return(x||m).stringify(this)},concat:function(x){var y=this.words,E=x.words,b=this.sigBytes,D=x.sigBytes;if(this.clamp(),b%4)for(var A=0;A<D;A++){var P=E[A>>>2]>>>24-A%4*8&255;y[b+A>>>2]|=P<<24-(b+A)%4*8}else for(var R=0;R<D;R+=4)y[b+R>>>2]=E[R>>>2];return this.sigBytes+=D,this},clamp:function(){var x=this.words,y=this.sigBytes;x[y>>>2]&=4294967295<<32-y%4*8,x.length=r.ceil(y/4)},clone:function(){var x=u.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var y=[],E=0;E<x;E+=4)y.push(i());return new d.init(y,x)}}),f=l.enc={},m=f.Hex={stringify:function(x){for(var y=x.words,E=x.sigBytes,b=[],D=0;D<E;D++){var A=y[D>>>2]>>>24-D%4*8&255;b.push((A>>>4).toString(16)),b.push((A&15).toString(16))}return b.join("")},parse:function(x){for(var y=x.length,E=[],b=0;b<y;b+=2)E[b>>>3]|=parseInt(x.substr(b,2),16)<<24-b%8*4;return new d.init(E,y/2)}},g=f.Latin1={stringify:function(x){for(var y=x.words,E=x.sigBytes,b=[],D=0;D<E;D++){var A=y[D>>>2]>>>24-D%4*8&255;b.push(String.fromCharCode(A))}return b.join("")},parse:function(x){for(var y=x.length,E=[],b=0;b<y;b++)E[b>>>2]|=(x.charCodeAt(b)&255)<<24-b%4*8;return new d.init(E,y)}},w=f.Utf8={stringify:function(x){try{return decodeURIComponent(escape(g.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return g.parse(unescape(encodeURIComponent(x)))}},C=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=w.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var y,E=this._data,b=E.words,D=E.sigBytes,A=this.blockSize,P=A*4,R=D/P;x?R=r.ceil(R):R=r.max((R|0)-this._minBufferSize,0);var k=R*A,T=r.min(k*4,D);if(k){for(var F=0;F<k;F+=A)this._doProcessBlock(b,F);y=b.splice(0,k),E.sigBytes-=T}return new d.init(y,T)},clone:function(){var x=u.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});c.Hasher=C.extend({cfg:u.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var y=this._doFinalize();return y},blockSize:16,_createHelper:function(x){return function(y,E){return new x.init(E).finalize(y)}},_createHmacHelper:function(x){return function(y,E){return new v.HMAC.init(x,E).finalize(y)}}});var v=l.algo={};return l}(Math);return n})}(Pf)),Pf.exports}var kf={exports:{}},uy;function Sd(){return uy||(uy=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.Base,a=s.WordArray,l=o.x64={};l.Word=i.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=i.extend({init:function(c,u){c=this.words=c||[],u!=r?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],f=0;f<u;f++){var m=c[f];d.push(m.high),d.push(m.low)}return a.create(d,this.sigBytes)},clone:function(){for(var c=i.clone.call(this),u=c.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return c}})}(),n})}(kf)),kf.exports}var Tf={exports:{}},dy;function mN(){return dy||(dy=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,o=r.lib,s=o.WordArray,i=s.init,a=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;i.call(this,u,c)}else i.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(Tf)),Tf.exports}var Rf={exports:{}},fy;function gN(){return fy||(fy=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.enc;i.Utf16=i.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var m=c[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return s.create(u,c*2)}},i.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var m=a(c[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return s.create(u,c*2)}};function a(l){return l<<8&4278255360|l>>>8&16711935}}(),n.enc.Utf16})}(Rf)),Rf.exports}var Ff={exports:{}},hy;function js(){return hy||(hy=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.enc;i.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var f=[],m=0;m<u;m+=3)for(var g=c[m>>>2]>>>24-m%4*8&255,w=c[m+1>>>2]>>>24-(m+1)%4*8&255,C=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=g<<16|w<<8|C,x=0;x<4&&m+x*.75<u;x++)f.push(d.charAt(v>>>6*(3-x)&63));var y=d.charAt(64);if(y)for(;f.length%4;)f.push(y);return f.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var m=u.charAt(64);if(m){var g=l.indexOf(m);g!==-1&&(c=g)}return a(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],f=0,m=0;m<c;m++)if(m%4){var g=u[l.charCodeAt(m-1)]<<m%4*2,w=u[l.charCodeAt(m)]>>>6-m%4*2,C=g|w;d[f>>>2]|=C<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64})}(Ff)),Ff.exports}var Mf={exports:{}},py;function xN(){return py||(py=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.enc;i.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,f=c?this._safe_map:this._map;l.clamp();for(var m=[],g=0;g<d;g+=3)for(var w=u[g>>>2]>>>24-g%4*8&255,C=u[g+1>>>2]>>>24-(g+1)%4*8&255,v=u[g+2>>>2]>>>24-(g+2)%4*8&255,x=w<<16|C<<8|v,y=0;y<4&&g+y*.75<d;y++)m.push(f.charAt(x>>>6*(3-y)&63));var E=f.charAt(64);if(E)for(;m.length%4;)m.push(E);return m.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var m=0;m<d.length;m++)f[d.charCodeAt(m)]=m}var g=d.charAt(64);if(g){var w=l.indexOf(g);w!==-1&&(u=w)}return a(l,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],f=0,m=0;m<c;m++)if(m%4){var g=u[l.charCodeAt(m-1)]<<m%4*2,w=u[l.charCodeAt(m)]>>>6-m%4*2,C=g|w;d[f>>>2]|=C<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64url})}(Mf)),Mf.exports}var Nf={exports:{}},my;function _s(){return my||(my=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.algo,c=[];(function(){for(var w=0;w<64;w++)c[w]=r.abs(r.sin(w+1))*4294967296|0})();var u=l.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,C){for(var v=0;v<16;v++){var x=C+v,y=w[x];w[x]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var E=this._hash.words,b=w[C+0],D=w[C+1],A=w[C+2],P=w[C+3],R=w[C+4],k=w[C+5],T=w[C+6],F=w[C+7],_=w[C+8],O=w[C+9],K=w[C+10],j=w[C+11],B=w[C+12],M=w[C+13],I=w[C+14],U=w[C+15],N=E[0],L=E[1],H=E[2],$=E[3];N=d(N,L,H,$,b,7,c[0]),$=d($,N,L,H,D,12,c[1]),H=d(H,$,N,L,A,17,c[2]),L=d(L,H,$,N,P,22,c[3]),N=d(N,L,H,$,R,7,c[4]),$=d($,N,L,H,k,12,c[5]),H=d(H,$,N,L,T,17,c[6]),L=d(L,H,$,N,F,22,c[7]),N=d(N,L,H,$,_,7,c[8]),$=d($,N,L,H,O,12,c[9]),H=d(H,$,N,L,K,17,c[10]),L=d(L,H,$,N,j,22,c[11]),N=d(N,L,H,$,B,7,c[12]),$=d($,N,L,H,M,12,c[13]),H=d(H,$,N,L,I,17,c[14]),L=d(L,H,$,N,U,22,c[15]),N=f(N,L,H,$,D,5,c[16]),$=f($,N,L,H,T,9,c[17]),H=f(H,$,N,L,j,14,c[18]),L=f(L,H,$,N,b,20,c[19]),N=f(N,L,H,$,k,5,c[20]),$=f($,N,L,H,K,9,c[21]),H=f(H,$,N,L,U,14,c[22]),L=f(L,H,$,N,R,20,c[23]),N=f(N,L,H,$,O,5,c[24]),$=f($,N,L,H,I,9,c[25]),H=f(H,$,N,L,P,14,c[26]),L=f(L,H,$,N,_,20,c[27]),N=f(N,L,H,$,M,5,c[28]),$=f($,N,L,H,A,9,c[29]),H=f(H,$,N,L,F,14,c[30]),L=f(L,H,$,N,B,20,c[31]),N=m(N,L,H,$,k,4,c[32]),$=m($,N,L,H,_,11,c[33]),H=m(H,$,N,L,j,16,c[34]),L=m(L,H,$,N,I,23,c[35]),N=m(N,L,H,$,D,4,c[36]),$=m($,N,L,H,R,11,c[37]),H=m(H,$,N,L,F,16,c[38]),L=m(L,H,$,N,K,23,c[39]),N=m(N,L,H,$,M,4,c[40]),$=m($,N,L,H,b,11,c[41]),H=m(H,$,N,L,P,16,c[42]),L=m(L,H,$,N,T,23,c[43]),N=m(N,L,H,$,O,4,c[44]),$=m($,N,L,H,B,11,c[45]),H=m(H,$,N,L,U,16,c[46]),L=m(L,H,$,N,A,23,c[47]),N=g(N,L,H,$,b,6,c[48]),$=g($,N,L,H,F,10,c[49]),H=g(H,$,N,L,I,15,c[50]),L=g(L,H,$,N,k,21,c[51]),N=g(N,L,H,$,B,6,c[52]),$=g($,N,L,H,P,10,c[53]),H=g(H,$,N,L,K,15,c[54]),L=g(L,H,$,N,D,21,c[55]),N=g(N,L,H,$,_,6,c[56]),$=g($,N,L,H,U,10,c[57]),H=g(H,$,N,L,T,15,c[58]),L=g(L,H,$,N,M,21,c[59]),N=g(N,L,H,$,R,6,c[60]),$=g($,N,L,H,j,10,c[61]),H=g(H,$,N,L,A,15,c[62]),L=g(L,H,$,N,O,21,c[63]),E[0]=E[0]+N|0,E[1]=E[1]+L|0,E[2]=E[2]+H|0,E[3]=E[3]+$|0},_doFinalize:function(){var w=this._data,C=w.words,v=this._nDataBytes*8,x=w.sigBytes*8;C[x>>>5]|=128<<24-x%32;var y=r.floor(v/4294967296),E=v;C[(x+64>>>9<<4)+15]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,C[(x+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,w.sigBytes=(C.length+1)*4,this._process();for(var b=this._hash,D=b.words,A=0;A<4;A++){var P=D[A];D[A]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return b},clone:function(){var w=a.clone.call(this);return w._hash=this._hash.clone(),w}});function d(w,C,v,x,y,E,b){var D=w+(C&v|~C&x)+y+b;return(D<<E|D>>>32-E)+C}function f(w,C,v,x,y,E,b){var D=w+(C&x|v&~x)+y+b;return(D<<E|D>>>32-E)+C}function m(w,C,v,x,y,E,b){var D=w+(C^v^x)+y+b;return(D<<E|D>>>32-E)+C}function g(w,C,v,x,y,E,b){var D=w+(v^(C|~x))+y+b;return(D<<E|D>>>32-E)+C}o.MD5=a._createHelper(u),o.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5})}(Nf)),Nf.exports}var If={exports:{}},gy;function Hb(){return gy||(gy=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=o.Hasher,a=r.algo,l=[],c=a.SHA1=i.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,m=f[0],g=f[1],w=f[2],C=f[3],v=f[4],x=0;x<80;x++){if(x<16)l[x]=u[d+x]|0;else{var y=l[x-3]^l[x-8]^l[x-14]^l[x-16];l[x]=y<<1|y>>>31}var E=(m<<5|m>>>27)+v+l[x];x<20?E+=(g&w|~g&C)+1518500249:x<40?E+=(g^w^C)+1859775393:x<60?E+=(g&w|g&C|w&C)-1894007588:E+=(g^w^C)-899497514,v=C,C=w,w=g<<30|g>>>2,g=m,m=E}f[0]=f[0]+m|0,f[1]=f[1]+g|0,f[2]=f[2]+w|0,f[3]=f[3]+C|0,f[4]=f[4]+v|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,m=u.sigBytes*8;return d[m>>>5]|=128<<24-m%32,d[(m+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(m+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=i.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=i._createHelper(c),r.HmacSHA1=i._createHmacHelper(c)}(),n.SHA1})}(If)),If.exports}var jf={exports:{}},xy;function Lm(){return xy||(xy=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.algo,c=[],u=[];(function(){function m(v){for(var x=r.sqrt(v),y=2;y<=x;y++)if(!(v%y))return!1;return!0}function g(v){return(v-(v|0))*4294967296|0}for(var w=2,C=0;C<64;)m(w)&&(C<8&&(c[C]=g(r.pow(w,1/2))),u[C]=g(r.pow(w,1/3)),C++),w++})();var d=[],f=l.SHA256=a.extend({_doReset:function(){this._hash=new i.init(c.slice(0))},_doProcessBlock:function(m,g){for(var w=this._hash.words,C=w[0],v=w[1],x=w[2],y=w[3],E=w[4],b=w[5],D=w[6],A=w[7],P=0;P<64;P++){if(P<16)d[P]=m[g+P]|0;else{var R=d[P-15],k=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,T=d[P-2],F=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;d[P]=k+d[P-7]+F+d[P-16]}var _=E&b^~E&D,O=C&v^C&x^v&x,K=(C<<30|C>>>2)^(C<<19|C>>>13)^(C<<10|C>>>22),j=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),B=A+j+_+u[P]+d[P],M=K+O;A=D,D=b,b=E,E=y+B|0,y=x,x=v,v=C,C=B+M|0}w[0]=w[0]+C|0,w[1]=w[1]+v|0,w[2]=w[2]+x|0,w[3]=w[3]+y|0,w[4]=w[4]+E|0,w[5]=w[5]+b|0,w[6]=w[6]+D|0,w[7]=w[7]+A|0},_doFinalize:function(){var m=this._data,g=m.words,w=this._nDataBytes*8,C=m.sigBytes*8;return g[C>>>5]|=128<<24-C%32,g[(C+64>>>9<<4)+14]=r.floor(w/4294967296),g[(C+64>>>9<<4)+15]=w,m.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});o.SHA256=a._createHelper(f),o.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})}(jf)),jf.exports}var _f={exports:{}},vy;function vN(){return vy||(vy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Lm())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.algo,a=i.SHA256,l=i.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=4,c}});r.SHA224=a._createHelper(l),r.HmacSHA224=a._createHmacHelper(l)}(),n.SHA224})}(_f)),_f.exports}var Bf={exports:{}},yy;function Wb(){return yy||(yy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Sd())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.Hasher,i=r.x64,a=i.Word,l=i.WordArray,c=r.algo;function u(){return a.create.apply(a,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var g=0;g<80;g++)f[g]=u()})();var m=c.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(g,w){for(var C=this._hash.words,v=C[0],x=C[1],y=C[2],E=C[3],b=C[4],D=C[5],A=C[6],P=C[7],R=v.high,k=v.low,T=x.high,F=x.low,_=y.high,O=y.low,K=E.high,j=E.low,B=b.high,M=b.low,I=D.high,U=D.low,N=A.high,L=A.low,H=P.high,$=P.low,fe=R,ce=k,Y=T,ne=F,ue=_,Te=O,Pe=K,re=j,xe=B,ve=M,he=I,Ue=U,ct=N,Je=L,Ye=H,ht=$,nt=0;nt<80;nt++){var Xe,Mt,Ee=f[nt];if(nt<16)Mt=Ee.high=g[w+nt*2]|0,Xe=Ee.low=g[w+nt*2+1]|0;else{var He=f[nt-15],ot=He.high,jt=He.low,jn=(ot>>>1|jt<<31)^(ot>>>8|jt<<24)^ot>>>7,rt=(jt>>>1|ot<<31)^(jt>>>8|ot<<24)^(jt>>>7|ot<<25),pt=f[nt-2],st=pt.high,J=pt.low,q=(st>>>19|J<<13)^(st<<3|J>>>29)^st>>>6,oe=(J>>>19|st<<13)^(J<<3|st>>>29)^(J>>>6|st<<26),pe=f[nt-7],me=pe.high,je=pe.low,Re=f[nt-16],Ge=Re.high,mt=Re.low;Xe=rt+je,Mt=jn+me+(Xe>>>0<rt>>>0?1:0),Xe=Xe+oe,Mt=Mt+q+(Xe>>>0<oe>>>0?1:0),Xe=Xe+mt,Mt=Mt+Ge+(Xe>>>0<mt>>>0?1:0),Ee.high=Mt,Ee.low=Xe}var Jt=xe&he^~xe&ct,_t=ve&Ue^~ve&Je,nn=fe&Y^fe&ue^Y&ue,rn=ce&ne^ce&Te^ne&Te,Vt=(fe>>>28|ce<<4)^(fe<<30|ce>>>2)^(fe<<25|ce>>>7),yt=(ce>>>28|fe<<4)^(ce<<30|fe>>>2)^(ce<<25|fe>>>7),mn=(xe>>>14|ve<<18)^(xe>>>18|ve<<14)^(xe<<23|ve>>>9),wt=(ve>>>14|xe<<18)^(ve>>>18|xe<<14)^(ve<<23|xe>>>9),qn=d[nt],dr=qn.high,kr=qn.low,Lt=ht+wt,Dn=Ye+mn+(Lt>>>0<ht>>>0?1:0),Lt=Lt+_t,Dn=Dn+Jt+(Lt>>>0<_t>>>0?1:0),Lt=Lt+kr,Dn=Dn+dr+(Lt>>>0<kr>>>0?1:0),Lt=Lt+Xe,Dn=Dn+Mt+(Lt>>>0<Xe>>>0?1:0),te=yt+rn,Q=Vt+nn+(te>>>0<yt>>>0?1:0);Ye=ct,ht=Je,ct=he,Je=Ue,he=xe,Ue=ve,ve=re+Lt|0,xe=Pe+Dn+(ve>>>0<re>>>0?1:0)|0,Pe=ue,re=Te,ue=Y,Te=ne,Y=fe,ne=ce,ce=Lt+te|0,fe=Dn+Q+(ce>>>0<Lt>>>0?1:0)|0}k=v.low=k+ce,v.high=R+fe+(k>>>0<ce>>>0?1:0),F=x.low=F+ne,x.high=T+Y+(F>>>0<ne>>>0?1:0),O=y.low=O+Te,y.high=_+ue+(O>>>0<Te>>>0?1:0),j=E.low=j+re,E.high=K+Pe+(j>>>0<re>>>0?1:0),M=b.low=M+ve,b.high=B+xe+(M>>>0<ve>>>0?1:0),U=D.low=U+Ue,D.high=I+he+(U>>>0<Ue>>>0?1:0),L=A.low=L+Je,A.high=N+ct+(L>>>0<Je>>>0?1:0),$=P.low=$+ht,P.high=H+Ye+($>>>0<ht>>>0?1:0)},_doFinalize:function(){var g=this._data,w=g.words,C=this._nDataBytes*8,v=g.sigBytes*8;w[v>>>5]|=128<<24-v%32,w[(v+128>>>10<<5)+30]=Math.floor(C/4294967296),w[(v+128>>>10<<5)+31]=C,g.sigBytes=w.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});r.SHA512=s._createHelper(m),r.HmacSHA512=s._createHmacHelper(m)}(),n.SHA512})}(Bf)),Bf.exports}var Lf={exports:{}},wy;function yN(){return wy||(wy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Sd(),Wb())})(Be,function(n){return function(){var r=n,o=r.x64,s=o.Word,i=o.WordArray,a=r.algo,l=a.SHA512,c=a.SHA384=l.extend({_doReset:function(){this._hash=new i.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=l._createHelper(c),r.HmacSHA384=l._createHmacHelper(c)}(),n.SHA384})}(Lf)),Lf.exports}var Of={exports:{}},Cy;function wN(){return Cy||(Cy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Sd())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.x64,c=l.Word,u=o.algo,d=[],f=[],m=[];(function(){for(var C=1,v=0,x=0;x<24;x++){d[C+5*v]=(x+1)*(x+2)/2%64;var y=v%5,E=(2*C+3*v)%5;C=y,v=E}for(var C=0;C<5;C++)for(var v=0;v<5;v++)f[C+5*v]=v+(2*C+3*v)%5*5;for(var b=1,D=0;D<24;D++){for(var A=0,P=0,R=0;R<7;R++){if(b&1){var k=(1<<R)-1;k<32?P^=1<<k:A^=1<<k-32}b&128?b=b<<1^113:b<<=1}m[D]=c.create(A,P)}})();var g=[];(function(){for(var C=0;C<25;C++)g[C]=c.create()})();var w=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var C=this._state=[],v=0;v<25;v++)C[v]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(C,v){for(var x=this._state,y=this.blockSize/2,E=0;E<y;E++){var b=C[v+2*E],D=C[v+2*E+1];b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var A=x[E];A.high^=D,A.low^=b}for(var P=0;P<24;P++){for(var R=0;R<5;R++){for(var k=0,T=0,F=0;F<5;F++){var A=x[R+5*F];k^=A.high,T^=A.low}var _=g[R];_.high=k,_.low=T}for(var R=0;R<5;R++)for(var O=g[(R+4)%5],K=g[(R+1)%5],j=K.high,B=K.low,k=O.high^(j<<1|B>>>31),T=O.low^(B<<1|j>>>31),F=0;F<5;F++){var A=x[R+5*F];A.high^=k,A.low^=T}for(var M=1;M<25;M++){var k,T,A=x[M],I=A.high,U=A.low,N=d[M];N<32?(k=I<<N|U>>>32-N,T=U<<N|I>>>32-N):(k=U<<N-32|I>>>64-N,T=I<<N-32|U>>>64-N);var L=g[f[M]];L.high=k,L.low=T}var H=g[0],$=x[0];H.high=$.high,H.low=$.low;for(var R=0;R<5;R++)for(var F=0;F<5;F++){var M=R+5*F,A=x[M],fe=g[M],ce=g[(R+1)%5+5*F],Y=g[(R+2)%5+5*F];A.high=fe.high^~ce.high&Y.high,A.low=fe.low^~ce.low&Y.low}var A=x[0],ne=m[P];A.high^=ne.high,A.low^=ne.low}},_doFinalize:function(){var C=this._data,v=C.words;this._nDataBytes*8;var x=C.sigBytes*8,y=this.blockSize*32;v[x>>>5]|=1<<24-x%32,v[(r.ceil((x+1)/y)*y>>>5)-1]|=128,C.sigBytes=v.length*4,this._process();for(var E=this._state,b=this.cfg.outputLength/8,D=b/8,A=[],P=0;P<D;P++){var R=E[P],k=R.high,T=R.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,A.push(T),A.push(k)}return new i.init(A,b)},clone:function(){for(var C=a.clone.call(this),v=C._state=this._state.slice(0),x=0;x<25;x++)v[x]=v[x].clone();return C}});o.SHA3=a._createHelper(w),o.HmacSHA3=a._createHmacHelper(w)}(Math),n.SHA3})}(Of)),Of.exports}var $f={exports:{}},Ey;function CN(){return Ey||(Ey=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=i.create([0,1518500249,1859775393,2400959708,2840853838]),g=i.create([1352829926,1548603684,1836072691,2053994217,0]),w=l.RIPEMD160=a.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,A){for(var P=0;P<16;P++){var R=A+P,k=D[R];D[R]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var T=this._hash.words,F=m.words,_=g.words,O=c.words,K=u.words,j=d.words,B=f.words,M,I,U,N,L,H,$,fe,ce,Y;H=M=T[0],$=I=T[1],fe=U=T[2],ce=N=T[3],Y=L=T[4];for(var ne,P=0;P<80;P+=1)ne=M+D[A+O[P]]|0,P<16?ne+=C(I,U,N)+F[0]:P<32?ne+=v(I,U,N)+F[1]:P<48?ne+=x(I,U,N)+F[2]:P<64?ne+=y(I,U,N)+F[3]:ne+=E(I,U,N)+F[4],ne=ne|0,ne=b(ne,j[P]),ne=ne+L|0,M=L,L=N,N=b(U,10),U=I,I=ne,ne=H+D[A+K[P]]|0,P<16?ne+=E($,fe,ce)+_[0]:P<32?ne+=y($,fe,ce)+_[1]:P<48?ne+=x($,fe,ce)+_[2]:P<64?ne+=v($,fe,ce)+_[3]:ne+=C($,fe,ce)+_[4],ne=ne|0,ne=b(ne,B[P]),ne=ne+Y|0,H=Y,Y=ce,ce=b(fe,10),fe=$,$=ne;ne=T[1]+U+ce|0,T[1]=T[2]+N+Y|0,T[2]=T[3]+L+H|0,T[3]=T[4]+M+$|0,T[4]=T[0]+I+fe|0,T[0]=ne},_doFinalize:function(){var D=this._data,A=D.words,P=this._nDataBytes*8,R=D.sigBytes*8;A[R>>>5]|=128<<24-R%32,A[(R+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D.sigBytes=(A.length+1)*4,this._process();for(var k=this._hash,T=k.words,F=0;F<5;F++){var _=T[F];T[F]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return k},clone:function(){var D=a.clone.call(this);return D._hash=this._hash.clone(),D}});function C(D,A,P){return D^A^P}function v(D,A,P){return D&A|~D&P}function x(D,A,P){return(D|~A)^P}function y(D,A,P){return D&P|A&~P}function E(D,A,P){return D^(A|~P)}function b(D,A){return D<<A|D>>>32-A}o.RIPEMD160=a._createHelper(w),o.HmacRIPEMD160=a._createHmacHelper(w)}(),n.RIPEMD160})}($f)),$f.exports}var zf={exports:{}},Sy;function Om(){return Sy||(Sy=1,function(e,t){(function(n,r){e.exports=r($e())})(Be,function(n){(function(){var r=n,o=r.lib,s=o.Base,i=r.enc,a=i.Utf8,l=r.algo;l.HMAC=s.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=a.parse(u));var d=c.blockSize,f=d*4;u.sigBytes>f&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),g=this._iKey=u.clone(),w=m.words,C=g.words,v=0;v<d;v++)w[v]^=1549556828,C[v]^=909522486;m.sigBytes=g.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}(zf)),zf.exports}var Vf={exports:{}},by;function EN(){return by||(by=1,function(e,t){(function(n,r,o){e.exports=r($e(),Lm(),Om())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.Base,i=o.WordArray,a=r.algo,l=a.SHA256,c=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var m=this.cfg,g=c.create(m.hasher,d),w=i.create(),C=i.create([1]),v=w.words,x=C.words,y=m.keySize,E=m.iterations;v.length<y;){var b=g.update(f).finalize(C);g.reset();for(var D=b.words,A=D.length,P=b,R=1;R<E;R++){P=g.finalize(P),g.reset();for(var k=P.words,T=0;T<A;T++)D[T]^=k[T]}w.concat(b),x[0]++}return w.sigBytes=y*4,w}});r.PBKDF2=function(d,f,m){return u.create(m).compute(d,f)}}(),n.PBKDF2})}(Vf)),Vf.exports}var Uf={exports:{}},Dy;function ns(){return Dy||(Dy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Hb(),Om())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.Base,i=o.WordArray,a=r.algo,l=a.MD5,c=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,m=this.cfg,g=m.hasher.create(),w=i.create(),C=w.words,v=m.keySize,x=m.iterations;C.length<v;){f&&g.update(f),f=g.update(u).finalize(d),g.reset();for(var y=1;y<x;y++)f=g.finalize(f),g.reset();w.concat(f)}return w.sigBytes=v*4,w}});r.EvpKDF=function(u,d,f){return c.create(f).compute(u,d)}}(),n.EvpKDF})}(Uf)),Uf.exports}var Hf={exports:{}},Ay;function Kt(){return Ay||(Ay=1,function(e,t){(function(n,r,o){e.exports=r($e(),ns())})(Be,function(n){n.lib.Cipher||function(r){var o=n,s=o.lib,i=s.Base,a=s.WordArray,l=s.BufferedBlockAlgorithm,c=o.enc;c.Utf8;var u=c.Base64,d=o.algo,f=d.EvpKDF,m=s.Cipher=l.extend({cfg:i.extend(),createEncryptor:function(k,T){return this.create(this._ENC_XFORM_MODE,k,T)},createDecryptor:function(k,T){return this.create(this._DEC_XFORM_MODE,k,T)},init:function(k,T,F){this.cfg=this.cfg.extend(F),this._xformMode=k,this._key=T,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var T=this._doFinalize();return T},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(T){return typeof T=="string"?R:D}return function(T){return{encrypt:function(F,_,O){return k(_).encrypt(T,F,_,O)},decrypt:function(F,_,O){return k(_).decrypt(T,F,_,O)}}}}()});s.StreamCipher=m.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var g=o.mode={},w=s.BlockCipherMode=i.extend({createEncryptor:function(k,T){return this.Encryptor.create(k,T)},createDecryptor:function(k,T){return this.Decryptor.create(k,T)},init:function(k,T){this._cipher=k,this._iv=T}}),C=g.CBC=function(){var k=w.extend();k.Encryptor=k.extend({processBlock:function(F,_){var O=this._cipher,K=O.blockSize;T.call(this,F,_,K),O.encryptBlock(F,_),this._prevBlock=F.slice(_,_+K)}}),k.Decryptor=k.extend({processBlock:function(F,_){var O=this._cipher,K=O.blockSize,j=F.slice(_,_+K);O.decryptBlock(F,_),T.call(this,F,_,K),this._prevBlock=j}});function T(F,_,O){var K,j=this._iv;j?(K=j,this._iv=r):K=this._prevBlock;for(var B=0;B<O;B++)F[_+B]^=K[B]}return k}(),v=o.pad={},x=v.Pkcs7={pad:function(k,T){for(var F=T*4,_=F-k.sigBytes%F,O=_<<24|_<<16|_<<8|_,K=[],j=0;j<_;j+=4)K.push(O);var B=a.create(K,_);k.concat(B)},unpad:function(k){var T=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=T}};s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:C,padding:x}),reset:function(){var k;m.reset.call(this);var T=this.cfg,F=T.iv,_=T.mode;this._xformMode==this._ENC_XFORM_MODE?k=_.createEncryptor:(k=_.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,F&&F.words):(this._mode=k.call(_,this,F&&F.words),this._mode.__creator=k)},_doProcessBlock:function(k,T){this._mode.processBlock(k,T)},_doFinalize:function(){var k,T=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(T.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),T.unpad(k)),k},blockSize:128/32});var y=s.CipherParams=i.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),E=o.format={},b=E.OpenSSL={stringify:function(k){var T,F=k.ciphertext,_=k.salt;return _?T=a.create([1398893684,1701076831]).concat(_).concat(F):T=F,T.toString(u)},parse:function(k){var T,F=u.parse(k),_=F.words;return _[0]==1398893684&&_[1]==1701076831&&(T=a.create(_.slice(2,4)),_.splice(0,4),F.sigBytes-=16),y.create({ciphertext:F,salt:T})}},D=s.SerializableCipher=i.extend({cfg:i.extend({format:b}),encrypt:function(k,T,F,_){_=this.cfg.extend(_);var O=k.createEncryptor(F,_),K=O.finalize(T),j=O.cfg;return y.create({ciphertext:K,key:F,iv:j.iv,algorithm:k,mode:j.mode,padding:j.padding,blockSize:k.blockSize,formatter:_.format})},decrypt:function(k,T,F,_){_=this.cfg.extend(_),T=this._parse(T,_.format);var O=k.createDecryptor(F,_).finalize(T.ciphertext);return O},_parse:function(k,T){return typeof k=="string"?T.parse(k,this):k}}),A=o.kdf={},P=A.OpenSSL={execute:function(k,T,F,_,O){if(_||(_=a.random(64/8)),O)var K=f.create({keySize:T+F,hasher:O}).compute(k,_);else var K=f.create({keySize:T+F}).compute(k,_);var j=a.create(K.words.slice(T),F*4);return K.sigBytes=T*4,y.create({key:K,iv:j,salt:_})}},R=s.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:P}),encrypt:function(k,T,F,_){_=this.cfg.extend(_);var O=_.kdf.execute(F,k.keySize,k.ivSize,_.salt,_.hasher);_.iv=O.iv;var K=D.encrypt.call(this,k,T,O.key,_);return K.mixIn(O),K},decrypt:function(k,T,F,_){_=this.cfg.extend(_),T=this._parse(T,_.format);var O=_.kdf.execute(F,k.keySize,k.ivSize,T.salt,_.hasher);_.iv=O.iv;var K=D.decrypt.call(this,k,T,O.key,_);return K}})}()})}(Hf)),Hf.exports}var Wf={exports:{}},Py;function SN(){return Py||(Py=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize;o.call(this,s,i,l,a),this._prevBlock=s.slice(i,i+l)}}),r.Decryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize,c=s.slice(i,i+l);o.call(this,s,i,l,a),this._prevBlock=c}});function o(s,i,a,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<a;d++)s[i+d]^=c[d]}return r}(),n.mode.CFB})}(Wf)),Wf.exports}var Kf={exports:{}},ky;function bN(){return ky||(ky=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);a.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var f=0;f<l;f++)s[i+f]^=d[f]}});return r.Decryptor=o,r}(),n.mode.CTR})}(Kf)),Kf.exports}var Jf={exports:{}},Ty;function DN(){return Ty||(Ty=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function o(a){if((a>>24&255)===255){var l=a>>16&255,c=a>>8&255,u=a&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,a=0,a+=l<<16,a+=c<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=o(a[0]))===0&&(a[1]=o(a[1])),a}var i=r.Encryptor=r.extend({processBlock:function(a,l){var c=this._cipher,u=c.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),s(f);var m=f.slice(0);c.encryptBlock(m,0);for(var g=0;g<u;g++)a[l+g]^=m[g]}});return r.Decryptor=i,r}(),n.mode.CTRGladman})}(Jf)),Jf.exports}var Gf={exports:{}},Ry;function AN(){return Ry||(Ry=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var d=0;d<l;d++)s[i+d]^=u[d]}});return r.Decryptor=o,r}(),n.mode.OFB})}(Gf)),Gf.exports}var qf={exports:{}},Fy;function PN(){return Fy||(Fy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(o,s){this._cipher.encryptBlock(o,s)}}),r.Decryptor=r.extend({processBlock:function(o,s){this._cipher.decryptBlock(o,s)}}),r}(),n.mode.ECB})}(qf)),qf.exports}var Yf={exports:{}},My;function kN(){return My||(My=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.pad.AnsiX923={pad:function(r,o){var s=r.sigBytes,i=o*4,a=i-s%i,l=s+a-1;r.clamp(),r.words[l>>>2]|=a<<24-l%4*8,r.sigBytes+=a},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},n.pad.Ansix923})}(Yf)),Yf.exports}var Xf={exports:{}},Ny;function TN(){return Ny||(Ny=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.pad.Iso10126={pad:function(r,o){var s=o*4,i=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},n.pad.Iso10126})}(Xf)),Xf.exports}var Qf={exports:{}},Iy;function RN(){return Iy||(Iy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.pad.Iso97971={pad:function(r,o){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,o)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(Qf)),Qf.exports}var Zf={exports:{}},jy;function FN(){return jy||(jy=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.pad.ZeroPadding={pad:function(r,o){var s=o*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var o=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(o[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(Zf)),Zf.exports}var e0={exports:{}},_y;function MN(){return _y||(_y=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(e0)),e0.exports}var t0={exports:{}},By;function NN(){return By||(By=1,function(e,t){(function(n,r,o){e.exports=r($e(),Kt())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.CipherParams,a=o.enc,l=a.Hex,c=o.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return i.create({ciphertext:d})}}}(),n.format.Hex})}(t0)),t0.exports}var n0={exports:{}},Ly;function IN(){return Ly||(Ly=1,function(e,t){(function(n,r,o){e.exports=r($e(),js(),_s(),ns(),Kt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.BlockCipher,i=r.algo,a=[],l=[],c=[],u=[],d=[],f=[],m=[],g=[],w=[],C=[];(function(){for(var y=[],E=0;E<256;E++)E<128?y[E]=E<<1:y[E]=E<<1^283;for(var b=0,D=0,E=0;E<256;E++){var A=D^D<<1^D<<2^D<<3^D<<4;A=A>>>8^A&255^99,a[b]=A,l[A]=b;var P=y[b],R=y[P],k=y[R],T=y[A]*257^A*16843008;c[b]=T<<24|T>>>8,u[b]=T<<16|T>>>16,d[b]=T<<8|T>>>24,f[b]=T;var T=k*16843009^R*65537^P*257^b*16843008;m[A]=T<<24|T>>>8,g[A]=T<<16|T>>>16,w[A]=T<<8|T>>>24,C[A]=T,b?(b=P^y[y[y[k^P]]],D^=y[y[D]]):b=D=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],x=i.AES=s.extend({_doReset:function(){var y;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,b=E.words,D=E.sigBytes/4,A=this._nRounds=D+6,P=(A+1)*4,R=this._keySchedule=[],k=0;k<P;k++)k<D?R[k]=b[k]:(y=R[k-1],k%D?D>6&&k%D==4&&(y=a[y>>>24]<<24|a[y>>>16&255]<<16|a[y>>>8&255]<<8|a[y&255]):(y=y<<8|y>>>24,y=a[y>>>24]<<24|a[y>>>16&255]<<16|a[y>>>8&255]<<8|a[y&255],y^=v[k/D|0]<<24),R[k]=R[k-D]^y);for(var T=this._invKeySchedule=[],F=0;F<P;F++){var k=P-F;if(F%4)var y=R[k];else var y=R[k-4];F<4||k<=4?T[F]=y:T[F]=m[a[y>>>24]]^g[a[y>>>16&255]]^w[a[y>>>8&255]]^C[a[y&255]]}}},encryptBlock:function(y,E){this._doCryptBlock(y,E,this._keySchedule,c,u,d,f,a)},decryptBlock:function(y,E){var b=y[E+1];y[E+1]=y[E+3],y[E+3]=b,this._doCryptBlock(y,E,this._invKeySchedule,m,g,w,C,l);var b=y[E+1];y[E+1]=y[E+3],y[E+3]=b},_doCryptBlock:function(y,E,b,D,A,P,R,k){for(var T=this._nRounds,F=y[E]^b[0],_=y[E+1]^b[1],O=y[E+2]^b[2],K=y[E+3]^b[3],j=4,B=1;B<T;B++){var M=D[F>>>24]^A[_>>>16&255]^P[O>>>8&255]^R[K&255]^b[j++],I=D[_>>>24]^A[O>>>16&255]^P[K>>>8&255]^R[F&255]^b[j++],U=D[O>>>24]^A[K>>>16&255]^P[F>>>8&255]^R[_&255]^b[j++],N=D[K>>>24]^A[F>>>16&255]^P[_>>>8&255]^R[O&255]^b[j++];F=M,_=I,O=U,K=N}var M=(k[F>>>24]<<24|k[_>>>16&255]<<16|k[O>>>8&255]<<8|k[K&255])^b[j++],I=(k[_>>>24]<<24|k[O>>>16&255]<<16|k[K>>>8&255]<<8|k[F&255])^b[j++],U=(k[O>>>24]<<24|k[K>>>16&255]<<16|k[F>>>8&255]<<8|k[_&255])^b[j++],N=(k[K>>>24]<<24|k[F>>>16&255]<<16|k[_>>>8&255]<<8|k[O&255])^b[j++];y[E]=M,y[E+1]=I,y[E+2]=U,y[E+3]=N},keySize:256/32});r.AES=s._createHelper(x)}(),n.AES})}(n0)),n0.exports}var r0={exports:{}},Oy;function jN(){return Oy||(Oy=1,function(e,t){(function(n,r,o){e.exports=r($e(),js(),_s(),ns(),Kt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=o.BlockCipher,a=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=a.DES=i.extend({_doReset:function(){for(var v=this._key,x=v.words,y=[],E=0;E<56;E++){var b=l[E]-1;y[E]=x[b>>>5]>>>31-b%32&1}for(var D=this._subKeys=[],A=0;A<16;A++){for(var P=D[A]=[],R=u[A],E=0;E<24;E++)P[E/6|0]|=y[(c[E]-1+R)%28]<<31-E%6,P[4+(E/6|0)]|=y[28+(c[E+24]-1+R)%28]<<31-E%6;P[0]=P[0]<<1|P[0]>>>31;for(var E=1;E<7;E++)P[E]=P[E]>>>(E-1)*4+3;P[7]=P[7]<<5|P[7]>>>27}for(var k=this._invSubKeys=[],E=0;E<16;E++)k[E]=D[15-E]},encryptBlock:function(v,x){this._doCryptBlock(v,x,this._subKeys)},decryptBlock:function(v,x){this._doCryptBlock(v,x,this._invSubKeys)},_doCryptBlock:function(v,x,y){this._lBlock=v[x],this._rBlock=v[x+1],g.call(this,4,252645135),g.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),g.call(this,1,1431655765);for(var E=0;E<16;E++){for(var b=y[E],D=this._lBlock,A=this._rBlock,P=0,R=0;R<8;R++)P|=d[R][((A^b[R])&f[R])>>>0];this._lBlock=A,this._rBlock=D^P}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,g.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),v[x]=this._lBlock,v[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(v,x){var y=(this._lBlock>>>v^this._rBlock)&x;this._rBlock^=y,this._lBlock^=y<<v}function w(v,x){var y=(this._rBlock>>>v^this._lBlock)&x;this._lBlock^=y,this._rBlock^=y<<v}r.DES=i._createHelper(m);var C=a.TripleDES=i.extend({_doReset:function(){var v=this._key,x=v.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var y=x.slice(0,2),E=x.length<4?x.slice(0,2):x.slice(2,4),b=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=m.createEncryptor(s.create(y)),this._des2=m.createEncryptor(s.create(E)),this._des3=m.createEncryptor(s.create(b))},encryptBlock:function(v,x){this._des1.encryptBlock(v,x),this._des2.decryptBlock(v,x),this._des3.encryptBlock(v,x)},decryptBlock:function(v,x){this._des3.decryptBlock(v,x),this._des2.encryptBlock(v,x),this._des1.decryptBlock(v,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=i._createHelper(C)}(),n.TripleDES})}(r0)),r0.exports}var o0={exports:{}},$y;function _N(){return $y||($y=1,function(e,t){(function(n,r,o){e.exports=r($e(),js(),_s(),ns(),Kt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.StreamCipher,i=r.algo,a=i.RC4=s.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,m=this._S=[],g=0;g<256;g++)m[g]=g;for(var g=0,w=0;g<256;g++){var C=g%f,v=d[C>>>2]>>>24-C%4*8&255;w=(w+m[g]+v)%256;var x=m[g];m[g]=m[w],m[w]=x}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,f=this._j,m=0,g=0;g<4;g++){d=(d+1)%256,f=(f+u[d])%256;var w=u[d];u[d]=u[f],u[f]=w,m|=u[(u[d]+u[f])%256]<<24-g*8}return this._i=d,this._j=f,m}r.RC4=s._createHelper(a);var c=i.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});r.RC4Drop=s._createHelper(c)}(),n.RC4})}(o0)),o0.exports}var s0={exports:{}},zy;function BN(){return zy||(zy=1,function(e,t){(function(n,r,o){e.exports=r($e(),js(),_s(),ns(),Kt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.StreamCipher,i=r.algo,a=[],l=[],c=[],u=i.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,m=this.cfg.iv,g=0;g<4;g++)f[g]=(f[g]<<8|f[g]>>>24)&16711935|(f[g]<<24|f[g]>>>8)&4278255360;var w=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],C=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)C[g]^=w[g+4&7];if(m){var v=m.words,x=v[0],y=v[1],E=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,D=E>>>16|b&4294901760,A=b<<16|E&65535;C[0]^=E,C[1]^=D,C[2]^=b,C[3]^=A,C[4]^=E,C[5]^=D,C[6]^=b,C[7]^=A;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,m){var g=this._X;d.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var w=0;w<4;w++)a[w]=(a[w]<<8|a[w]>>>24)&16711935|(a[w]<<24|a[w]>>>8)&4278255360,f[m+w]^=a[w]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,m=this._C,g=0;g<8;g++)l[g]=m[g];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var w=f[g]+m[g],C=w&65535,v=w>>>16,x=((C*C>>>17)+C*v>>>15)+v*v,y=((w&4294901760)*w|0)+((w&65535)*w|0);c[g]=x^y}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.Rabbit=s._createHelper(u)}(),n.Rabbit})}(s0)),s0.exports}var i0={exports:{}},Vy;function LN(){return Vy||(Vy=1,function(e,t){(function(n,r,o){e.exports=r($e(),js(),_s(),ns(),Kt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.StreamCipher,i=r.algo,a=[],l=[],c=[],u=i.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,m=this.cfg.iv,g=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],w=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var C=0;C<4;C++)d.call(this);for(var C=0;C<8;C++)w[C]^=g[C+4&7];if(m){var v=m.words,x=v[0],y=v[1],E=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,D=E>>>16|b&4294901760,A=b<<16|E&65535;w[0]^=E,w[1]^=D,w[2]^=b,w[3]^=A,w[4]^=E,w[5]^=D,w[6]^=b,w[7]^=A;for(var C=0;C<4;C++)d.call(this)}},_doProcessBlock:function(f,m){var g=this._X;d.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var w=0;w<4;w++)a[w]=(a[w]<<8|a[w]>>>24)&16711935|(a[w]<<24|a[w]>>>8)&4278255360,f[m+w]^=a[w]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,m=this._C,g=0;g<8;g++)l[g]=m[g];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var w=f[g]+m[g],C=w&65535,v=w>>>16,x=((C*C>>>17)+C*v>>>15)+v*v,y=((w&4294901760)*w|0)+((w&65535)*w|0);c[g]=x^y}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.RabbitLegacy=s._createHelper(u)}(),n.RabbitLegacy})}(i0)),i0.exports}var a0={exports:{}},Uy;function ON(){return Uy||(Uy=1,function(e,t){(function(n,r,o){e.exports=r($e(),js(),_s(),ns(),Kt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.BlockCipher,i=r.algo;const a=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(C,v){let x=v>>24&255,y=v>>16&255,E=v>>8&255,b=v&255,D=C.sbox[0][x]+C.sbox[1][y];return D=D^C.sbox[2][E],D=D+C.sbox[3][b],D}function f(C,v,x){let y=v,E=x,b;for(let D=0;D<a;++D)y=y^C.pbox[D],E=d(C,y)^E,b=y,y=E,E=b;return b=y,y=E,E=b,E=E^C.pbox[a],y=y^C.pbox[a+1],{left:y,right:E}}function m(C,v,x){let y=v,E=x,b;for(let D=a+1;D>1;--D)y=y^C.pbox[D],E=d(C,y)^E,b=y,y=E,E=b;return b=y,y=E,E=b,E=E^C.pbox[1],y=y^C.pbox[0],{left:y,right:E}}function g(C,v,x){for(let A=0;A<4;A++){C.sbox[A]=[];for(let P=0;P<256;P++)C.sbox[A][P]=c[A][P]}let y=0;for(let A=0;A<a+2;A++)C.pbox[A]=l[A]^v[y],y++,y>=x&&(y=0);let E=0,b=0,D=0;for(let A=0;A<a+2;A+=2)D=f(C,E,b),E=D.left,b=D.right,C.pbox[A]=E,C.pbox[A+1]=b;for(let A=0;A<4;A++)for(let P=0;P<256;P+=2)D=f(C,E,b),E=D.left,b=D.right,C.sbox[A][P]=E,C.sbox[A][P+1]=b;return!0}var w=i.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var C=this._keyPriorReset=this._key,v=C.words,x=C.sigBytes/4;g(u,v,x)}},encryptBlock:function(C,v){var x=f(u,C[v],C[v+1]);C[v]=x.left,C[v+1]=x.right},decryptBlock:function(C,v){var x=m(u,C[v],C[v+1]);C[v]=x.left,C[v+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(w)}(),n.Blowfish})}(a0)),a0.exports}(function(e,t){(function(n,r,o){e.exports=r($e(),Sd(),mN(),gN(),js(),xN(),_s(),Hb(),Lm(),vN(),Wb(),yN(),wN(),CN(),Om(),EN(),ns(),Kt(),SN(),bN(),DN(),AN(),PN(),kN(),TN(),RN(),FN(),MN(),NN(),IN(),jN(),_N(),BN(),LN(),ON())})(Be,function(n){return n})})(Ub);var $N=Ub.exports;function Vh(e){const t=e.lastIndexOf(".");return t===-1||t===e.length-1?"jpg":e.substring(t+1).toLowerCase()}async function Hy(e){return new Promise((t,n)=>{S.log("[getImageDimensions] Starting dimension extraction",{type:typeof e,isFile:e instanceof File,fileDetails:e instanceof File?{name:e.name,size:e.size,type:e.type}:"Not a file"});const r=new Image;if(r.onload=()=>{S.log(`[getImageDimensions] Image loaded successfully with dimensions: ${r.naturalWidth}x${r.naturalHeight}`),r.naturalWidth>0&&r.naturalHeight>0?t({width:r.naturalWidth,height:r.naturalHeight}):(S.error("[getImageDimensions] Image loaded with zero dimensions"),n(new Error("Image loaded with zero dimensions.")))},r.onerror=o=>{S.error("[getImageDimensions] Image loading error:",o),n(new Error("Failed to load image to get dimensions."))},typeof e=="string")S.log(`[getImageDimensions] Processing string URL: ${e.substring(0,50)}...`),r.src=e;else if(e instanceof File){S.log(`[getImageDimensions] Processing File object: ${e.name}, size: ${e.size}, type: ${e.type}`);const o=new FileReader;o.onload=s=>{var i;if(S.log("[getImageDimensions] FileReader load successful"),(i=s.target)!=null&&i.result){const a=s.target.result;S.log(`[getImageDimensions] Data URL created, length: ${a.length}, setting as img.src`),r.src=a}else S.error("[getImageDimensions] FileReader result is empty"),n(new Error("FileReader result is empty."))},o.onerror=s=>{S.error("[getImageDimensions] FileReader error:",s),n(new Error("Failed to read file."))},S.log("[getImageDimensions] Calling reader.readAsDataURL on file"),o.readAsDataURL(e)}else S.error("[getImageDimensions] Invalid input type"),n(new Error("Invalid input for getImageDimensions"))})}const zN=e=>{if(!e||typeof e!="string")return null;try{const t=e.split(" ");if(t.length<1)return null;const n=t[0].replace(/:/g,"-");return/^\d{4}-\d{2}-\d{2}$/.test(n)?n:null}catch(t){return S.error("Error parsing EXIF date string:",t),null}};function Wy(e){return new Promise(t=>{if(!window.EXIF){S.warn("EXIF library not loaded."),t({exifDate:null});return}let n=!1;const r=setTimeout(()=>{n||(S.warn("EXIF extraction timed out."),n=!0,t({exifDate:null}))},2500);try{window.EXIF.getData(e,function(){if(!n){clearTimeout(r),n=!0;try{const o=window.EXIF.getTag(this,"DateTimeOriginal")||window.EXIF.getTag(this,"DateTimeDigitized"),s=zN(o);t({exifDate:s})}catch(o){S.error("Error reading EXIF tags:",o),t({exifDate:null})}}})}catch(o){n||(clearTimeout(r),n=!0,S.error("Error initiating EXIF.getData:",o),t({exifDate:null}))}})}var Pn=(e=>(e.IDLE="idle",e.CONNECTING="connecting",e.FETCHING="fetching",e.MERGING="merging",e.UPLOADING="uploading",e.SYNCING_PHOTOS="syncing_photos",e.COMPLETED="completed",e.FAILED="failed",e))(Pn||{});class za{constructor(t,n,r){this.listeners=[],this.currentStatus="idle",this.abortController=null,this.provider=t,this.journal=n,this.journalMetaService=r}addStatusListener(t){this.listeners.push(t)}removeStatusListener(t){this.listeners=this.listeners.filter(n=>n!==t)}removeAllListeners(){this.listeners=[]}updateStatus(t,n){this.currentStatus=t,this.listeners.forEach(r=>r(t,n)),console.log(`Sync status: ${t} - ${n}`)}getCurrentStatus(){return this.currentStatus}abortSync(){this.abortController&&(this.abortController.abort(),this.abortController=null,this.updateStatus("idle","Sync operation aborted"))}calculateHash(t){return $N.SHA256(t).toString()}async performSync(t,n={}){if(t!==this.journal.id)throw new Error(`Journal ID ${t} does not match the current journal ID ${this.journal.id}`);if(this.currentStatus!=="idle"&&this.currentStatus!=="completed")return{success:!1,message:"Sync already in progress"};this.abortController=new AbortController;const{signal:r}=this.abortController;try{if(this.updateStatus("connecting","Connecting to provider"),!await this.provider.connect(t))return this.updateStatus("failed","Failed to connect to provider"),{success:!1,message:"Failed to connect to provider"};this.updateStatus("fetching","Fetching sync lock");let s=await this.provider.getSyncLock(t);const i=await this.journalMetaService.getJournalById(t),a={lastKnownProviderVersionId:(i==null?void 0:i.lastKnownProviderVersionId)||null,lastKnownProviderTimestamp:(i==null?void 0:i.lastKnownProviderTimestamp)||null,localDirtyFlag:(i==null?void 0:i.localDirtyFlag)||!1},l=n.forceFullSync||s!==null&&s.currentDataFileVersionId!==a.lastKnownProviderVersionId||a.localDirtyFlag;this.updateStatus("merging","Preparing local data");const c=await rN(t,this.journalMetaService,this.journal);if(r.aborted)throw new Error("Sync aborted");let u=null;if(l&&(s!=null&&s.currentDataFileVersionId)&&(this.updateStatus("fetching","Downloading remote data"),u=await this.provider.getDataFile(t,s.currentDataFileVersionId)),l&&(s!=null&&s.currentDataFileVersionId)&&!u){const v=`Critical error: Sync lock points to missing data file (${s.currentDataFileVersionId}) on provider. Sync paused.`;return this.updateStatus("failed",v),{success:!1,message:v}}if(r.aborted)throw new Error("Sync aborted");this.updateStatus("merging","Merging local and remote data");const d=u?this.mergeJournalContents(c,u):c,f=nN(d),m=this.calculateHash(f),g=!(s!=null&&s.currentDataFileVersionId)||s.currentDataFileVersionId!==m;let w={success:!0,newVersionId:m,updatedEntryCount:0,updatedPhotoMetadataCount:0,uploadedPhotoCount:0,downloadedPhotoCount:0};if(g){if(this.updateStatus("uploading","Uploading data"),!(await this.provider.uploadDataFile(t,m,d)).success)return this.updateStatus("failed","Failed to upload data file"),{success:!1,message:"Failed to upload data file"};const x=n.maxRetries||5;let y=0,E=!1;for(;y<x&&!E;){if(y>0&&(this.updateStatus("uploading",`Retrying sync lock update (${y}/${x})`),await new Promise(A=>setTimeout(A,Math.pow(2,y)*500))),r.aborted)throw new Error("Sync aborted");const b={currentDataFileVersionId:m,timestamp:d.journalContentLastModified};if((await this.provider.updateSyncLock(t,b,(s==null?void 0:s.currentDataFileVersionId)||null)).success)E=!0;else if(y++,y<x){const A=await this.provider.getSyncLock(t);A&&(s=A,A.currentDataFileVersionId===m&&(E=!0))}}if(!E)return this.updateStatus("failed","Failed to update sync lock after retries"),{success:!1,message:"Failed to update sync lock after retries. Another client may have updated the data."};if(s!=null&&s.currentDataFileVersionId&&s.currentDataFileVersionId!==m)try{await this.provider.deleteOldDataFile(t,s.currentDataFileVersionId)}catch(b){console.warn("Failed to delete old data file:",b)}}this.updateStatus("merging","Updating local storage"),await oy(t,d,this.journal,this.journalMetaService),await this.journalMetaService.updateJournalMetadata(t,{lastKnownProviderVersionId:m,lastKnownProviderTimestamp:d.journalContentLastModified,localDirtyFlag:!1}),n.uploadPhotos!==!1&&(this.updateStatus("syncing_photos","Uploading photo blobs"),await this.syncPhotoBlobs(t,d)),n.downloadPhotos!==!1&&(this.updateStatus("syncing_photos","Downloading missing photo blobs"),await this.downloadMissingPhotos(t,d)),this.updateStatus("syncing_photos","Processing queued blob operations");const C=await this.processQueuedBlobOperations(t);return C>0&&console.log(`Processed ${C} queued blob operations.`),this.updateStatus("completed","Sync completed successfully"),w}catch(o){const s=o instanceof Error?o.message:"Unknown error occurred";return this.updateStatus("failed",`Sync failed: ${s}`),{success:!1,message:`Sync failed: ${s}`,error:o instanceof Error?o:new Error(s)}}finally{this.abortController=null}}mergeJournalContents(t,n){const r=this.mergeRecordsAsObject(t.entries,n.entries),o=this.mergeRecordsAsObject(t.photoMetadata,n.photoMetadata),s=new Date(t.journalContentLastModified)>=new Date(n.journalContentLastModified)?t.journalContentLastModified:n.journalContentLastModified;for(const a of Object.values(r))a.isDeleted===!1&&delete a.isDeleted;for(const a of Object.values(o))a.isDeleted===!1&&delete a.isDeleted;return{schemaVersion:Math.max(t.schemaVersion||1,n.schemaVersion||1),journalContentLastModified:s,journalProperties:this.mergeJournalProperties(t.journalProperties,n.journalProperties),entries:r,photoMetadata:o}}mergeJournalProperties(t,n){return new Date(t.updatedAt)>=new Date(n.updatedAt)?{...t}:{...n}}mergeRecordsAsObject(t,n){const r={},o=new Set([...Object.keys(t),...Object.keys(n)]);for(const s of o){const i=t[s],a=n[s];if(i&&!a)r[s]=i;else if(!i&&a)r[s]=a;else if(i&&a){const l=new Date(i.updatedAt),c=new Date(a.updatedAt);l>c?r[s]=i:r[s]=a}}return r}async syncPhotoBlobs(t,n){const r=await this.provider.listPhotoFiles(t),o=new Set(r.map(a=>a.contentHash)),s=[];Object.entries(n.photoMetadata).forEach(([a,l])=>{l.isDeleted||s.push({id:a,...l})});const i=await this.journal.getDb();for(const a of s){if(o.has(a.contentHash))continue;if(!await this.journal.getPhotoBlobUrl(a.contentHash,a.id)){console.log(`Skipping queue for photo ${a.id} with hash ${a.contentHash} - blob doesn't exist locally`);continue}const c=Vh(a.originalFilename);await ly(i,t,a.contentHash,"upload")||(console.log(`Queueing upload for photo ${a.id} with hash ${a.contentHash}`),await zh(i,t,{contentHash:a.contentHash,extension:c},"upload"))}}async downloadMissingPhotos(t,n){const r=await this.provider.listPhotoFiles(t),o=new Set(r.map(a=>a.contentHash)),s=[];Object.entries(n.photoMetadata).forEach(([a,l])=>{l.isDeleted||s.push({id:a,...l})});const i=await this.journal.getDb();for(const a of s){if(await this.journal.getPhotoBlobUrl(a.contentHash,a.id))continue;if(!o.has(a.contentHash)){console.log(`Skipping queue for photo ${a.id} with hash ${a.contentHash} - blob doesn't exist on provider`);continue}const c=Vh(a.originalFilename);await ly(i,t,a.contentHash,"download")||(console.log(`Queueing download for photo ${a.id} with hash ${a.contentHash}`),await zh(i,t,{contentHash:a.contentHash,extension:c},"download"))}}async processQueuedBlobOperations(t){const n=await this.journal.getDb(),r=await cN(n);let o=0;for(const s of r)try{if(await uN(n,t,s.contentHash),s.type==="upload"){const a=(await this.journal.getAllImageMetadata()).find(l=>l.photoMetadata&&l.photoMetadata.contentHash===s.contentHash);if(a){const l=await this.journal.getPhotoBlobUrl(s.contentHash,a.id);if(l){const u=await(await fetch(l)).blob();(await this.provider.uploadPhotoBlob(t,s.contentHash,s.extension,u)).success&&(await ay(n,t,s.contentHash),o++)}}}else if(s.type==="download"){const i=`${s.contentHash}.${s.extension}`,a=await this.provider.downloadPhotoBlob(t,i);a&&(await this.journal.getAllImageMetadata()).find(u=>u.photoMetadata&&u.photoMetadata.contentHash===s.contentHash)&&(await this.journal.savePhotoBlob(s.contentHash,a,"full"),await ay(n,t,s.contentHash),o++)}}catch(i){console.error(`Error processing queued operation for ${s.contentHash}:`,i)}return o}async checkAndImportExistingData(t){try{if(await this.provider.checkForExistingData(t)){const r=await this.provider.getSyncLock(t);if(r&&r.currentDataFileVersionId){const o=await this.provider.getDataFile(t,r.currentDataFileVersionId);if(o)return await oy(t,o,this.journal,this.journalMetaService),await this.journalMetaService.updateJournalMetadata(t,{lastKnownProviderVersionId:r.currentDataFileVersionId,lastKnownProviderTimestamp:r.timestamp,localDirtyFlag:!1}),this.updateStatus("syncing_photos","Downloading and syncing photo blobs"),await this.downloadMissingPhotos(t,o),await this.processQueuedBlobOperations(t),!0}}return!1}catch(n){return console.error("Error checking for existing data:",n),!1}}}var VN=h.createContext(void 0);function Zi(e){const t=h.useContext(VN);return e||t||"ltr"}var l0="rovingFocusGroup.onEntryFocus",UN={bubbles:!1,cancelable:!0},bd="RovingFocusGroup",[Uh,Kb,HN]=ud(bd),[WN,ea]=En(bd,[HN]),[KN,JN]=WN(bd),Jb=h.forwardRef((e,t)=>p.jsx(Uh.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Uh.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(GN,{...e,ref:t})})}));Jb.displayName=bd;var GN=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=h.useRef(null),m=Le(t,f),g=Zi(s),[w=null,C]=Vr({prop:i,defaultProp:a,onChange:l}),[v,x]=h.useState(!1),y=Ft(c),E=Kb(n),b=h.useRef(!1),[D,A]=h.useState(0);return h.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(l0,y),()=>P.removeEventListener(l0,y)},[y]),p.jsx(KN,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:w,onItemFocus:h.useCallback(P=>C(P),[C]),onItemShiftTab:h.useCallback(()=>x(!0),[]),onFocusableItemAdd:h.useCallback(()=>A(P=>P+1),[]),onFocusableItemRemove:h.useCallback(()=>A(P=>P-1),[]),children:p.jsx(Se.div,{tabIndex:v||D===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:se(e.onMouseDown,()=>{b.current=!0}),onFocus:se(e.onFocus,P=>{const R=!b.current;if(P.target===P.currentTarget&&R&&!v){const k=new CustomEvent(l0,UN);if(P.currentTarget.dispatchEvent(k),!k.defaultPrevented){const T=E().filter(j=>j.focusable),F=T.find(j=>j.active),_=T.find(j=>j.id===w),K=[F,_,...T].filter(Boolean).map(j=>j.ref.current);Yb(K,u)}}b.current=!1}),onBlur:se(e.onBlur,()=>x(!1))})})}),Gb="RovingFocusGroupItem",qb=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=e,a=xi(),l=s||a,c=JN(Gb,n),u=c.currentTabStopId===l,d=Kb(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=c;return h.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),p.jsx(Uh.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:p.jsx(Se.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:t,onMouseDown:se(e.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:se(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:se(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const w=XN(g,c.orientation,c.dir);if(w!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=d().filter(x=>x.focusable).map(x=>x.ref.current);if(w==="last")v.reverse();else if(w==="prev"||w==="next"){w==="prev"&&v.reverse();const x=v.indexOf(g.currentTarget);v=c.loop?QN(v,x+1):v.slice(x+1)}setTimeout(()=>Yb(v))}})})})});qb.displayName=Gb;var qN={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function YN(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function XN(e,t,n){const r=YN(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qN[r]}function Yb(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function QN(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $m=Jb,zm=qb,ZN="Toggle",Vm=h.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...s}=e,[i=!1,a]=Vr({prop:n,onChange:o,defaultProp:r});return p.jsx(Se.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:se(e.onClick,()=>{e.disabled||a(!i)})})});Vm.displayName=ZN;var Xb=Vm,ta="ToggleGroup",[Qb,I7]=En(ta,[ea]),Zb=ea(),Um=Et.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return p.jsx(eI,{...o,ref:t})}if(n==="multiple"){const o=r;return p.jsx(tI,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${ta}\``)});Um.displayName=ta;var[e2,t2]=Qb(ta),eI=Et.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,a]=Vr({prop:n,defaultProp:r,onChange:o});return p.jsx(e2,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:a,onItemDeactivate:Et.useCallback(()=>a(""),[a]),children:p.jsx(n2,{...s,ref:t})})}),tI=Et.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i=[],a]=Vr({prop:n,defaultProp:r,onChange:o}),l=Et.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=Et.useCallback(u=>a((d=[])=>d.filter(f=>f!==u)),[a]);return p.jsx(e2,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:l,onItemDeactivate:c,children:p.jsx(n2,{...s,ref:t})})});Um.displayName=ta;var[nI,rI]=Qb(ta),n2=Et.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:s,dir:i,loop:a=!0,...l}=e,c=Zb(n),u=Zi(i),d={role:"group",dir:u,...l};return p.jsx(nI,{scope:n,rovingFocus:o,disabled:r,children:o?p.jsx($m,{asChild:!0,...c,orientation:s,dir:u,loop:a,children:p.jsx(Se.div,{...d,ref:t})}):p.jsx(Se.div,{...d,ref:t})})}),Ru="ToggleGroupItem",r2=Et.forwardRef((e,t)=>{const n=t2(Ru,e.__scopeToggleGroup),r=rI(Ru,e.__scopeToggleGroup),o=Zb(e.__scopeToggleGroup),s=n.value.includes(e.value),i=r.disabled||e.disabled,a={...e,pressed:s,disabled:i},l=Et.useRef(null);return r.rovingFocus?p.jsx(zm,{asChild:!0,...o,focusable:!i,active:s,ref:l,children:p.jsx(Ky,{...a,ref:t})}):p.jsx(Ky,{...a,ref:t})});r2.displayName=Ru;var Ky=Et.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,s=t2(Ru,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=s.type==="single"?i:void 0;return p.jsx(Vm,{...a,...o,ref:t,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}})}),o2=Um,s2=r2;const i2=Il("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),oI=h.forwardRef(({className:e,variant:t,size:n,...r},o)=>p.jsx(Xb,{ref:o,className:ie(i2({variant:t,size:n,className:e})),...r}));oI.displayName=Xb.displayName;const a2=h.createContext({size:"default",variant:"default"}),l2=h.forwardRef(({className:e,variant:t,size:n,children:r,...o},s)=>p.jsx(o2,{ref:s,className:ie("flex items-center justify-center gap-1",e),...o,children:p.jsx(a2.Provider,{value:{variant:t,size:n},children:r})}));l2.displayName=o2.displayName;const Hh=h.forwardRef(({className:e,children:t,variant:n,size:r,...o},s)=>{const i=h.useContext(a2);return p.jsx(s2,{ref:s,className:ie(i2({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});Hh.displayName=s2.displayName;var c0="focusScope.autoFocusOnMount",u0="focusScope.autoFocusOnUnmount",Jy={bubbles:!1,cancelable:!0},sI="FocusScope",Hm=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[a,l]=h.useState(null),c=Ft(o),u=Ft(s),d=h.useRef(null),f=Le(t,w=>l(w)),m=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let w=function(y){if(m.paused||!a)return;const E=y.target;a.contains(E)?d.current=E:yo(d.current,{select:!0})},C=function(y){if(m.paused||!a)return;const E=y.relatedTarget;E!==null&&(a.contains(E)||yo(d.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const b of y)b.removedNodes.length>0&&yo(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",C);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",C),x.disconnect()}}},[r,a,m.paused]),h.useEffect(()=>{if(a){qy.add(m);const w=document.activeElement;if(!a.contains(w)){const v=new CustomEvent(c0,Jy);a.addEventListener(c0,c),a.dispatchEvent(v),v.defaultPrevented||(iI(dI(c2(a)),{select:!0}),document.activeElement===w&&yo(a))}return()=>{a.removeEventListener(c0,c),setTimeout(()=>{const v=new CustomEvent(u0,Jy);a.addEventListener(u0,u),a.dispatchEvent(v),v.defaultPrevented||yo(w??document.body,{select:!0}),a.removeEventListener(u0,u),qy.remove(m)},0)}}},[a,c,u,m]);const g=h.useCallback(w=>{if(!n&&!r||m.paused)return;const C=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,v=document.activeElement;if(C&&v){const x=w.currentTarget,[y,E]=aI(x);y&&E?!w.shiftKey&&v===E?(w.preventDefault(),n&&yo(y,{select:!0})):w.shiftKey&&v===y&&(w.preventDefault(),n&&yo(E,{select:!0})):v===x&&w.preventDefault()}},[n,r,m.paused]);return p.jsx(Se.div,{tabIndex:-1,...i,ref:f,onKeyDown:g})});Hm.displayName=sI;function iI(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(yo(r,{select:t}),document.activeElement!==n)return}function aI(e){const t=c2(e),n=Gy(t,e),r=Gy(t.reverse(),e);return[n,r]}function c2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Gy(e,t){for(const n of e)if(!lI(n,{upTo:t}))return n}function lI(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cI(e){return e instanceof HTMLInputElement&&"select"in e}function yo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&cI(e)&&t&&e.select()}}var qy=uI();function uI(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Yy(e,t),e.unshift(t)},remove(t){var n;e=Yy(e,t),(n=e[0])==null||n.resume()}}}function Yy(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function dI(e){return e.filter(t=>t.tagName!=="A")}var d0=0;function u2(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Xy()),document.body.insertAdjacentElement("beforeend",e[1]??Xy()),d0++,()=>{d0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),d0--}},[])}function Xy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jr=function(){return jr=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},jr.apply(this,arguments)};function d2(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function fI(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Wc="right-scroll-bar-position",Kc="width-before-scroll-bar",hI="with-scroll-bars-hidden",pI="--removed-body-scroll-bar-size";function f0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function mI(e,t){var n=h.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var gI=typeof window<"u"?h.useLayoutEffect:h.useEffect,Qy=new WeakMap;function xI(e,t){var n=mI(null,function(r){return e.forEach(function(o){return f0(o,r)})});return gI(function(){var r=Qy.get(n);if(r){var o=new Set(r),s=new Set(e),i=n.current;o.forEach(function(a){s.has(a)||f0(a,null)}),s.forEach(function(a){o.has(a)||f0(a,i)})}Qy.set(n,e)},[e]),n}function vI(e){return e}function yI(e,t){t===void 0&&(t=vI);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var u=i;i=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return o}function wI(e){e===void 0&&(e={});var t=yI(null);return t.options=jr({async:!0,ssr:!1},e),t}var f2=function(e){var t=e.sideCar,n=d2(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,jr({},n))};f2.isSideCarExport=!0;function CI(e,t){return e.useMedium(t),f2}var h2=wI(),h0=function(){},Dd=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:h0,onWheelCapture:h0,onTouchMoveCapture:h0}),o=r[0],s=r[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,m=e.noIsolation,g=e.inert,w=e.allowPinchZoom,C=e.as,v=C===void 0?"div":C,x=e.gapMode,y=d2(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,b=xI([n,t]),D=jr(jr({},y),o);return h.createElement(h.Fragment,null,u&&h.createElement(E,{sideCar:h2,removeScrollBar:c,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!w,lockRef:n,gapMode:x}),i?h.cloneElement(h.Children.only(a),jr(jr({},D),{ref:b})):h.createElement(v,jr({},D,{className:l,ref:b}),a))});Dd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dd.classNames={fullWidth:Kc,zeroRight:Wc};var EI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SI(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=EI();return t&&e.setAttribute("nonce",t),e}function bI(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function DI(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var AI=function(){var e=0,t=null;return{add:function(n){e==0&&(t=SI())&&(bI(t,n),DI(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},PI=function(){var e=AI();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},p2=function(){var e=PI(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},kI={left:0,top:0,right:0,gap:0},p0=function(e){return parseInt(e||"",10)||0},TI=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[p0(n),p0(r),p0(o)]},RI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kI;var t=TI(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},FI=p2(),yi="data-scroll-locked",MI=function(e,t,n,r){var o=e.left,s=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(hI,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(yi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Kc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Wc," .").concat(Wc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Kc," .").concat(Kc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yi,`] {
    `).concat(pI,": ").concat(a,`px;
  }
`)},Zy=function(){var e=parseInt(document.body.getAttribute(yi)||"0",10);return isFinite(e)?e:0},NI=function(){h.useEffect(function(){return document.body.setAttribute(yi,(Zy()+1).toString()),function(){var e=Zy()-1;e<=0?document.body.removeAttribute(yi):document.body.setAttribute(yi,e.toString())}},[])},II=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;NI();var s=h.useMemo(function(){return RI(o)},[o]);return h.createElement(FI,{styles:MI(s,!t,o,n?"":"!important")})},Wh=!1;if(typeof window<"u")try{var yc=Object.defineProperty({},"passive",{get:function(){return Wh=!0,!0}});window.addEventListener("test",yc,yc),window.removeEventListener("test",yc,yc)}catch{Wh=!1}var Us=Wh?{passive:!1}:!1,jI=function(e){return e.tagName==="TEXTAREA"},m2=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jI(e)&&n[t]==="visible")},_I=function(e){return m2(e,"overflowY")},BI=function(e){return m2(e,"overflowX")},e1=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=g2(e,r);if(o){var s=x2(e,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},LI=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},OI=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},g2=function(e,t){return e==="v"?_I(t):BI(t)},x2=function(e,t){return e==="v"?LI(t):OI(t)},$I=function(e,t){return e==="h"&&t==="rtl"?-1:1},zI=function(e,t,n,r,o){var s=$I(e,window.getComputedStyle(t).direction),i=s*r,a=n.target,l=t.contains(a),c=!1,u=i>0,d=0,f=0;do{var m=x2(e,a),g=m[0],w=m[1],C=m[2],v=w-C-s*g;(g||v)&&g2(e,a)&&(d+=v,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(c=!0),c},wc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},t1=function(e){return[e.deltaX,e.deltaY]},n1=function(e){return e&&"current"in e?e.current:e},VI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},UI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},HI=0,Hs=[];function WI(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),o=h.useState(HI++)[0],s=h.useState(p2)[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var w=fI([e.lockRef.current],(e.shards||[]).map(n1),!0).filter(Boolean);return w.forEach(function(C){return C.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),w.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=h.useCallback(function(w,C){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!i.current.allowPinchZoom;var v=wc(w),x=n.current,y="deltaX"in w?w.deltaX:x[0]-v[0],E="deltaY"in w?w.deltaY:x[1]-v[1],b,D=w.target,A=Math.abs(y)>Math.abs(E)?"h":"v";if("touches"in w&&A==="h"&&D.type==="range")return!1;var P=e1(A,D);if(!P)return!0;if(P?b=A:(b=A==="v"?"h":"v",P=e1(A,D)),!P)return!1;if(!r.current&&"changedTouches"in w&&(y||E)&&(r.current=b),!b)return!0;var R=r.current||b;return zI(R,C,w,R==="h"?y:E,!0)},[]),l=h.useCallback(function(w){var C=w;if(!(!Hs.length||Hs[Hs.length-1]!==s)){var v="deltaY"in C?t1(C):wc(C),x=t.current.filter(function(b){return b.name===C.type&&(b.target===C.target||C.target===b.shadowParent)&&VI(b.delta,v)})[0];if(x&&x.should){C.cancelable&&C.preventDefault();return}if(!x){var y=(i.current.shards||[]).map(n1).filter(Boolean).filter(function(b){return b.contains(C.target)}),E=y.length>0?a(C,y[0]):!i.current.noIsolation;E&&C.cancelable&&C.preventDefault()}}},[]),c=h.useCallback(function(w,C,v,x){var y={name:w,delta:C,target:v,should:x,shadowParent:KI(v)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(E){return E!==y})},1)},[]),u=h.useCallback(function(w){n.current=wc(w),r.current=void 0},[]),d=h.useCallback(function(w){c(w.type,t1(w),w.target,a(w,e.lockRef.current))},[]),f=h.useCallback(function(w){c(w.type,wc(w),w.target,a(w,e.lockRef.current))},[]);h.useEffect(function(){return Hs.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Us),document.addEventListener("touchmove",l,Us),document.addEventListener("touchstart",u,Us),function(){Hs=Hs.filter(function(w){return w!==s}),document.removeEventListener("wheel",l,Us),document.removeEventListener("touchmove",l,Us),document.removeEventListener("touchstart",u,Us)}},[]);var m=e.removeScrollBar,g=e.inert;return h.createElement(h.Fragment,null,g?h.createElement(s,{styles:UI(o)}):null,m?h.createElement(II,{gapMode:e.gapMode}):null)}function KI(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const JI=CI(h2,WI);var Wm=h.forwardRef(function(e,t){return h.createElement(Dd,jr({},e,{ref:t,sideCar:JI}))});Wm.classNames=Dd.classNames;var GI=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ws=new WeakMap,Cc=new WeakMap,Ec={},m0=0,v2=function(e){return e&&(e.host||v2(e.parentNode))},qI=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=v2(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},YI=function(e,t,n,r){var o=qI(t,Array.isArray(e)?e:[e]);Ec[n]||(Ec[n]=new WeakMap);var s=Ec[n],i=[],a=new Set,l=new Set(o),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var m=f.getAttribute(r),g=m!==null&&m!=="false",w=(Ws.get(f)||0)+1,C=(s.get(f)||0)+1;Ws.set(f,w),s.set(f,C),i.push(f),w===1&&g&&Cc.set(f,!0),C===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(t),a.clear(),m0++,function(){i.forEach(function(d){var f=Ws.get(d)-1,m=s.get(d)-1;Ws.set(d,f),s.set(d,m),f||(Cc.has(d)||d.removeAttribute(r),Cc.delete(d)),m||d.removeAttribute(n)}),m0--,m0||(Ws=new WeakMap,Ws=new WeakMap,Cc=new WeakMap,Ec={})}},y2=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=GI(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),YI(r,o,n,"aria-hidden")):function(){return null}},Km="Dialog",[w2,C2]=En(Km),[XI,Pr]=w2(Km),E2=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,a=h.useRef(null),l=h.useRef(null),[c=!1,u]=Vr({prop:r,defaultProp:o,onChange:s});return p.jsx(XI,{scope:t,triggerRef:a,contentRef:l,contentId:xi(),titleId:xi(),descriptionId:xi(),open:c,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};E2.displayName=Km;var S2="DialogTrigger",b2=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Pr(S2,n),s=Le(t,o.triggerRef);return p.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":qm(o.open),...r,ref:s,onClick:se(e.onClick,o.onOpenToggle)})});b2.displayName=S2;var Jm="DialogPortal",[QI,D2]=w2(Jm,{forceMount:void 0}),A2=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=Pr(Jm,t);return p.jsx(QI,{scope:t,forceMount:n,children:h.Children.map(r,i=>p.jsx(Sn,{present:n||s.open,children:p.jsx(dd,{asChild:!0,container:o,children:i})}))})};A2.displayName=Jm;var Fu="DialogOverlay",P2=h.forwardRef((e,t)=>{const n=D2(Fu,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Pr(Fu,e.__scopeDialog);return s.modal?p.jsx(Sn,{present:r||s.open,children:p.jsx(ej,{...o,ref:t})}):null});P2.displayName=Fu;var ZI=Li("DialogOverlay.RemoveScroll"),ej=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Pr(Fu,n);return p.jsx(Wm,{as:ZI,allowPinchZoom:!0,shards:[o.contentRef],children:p.jsx(Se.div,{"data-state":qm(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Rs="DialogContent",k2=h.forwardRef((e,t)=>{const n=D2(Rs,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Pr(Rs,e.__scopeDialog);return p.jsx(Sn,{present:r||s.open,children:s.modal?p.jsx(tj,{...o,ref:t}):p.jsx(nj,{...o,ref:t})})});k2.displayName=Rs;var tj=h.forwardRef((e,t)=>{const n=Pr(Rs,e.__scopeDialog),r=h.useRef(null),o=Le(t,n.contentRef,r);return h.useEffect(()=>{const s=r.current;if(s)return y2(s)},[]),p.jsx(T2,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(e.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:se(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:se(e.onFocusOutside,s=>s.preventDefault())})}),nj=h.forwardRef((e,t)=>{const n=Pr(Rs,e.__scopeDialog),r=h.useRef(!1),o=h.useRef(!1);return p.jsx(T2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),T2=h.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=e,a=Pr(Rs,n),l=h.useRef(null),c=Le(t,l);return u2(),p.jsxs(p.Fragment,{children:[p.jsx(Hm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:p.jsx(Nl,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":qm(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(oj,{titleId:a.titleId}),p.jsx(ij,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Gm="DialogTitle",R2=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Pr(Gm,n);return p.jsx(Se.h2,{id:o.titleId,...r,ref:t})});R2.displayName=Gm;var F2="DialogDescription",M2=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Pr(F2,n);return p.jsx(Se.p,{id:o.descriptionId,...r,ref:t})});M2.displayName=F2;var N2="DialogClose",I2=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Pr(N2,n);return p.jsx(Se.button,{type:"button",...r,ref:t,onClick:se(e.onClick,()=>o.onOpenChange(!1))})});I2.displayName=N2;function qm(e){return e?"open":"closed"}var j2="DialogTitleWarning",[rj,_2]=kF(j2,{contentName:Rs,titleName:Gm,docsSlug:"dialog"}),oj=({titleId:e})=>{const t=_2(j2),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},sj="DialogDescriptionWarning",ij=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_2(sj).contentName}}.`;return h.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},B2=E2,aj=b2,L2=A2,Ym=P2,Xm=k2,Qm=R2,Zm=M2,eg=I2;const Bs=B2,lj=L2,O2=h.forwardRef(({className:e,...t},n)=>p.jsx(Ym,{ref:n,className:ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));O2.displayName=Ym.displayName;const rs=h.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(lj,{children:[p.jsx(O2,{}),p.jsxs(Xm,{ref:r,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,p.jsxs(eg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(md,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rs.displayName=Xm.displayName;const os=({className:e,...t})=>p.jsx("div",{className:ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});os.displayName="DialogHeader";const na=({className:e,...t})=>p.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});na.displayName="DialogFooter";const ss=h.forwardRef(({className:e,...t},n)=>p.jsx(Qm,{ref:n,className:ie("text-lg font-semibold leading-none tracking-tight",e),...t}));ss.displayName=Qm.displayName;const ra=h.forwardRef(({className:e,...t},n)=>p.jsx(Zm,{ref:n,className:ie("text-sm text-muted-foreground",e),...t}));ra.displayName=Zm.displayName;const Ad=h.forwardRef(({className:e,type:t,...n},r)=>p.jsx("input",{type:t,className:ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ad.displayName="Input";var cj="Label",$2=h.forwardRef((e,t)=>p.jsx(Se.label,{...e,ref:t,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=e.onMouseDown)==null||o.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));$2.displayName=cj;var z2=$2;const uj=Il("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$n=h.forwardRef(({className:e,...t},n)=>p.jsx(z2,{ref:n,className:ie(uj(),e),...t}));$n.displayName=z2.displayName;function Zt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function dj(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Sc=43200,r1=1440;let fj={};function hj(){return fj}function o1(e){const t=Zt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Jc(e,t){const n=Zt(e),r=Zt(t),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}function pj(e){return dj(e,Date.now())}function mj(e,t){const n=Zt(e),r=Zt(t),o=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return o*12+s}function gj(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function xj(e,t){return+Zt(e)-+Zt(t)}function vj(e){const t=Zt(e);return t.setHours(23,59,59,999),t}function yj(e){const t=Zt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function wj(e){const t=Zt(e);return+vj(t)==+yj(t)}function Cj(e,t){const n=Zt(e),r=Zt(t),o=Jc(n,r),s=Math.abs(mj(n,r));let i;if(s<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*s);let a=Jc(n,r)===-o;wj(Zt(e))&&s===1&&Jc(e,r)===1&&(a=!1),i=o*(s-Number(a))}return i===0?0:i}function Ej(e,t,n){const r=xj(e,t)/1e3;return gj(n==null?void 0:n.roundingMethod)(r)}const Sj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},bj=(e,t,n)=>{let r;const o=Sj[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function g0(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Dj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Aj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kj={date:g0({formats:Dj,defaultWidth:"full"}),time:g0({formats:Aj,defaultWidth:"full"}),dateTime:g0({formats:Pj,defaultWidth:"full"})},Tj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Rj=(e,t,n,r)=>Tj[e];function ga(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[a]||e.values[i]}const s=e.argumentCallback?e.argumentCallback(t):t;return o[s]}}const Fj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Nj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ij={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_j={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Bj=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Lj={ordinalNumber:Bj,era:ga({values:Fj,defaultWidth:"wide"}),quarter:ga({values:Mj,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ga({values:Nj,defaultWidth:"wide"}),day:ga({values:Ij,defaultWidth:"wide"}),dayPeriod:ga({values:jj,defaultWidth:"wide",formattingValues:_j,defaultFormattingWidth:"wide"})};function xa(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;const i=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?$j(a,d=>d.test(i)):Oj(a,d=>d.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(i.length);return{value:c,rest:u}}}function Oj(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function $j(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function zj(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],s=t.match(e.parsePattern);if(!s)return null;let i=e.valueCallback?e.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=t.slice(o.length);return{value:i,rest:a}}}const Vj=/^(\d+)(th|st|nd|rd)?/i,Uj=/\d+/i,Hj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wj={any:[/^b/i,/^(a|c)/i]},Kj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jj={any:[/1/i,/2/i,/3/i,/4/i]},Gj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Xj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Qj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Zj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},e5={ordinalNumber:zj({matchPattern:Vj,parsePattern:Uj,valueCallback:e=>parseInt(e,10)}),era:xa({matchPatterns:Hj,defaultMatchWidth:"wide",parsePatterns:Wj,defaultParseWidth:"any"}),quarter:xa({matchPatterns:Kj,defaultMatchWidth:"wide",parsePatterns:Jj,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xa({matchPatterns:Gj,defaultMatchWidth:"wide",parsePatterns:qj,defaultParseWidth:"any"}),day:xa({matchPatterns:Yj,defaultMatchWidth:"wide",parsePatterns:Xj,defaultParseWidth:"any"}),dayPeriod:xa({matchPatterns:Qj,defaultMatchWidth:"any",parsePatterns:Zj,defaultParseWidth:"any"})},t5={code:"en-US",formatDistance:bj,formatLong:kj,formatRelative:Rj,localize:Lj,match:e5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function n5(e,t,n){const r=hj(),o=(n==null?void 0:n.locale)??r.locale??t5,s=2520,i=Jc(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let l,c;i>0?(l=Zt(t),c=Zt(e)):(l=Zt(e),c=Zt(t));const u=Ej(c,l),d=(o1(c)-o1(l))/1e3,f=Math.round((u-d)/60);let m;if(f<2)return n!=null&&n.includeSeconds?u<5?o.formatDistance("lessThanXSeconds",5,a):u<10?o.formatDistance("lessThanXSeconds",10,a):u<20?o.formatDistance("lessThanXSeconds",20,a):u<40?o.formatDistance("halfAMinute",0,a):u<60?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",1,a):f===0?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",f,a);if(f<45)return o.formatDistance("xMinutes",f,a);if(f<90)return o.formatDistance("aboutXHours",1,a);if(f<r1){const g=Math.round(f/60);return o.formatDistance("aboutXHours",g,a)}else{if(f<s)return o.formatDistance("xDays",1,a);if(f<Sc){const g=Math.round(f/r1);return o.formatDistance("xDays",g,a)}else if(f<Sc*2)return m=Math.round(f/Sc),o.formatDistance("aboutXMonths",m,a)}if(m=Cj(c,l),m<12){const g=Math.round(f/Sc);return o.formatDistance("xMonths",g,a)}else{const g=m%12,w=Math.trunc(m/12);return g<3?o.formatDistance("aboutXYears",w,a):g<9?o.formatDistance("overXYears",w,a):o.formatDistance("almostXYears",w+1,a)}}function r5(e,t){return n5(e,pj(e),t)}const o5=({journal:e,isActive:t,onSelect:n,onInitiateRename:r,onInitiateDeleteJournal:o,onInitiateChangeColor:s})=>{const i=new Date(e.lastModifiedTimestamp),a=s5(e.color),l={background:t?`linear-gradient(135deg, ${a}15, ${a}30)`:`linear-gradient(135deg, ${a}10, ${a}20)`,borderLeft:`4px solid ${a}`};return p.jsxs("div",{className:`p-4 border rounded-md mb-3 shadow-sm transition-all hover:shadow-md
                ${t?"ring-1 ring-primary/30":""}
                relative overflow-hidden`,style:l,role:"listitem","data-testid":`journal-list-item-${e.id}`,"data-journal-name":e.name,children:[p.jsxs("div",{className:"absolute top-0 right-0 flex",children:[e.isDefault&&p.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary text-primary-foreground rounded-bl-md",children:"Default"}),t&&p.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary text-secondary-foreground rounded-bl-md",style:{marginLeft:e.isDefault?"1px":"0"},children:"Active"})]}),p.jsxs("div",{className:"mt-2",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx("div",{className:"w-5 h-5 rounded-full mr-3 shadow-sm flex-shrink-0",style:{backgroundColor:a},title:`${e.color} color`}),p.jsx("h3",{className:"text-lg font-semibold truncate",children:e.name})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mb-3 ml-8",children:[p.jsx("span",{className:"font-medium",children:e.entryCount})," ",e.entryCount===1?"entry":"entries"," "," ",e.lastModifiedTimestamp>0?`Modified ${r5(i,{addSuffix:!0})}`:"No entries yet"]}),p.jsxs("div",{className:"flex flex-wrap gap-2 ml-8",children:[!t&&p.jsxs(be,{variant:"secondary",size:"sm",className:"whitespace-nowrap",onClick:()=>n(e.id),"aria-label":"Switch to this journal",children:[p.jsx("span",{className:"hidden sm:inline",children:"Switch to"}),p.jsx("span",{className:"sm:hidden",children:"Use"})]}),p.jsxs(be,{variant:"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>r(e.id),"aria-label":"Rename journal",children:[p.jsx("span",{className:"hidden sm:inline",children:"Rename"}),p.jsx("span",{className:"sm:hidden",children:""})]}),p.jsxs(be,{variant:"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>s(e.id),"aria-label":"Change journal color",children:[p.jsx("span",{className:"hidden sm:inline",children:"Color"}),p.jsx("span",{className:"sm:hidden",children:""})]}),p.jsxs(be,{variant:"outline",size:"sm",className:"whitespace-nowrap text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>o(e.id),"aria-label":"Delete journal",children:[p.jsx("span",{className:"hidden sm:inline",children:"Delete"}),p.jsx("span",{className:"sm:hidden",children:""})]})]})]})]})};function s5(e){return{Slate:"#64748b",Red:"#ef4444",Orange:"#f97316",Green:"#22c55e",Blue:"#3b82f6",Indigo:"#6366f1",Violet:"#8b5cf6",Teal:"#14b8a6",Amber:"#f59e0b",Rose:"#f43f5e"}[e]||"#64748b"}const i5=({onSubmit:e,onCancel:t})=>{const[n,r]=h.useState(""),[o,s]=h.useState(""),i=Et.useRef(null);Et.useEffect(()=>{i.current&&i.current.focus()},[]);const a=l=>{if(l.preventDefault(),!n||n.trim()===""){s("Journal name cannot be empty");return}e(n)};return p.jsxs("form",{onSubmit:a,className:"space-y-6",role:"form",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"bg-secondary/10 -mx-6 px-6 py-4 border-y",children:[p.jsx($n,{htmlFor:"journal-name",className:"text-base font-medium mb-2 block",children:"Journal Name"}),p.jsx(Ad,{id:"journal-name",ref:i,value:n,onChange:l=>{r(l.target.value),s("")},placeholder:"E.g. Travel Journal, Work Notes, Daily Thoughts...",className:`text-base ${o?"border-destructive focus-visible:ring-destructive":""}`}),o&&p.jsx("p",{className:"text-destructive text-sm mt-2",children:o})]}),p.jsxs("div",{className:"text-sm text-muted-foreground",children:[p.jsx("p",{children:"Your journal will be stored locally on this device."}),p.jsx("p",{children:"You can customize its color after creation."})]})]}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx(be,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),p.jsx(be,{type:"submit",className:"px-5",disabled:!n.trim(),children:"Create Journal"})]})]})},a5=({isOpen:e,onClose:t,journals:n,activeJournalId:r,onSelectJournal:o,onInitiateCreateNewJournal:s,onInitiateRenameJournal:i,onInitiateDeleteJournal:a,onInitiateChangeJournalColor:l,isCreating:c,onCreateJournal:u,onCancelCreate:d})=>{const f=[...n].sort((m,g)=>m.name.localeCompare(g.name));return p.jsx(Bs,{open:e,onOpenChange:m=>!m&&t(),children:p.jsxs(rs,{className:"sm:max-w-xl max-h-[90vh] md:max-h-[85vh] p-0 overflow-hidden",children:[p.jsxs(os,{className:"px-6 pt-6 pb-4",children:[p.jsx(ss,{className:"text-xl",children:c?"Create New Journal":"Your Journals"}),!c&&p.jsx(ra,{className:"text-sm",children:f.length>0?"Select a journal to switch to, rename, change color, or delete.":"You don't have any journals yet. Create your first one!"})]}),c?p.jsx("div",{className:"px-6",children:p.jsx(i5,{onSubmit:u,onCancel:d})}):p.jsx(p.Fragment,{children:f.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6 space-y-4 bg-muted/30",children:[p.jsx("div",{className:"text-6xl",children:""}),p.jsx("p",{className:"text-center text-muted-foreground",children:"No journals found. Create your first journal to get started!"}),p.jsx(be,{onClick:s,className:"mt-2",children:"Create First Journal"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"max-h-[60vh] overflow-y-auto py-2 px-6 space-y-1",children:f.map(m=>p.jsx(o5,{journal:m,isActive:m.id===r,onSelect:o,onInitiateRename:i,onInitiateDeleteJournal:a,onInitiateChangeColor:l},m.id))}),p.jsxs(na,{className:"px-6 py-4 bg-muted/20 border-t mt-2 flex justify-between sm:justify-between",children:[p.jsxs(be,{onClick:s,variant:"outline",className:"gap-2",children:[p.jsx("span",{className:"text-lg",children:"+"})," New Journal"]}),p.jsx(be,{onClick:t,children:"Close"})]})]})})]})})},bc=50,l5=({isOpen:e,onClose:t,journal:n,onRename:r})=>{const[o,s]=h.useState(""),[i,a]=h.useState(!1),[l,c]=h.useState(null),u=h.useRef(null);h.useEffect(()=>{e&&n&&(s(n.name),c(null),a(!1),setTimeout(()=>{var f,m;(f=u.current)==null||f.focus(),(m=u.current)==null||m.select()},50))},[e,n]);const d=async f=>{f.preventDefault();const m=o.trim();if(!m){c("Journal name cannot be empty");return}if(m.length>bc){c(`Journal name cannot exceed ${bc} characters`);return}if(!n){c("No journal selected for renaming");return}if(m===n.name){t();return}try{a(!0),c(null),await r(n.id,m),t()}catch(g){c(g.message||"An error occurred while renaming the journal"),a(!1)}};return p.jsx(Bs,{open:e,onOpenChange:f=>!f&&t(),children:p.jsxs(rs,{className:"sm:max-w-md",children:[p.jsxs(os,{children:[p.jsx(ss,{children:"Rename Journal"}),p.jsxs(ra,{children:['Change the name of "',n==null?void 0:n.name,'". Journal names help you organize your entries.']})]}),p.jsxs("form",{role:"form",onSubmit:d,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{htmlFor:"journal-name",children:"Journal Name"}),p.jsx(Ad,{id:"journal-name",ref:u,value:o,onChange:f=>{s(f.target.value),l&&c(null)},onKeyDown:f=>{f.key==="Escape"&&(f.preventDefault(),t())},placeholder:"Enter journal name",maxLength:bc,"aria-invalid":!!l,"aria-describedby":l?"journal-name-error":void 0,required:!0,disabled:i}),l&&p.jsx("p",{id:"journal-name-error",className:"text-sm text-destructive mt-1",role:"alert",children:l}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.length,"/",bc," characters"]})]}),p.jsxs(na,{children:[p.jsx(be,{type:"button",variant:"outline",onClick:t,disabled:i,className:"min-w-[80px]",children:"Cancel"}),p.jsx(be,{type:"submit",disabled:!o.trim()||i,className:"min-w-[80px]",children:i?p.jsxs(p.Fragment,{children:[p.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving"]}):"Save"})]})]})]})})},c5=[{name:"Slate",hex:"#64748b"},{name:"Red",hex:"#ef4444"},{name:"Orange",hex:"#f97316"},{name:"Green",hex:"#22c55e"},{name:"Blue",hex:"#3b82f6"},{name:"Indigo",hex:"#6366f1"},{name:"Violet",hex:"#8b5cf6"},{name:"Teal",hex:"#14b8a6"},{name:"Amber",hex:"#f59e0b"},{name:"Rose",hex:"#f43f5e"}],u5=({isOpen:e,onClose:t,journal:n,onSelectColor:r})=>{const[o,s]=h.useState(!1),[i,a]=h.useState(null),[l,c]=h.useState("");Et.useEffect(()=>{n&&(c(n.color),a(null),s(!1))},[n]);const u=async d=>{if(n)try{c(d),s(!0),a(null),await r(n.id,d),t()}catch(f){a(f.message||"An error occurred while changing the journal color"),s(!1)}};return p.jsx(Bs,{open:e,onOpenChange:d=>!d&&t(),children:p.jsxs(rs,{className:"sm:max-w-md",children:[p.jsx(os,{children:p.jsx(ss,{children:"Select Journal Color"})}),i&&p.jsx("p",{className:"text-sm text-destructive mb-4",children:i}),p.jsx("div",{className:"grid grid-cols-5 gap-3 py-4",children:c5.map(d=>p.jsx("button",{className:`w-full aspect-square rounded-full ${l===d.name?"ring-2 ring-offset-2 ring-primary":"hover:ring-2 hover:ring-offset-1 hover:ring-primary/50"}`,style:{backgroundColor:d.hex},title:d.name,onClick:()=>u(d.name),disabled:o,"aria-label":`Select ${d.name} color`},d.name))}),p.jsx(na,{children:p.jsx(be,{onClick:t,variant:"outline",disabled:o,children:"Cancel"})})]})})},d5=({isOpen:e,onClose:t,journal:n,onConfirmDelete:r})=>{const[o,s]=h.useState(""),[i,a]=h.useState(!1),[l,c]=h.useState(null);if(h.useEffect(()=>{e&&n&&(s(""),c(null),a(!1))},[e,n]),!n)return null;const u=o===n.name,d=async()=>{if(!u){c("Please type the exact journal name to confirm deletion");return}try{a(!0),c(null),await r(n.id)}catch(f){c(f.message||"An error occurred while deleting the journal"),a(!1)}};return p.jsx(Bs,{open:e,onOpenChange:f=>!f&&t(),children:p.jsxs(rs,{className:"sm:max-w-md",children:[p.jsxs(os,{children:[p.jsx(ss,{className:"text-destructive",children:"Delete Journal"}),p.jsxs(ra,{children:['This action will permanently delete the journal "',n.name,'" and all its entries and photos. This cannot be undone.']})]}),p.jsxs("div",{className:"space-y-4 py-2",children:[p.jsx("div",{className:"bg-destructive/10 text-destructive p-3 rounded-md text-sm",children:p.jsxs("p",{children:["You are about to delete ",p.jsx("strong",{children:n.name}),", which contains ",n.entryCount," ",n.entryCount===1?"entry":"entries","."]})}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs($n,{htmlFor:"confirm-text",children:["To confirm, type ",p.jsxs("strong",{children:['"',n.name,'"']})," below"]}),p.jsx(Ad,{id:"confirm-text",value:o,onChange:f=>s(f.target.value),placeholder:`Type ${n.name}`,autoFocus:!0}),l&&p.jsx("p",{className:"text-sm text-destructive",children:l})]})]}),p.jsxs(na,{children:[p.jsx(be,{type:"button",variant:"outline",onClick:t,disabled:i,children:"Cancel"}),p.jsx(be,{type:"button",variant:"destructive",onClick:d,disabled:!u||i,children:i?"Deleting...":"Delete Journal"})]})]})})};var f5="Separator",s1="horizontal",h5=["horizontal","vertical"],V2=h.forwardRef((e,t)=>{const{decorative:n,orientation:r=s1,...o}=e,s=p5(r)?r:s1,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return p.jsx(Se.div,{"data-orientation":s,...a,...o,ref:t})});V2.displayName=f5;function p5(e){return h5.includes(e)}var U2=V2;const Kh=h.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>p.jsx(U2,{ref:o,decorative:n,orientation:t,className:ie("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Kh.displayName=U2.displayName;const m5=Il("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Gc=h.forwardRef(({className:e,variant:t,...n},r)=>p.jsx("div",{ref:r,role:"alert",className:ie(m5({variant:t}),e),...n}));Gc.displayName="Alert";const qc=h.forwardRef(({className:e,...t},n)=>p.jsx("h5",{ref:n,className:ie("mb-1 font-medium leading-none tracking-tight",e),...t}));qc.displayName="AlertTitle";const Yc=h.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ie("text-sm [&_p]:leading-relaxed",e),...t}));Yc.displayName="AlertDescription";function tg(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ng="Radio",[g5,H2]=En(ng),[x5,v5]=g5(ng),W2=h.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:s,disabled:i,value:a="on",onCheck:l,form:c,...u}=e,[d,f]=h.useState(null),m=Le(t,C=>f(C)),g=h.useRef(!1),w=d?c||!!d.closest("form"):!0;return p.jsxs(x5,{scope:n,checked:o,disabled:i,children:[p.jsx(Se.button,{type:"button",role:"radio","aria-checked":o,"data-state":G2(o),"data-disabled":i?"":void 0,disabled:i,value:a,...u,ref:m,onClick:se(e.onClick,C=>{o||l==null||l(),w&&(g.current=C.isPropagationStopped(),g.current||C.stopPropagation())})}),w&&p.jsx(y5,{control:d,bubbles:!g.current,name:r,value:a,checked:o,required:s,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});W2.displayName=ng;var K2="RadioIndicator",J2=h.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...o}=e,s=v5(K2,n);return p.jsx(Sn,{present:r||s.checked,children:p.jsx(Se.span,{"data-state":G2(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t})})});J2.displayName=K2;var y5=e=>{const{control:t,checked:n,bubbles:r=!0,...o}=e,s=h.useRef(null),i=tg(n),a=yd(t);return h.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[i,n,r]),p.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function G2(e){return e?"checked":"unchecked"}var w5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rg="RadioGroup",[C5,j7]=En(rg,[ea,H2]),q2=ea(),Y2=H2(),[E5,S5]=C5(rg),X2=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:s,required:i=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...f}=e,m=q2(n),g=Zi(c),[w,C]=Vr({prop:s,defaultProp:o,onChange:d});return p.jsx(E5,{scope:n,name:r,required:i,disabled:a,value:w,onValueChange:C,children:p.jsx($m,{asChild:!0,...m,orientation:l,dir:g,loop:u,children:p.jsx(Se.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":a?"":void 0,dir:g,...f,ref:t})})})});X2.displayName=rg;var Q2="RadioGroupItem",Z2=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...o}=e,s=S5(Q2,n),i=s.disabled||r,a=q2(n),l=Y2(n),c=h.useRef(null),u=Le(t,c),d=s.value===o.value,f=h.useRef(!1);return h.useEffect(()=>{const m=w=>{w5.includes(w.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),p.jsx(zm,{asChild:!0,...a,focusable:!i,active:d,children:p.jsx(W2,{disabled:i,required:s.required,checked:d,...l,...o,name:s.name,ref:u,onCheck:()=>s.onValueChange(o.value),onKeyDown:se(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:se(o.onFocus,()=>{var m;f.current&&((m=c.current)==null||m.click())})})})});Z2.displayName=Q2;var b5="RadioGroupIndicator",eD=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,o=Y2(n);return p.jsx(J2,{...o,...r,ref:t})});eD.displayName=b5;var tD=X2,nD=Z2,D5=eD;const rD=h.forwardRef(({className:e,...t},n)=>p.jsx(tD,{className:ie("grid gap-2",e),...t,ref:n}));rD.displayName=tD.displayName;const Xc=h.forwardRef(({className:e,...t},n)=>p.jsx(nD,{ref:n,className:ie("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(D5,{className:"flex items-center justify-center",children:p.jsx(XS,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Xc.displayName=nD.displayName;const pr=class pr{constructor(t){this.cachedHandles={},this.journalMetaService=t}async getDirectoryHandleForJournal(t){if(this.cachedHandles[t])return this.cachedHandles[t];try{const n=await this.retrieveDirectoryHandle(t);if(n){if(await this.verifyPermission(n))return this.cachedHandles[t]=n,n;console.warn("Permission denied for stored directory handle, need to request again")}}catch(n){console.error("Error retrieving directory handle:",n)}return null}async openHandleDb(){return new Promise((t,n)=>{const r=indexedDB.open(pr.HANDLE_DB_NAME,1);r.onupgradeneeded=o=>{const s=o.target.result;s.objectStoreNames.contains(pr.HANDLE_STORE_NAME)||s.createObjectStore(pr.HANDLE_STORE_NAME)},r.onsuccess=o=>{t(o.target.result)},r.onerror=o=>{console.error("Error opening handle database:",o),n(new Error("Could not open handle database"))}})}async storeDirectoryHandle(t,n){try{const r=await this.openHandleDb();return new Promise((o,s)=>{const i=r.transaction(pr.HANDLE_STORE_NAME,"readwrite"),l=i.objectStore(pr.HANDLE_STORE_NAME).put(n,t);i.oncomplete=()=>{o()},i.onerror=c=>{console.error("Error storing directory handle:",c),s(new Error("Failed to store directory handle"))}})}catch(r){throw console.error("Error in storeDirectoryHandle:",r),r}}async retrieveDirectoryHandle(t){try{const n=await this.openHandleDb();return new Promise((r,o)=>{const a=n.transaction(pr.HANDLE_STORE_NAME,"readonly").objectStore(pr.HANDLE_STORE_NAME).get(t);a.onsuccess=()=>{const l=a.result;r(l||null)},a.onerror=l=>{console.error("Error retrieving directory handle:",l),o(new Error("Failed to retrieve directory handle"))}})}catch(n){return console.error("Error in retrieveDirectoryHandle:",n),null}}async verifyPermission(t){try{return await t.requestPermission({mode:"readwrite"})==="granted"}catch(n){return console.error("Error verifying permission:",n),!1}}async getOrCreateDirectory(t,n){return t.getDirectoryHandle(n,{create:!0})}async connect(t){try{const n=await this.getDirectoryHandleForJournal(t);return n?await n.requestPermission({mode:"readwrite"})==="granted":!1}catch(n){return console.error("Error connecting to local filesystem:",n),!1}}async disconnect(t){this.cachedHandles[t]&&delete this.cachedHandles[t]}async getSyncLock(t){try{const n=await this.getDirectoryHandleForJournal(t);if(!n)return null;try{const s=await(await(await n.getFileHandle("sync_lock.json")).getFile()).text();return JSON.parse(s)}catch{return null}}catch(n){return console.error("Error getting sync lock:",n),null}}async getDataFile(t,n){try{const r=await this.getDirectoryHandleForJournal(t);if(!r)return null;const o=`journal_content_${n}.json`;try{const a=await(await(await r.getFileHandle(o)).getFile()).text();return JSON.parse(a)}catch{return null}}catch(r){return console.error("Error getting data file:",r),null}}async uploadDataFile(t,n,r){try{const o=await this.getDirectoryHandleForJournal(t);if(!o)return{success:!1};const s=`journal_content_${n}.json`,a=await(await o.getFileHandle(s,{create:!0})).createWritable();return await a.write(JSON.stringify(r,null,2)),await a.close(),{success:!0,fileIdentifier:s}}catch(o){return console.error("Error uploading data file:",o),{success:!1}}}async updateSyncLock(t,n,r){try{const o=await this.getDirectoryHandleForJournal(t);if(!o)return{success:!1};if(r!==null){const a=await this.getSyncLock(t);if(a){if(a.currentDataFileVersionId!==r)return{success:!1}}else if(r!==null)return{success:!1}}const i=await(await o.getFileHandle("sync_lock.json",{create:!0})).createWritable();return await i.write(JSON.stringify(n,null,2)),await i.close(),{success:!0}}catch(o){return console.error("Error updating sync lock:",o),{success:!1}}}async deleteOldDataFile(t,n){try{const r=await this.getDirectoryHandleForJournal(t);if(!r)return;const o=`journal_content_${n}.json`;try{await r.removeEntry(o)}catch(s){console.warn(`Could not delete old data file ${o}:`,s)}}catch(r){console.error("Error deleting old data file:",r)}}async listPhotoFiles(t){try{const n=await this.getDirectoryHandleForJournal(t);if(!n)return[];let r;try{r=await n.getDirectoryHandle("photos")}catch{return[]}const o=[];for await(const s of r.values())if(s.kind==="file"){const i=s.name,a=i.lastIndexOf("."),l=a>0?i.substring(0,a):i;o.push({name:i,contentHash:l})}return o}catch(n){return console.error("Error listing photo files:",n),[]}}async uploadPhotoBlob(t,n,r,o){try{const s=await this.getDirectoryHandleForJournal(t);if(!s)return{success:!1};const i=await this.getOrCreateDirectory(s,"photos"),a=`${n}.${r}`,c=await(await i.getFileHandle(a,{create:!0})).createWritable();return await c.write(o),await c.close(),{success:!0}}catch(s){return console.error("Error uploading photo blob:",s),{success:!1}}}async downloadPhotoBlob(t,n){try{const r=await this.getDirectoryHandleForJournal(t);if(!r)return null;let o;try{o=await r.getDirectoryHandle("photos")}catch{return null}try{return await(await o.getFileHandle(n)).getFile()}catch{return null}}catch(r){return console.error("Error downloading photo blob:",r),null}}async getFolderReference(t){try{const n=await this.journalMetaService.getJournalById(t);return(n==null?void 0:n.syncProviderFolderReference)||null}catch(n){return console.error("Error getting folder reference:",n),null}}async setFolderReference(t,n){try{await this.journalMetaService.updateJournalMetadata(t,{syncProviderType:"local",syncProviderFolderReference:n})}catch(r){console.error("Error setting folder reference:",r)}}async selectFolder(t){try{const n=await window.showDirectoryPicker({id:`phojo-journal-${t}`.substring(0,32),mode:"readwrite",startIn:"documents"});this.cachedHandles[t]=n,await this.storeDirectoryHandle(t,n);const r=n.name;return await this.journalMetaService.updateJournalMetadata(t,{syncProviderType:"local",syncProviderFolderReference:r}),t}catch(n){return console.error("Error selecting folder:",n),null}}async createFolder(t,n,r){try{const s=await(await window.showDirectoryPicker({id:`phojo-journal-parent-${t}`,mode:"readwrite",startIn:"documents"})).getDirectoryHandle(n,{create:!0});this.cachedHandles[t]=s,await this.storeDirectoryHandle(t,s);const i=s.name;return await this.journalMetaService.updateJournalMetadata(t,{syncProviderType:"local",syncProviderFolderReference:i}),t}catch(o){return console.error("Error creating folder:",o),null}}async checkForExistingData(t){try{const n=await this.getDirectoryHandleForJournal(t);if(!n)return!1;try{return await n.getFileHandle("sync_lock.json"),!0}catch{return!1}}catch(n){return console.error("Error checking for existing data:",n),!1}}};pr.HANDLE_DB_NAME="phojo-fs-handles",pr.HANDLE_STORE_NAME="directory-handles";let Es=pr;const A5=({open:e,onClose:t,journalId:n,journalName:r,journalMetaService:o,journal:s})=>{const[i,a]=h.useState("none"),[l,c]=h.useState(!1),[u,d]=h.useState(""),[f,m]=h.useState(""),[g,w]=h.useState(""),[C,v]=h.useState(!1),[x,y]=h.useState(!1),[E,b]=h.useState(Pn.IDLE),[D,A]=h.useState(null),[P,R]=h.useState(null);h.useEffect(()=>{e&&(async()=>{try{c(!0);const B=await o.getJournalById(n);if(B&&(a(B.syncProviderType||"none"),B.syncProviderType==="local"&&B.syncProviderFolderReference)){const M=new Es(o);A(M);const I=new za(M,s,o);R(I);try{const U=await M.getFolderReference(n);if(U){const N=JSON.parse(U);w(N.name||"(Local folder)")}}catch(U){console.error("Error getting folder name:",U),w("(Local folder)")}}c(!1)}catch(B){console.error("Error loading sync settings:",B),m("Error loading sync settings"),c(!1)}})()},[e,n,o,s]);const k=async j=>{if(a(j),j==="none"){A(null),R(null),w(""),v(!1);try{c(!0),await o.updateJournalMetadata(n,{syncProviderType:"none",syncProviderFolderReference:void 0,lastKnownProviderVersionId:void 0,lastKnownProviderTimestamp:void 0}),d("Sync disabled successfully"),c(!1)}catch(B){console.error("Error disabling sync:",B),m("Error disabling sync"),c(!1)}}else if(j!==i){A(null),R(null),w(""),v(!1);const B=new Es(o);A(B);const M=new za(B,s,o);R(M);try{await o.updateJournalMetadata(n,{syncProviderType:"local"})}catch(I){console.error("Error updating provider type:",I)}}},T=async()=>{if(D)try{c(!0),d("Selecting folder..."),m("");const j=await D.selectFolder(n);if(j){await D.setFolderReference(n,j);try{const B=JSON.parse(j);w(B.name||"(Selected folder)")}catch{w("(Selected folder)")}if(D){const B=await D.checkForExistingData(n);v(B),d(B?"Found existing journal data in this folder.":"Folder selected successfully.")}}else m("Folder selection cancelled or failed.");c(!1)}catch(j){console.error("Error selecting folder:",j),m("Error selecting folder"),c(!1)}},F=async()=>{if(D)try{c(!0),d("Creating folder..."),m("");const j=`Phojo - ${r}`,B=await D.createFolder(n,j);B?(await D.setFolderReference(n,B),w(j),d("Folder created successfully."),v(!1)):m("Folder creation cancelled or failed."),c(!1)}catch(j){console.error("Error creating folder:",j),m("Error creating folder"),c(!1)}},_=async()=>{if(P)try{c(!0),d("Importing existing data..."),m(""),await P.checkAndImportExistingData(n)?d("Existing data imported successfully."):m("Failed to import existing data."),c(!1)}catch(j){console.error("Error importing data:",j),m(`Error importing data: ${(j==null?void 0:j.message)||"Unknown error"}`),c(!1)}},O=async()=>{if(P)try{y(!0),d("Syncing..."),m("");const j=(M,I)=>{b(M),d(I)};P.addStatusListener(j);const B=await P.performSync(n);B.success?d(`Sync completed successfully. ${B.updatedEntryCount} entries updated.`):m(`Sync failed: ${B.message}`),P.removeStatusListener(j),y(!1)}catch(j){console.error("Error syncing:",j),m(`Error syncing: ${(j==null?void 0:j.message)||"Unknown error"}`),y(!1)}},K=()=>x?p.jsxs("div",{className:"flex items-center my-2 space-x-2",children:[p.jsx(Ht,{className:"h-4 w-4 animate-spin"}),p.jsx("p",{className:"text-sm text-gray-500",children:u})]}):null;return p.jsx(Bs,{open:e,onOpenChange:()=>t(),children:p.jsxs(rs,{className:"max-w-md",children:[p.jsxs(os,{children:[p.jsxs(ss,{children:["Sync Settings for ",r]}),p.jsx(ra,{children:"Configure synchronization settings for this journal"})]}),l?p.jsx("div",{className:"flex justify-center items-center p-6",children:p.jsx(Ht,{className:"h-8 w-8 animate-spin"})}):p.jsxs("div",{className:"space-y-4",children:[f&&p.jsxs(Gc,{variant:"destructive",children:[p.jsx(qc,{children:"Error"}),p.jsx(Yc,{children:f})]}),u&&!f&&p.jsxs(Gc,{children:[p.jsx(qc,{children:"Info"}),p.jsx(Yc,{children:u})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{children:"Sync Provider"}),p.jsxs(rD,{value:i,onValueChange:j=>k(j),children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Xc,{value:"none",id:"none"}),p.jsx($n,{htmlFor:"none",children:"No Sync (Local Only)"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Xc,{value:"local",id:"local"}),p.jsx($n,{htmlFor:"local",children:"Local File System (via File System Access API)"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Xc,{value:"gdrive",id:"gdrive",disabled:!0}),p.jsx($n,{htmlFor:"gdrive",className:"text-gray-400",children:"Google Drive (Coming Soon)"})]})]})]}),i!=="none"&&p.jsxs(p.Fragment,{children:[p.jsx(Kh,{}),p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{className:"text-base",children:"Folder Configuration"}),g?p.jsx("div",{className:"mb-2",children:p.jsxs("p",{children:["Current folder: ",p.jsx("strong",{children:g})]})}):p.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No folder selected. Please select an existing folder or create a new one."}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsxs(be,{variant:"outline",onClick:T,disabled:l||x,className:"flex items-center gap-2",children:[p.jsx(A8,{className:"h-4 w-4"}),"Select Existing Folder"]}),p.jsxs(be,{variant:"outline",onClick:F,disabled:l||x,className:"flex items-center gap-2",children:[p.jsx(D8,{className:"h-4 w-4"}),"Create New Folder"]})]})]}),C&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Gc,{className:"bg-yellow-50 border-yellow-200 text-yellow-800",children:[p.jsx(qc,{children:"Existing Data Found"}),p.jsx(Yc,{children:"This folder contains existing journal data that can be imported."})]}),p.jsx(be,{variant:"destructive",onClick:_,disabled:l||x,className:"w-full",children:"Import Existing Data"})]}),p.jsx(Kh,{}),p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{className:"text-base",children:"Sync Control"}),K(),p.jsxs(be,{onClick:O,disabled:l||x||!g,className:"w-full flex items-center justify-center gap-2",children:[p.jsx(ZS,{className:"h-4 w-4"}),"Sync Now"]})]})]})]}),p.jsx(na,{children:p.jsx(be,{variant:"outline",onClick:t,children:"Close"})})]})})};class No{constructor(){this.urlMap=new Map}static getInstance(){return No.instance||(No.instance=new No),No.instance}createUrl(t,n){let r=this.urlMap.get(t);return r?(S.log(`[BlobMgr] [URL REUSE] Reusing existing URL for hash ${t}: ${r}`,{action:"createUrl_reuse",contentHash:t,mapSize:this.urlMap.size,timestamp:Date.now()}),r):(r=URL.createObjectURL(n),this.urlMap.set(t,r),S.log(`[BlobMgr] [URL CREATION] Created URL for hash ${t}: ${r}`,{action:"createUrl_new",contentHash:t,blobType:n.type,blobSize:n.size,mapSize:this.urlMap.size,timestamp:Date.now()}),r)}getUrl(t){const n=this.urlMap.get(t)||null;return S.log(`[BlobMgr] [URL ACCESS] GetUrl for hash ${t}: ${n?"found":"not found"}`,{action:"getUrl",contentHash:t,found:!!n,mapSize:this.urlMap.size,timestamp:Date.now()}),n}revokeUrl(t){const n=this.urlMap.get(t);if(n){S.log(`[BlobMgr] [URL REVOCATION] Revoking URL for hash ${t}: ${n}`,{action:"revokeUrl",contentHash:t,mapSize:this.urlMap.size,timestamp:Date.now(),stackTrace:new Error().stack});try{URL.revokeObjectURL(n),S.log(`[BlobMgr] [URL REVOCATION] Successfully revoked URL for hash ${t}`)}catch(r){S.error(`[BlobMgr] [URL REVOCATION] Error revoking URL for hash ${t}:`,r)}this.urlMap.delete(t),S.log(`[BlobMgr] [URL LIFECYCLE] Removed URL from map for hash ${t}. Map size now: ${this.urlMap.size}`)}else S.warn(`[BlobMgr] [URL REVOCATION] Attempted to revoke URL for hash ${t}, but no URL was found`)}revokeAllUrls(){const t=this.urlMap.size;S.log(`[BlobMgr] [URL BULK REVOCATION] Revoking all ${t} URLs.`,{action:"revokeAllUrls",mapSize:t,timestamp:Date.now(),hashList:Array.from(this.urlMap.keys()),stackTrace:new Error().stack}),this.urlMap.forEach((n,r)=>{try{S.log(`[BlobMgr] [URL BULK REVOCATION] Revoking URL for hash ${r}: ${n}`),URL.revokeObjectURL(n)}catch(o){S.error(`[BlobMgr] [URL BULK REVOCATION] Error revoking URL for hash ${r}:`,o)}}),this.urlMap.clear(),S.log(`[BlobMgr] [URL LIFECYCLE] Cleared all ${t} URLs from map. Map size now: ${this.urlMap.size}`)}}async function x0(e,t=256){return new Promise((n,r)=>{const o=new Image,s=URL.createObjectURL(e);o.onload=()=>{try{URL.revokeObjectURL(s);let i=o.width,a=o.height;const l=i/a;i>a&&i>t?(i=t,a=Math.round(i/l)):a>t&&(a=t,i=Math.round(a*l));const c=document.createElement("canvas");c.width=i,c.height=a;const u=c.getContext("2d");if(!u){r(new Error("Failed to get canvas context"));return}u.imageSmoothingQuality="high",u.drawImage(o,0,0,i,a),c.toBlob(d=>{d?(S.log(`[ImageUtils] Generated thumbnail: ${i}x${a} (original: ${o.width}x${o.height})`),n(d)):r(new Error("Failed to generate thumbnail blob"))},e.type,.85)}catch(i){S.error("[ImageUtils] Error generating thumbnail:",i),r(i)}},o.onerror=()=>{URL.revokeObjectURL(s),r(new Error("Failed to load image for thumbnail generation"))},o.src=s})}const oD=.8,P5=.7,k5=10;async function Jh(){try{if(!navigator.storage||!navigator.storage.estimate)return S.warn("[StorageMgr] navigator.storage.estimate not supported"),null;const e=await navigator.storage.estimate();if(!e.quota||!e.usage)return S.warn("[StorageMgr] Storage estimate missing quota or usage"),null;const t=e.usage/e.quota;return S.log(`[StorageMgr] Storage usage: ${e.usage} / ${e.quota} bytes (${(t*100).toFixed(2)}%)`),{usageBytes:e.usage,quotaBytes:e.quota,usagePercentage:t}}catch(e){return S.error("[StorageMgr] Error getting storage estimate:",e),null}}async function i1(e,t=!0,n){try{const r=await zi(n),o=await sN(r,e);if(t){const s=o.filter(a=>a.type==="full").map(a=>a.key),i=o.filter(a=>a.type==="thumb").map(a=>a.key);return[...s,...i].slice(0,e)}return o.map(s=>s.key)}catch(r){return S.error("[StorageMgr] Error getting oldest blobs:",r),[]}}async function og(e,t){try{let n=0,r=!0;const o=await zi(t);if(typeof e=="number"&&e>0){const i=await i1(e,!0,t);return i.length>0?(S.log(`[StorageMgr] Forced pruning ${i.length} blobs`),await Promise.all(i.map(a=>$h(o,a))),n=i.length,i.length):0}const s=await Jh();if(!s||s.usagePercentage<oD)return S.log("[StorageMgr] Current storage usage is below threshold, no pruning needed"),0;for(;r;){const i=await i1(k5,!0,t);if(i.length===0){S.log("[StorageMgr] No more blobs to prune");break}S.log(`[StorageMgr] Pruning batch of ${i.length} blobs`),await Promise.all(i.map(l=>$h(o,l))),n+=i.length;const a=await Jh();!a||a.usagePercentage<=P5?(S.log(`[StorageMgr] Reached target usage: ${(a==null?void 0:a.usagePercentage.toFixed(2))||"unknown"}`),r=!1):n>=50&&(S.warn("[StorageMgr] Reached safety limit of 50 items, stopping pruning"),r=!1)}return S.log(`[StorageMgr] Pruning complete. Removed ${n} items`),n}catch(n){return S.error("[StorageMgr] Error during pruning:",n),0}}async function va(e){try{const t=await Jh();if(!t)return;if(t.usagePercentage>=oD){S.warn(`[StorageMgr] Storage usage high (${(t.usagePercentage*100).toFixed(2)}%). Running pruning...`);const n=await og(void 0,e);S.log(`[StorageMgr] Automatic pruning complete. Removed ${n} items.`)}}catch(t){S.error("[StorageMgr] Error in automatic pruning check:",t)}}const Va=10,kn=e=>e.isNew===!0,sD=e=>e.isNew===!1;function T5(e){return Array.from(new Uint8Array(e)).map(t=>t.toString(16).padStart(2,"0")).join("")}async function R5(e){try{const t=await crypto.subtle.digest("SHA-256",e);return T5(t)}catch(t){throw S.error("Error calculating array buffer hash:",t),new Error("Could not calculate hash from array buffer.")}}async function F5(e){try{const t=await e.arrayBuffer();return R5(t)}catch(t){throw S.error("Error calculating file hash:",t),new Error("Could not calculate file hash.")}}class v0{constructor(t,n){this.db=null,this.dbPromise=null,this.blobUrlManager=No.getInstance(),this.id=t.id,this.name=t.name,this.dbName=t.dbName,this.color=t.color,this.isDefault=t.isDefault,this.entryCount=t.entryCount,this.lastModifiedTimestamp=t.lastModifiedTimestamp,this.journalMetaService=n,S.log(`[Journal] Instantiated journal "${this.name}" (${this.id}) with database "${this.dbName}"`)}getSyncConfiguration(){const t=this.journalMetaService.getJournalById(this.id);if(t)return{syncProviderType:t.syncProviderType,syncProviderFolderReference:t.syncProviderFolderReference}}async getDb(){if(this.db)try{if(this.db.objectStoreNames.length>0)return this.db;S.warn(`[Journal] DB connection for ${this.dbName} is invalid, will reopen`),this.db=null}catch(t){S.warn(`[Journal] Error accessing DB connection for ${this.dbName}, will reopen:`,t),this.db=null}if(this.dbPromise)try{return this.db=await this.dbPromise,this.db}catch(t){throw this.dbPromise=null,t}S.log(`[Journal] Opening database "${this.dbName}" for journal "${this.name}"`),this.dbPromise=zi(this.dbName);try{return this.db=await this.dbPromise,this.dbPromise=null,this.db}catch(t){throw this.dbPromise=null,S.error(`[Journal] Error opening database "${this.dbName}":`,t),new Error(`Failed to open journal database: ${t instanceof Error?t.message:String(t)}`)}}closeDb(){this.db&&(S.log(`[Journal] Closing database connection for "${this.dbName}"`),this.db.close(),this.db=null,Vb(this.dbName))}async getEntries(t,n,r){try{const o=await this.getDb(),s=await $a(o,t,n)||[];return r!=null&&r.includeDeleted?s:s.filter(i=>!i.isDeleted)}catch(o){throw S.error(`[Journal] Error fetching entries for ${t}-${n}:`,o),o}}async getAllEntries(t){try{const n=await this.getDb(),r=await Bm(n)||[];return t!=null&&t.includeDeleted?r:r.filter(o=>!o.isDeleted)}catch(n){throw S.error("[Journal] Error fetching all entries:",n),n}}async getEntryById(t){try{const n=await this.getDb();return await Vi(n,Rn,t)}catch(n){throw S.error(`[Journal] Error fetching entry ${t}:`,n),n}}async getAllImageMetadata(t){try{const n=await this.getDb(),r=await iN(n)||[];return t!=null&&t.includeDeleted?r:r.filter(o=>!o.isDeleted)}catch(n){throw S.error("[Journal] Error fetching image metadata:",n),n}}async getImageMetadataById(t,n){try{const r=await this.getDb(),o=await Vi(r,Vo,t);return o&&o.isDeleted&&!(n!=null&&n.includeDeleted)?void 0:o}catch(r){throw S.error(`[Journal] Error fetching image metadata for ${t}:`,r),r}}async getPhotoThumbnailUrl(t,n){if(!t)return S.warn(`[Journal] Cannot get thumbnail URL: contentHash missing for photoId ${n}`),null;const r=`${t}-thumb`,o=this.blobUrlManager.getUrl(r);if(o)return this.getDb().then(s=>vc(s,r)).catch(s=>S.warn(`[Journal] Failed background update access time for ${r}:`,s)),o;try{const s=await this.getDb(),i=await gc(s,r);if(i)return S.log(`[Journal] Found thumbnail in IDB for hash ${r}.`),await vc(s,r),this.blobUrlManager.createUrl(r,i.blob);const a=await gc(s,t);if(a){S.log(`[Journal] Found full blob in IDB for hash ${t}. Generating thumbnail...`);try{const l=await x0(a.blob);return S.log(`[Journal] Generated thumbnail for hash ${t}. Caching...`),await xc(s,r,l,"thumb"),this.blobUrlManager.createUrl(r,l)}catch(l){return S.error(`[Journal] Error generating thumbnail for hash ${t}:`,l),this.getPhotoBlobUrl(t,n)}}else return S.log(`[Journal] Neither thumbnail nor full blob found in IDB for hash ${t}.`),null}catch(s){return S.error(`[Journal] Error accessing IDB for thumbnail/blob hash ${t}:`,s),null}}async getPhotoBlobUrl(t,n){if(!t)return S.warn(`[Journal] Cannot get blob URL: contentHash missing for photoId ${n}`),null;const r=this.blobUrlManager.getUrl(t);if(r)return S.log(`[Memory] Found cached URL for hash ${t}`),this.getDb().then(o=>vc(o,t)).catch(o=>S.warn(`[Journal] Failed background update access time for ${t}:`,o)),r;try{const o=await this.getDb(),s=await gc(o,t);return s?(S.log(`[Journal] Found blob in IDB for hash ${t}.`),await vc(o,t),this.generateThumbnailInBackground(t,s.blob),this.blobUrlManager.createUrl(t,s.blob)):(S.log(`[Journal] Blob not found in IDB for hash ${t}.`),null)}catch(o){return S.error(`[Journal] Error checking IDB for blob hash ${t}:`,o),null}}async savePhotoBlob(t,n,r){try{const o=await this.getDb();await xc(o,t,n,r),r==="full"&&this.generateThumbnailInBackground(t,n)}catch(o){throw S.error(`[Journal] Error caching blob for ${t}:`,o),o}}async deletePhotoBlob(t){try{const n=await this.getDb();await $h(n,t),this.blobUrlManager.revokeUrl(t),this.blobUrlManager.revokeUrl(`${t}-thumb`)}catch(n){throw S.error(`[Journal] Error deleting blob for ${t}:`,n),n}}async deleteImageMetadata(t){try{const n=await this.getDb(),r=await this.getImageMetadataById(t,{includeDeleted:!0});if(!r)throw new Error(`Image metadata ${t} not found for deletion`);const o=new Date().toISOString(),s={...r,isDeleted:!0,updatedAt:o};await this.saveImageMetadata([s]),S.log(`[Journal] Soft deleted image metadata (marked isDeleted=true): ${t}`),this.journalMetaService.markJournalAsDirty(this.id)}catch(n){throw S.error(`[Journal] Error soft deleting image metadata ${t}:`,n),n}}async updateName(t){try{if(t===this.name)return;if(this.name=t,this.lastModifiedTimestamp=Date.now(),!this.journalMetaService.updateJournalMetadata(this.id,{name:t,lastModifiedTimestamp:this.lastModifiedTimestamp}))throw new Error(`Failed to update journal name for journal ${this.id}`);S.log(`[Journal] Updated name for journal ${this.id} to "${t}"`)}catch(n){throw S.error("[Journal] Error updating journal name:",n),n}}async updateColor(t){try{if(t===this.color)return;if(this.color=t,this.lastModifiedTimestamp=Date.now(),!this.journalMetaService.updateJournalMetadata(this.id,{color:t,lastModifiedTimestamp:this.lastModifiedTimestamp}))throw new Error(`Failed to update journal color for journal ${this.id}`);S.log(`[Journal] Updated color for journal ${this.id} to "${t}"`)}catch(n){throw S.error("[Journal] Error updating journal color:",n),n}}async generateThumbnailInBackground(t,n){const r=`${t}-thumb`;try{const o=await this.getDb();if(await gc(o,r))return;S.log(`[Journal] Generating thumbnail for hash ${t}...`);const i=await x0(n);S.log(`[Journal] Caching new thumbnail for hash ${t}.`),await xc(o,r,i,"thumb"),S.log(`[Journal] Successfully cached thumbnail: ${r}`)}catch(o){if(o instanceof DOMException&&o.name==="QuotaExceededError"){S.warn(`[Journal] Storage quota exceeded while caching thumbnail ${r}. Triggering pruning...`);try{await og(5);const s=await this.getDb(),i=await x0(n);await xc(s,r,i,"thumb"),S.log(`[Journal] Successfully cached thumbnail after pruning: ${r}`)}catch(s){S.error(`[Journal] Failed to prune and retry caching thumbnail ${r}:`,s)}}else S.error(`[Journal] Failed to generate/cache thumbnail for hash ${t}:`,o)}}async saveSyncedEntry(t,n){try{const r=await this.getDb(),o=!n,s={id:t.id,date:t.date,content:t.content,photos:t.photos,createdAt:t.createdAt,updatedAt:t.updatedAt,isDeleted:t.isDeleted===void 0?!1:t.isDeleted};let i;o?(i=await iy(r,s),S.log(`[Journal] Saved new entry from sync: ${i}`),this.entryCount+=1):(i=await Af(r,s,n),S.log(`[Journal] Updated existing entry from sync: ${i}`));const a=new Date(s.updatedAt).getTime();return a>this.lastModifiedTimestamp&&(this.lastModifiedTimestamp=a),this.journalMetaService.updateJournalMetadata(this.id,{entryCount:this.entryCount,lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn(`[Journal] Failed to update journal metadata after saving synced entry ${i}`),i}catch(r){throw S.error("[Journal] Error saving synced entry:",r),r}}async saveFormEntry(t,n){var r;try{const o=await this.getDb(),s=!n,i=t.photos.map(f=>kn(f)?{photoId:crypto.randomUUID(),crop:f.crop}:{photoId:f.photoId,crop:f.crop}),a=new Date().toISOString(),l={id:s?crypto.randomUUID():n.id,content:t.content,date:t.date.toISOString().split("T")[0],photos:i,createdAt:s?a:n.createdAt,updatedAt:a,isDeleted:s?!1:t.isDeleted!==void 0?t.isDeleted:n.isDeleted};let c;n?(c=await Af(o,l,n),S.log(`[Journal] Updated existing entry: ${c}`)):(c=await iy(o,l),S.log(`[Journal] Saved new entry: ${c}`),this.entryCount+=1);const u=[];if(t.photos){for(const f of t.photos)if(kn(f)){const m=f,g=await F5(m.file),w=m.file,C=t.photos.indexOf(f),x={id:i[C].photoId,photoFilename:w.name,photoMetadata:{filename:w.name,mimeType:w.type,width:m.originalDimensions.width,height:m.originalDimensions.height,exifDate:((r=m.exifData)==null?void 0:r.exifDate)||null,contentHash:g},createdAt:l.createdAt instanceof Date?l.createdAt.toISOString():l.createdAt,updatedAt:l.updatedAt instanceof Date?l.updatedAt.toISOString():l.updatedAt};u.push(x),await this.savePhotoBlob(g,w,"full");const y=Vh(w.name);await zh(o,this.id,{contentHash:g,extension:y},"upload")}}return u.length>0&&(await this.saveImageMetadata(u),S.log(`[Journal] Saved metadata for ${u.length} new photos`)),this.lastModifiedTimestamp=Date.now(),this.journalMetaService.updateJournalMetadata(this.id,{entryCount:this.entryCount,lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn(`[Journal] Failed to update journal metadata after saving entry ${c}`),this.journalMetaService.markJournalAsDirty(this.id),c}catch(o){throw S.error("[Journal] Error saving form entry:",o),o}}async deleteEntry(t){try{const n=await this.getDb(),r=await this.getEntryById(t);if(!r)throw new Error(`Entry ${t} not found for deletion`);const o=new Date().toISOString(),s={...r,isDeleted:!0,updatedAt:o};await Af(n,s,r),S.log(`[Journal] Soft deleted entry (marked isDeleted=true): ${t}`),this.entryCount>0&&!r.isDeleted&&(this.entryCount-=1),this.lastModifiedTimestamp=Date.now(),this.journalMetaService.updateJournalMetadata(this.id,{entryCount:this.entryCount,lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn(`[Journal] Failed to update journal metadata after soft deleting entry ${t}`),this.journalMetaService.markJournalAsDirty(this.id)}catch(n){throw S.error(`[Journal] Error soft deleting entry ${t}:`,n),n}}async saveImageMetadata(t){if(!(!t||t.length===0))try{const n=await this.getDb(),r=new Date().toISOString(),o=t.map(i=>({...i,createdAt:i.createdAt||r,updatedAt:i.updatedAt||r,isDeleted:i.isDeleted!==void 0?i.isDeleted:!1}));await aN(n,o),this.lastModifiedTimestamp=Date.now(),this.journalMetaService.updateJournalMetadata(this.id,{lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn("[Journal] Failed to update journal metadata after saving metadata entries"),S.log(`[Journal] Saved ${t.length} image metadata entries`),this.journalMetaService.markJournalAsDirty(this.id)}catch(n){throw S.error("[Journal] Error saving image metadata:",n),n}}getJournalId(){return this.id}getJournalName(){return this.name}getDbName(){return this.dbName}getEntryCount(){return this.entryCount}getLastModifiedTimestamp(){return this.lastModifiedTimestamp}async deleteJournalData(){try{this.closeDb(),S.log(`[Journal] Deleting database for journal ${this.id} (${this.dbName})`),await lN(this.dbName),this.blobUrlManager.revokeAllUrls(),S.log(`[Journal] Completely deleted journal data for ${this.id}`)}catch(t){throw S.error("[Journal] Error deleting journal data:",t),t}}}const a1="JournalList",y0="ActiveJournal",w0="phojoJournalMigrationV1_6Complete",ya="default-journal",Dc="My Journal",Yt=[];for(let e=0;e<256;++e)Yt.push((e+256).toString(16).slice(1));function M5(e,t=0){return(Yt[e[t+0]]+Yt[e[t+1]]+Yt[e[t+2]]+Yt[e[t+3]]+"-"+Yt[e[t+4]]+Yt[e[t+5]]+"-"+Yt[e[t+6]]+Yt[e[t+7]]+"-"+Yt[e[t+8]]+Yt[e[t+9]]+"-"+Yt[e[t+10]]+Yt[e[t+11]]+Yt[e[t+12]]+Yt[e[t+13]]+Yt[e[t+14]]+Yt[e[t+15]]).toLowerCase()}let C0;const N5=new Uint8Array(16);function I5(){if(!C0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");C0=crypto.getRandomValues.bind(crypto)}return C0(N5)}const j5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),l1={randomUUID:j5};function c1(e,t,n){var o;if(l1.randomUUID&&!t&&!e)return l1.randomUUID();e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??I5();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,M5(r)}class _5{async ensureDefaultJournalExistsAndMigrate(){try{const t=localStorage.getItem(w0)==="true";S.log(`[JournalMetaService] Migration flag status: ${t?"COMPLETE":"NOT COMPLETE"}`);const r=this.getJournalList().find(i=>i.id===ya||i.dbName===So);if(r)return S.log(`[JournalMetaService] Default journal already exists: ${r.name}`),localStorage.setItem(w0,"true"),r;if(t)return S.warn("[JournalMetaService] Migration flag is set but default journal not found. Creating new default journal."),this.createDefaultJournal();let o=!1;try{const i=await zi(So);o=i.objectStoreNames.length>0,i.close(),S.log(`[JournalMetaService] Default database exists: ${o}`)}catch(i){S.warn("[JournalMetaService] Error checking default database existence:",i),o=!1}const s={id:ya,name:Dc,dbName:So,isDefault:!0,color:"Slate",entryCount:0,lastModifiedTimestamp:Date.now(),journalPropertiesUpdatedAt:new Date().toISOString()};if(o){S.log("[JournalMetaService] Calculating stats for migrated journal data...");try{let i=null;try{i=await zi(So);const a=await Bm(i)||[];s.entryCount=a.length;let l=0;for(const c of a){const u=new Date(c.updatedAt).getTime();u>l&&(l=u)}s.lastModifiedTimestamp=l>0?l:Date.now()}finally{i&&(S.log("[JournalMetaService] Closing temporary database connection for migration"),i.close(),Vb(So))}S.log(`[JournalMetaService] Migrated journal stats: ${s.entryCount} entries, last modified ${new Date(s.lastModifiedTimestamp).toLocaleString()}`)}catch(i){S.error("[JournalMetaService] Error calculating stats for migrated journal:",i),s.entryCount=0,s.lastModifiedTimestamp=Date.now()}}return this.addJournalMetadata(s),this.setActiveJournalId(ya),localStorage.setItem(w0,"true"),S.log(`[JournalMetaService] Migration complete. Default journal '${Dc}' created.`),s}catch(t){throw S.error("[JournalMetaService] Error during migration:",t),new Error(`Failed to ensure default journal exists: ${t instanceof Error?t.message:String(t)}`)}}createDefaultJournal(){const t={id:ya,name:Dc,dbName:So,isDefault:!0,color:"Slate",entryCount:0,lastModifiedTimestamp:Date.now(),journalPropertiesUpdatedAt:new Date().toISOString()};return this.addJournalMetadata(t),this.setActiveJournalId(ya),S.log(`[JournalMetaService] Created new default journal '${Dc}'`),t}getJournalList(){try{const t=localStorage.getItem(a1);if(!t)return[];const n=JSON.parse(t);return!n||typeof n!="object"||n.schemaVersion!==1?(S.warn("[JournalMetaService] Invalid or outdated journal list schema"),[]):Array.isArray(n.journals)?n.journals.filter(r=>this.isValidJournalMetadata(r)):(S.warn("[JournalMetaService] Journal list is not an array"),[])}catch(t){return S.error("[JournalMetaService] Error retrieving journal list:",t),[]}}saveJournalList(t){try{const n={schemaVersion:1,journals:t};localStorage.setItem(a1,JSON.stringify(n))}catch(n){S.error("[JournalMetaService] Error saving journal list:",n)}}getActiveJournalId(){try{const t=localStorage.getItem(y0);if(!t)return S.log("[JournalMetaService] No active journal ID set"),null;const n=this.getJournalList();if(!n.some(o=>o.id===t)){S.warn(`[JournalMetaService] Active journal ID ${t} not found in journal list`);const o=n.find(s=>s.isDefault);return o?(S.log(`[JournalMetaService] Falling back to default journal: ${o.id}`),this.setActiveJournalId(o.id),o.id):null}return t}catch(t){return S.error("[JournalMetaService] Error retrieving active journal ID:",t),null}}setActiveJournalId(t){try{localStorage.setItem(y0,t)}catch(n){S.error("[JournalMetaService] Error setting active journal ID:",n)}}getJournalById(t){return this.getJournalList().find(o=>o.id===t)||null}getJournalByDbName(t){return this.getJournalList().find(o=>o.dbName===t)||null}generateNewDbName(){return`PhojoCacheDB_${c1()}`}createNewJournal(t){if(!t||t.trim()==="")throw new Error("Journal name cannot be empty");const n=c1(),r=this.generateNewDbName(),o=new Date().toISOString(),s={id:n,name:t.trim(),dbName:r,isDefault:!1,color:"Slate",entryCount:0,lastModifiedTimestamp:Date.now(),syncProviderType:"none",localDirtyFlag:!1,journalPropertiesUpdatedAt:o,lastKnownProviderVersionId:null,lastKnownProviderTimestamp:null};return this.addJournalMetadata(s),S.log(`[JournalMetaService] Created new journal '${t}' with ID ${n} and DB ${r}`),s}addJournalMetadata(t){const n=this.getJournalList();if(n.some(r=>r.id===t.id)){S.warn(`[JournalMetaService] Journal with ID ${t.id} already exists`);return}n.push(t),this.saveJournalList(n)}updateJournalMetadata(t,n){const r=this.getJournalList(),o=r.findIndex(u=>u.id===t);if(o===-1)return S.warn(`[JournalMetaService] Cannot update - journal with ID ${t} not found`),!1;const s=r[o];let i={...n};const a="name"in n&&n.name!==s.name,l="color"in n&&n.color!==s.color;return a||l?(i.journalPropertiesUpdatedAt=new Date().toISOString(),i.localDirtyFlag=!0,S.log(`[JournalMetaService] Core properties (name/color) actually changed for journal ${t}. Marked as dirty. New props timestamp: ${i.journalPropertiesUpdatedAt}`)):"journalPropertiesUpdatedAt"in n&&n.journalPropertiesUpdatedAt!==s.journalPropertiesUpdatedAt&&(i.journalPropertiesUpdatedAt=n.journalPropertiesUpdatedAt,S.log(`[JournalMetaService] Applying journalPropertiesUpdatedAt from updates for ${t}: ${n.journalPropertiesUpdatedAt}`)),Object.keys(n).some(u=>u!=="localDirtyFlag"||n.localDirtyFlag===!0)&&(i.lastModifiedTimestamp=Date.now()),r[o]={...s,...i},this.saveJournalList(r),!0}removeJournalMetadata(t){const n=this.getJournalList(),r=n.findIndex(s=>s.id===t);if(r===-1)return S.warn(`[JournalMetaService] Cannot remove - journal with ID ${t} not found`),!1;if(this.getActiveJournalId()===t){const s=n.find(i=>i.isDefault&&i.id!==t);if(s)this.setActiveJournalId(s.id);else if(n.length>1){const i=n.find(a=>a.id!==t);i&&this.setActiveJournalId(i.id)}else localStorage.removeItem(y0)}return n.splice(r,1),this.saveJournalList(n),S.log(`[JournalMetaService] Removed journal with ID ${t}`),!0}markJournalAsDirty(t){const n=this.getJournalList(),r=n.findIndex(o=>o.id===t);return r===-1?(S.warn(`[JournalMetaService] Cannot mark as dirty - journal with ID ${t} not found`),!1):(n[r]={...n[r],localDirtyFlag:!0,lastModifiedTimestamp:Date.now()},this.saveJournalList(n),S.log(`[JournalMetaService] Marked journal ${t} as dirty for sync`),!0)}isValidJournalMetadata(t){if(!t||typeof t!="object")return!1;const n=t;return typeof n.id=="string"&&typeof n.name=="string"&&typeof n.dbName=="string"&&typeof n.isDefault=="boolean"&&typeof n.color=="string"&&typeof n.entryCount=="number"&&typeof n.lastModifiedTimestamp=="number"}}const Ke=new _5;function B5(e,t){const[n,r]=h.useState(e),[o,s]=h.useState(t),[i,a]=h.useState(0),[l,c]=h.useState(!1),u=h.useCallback((v,x)=>{const y=new Date(x,v-1),E=new Date(o,n-1);y>E?a(1):y<E?a(-1):a(0),r(v),s(x)},[n,o]),d=h.useCallback(()=>{let v=n,x=o;v===1?(x--,v=12):v--,u(v,x)},[n,o,u]),f=h.useCallback(()=>{let v=n,x=o;v===12?(x++,v=1):v++,u(v,x)},[n,o,u]),m=h.useCallback((v,x)=>{u(v,x),c(!1)},[u]),g=h.useCallback(v=>{v>0?f():v<0&&d()},[f,d]),w=h.useCallback(()=>c(!0),[]),C=h.useCallback(()=>c(!1),[]);return{currentMonth:n,currentYear:o,swipeDirection:i,isMonthYearPickerOpen:l,goToPreviousMonth:d,goToNextMonth:f,handleMonthYearSelect:m,handleCalendarSwipe:g,openMonthYearPicker:w,closeMonthYearPicker:C,setSwipeDirection:a}}function L5(){const[e,t]=h.useState(!1),[n,r]=h.useState([]),[o,s]=h.useState(new Date),[i,a]=h.useState(!1),[l,c]=h.useState(null),u=h.useCallback((g,w)=>{s(g),r(w),a(!1),t(!0)},[]),d=h.useCallback(g=>{c(g),a(!0)},[]),f=h.useCallback(()=>{t(!1),r([])},[]),m=h.useCallback(()=>{a(!1),c(null)},[]);return{isViewEntryModalOpen:e,selectedBasicEntriesForModal:n,entryDateForModal:o,openViewEntriesModal:u,closeViewModal:f,isDeleteDialogOpen:i,entryToDeleteId:l,openDeleteConfirmation:d,closeDeleteDialog:m}}const E0=()=>window.location.hash.replace(/^#/,"").split(/[?&]/)[0]||"/",Gh=()=>{const[e,t]=h.useState(E0());h.useEffect(()=>{const r=()=>{const o=E0();o!==e&&t(o)};return window.addEventListener("hashchange",r),()=>{window.removeEventListener("hashchange",r)}},[e]);const n=h.useCallback((r,{replace:o=!1}={})=>{const i=`#${r.startsWith("/")?r:`/${r}`}`,a=window.location.hash||"#/";i!==a&&(o?window.location.replace(i):window.location.hash=i)},[]);return h.useEffect(()=>{let r=window.location.hash;const o=setInterval(()=>{const s=window.location.hash;if(s!==r){const i=E0();i!==e&&t(i),r=s}},250);return()=>{clearInterval(o)}},[e]),[e,n]},qh=()=>oi.getInstance();class oi{constructor(){this.listeners=new Map,this.swController=null,this.messageQueue=[],this.isListenerAttached=!1,this.handleControllerChange=()=>{S.log("[SWHandler] Service Worker controller changed."),this.swController=navigator.serviceWorker.controller,this.attachMessageListener()},this.handleIncomingMessage=t=>{const n=t.data;if(!n||!n.type){S.warn("[SWHandler] Received SW message with no data or type",t.data);return}this.dispatchMessage(n)},S.log("[SWHandler] Initializing ServiceWorkerMessageHandler..."),this.readyPromise=this.initializeServiceWorker()}static getInstance(){return oi.instance||(oi.instance=new oi),oi.instance}async initializeServiceWorker(){if(typeof window>"u"||!("serviceWorker"in navigator)){S.warn("[SWHandler] Service Worker API not supported in this environment.");return}try{const t=await navigator.serviceWorker.ready;return S.log("[SWHandler] Service Worker is ready."),this.swController=t.active||navigator.serviceWorker.controller,this.attachMessageListener(),navigator.serviceWorker.addEventListener("controllerchange",this.handleControllerChange),this.messageQueue.forEach(n=>this.dispatchMessage(n)),this.messageQueue=[],t}catch(t){S.error("[SWHandler] Service Worker registration failed:",t);return}}attachMessageListener(){!this.isListenerAttached&&navigator.serviceWorker&&(navigator.serviceWorker.addEventListener("message",this.handleIncomingMessage),this.isListenerAttached=!0,S.log("[SWHandler] Global message listener attached to navigator.serviceWorker."))}dispatchMessage(t){S.log(`[SWHandler] Dispatching message of type: ${t.type}`,t);const n=this.listeners.get(t.type);n?n.forEach(r=>{try{r(t)}catch(o){S.error(`[SWHandler] Error in callback for message type ${t.type}:`,o)}}):S.log(`[SWHandler] No listeners registered for message type: ${t.type}`)}registerListener(t,n){return this.readyPromise.then(r=>{r?(this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n),S.log(`[SWHandler] Listener registered for type: ${t}`)):(S.warn(`[SWHandler] SW not ready, listener for ${t} not actively registered yet, but queued.`),this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n))}).catch(r=>{S.error(`[SWHandler] Error during SW readiness check for listener registration (${t}):`,r)}),()=>{this.unregisterListener(t,n)}}unregisterListener(t,n){const r=this.listeners.get(t);r&&(r.delete(n),S.log(`[SWHandler] Listener unregistered for type: ${t}`),r.size===0&&(this.listeners.delete(t),S.log(`[SWHandler] All listeners for type ${t} removed.`)))}async sendMessageToSW(t){if(await this.readyPromise,this.swController)try{S.log("[SWHandler] Sending message to SW:",t),this.swController.postMessage(t)}catch(n){throw S.error("[SWHandler] Error sending message to SW:",n),n}else throw S.error("[SWHandler] Service Worker controller not available. Cannot send message:",t),new Error("Service Worker controller not available to send message.")}async getController(){return await this.readyPromise,this.swController}cleanup(){this.isListenerAttached&&navigator.serviceWorker&&(navigator.serviceWorker.removeEventListener("message",this.handleIncomingMessage),navigator.serviceWorker.removeEventListener("controllerchange",this.handleControllerChange),this.isListenerAttached=!1,S.log("[SWHandler] Global message listener removed.")),this.listeners.clear()}}const iD=h.createContext(void 0),O5=({children:e})=>{const{toast:t}=Ml(),[,n]=Gh(),r=h.useRef(!0),o=B5(new Date().getMonth()+1,new Date().getFullYear()),s=L5(),[i,a]=h.useState(null),[l,c]=h.useState([]),[u,d]=h.useState(!1),[f,m]=h.useState(navigator.onLine),g=h.useRef(f),[w,C]=h.useState([]),[v,x]=h.useState(!1),[y,E]=h.useState([]),[b,D]=h.useState(!1),[A,P]=h.useState(null),[R,k]=h.useState(null),[T,F]=h.useState(null),[_,O]=h.useState(!1),[K,j]=h.useState("calendar"),[B,M]=h.useState(null),[I,U]=h.useState(!1),[N,L]=h.useState(!1),[H,$]=h.useState(!1),[fe,ce]=h.useState(!1),[Y,ne]=h.useState(!1),[ue,Te]=h.useState(!1),[Pe,re]=h.useState(!1),[xe,ve]=h.useState(null),[he,Ue]=h.useState(null),[ct,Je]=h.useState(null),[Ye,ht]=h.useState(null),[nt,Xe]=h.useState(!1),[Mt,Ee]=h.useState(Pn.IDLE),[He,ot]=h.useState(""),[jt,jn]=h.useState(null),[rt,pt]=h.useState(null),st=No.getInstance(),J=h.useCallback(()=>{L(!0),$(!1)},[]),q=h.useCallback(()=>{L(!1),$(!1)},[]),oe=h.useCallback(z=>{const V=l.find(W=>W.id===z);V?(ve(V),ce(!0)):S.error(`[AppContext] Journal with ID ${z} not found for renaming`)},[l]),pe=h.useCallback(()=>{ce(!1),ve(null)},[]),me=h.useCallback(z=>{const V=l.find(W=>W.id===z);V?(Ue(V),ne(!0)):S.error(`[AppContext] Journal with ID ${z} not found for color change`)},[l]),je=h.useCallback(()=>{ne(!1),Ue(null)},[]),Re=h.useCallback(z=>{const V=l.find(W=>W.id===z);V?(Je(V),Te(!0)):S.error(`[AppContext] Journal with ID ${z} not found for deletion`)},[l]),Ge=h.useCallback(()=>{Te(!1),Je(null)},[]),mt=h.useCallback(async(z,V)=>{try{if(!l.find(ae=>ae.id===z))throw new Error(`Journal with ID ${z} not found`);if(!Ke.updateJournalMetadata(z,{color:V,lastModifiedTimestamp:Date.now()}))throw new Error("Failed to update journal color");c(Ke.getJournalList()),i&&i.id===z&&(i.color=V),ne(!1),Ue(null),t({title:"Journal Color Updated",description:"Journal color updated successfully."})}catch(W){throw S.error("[AppContext] Error changing journal color:",W),t({title:"Error",description:W instanceof Error?W.message:"Failed to change journal color. Please try again.",variant:"destructive"}),W}},[l,i,t]),Jt=h.useCallback(async(z,V)=>{try{if(!V.trim())throw new Error("Journal name cannot be empty");if(!l.find(ae=>ae.id===z))throw new Error(`Journal with ID ${z} not found`);if(!Ke.updateJournalMetadata(z,{name:V.trim(),lastModifiedTimestamp:Date.now()}))throw new Error("Failed to update journal name");c(Ke.getJournalList()),i&&i.id===z&&(i.name=V.trim()),ce(!1),ve(null),t({title:"Journal Renamed",description:`Journal renamed to "${V.trim()}".`})}catch(W){throw S.error("[AppContext] Error renaming journal:",W),t({title:"Error",description:W instanceof Error?W.message:"Failed to rename journal. Please try again.",variant:"destructive"}),W}},[l,i,t]),_t=h.useCallback(()=>{$(!0)},[]),nn=h.useCallback(()=>{$(!1)},[]),rn=h.useCallback(async z=>{try{const V=Ke.createNewJournal(z);c(Ke.getJournalList()),await Vt(V.id),q(),t({title:"Journal Created",description:`Created new journal "${z}" and switched to it.`})}catch(V){S.error("[AppContext] Error creating new journal:",V),t({title:"Error",description:"Failed to create new journal. Please try again.",variant:"destructive"})}},[t]),Vt=h.useCallback(async z=>{if(!(i&&i.id===z))try{U(!0),S.log(`[AppContext] Switching to journal with ID ${z}`),i&&i.closeDb(),st.revokeAllUrls(),C([]),E([]),P(null),k(null),F(null),Ke.setActiveJournalId(z);const V=Ke.getJournalById(z);if(!V)throw new Error(`Journal with ID ${z} not found`);const W=new v0(V,Ke);a(W),Xe(!0);try{const X=await W.getAllImageMetadata();r.current&&E(X),S.log(`[AppContext] Loaded metadata for new journal. Count: ${X.length}`)}catch(X){S.error("[AppContext] Error loading metadata for new journal:",X),r.current&&F(X instanceof Error?X:new Error("Failed to load metadata"))}try{const X=await W.getEntries(o.currentYear,o.currentMonth);r.current&&C(X),S.log(`[AppContext] Loaded entries for new journal. Count: ${X.length}`)}catch(X){S.error("[AppContext] Error loading entries for new journal:",X),r.current&&P(X instanceof Error?X:new Error("Failed to load entries"))}q(),t({title:"Journal Switched",description:`Switched to journal "${V.name}".`})}catch(V){S.error("[AppContext] Error switching journal:",V),t({title:"Error",description:"Failed to switch journal. Please try again.",variant:"destructive"})}finally{r.current&&(U(!1),Xe(!1))}},[i,st,o.currentMonth,o.currentYear,t,q]),yt=h.useCallback(async z=>{if(i&&i.id===z)return i;try{const V=l.find(W=>W.id===z);if(!V)throw new Error(`Journal with ID ${z} not found`);return S.log(`[AppContext] Creating temporary Journal instance for ${V.name} (${z})`),new v0(V,Ke)}catch(V){throw S.error("[AppContext] Error creating journal instance:",V),V}},[i,l]),mn=h.useCallback(async z=>{var V;try{const W=l.find(ge=>ge.id===z);if(!W)throw new Error(`Journal with ID ${z} not found`);const X=i&&i.id===z,ae=X?i:await yt(z);if(!ae)throw new Error(`Failed to get journal instance for ID ${z}`);await ae.deleteJournalData(),Ke.removeJournalMetadata(z);const Fe=Ke.getJournalList();if(c(Fe),X){let ge=(V=Fe.find(ke=>ke.isDefault))==null?void 0:V.id;!ge&&Fe.length>0&&(ge=Fe[0].id),ge?await Vt(ge):(a(null),Ke.setActiveJournalId(""),C([]),E([]))}Te(!1),Je(null),t({title:"Journal Deleted",description:`Journal "${W.name}" has been permanently deleted.`}),N&&q()}catch(W){throw S.error("[AppContext] Error deleting journal:",W),t({title:"Error",description:W instanceof Error?W.message:"Failed to delete journal. Please try again.",variant:"destructive"}),W}},[l,i,Vt,yt,t,N,q]),wt=h.useCallback(async z=>{try{const V=l.find(W=>W.id===z);if(!V){S.error(`[AppContext] Journal with ID ${z} not found for sync settings`);return}if(i&&i.id===z){if(ht(V),re(!0),V.syncProviderType==="local"){const W=new Es(Ke);jn(W);const X=new za(W,i,Ke);pt(X),X.addStatusListener((ae,Fe)=>{Ee(ae),ot(Fe)})}}else S.warn(`[AppContext] Trying to configure sync for non-active journal ${z}`)}catch(V){S.error("[AppContext] Error initiating sync settings:",V)}},[l,i,Ke]),qn=h.useCallback(()=>{re(!1),ht(null),rt&&rt.removeAllListeners(),Ee(Pn.IDLE),ot(""),pt(null)},[rt]),dr=async(z,V)=>{let W=z;if((!W||W.journal.id!==V)&&i&&i.id===V){const ae=l.find(Fe=>Fe.id===V);if((ae==null?void 0:ae.syncProviderType)==="local"){S.log(`[AppContext performSync] Initializing/Re-initializing SyncService for ${V}`);const Fe=new Es(Ke),ge=new za(Fe,i,Ke);ge.addStatusListener((ke,An)=>{Ee(ke),ot(An)}),pt(ge),W=ge}else return S.error(`[AppContext performSync] Cannot initialize sync for ${V}: No local provider or not active journal.`),t({title:"Sync Error",description:"Cannot initialize sync service.",variant:"destructive"}),Ee(Pn.FAILED),{success:!1,message:"Sync service initialization failed"}}else if(W&&W.journal.id!==V)return S.error(`[AppContext performSync] Critical: SyncService journal ID (${W.journal.id}) mismatch with requested journal ID (${V}). Aborting sync.`),t({title:"Sync Error",description:"Internal sync configuration mismatch. Please try configuring sync again.",variant:"destructive"}),Ee(Pn.FAILED),{success:!1,message:"Sync service mismatch"};if(!W)return S.error(`[AppContext performSync] No SyncService available for journal ${V}.`),t({title:"Sync Error",description:"Sync service not configured.",variant:"destructive"}),Ee(Pn.FAILED),{success:!1,message:"Sync service not configured"};const X=await W.performSync(V);if(X.success&&i&&i.id===V){const ae=await i.getEntries(o.currentYear,o.currentMonth);r.current&&ae&&C(ae)}return!X.success||X.error?Ee(Pn.FAILED):Ee(Pn.IDLE),X},kr=h.useCallback(async z=>{try{return await dr(rt,z)}catch(V){return S.error("[AppContext] Error performing sync:",V),t({title:"Sync Error",description:V instanceof Error?V.message:"An error occurred during sync",variant:"destructive"}),Ee(Pn.IDLE),{success:!1,message:V instanceof Error?V.message:"Unknown sync error",error:V instanceof Error?V:new Error(String(V))}}},[i,l,rt,Ke,t,o.currentYear,o.currentMonth,yt,pt,Ee,ot]);h.useEffect(()=>{if(!u||!i)return;S.log("[AppContext] Setting up periodic storage check and pruning"),va&&va().catch(V=>{S.error("[AppContext] Periodic storage check/prune error:",V)});const z=setInterval(()=>{r.current&&(S.log("[AppContext] Running periodic storage check and pruning"),va&&va().catch(V=>{S.error("[AppContext] Periodic storage check/prune error:",V)}))},5*60*1e3);return()=>{clearInterval(z)}},[u,i]),h.useEffect(()=>{const z=()=>r.current&&m(!0),V=()=>r.current&&m(!1);return window.addEventListener("online",z),window.addEventListener("offline",V),S.log(`[AppContext] Initial network status: ${navigator.onLine?"ONLINE":"OFFLINE"}`),g.current=navigator.onLine,()=>{window.removeEventListener("online",z),window.removeEventListener("offline",V),st.revokeAllUrls()}},[st]),h.useEffect(()=>{!g.current&&f&&S.log("[AppContext] Detected transition from offline to online."),g.current=f},[f]),h.useEffect(()=>{const z=V=>{const W=V;W.message&&W.message.includes("QuotaExceededError")&&(S.error("[AppContext] Storage quota exceeded. Attempting to free up space..."),og(20).catch(X=>{S.error("[AppContext] Failed to prune cache:",X)})),W.message&&W.message.includes("IndexedDB")&&(S.error("[AppContext] IndexedDB error detected:",W.message),t({title:"Database Error",description:"There was a problem with the app database. Please reload the page.",variant:"destructive"}))};return window.addEventListener("error",z),()=>{window.removeEventListener("error",z)}},[t]),h.useEffect(()=>(d(!1),S.log("[AppContext] Initializing Journal..."),(async()=>{try{let V;try{Xe(!0),V=await Ke.ensureDefaultJournalExistsAndMigrate(),S.log(`[AppContext] Default journal ensured: ${V.name}`)}catch(ge){S.error("[AppContext] Failed to ensure default journal:",ge),t({title:"Migration Error",description:"Failed to create default journal. Please reload the app.",variant:"destructive"}),Xe(!1);return}const W=Ke.getJournalList();c(W),S.log(`[AppContext] Found ${W.length} journals`);let X=Ke.getActiveJournalId(),ae=null,Fe="";if(X?(ae=Ke.getJournalById(X),ae||(Fe="The previously active journal was not found",S.warn(`[AppContext] Active journal ID ${X} not found in journal list`))):(Fe="No active journal was set",S.warn("[AppContext] No active journal ID found")),!ae){S.log("[AppContext] Looking for default journal as fallback");const ge=l.find(ke=>ke.isDefault);ge?(ae=ge,X=ge.id,Ke.setActiveJournalId(X),S.log(`[AppContext] Falling back to default journal: ${ae.name}`)):S.warn("[AppContext] No default journal found in journal list")}if(!ae){S.log("[AppContext] No default journal found, checking for PhojoCacheDB to trigger migration");const ge=await Ke.ensureDefaultJournalExistsAndMigrate();ge?(ae=ge,X=ge.id,Ke.setActiveJournalId(X),S.log(`[AppContext] Successfully migrated to 'My Journal': ${ae.name}`),Fe="A new default journal was created from your existing data"):S.warn("[AppContext] Migration unsuccessful, no valid journal available")}if(ae?Fe&&t({title:"Journal Switched",description:`${Fe}. Now using '${ae.name}'.`}):(S.warn("[AppContext] No valid journal found after all fallback attempts"),t({title:"Journal Setup Required",description:"Please create a new journal to continue.",variant:"destructive"}),_t()),ae){const ge=new v0(ae,Ke);a(ge),d(!0),S.log(`[AppContext] Journal initialized: ${ge.name}`),D(!0),F(null);try{const ke=await ge.getAllImageMetadata();r.current&&(E(ke),D(!1))}catch(ke){r.current&&(S.error("[AppContext] Error loading image metadata:",ke),F(ke instanceof Error?ke:new Error("Failed to load image metadata")),D(!1))}finally{r.current&&Xe(!1)}}va().catch(ge=>{S.error("[AppContext] Initial storage check/prune error:",ge)})}catch(V){S.error("[AppContext] Failed to initialize Journal:",V),a(null),d(!1),Xe(!1),t({title:"Initialization Error",description:"Failed to initialize the application storage. Please try reloading.",variant:"destructive"})}})(),()=>{S.log("[AppContext] Journal cleanup"),i&&i.closeDb(),st.revokeAllUrls()}),[]),h.useEffect(()=>{let z=null;return(async()=>{if(!u||!i){rt&&(S.log("[AppContext SyncEffect] Active journal/client not ready. Cleaning up existing SyncService."),rt.removeAllListeners(),pt(null),Ee(Pn.IDLE),ot(""));return}const W=Ke.getJournalById(i.id);if((W==null?void 0:W.syncProviderType)==="local"&&W.syncProviderFolderReference){if(S.log(`[AppContext SyncEffect] Journal ${i.name} has sync configured.`),!rt||rt.journal.id!==i.id){rt&&(S.log(`[AppContext SyncEffect] Cleaning up SyncService from previous journal ${rt.journal.name}.`),rt.removeAllListeners()),S.log(`[AppContext SyncEffect] Initializing new SyncService for ${i.name}.`);const X=new Es(Ke),ae=new za(X,i,Ke);ae.addStatusListener((Fe,ge)=>{r.current&&(Ee(Fe),ot(ge))}),pt(ae),z=ae}else S.log(`[AppContext SyncEffect] Reusing existing SyncService for ${i.name}.`),z=rt;if(z){S.log(`[AppContext SyncEffect] Triggering performSync for ${i.name}.`);try{const X=await kr(i.id);r.current&&(X.success?S.log(`[AppContext SyncEffect] Auto-sync for ${i.name} completed successfully.`):S.warn(`[AppContext SyncEffect] Auto-sync for ${i.name} failed: ${X.message}`))}catch(X){r.current&&S.error(`[AppContext SyncEffect] Error during auto-sync for ${i.name}:`,X)}}else S.error(`[AppContext SyncEffect] SyncService instance is unexpectedly null for ${i.name} before sync attempt.`)}else S.log(`[AppContext SyncEffect] Journal ${i.name} sync not configured. Cleaning up.`),rt&&(rt.removeAllListeners(),pt(null),Ee(Pn.IDLE),ot(""))})(),()=>{z&&(S.log(`[AppContext SyncEffect Cleanup] Cleaning up listeners for SyncService of journal ${z.journal.name} (instance from this effect run).`),z.removeAllListeners())}},[i,u,Ke,kr]),h.useEffect(()=>{if(u&&i){x(!0),P(null);const z=o.currentYear,V=o.currentMonth;S.log(`[AppContext] Fetching local entries effect triggered for ${z}-${V}`),i.getEntries(z,V).then(W=>{S.log(`[AppContext] Loaded ${W.length} local entries for ${z}-${V}`),r.current&&C(W)}).catch(W=>{S.error(`[AppContext] Err loading local entries for ${z}-${V}:`,W),r.current&&P(W instanceof Error?W:new Error("Failed entries load"))}).finally(()=>{S.log(`[AppContext] Finished loading local entries for ${z}-${V}. isLoadingEntries: false`),r.current&&x(!1)})}else C([]),x(!1),P(null),S.log("[AppContext] Journal not ready, skipping entry fetch.")},[u,i,o.currentYear,o.currentMonth]),h.useEffect(()=>{k(null)},[o.currentYear,o.currentMonth]),h.useEffect(()=>{T&&t({title:"Metadata Error",description:T.message,variant:"destructive"})},[T,t]),h.useEffect(()=>{A&&t({title:"Entries Error",description:A.message,variant:"destructive"})},[A,t]),h.useEffect(()=>{R&&t({title:"Operation Error",description:R.message,variant:"destructive"})},[R,t]),h.useEffect(()=>{const z=window.location.hash,V=z.match(/shareKey=([\w-]+)/);if(V&&V[1]){const W=V[1];S.log(`[App Context] Share detected via hash, setting shareKeyForForm: ${W}`),M(W),n("/entry/new",{replace:!0})}else z.includes("/phojo/")&&(S.log(`[App Context] Detected incorrect hash path: ${z}, redirecting to root`),n("/",{replace:!0}))},[n]);const Lt=h.useCallback(()=>{S.log("[AppContext] Clearing shareKeyForForm"),M(null)},[]),Dn=qh();h.useEffect(()=>{const z=X=>{r.current&&(S.log(`[App Context] Received SW message via Handler: type=${X.type}`,X),X.type==="SHARED_FILES_READY"&&X.key?(S.log(`[App Context] Processing SHARED_FILES_READY with key: ${X.key}`),M(X.key),n("/entry/new")):X.type==="STORED_FILES_ERROR"&&(S.error("[App Context] Received STORED_FILES_ERROR from SW:",X.error),t({title:"Share Error",description:`Failed to retrieve/store shared files: ${X.error||"Unknown SW error"}`,variant:"destructive"}),X.key===B&&Lt()))},V=Dn.registerListener("SHARED_FILES_READY",z),W=Dn.registerListener("STORED_FILES_ERROR",z);return()=>{S.log("[App Context] Cleaning up SW message listeners."),V(),W()}},[t,n,B,Lt]);const te=h.useCallback(z=>{const V={type:"DELETE_STORED_FILES",key:z};S.log(`[App Context] Requesting SW to delete stored files with key: ${z}`),Dn.sendMessageToSW(V).catch(W=>{S.warn(`[App Context] Failed to send DELETE_STORED_FILES message to SW for key ${z}:`,W)})},[]),Q=h.useCallback(async(z,V)=>{if(!u||!i||!z)return null;try{return await i.getPhotoBlobUrl(z,V)}catch(W){return S.error(`getPhotoBlobUrl Error for hash ${z} (ID ${V}):`,W),null}},[i,u]),Z=h.useCallback(async(z,V)=>{if(!u||!i||!z)return null;try{return await i.getPhotoThumbnailUrl(z,V)}catch(W){return S.error(`getPhotoThumbnailUrl Error for hash ${z} (ID ${V}):`,W),null}},[i,u]),ye=h.useCallback(async z=>{if(!u||!i)throw new Error("Journal not ready");let V=[];try{V=await i.getAllImageMetadata(),r.current&&y.length===0&&V.length>0&&E(V)}catch(ae){S.error("getCombinedEntryDetails: Failed to load local metadata:",ae),V=y}const W=(z.photos||[]).map(async ae=>{let Fe=null,ge=null;const ke=V.find(xt=>xt.id===ae.photoId),An=(ke==null?void 0:ke.photoMetadata)??null,Ne=(ke==null?void 0:ke.photoFilename)??null,Pt=An==null?void 0:An.contentHash;if(!Pt)S.warn(`Metadata or contentHash missing for photoId: ${ae.photoId}`);else{const[xt,Gt]=await Promise.all([Q(Pt,ae.photoId),Z(Pt,ae.photoId)]);Fe=xt,ge=Gt}return{...ae,photoUrl:Fe,thumbnailUrl:ge,photoMetadata:An,photoFilename:Ne}}),X=await Promise.all(W);return{...z,photos:X}},[i,u,y,Q,Z]),de=h.useCallback(async()=>{if(K!=="calendar"||!r.current||!u||!i)return;let z=0;const V=3;let W=document.querySelectorAll(".day-with-image");for(;W.length===0&&z<V;){S.log(`[loadDayBackgrounds] No day elements found, retrying (${z+1}/${V})...`);const Ne=200*Math.pow(2,z);await new Promise(Pt=>setTimeout(Pt,Ne)),W=document.querySelectorAll(".day-with-image"),z++}if(w.length===0||W.length===0){S.warn("[loadDayBackgrounds] No entries or day elements after retries, aborting.");return}const X=new Map;w.forEach(Ne=>{if(Ne.photos&&Ne.photos.length>0){const Pt=X.get(Ne.date),xt=new Date(Ne.createdAt),Gt=Pt?new Date(Pt.createdAt):new Date(0);(!Pt||xt.getTime()>Gt.getTime())&&X.set(Ne.date,Ne)}});let ae=[];try{ae=await i.getAllImageMetadata(),r.current&&y.length===0&&ae.length>0&&E(ae)}catch(Ne){S.error("[loadDayBackgrounds] Failed load local metadata:",Ne),ae=y}const Fe=(Ne,Pt,xt)=>{var on;if(!r.current)return;const Gt=Pt.crop,Ot=xt==null?void 0:xt.width,Yn=xt==null?void 0:xt.height,_n=(on=Ne.parentElement)==null?void 0:on.getBoundingClientRect(),Xn=(_n==null?void 0:_n.width)??0;if(Gt&&Ot&&Yn&&Ot>0&&Yn>0&&Gt.w>0&&Xn>0){const qt=Xn/Gt.w,ho=Ot*qt,Wl=Yn*qt,Kl=-Gt.x*qt,po=-Gt.y*qt;Object.assign(Ne.style,{width:`${ho}px`,height:`${Wl}px`,transform:`translate(${Kl}px, ${po}px)`,objectFit:"initial",objectPosition:"initial",opacity:""})}else Object.assign(Ne.style,{width:"100%",height:"100%",transform:"",objectFit:"cover",objectPosition:"center center",opacity:""});requestAnimationFrame(()=>{r.current&&Ne.classList.add("img-loaded")})},ge=Ne=>{Ne.src&&Ne.src.startsWith("blob:")&&st.revokeUrl(Ne.getAttribute("data-content-hash")??""),Ne.removeAttribute("src"),Object.assign(Ne.style,{width:"",height:"",transform:"",objectPosition:"",opacity:""}),Ne.classList.remove("img-loaded"),Ne.removeAttribute("data-photo-id"),Ne.removeAttribute("data-content-hash")},ke=new Set;W.forEach(Ne=>{var _n,Xn;const Pt=Ne.getAttribute("data-day");if(!Pt)return;const Gt=new Date(Date.UTC(o.currentYear,o.currentMonth-1,parseInt(Pt))).toISOString().split("T")[0],Ot=X.get(Gt),Yn=(_n=Ot==null?void 0:Ot.photos)==null?void 0:_n[0];if(Yn!=null&&Yn.photoId){const on=ae.find(ho=>ho.id===Yn.photoId),qt=(Xn=on==null?void 0:on.photoMetadata)==null?void 0:Xn.contentHash;qt&&ke.add(qt)}}),document.querySelectorAll(".calendar-day-img.img-loaded").forEach(Ne=>{const Pt=Ne,xt=Pt.getAttribute("data-content-hash");xt&&!ke.has(xt)&&ge(Pt)});const An=Array.from(W).map(async Ne=>{var Wl,Kl;const Pt=Ne.getAttribute("data-day");if(!Pt)return;const Gt=new Date(Date.UTC(o.currentYear,o.currentMonth-1,parseInt(Pt))).toISOString().split("T")[0],Ot=Ne.querySelector(".calendar-day-img");if(!Ot)return;const Yn=X.get(Gt),_n=(Wl=Yn==null?void 0:Yn.photos)==null?void 0:Wl[0],Xn=(_n==null?void 0:_n.photoId)??null,on=Xn?ae.find(po=>po.id===Xn):null,qt=((Kl=on==null?void 0:on.photoMetadata)==null?void 0:Kl.contentHash)??null,ho=Ot.getAttribute("data-content-hash");if(ho&&ho!==qt&&ge(Ot),qt&&i&&ho!==qt&&Xn&&_n&&(on!=null&&on.photoMetadata)){Ot.setAttribute("data-photo-id",Xn),Ot.setAttribute("data-content-hash",qt);let po=null;const Jl=_n.crop,gx=on.photoMetadata.width||0,W4=on.photoMetadata.height||0;(Jl.w*Jl.h/(gx*W4)<.3||Jl.w<300||Jl.h<300)&&gx>0?po=await Q(qt,Xn):po=await Z(qt,Xn),po&&r.current&&Ot.getAttribute("data-content-hash")===qt?(Ot.src=po,Fe(Ot,_n,on.photoMetadata)):r.current&&Ot.getAttribute("data-content-hash")===qt&&ge(Ot)}else!qt&&ho&&ge(Ot)});await Promise.all(An)},[i,u,w,o,y,K,Q,Z,st]);h.useEffect(()=>{let z=null;return K==="calendar"&&u&&i?z=setTimeout(()=>{r.current&&(S.log("[AppContext] Triggering loadDayBackgrounds from effect."),de())},500):document.querySelectorAll(".calendar-day-img").forEach(V=>{const W=V;W.src&&W.src.startsWith("blob:")&&st.revokeUrl(W.getAttribute("data-content-hash")??""),W.removeAttribute("src"),Object.assign(W.style,{width:"",height:"",transform:"",objectPosition:"",opacity:""}),W.classList.remove("img-loaded"),W.removeAttribute("data-photo-id"),W.removeAttribute("data-content-hash")}),()=>{z&&clearTimeout(z)}},[de,K,st,w,y,u,i]);const De=h.useCallback(z=>{const W=new Date(Date.UTC(o.currentYear,o.currentMonth-1,z)).toISOString().split("T")[0];return w.filter(X=>X.date===W)},[w,o.currentMonth,o.currentYear]),we=h.useCallback(z=>w.find(V=>V.id===z),[w]),_e=h.useCallback(async(z,V)=>{if(!u){S.warn("[AppContext] loadSpecificEntry: Client not ready");return}try{const W=V?await yt(V):i;if(!W){S.warn("[AppContext] loadSpecificEntry: No active journal");return}const X=we(z);if(X)return S.log(`[AppContext] loadSpecificEntry: Found entry ${z} in current month.`),X;S.log(`[AppContext] loadSpecificEntry: Entry ${z} not found in current month data, will load from journal...`);const ae=await W.getEntryById(z);if(ae)return S.log(`[AppContext] loadSpecificEntry: Found entry ${z} in journal`),ae;S.warn(`[AppContext] loadSpecificEntry: Entry ${z} not found in journal`);return}catch(W){S.error("[AppContext] loadSpecificEntry: Error loading entry from journal:",W);try{const X=i;if(!X)return;S.log(`[AppContext] loadSpecificEntry: Falling back to loading all entries to find ${z}`);const ae=await X.getDb(),Fe=await Bm(ae);if(Fe&&Fe.length>0){S.log(`[AppContext] loadSpecificEntry: Loaded ${Fe.length} total entries, searching for ${z}`);const ge=Fe.find(ke=>ke.id===z);if(ge)return S.log(`[AppContext] loadSpecificEntry: Found entry ${z} in all entries`),ge;S.warn(`[AppContext] loadSpecificEntry: Entry ${z} not found in any entries (searched ${Fe.length} entries)`)}else S.warn("[AppContext] loadSpecificEntry: No entries found in database")}catch(X){S.error("[AppContext] loadSpecificEntry: Error during fallback:",X)}S.warn(`[AppContext] loadSpecificEntry: Entry ${z} not found in database.`);return}},[i,u,we,yt]),Ae=h.useCallback(async z=>{if(S.log(`[AppContext handleDayClick] START - Day: ${z}, isClientReady: ${u}`),!u||!i){S.log("[AppContext handleDayClick] EXIT - Journal not ready");return}const V=De(z),W=new Date(Date.UTC(o.currentYear,o.currentMonth-1,z));if(S.log(`[AppContext handleDayClick] Day: ${z}, Entries found: ${V.length}`),V.length>0)S.log("[AppContext handleDayClick] Opening view modal."),s.openViewEntriesModal(W,V);else{const X=W.toISOString().split("T")[0];S.log("[AppContext handleDayClick] Navigating to /entry/new for date:",X),n(`/entry/new?date=${X}`)}},[i,u,o.currentMonth,o.currentYear,De,s.openViewEntriesModal,n,t]),Qe=h.useCallback(z=>{s.closeViewModal(),n(`/entry/edit/${z}`)},[n,s.closeViewModal]),Ze=h.useCallback(z=>{s.openDeleteConfirmation(z)},[s.openDeleteConfirmation]),We=h.useCallback(async(z,V,W)=>{if(z.content=z.content.trim(),!u||!i)return k(new Error("Journal not ready.")),!1;O(!0),k(null),P(null);try{const X=z.date.getUTCFullYear(),ae=z.date.getUTCMonth()+1;let Fe=null,ge=null;if(V){const Ne=new Date(V.date+"T00:00:00Z");Fe=Ne.getUTCFullYear(),ge=Ne.getUTCMonth()+1}let ke=i;if(!V&&W&&W!==i.id&&(S.log(`[AppContext] Using non-active journal (${W}) for new entry`),ke=await yt(W),!ke))return k(new Error(`Target journal not found: ${W}`)),!1;S.log(`[AppContext] Saving entry to journal: ${ke.getJournalName()} (${ke.getJournalId()})`);const An=await ke.saveFormEntry(z,V);if(!An)throw new Error("Failed to save entry - no entry ID returned");t({title:V?"Entry Updated":"Entry Saved",description:`Your entry has been saved to journal: ${ke.getJournalName()}`,variant:"default"});try{const Ne=await i.getEntries(X,ae),Pt=await i.getAllImageMetadata();if(r.current){if(E(Pt),X===o.currentYear&&ae===o.currentMonth)C(Ne);else if(V&&Fe===o.currentYear&&ge===o.currentMonth){const Gt=await i.getEntries(Fe,ge);C(Gt)}const xt=ke.getSyncConfiguration();An&&(xt==null?void 0:xt.syncProviderType)!=="none"&&(xt!=null&&xt.syncProviderFolderReference)&&(S.log(`[AppContext] Entry saved/updated. Triggering sync for journal: ${ke.getJournalName()}`),kr(ke.getJournalId()).catch(Gt=>{S.error(`[AppContext] Sync after save for ${ke.getJournalName()} failed:`,Gt)}))}}catch(Ne){S.error("[AppContext] Error refreshing data after save:",Ne)}return r.current&&(S.log(`[AppContext] Navigating to month after save: ${X}-${ae}`),n(`/month/${X}/${ae}`)),!0}catch(X){return S.error("[AppContext] Save Err: Failed save entry to journal:",X),r.current&&k(X instanceof Error?X:new Error("Failed to save entry to journal")),!1}finally{r.current&&O(!1)}},[i,u,y,o,n,t,yt]),it=h.useCallback(async()=>{if(!(!u||!s.entryToDeleteId||!i)){O(!0),k(null),P(null);try{const z=s.entryToDeleteId;let V=we(z);if(V||(V=await _e(z)),!V){S.error(`Delete Error: Could not find entry source for ID ${z}`),k(new Error("Could not find entry to delete")),O(!1),s.closeDeleteDialog();return}const W=new Date(V.date+"T00:00:00Z"),X=W.getUTCFullYear(),ae=W.getUTCMonth()+1;if(await i.deleteEntry(z),S.log(`[AppContext] Deleting entry ${z} from journal ${i.name}.`),t({title:"Entry Deleted",description:"The entry has been deleted from journal.",variant:"default"}),s.closeDeleteDialog(),s.closeViewModal(),r.current){if(X===o.currentYear&&ae===o.currentMonth){const ke=await i.getEntries(X,ae);C(ke)}const Fe=await i.getAllImageMetadata();E(Fe);const ge=i.getSyncConfiguration();(ge==null?void 0:ge.syncProviderType)!=="none"&&(ge!=null&&ge.syncProviderFolderReference)&&(S.log(`[AppContext] Entry saved/updated. Triggering sync for journal: ${i.getJournalName()}`),kr(i.getJournalId()).catch(ke=>{S.error(`[AppContext] Sync after save for ${i.getJournalName()} failed:`,ke)}))}}catch(z){S.error("[AppContext] Delete Error:",z),r.current&&k(z instanceof Error?z:new Error("Failed to delete entry from journal"))}finally{r.current&&O(!1)}}},[i,u,s,o,we,_e,t,y]),gt={activeJournal:i,isClientReady:u,isOnline:f,journalList:l,isSwitchingJournal:I,isLoadingActiveJournalData:nt,isJournalSelectorOpen:N,isCreatingJournal:H,isRenamingJournal:fe,isChangingJournalColor:Y,isDeletingJournal:ue,isConfiguringSyncSettings:!!Ye,journalForSyncSettings:Ye,journalToRename:xe,journalToChangeColor:he,journalToDelete:ct,openJournalSelector:J,closeJournalSelector:q,handleCreateNewJournal:rn,handleSwitchJournal:Vt,handleRenameJournal:Jt,handleChangeJournalColor:mt,handleDeleteJournal:mn,initiateCreateNewJournal:_t,initiateRenameJournal:oe,initiateChangeJournalColor:me,initiateDeleteJournal:Re,initiateConfigureSyncSettings:wt,cancelCreateNewJournal:nn,cancelRenameJournal:pe,cancelChangeJournalColor:je,cancelDeleteJournal:Ge,cancelConfigureSyncSettings:qn,performSync:kr,syncStatus:Mt,syncMessage:He,currentMonth:o.currentMonth,currentYear:o.currentYear,swipeDirection:o.swipeDirection,isMonthYearPickerOpen:o.isMonthYearPickerOpen,goToPreviousMonth:o.goToPreviousMonth,goToNextMonth:o.goToNextMonth,handleMonthYearSelect:o.handleMonthYearSelect,handleCalendarSwipe:o.handleCalendarSwipe,openMonthYearPicker:o.openMonthYearPicker,closeMonthYearPicker:o.closeMonthYearPicker,setSwipeDirection:o.setSwipeDirection,monthViewType:K,setMonthViewType:j,currentMonthEntries:w,isLoadingEntries:v,imagesMetadata:y,isLoadingImagesMeta:b,entriesError:A,operationError:R,imagesMetaError:T,setEntriesError:P,setImagesMetaError:F,clearOperationError:()=>k(null),isViewEntryModalOpen:s.isViewEntryModalOpen,getJournalInstance:yt,selectedBasicEntriesForModal:s.selectedBasicEntriesForModal,viewEntryModalDate:s.entryDateForModal,openViewEntriesModal:s.openViewEntriesModal,closeViewModal:s.closeViewModal,isDeleteDialogOpen:s.isDeleteDialogOpen,entryToDeleteId:s.entryToDeleteId,openDeleteConfirmation:s.openDeleteConfirmation,closeDeleteDialog:s.closeDeleteDialog,isSaving:_,handleSaveEntry:We,handleDeleteEntry:it,loadDayBackgrounds:de,getPhotoBlobUrl:Q,getPhotoThumbnailUrl:Z,getCombinedEntryDetails:ye,getEntriesForDay:De,getEntryById:we,loadSpecificEntry:_e,handleDayClick:Ae,handleEditRequest:Qe,handleDeleteRequest:Ze,shareKeyForForm:B,clearShareKeyForForm:Lt,deleteSharedFilesFromStorage:te,navigate:n};return p.jsxs(iD.Provider,{value:gt,children:[e,p.jsx(a5,{isOpen:N,onClose:q,journals:l,activeJournalId:(i==null?void 0:i.id)||null,onSelectJournal:Vt,onInitiateCreateNewJournal:_t,onInitiateRenameJournal:oe,onInitiateDeleteJournal:Re,onInitiateChangeJournalColor:me,isCreating:H,onCreateJournal:rn,onCancelCreate:nn}),p.jsx(l5,{isOpen:fe,onClose:pe,journal:xe,onRename:Jt}),p.jsx(u5,{isOpen:Y,onClose:je,journal:he,onSelectColor:mt}),p.jsx(d5,{isOpen:ue,onClose:Ge,journal:ct,onConfirmDelete:mn}),Ye&&i&&p.jsx(A5,{open:Pe,onClose:qn,journalId:Ye.id,journalName:Ye.name,journalMetaService:Ke,journal:i})]})};function Hr(){const e=h.useContext(iD);if(e===void 0)throw new Error("useAppContext must be used within an AppProvider");return e}var $5=(e,t,n,r,o,s,i,a)=>{let l=document.documentElement,c=["light","dark"];function u(m){(Array.isArray(e)?e:[e]).forEach(g=>{let w=g==="class",C=w&&s?o.map(v=>s[v]||v):o;w?(l.classList.remove(...C),l.classList.add(s&&s[m]?s[m]:m)):l.setAttribute(g,m)}),d(m)}function d(m){a&&c.includes(m)&&(l.style.colorScheme=m)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let m=localStorage.getItem(t)||n,g=i&&m==="system"?f():m;u(g)}catch{}},u1=["light","dark"],aD="(prefers-color-scheme: dark)",z5=typeof window>"u",sg=h.createContext(void 0),V5={setTheme:e=>{},themes:[]},ig=()=>{var e;return(e=h.useContext(sg))!=null?e:V5},U5=e=>h.useContext(sg)?h.createElement(h.Fragment,null,e.children):h.createElement(W5,{...e}),H5=["light","dark"],W5=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:o="theme",themes:s=H5,defaultTheme:i=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u,scriptProps:d})=>{let[f,m]=h.useState(()=>J5(o,i)),[g,w]=h.useState(()=>f==="system"?S0():f),C=l?Object.values(l):s,v=h.useCallback(b=>{let D=b;if(!D)return;b==="system"&&n&&(D=S0());let A=l?l[D]:D,P=t?G5(u):null,R=document.documentElement,k=T=>{T==="class"?(R.classList.remove(...C),A&&R.classList.add(A)):T.startsWith("data-")&&(A?R.setAttribute(T,A):R.removeAttribute(T))};if(Array.isArray(a)?a.forEach(k):k(a),r){let T=u1.includes(i)?i:null,F=u1.includes(D)?D:T;R.style.colorScheme=F}P==null||P()},[u]),x=h.useCallback(b=>{let D=typeof b=="function"?b(f):b;m(D);try{localStorage.setItem(o,D)}catch{}},[f]),y=h.useCallback(b=>{let D=S0(b);w(D),f==="system"&&n&&!e&&v("system")},[f,e]);h.useEffect(()=>{let b=window.matchMedia(aD);return b.addListener(y),y(b),()=>b.removeListener(y)},[y]),h.useEffect(()=>{let b=D=>{D.key===o&&(D.newValue?m(D.newValue):x(i))};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[x]),h.useEffect(()=>{v(e??f)},[e,f]);let E=h.useMemo(()=>({theme:f,setTheme:x,forcedTheme:e,resolvedTheme:f==="system"?g:f,themes:n?[...s,"system"]:s,systemTheme:n?g:void 0}),[f,x,e,g,n,s]);return h.createElement(sg.Provider,{value:E},h.createElement(K5,{forcedTheme:e,storageKey:o,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:l,themes:s,nonce:u,scriptProps:d}),c)},K5=h.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,t,s,e,a,i,r,o]).slice(1,-1);return h.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${$5.toString()})(${u})`}})}),J5=(e,t)=>{if(z5)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},G5=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},S0=e=>(e||(e=window.matchMedia(aD)),e.matches?"dark":"light"),Yh=["Enter"," "],q5=["ArrowDown","PageUp","Home"],lD=["ArrowUp","PageDown","End"],Y5=[...q5,...lD],X5={ltr:[...Yh,"ArrowRight"],rtl:[...Yh,"ArrowLeft"]},Q5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ll="Menu",[pl,Z5,e6]=ud(Ll),[Ls,cD]=En(Ll,[e6,wd,ea]),Pd=wd(),uD=ea(),[t6,Os]=Ls(Ll),[n6,Ol]=Ls(Ll),dD=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=e,a=Pd(t),[l,c]=h.useState(null),u=h.useRef(!1),d=Ft(s),f=Zi(o);return h.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),p.jsx(F3,{...a,children:p.jsx(t6,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(n6,{scope:t,onClose:h.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})};dD.displayName=Ll;var r6="MenuAnchor",ag=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Pd(n);return p.jsx(Fb,{...o,...r,ref:t})});ag.displayName=r6;var lg="MenuPortal",[o6,fD]=Ls(lg,{forceMount:void 0}),hD=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=Os(lg,t);return p.jsx(o6,{scope:t,forceMount:n,children:p.jsx(Sn,{present:n||s.open,children:p.jsx(dd,{asChild:!0,container:o,children:r})})})};hD.displayName=lg;var ir="MenuContent",[s6,cg]=Ls(ir),pD=h.forwardRef((e,t)=>{const n=fD(ir,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Os(ir,e.__scopeMenu),i=Ol(ir,e.__scopeMenu);return p.jsx(pl.Provider,{scope:e.__scopeMenu,children:p.jsx(Sn,{present:r||s.open,children:p.jsx(pl.Slot,{scope:e.__scopeMenu,children:i.modal?p.jsx(i6,{...o,ref:t}):p.jsx(a6,{...o,ref:t})})})})}),i6=h.forwardRef((e,t)=>{const n=Os(ir,e.__scopeMenu),r=h.useRef(null),o=Le(t,r);return h.useEffect(()=>{const s=r.current;if(s)return y2(s)},[]),p.jsx(ug,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:se(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),a6=h.forwardRef((e,t)=>{const n=Os(ir,e.__scopeMenu);return p.jsx(ug,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),l6=Li("MenuContent.ScrollLock"),ug=h.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:m,disableOutsideScroll:g,...w}=e,C=Os(ir,n),v=Ol(ir,n),x=Pd(n),y=uD(n),E=Z5(n),[b,D]=h.useState(null),A=h.useRef(null),P=Le(t,A,C.onContentChange),R=h.useRef(0),k=h.useRef(""),T=h.useRef(0),F=h.useRef(null),_=h.useRef("right"),O=h.useRef(0),K=g?Wm:h.Fragment,j=g?{as:l6,allowPinchZoom:!0}:void 0,B=I=>{var Y,ne;const U=k.current+I,N=E().filter(ue=>!ue.disabled),L=document.activeElement,H=(Y=N.find(ue=>ue.ref.current===L))==null?void 0:Y.textValue,$=N.map(ue=>ue.textValue),fe=w6($,U,H),ce=(ne=N.find(ue=>ue.textValue===fe))==null?void 0:ne.ref.current;(function ue(Te){k.current=Te,window.clearTimeout(R.current),Te!==""&&(R.current=window.setTimeout(()=>ue(""),1e3))})(U),ce&&setTimeout(()=>ce.focus())};h.useEffect(()=>()=>window.clearTimeout(R.current),[]),u2();const M=h.useCallback(I=>{var N,L;return _.current===((N=F.current)==null?void 0:N.side)&&E6(I,(L=F.current)==null?void 0:L.area)},[]);return p.jsx(s6,{scope:n,searchRef:k,onItemEnter:h.useCallback(I=>{M(I)&&I.preventDefault()},[M]),onItemLeave:h.useCallback(I=>{var U;M(I)||((U=A.current)==null||U.focus(),D(null))},[M]),onTriggerLeave:h.useCallback(I=>{M(I)&&I.preventDefault()},[M]),pointerGraceTimerRef:T,onPointerGraceIntentChange:h.useCallback(I=>{F.current=I},[]),children:p.jsx(K,{...j,children:p.jsx(Hm,{asChild:!0,trapped:o,onMountAutoFocus:se(s,I=>{var U;I.preventDefault(),(U=A.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:p.jsx(Nl,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:m,children:p.jsx($m,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:b,onCurrentTabStopIdChange:D,onEntryFocus:se(l,I=>{v.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(Mb,{role:"menu","aria-orientation":"vertical","data-state":RD(C.open),"data-radix-menu-content":"",dir:v.dir,...x,...w,ref:P,style:{outline:"none",...w.style},onKeyDown:se(w.onKeyDown,I=>{const N=I.target.closest("[data-radix-menu-content]")===I.currentTarget,L=I.ctrlKey||I.altKey||I.metaKey,H=I.key.length===1;N&&(I.key==="Tab"&&I.preventDefault(),!L&&H&&B(I.key));const $=A.current;if(I.target!==$||!Y5.includes(I.key))return;I.preventDefault();const ce=E().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);lD.includes(I.key)&&ce.reverse(),v6(ce)}),onBlur:se(e.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(R.current),k.current="")}),onPointerMove:se(e.onPointerMove,ml(I=>{const U=I.target,N=O.current!==I.clientX;if(I.currentTarget.contains(U)&&N){const L=I.clientX>O.current?"right":"left";_.current=L,O.current=I.clientX}}))})})})})})})});pD.displayName=ir;var c6="MenuGroup",dg=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Se.div,{role:"group",...r,ref:t})});dg.displayName=c6;var u6="MenuLabel",mD=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Se.div,{...r,ref:t})});mD.displayName=u6;var Mu="MenuItem",d1="menu.itemSelect",kd=h.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=h.useRef(null),i=Ol(Mu,e.__scopeMenu),a=cg(Mu,e.__scopeMenu),l=Le(t,s),c=h.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(d1,{bubbles:!0,cancelable:!0});d.addEventListener(d1,m=>r==null?void 0:r(m),{once:!0}),vm(d,f),f.defaultPrevented?c.current=!1:i.onClose()}};return p.jsx(gD,{...o,ref:l,disabled:n,onClick:se(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),c.current=!0},onPointerUp:se(e.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:se(e.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Yh.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});kd.displayName=Mu;var gD=h.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,i=cg(Mu,n),a=uD(n),l=h.useRef(null),c=Le(t,l),[u,d]=h.useState(!1),[f,m]=h.useState("");return h.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[s.children]),p.jsx(pl.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:p.jsx(zm,{asChild:!0,...a,focusable:!r,children:p.jsx(Se.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:se(e.onPointerMove,ml(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:se(e.onPointerLeave,ml(g=>i.onItemLeave(g))),onFocus:se(e.onFocus,()=>d(!0)),onBlur:se(e.onBlur,()=>d(!1))})})})}),d6="MenuCheckboxItem",xD=h.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return p.jsx(ED,{scope:e.__scopeMenu,checked:n,children:p.jsx(kd,{role:"menuitemcheckbox","aria-checked":Nu(n)?"mixed":n,...o,ref:t,"data-state":hg(n),onSelect:se(o.onSelect,()=>r==null?void 0:r(Nu(n)?!0:!n),{checkForDefaultPrevented:!1})})})});xD.displayName=d6;var vD="MenuRadioGroup",[f6,h6]=Ls(vD,{value:void 0,onValueChange:()=>{}}),yD=h.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=Ft(r);return p.jsx(f6,{scope:e.__scopeMenu,value:n,onValueChange:s,children:p.jsx(dg,{...o,ref:t})})});yD.displayName=vD;var wD="MenuRadioItem",CD=h.forwardRef((e,t)=>{const{value:n,...r}=e,o=h6(wD,e.__scopeMenu),s=n===o.value;return p.jsx(ED,{scope:e.__scopeMenu,checked:s,children:p.jsx(kd,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":hg(s),onSelect:se(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});CD.displayName=wD;var fg="MenuItemIndicator",[ED,p6]=Ls(fg,{checked:!1}),SD=h.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=p6(fg,n);return p.jsx(Sn,{present:r||Nu(s.checked)||s.checked===!0,children:p.jsx(Se.span,{...o,ref:t,"data-state":hg(s.checked)})})});SD.displayName=fg;var m6="MenuSeparator",bD=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});bD.displayName=m6;var g6="MenuArrow",DD=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Pd(n);return p.jsx(Nb,{...o,...r,ref:t})});DD.displayName=g6;var x6="MenuSub",[_7,AD]=Ls(x6),Aa="MenuSubTrigger",PD=h.forwardRef((e,t)=>{const n=Os(Aa,e.__scopeMenu),r=Ol(Aa,e.__scopeMenu),o=AD(Aa,e.__scopeMenu),s=cg(Aa,e.__scopeMenu),i=h.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=h.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return h.useEffect(()=>u,[u]),h.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),p.jsx(ag,{asChild:!0,...c,children:p.jsx(gD,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":RD(n.open),...e,ref:cd(t,o.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:se(e.onPointerMove,ml(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:se(e.onPointerLeave,ml(d=>{var m,g;u();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const w=(g=n.content)==null?void 0:g.dataset.side,C=w==="right",v=C?-5:5,x=f[C?"left":"right"],y=f[C?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x,y:f.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:se(e.onKeyDown,d=>{var m;const f=s.searchRef.current!=="";e.disabled||f&&d.key===" "||X5[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});PD.displayName=Aa;var kD="MenuSubContent",TD=h.forwardRef((e,t)=>{const n=fD(ir,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Os(ir,e.__scopeMenu),i=Ol(ir,e.__scopeMenu),a=AD(kD,e.__scopeMenu),l=h.useRef(null),c=Le(t,l);return p.jsx(pl.Provider,{scope:e.__scopeMenu,children:p.jsx(Sn,{present:r||s.open,children:p.jsx(pl.Slot,{scope:e.__scopeMenu,children:p.jsx(ug,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:se(e.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:se(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:se(e.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),f=Q5[i.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});TD.displayName=kD;function RD(e){return e?"open":"closed"}function Nu(e){return e==="indeterminate"}function hg(e){return Nu(e)?"indeterminate":e?"checked":"unchecked"}function v6(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function y6(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function w6(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=y6(e,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function C6(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s].x,l=t[s].y,c=t[i].x,u=t[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function E6(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return C6(n,t)}function ml(e){return t=>t.pointerType==="mouse"?e(t):void 0}var S6=dD,b6=ag,D6=hD,A6=pD,P6=dg,k6=mD,T6=kd,R6=xD,F6=yD,M6=CD,N6=SD,I6=bD,j6=DD,_6=PD,B6=TD,pg="DropdownMenu",[L6,B7]=En(pg,[cD]),bn=cD(),[O6,FD]=L6(pg),MD=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=bn(t),c=h.useRef(null),[u=!1,d]=Vr({prop:o,defaultProp:s,onChange:i});return p.jsx(O6,{scope:t,triggerId:xi(),triggerRef:c,contentId:xi(),open:u,onOpenChange:d,onOpenToggle:h.useCallback(()=>d(f=>!f),[d]),modal:a,children:p.jsx(S6,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};MD.displayName=pg;var ND="DropdownMenuTrigger",ID=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,s=FD(ND,n),i=bn(n);return p.jsx(b6,{asChild:!0,...i,children:p.jsx(Se.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:cd(t,s.triggerRef),onPointerDown:se(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:se(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});ID.displayName=ND;var $6="DropdownMenuPortal",jD=e=>{const{__scopeDropdownMenu:t,...n}=e,r=bn(t);return p.jsx(D6,{...r,...n})};jD.displayName=$6;var _D="DropdownMenuContent",BD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=FD(_D,n),s=bn(n),i=h.useRef(!1);return p.jsx(A6,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:t,onCloseAutoFocus:se(e.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:se(e.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BD.displayName=_D;var z6="DropdownMenuGroup",V6=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(P6,{...o,...r,ref:t})});V6.displayName=z6;var U6="DropdownMenuLabel",LD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(k6,{...o,...r,ref:t})});LD.displayName=U6;var H6="DropdownMenuItem",OD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(T6,{...o,...r,ref:t})});OD.displayName=H6;var W6="DropdownMenuCheckboxItem",$D=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(R6,{...o,...r,ref:t})});$D.displayName=W6;var K6="DropdownMenuRadioGroup",J6=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(F6,{...o,...r,ref:t})});J6.displayName=K6;var G6="DropdownMenuRadioItem",zD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(M6,{...o,...r,ref:t})});zD.displayName=G6;var q6="DropdownMenuItemIndicator",VD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(N6,{...o,...r,ref:t})});VD.displayName=q6;var Y6="DropdownMenuSeparator",UD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(I6,{...o,...r,ref:t})});UD.displayName=Y6;var X6="DropdownMenuArrow",Q6=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(j6,{...o,...r,ref:t})});Q6.displayName=X6;var Z6="DropdownMenuSubTrigger",HD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(_6,{...o,...r,ref:t})});HD.displayName=Z6;var e_="DropdownMenuSubContent",WD=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bn(n);return p.jsx(B6,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WD.displayName=e_;var t_=MD,n_=ID,r_=jD,KD=BD,JD=LD,GD=OD,qD=$D,YD=zD,XD=VD,QD=UD,ZD=HD,eA=WD;const mg=t_,gg=n_,o_=h.forwardRef(({className:e,inset:t,children:n,...r},o)=>p.jsxs(ZD,{ref:o,className:ie("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,p.jsx(YS,{className:"ml-auto"})]}));o_.displayName=ZD.displayName;const s_=h.forwardRef(({className:e,...t},n)=>p.jsx(eA,{ref:n,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));s_.displayName=eA.displayName;const Td=h.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(r_,{children:p.jsx(KD,{ref:r,sideOffset:t,className:ie("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Td.displayName=KD.displayName;const Fs=h.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(GD,{ref:r,className:ie("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Fs.displayName=GD.displayName;const i_=h.forwardRef(({className:e,children:t,checked:n,...r},o)=>p.jsxs(qD,{ref:o,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(XD,{children:p.jsx(qS,{className:"h-4 w-4"})})}),t]}));i_.displayName=qD.displayName;const a_=h.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(YD,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(XD,{children:p.jsx(XS,{className:"h-2 w-2 fill-current"})})}),t]}));a_.displayName=YD.displayName;const tA=h.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(JD,{ref:r,className:ie("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));tA.displayName=JD.displayName;const nA=h.forwardRef(({className:e,...t},n)=>p.jsx(QD,{ref:n,className:ie("-mx-1 my-1 h-px bg-muted",e),...t}));nA.displayName=QD.displayName;var xg="Switch",[l_,L7]=En(xg),[c_,u_]=l_(xg),rA=h.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=e,[f,m]=h.useState(null),g=Le(t,y=>m(y)),w=h.useRef(!1),C=f?u||!!f.closest("form"):!0,[v=!1,x]=Vr({prop:o,defaultProp:s,onChange:c});return p.jsxs(c_,{scope:n,checked:v,disabled:a,children:[p.jsx(Se.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":iA(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:se(e.onClick,y=>{x(E=>!E),C&&(w.current=y.isPropagationStopped(),w.current||y.stopPropagation())})}),C&&p.jsx(d_,{control:f,bubbles:!w.current,name:r,value:l,checked:v,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});rA.displayName=xg;var oA="SwitchThumb",sA=h.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,o=u_(oA,n);return p.jsx(Se.span,{"data-state":iA(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});sA.displayName=oA;var d_=e=>{const{control:t,checked:n,bubbles:r=!0,...o}=e,s=h.useRef(null),i=tg(n),a=yd(t);return h.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[i,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function iA(e){return e?"checked":"unchecked"}var aA=rA,f_=sA;const lA=h.forwardRef(({className:e,...t},n)=>p.jsx(aA,{className:ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:p.jsx(f_,{className:ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));lA.displayName=aA.displayName;function h_(){const{openJournalSelector:e,initiateConfigureSyncSettings:t,activeJournal:n}=Hr(),{theme:r,setTheme:o,resolvedTheme:s}=ig(),i=s==="dark",a=l=>{o(l?"dark":"light")};return p.jsxs(mg,{children:[p.jsx(gg,{asChild:!0,children:p.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"Settings Menu",children:p.jsx(B8,{className:"h-4 w-4"})})}),p.jsxs(Td,{className:"w-56",align:"end",forceMount:!0,children:[p.jsx(tA,{className:"font-normal",children:"Settings"}),p.jsx(nA,{}),p.jsxs(Fs,{className:"cursor-pointer",onClick:()=>e(),children:[p.jsx(w8,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Switch Journal"})]}),p.jsx(Fs,{className:"cursor-pointer",onSelect:l=>l.preventDefault(),children:p.jsxs("div",{className:"flex items-center justify-between w-full",children:[p.jsxs("div",{className:"flex items-center",children:[i?p.jsx(I8,{className:"mr-2 h-4 w-4"}):p.jsx(L8,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Dark Mode"})]}),p.jsx(lA,{checked:i,onCheckedChange:a,"aria-label":"Toggle dark mode"})]})})]})]})}function p_(){const{monthViewType:e,setMonthViewType:t,isOnline:n,activeJournal:r,journalList:o,openJournalSelector:s,initiateRenameJournal:i,initiateConfigureSyncSettings:a,performSync:l,syncStatus:c,syncMessage:u}=Hr();ig();const[,d]=mm(),{toast:f}=Ml(),m=h.useRef(null);h.useEffect(()=>{S.log("[Header] setLocation instance type:",typeof d)},[d]);const g=C=>{S.log("[Header] New Entry Link clicked. Href:",C.currentTarget.href)},w=C=>{const v=C.target.files;if(v&&v.length>0){const x=Array.from(v),y=x.filter(b=>!b.type.startsWith("image/"));y.length>0&&f({title:"Invalid File Type",description:`Only image files are allowed. ${y.map(b=>b.name).join(", ")} ${y.length===1?"was":"were"} ignored.`,variant:"destructive"});const E=x.filter(b=>b.type.startsWith("image/"));if(E.length>0){const b=crypto.randomUUID();S.log(`[Header] Storing ${E.length} files with service worker using key: ${b}`),navigator.serviceWorker&&navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"STORE_FILES",key:b,files:E}),setTimeout(()=>{d(`/entry/new#shareKey=${b}`)},100)):(S.error("[Header] Service worker not available"),f({title:"Error",description:"Could not process files. Please try again.",variant:"destructive"}))}else S.log("[Header] No valid image files selected.")}else S.log("[Header] No files selected.");C.target&&(C.target.value="")};return p.jsxs("header",{className:ie("fixed top-0 left-0 right-0 z-10 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-md border-b",n?"border-neutral-200 dark:border-neutral-800":"border-orange-400 dark:border-orange-600"),children:[!n&&p.jsxs("div",{className:"absolute top-full left-0 right-0 bg-orange-100 dark:bg-orange-900 border-b border-orange-400 dark:border-orange-600 text-orange-700 dark:text-orange-200 px-4 py-1 text-xs flex items-center justify-center z-10",children:[p.jsx(Kv,{className:"h-3 w-3 mr-1.5"}),"Offline Mode."]}),p.jsx("input",{type:"file",ref:m,onChange:w,multiple:!0,accept:"image/*",className:"hidden","aria-hidden":"true"}),p.jsxs("div",{className:ie("container mx-auto flex items-center justify-between h-16 px-4"),children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:"./logo.svg",alt:"Phojo Logo",className:"h-6 w-auto mr-2"}),r&&p.jsxs("div",{className:"flex items-center",children:[p.jsxs("div",{className:"flex items-center group cursor-pointer px-1.5 py-1 rounded-md transition-colors hover:bg-gray-100 dark:hover:bg-gray-800",onClick:s,title:"Switch to another journal",role:"button",tabIndex:0,onKeyDown:C=>C.key==="Enter"&&s(),"aria-label":"Open journal selector",children:[p.jsx("div",{className:`h-4 w-4 rounded-full mr-2 transition-all group-hover:ring-1 group-hover:ring-offset-1 ring-${r.color?r.color.toLowerCase():"blue"}-400 bg-${r.color?r.color.toLowerCase():"blue"}-500`,"aria-hidden":"true"}),p.jsx("span",{className:"text-sm font-medium truncate max-w-[120px]",children:r.name}),p.jsx("span",{className:"text-muted-foreground ml-1","aria-hidden":"true",children:""})]}),p.jsx("button",{className:"ml-1.5 text-xs text-muted-foreground hover:text-foreground px-1.5 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",onClick:()=>r&&i(r.id),title:"Rename this journal","aria-label":"Rename journal",children:"Edit"})]})]}),p.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[p.jsxs(l2,{type:"single",size:"sm",value:e,onValueChange:C=>{C&&t(C)},className:"bg-muted p-0.5 rounded-md","aria-label":"View type",children:[p.jsx(Hh,{value:"calendar","aria-label":"Calendar view",className:"h-7 w-7 px-1 data-[state=on]:bg-background data-[state=on]:shadow-sm",children:p.jsx(P8,{className:"h-4 w-4"})}),p.jsx(Hh,{value:"list","aria-label":"List view",className:"h-7 w-7 px-1 data-[state=on]:bg-background data-[state=on]:shadow-sm",children:p.jsx(F8,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[r&&o.some(C=>C.id===r.id&&C.syncProviderType&&C.syncProviderType!=="none")&&p.jsx(be,{variant:"ghost",size:"icon",onClick:()=>l(r.id),title:"Sync Now",disabled:c!==Pn.IDLE,children:c===Pn.IDLE?p.jsx(ZS,{className:"h-5 w-5"}):p.jsx(Ht,{className:"h-5 w-5 animate-spin"})}),!n&&p.jsxs("div",{className:"flex items-center mr-2 px-1.5 py-1 bg-yellow-200 dark:bg-yellow-800 dark:text-white text-black rounded-md text-xs",title:"Offline Mode",children:[p.jsx(Kv,{className:"h-3 w-3 mr-1"})," Offline"]})]}),p.jsx(GR,{href:"/entry/new",onClick:g,children:p.jsx(be,{size:"icon",className:"h-8 w-8","aria-label":"New Entry",title:"New Entry",children:p.jsx(j8,{className:"h-4 w-4"})})}),p.jsx(h_,{})]})]})]})}function m_(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}function Rd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Xh=e=>Array.isArray(e);function cA(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function gl(e){return typeof e=="string"||Array.isArray(e)}function f1(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vg(e,t,n,r){if(typeof t=="function"){const[o,s]=f1(r);t=t(n!==void 0?n:e.custom,o,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,s]=f1(r);t=t(n!==void 0?n:e.custom,o,s)}return t}function Fd(e,t,n){const r=e.getProps();return vg(r,t,n!==void 0?n:r.custom,e)}const yg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wg=["initial",...yg],$l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$s=new Set($l),eo=e=>e*1e3,to=e=>e/1e3,g_={type:"spring",stiffness:500,damping:25,restSpeed:10},x_=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),v_={type:"keyframes",duration:.8},y_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},w_=(e,{keyframes:t})=>t.length>2?v_:$s.has(e)?e.startsWith("scale")?x_(t[1]):g_:y_;function Cg(e,t){return e?e[t]||e.default||e:void 0}const C_={skipAnimations:!1,useManualTiming:!1},E_=e=>e!==null;function Md(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(E_),s=t&&n!=="loop"&&t%2===1?0:o.length-1;return!s||r===void 0?o[s]:r}const hn=e=>e;let Qh=hn;function S_(e){let t=new Set,n=new Set,r=!1,o=!1;const s=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),e()),c(i)}const l={schedule:(c,u=!1,d=!1)=>{const m=d&&r?t:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(i=c,r){o=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(a),r=!1,o&&(o=!1,l.process(c))}};return l}const Ac=["read","resolveKeyframes","update","preRender","render","postRender"],b_=40;function uA(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=Ac.reduce((v,x)=>(v[x]=S_(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=i,m=()=>{const v=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(v-o.timestamp,b_),1),o.timestamp=v,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),u.process(o),d.process(o),f.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,o.isProcessing||e(m)};return{schedule:Ac.reduce((v,x)=>{const y=i[x];return v[x]=(E,b=!1,D=!1)=>(n||g(),y.schedule(E,b,D)),v},{}),cancel:v=>{for(let x=0;x<Ac.length;x++)i[Ac[x]].cancel(v)},state:o,steps:i}}const{schedule:tt,cancel:Xo,state:Qt,steps:b0}=uA(typeof requestAnimationFrame<"u"?requestAnimationFrame:hn,!0),dA=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,D_=1e-7,A_=12;function P_(e,t,n,r,o){let s,i,a=0;do i=t+(n-t)/2,s=dA(i,r,o)-e,s>0?n=i:t=i;while(Math.abs(s)>D_&&++a<A_);return i}function zl(e,t,n,r){if(e===t&&n===r)return hn;const o=s=>P_(s,0,1,e,n);return s=>s===0||s===1?s:dA(o(s),t,r)}const fA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,hA=e=>t=>1-e(1-t),pA=zl(.33,1.53,.69,.99),Eg=hA(pA),mA=fA(Eg),gA=e=>(e*=2)<1?.5*Eg(e):.5*(2-Math.pow(2,-10*(e-1))),Sg=e=>1-Math.sin(Math.acos(e)),xA=hA(Sg),vA=fA(Sg),yA=e=>/^0[^.\s]+$/u.test(e);function k_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||yA(e):!0}const wA=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),CA=e=>t=>typeof t=="string"&&t.startsWith(e),EA=CA("--"),T_=CA("var(--"),bg=e=>T_(e)?R_.test(e.split("/*")[0].trim()):!1,R_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,F_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function M_(e){const t=F_.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function SA(e,t,n=1){const[r,o]=M_(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const i=s.trim();return wA(i)?parseFloat(i):i}return bg(o)?SA(o,t,n+1):o}const co=(e,t,n)=>n>t?t:n<e?e:n,oa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},xl={...oa,transform:e=>co(0,1,e)},Pc={...oa,default:1},Vl=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wo=Vl("deg"),Or=Vl("%"),Ce=Vl("px"),N_=Vl("vh"),I_=Vl("vw"),h1={...Or,parse:e=>Or.parse(e)/100,transform:e=>Or.transform(e*100)},j_=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),p1=e=>e===oa||e===Ce,m1=(e,t)=>parseFloat(e.split(", ")[t]),g1=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return m1(o[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?m1(s[1],e):0}},__=new Set(["x","y","z"]),B_=$l.filter(e=>!__.has(e));function L_(e){const t=[];return B_.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ui={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:g1(4,13),y:g1(5,14)};Ui.translateX=Ui.x;Ui.translateY=Ui.y;const bA=e=>t=>t.test(e),O_={test:e=>e==="auto",parse:e=>e},DA=[oa,Ce,Or,wo,I_,N_,O_],x1=e=>DA.find(bA(e)),Ss=new Set;let Zh=!1,ep=!1;function AA(){if(ep){const e=Array.from(Ss).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=L_(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ep=!1,Zh=!1,Ss.forEach(e=>e.complete()),Ss.clear()}function PA(){Ss.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ep=!0)})}function $_(){PA(),AA()}class Dg{constructor(t,n,r,o,s,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ss.add(this),Zh||(Zh=!0,tt.read(PA),tt.resolveKeyframes(AA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const i=o==null?void 0:o.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),o&&i===void 0&&o.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ss.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ss.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ua=e=>Math.round(e*1e5)/1e5,Ag=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function z_(e){return e==null}const V_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Pg=(e,t)=>n=>!!(typeof n=="string"&&V_.test(n)&&n.startsWith(e)||t&&!z_(n)&&Object.prototype.hasOwnProperty.call(n,t)),kA=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(Ag);return{[e]:parseFloat(o),[t]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},U_=e=>co(0,255,e),D0={...oa,transform:e=>Math.round(U_(e))},ms={test:Pg("rgb","red"),parse:kA("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+D0.transform(e)+", "+D0.transform(t)+", "+D0.transform(n)+", "+Ua(xl.transform(r))+")"};function H_(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const tp={test:Pg("#"),parse:H_,transform:ms.transform},si={test:Pg("hsl","hue"),parse:kA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Or.transform(Ua(t))+", "+Or.transform(Ua(n))+", "+Ua(xl.transform(r))+")"},un={test:e=>ms.test(e)||tp.test(e)||si.test(e),parse:e=>ms.test(e)?ms.parse(e):si.test(e)?si.parse(e):tp.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ms.transform(e):si.transform(e)},W_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function K_(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Ag))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(W_))===null||n===void 0?void 0:n.length)||0)>0}const TA="number",RA="color",J_="var",G_="var(",v1="${}",q_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vl(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=t.replace(q_,l=>(un.test(l)?(r.color.push(s),o.push(RA),n.push(un.parse(l))):l.startsWith(G_)?(r.var.push(s),o.push(J_),n.push(l)):(r.number.push(s),o.push(TA),n.push(parseFloat(l))),++s,v1)).split(v1);return{values:n,split:a,indexes:r,types:o}}function FA(e){return vl(e).values}function MA(e){const{split:t,types:n}=vl(e),r=t.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=t[i],o[i]!==void 0){const a=n[i];a===TA?s+=Ua(o[i]):a===RA?s+=un.transform(o[i]):s+=o[i]}return s}}const Y_=e=>typeof e=="number"?0:e;function X_(e){const t=FA(e);return MA(e)(t.map(Y_))}const Qo={test:K_,parse:FA,createTransformer:MA,getAnimatableNone:X_},Q_=new Set(["brightness","contrast","saturate","opacity"]);function Z_(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ag)||[];if(!r)return e;const o=n.replace(r,"");let s=Q_.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+o+")"}const eB=/\b([a-z-]*)\(.*?\)/gu,np={...Qo,getAnimatableNone:e=>{const t=e.match(eB);return t?t.map(Z_).join(" "):e}},tB={borderWidth:Ce,borderTopWidth:Ce,borderRightWidth:Ce,borderBottomWidth:Ce,borderLeftWidth:Ce,borderRadius:Ce,radius:Ce,borderTopLeftRadius:Ce,borderTopRightRadius:Ce,borderBottomRightRadius:Ce,borderBottomLeftRadius:Ce,width:Ce,maxWidth:Ce,height:Ce,maxHeight:Ce,top:Ce,right:Ce,bottom:Ce,left:Ce,padding:Ce,paddingTop:Ce,paddingRight:Ce,paddingBottom:Ce,paddingLeft:Ce,margin:Ce,marginTop:Ce,marginRight:Ce,marginBottom:Ce,marginLeft:Ce,backgroundPositionX:Ce,backgroundPositionY:Ce},nB={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:Pc,scaleX:Pc,scaleY:Pc,scaleZ:Pc,skew:wo,skewX:wo,skewY:wo,distance:Ce,translateX:Ce,translateY:Ce,translateZ:Ce,x:Ce,y:Ce,z:Ce,perspective:Ce,transformPerspective:Ce,opacity:xl,originX:h1,originY:h1,originZ:Ce},y1={...oa,transform:Math.round},kg={...tB,...nB,zIndex:y1,size:Ce,fillOpacity:xl,strokeOpacity:xl,numOctaves:y1},rB={...kg,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:np,WebkitFilter:np},Tg=e=>rB[e];function NA(e,t){let n=Tg(e);return n!==np&&(n=Qo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const oB=new Set(["auto","none","0"]);function sB(e,t,n){let r=0,o;for(;r<e.length&&!o;){const s=e[r];typeof s=="string"&&!oB.has(s)&&vl(s).values.length&&(o=e[r]),r++}if(o&&n)for(const s of t)e[s]=NA(n,o)}class IA extends Dg{constructor(t,n,r,o,s){super(t,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),bg(c))){const u=SA(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!j_.has(r)||t.length!==2)return;const[o,s]=t,i=x1(o),a=x1(s);if(i!==a)if(p1(i)&&p1(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)k_(t[o])&&r.push(o);r.length&&sB(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ui[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=o.length-1,a=o[i];o[i]=Ui[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Rg(e){return typeof e=="function"}let Qc;function iB(){Qc=void 0}const $r={now:()=>(Qc===void 0&&$r.set(Qt.isProcessing||C_.useManualTiming?Qt.timestamp:performance.now()),Qc),set:e=>{Qc=e,queueMicrotask(iB)}},w1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qo.test(e)||e==="0")&&!e.startsWith("url("));function aB(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function lB(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],i=w1(o,t),a=w1(s,t);return!i||!a?!1:aB(e)||(n==="spring"||Rg(n))&&r}const cB=40;class jA{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$r.now(),this.options={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>cB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$_(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=$r.now(),this.hasAttemptedResolve=!0;const{name:r,type:o,velocity:s,delay:i,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!lB(t,r,o,s))if(i)this.options.duration=0;else{l==null||l(Md(t,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,n);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Hi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},_A=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let s=0;s<o;s++)r+=e(Hi(0,o-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function BA(e,t){return t?e*(1e3/t):0}const uB=5;function LA(e,t,n){const r=Math.max(t-uB,0);return BA(n-e(r),t-r)}const Tt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},A0=.001;function dB({duration:e=Tt.duration,bounce:t=Tt.bounce,velocity:n=Tt.velocity,mass:r=Tt.mass}){let o,s,i=1-t;i=co(Tt.minDamping,Tt.maxDamping,i),e=co(Tt.minDuration,Tt.maxDuration,to(e)),i<1?(o=c=>{const u=c*i,d=u*e,f=u-n,m=rp(c,i),g=Math.exp(-d);return A0-f/m*g},s=c=>{const d=c*i*e,f=d*n+n,m=Math.pow(i,2)*Math.pow(c,2)*e,g=Math.exp(-d),w=rp(Math.pow(c,2),i);return(-o(c)+A0>0?-1:1)*((f-m)*g)/w}):(o=c=>{const u=Math.exp(-c*e),d=(c-n)*e+1;return-A0+u*d},s=c=>{const u=Math.exp(-c*e),d=(n-c)*(e*e);return u*d});const a=5/e,l=hB(o,s,a);if(e=eo(e),isNaN(l))return{stiffness:Tt.stiffness,damping:Tt.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:e}}}const fB=12;function hB(e,t,n){let r=n;for(let o=1;o<fB;o++)r=r-e(r)/t(r);return r}function rp(e,t){return e*Math.sqrt(1-t*t)}const op=2e4;function OA(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<op;)t+=n,r=e.next(t);return t>=op?1/0:t}const pB=["duration","bounce"],mB=["stiffness","damping","mass"];function C1(e,t){return t.some(n=>e[n]!==void 0)}function gB(e){let t={velocity:Tt.velocity,stiffness:Tt.stiffness,damping:Tt.damping,mass:Tt.mass,isResolvedFromDuration:!1,...e};if(!C1(e,mB)&&C1(e,pB))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,s=2*co(.05,1,1-e.bounce)*Math.sqrt(o);t={...t,mass:Tt.mass,stiffness:o,damping:s}}else{const n=dB(e);t={...t,...n,mass:Tt.mass},t.isResolvedFromDuration=!0}return t}function $A(e=Tt.visualDuration,t=Tt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:m}=gB({...n,velocity:-to(n.velocity||0)}),g=f||0,w=c/(2*Math.sqrt(l*u)),C=i-s,v=to(Math.sqrt(l/u)),x=Math.abs(C)<5;r||(r=x?Tt.restSpeed.granular:Tt.restSpeed.default),o||(o=x?Tt.restDelta.granular:Tt.restDelta.default);let y;if(w<1){const b=rp(v,w);y=D=>{const A=Math.exp(-w*v*D);return i-A*((g+w*v*C)/b*Math.sin(b*D)+C*Math.cos(b*D))}}else if(w===1)y=b=>i-Math.exp(-v*b)*(C+(g+v*C)*b);else{const b=v*Math.sqrt(w*w-1);y=D=>{const A=Math.exp(-w*v*D),P=Math.min(b*D,300);return i-A*((g+w*v*C)*Math.sinh(P)+b*C*Math.cosh(P))/b}}const E={calculatedDuration:m&&d||null,next:b=>{const D=y(b);if(m)a.done=b>=d;else{let A=0;w<1&&(A=b===0?eo(g):LA(y,b,D));const P=Math.abs(A)<=r,R=Math.abs(i-D)<=o;a.done=P&&R}return a.value=a.done?i:D,a},toString:()=>{const b=Math.min(OA(E),op),D=_A(A=>E.next(b*A).value,b,30);return b+"ms "+D}};return E}function E1({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],f={done:!1,value:d},m=P=>a!==void 0&&P<a||l!==void 0&&P>l,g=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let w=n*t;const C=d+w,v=i===void 0?C:i(C);v!==C&&(w=v-d);const x=P=>-w*Math.exp(-P/r),y=P=>v+x(P),E=P=>{const R=x(P),k=y(P);f.done=Math.abs(R)<=c,f.value=f.done?v:k};let b,D;const A=P=>{m(f.value)&&(b=P,D=$A({keyframes:[f.value,g(f.value)],velocity:LA(y,P,f.value),damping:o,stiffness:s,restDelta:c,restSpeed:u}))};return A(0),{calculatedDuration:null,next:P=>{let R=!1;return!D&&b===void 0&&(R=!0,E(P),A(P)),b!==void 0&&P>=b?D.next(P-b):(!R&&E(P),f)}}}const xB=zl(.42,0,1,1),vB=zl(0,0,.58,1),zA=zl(.42,0,.58,1),yB=e=>Array.isArray(e)&&typeof e[0]!="number",Fg=e=>Array.isArray(e)&&typeof e[0]=="number",S1={linear:hn,easeIn:xB,easeInOut:zA,easeOut:vB,circIn:Sg,circInOut:vA,circOut:xA,backIn:Eg,backInOut:mA,backOut:pA,anticipate:gA},b1=e=>{if(Fg(e)){Qh(e.length===4);const[t,n,r,o]=e;return zl(t,n,r,o)}else if(typeof e=="string")return Qh(S1[e]!==void 0),S1[e];return e},wB=(e,t)=>n=>t(e(n)),Ho=(...e)=>e.reduce(wB),St=(e,t,n)=>e+(t-e)*n;function P0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function CB({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,s=0,i=0;if(!t)o=s=i=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=P0(l,a,e+1/3),s=P0(l,a,e),i=P0(l,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function Iu(e,t){return n=>n>0?t:e}const k0=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},EB=[tp,ms,si],SB=e=>EB.find(t=>t.test(e));function D1(e){const t=SB(e);if(!t)return!1;let n=t.parse(e);return t===si&&(n=CB(n)),n}const A1=(e,t)=>{const n=D1(e),r=D1(t);if(!n||!r)return Iu(e,t);const o={...n};return s=>(o.red=k0(n.red,r.red,s),o.green=k0(n.green,r.green,s),o.blue=k0(n.blue,r.blue,s),o.alpha=St(n.alpha,r.alpha,s),ms.transform(o))},sp=new Set(["none","hidden"]);function bB(e,t){return sp.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function DB(e,t){return n=>St(e,t,n)}function Mg(e){return typeof e=="number"?DB:typeof e=="string"?bg(e)?Iu:un.test(e)?A1:kB:Array.isArray(e)?VA:typeof e=="object"?un.test(e)?A1:AB:Iu}function VA(e,t){const n=[...e],r=n.length,o=e.map((s,i)=>Mg(s)(s,t[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function AB(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=Mg(e[o])(e[o],t[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function PB(e,t){var n;const r=[],o={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][o[i]],l=(n=e.values[a])!==null&&n!==void 0?n:0;r[s]=l,o[i]++}return r}const kB=(e,t)=>{const n=Qo.createTransformer(t),r=vl(e),o=vl(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?sp.has(e)&&!o.values.length||sp.has(t)&&!r.values.length?bB(e,t):Ho(VA(PB(r,o),o.values),n):Iu(e,t)};function UA(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?St(e,t,n):Mg(e)(e,t)}function TB(e,t,n){const r=[],o=n||UA,s=e.length-1;for(let i=0;i<s;i++){let a=o(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||hn:t;a=Ho(l,a)}r.push(a)}return r}function RB(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const s=e.length;if(Qh(s===t.length),s===1)return()=>t[0];if(s===2&&e[0]===e[1])return()=>t[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=TB(t,r,o),a=i.length,l=c=>{let u=0;if(a>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const d=Hi(e[u],e[u+1],c);return i[u](d)};return n?c=>l(co(e[0],e[s-1],c)):l}function FB(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Hi(0,t,r);e.push(St(n,1,o))}}function MB(e){const t=[0];return FB(t,e.length-1),t}function NB(e,t){return e.map(n=>n*t)}function IB(e,t){return e.map(()=>t||zA).splice(0,e.length-1)}function ju({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=yB(r)?r.map(b1):b1(r),s={done:!1,value:t[0]},i=NB(n&&n.length===t.length?n:MB(t),e),a=RB(i,t,{ease:Array.isArray(o)?o:IB(t,o)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const jB=e=>{const t=({timestamp:n})=>e(n);return{start:()=>tt.update(t,!0),stop:()=>Xo(t),now:()=>Qt.isProcessing?Qt.timestamp:$r.now()}},_B={decay:E1,inertia:E1,tween:ju,keyframes:ju,spring:$A},BB=e=>e/100;class Ng extends jA{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:o,keyframes:s}=this.options,i=(o==null?void 0:o.KeyframeResolver)||Dg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new i(s,a,n,r,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=this.options,a=Rg(n)?n:_B[n]||ju;let l,c;a!==ju&&typeof t[0]!="number"&&(l=Ho(BB,UA(t[0],t[1])),t=[0,100]);const u=a({...this.options,keyframes:t});s==="mirror"&&(c=a({...this.options,keyframes:[...t].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=OA(u));const{calculatedDuration:d}=u,f=d+o,m=f*(r+1)-o;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:o,generator:s,mirroredGenerator:i,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:m,repeatType:g,repeatDelay:w,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let y=this.currentTime,E=s;if(m){const P=Math.min(this.currentTime,u)/d;let R=Math.floor(P),k=P%1;!k&&P>=1&&(k=1),k===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(g==="reverse"?(k=1-k,w&&(k-=w/d)):g==="mirror"&&(E=i)),y=co(0,1,k)*d}const b=x?{done:!1,value:l[0]}:E.next(y);a&&(b.value=a(b.value));let{done:D}=b;!x&&c!==null&&(D=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return A&&o!==void 0&&(b.value=Md(l,this.options,o)),C&&C(b.value),A&&this.finish(),b}get duration(){const{resolved:t}=this;return t?to(t.calculatedDuration):0}get time(){return to(this.currentTime)}set time(t){t=eo(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=to(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=jB,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const LB=new Set(["opacity","clipPath","filter","transform"]);function Ig(e){let t;return()=>(t===void 0&&(t=e()),t)}const OB={linearEasing:void 0};function $B(e,t){const n=Ig(e);return()=>{var r;return(r=OB[t])!==null&&r!==void 0?r:n()}}const _u=$B(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function HA(e){return!!(typeof e=="function"&&_u()||!e||typeof e=="string"&&(e in ip||_u())||Fg(e)||Array.isArray(e)&&e.every(HA))}const Pa=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,ip={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pa([0,.65,.55,1]),circOut:Pa([.55,0,1,.45]),backIn:Pa([.31,.01,.66,-.59]),backOut:Pa([.33,1.53,.69,.99])};function WA(e,t){if(e)return typeof e=="function"&&_u()?_A(e,t):Fg(e)?Pa(e):Array.isArray(e)?e.map(n=>WA(n,t)||ip.easeOut):ip[e]}function zB(e,t,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const u=WA(a,o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"})}function P1(e,t){e.timeline=t,e.onfinish=null}const VB=Ig(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Bu=10,UB=2e4;function HB(e){return Rg(e.type)||e.type==="spring"||!HA(e.ease)}function WB(e,t){const n=new Ng({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const o=[];let s=0;for(;!r.done&&s<UB;)r=n.sample(s),o.push(r.value),s+=Bu;return{times:void 0,keyframes:o,duration:s-Bu,ease:"linear"}}const KA={anticipate:gA,backInOut:mA,circInOut:vA};function KB(e){return e in KA}class k1 extends jA{constructor(t){super(t);const{name:n,motionValue:r,element:o,keyframes:s}=this.options;this.resolver=new IA(s,(i,a)=>this.onKeyframesResolved(i,a),n,r,o),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:o=300,times:s,ease:i,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof i=="string"&&_u()&&KB(i)&&(i=KA[i]),HB(this.options)){const{onComplete:f,onUpdate:m,motionValue:g,element:w,...C}=this.options,v=WB(t,C);t=v.keyframes,t.length===1&&(t[1]=t[0]),o=v.duration,s=v.times,i=v.ease,a="keyframes"}const d=zB(l.owner.current,c,t,{...this.options,duration:o,times:s,ease:i});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(P1(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(Md(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:o,times:s,type:a,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return to(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return to(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=eo(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return hn;const{animation:r}=n;P1(r,t)}return hn}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:o,type:s,ease:i,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...m}=this.options,g=new Ng({...m,keyframes:r,duration:o,type:s,ease:i,times:a,isGenerator:!0}),w=eo(this.time);c.setWithVelocity(g.sample(w-Bu).value,g.sample(w).value,Bu)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:o,repeatType:s,damping:i,type:a}=t;return VB()&&r&&LB.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!o&&s!=="mirror"&&i!==0&&a!=="inertia"}}const JB=Ig(()=>window.ScrollTimeline!==void 0);class GB{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(o=>JB()&&o.attachTimeline?o.attachTimeline(t):n(o));return()=>{r.forEach((o,s)=>{o&&o(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function qB({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const jg=(e,t,n,r={},o,s)=>i=>{const a=Cg(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-eo(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:o};qB(a)||(u={...u,...w_(e,u)}),u.duration&&(u.duration=eo(u.duration)),u.repeatDelay&&(u.repeatDelay=eo(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&t.get()!==void 0){const f=Md(u.keyframes,a);if(f!==void 0)return tt.update(()=>{u.onUpdate(f),u.onComplete()}),new GB([])}return!s&&k1.supports(u)?new k1(u):new Ng(u)},YB=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),XB=e=>Xh(e)?e[e.length-1]||0:e;function _g(e,t){e.indexOf(t)===-1&&e.push(t)}function Bg(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Lg{constructor(){this.subscriptions=[]}add(t){return _g(this.subscriptions,t),()=>Bg(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const T1=30,QB=e=>!isNaN(parseFloat(e));class ZB{constructor(t,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{const s=$r.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=$r.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=QB(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Lg);const r=this.events[t].add(n);return t==="change"?()=>{r(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=$r.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>T1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,T1);return BA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yl(e,t){return new ZB(e,t)}function eL(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,yl(n))}function tL(e,t){const n=Fd(e,t);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=XB(s[i]);eL(e,i,a)}}const Og=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nL="framerAppearId",JA="data-"+Og(nL);function GA(e){return e.props[JA]}const fn=e=>!!(e&&e.getVelocity);function rL(e){return!!(fn(e)&&e.add)}function ap(e,t){const n=e.getValue("willChange");if(rL(n))return n.add(t)}function oL({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function qA(e,t,{delay:n=0,transitionOverride:r,type:o}={}){var s;let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(i=r);const c=[],u=o&&e.animationState&&e.animationState.getState()[o];for(const d in l){const f=e.getValue(d,(s=e.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||u&&oL(u,d))continue;const g={delay:n,...Cg(i||{},d)};let w=!1;if(window.MotionHandoffAnimation){const v=GA(e);if(v){const x=window.MotionHandoffAnimation(v,d,tt);x!==null&&(g.startTime=x,w=!0)}}ap(e,d),f.start(jg(d,f,m,e.shouldReduceMotion&&$s.has(d)?{type:!1}:g,e,w));const C=f.animation;C&&c.push(C)}return a&&Promise.all(c).then(()=>{tt.update(()=>{a&&tL(e,a)})}),c}function lp(e,t,n={}){var r;const o=Fd(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(s=n.transitionOverride);const i=o?()=>Promise.all(qA(e,o,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return sL(e,t,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function sL(e,t,n=0,r=0,o=1,s){const i=[],a=(e.variantChildren.size-1)*r,l=o===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(e.variantChildren).sort(iL).forEach((c,u)=>{c.notify("AnimationStart",t),i.push(lp(c,t,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(i)}function iL(e,t){return e.sortNodePosition(t)}function aL(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(s=>lp(e,s,n));r=Promise.all(o)}else if(typeof t=="string")r=lp(e,t,n);else{const o=typeof t=="function"?Fd(e,t,n.custom):t;r=Promise.all(qA(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const lL=wg.length;function YA(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?YA(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<lL;n++){const r=wg[n],o=e.props[r];(gl(o)||o===!1)&&(t[r]=o)}return t}const cL=[...yg].reverse(),uL=yg.length;function dL(e){return t=>Promise.all(t.map(({animation:n,options:r})=>aL(e,n,r)))}function fL(e){let t=dL(e),n=R1(),r=!0;const o=l=>(c,u)=>{var d;const f=Fd(e,u,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:g,...w}=f;c={...c,...w,...g}}return c};function s(l){t=l(e)}function i(l){const{props:c}=e,u=YA(e.parent)||{},d=[],f=new Set;let m={},g=1/0;for(let C=0;C<uL;C++){const v=cL[C],x=n[v],y=c[v]!==void 0?c[v]:u[v],E=gl(y),b=v===l?x.isActive:null;b===!1&&(g=C);let D=y===u[v]&&y!==c[v]&&E;if(D&&r&&e.manuallyAnimateOnMount&&(D=!1),x.protectedKeys={...m},!x.isActive&&b===null||!y&&!x.prevProp||Rd(y)||typeof y=="boolean")continue;const A=hL(x.prevProp,y);let P=A||v===l&&x.isActive&&!D&&E||C>g&&E,R=!1;const k=Array.isArray(y)?y:[y];let T=k.reduce(o(v),{});b===!1&&(T={});const{prevResolvedValues:F={}}=x,_={...F,...T},O=B=>{P=!0,f.has(B)&&(R=!0,f.delete(B)),x.needsAnimating[B]=!0;const M=e.getValue(B);M&&(M.liveStyle=!1)};for(const B in _){const M=T[B],I=F[B];if(m.hasOwnProperty(B))continue;let U=!1;Xh(M)&&Xh(I)?U=!cA(M,I):U=M!==I,U?M!=null?O(B):f.add(B):M!==void 0&&f.has(B)?O(B):x.protectedKeys[B]=!0}x.prevProp=y,x.prevResolvedValues=T,x.isActive&&(m={...m,...T}),r&&e.blockInitialAnimation&&(P=!1),P&&(!(D&&A)||R)&&d.push(...k.map(B=>({animation:B,options:{type:v}})))}if(f.size){const C={};f.forEach(v=>{const x=e.getBaseTarget(v),y=e.getValue(v);y&&(y.liveStyle=!0),C[v]=x??null}),d.push({animation:C})}let w=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const d=i(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=R1(),r=!0}}}function hL(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!cA(t,e):!1}function as(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function R1(){return{animate:as(!0),whileInView:as(),whileHover:as(),whileTap:as(),whileDrag:as(),whileFocus:as(),exit:as()}}class is{constructor(t){this.isMounted=!1,this.node=t}update(){}}class pL extends is{constructor(t){super(t),t.animationState||(t.animationState=fL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Rd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let mL=0;class gL extends is{constructor(){super(...arguments),this.id=mL++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const xL={animation:{Feature:pL},exit:{Feature:gL}};function vL(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let o=document;const s=(r=void 0)!==null&&r!==void 0?r:o.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const hr={x:!1,y:!1};function XA(){return hr.x||hr.y}function F1(e){return t=>{t.pointerType==="touch"||XA()||e(t)}}function yL(e,t,n={}){const r=new AbortController,o={passive:!0,...n,signal:r.signal},s=F1(i=>{const{target:a}=i,l=t(i);if(!l||!a)return;const c=F1(u=>{l(u),a.removeEventListener("pointerleave",c)});a.addEventListener("pointerleave",c,o)});return vL(e).forEach(i=>{i.addEventListener("pointerenter",s,o)}),()=>r.abort()}function wL(e){return e==="x"||e==="y"?hr[e]?null:(hr[e]=!0,()=>{hr[e]=!1}):hr.x||hr.y?null:(hr.x=hr.y=!0,()=>{hr.x=hr.y=!1})}const QA=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Ul(e){return{point:{x:e.pageX,y:e.pageY}}}const CL=e=>t=>QA(t)&&e(t,Ul(t));function Qr(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Wo(e,t,n,r){return Qr(e,t,CL(n),r)}const M1=(e,t)=>Math.abs(e-t);function EL(e,t){const n=M1(e.x,t.x),r=M1(e.y,t.y);return Math.sqrt(n**2+r**2)}class ZA{constructor(t,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=R0(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=EL(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:g}=d,{timestamp:w}=Qt;this.history.push({...g,timestamp:w});const{onStart:C,onMove:v}=this.handlers;f||(C&&C(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=T0(f,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=R0(d.type==="pointercancel"?this.lastMoveEventInfo:T0(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,C),g&&g(d,C)},!QA(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=Ul(t),a=T0(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=Qt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(t,R0(a,this.history)),this.removeListeners=Ho(Wo(this.contextWindow,"pointermove",this.handlePointerMove),Wo(this.contextWindow,"pointerup",this.handlePointerUp),Wo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xo(this.updatePoint)}}function T0(e,t){return t?{point:t(e.point)}:e}function N1(e,t){return{x:e.x-t.x,y:e.y-t.y}}function R0({point:e},t){return{point:e,delta:N1(e,eP(t)),offset:N1(e,SL(t)),velocity:bL(t,.1)}}function SL(e){return e[0]}function eP(e){return e[e.length-1]}function bL(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=eP(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>eo(t)));)n--;if(!r)return{x:0,y:0};const s=to(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function ii(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const tP=1e-4,DL=1-tP,AL=1+tP,nP=.01,PL=0-nP,kL=0+nP;function Kn(e){return e.max-e.min}function TL(e,t,n){return Math.abs(e-t)<=n}function I1(e,t,n,r=.5){e.origin=r,e.originPoint=St(t.min,t.max,e.origin),e.scale=Kn(n)/Kn(t),e.translate=St(n.min,n.max,e.origin)-e.originPoint,(e.scale>=DL&&e.scale<=AL||isNaN(e.scale))&&(e.scale=1),(e.translate>=PL&&e.translate<=kL||isNaN(e.translate))&&(e.translate=0)}function Ha(e,t,n,r){I1(e.x,t.x,n.x,r?r.originX:void 0),I1(e.y,t.y,n.y,r?r.originY:void 0)}function j1(e,t,n){e.min=n.min+t.min,e.max=e.min+Kn(t)}function RL(e,t,n){j1(e.x,t.x,n.x),j1(e.y,t.y,n.y)}function _1(e,t,n){e.min=t.min-n.min,e.max=e.min+Kn(t)}function Wa(e,t,n){_1(e.x,t.x,n.x),_1(e.y,t.y,n.y)}function FL(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?St(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?St(n,e,r.max):Math.min(e,n)),e}function B1(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ML(e,{top:t,left:n,bottom:r,right:o}){return{x:B1(e.x,n,o),y:B1(e.y,t,r)}}function L1(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function NL(e,t){return{x:L1(e.x,t.x),y:L1(e.y,t.y)}}function IL(e,t){let n=.5;const r=Kn(e),o=Kn(t);return o>r?n=Hi(t.min,t.max-r,e.min):r>o&&(n=Hi(e.min,e.max-o,t.min)),co(0,1,n)}function jL(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const cp=.35;function _L(e=cp){return e===!1?e=0:e===!0&&(e=cp),{x:O1(e,"left","right"),y:O1(e,"top","bottom")}}function O1(e,t,n){return{min:$1(e,t),max:$1(e,n)}}function $1(e,t){return typeof e=="number"?e:e[t]||0}const z1=()=>({translate:0,scale:1,origin:0,originPoint:0}),ai=()=>({x:z1(),y:z1()}),V1=()=>({min:0,max:0}),Nt=()=>({x:V1(),y:V1()});function Zn(e){return[e("x"),e("y")]}function rP({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function BL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function LL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function F0(e){return e===void 0||e===1}function up({scale:e,scaleX:t,scaleY:n}){return!F0(e)||!F0(t)||!F0(n)}function us(e){return up(e)||oP(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function oP(e){return U1(e.x)||U1(e.y)}function U1(e){return e&&e!=="0%"}function Lu(e,t,n){const r=e-n,o=t*r;return n+o}function H1(e,t,n,r,o){return o!==void 0&&(e=Lu(e,o,r)),Lu(e,n,r)+t}function dp(e,t=0,n=1,r,o){e.min=H1(e.min,t,n,r,o),e.max=H1(e.max,t,n,r,o)}function sP(e,{x:t,y:n}){dp(e.x,t.translate,t.scale,t.originPoint),dp(e.y,n.translate,n.scale,n.originPoint)}const W1=.999999999999,K1=1.0000000000001;function OL(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ci(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,sP(e,i)),r&&us(s.latestValues)&&ci(e,s.latestValues))}t.x<K1&&t.x>W1&&(t.x=1),t.y<K1&&t.y>W1&&(t.y=1)}function li(e,t){e.min=e.min+t,e.max=e.max+t}function J1(e,t,n,r,o=.5){const s=St(e.min,e.max,o);dp(e,t,n,s,r)}function ci(e,t){J1(e.x,t.x,t.scaleX,t.scale,t.originX),J1(e.y,t.y,t.scaleY,t.scale,t.originY)}function iP(e,t){return rP(LL(e.getBoundingClientRect(),t))}function $L(e,t,n){const r=iP(e,n),{scroll:o}=t;return o&&(li(r.x,o.offset.x),li(r.y,o.offset.y)),r}const aP=({current:e})=>e?e.ownerDocument.defaultView:null,zL=new WeakMap;class VL{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ul(u).point)},s=(u,d)=>{const{drag:f,dragPropagation:m,onDragStart:g}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wL(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(C=>{let v=this.getAxisMotionValue(C).get()||0;if(Or.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const y=x.layout.layoutBox[C];y&&(v=Kn(y)*(parseFloat(v)/100))}}this.originPoint[C]=v}),g&&tt.postRender(()=>g(u,d)),ap(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},i=(u,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:g,onDrag:w}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:C}=d;if(m&&this.currentDirection===null){this.currentDirection=UL(C),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,C),this.updateAxis("y",d.point,C),this.visualElement.render(),w&&w(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Zn(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new ZA(t,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:aP(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&tt.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!kc(t,o,this.currentDirection))return;const s=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=FL(i,this.constraints[t],this.elastic[t])),s.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&ii(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=ML(o.layoutBox,n):this.constraints=!1,this.elastic=_L(r),s!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Zn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=jL(o.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ii(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=$L(r,o.root,this.visualElement.getTransformPagePoint());let i=NL(o.layout.layoutBox,s);if(n){const a=n(BL(i));this.hasMutatedConstraints=!!a,a&&(i=rP(a))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Zn(u=>{if(!kc(u,n,this.currentDirection))return;let d=l&&l[u]||{};i&&(d={min:0,max:0});const f=o?200:1e6,m=o?40:1e7,g={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return ap(this.visualElement,t),r.start(jg(t,r,0,n,this.visualElement,!1))}stopAnimation(){Zn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Zn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Zn(n=>{const{drag:r}=this.getProps();if(!kc(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(t[n]-St(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ii(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Zn(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=IL({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zn(i=>{if(!kc(i,t,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(St(l,c,o[i]))})}addListeners(){if(!this.visualElement.current)return;zL.set(this.visualElement,this);const t=this.visualElement.current,n=Wo(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ii(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),tt.read(r);const i=Qr(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Zn(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=cp,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function kc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function UL(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class HL extends is{constructor(t){super(t),this.removeGroupControls=hn,this.removeListeners=hn,this.controls=new VL(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hn}unmount(){this.removeGroupControls(),this.removeListeners()}}const G1=e=>(t,n)=>{e&&tt.postRender(()=>e(t,n))};class WL extends is{constructor(){super(...arguments),this.removePointerDownListener=hn}onPointerDown(t){this.session=new ZA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:G1(t),onStart:G1(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&tt.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=Wo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nd=h.createContext(null);function KL(){const e=h.useContext(Nd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,o=h.useId();h.useEffect(()=>r(o),[]);const s=h.useCallback(()=>n&&n(o),[o,n]);return!t&&n?[!1,s]:[!0]}const $g=h.createContext({}),lP=h.createContext({}),Zc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function q1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const wa={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ce.test(e))e=parseFloat(e);else return e;const n=q1(e,t.target.x),r=q1(e,t.target.y);return`${n}% ${r}%`}},JL={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=Qo.parse(e);if(o.length>5)return r;const s=Qo.createTransformer(e),i=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;o[0+i]/=a,o[1+i]/=l;const c=St(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=c),typeof o[3+i]=="number"&&(o[3+i]/=c),s(o)}},Ou={};function GL(e){Object.assign(Ou,e)}const{schedule:zg,cancel:O7}=uA(queueMicrotask,!1);class qL extends h.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=t;GL(YL),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Zc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,i=r.projection;return i&&(i.isPresent=s,o||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?i.promote():i.relegate()||tt.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),zg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cP(e){const[t,n]=KL(),r=h.useContext($g);return p.jsx(qL,{...e,layoutGroup:r,switchLayoutGroup:h.useContext(lP),isPresent:t,safeToRemove:n})}const YL={borderRadius:{...wa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wa,borderTopRightRadius:wa,borderBottomLeftRadius:wa,borderBottomRightRadius:wa,boxShadow:JL},uP=["TopLeft","TopRight","BottomLeft","BottomRight"],XL=uP.length,Y1=e=>typeof e=="string"?parseFloat(e):e,X1=e=>typeof e=="number"||Ce.test(e);function QL(e,t,n,r,o,s){o?(e.opacity=St(0,n.opacity!==void 0?n.opacity:1,ZL(r)),e.opacityExit=St(t.opacity!==void 0?t.opacity:1,0,eO(r))):s&&(e.opacity=St(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<XL;i++){const a=`border${uP[i]}Radius`;let l=Q1(t,a),c=Q1(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||X1(l)===X1(c)?(e[a]=Math.max(St(Y1(l),Y1(c),r),0),(Or.test(c)||Or.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=St(t.rotate||0,n.rotate||0,r))}function Q1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const ZL=dP(0,.5,xA),eO=dP(.5,.95,hn);function dP(e,t,n){return r=>r<e?0:r>t?1:n(Hi(e,t,r))}function Z1(e,t){e.min=t.min,e.max=t.max}function Qn(e,t){Z1(e.x,t.x),Z1(e.y,t.y)}function ew(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function tw(e,t,n,r,o){return e-=t,e=Lu(e,1/n,r),o!==void 0&&(e=Lu(e,1/o,r)),e}function tO(e,t=0,n=1,r=.5,o,s=e,i=e){if(Or.test(t)&&(t=parseFloat(t),t=St(i.min,i.max,t/100)-i.min),typeof t!="number")return;let a=St(s.min,s.max,r);e===s&&(a-=t),e.min=tw(e.min,t,n,a,o),e.max=tw(e.max,t,n,a,o)}function nw(e,t,[n,r,o],s,i){tO(e,t[n],t[r],t[o],t.scale,s,i)}const nO=["x","scaleX","originX"],rO=["y","scaleY","originY"];function rw(e,t,n,r){nw(e.x,t,nO,n?n.x:void 0,r?r.x:void 0),nw(e.y,t,rO,n?n.y:void 0,r?r.y:void 0)}function ow(e){return e.translate===0&&e.scale===1}function fP(e){return ow(e.x)&&ow(e.y)}function sw(e,t){return e.min===t.min&&e.max===t.max}function oO(e,t){return sw(e.x,t.x)&&sw(e.y,t.y)}function iw(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function hP(e,t){return iw(e.x,t.x)&&iw(e.y,t.y)}function aw(e){return Kn(e.x)/Kn(e.y)}function lw(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class sO{constructor(){this.members=[]}add(t){_g(this.members,t),t.scheduleRender()}remove(t){if(Bg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iO(e,t,n){let r="";const o=e.x.translate/t.x,s=e.y.translate/t.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:m,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const aO=(e,t)=>e.depth-t.depth;class lO{constructor(){this.children=[],this.isDirty=!1}add(t){_g(this.children,t),this.isDirty=!0}remove(t){Bg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(aO),this.isDirty=!1,this.children.forEach(t)}}function eu(e){const t=fn(e)?e.get():e;return YB(t)?t.toValue():t}function cO(e,t){const n=$r.now(),r=({timestamp:o})=>{const s=o-n;s>=t&&(Xo(r),e(s-t))};return tt.read(r,!0),()=>Xo(r)}function uO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function dO(e,t,n){const r=fn(e)?e:yl(e);return r.start(jg("",r,t,n)),r.animation}const ds={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ka=typeof window<"u"&&window.MotionDebug!==void 0,M0=["","X","Y","Z"],fO={visibility:"hidden"},cw=1e3;let hO=0;function N0(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function pP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=GA(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",tt,!(o||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&pP(r)}function mP({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=t==null?void 0:t()){this.id=hO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ka&&(ds.totalNodes=ds.resolvedTargetDeltas=ds.recalculatedProjection=0),this.nodes.forEach(gO),this.nodes.forEach(CO),this.nodes.forEach(EO),this.nodes.forEach(xO),ka&&window.MotionDebug.record(ds)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new lO)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Lg),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uO(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=cO(f,250),Zc.hasAnimatedSinceResize&&(Zc.hasAnimatedSinceResize=!1,this.nodes.forEach(dw))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||PO,{onLayoutAnimationStart:C,onLayoutAnimationComplete:v}=u.getProps(),x=!this.targetLayout||!hP(this.targetLayout,g)||m,y=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,y);const E={...Cg(w,"layout"),onPlay:C,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||dw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SO),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uw);return}this.isUpdating||this.nodes.forEach(yO),this.isUpdating=!1,this.nodes.forEach(wO),this.nodes.forEach(pO),this.nodes.forEach(mO),this.clearAllSnapshots();const a=$r.now();Qt.delta=co(0,1e3/60,a-Qt.timestamp),Qt.timestamp=a,Qt.isProcessing=!0,b0.update.process(Qt),b0.preRender.process(Qt),b0.render.process(Qt),Qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vO),this.sharedNodes.forEach(bO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!fP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;i&&(a||us(this.latestValues)||u)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),kO(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:a}=this.options;if(!a)return Nt();const l=a.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(TO))){const{scroll:u}=this.root;u&&(li(l.x,u.offset.x),li(l.y,u.offset.y))}return l}removeElementScroll(i){var a;const l=Nt();if(Qn(l,i),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Qn(l,i),li(l.x,d.offset.x),li(l.y,d.offset.y))}return l}applyTransform(i,a=!1){const l=Nt();Qn(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ci(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),us(u.latestValues)&&ci(l,u.latestValues)}return us(this.latestValues)&&ci(l,this.latestValues),l}removeTransform(i){const a=Nt();Qn(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!us(c.latestValues))continue;up(c.latestValues)&&c.updateSnapshot();const u=Nt(),d=c.measurePageBox();Qn(u,d),rw(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return us(this.latestValues)&&rw(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Qt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Wa(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qn(this.target,this.layout.layoutBox),sP(this.target,this.targetDelta)):Qn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Wa(this.relativeTargetOrigin,this.target,m.target),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ka&&ds.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||up(this.parent.latestValues)||oP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Qt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Qn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;OL(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Nt());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ew(this.prevProjectionDelta.x,this.projectionDelta.x),ew(this.prevProjectionDelta.y,this.projectionDelta.y)),Ha(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!lw(this.projectionDelta.x,this.prevProjectionDelta.x)||!lw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),ka&&ds.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ai(),this.projectionDelta=ai(),this.projectionDeltaWithTransform=ai()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=ai();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Nt(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,w=m!==g,C=this.getStack(),v=!C||C.members.length<=1,x=!!(w&&!v&&this.options.crossfade===!0&&!this.path.some(AO));this.animationProgress=0;let y;this.mixTargetDelta=E=>{const b=E/1e3;fw(d.x,i.x,b),fw(d.y,i.y,b),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wa(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),DO(this.relativeTarget,this.relativeTargetOrigin,f,b),y&&oO(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Nt()),Qn(y,this.relativeTarget)),w&&(this.animationValues=u,QL(u,c,this.latestValues,b,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{Zc.hasAnimatedSinceResize=!0,this.currentAnimation=dO(0,cw,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&gP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Nt();const d=Kn(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+d;const f=Kn(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+f}Qn(a,l),ci(a,u),Ha(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new sO),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&N0("z",i,c,this.animationValues);for(let u=0;u<M0.length;u++)N0(`rotate${M0[u]}`,i,c,this.animationValues),N0(`skew${M0[u]}`,i,c,this.animationValues);i.render();for(const u in c)i.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);i.scheduleRender()}getProjectionStyles(i){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fO;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=eu(i==null?void 0:i.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=eu(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!us(this.latestValues)&&(w.transform=u?u({},""):"none",this.hasProjected=!1),w}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=iO(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in Ou){if(f[w]===void 0)continue;const{correct:C,applyTo:v}=Ou[w],x=c.transform==="none"?f[w]:C(f[w],d);if(v){const y=v.length;for(let E=0;E<y;E++)c[v[E]]=x}else c[w]=x}return this.options.layoutId&&(c.pointerEvents=d===this?eu(i==null?void 0:i.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(uw),this.root.sharedNodes.clear()}}}function pO(e){e.updateLayout()}function mO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;s==="size"?Zn(d=>{const f=i?n.measuredBox[d]:n.layoutBox[d],m=Kn(f);f.min=r[d].min,f.max=f.min+m}):gP(s,n.layoutBox,r)&&Zn(d=>{const f=i?n.measuredBox[d]:n.layoutBox[d],m=Kn(r[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const a=ai();Ha(a,r,n.layoutBox);const l=ai();i?Ha(l,e.applyTransform(o,!0),n.measuredBox):Ha(l,r,n.layoutBox);const c=!fP(a);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const g=Nt();Wa(g,n.layoutBox,f.layoutBox);const w=Nt();Wa(w,r,m.layoutBox),hP(g,w)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function gO(e){ka&&ds.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function xO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function vO(e){e.clearSnapshot()}function uw(e){e.clearMeasurements()}function yO(e){e.isLayoutDirty=!1}function wO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function dw(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function CO(e){e.resolveTargetDelta()}function EO(e){e.calcProjection()}function SO(e){e.resetSkewAndRotation()}function bO(e){e.removeLeadSnapshot()}function fw(e,t,n){e.translate=St(t.translate,0,n),e.scale=St(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function hw(e,t,n,r){e.min=St(t.min,n.min,r),e.max=St(t.max,n.max,r)}function DO(e,t,n,r){hw(e.x,t.x,n.x,r),hw(e.y,t.y,n.y,r)}function AO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const PO={duration:.45,ease:[.4,0,.1,1]},pw=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),mw=pw("applewebkit/")&&!pw("chrome/")?Math.round:hn;function gw(e){e.min=mw(e.min),e.max=mw(e.max)}function kO(e){gw(e.x),gw(e.y)}function gP(e,t,n){return e==="position"||e==="preserve-aspect"&&!TL(aw(t),aw(n),.2)}function TO(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const RO=mP({attachResizeListener:(e,t)=>Qr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),I0={current:void 0},xP=mP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!I0.current){const e=new RO({});e.mount(window),e.setOptions({layoutScroll:!0}),I0.current=e}return I0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),FO={pan:{Feature:WL},drag:{Feature:HL,ProjectionNode:xP,MeasureLayout:cP}};function xw(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n);const o=r[n?"onHoverStart":"onHoverEnd"];o&&tt.postRender(()=>o(t,Ul(t)))}class MO extends is{mount(){const{current:t,props:n}=this.node;t&&(this.unmount=yL(t,r=>(xw(this.node,r,!0),o=>xw(this.node,o,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class NO extends is{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ho(Qr(this.node.current,"focus",()=>this.onFocus()),Qr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const vP=(e,t)=>t?e===t?!0:vP(e,t.parentElement):!1;function j0(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ul(n))}class IO extends is{constructor(){super(...arguments),this.removeStartListeners=hn,this.removeEndListeners=hn,this.removeAccessibleListeners=hn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Wo(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps(),f=!d&&!vP(this.node.current,a.target)?u:c;f&&tt.update(()=>f(a,l))},{passive:!(r.onTap||r.onPointerUp)}),i=Wo(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ho(s,i),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const i=a=>{a.key!=="Enter"||!this.checkPressEnd()||j0("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&tt.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Qr(this.node.current,"keyup",i),j0("down",(a,l)=>{this.startPress(a,l)})},n=Qr(this.node.current,"keydown",t),r=()=>{this.isPressing&&j0("cancel",(s,i)=>this.cancelPress(s,i))},o=Qr(this.node.current,"blur",r);this.removeAccessibleListeners=Ho(n,o)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&tt.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!XA()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&tt.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Wo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Qr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ho(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const fp=new WeakMap,_0=new WeakMap,jO=e=>{const t=fp.get(e.target);t&&t(e)},_O=e=>{e.forEach(jO)};function BO({root:e,...t}){const n=e||document;_0.has(n)||_0.set(n,{});const r=_0.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(_O,{root:e,...t})),r[o]}function LO(e,t,n){const r=BO(t);return fp.set(e,n),r.observe(e),()=>{fp.delete(e),r.unobserve(e)}}const OO={some:0,all:1};class $O extends is{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:OO[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return LO(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(zO(t,n))&&this.startObserver()}unmount(){}}function zO({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const VO={inView:{Feature:$O},tap:{Feature:IO},focus:{Feature:NO},hover:{Feature:MO}},UO={layout:{ProjectionNode:xP,MeasureLayout:cP}},Vg=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Id=h.createContext({}),Ug=typeof window<"u",yP=Ug?h.useLayoutEffect:h.useEffect,wP=h.createContext({strict:!1});function HO(e,t,n,r,o){var s,i;const{visualElement:a}=h.useContext(Id),l=h.useContext(wP),c=h.useContext(Nd),u=h.useContext(Vg).reducedMotion,d=h.useRef();r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,m=h.useContext(lP);f&&!f.projection&&o&&(f.type==="html"||f.type==="svg")&&WO(d.current,n,o,m);const g=h.useRef(!1);h.useInsertionEffect(()=>{f&&g.current&&f.update(n,c)});const w=n[JA],C=h.useRef(!!w&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,w))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,w)));return yP(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),zg.render(f.render),C.current&&f.animationState&&f.animationState.animateChanges())}),h.useEffect(()=>{f&&(!C.current&&f.animationState&&f.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,w)}),C.current=!1))}),f}function WO(e,t,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:CP(e.parent)),e.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&ii(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function CP(e){if(e)return e.options.allowProjection!==!1?e.projection:CP(e.parent)}function KO(e,t,n){return h.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ii(n)&&(n.current=r))},[t])}function jd(e){return Rd(e.animate)||wg.some(t=>gl(e[t]))}function EP(e){return!!(jd(e)||e.variants)}function JO(e,t){if(jd(e)){const{initial:n,animate:r}=e;return{initial:n===!1||gl(n)?n:void 0,animate:gl(r)?r:void 0}}return e.inherit!==!1?t:{}}function GO(e){const{initial:t,animate:n}=JO(e,h.useContext(Id));return h.useMemo(()=>({initial:t,animate:n}),[vw(t),vw(n)])}function vw(e){return Array.isArray(e)?e.join(" "):e}const yw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wi={};for(const e in yw)Wi[e]={isEnabled:t=>yw[e].some(n=>!!t[n])};function qO(e){for(const t in e)Wi[t]={...Wi[t],...e[t]}}const YO=Symbol.for("motionComponentSymbol");function XO({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:o}){e&&qO(e);function s(a,l){let c;const u={...h.useContext(Vg),...a,layoutId:QO(a)},{isStatic:d}=u,f=GO(a),m=r(a,d);if(!d&&Ug){ZO();const g=e$(u);c=g.MeasureLayout,f.visualElement=HO(o,m,u,t,g.ProjectionNode)}return p.jsxs(Id.Provider,{value:f,children:[c&&f.visualElement?p.jsx(c,{visualElement:f.visualElement,...u}):null,n(o,a,KO(m,f.visualElement,l),m,d,f.visualElement)]})}const i=h.forwardRef(s);return i[YO]=o,i}function QO({layoutId:e}){const t=h.useContext($g).id;return t&&e!==void 0?t+"-"+e:e}function ZO(e,t){h.useContext(wP).strict}function e$(e){const{drag:t,layout:n}=Wi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const t$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hg(e){return typeof e!="string"||e.includes("-")?!1:!!(t$.indexOf(e)>-1||/[A-Z]/u.test(e))}function SP(e,{style:t,vars:n},r,o){Object.assign(e.style,t,o&&o.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const bP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function DP(e,t,n,r){SP(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(bP.has(o)?o:Og(o),t.attrs[o])}function AP(e,{layout:t,layoutId:n}){return $s.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ou[e]||e==="opacity")}function Wg(e,t,n){var r;const{style:o}=e,s={};for(const i in o)(fn(o[i])||t.style&&fn(t.style[i])||AP(i,e)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[i]=o[i]);return s}function PP(e,t,n){const r=Wg(e,t,n);for(const o in e)if(fn(e[o])||fn(t[o])){const s=$l.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=e[o]}return r}function Kg(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}function n$({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,o,s){const i={latestValues:r$(r,o,s,e),renderState:t()};return n&&(i.mount=a=>n(r,a,i)),i}const kP=e=>(t,n)=>{const r=h.useContext(Id),o=h.useContext(Nd),s=()=>n$(e,t,r,o);return n?s():Kg(s)};function r$(e,t,n,r){const o={},s=r(e,{});for(const f in s)o[f]=eu(s[f]);let{initial:i,animate:a}=e;const l=jd(e),c=EP(e);t&&c&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||i===!1;const d=u?a:i;if(d&&typeof d!="boolean"&&!Rd(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const g=vg(e,f[m]);if(g){const{transitionEnd:w,transition:C,...v}=g;for(const x in v){let y=v[x];if(Array.isArray(y)){const E=u?y.length-1:0;y=y[E]}y!==null&&(o[x]=y)}for(const x in w)o[x]=w[x]}}}return o}const Jg=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),TP=()=>({...Jg(),attrs:{}}),RP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,o$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s$=$l.length;function i$(e,t,n){let r="",o=!0;for(let s=0;s<s$;s++){const i=$l[s],a=e[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=RP(a,kg[i]);if(!l){o=!1;const u=o$[i]||i;r+=`${u}(${c}) `}n&&(t[i]=c)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function Gg(e,t,n){const{style:r,vars:o,transformOrigin:s}=e;let i=!1,a=!1;for(const l in t){const c=t[l];if($s.has(l)){i=!0;continue}else if(EA(l)){o[l]=c;continue}else{const u=RP(c,kg[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(t.transform||(i||n?r.transform=i$(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}function ww(e,t,n){return typeof e=="string"?e:Ce.transform(t+n*e)}function a$(e,t,n){const r=ww(t,e.x,e.width),o=ww(n,e.y,e.height);return`${r} ${o}`}const l$={offset:"stroke-dashoffset",array:"stroke-dasharray"},c$={offset:"strokeDashoffset",array:"strokeDasharray"};function u$(e,t,n=1,r=0,o=!0){e.pathLength=1;const s=o?l$:c$;e[s.offset]=Ce.transform(-r);const i=Ce.transform(t),a=Ce.transform(n);e[s.array]=`${i} ${a}`}function qg(e,{attrX:t,attrY:n,attrScale:r,originX:o,originY:s,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(Gg(e,c,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:g}=e;f.transform&&(g&&(m.transform=f.transform),delete f.transform),g&&(o!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=a$(g,o!==void 0?o:.5,s!==void 0?s:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&u$(f,i,a,l,!1)}const Yg=e=>typeof e=="string"&&e.toLowerCase()==="svg",d$={useVisualState:kP({scrapeMotionValuesFromProps:PP,createRenderState:TP,onMount:(e,t,{renderState:n,latestValues:r})=>{tt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),tt.render(()=>{qg(n,r,Yg(t.tagName),e.transformTemplate),DP(t,n)})}})},f$={useVisualState:kP({scrapeMotionValuesFromProps:Wg,createRenderState:Jg})};function FP(e,t,n){for(const r in t)!fn(t[r])&&!AP(r,n)&&(e[r]=t[r])}function h$({transformTemplate:e},t){return h.useMemo(()=>{const n=Jg();return Gg(n,t,e),Object.assign({},n.vars,n.style)},[t])}function p$(e,t){const n=e.style||{},r={};return FP(r,n,e),Object.assign(r,h$(e,t)),r}function m$(e,t){const n={},r=p$(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const g$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $u(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||g$.has(e)}let MP=e=>!$u(e);function x$(e){e&&(MP=t=>t.startsWith("on")?!$u(t):e(t))}try{x$(require("@emotion/is-prop-valid").default)}catch{}function v$(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(MP(o)||n===!0&&$u(o)||!t&&!$u(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function y$(e,t,n,r){const o=h.useMemo(()=>{const s=TP();return qg(s,t,Yg(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};FP(s,e.style,e),o.style={...s,...o.style}}return o}function w$(e=!1){return(n,r,o,{latestValues:s},i)=>{const l=(Hg(n)?y$:m$)(r,s,i,n),c=v$(r,typeof n=="string",e),u=n!==h.Fragment?{...c,...l,ref:o}:{},{children:d}=r,f=h.useMemo(()=>fn(d)?d.get():d,[d]);return h.createElement(n,{...u,children:f})}}function C$(e,t){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...Hg(r)?d$:f$,preloadedFeatures:e,useRender:w$(o),createVisualElement:t,Component:r};return XO(i)}}const hp={current:null},NP={current:!1};function E$(){if(NP.current=!0,!!Ug)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>hp.current=e.matches;e.addListener(t),t()}else hp.current=!1}function S$(e,t,n){for(const r in t){const o=t[r],s=n[r];if(fn(o))e.addValue(r,o);else if(fn(s))e.addValue(r,yl(o,{owner:e}));else if(s!==o)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=e.getStaticValue(r);e.addValue(r,yl(i!==void 0?i:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Cw=new WeakMap,b$=[...DA,un,Qo],D$=e=>b$.find(bA(e)),Ew=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class A${scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=$r.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,tt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=jd(n),this.isVariantNode=EP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&fn(m)&&m.set(l[f],!1)}}mount(t){this.current=t,Cw.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),NP.current||E$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Cw.delete(this.current),this.projection&&this.projection.unmount(),Xo(this.notifyUpdate),Xo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=$s.has(t),o=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Wi){const n=Wi[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ew.length;r++){const o=Ew[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=t[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=S$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=yl(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(wA(o)||yA(o))?o=parseFloat(o):!D$(o)&&Qo.test(n)&&(o=NA(t,n)),this.setBaseTarget(t,fn(o)?o.get():o)),fn(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const i=vg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(o=i[t])}if(r&&o!==void 0)return o;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!fn(s)?s:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Lg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class IP extends A${constructor(){super(...arguments),this.KeyframeResolver=IA}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;fn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function P$(e){return window.getComputedStyle(e)}class k$ extends IP{constructor(){super(...arguments),this.type="html",this.renderInstance=SP}readValueFromInstance(t,n){if($s.has(n)){const r=Tg(n);return r&&r.default||0}else{const r=P$(t),o=(EA(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return iP(t,n)}build(t,n,r){Gg(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Wg(t,n,r)}}class T$ extends IP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if($s.has(n)){const r=Tg(n);return r&&r.default||0}return n=bP.has(n)?n:Og(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return PP(t,n,r)}build(t,n,r){qg(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,o){DP(t,n,r,o)}mount(t){this.isSVGTag=Yg(t.tagName),super.mount(t)}}const R$=(e,t)=>Hg(e)?new T$(t):new k$(t,{allowProjection:e!==h.Fragment}),F$=C$({...xL,...VO,...FO,...UO},R$),_d=m_(F$);class M$ extends h.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function N$({children:e,isPresent:t}){const n=h.useId(),r=h.useRef(null),o=h.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=h.useContext(Vg);return h.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=o.current;if(t||!r.current||!i||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),p.jsx(M$,{isPresent:t,childRef:r,sizeRef:o,children:h.cloneElement(e,{ref:r})})}const I$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i})=>{const a=Kg(j$),l=h.useId(),c=h.useCallback(d=>{a.set(d,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),u=h.useMemo(()=>({id:l,initial:t,isPresent:n,custom:o,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return h.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[n]),h.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),i==="popLayout"&&(e=p.jsx(N$,{isPresent:n,children:e})),p.jsx(Nd.Provider,{value:u,children:e})};function j$(){return new Map}const Tc=e=>e.key||"";function Sw(e){const t=[];return h.Children.forEach(e,n=>{h.isValidElement(n)&&t.push(n)}),t}const Xg=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:s=!0,mode:i="sync"})=>{const a=h.useMemo(()=>Sw(e),[e]),l=a.map(Tc),c=h.useRef(!0),u=h.useRef(a),d=Kg(()=>new Map),[f,m]=h.useState(a),[g,w]=h.useState(a);yP(()=>{c.current=!1,u.current=a;for(let x=0;x<g.length;x++){const y=Tc(g[x]);l.includes(y)?d.delete(y):d.get(y)!==!0&&d.set(y,!1)}},[g,l.length,l.join("-")]);const C=[];if(a!==f){let x=[...a];for(let y=0;y<g.length;y++){const E=g[y],b=Tc(E);l.includes(b)||(x.splice(y,0,E),C.push(E))}i==="wait"&&C.length&&(x=C),w(Sw(x)),m(a);return}const{forceRender:v}=h.useContext($g);return p.jsx(p.Fragment,{children:g.map(x=>{const y=Tc(x),E=a===g||l.includes(y),b=()=>{if(d.has(y))d.set(y,!0);else return;let D=!0;d.forEach(A=>{A||(D=!1)}),D&&(v==null||v(),w(u.current),o&&o())};return p.jsx(I$,{isPresent:E,initial:!c.current||r?void 0:!1,custom:E?void 0:n,presenceAffectsLayout:s,mode:i,onExitComplete:E?void 0:b,children:x},y)})})};function _$({day:e,hasPhotoEntries:t,entryCount:n,onClick:r}){const o=`calendar-day aspect-square relative p-1 transition-colors duration-200 rounded-lg select-none cursor-pointer bg-white dark:bg-neutral-800 shadow-sm hover:shadow-md hover:bg-neutral-50 dark:hover:bg-neutral-700 overflow-hidden ${t?"day-with-image":""}`;return p.jsxs(_d.div,{className:o,onClick:r,"data-day":e,layout:!0,whileTap:{scale:.95},children:[t&&p.jsx("img",{alt:"",className:"calendar-day-img absolute top-0 left-0 rounded-lg z-0 max-w-none",loading:"lazy"}),p.jsxs("div",{className:"day-content relative z-10 flex flex-col h-full justify-between",children:[p.jsx("div",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200 self-start",children:e}),n>0&&p.jsx("div",{className:"mt-auto self-end w-full px-0.5 pb-0.5",children:p.jsxs("div",{className:"flex justify-end items-center space-x-1",children:[n===1&&p.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),n>1&&p.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-primary/80 text-primary-foreground rounded-full leading-none",children:n})]})})]})]})}function B$(){const{currentMonth:e,currentYear:t,currentMonthEntries:n,swipeDirection:r,handleDayClick:o,handleCalendarSwipe:s,loadDayBackgrounds:i}=Hr(),a=50,l=.3,c={enter:g=>({x:g>0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0}),center:{x:0,opacity:1,position:"relative",width:"100%",transition:{duration:.4,ease:[.4,0,.2,1]}},exit:g=>({x:g<0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0})},u=(g,w)=>{const{offset:C,velocity:v}=w;C.x>a||v.x>l&&C.x>10?s(-1):(C.x<-a||v.x<-l&&C.x<-10)&&s(1)},d=h.useCallback(g=>{const C=new Date(Date.UTC(t,e-1,g)).toISOString().split("T")[0],v=n.filter(y=>y.date===C);return{hasPhotoEntries:v.some(y=>y.photos&&y.photos.length>0),entryCount:v.length}},[n,e,t]),f=h.useCallback(()=>{const g=new Date(t,e-1,0).getDate(),w=new Date(t,e-1,1).getDay(),C=Array(w).fill(null).map((x,y)=>({type:"empty",index:y})),v=Array.from({length:g},(x,y)=>({type:"day",day:y+1}));return[...C,...v]},[e,t]),m=()=>{i()};return p.jsxs("div",{className:"relative overflow-hidden",children:[p.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>p.jsx("div",{className:"text-center text-xs font-medium text-neutral-500 dark:text-neutral-400 py-2",children:g},g))}),p.jsxs("div",{className:"relative min-h-[300px] md:min-h-[500px]",children:[" ",p.jsx(Xg,{initial:!1,custom:r,mode:"wait",children:p.jsx(_d.div,{custom:r,variants:c,initial:"enter",animate:"center",exit:"exit",onAnimationComplete:m,className:"grid grid-cols-7 gap-1 md:gap-2 touch-none",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.15,onDragEnd:u,style:{willChange:"transform"},children:f().map(g=>{const w=v=>v.type==="day",C=w(g)?`day-${g.day}`:`empty-${g.index}`;if(w(g)){const{hasPhotoEntries:v,entryCount:x}=d(g.day);return p.jsx(_$,{day:g.day,hasPhotoEntries:v,entryCount:x,onClick:()=>o(g.day)},C)}else return p.jsx("div",{className:"aspect-square relative p-1 bg-transparent"},C)})},`${t}-${e}`)})]})]})}function L$(){const{currentMonth:e,currentYear:t,goToPreviousMonth:n,goToNextMonth:r,openMonthYearPicker:o,navigate:s}=Hr(),i=new Date(t,e-1).toLocaleString("default",{month:"long"}),a=h.useCallback(()=>{let u=e,d=t;u===1?(u=12,d--):u--,S.log(`[MonthNavigation] Navigating to previous month: ${d}-${u}`),s(`/month/${d}/${u}`)},[e,t,s]),l=h.useCallback(()=>{let u=e,d=t;u===12?(u=1,d++):u++,S.log(`[MonthNavigation] Navigating to next month: ${d}-${u}`),s(`/month/${d}/${u}`)},[e,t,s]),c=h.useCallback(()=>{o(),s(`/month/${t}/${e}`)},[t,e,o,s]);return p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx(be,{variant:"outline",size:"icon",onClick:a,"aria-label":"Previous Month",className:"w-9 h-9",children:p.jsx(E8,{className:"h-4 w-4"})}),p.jsxs(be,{variant:"ghost",onClick:c,className:"font-medium text-lg px-2",children:[p.jsx(C8,{className:"h-4 w-4 mr-2"}),i," ",t]}),p.jsx(be,{variant:"outline",size:"icon",onClick:l,"aria-label":"Next Month",className:"w-9 h-9",children:p.jsx(YS,{className:"h-4 w-4"})})]})}function Qg(e,[t,n]){return Math.min(n,Math.max(t,e))}function O$(e,t){return h.useReducer((n,r)=>t[n][r]??n,e)}var Zg="ScrollArea",[jP,z7]=En(Zg),[$$,ur]=jP(Zg),_P=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[a,l]=h.useState(null),[c,u]=h.useState(null),[d,f]=h.useState(null),[m,g]=h.useState(null),[w,C]=h.useState(null),[v,x]=h.useState(0),[y,E]=h.useState(0),[b,D]=h.useState(!1),[A,P]=h.useState(!1),R=Le(t,T=>l(T)),k=Zi(o);return p.jsx($$,{scope:n,type:r,dir:k,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:f,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:b,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:C,scrollbarYEnabled:A,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:E,children:p.jsx(Se.div,{dir:k,...i,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});_P.displayName=Zg;var BP="ScrollAreaViewport",LP=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,i=ur(BP,n),a=h.useRef(null),l=Le(t,a,i.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),p.jsx(Se.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});LP.displayName=BP;var Wr="ScrollAreaScrollbar",ex=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ur(Wr,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,a=e.orientation==="horizontal";return h.useEffect(()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)}),[a,s,i]),o.type==="hover"?p.jsx(z$,{...r,ref:t,forceMount:n}):o.type==="scroll"?p.jsx(V$,{...r,ref:t,forceMount:n}):o.type==="auto"?p.jsx(OP,{...r,ref:t,forceMount:n}):o.type==="always"?p.jsx(tx,{...r,ref:t}):null});ex.displayName=Wr;var z$=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ur(Wr,e.__scopeScrollArea),[s,i]=h.useState(!1);return h.useEffect(()=>{const a=o.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),p.jsx(Sn,{present:n||s,children:p.jsx(OP,{"data-state":s?"visible":"hidden",...r,ref:t})})}),V$=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ur(Wr,e.__scopeScrollArea),s=e.orientation==="horizontal",i=Ld(()=>l("SCROLL_END"),100),[a,l]=O$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,o.scrollHideDelay,l]),h.useEffect(()=>{const c=o.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const f=()=>{const m=c[u];d!==m&&(l("SCROLL"),i()),d=m};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[o.viewport,s,l,i]),p.jsx(Sn,{present:n||a!=="hidden",children:p.jsx(tx,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:se(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:se(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),OP=h.forwardRef((e,t)=>{const n=ur(Wr,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=h.useState(!1),a=e.orientation==="horizontal",l=Ld(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?c:u)}},10);return Ki(n.viewport,l),Ki(n.content,l),p.jsx(Sn,{present:r||s,children:p.jsx(tx,{"data-state":s?"visible":"hidden",...o,ref:t})})}),tx=h.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=ur(Wr,e.__scopeScrollArea),s=h.useRef(null),i=h.useRef(0),[a,l]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=HP(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function d(f,m){return G$(f,i.current,a,m)}return n==="horizontal"?p.jsx(U$,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const f=o.viewport.scrollLeft,m=bw(f,a,o.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=d(f,o.dir))}}):n==="vertical"?p.jsx(H$,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const f=o.viewport.scrollTop,m=bw(f,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=d(f))}}):null}),U$=h.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=ur(Wr,e.__scopeScrollArea),[i,a]=h.useState(),l=h.useRef(null),c=Le(t,l,s.onScrollbarXChange);return h.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(zP,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bd(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const f=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),KP(f,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Vu(i.paddingLeft),paddingEnd:Vu(i.paddingRight)}})}})}),H$=h.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=ur(Wr,e.__scopeScrollArea),[i,a]=h.useState(),l=h.useRef(null),c=Le(t,l,s.onScrollbarYChange);return h.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(zP,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bd(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const f=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),KP(f,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Vu(i.paddingTop),paddingEnd:Vu(i.paddingBottom)}})}})}),[W$,$P]=jP(Wr),zP=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...f}=e,m=ur(Wr,n),[g,w]=h.useState(null),C=Le(t,R=>w(R)),v=h.useRef(null),x=h.useRef(""),y=m.viewport,E=r.content-r.viewport,b=Ft(u),D=Ft(l),A=Ld(d,10);function P(R){if(v.current){const k=R.clientX-v.current.left,T=R.clientY-v.current.top;c({x:k,y:T})}}return h.useEffect(()=>{const R=k=>{const T=k.target;(g==null?void 0:g.contains(T))&&b(k,E)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[y,g,E,b]),h.useEffect(D,[r,D]),Ki(g,A),Ki(m.content,A),p.jsx(W$,{scope:n,scrollbar:g,hasThumb:o,onThumbChange:Ft(s),onThumbPointerUp:Ft(i),onThumbPositionChange:D,onThumbPointerDown:Ft(a),children:p.jsx(Se.div,{...f,ref:C,style:{position:"absolute",...f.style},onPointerDown:se(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),v.current=g.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(R))}),onPointerMove:se(e.onPointerMove,P),onPointerUp:se(e.onPointerUp,R=>{const k=R.target;k.hasPointerCapture(R.pointerId)&&k.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),zu="ScrollAreaThumb",VP=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=$P(zu,e.__scopeScrollArea);return p.jsx(Sn,{present:n||o.hasThumb,children:p.jsx(K$,{ref:t,...r})})}),K$=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=ur(zu,n),i=$P(zu,n),{onThumbPositionChange:a}=i,l=Le(t,d=>i.onThumbChange(d)),c=h.useRef(void 0),u=Ld(()=>{c.current&&(c.current(),c.current=void 0)},100);return h.useEffect(()=>{const d=s.viewport;if(d){const f=()=>{if(u(),!c.current){const m=q$(d,a);c.current=m,a()}};return a(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[s.viewport,u,a]),p.jsx(Se.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:se(e.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),g=d.clientX-m.left,w=d.clientY-m.top;i.onThumbPointerDown({x:g,y:w})}),onPointerUp:se(e.onPointerUp,i.onThumbPointerUp)})});VP.displayName=zu;var nx="ScrollAreaCorner",UP=h.forwardRef((e,t)=>{const n=ur(nx,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(J$,{...e,ref:t}):null});UP.displayName=nx;var J$=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=ur(nx,n),[s,i]=h.useState(0),[a,l]=h.useState(0),c=!!(s&&a);return Ki(o.scrollbarX,()=>{var d;const u=((d=o.scrollbarX)==null?void 0:d.offsetHeight)||0;o.onCornerHeightChange(u),l(u)}),Ki(o.scrollbarY,()=>{var d;const u=((d=o.scrollbarY)==null?void 0:d.offsetWidth)||0;o.onCornerWidthChange(u),i(u)}),c?p.jsx(Se.div,{...r,ref:t,style:{width:s,height:a,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Vu(e){return e?parseInt(e,10):0}function HP(e,t){const n=e/t;return isNaN(n)?0:n}function Bd(e){const t=HP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function G$(e,t,n,r="ltr"){const o=Bd(n),s=o/2,i=t||s,a=o-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return WP([l,c],d)(e)}function bw(e,t,n="ltr"){const r=Bd(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,i]:[i*-1,0],c=Qg(e,l);return WP([0,i],[0,a])(c)}function WP(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function KP(e,t){return e>0&&e<t}var q$=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&t(),n=s,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function Ld(e,t){const n=Ft(e),r=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(r.current),[]),h.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ki(e,t){const n=Ft(t);io(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var JP=_P,Y$=LP,X$=UP;const GP=h.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(JP,{ref:r,className:ie("relative overflow-hidden",e),...n,children:[p.jsx(Y$,{className:"h-full w-full rounded-[inherit]",children:t}),p.jsx(qP,{}),p.jsx(X$,{})]}));GP.displayName=JP.displayName;const qP=h.forwardRef(({className:e,orientation:t="vertical",...n},r)=>p.jsx(ex,{ref:r,orientation:t,className:ie("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:p.jsx(VP,{className:"relative flex-1 rounded-full bg-border"})}));qP.displayName=ex.displayName;const Q$=e=>{if(!e)return 18;const t=window.getComputedStyle(e),n=t.lineHeight;if(n==="normal"){const r=parseFloat(t.fontSize);return Math.floor(r*1.3)}return parseFloat(n)},YP=({text:e,linesToShow:t=4,className:n})=>{const[r,o]=h.useState(!1),[s,i]=h.useState(!1),[a,l]=h.useState(!1),c=h.useRef(null),u=h.useRef(null),d=h.useCallback(()=>{const m=c.current,g=u.current;if(g){const w=Q$(g),C=w*t,x=g.scrollHeight>C+w*.5;l(x),i(m&&!r?m.scrollHeight>m.clientHeight+2||x:!1),m&&!r&&x?(m.style.maxHeight=`${C}px`,m.style.overflow="hidden"):m&&(m.style.maxHeight="",m.style.overflow="")}},[t,r]);h.useLayoutEffect(()=>{d()},[e,t,d]),h.useEffect(()=>{const m=c.current;if(!m)return;const g=new ResizeObserver(()=>{d()});return g.observe(m),()=>g.disconnect()},[d]);const f=()=>{o(!r)};return p.jsxs("div",{children:[p.jsx("p",{ref:u,className:ie("text-sm font-sans whitespace-pre-wrap break-words invisible absolute -z-10",n),"aria-hidden":"true",children:e||""}),p.jsxs("p",{ref:c,"data-testid":"truncated-text-content",className:ie("text-sm text-foreground font-sans whitespace-pre-wrap break-words relative transition-[max-height]",!r&&a?"overflow-hidden":"",n),children:[e||"",!r&&s&&p.jsx("span",{className:"absolute bottom-0 left-0 w-full h-4 bg-gradient-to-t from-background to-transparent pointer-events-none"})]}),a&&p.jsx(be,{variant:"link",className:"p-0 h-auto text-xs text-muted-foreground hover:text-primary mt-1",onClick:f,children:r?"(less)":"(more)"})]})};function Z$(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dw(e){return Z$(e)||Array.isArray(e)}function e9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function rx(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const o=JSON.stringify(Object.keys(e.breakpoints||{})),s=JSON.stringify(Object.keys(t.breakpoints||{}));return o!==s?!1:n.every(i=>{const a=e[i],l=t[i];return typeof a=="function"?`${a}`==`${l}`:!Dw(a)||!Dw(l)?a===l:rx(a,l)})}function Aw(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function t9(e,t){if(e.length!==t.length)return!1;const n=Aw(e),r=Aw(t);return n.every((o,s)=>{const i=r[s];return rx(o,i)})}function ox(e){return typeof e=="number"}function pp(e){return typeof e=="string"}function Od(e){return typeof e=="boolean"}function Pw(e){return Object.prototype.toString.call(e)==="[object Object]"}function bt(e){return Math.abs(e)}function sx(e){return Math.sign(e)}function Ka(e,t){return bt(e-t)}function n9(e,t){if(e===0||t===0||bt(e)<=bt(t))return 0;const n=Ka(bt(e),bt(t));return bt(n/e)}function r9(e){return Math.round(e*100)/100}function wl(e){return Cl(e).map(Number)}function Sr(e){return e[Hl(e)]}function Hl(e){return Math.max(0,e.length-1)}function ix(e,t){return t===Hl(e)}function kw(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function Cl(e){return Object.keys(e)}function XP(e,t){return[e,t].reduce((n,r)=>(Cl(r).forEach(o=>{const s=n[o],i=r[o],a=Pw(s)&&Pw(i);n[o]=a?XP(s,i):i}),n),{})}function mp(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function o9(e,t){const n={start:r,center:o,end:s};function r(){return 0}function o(l){return s(l)/2}function s(l){return t-l}function i(l,c){return pp(e)?n[e](l):e(t,l,c)}return{measure:i}}function El(){let e=[];function t(o,s,i,a={passive:!0}){let l;if("addEventListener"in o)o.addEventListener(s,i,a),l=()=>o.removeEventListener(s,i,a);else{const c=o;c.addListener(i),l=()=>c.removeListener(i)}return e.push(l),r}function n(){e=e.filter(o=>o())}const r={add:t,clear:n};return r}function s9(e,t,n,r){const o=El(),s=1e3/60;let i=null,a=0,l=0;function c(){o.add(e,"visibilitychange",()=>{e.hidden&&g()})}function u(){m(),o.clear()}function d(C){if(!l)return;i||(i=C,n(),n());const v=C-i;for(i=C,a+=v;a>=s;)n(),a-=s;const x=a/s;r(x),l&&(l=t.requestAnimationFrame(d))}function f(){l||(l=t.requestAnimationFrame(d))}function m(){t.cancelAnimationFrame(l),i=null,a=0,l=0}function g(){i=null,a=0}return{init:c,destroy:u,start:f,stop:m,update:n,render:r}}function i9(e,t){const n=t==="rtl",r=e==="y",o=r?"y":"x",s=r?"x":"y",i=!r&&n?-1:1,a=u(),l=d();function c(g){const{height:w,width:C}=g;return r?w:C}function u(){return r?"top":n?"right":"left"}function d(){return r?"bottom":n?"left":"right"}function f(g){return g*i}return{scroll:o,cross:s,startEdge:a,endEdge:l,measureSize:c,direction:f}}function Ms(e=0,t=0){const n=bt(e-t);function r(c){return c<e}function o(c){return c>t}function s(c){return r(c)||o(c)}function i(c){return s(c)?r(c)?e:t:c}function a(c){return n?c-n*Math.ceil((c-t)/n):c}return{length:n,max:t,min:e,constrain:i,reachedAny:s,reachedMax:o,reachedMin:r,removeOffset:a}}function QP(e,t,n){const{constrain:r}=Ms(0,e),o=e+1;let s=i(t);function i(f){return n?bt((o+f)%o):r(f)}function a(){return s}function l(f){return s=i(f),d}function c(f){return u().set(a()+f)}function u(){return QP(e,a(),n)}const d={get:a,set:l,add:c,clone:u};return d}function a9(e,t,n,r,o,s,i,a,l,c,u,d,f,m,g,w,C,v,x){const{cross:y,direction:E}=e,b=["INPUT","SELECT","TEXTAREA"],D={passive:!1},A=El(),P=El(),R=Ms(50,225).constrain(m.measure(20)),k={mouse:300,touch:400},T={mouse:500,touch:600},F=g?43:25;let _=!1,O=0,K=0,j=!1,B=!1,M=!1,I=!1;function U(re){if(!x)return;function xe(he){(Od(x)||x(re,he))&&ce(he)}const ve=t;A.add(ve,"dragstart",he=>he.preventDefault(),D).add(ve,"touchmove",()=>{},D).add(ve,"touchend",()=>{}).add(ve,"touchstart",xe).add(ve,"mousedown",xe).add(ve,"touchcancel",ne).add(ve,"contextmenu",ne).add(ve,"click",ue,!0)}function N(){A.clear(),P.clear()}function L(){const re=I?n:t;P.add(re,"touchmove",Y,D).add(re,"touchend",ne).add(re,"mousemove",Y,D).add(re,"mouseup",ne)}function H(re){const xe=re.nodeName||"";return b.includes(xe)}function $(){return(g?T:k)[I?"mouse":"touch"]}function fe(re,xe){const ve=d.add(sx(re)*-1),he=u.byDistance(re,!g).distance;return g||bt(re)<R?he:C&&xe?he*.5:u.byIndex(ve.get(),0).distance}function ce(re){const xe=mp(re,r);I=xe,M=g&&xe&&!re.buttons&&_,_=Ka(o.get(),i.get())>=2,!(xe&&re.button!==0)&&(H(re.target)||(j=!0,s.pointerDown(re),c.useFriction(0).useDuration(0),o.set(i),L(),O=s.readPoint(re),K=s.readPoint(re,y),f.emit("pointerDown")))}function Y(re){if(!mp(re,r)&&re.touches.length>=2)return ne(re);const ve=s.readPoint(re),he=s.readPoint(re,y),Ue=Ka(ve,O),ct=Ka(he,K);if(!B&&!I&&(!re.cancelable||(B=Ue>ct,!B)))return ne(re);const Je=s.pointerMove(re);Ue>w&&(M=!0),c.useFriction(.3).useDuration(.75),a.start(),o.add(E(Je)),re.preventDefault()}function ne(re){const ve=u.byDistance(0,!1).index!==d.get(),he=s.pointerUp(re)*$(),Ue=fe(E(he),ve),ct=n9(he,Ue),Je=F-10*ct,Ye=v+ct/50;B=!1,j=!1,P.clear(),c.useDuration(Je).useFriction(Ye),l.distance(Ue,!g),I=!1,f.emit("pointerUp")}function ue(re){M&&(re.stopPropagation(),re.preventDefault(),M=!1)}function Te(){return j}return{init:U,destroy:N,pointerDown:Te}}function l9(e,t){let r,o;function s(d){return d.timeStamp}function i(d,f){const g=`client${(f||e.scroll)==="x"?"X":"Y"}`;return(mp(d,t)?d:d.touches[0])[g]}function a(d){return r=d,o=d,i(d)}function l(d){const f=i(d)-i(o),m=s(d)-s(r)>170;return o=d,m&&(r=d),f}function c(d){if(!r||!o)return 0;const f=i(o)-i(r),m=s(d)-s(r),g=s(d)-s(o)>170,w=f/m;return m&&!g&&bt(w)>.1?w:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:i}}function c9(){function e(n){const{offsetTop:r,offsetLeft:o,offsetWidth:s,offsetHeight:i}=n;return{top:r,right:o+s,bottom:r+i,left:o,width:s,height:i}}return{measure:e}}function u9(e){function t(r){return e*(r/100)}return{measure:t}}function d9(e,t,n,r,o,s,i){const a=[e].concat(r);let l,c,u=[],d=!1;function f(C){return o.measureSize(i.measure(C))}function m(C){if(!s)return;c=f(e),u=r.map(f);function v(x){for(const y of x){if(d)return;const E=y.target===e,b=r.indexOf(y.target),D=E?c:u[b],A=f(E?e:r[b]);if(bt(A-D)>=.5){C.reInit(),t.emit("resize");break}}}l=new ResizeObserver(x=>{(Od(s)||s(C,x))&&v(x)}),n.requestAnimationFrame(()=>{a.forEach(x=>l.observe(x))})}function g(){d=!0,l&&l.disconnect()}return{init:m,destroy:g}}function f9(e,t,n,r,o,s){let i=0,a=0,l=o,c=s,u=e.get(),d=0;function f(){const D=r.get()-e.get(),A=!l;let P=0;return A?(i=0,n.set(r),e.set(r),P=D):(n.set(e),i+=D/l,i*=c,u+=i,e.add(i),P=u-d),a=sx(P),d=u,b}function m(){const D=r.get()-t.get();return bt(D)<.001}function g(){return l}function w(){return a}function C(){return i}function v(){return y(o)}function x(){return E(s)}function y(D){return l=D,b}function E(D){return c=D,b}const b={direction:w,duration:g,velocity:C,seek:f,settled:m,useBaseFriction:x,useBaseDuration:v,useFriction:E,useDuration:y};return b}function h9(e,t,n,r,o){const s=o.measure(10),i=o.measure(50),a=Ms(.1,.99);let l=!1;function c(){return!(l||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function u(m){if(!c())return;const g=e.reachedMin(t.get())?"min":"max",w=bt(e[g]-t.get()),C=n.get()-t.get(),v=a.constrain(w/i);n.subtract(C*v),!m&&bt(C)<s&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function d(m){l=!m}return{shouldConstrain:c,constrain:u,toggleActive:d}}function p9(e,t,n,r,o){const s=Ms(-t+e,0),i=d(),a=u(),l=f();function c(g,w){return Ka(g,w)<=1}function u(){const g=i[0],w=Sr(i),C=i.lastIndexOf(g),v=i.indexOf(w)+1;return Ms(C,v)}function d(){return n.map((g,w)=>{const{min:C,max:v}=s,x=s.constrain(g),y=!w,E=ix(n,w);return y?v:E||c(C,x)?C:c(v,x)?v:x}).map(g=>parseFloat(g.toFixed(3)))}function f(){if(t<=e+o)return[s.max];if(r==="keepSnaps")return i;const{min:g,max:w}=a;return i.slice(g,w)}return{snapsContained:l,scrollContainLimit:a}}function m9(e,t,n){const r=t[0],o=n?r-e:Sr(t);return{limit:Ms(o,r)}}function g9(e,t,n,r){const s=t.min+.1,i=t.max+.1,{reachedMin:a,reachedMax:l}=Ms(s,i);function c(f){return f===1?l(n.get()):f===-1?a(n.get()):!1}function u(f){if(!c(f))return;const m=e*(f*-1);r.forEach(g=>g.add(m))}return{loop:u}}function x9(e){const{max:t,length:n}=e;function r(s){const i=s-t;return n?i/-n:0}return{get:r}}function v9(e,t,n,r,o){const{startEdge:s,endEdge:i}=e,{groupSlides:a}=o,l=d().map(t.measure),c=f(),u=m();function d(){return a(r).map(w=>Sr(w)[i]-w[0][s]).map(bt)}function f(){return r.map(w=>n[s]-w[s]).map(w=>-bt(w))}function m(){return a(c).map(w=>w[0]).map((w,C)=>w+l[C])}return{snaps:c,snapsAligned:u}}function y9(e,t,n,r,o,s){const{groupSlides:i}=o,{min:a,max:l}=r,c=u();function u(){const f=i(s),m=!e||t==="keepSnaps";return n.length===1?[s]:m?f:f.slice(a,l).map((g,w,C)=>{const v=!w,x=ix(C,w);if(v){const y=Sr(C[0])+1;return kw(y)}if(x){const y=Hl(s)-Sr(C)[0]+1;return kw(y,Sr(C)[0])}return g})}return{slideRegistry:c}}function w9(e,t,n,r,o){const{reachedAny:s,removeOffset:i,constrain:a}=r;function l(g){return g.concat().sort((w,C)=>bt(w)-bt(C))[0]}function c(g){const w=e?i(g):a(g),C=t.map((x,y)=>({diff:u(x-w,0),index:y})).sort((x,y)=>bt(x.diff)-bt(y.diff)),{index:v}=C[0];return{index:v,distance:w}}function u(g,w){const C=[g,g+n,g-n];if(!e)return g;if(!w)return l(C);const v=C.filter(x=>sx(x)===w);return v.length?l(v):Sr(C)-n}function d(g,w){const C=t[g]-o.get(),v=u(C,w);return{index:g,distance:v}}function f(g,w){const C=o.get()+g,{index:v,distance:x}=c(C),y=!e&&s(C);if(!w||y)return{index:v,distance:g};const E=t[v]-x,b=g+u(E,0);return{index:v,distance:b}}return{byDistance:f,byIndex:d,shortcut:u}}function C9(e,t,n,r,o,s,i){function a(d){const f=d.distance,m=d.index!==t.get();s.add(f),f&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),m&&(n.set(t.get()),t.set(d.index),i.emit("select"))}function l(d,f){const m=o.byDistance(d,f);a(m)}function c(d,f){const m=t.clone().set(d),g=o.byIndex(m.get(),f);a(g)}return{distance:l,index:c}}function E9(e,t,n,r,o,s,i,a){const l={passive:!0,capture:!0};let c=0;function u(m){if(!a)return;function g(w){if(new Date().getTime()-c>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const x=n.findIndex(y=>y.includes(w));ox(x)&&(o.useDuration(0),r.index(x,0),i.emit("slideFocus"))}s.add(document,"keydown",d,!1),t.forEach((w,C)=>{s.add(w,"focus",v=>{(Od(a)||a(m,v))&&g(C)},l)})}function d(m){m.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function Ta(e){let t=e;function n(){return t}function r(l){t=i(l)}function o(l){t+=i(l)}function s(l){t-=i(l)}function i(l){return ox(l)?l:l.get()}return{get:n,set:r,add:o,subtract:s}}function ZP(e,t){const n=e.scroll==="x"?i:a,r=t.style;let o=null,s=!1;function i(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function l(f){if(s)return;const m=r9(e.direction(f));m!==o&&(r.transform=n(m),o=m)}function c(f){s=!f}function u(){s||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:u,to:l,toggleActive:c}}function S9(e,t,n,r,o,s,i,a,l){const u=wl(o),d=wl(o).reverse(),f=v().concat(x());function m(A,P){return A.reduce((R,k)=>R-o[k],P)}function g(A,P){return A.reduce((R,k)=>m(R,P)>0?R.concat([k]):R,[])}function w(A){return s.map((P,R)=>({start:P-r[R]+.5+A,end:P+t-.5+A}))}function C(A,P,R){const k=w(P);return A.map(T=>{const F=R?0:-n,_=R?n:0,O=R?"end":"start",K=k[T][O];return{index:T,loopPoint:K,slideLocation:Ta(-1),translate:ZP(e,l[T]),target:()=>a.get()>K?F:_}})}function v(){const A=i[0],P=g(d,A);return C(P,n,!1)}function x(){const A=t-i[0]-1,P=g(u,A);return C(P,-n,!0)}function y(){return f.every(({index:A})=>{const P=u.filter(R=>R!==A);return m(P,t)<=.1})}function E(){f.forEach(A=>{const{target:P,translate:R,slideLocation:k}=A,T=P();T!==k.get()&&(R.to(T),k.set(T))})}function b(){f.forEach(A=>A.translate.clear())}return{canLoop:y,clear:b,loop:E,loopPoints:f}}function b9(e,t,n){let r,o=!1;function s(l){if(!n)return;function c(u){for(const d of u)if(d.type==="childList"){l.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(u=>{o||(Od(n)||n(l,u))&&c(u)}),r.observe(e,{childList:!0})}function i(){r&&r.disconnect(),o=!0}return{init:s,destroy:i}}function D9(e,t,n,r){const o={};let s=null,i=null,a,l=!1;function c(){a=new IntersectionObserver(g=>{l||(g.forEach(w=>{const C=t.indexOf(w.target);o[C]=w}),s=null,i=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(g=>a.observe(g))}function u(){a&&a.disconnect(),l=!0}function d(g){return Cl(o).reduce((w,C)=>{const v=parseInt(C),{isIntersecting:x}=o[v];return(g&&x||!g&&!x)&&w.push(v),w},[])}function f(g=!0){if(g&&s)return s;if(!g&&i)return i;const w=d(g);return g&&(s=w),g||(i=w),w}return{init:c,destroy:u,get:f}}function A9(e,t,n,r,o,s){const{measureSize:i,startEdge:a,endEdge:l}=e,c=n[0]&&o,u=g(),d=w(),f=n.map(i),m=C();function g(){if(!c)return 0;const x=n[0];return bt(t[a]-x[a])}function w(){if(!c)return 0;const x=s.getComputedStyle(Sr(r));return parseFloat(x.getPropertyValue(`margin-${l}`))}function C(){return n.map((x,y,E)=>{const b=!y,D=ix(E,y);return b?f[y]+u:D?f[y]+d:E[y+1][a]-x[a]}).map(bt)}return{slideSizes:f,slideSizesWithGaps:m,startGap:u,endGap:d}}function P9(e,t,n,r,o,s,i,a,l){const{startEdge:c,endEdge:u,direction:d}=e,f=ox(n);function m(v,x){return wl(v).filter(y=>y%x===0).map(y=>v.slice(y,y+x))}function g(v){return v.length?wl(v).reduce((x,y,E)=>{const b=Sr(x)||0,D=b===0,A=y===Hl(v),P=o[c]-s[b][c],R=o[c]-s[y][u],k=!r&&D?d(i):0,T=!r&&A?d(a):0,F=bt(R-T-(P+k));return E&&F>t+l&&x.push(y),A&&x.push(v.length),x},[]).map((x,y,E)=>{const b=Math.max(E[y-1]||0);return v.slice(b,x)}):[]}function w(v){return f?m(v,n):g(v)}return{groupSlides:w}}function k9(e,t,n,r,o,s,i){const{align:a,axis:l,direction:c,startIndex:u,loop:d,duration:f,dragFree:m,dragThreshold:g,inViewThreshold:w,slidesToScroll:C,skipSnaps:v,containScroll:x,watchResize:y,watchSlides:E,watchDrag:b,watchFocus:D}=s,A=2,P=c9(),R=P.measure(t),k=n.map(P.measure),T=i9(l,c),F=T.measureSize(R),_=u9(F),O=o9(a,F),K=!d&&!!x,j=d||!!x,{slideSizes:B,slideSizesWithGaps:M,startGap:I,endGap:U}=A9(T,R,k,n,j,o),N=P9(T,F,C,d,R,k,I,U,A),{snaps:L,snapsAligned:H}=v9(T,O,R,k,N),$=-Sr(L)+Sr(M),{snapsContained:fe,scrollContainLimit:ce}=p9(F,$,H,x,A),Y=K?fe:H,{limit:ne}=m9($,Y,d),ue=QP(Hl(Y),u,d),Te=ue.clone(),Pe=wl(n),re=({dragHandler:pt,scrollBody:st,scrollBounds:J,options:{loop:q}})=>{q||J.constrain(pt.pointerDown()),st.seek()},xe=({scrollBody:pt,translate:st,location:J,offsetLocation:q,previousLocation:oe,scrollLooper:pe,slideLooper:me,dragHandler:je,animation:Re,eventHandler:Ge,scrollBounds:mt,options:{loop:Jt}},_t)=>{const nn=pt.settled(),rn=!mt.shouldConstrain(),Vt=Jt?nn:nn&&rn,yt=Vt&&!je.pointerDown();yt&&Re.stop();const mn=J.get()*_t+oe.get()*(1-_t);q.set(mn),Jt&&(pe.loop(pt.direction()),me.loop()),st.to(q.get()),yt&&Ge.emit("settle"),Vt||Ge.emit("scroll")},ve=s9(r,o,()=>re(rt),pt=>xe(rt,pt)),he=.68,Ue=Y[ue.get()],ct=Ta(Ue),Je=Ta(Ue),Ye=Ta(Ue),ht=Ta(Ue),nt=f9(ct,Ye,Je,ht,f,he),Xe=w9(d,Y,$,ne,ht),Mt=C9(ve,ue,Te,nt,Xe,ht,i),Ee=x9(ne),He=El(),ot=D9(t,n,i,w),{slideRegistry:jt}=y9(K,x,Y,ce,N,Pe),jn=E9(e,n,jt,Mt,nt,He,i,D),rt={ownerDocument:r,ownerWindow:o,eventHandler:i,containerRect:R,slideRects:k,animation:ve,axis:T,dragHandler:a9(T,e,r,o,ht,l9(T,o),ct,ve,Mt,nt,Xe,ue,i,_,m,g,v,he,b),eventStore:He,percentOfView:_,index:ue,indexPrevious:Te,limit:ne,location:ct,offsetLocation:Ye,previousLocation:Je,options:s,resizeHandler:d9(t,i,o,n,T,y,P),scrollBody:nt,scrollBounds:h9(ne,Ye,ht,nt,_),scrollLooper:g9($,ne,Ye,[ct,Ye,Je,ht]),scrollProgress:Ee,scrollSnapList:Y.map(Ee.get),scrollSnaps:Y,scrollTarget:Xe,scrollTo:Mt,slideLooper:S9(T,F,$,B,M,L,Y,Ye,n),slideFocus:jn,slidesHandler:b9(t,i,E),slidesInView:ot,slideIndexes:Pe,slideRegistry:jt,slidesToScroll:N,target:ht,translate:ZP(T,t)};return rt}function T9(){let e={},t;function n(c){t=c}function r(c){return e[c]||[]}function o(c){return r(c).forEach(u=>u(t,c)),l}function s(c,u){return e[c]=r(c).concat([u]),l}function i(c,u){return e[c]=r(c).filter(d=>d!==u),l}function a(){e={}}const l={init:n,emit:o,off:i,on:s,clear:a};return l}const R9={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function F9(e){function t(s,i){return XP(s,i||{})}function n(s){const i=s.breakpoints||{},a=Cl(i).filter(l=>e.matchMedia(l).matches).map(l=>i[l]).reduce((l,c)=>t(l,c),{});return t(s,a)}function r(s){return s.map(i=>Cl(i.breakpoints||{})).reduce((i,a)=>i.concat(a),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function M9(e){let t=[];function n(s,i){return t=i.filter(({options:a})=>e.optionsAtMedia(a).active!==!1),t.forEach(a=>a.init(s,e)),i.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){t=t.filter(s=>s.destroy())}return{init:n,destroy:r}}function Uu(e,t,n){const r=e.ownerDocument,o=r.defaultView,s=F9(o),i=M9(s),a=El(),l=T9(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=s,{on:f,off:m,emit:g}=l,w=T;let C=!1,v,x=c(R9,Uu.globalOptions),y=c(x),E=[],b,D,A;function P(){const{container:Pe,slides:re}=y;D=(pp(Pe)?e.querySelector(Pe):Pe)||e.children[0];const ve=pp(re)?D.querySelectorAll(re):re;A=[].slice.call(ve||D.children)}function R(Pe){const re=k9(e,D,A,r,o,Pe,l);if(Pe.loop&&!re.slideLooper.canLoop()){const xe=Object.assign({},Pe,{loop:!1});return R(xe)}return re}function k(Pe,re){C||(x=c(x,Pe),y=u(x),E=re||E,P(),v=R(y),d([x,...E.map(({options:xe})=>xe)]).forEach(xe=>a.add(xe,"change",T)),y.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(Te),v.eventHandler.init(Te),v.resizeHandler.init(Te),v.slidesHandler.init(Te),v.options.loop&&v.slideLooper.loop(),D.offsetParent&&A.length&&v.dragHandler.init(Te),b=i.init(Te,E)))}function T(Pe,re){const xe=N();F(),k(c({startIndex:xe},Pe),re),l.emit("reInit")}function F(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),i.destroy(),a.clear()}function _(){C||(C=!0,a.clear(),F(),l.emit("destroy"),l.clear())}function O(Pe,re,xe){!y.active||C||(v.scrollBody.useBaseFriction().useDuration(re===!0?0:y.duration),v.scrollTo.index(Pe,xe||0))}function K(Pe){const re=v.index.add(1).get();O(re,Pe,-1)}function j(Pe){const re=v.index.add(-1).get();O(re,Pe,1)}function B(){return v.index.add(1).get()!==N()}function M(){return v.index.add(-1).get()!==N()}function I(){return v.scrollSnapList}function U(){return v.scrollProgress.get(v.offsetLocation.get())}function N(){return v.index.get()}function L(){return v.indexPrevious.get()}function H(){return v.slidesInView.get()}function $(){return v.slidesInView.get(!1)}function fe(){return b}function ce(){return v}function Y(){return e}function ne(){return D}function ue(){return A}const Te={canScrollNext:B,canScrollPrev:M,containerNode:ne,internalEngine:ce,destroy:_,off:m,on:f,emit:g,plugins:fe,previousScrollSnap:L,reInit:w,rootNode:Y,scrollNext:K,scrollPrev:j,scrollProgress:U,scrollSnapList:I,scrollTo:O,selectedScrollSnap:N,slideNodes:ue,slidesInView:H,slidesNotInView:$};return k(t,n),setTimeout(()=>l.emit("init"),0),Te}Uu.globalOptions=void 0;function ax(e={},t=[]){const n=h.useRef(e),r=h.useRef(t),[o,s]=h.useState(),[i,a]=h.useState(),l=h.useCallback(()=>{o&&o.reInit(n.current,r.current)},[o]);return h.useEffect(()=>{rx(n.current,e)||(n.current=e,l())},[e,l]),h.useEffect(()=>{t9(r.current,t)||(r.current=t,l())},[t,l]),h.useEffect(()=>{if(e9()&&i){Uu.globalOptions=ax.globalOptions;const c=Uu(i,n.current,r.current);return s(c),()=>c.destroy()}else s(void 0)},[i,s]),[a,o]}ax.globalOptions=void 0;const e4=h.createContext(null);function $d(){const e=h.useContext(e4);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const t4=h.forwardRef(({orientation:e="horizontal",opts:t,setApi:n,plugins:r,className:o,children:s,...i},a)=>{const[l,c]=ax({...t,axis:e==="horizontal"?"x":"y"},r),[u,d]=h.useState(!1),[f,m]=h.useState(!1),g=h.useCallback(x=>{x&&(d(x.canScrollPrev()),m(x.canScrollNext()))},[]),w=h.useCallback(()=>{c==null||c.scrollPrev()},[c]),C=h.useCallback(()=>{c==null||c.scrollNext()},[c]),v=h.useCallback(x=>{x.key==="ArrowLeft"?(x.preventDefault(),w()):x.key==="ArrowRight"&&(x.preventDefault(),C())},[w,C]);return h.useEffect(()=>{!c||!n||n(c)},[c,n]),h.useEffect(()=>{if(c)return g(c),c.on("reInit",g),c.on("select",g),()=>{c==null||c.off("select",g)}},[c,g]),p.jsx(e4.Provider,{value:{carouselRef:l,api:c,opts:t,orientation:e||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:w,scrollNext:C,canScrollPrev:u,canScrollNext:f},children:p.jsx("div",{ref:a,onKeyDownCapture:v,className:ie("relative",o),role:"region","aria-roledescription":"carousel",...i,children:s})})});t4.displayName="Carousel";const n4=h.forwardRef(({className:e,...t},n)=>{const{carouselRef:r,orientation:o}=$d();return p.jsx("div",{ref:r,className:"overflow-hidden",children:p.jsx("div",{ref:n,className:ie("flex",o==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});n4.displayName="CarouselContent";const r4=h.forwardRef(({className:e,...t},n)=>{const{orientation:r}=$d();return p.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:ie("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...t})});r4.displayName="CarouselItem";const o4=h.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},o)=>{const{orientation:s,scrollPrev:i,canScrollPrev:a}=$d();return p.jsxs(be,{ref:o,variant:t,size:n,className:ie("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:i,...r,children:[p.jsx(GS,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Previous slide"})]})});o4.displayName="CarouselPrevious";const s4=h.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},o)=>{const{orientation:s,scrollNext:i,canScrollNext:a}=$d();return p.jsxs(be,{ref:o,variant:t,size:n,className:ie("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:i,...r,children:[p.jsx(y8,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Next slide"})]})});s4.displayName="CarouselNext";const i4=({imageUrl:e,thumbnailUrl:t,crop:n,photoMetadata:r,altText:o="Cropped image",className:s,imgClassName:i,enableLoadingState:a=!0,onFullImageLoaded:l})=>{const[c,u]=h.useState({}),[d,f]=h.useState("idle"),[m,g]=h.useState({width:0,height:0}),[w,C]=h.useState(null),[v,x]=h.useState(!1),[y,E]=h.useState(!0),b=h.useRef(null),D=h.useRef(null),A=h.useCallback(()=>{if(b.current){const T=b.current.offsetWidth,F=b.current.offsetHeight;T>0&&F>0?g({width:T,height:F}):T>0&&g({width:T,height:T})}},[]);h.useEffect(()=>{const T=b.current;if(!T)return;const F=new ResizeObserver(A);return F.observe(T),A(),()=>{F.unobserve(T)}},[A]),h.useEffect(()=>{t&&d!=="loaded"?(C(t),x(!0),d!=="loading"&&f("loading")):e?v||(C(e),d!=="loading"&&d!=="loaded"&&f("loading")):(C(null),x(!1),f("idle"))},[e,t,d,v]),h.useEffect(()=>{if(v&&e&&t){const T=new Image,F=()=>{C(e),x(!1),f("loaded"),l&&l()},_=()=>{S.error("Failed to load full image in background:",e)};return T.onload=F,T.onerror=_,T.src=e,()=>{T.onload=null,T.onerror=null}}},[e,t,v,l]),h.useEffect(()=>{if(d==="loaded"&&y){const T=setTimeout(()=>{E(!1)},50);return()=>clearTimeout(T)}},[d,y]),h.useEffect(()=>{u((()=>{const F=d==="loaded",O={position:"absolute",top:0,left:0,opacity:F?1:0,transition:y?"opacity 0.3s ease-in-out":"opacity 0.3s ease-in-out, transform 0.45s ease-in-out, width 0.45s ease-in-out, height 0.45s ease-in-out",pointerEvents:F?"auto":"none",maxWidth:"none",maxHeight:"none",willChange:y?"opacity":"transform, opacity, width, height"};if(!(r!=null&&r.width)||!(r!=null&&r.height)||m.width<=0||r.width<=0||r.height<=0)return{...O,width:"100%",height:"100%",objectFit:"contain",objectPosition:"center center",transform:"none"};if(!n||n.w<=0||n.h<=0){const{width:L,height:H}=r,$=m.width,fe=m.height||$,ce=$/L,Y=fe/H,ne=Math.min(ce,Y),ue=L*ne,Te=H*ne,Pe=($-ue)/2,re=(fe-Te)/2;return{...O,width:`${L}px`,height:`${H}px`,transform:`translate(${Pe}px, ${re}px) scale(${ne})`,transformOrigin:"0 0"}}const{width:K,height:j}=r,B=m.width,M=m.height||B,I=B/n.w,U=-n.x*I,N=-n.y*I;if(isNaN(I)||isNaN(U)||isNaN(N)){S.warn("NaN detected during style calculation",{scale:I,naturalW:K,naturalH:j,crop:n});const L=B/K,H=M/j,$=Math.min(L,H),fe=K*$,ce=j*$,Y=(B-fe)/2,ne=(M-ce)/2;return{...O,width:`${K}px`,height:`${j}px`,transform:`translate(${Y}px, ${ne}px) scale(${$})`,transformOrigin:"0 0"}}return{...O,width:`${K}px`,height:`${j}px`,transform:`translate(${U}px, ${N}px) scale(${I})`,transformOrigin:"0 0",objectFit:"initial",objectPosition:"initial"}})())},[n,r,d,m,y]);const P=h.useCallback(()=>{D.current&&D.current.getAttribute("src")===w&&w&&(f("loaded"),!v&&l&&l())},[w,v,l]),R=h.useCallback(()=>{if(D.current&&D.current.getAttribute("src")===w&&w){if(S.error("Failed to load image in CroppedImageViewer:",w),v&&e){C(e),x(!1);return}if(!v&&t){S.log("Full image failed to load. Falling back to thumbnail:",t),C(t),x(!0);return}f("error")}},[w,e,t,v]),k=a&&(d==="loading"||d==="error");return p.jsxs("div",{ref:b,"data-testid":"image-container",className:ie("relative w-full h-full overflow-hidden bg-muted",s),children:[k&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 bg-muted/50",children:d==="loading"?p.jsx(Ht,{className:"h-5 w-5 animate-spin text-muted-foreground"}):null}),p.jsx("img",{ref:D,src:w??"",alt:o,style:c,className:ie("block",i,v?"thumbnail-quality":"full-quality"),onLoad:P,onError:R,loading:"lazy"})]})},N9=({photo:e,thumbnailUrl:t})=>{const[n,r]=h.useState(!1),[o,s]=h.useState("idle"),i=h.useRef(null),a=h.useRef(null),{photoUrl:l,crop:c,photoMetadata:u}=e,d=!!(l||t);h.useEffect(()=>{s(d?"loading":"idle"),r(!1)},[l,t,d]);const f=()=>{(o==="loaded"||o==="loading")&&r(C=>!C)},m=h.useCallback(()=>{var C,v;((C=a.current)==null?void 0:C.src)===l&&l?(S.log(`[SinglePhotoDisplay] Image loaded: ${l}`),s("loaded")):S.log(`[SinglePhotoDisplay] Image load ignored (stale or no URL): loaded=${(v=a.current)==null?void 0:v.src}, current=${l}`)},[l]),g=h.useCallback(()=>{var C,v;((C=a.current)==null?void 0:C.src)===l&&l?(S.error("[SinglePhotoDisplay] Failed to load image:",l),s("error")):S.log(`[SinglePhotoDisplay] Image error ignored (stale or no URL): errorSrc=${(v=a.current)==null?void 0:v.src}, current=${l}`)},[l]),w=o==="idle"||o==="loading";return p.jsxs("div",{ref:i,className:"relative w-full h-full aspect-square overflow-hidden bg-muted cursor-pointer",onClick:f,title:o==="loaded"?n?"Show cropped image":"Show full image":"",children:[w&&d&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 bg-muted/50",children:p.jsx(Ht,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),o==="error"&&!(l&&t)&&!w&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 bg-muted",children:p.jsx(T8,{className:"h-8 w-8 text-destructive/50"})}),p.jsx("div",{className:"absolute inset-0 z-10",children:p.jsx(i4,{imageUrl:l,thumbnailUrl:t,crop:n?void 0:c,photoMetadata:u,altText:n?"Full entry photo":"Cropped entry photo",className:"w-full h-full",enableLoadingState:!1,onFullImageLoaded:()=>{o!=="loaded"&&s("loaded")}})}),l&&p.jsx("img",{ref:a,src:l,alt:"",onLoad:m,onError:g,style:{display:"none"},loading:"eager"},l),o==="loaded"&&p.jsx("div",{className:"absolute bottom-2 right-2 z-30 bg-black/50 text-white rounded-full p-1.5 pointer-events-none",children:n?p.jsx(N8,{size:16}):p.jsx(M8,{size:16})})]})},a4=({entry:e})=>{var a;const[t,n]=h.useState(),[r,o]=h.useState(0),[s,i]=h.useState(0);return h.useEffect(()=>{if(t)return i(t.scrollSnapList().length),o(t.selectedScrollSnap()+1),t.on("select",()=>{t&&o(t.selectedScrollSnap()+1)}),()=>{t==null||t.off("select",()=>{})}},[t]),h.useEffect(()=>{var l,c;i(((l=e.photos)==null?void 0:l.length)??0),o(((c=e.photos)==null?void 0:c.length)>0?1:0),t==null||t.scrollTo(0,!0)},[e.id,(a=e.photos)==null?void 0:a.length,t]),h.useEffect(()=>{t==null||t.scrollTo(0,!1)},[t]),!e.photos||e.photos.length===0?null:p.jsx("div",{className:ie("relative w-full max-w-md aspect-square overflow-hidden rounded-md"),children:p.jsxs(t4,{setApi:n,className:"w-full h-full",children:[p.jsx(n4,{className:"h-full",children:e.photos.map((l,c)=>p.jsx(r4,{className:"h-full",children:p.jsx(N9,{photo:l,thumbnailUrl:l.thumbnailUrl})},`${e.id}-${l.photoId}-${c}`))}),s>1&&p.jsxs(p.Fragment,{children:[p.jsx(o4,{className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 h-8 w-8 bg-black/50 text-white hover:bg-black/70 border-none disabled:hidden"}),p.jsx(s4,{className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 h-8 w-8 bg-black/50 text-white hover:bg-black/70 border-none disabled:hidden"}),p.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 z-10 bg-black/60 text-white text-xs px-2 py-0.5 rounded-full pointer-events-none",children:[r," / ",s]})]})]})})},I9=e=>new Date(e+"T00:00:00Z").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"});function j9(){const{currentMonthEntries:e,isLoadingEntries:t,handleEditRequest:n,handleDeleteRequest:r,getCombinedEntryDetails:o,currentYear:s,currentMonth:i,swipeDirection:a,handleCalendarSwipe:l}=Hr(),[c,u]=h.useState(new Map),[d,f]=h.useState(new Map),m=h.useRef(null),g=50,w=.3,C={enter:y=>({x:y>0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0}),center:{x:0,opacity:1,position:"relative",width:"100%",transition:{duration:.4,ease:[.4,0,.2,1]}},exit:y=>({x:y<0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0,transition:{duration:.3,ease:[.4,0,.2,1]}})},v=(y,E)=>{const{offset:b,velocity:D}=E;let A=y.target;for(;A&&A!==m.current;){if(A.classList.contains("ignore-list-swipe")){S.log("List swipe ignored, started on carousel.");return}A=A.parentElement}b.x>g||D.x>w&&b.x>10?l(-1):(b.x<-g||D.x<-w&&b.x<-10)&&l(1)},x=h.useMemo(()=>[...e].sort((y,E)=>{const b=new Date(y.date).getTime(),D=new Date(E.date).getTime();if(b!==D)return b-D;const A=new Date(y.createdAt).getTime(),P=new Date(E.createdAt).getTime();return A-P}),[e]);return h.useEffect(()=>{let y=!0;return u(new Map),f(new Map),e.forEach(E=>{f(b=>new Map(b).set(E.id,!0)),o(E).then(b=>{y&&u(D=>new Map(D).set(E.id,b))}).catch(b=>{S.error(`Error fetching details for entry ${E.id}:`,b)}).finally(()=>{y&&f(b=>new Map(b).set(E.id,!1))})}),()=>{y=!1}},[e,o]),t?p.jsxs("div",{className:"flex items-center justify-center h-[calc(100%-40px)]",children:[" ",p.jsx(Ht,{className:"h-8 w-8 animate-spin text-primary"})]}):x.length===0&&!t?p.jsxs("div",{className:"text-center p-10 text-muted-foreground h-[calc(100%-40px)] flex items-center justify-center",children:[" ","No entries found for this month."]}):p.jsxs(GP,{className:"h-full",children:[" ",p.jsxs("div",{ref:m,className:"relative overflow-hidden h-full",children:[" ",p.jsx(Xg,{initial:!1,custom:a,mode:"wait",children:p.jsx(_d.div,{custom:a,variants:C,initial:"enter",animate:"center",exit:"exit",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.15,onDragEnd:v,className:"space-y-4 p-1 pr-1 h-full touch-pan-y",style:{willChange:"transform"},children:x.map(y=>{const b=c.get(y.id)||{...y,photos:(y.photos||[]).map(D=>({...D,photoUrl:void 0,photoMetadata:void 0,photoFilename:void 0}))};return p.jsxs(Im,{className:"overflow-hidden bg-card shadow-sm",children:[p.jsx("div",{className:"flex justify-center w-full border-b dark:border-neutral-700 ignore-list-swipe",onPointerDown:D=>D.stopPropagation(),onTouchStart:D=>D.stopPropagation(),children:p.jsx(a4,{entry:b})}),p.jsxs(jm,{className:"p-3",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-foreground flex-shrink-0 pr-2",children:I9(y.date)}),p.jsxs(mg,{children:[p.jsx(gg,{asChild:!0,children:p.jsx(be,{variant:"ghost",size:"icon",className:"h-7 w-7 flex-shrink-0 text-muted-foreground hover:text-foreground",onClick:D=>D.stopPropagation(),"aria-label":"Entry options",children:p.jsx(QS,{className:"h-4 w-4"})})}),p.jsxs(Td,{align:"end",children:[p.jsxs(Fs,{onClick:D=>{D.stopPropagation(),n(y.id)},children:[p.jsx(eb,{className:"mr-2 h-4 w-4"})," Edit"]}),p.jsxs(Fs,{onClick:D=>{D.stopPropagation(),r(y.id)},className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[p.jsx(Em,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),p.jsx(YP,{text:y.content,linesToShow:4})]})]},y.id)})},`${s}-${i}-list`)})]})]})}function l4({className:e,...t}){return p.jsx("div",{className:ie("animate-pulse rounded-md bg-muted",e),...t})}const Tw=e=>({...e,photos:(e.photos||[]).map(t=>({...t,photoUrl:void 0,photoMetadata:void 0,photoFilename:void 0}))});function _9(){const{isViewEntryModalOpen:e,closeViewModal:t,selectedBasicEntriesForModal:n,viewEntryModalDate:r,handleEditRequest:o,handleDeleteRequest:s,getCombinedEntryDetails:i}=Hr(),[,a]=mm(),[l,c]=h.useState(new Map),[u,d]=h.useState(!1),[f,m]=h.useState(new Set),g=h.useRef(!0),[w,C]=h.useState([]),v=h.useMemo(()=>[...n].sort((y,E)=>{const b=new Date(y.createdAt).getTime(),D=new Date(E.createdAt).getTime();return b-D}),[n]);h.useEffect(()=>{if(g.current=!0,e&&v.length>0){C(v),d(!0),c(new Map),m(new Set);const y=v.map(E=>i(E).then(b=>{g.current&&c(D=>new Map(D).set(E.id,b))}).catch(b=>{S.error(`Error fetching details for entry ${E.id} in modal:`,b),g.current&&(m(D=>new Set(D).add(E.id)),c(D=>new Map(D).set(E.id,Tw(E))))}));Promise.allSettled(y).finally(()=>{g.current&&d(!1)})}else e||(c(new Map),d(!1),m(new Set));return()=>{g.current=!1}},[e,v,i]);const x=()=>{t(),a("/entry/new")};return p.jsx(Bs,{open:e,onOpenChange:t,children:p.jsxs(rs,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[p.jsx(os,{className:"flex-shrink-0 border-b pb-3",children:p.jsxs(ss,{children:["Entries for ",r.toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"})]})}),p.jsx("div",{className:"py-4 overflow-y-auto flex-grow custom-scrollbar pr-2 -mr-2",children:v.length===0&&!u&&w.length===0?p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-muted-foreground mb-4",children:"No entries for this date"}),p.jsx(be,{onClick:x,children:"Create New Entry"})]}):p.jsx("div",{className:"space-y-6",children:(v.length>0?v:w).map((y,E)=>{const b=l.get(y.id),D=u&&!b,A=f.has(y.id),P=b||Tw(y);return p.jsxs("div",{className:"border dark:border-neutral-700 rounded-lg overflow-hidden shadow-sm bg-card",children:[p.jsx("div",{className:"flex justify-center w-full border-b dark:border-neutral-700 ignore-list-swipe",children:D?p.jsx(l4,{className:"aspect-square w-full max-w-md bg-muted"}):p.jsx(a4,{entry:P})}),p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),y.createdAt!==y.updatedAt&&p.jsx("span",{className:"italic text-xs",children:" (edited)"})]}),!u&&p.jsxs(mg,{children:[p.jsx(gg,{asChild:!0,children:p.jsx(be,{variant:"ghost",className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:p.jsx(QS,{className:"h-4 w-4"})})}),p.jsxs(Td,{align:"end",children:[p.jsxs(Fs,{onClick:()=>{setTimeout(()=>{o(y.id)},300)},children:[p.jsx(eb,{className:"mr-2 h-4 w-4"})," Edit"]}),p.jsxs(Fs,{onClick:()=>s(y.id),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[p.jsx(Em,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),p.jsx(YP,{text:y.content,linesToShow:4}),A&&p.jsx("p",{className:"text-xs text-destructive mt-1",children:"Error loading photo details for this entry."})]})]},y.id+"-"+E)})})}),!u&&(v.length>0||w.length>0)&&p.jsx("div",{className:"flex justify-end mt-4 border-t dark:border-neutral-700 pt-4 flex-shrink-0",children:p.jsx(be,{onClick:x,children:"Add Another Entry"})})]})})}var c4="AlertDialog",[B9,V7]=En(c4,[C2]),fo=C2(),u4=e=>{const{__scopeAlertDialog:t,...n}=e,r=fo(t);return p.jsx(B2,{...r,...n,modal:!0})};u4.displayName=c4;var L9="AlertDialogTrigger",O9=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=fo(n);return p.jsx(aj,{...o,...r,ref:t})});O9.displayName=L9;var $9="AlertDialogPortal",d4=e=>{const{__scopeAlertDialog:t,...n}=e,r=fo(t);return p.jsx(L2,{...r,...n})};d4.displayName=$9;var z9="AlertDialogOverlay",f4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=fo(n);return p.jsx(Ym,{...o,...r,ref:t})});f4.displayName=z9;var wi="AlertDialogContent",[V9,U9]=B9(wi),H9=ES("AlertDialogContent"),h4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,s=fo(n),i=h.useRef(null),a=Le(t,i),l=h.useRef(null);return p.jsx(rj,{contentName:wi,titleName:p4,docsSlug:"alert-dialog",children:p.jsx(V9,{scope:n,cancelRef:l,children:p.jsxs(Xm,{role:"alertdialog",...s,...o,ref:a,onOpenAutoFocus:se(o.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[p.jsx(H9,{children:r}),p.jsx(K9,{contentRef:i})]})})})});h4.displayName=wi;var p4="AlertDialogTitle",m4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=fo(n);return p.jsx(Qm,{...o,...r,ref:t})});m4.displayName=p4;var g4="AlertDialogDescription",x4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=fo(n);return p.jsx(Zm,{...o,...r,ref:t})});x4.displayName=g4;var W9="AlertDialogAction",v4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=fo(n);return p.jsx(eg,{...o,...r,ref:t})});v4.displayName=W9;var y4="AlertDialogCancel",w4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=U9(y4,n),s=fo(n),i=Le(t,o);return p.jsx(eg,{...s,...r,ref:i})});w4.displayName=y4;var K9=({contentRef:e})=>{const t=`\`${wi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wi}\` by passing a \`${g4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},J9=u4,G9=d4,C4=f4,E4=h4,S4=v4,b4=w4,D4=m4,A4=x4;const P4=J9,q9=G9,k4=h.forwardRef(({className:e,...t},n)=>p.jsx(C4,{className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));k4.displayName=C4.displayName;const lx=h.forwardRef(({className:e,...t},n)=>p.jsxs(q9,{children:[p.jsx(k4,{}),p.jsx(E4,{ref:n,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));lx.displayName=E4.displayName;const cx=({className:e,...t})=>p.jsx("div",{className:ie("flex flex-col space-y-2 text-center sm:text-left",e),...t});cx.displayName="AlertDialogHeader";const ux=({className:e,...t})=>p.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ux.displayName="AlertDialogFooter";const dx=h.forwardRef(({className:e,...t},n)=>p.jsx(D4,{ref:n,className:ie("text-lg font-semibold",e),...t}));dx.displayName=D4.displayName;const fx=h.forwardRef(({className:e,...t},n)=>p.jsx(A4,{ref:n,className:ie("text-sm text-muted-foreground",e),...t}));fx.displayName=A4.displayName;const hx=h.forwardRef(({className:e,...t},n)=>p.jsx(S4,{ref:n,className:ie(_m(),e),...t}));hx.displayName=S4.displayName;const px=h.forwardRef(({className:e,...t},n)=>p.jsx(b4,{ref:n,className:ie(_m({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));px.displayName=b4.displayName;function Y9(){const{isDeleteDialogOpen:e,closeDeleteDialog:t,handleDeleteEntry:n,isSaving:r}=Hr(),o=async()=>{await n()};return p.jsx(P4,{open:e,onOpenChange:t,children:p.jsxs(lx,{children:[p.jsxs(cx,{children:[p.jsx(dx,{children:"Delete Entry"}),p.jsx(fx,{children:"Are you sure you want to delete this entry? This action cannot be undone."})]}),p.jsxs(ux,{children:[p.jsx(px,{disabled:r,children:"Cancel"}),p.jsx(hx,{onClick:s=>{s.preventDefault(),o()},disabled:r,className:"bg-red-500 hover:bg-red-600 focus:ring-red-500",children:r?"Deleting...":"Delete"})]})]})})}function X9({onFilesSelect:e,disabled:t=!1,className:n,children:r,maxFiles:o=10,currentFileCount:s=0}){const i=h.useRef(null),{toast:a}=Ml(),l=h.useCallback(async g=>{if(!g||g.length===0)return;const w=Array.from(g),C=[],v=[];let x=!0;if(s+w.length>o){a({title:"Too many files",description:`You can only add ${o-s} more photo(s).`,variant:"destructive"}),i.current&&(i.current.value="");return}for(const y of w){if(!y.type.startsWith("image/")){a({title:"Invalid File Type",description:`"${y.name}" is not a supported image file.`,variant:"destructive"}),x=!1;continue}try{const E=URL.createObjectURL(y);C.push(y),v.push(E)}catch(E){S.error("Error creating object URL:",E),a({title:"Processing Error",description:`Could not process file: ${y.name}`,variant:"destructive"}),x=!1,v.forEach(URL.revokeObjectURL),i.current&&(i.current.value="");return}}C.length>0?e(C,v):!x&&v.length>0&&v.forEach(URL.revokeObjectURL),x&&i.current&&(i.current.value="")},[e,a,o,s]),c=h.useCallback(g=>{t||l(g.target.files)},[t,l]),u=h.useCallback(g=>{t||(g.preventDefault(),g.stopPropagation(),l(g.dataTransfer.files))},[t,l]),d=g=>{t||(g.preventDefault(),g.stopPropagation())},f=h.useCallback(()=>{var g;t||(g=i.current)==null||g.click()},[t]),m=r?Et.isValidElement(r)?Et.cloneElement(r,{onClick:f}):p.jsx("div",{onClick:f,children:r}):p.jsxs("div",{className:ie("mt-2 flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-6 transition-colors",t?"cursor-not-allowed bg-muted/50 border-gray-300 dark:border-gray-700":"border-gray-300 dark:border-gray-700 cursor-pointer hover:border-primary hover:bg-accent",n),onDragOver:d,onDrop:u,onClick:f,children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`mb-2 h-10 w-10 ${t?"text-gray-300 dark:text-gray-600":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),p.jsxs("p",{className:`mb-2 text-center text-sm ${t?"text-gray-400 dark:text-gray-500":"text-gray-500 dark:text-gray-400"}`,children:[p.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag & drop"]}),p.jsx("p",{className:`text-xs ${t?"text-gray-400 dark:text-gray-500":"text-gray-500 dark:text-gray-400"}`,children:"PNG, JPG (Multiple allowed)"})]});return p.jsxs("div",{className:ie(!r&&"w-full",n),children:[p.jsx("input",{ref:i,type:"file",accept:"image/png, image/jpeg, image/jpg",className:"hidden",onChange:c,disabled:t,multiple:!0}),m]})}const Q9=e=>{if(!e)return 8;try{const t=window.getComputedStyle(e),n=t.getPropertyValue("gap")||t.getPropertyValue("column-gap")||"8px";return parseInt(n,10)||8}catch{return 8}};function Z9({photos:e,setPhotos:t,isBusy:n,isLoadingInitial:r,initialPhotoCount:o,onOpenCropper:s,onRemovePhoto:i,onFilesSelect:a,originalBlobUrlsRef:l,existingPhotoMetaRef:c,processingQueueLength:u,currentQueueIndex:d,isProcessingQueueItem:f}){const m=h.useRef(null),g=h.useRef(null),[w,C]=h.useState(null),[v,x]=h.useState(null),y=h.useRef([]),E=h.useRef(null),b=h.useRef(null);h.useEffect(()=>{y.current=y.current.slice(0,e.length)},[e.length]);const D=()=>{b.current&&(b.current.style.display="none"),x(null)},A=j=>{const B=b.current,M=E.current;if(!B||!M||j<0||j>e.length){D();return}if(j===v&&B.style.display!=="none")return;x(j);const I=Q9(M);let U=null,N=!1;if(j===e.length?(U=y.current[e.length-1],N=!0):(U=y.current[j],N=!1),U){const L=U.getBoundingClientRect(),H=U.offsetTop;let $;N?$=U.offsetLeft+L.width+I/2:$=U.offsetLeft-I/2,B.style.display="block",B.style.top=`${H}px`,B.style.left=`${$}px`,B.style.height=`${L.height}px`}else D()},P=(j,B)=>{if(m.current=B,C(B),D(),j.dataTransfer)try{j.dataTransfer.effectAllowed="move"}catch{}},R=(j,B)=>{if(j.preventDefault(),m.current===null||m.current===B){g.current=null,D();return}g.current=B;const M=y.current[B];if(M){const I=M.getBoundingClientRect(),U=I.left+I.width/2,L=j.clientX<U?B:B+1;A(L)}},k=j=>{E.current&&!E.current.contains(j.relatedTarget)&&(g.current=null,D())},T=()=>{let j=v;m.current!==null&&j!==null&&j>m.current&&j--,m.current!==null&&j!==null&&m.current!==j&&t(B=>{const M=[...B],I=M.splice(m.current,1)[0];return M.splice(j,0,I),M}),m.current=null,g.current=null,C(null),D()},F=(j,B)=>{m.current=B,C(B),D()},_=j=>{if(m.current===null)return;j.cancelable&&j.preventDefault();const B=j.touches[0],M=document.elementFromPoint(B.clientX,B.clientY),I=M==null?void 0:M.closest('[draggable="true"]');if(I){const U=y.current.indexOf(I);if(U!==-1&&U!==m.current){g.current=U;const N=I.getBoundingClientRect(),L=N.left+N.width/2,$=B.clientX<L?U:U+1;A($);return}}g.current=null,D()},O=()=>{let j=v;m.current!==null&&j!==null&&j>m.current&&j--,m.current!==null&&j!==null&&m.current!==j&&t(B=>{const M=[...B],I=M.splice(m.current,1)[0];return M.splice(j,0,I),M}),m.current=null,g.current=null,C(null),D()},K=!n&&e.length>1;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs($n,{children:["Photos (",e.length,"/",Va,")"," ",K&&p.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(Use handle to drag and reorder)"})]}),e.length===0&&!r&&u===0&&p.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Add photos below."}),r&&p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:[...Array(o||2)].map((j,B)=>p.jsx(l4,{className:"h-16 w-16 rounded aspect-square"},B))}),p.jsxs("div",{ref:E,className:"relative grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",onDragOver:j=>j.preventDefault(),onDragLeave:k,onTouchStart:j=>{},onTouchMove:_,onTouchEnd:O,onTouchCancel:O,children:[p.jsx("div",{ref:b,className:"drop-indicator"}),e.map((j,B)=>{var H;const M=kn(j)?j.localId:j.photoId,I=l.current.get(M),U=j.crop;let N=null;kn(j)?j.originalDimensions&&(N={filename:j.file.name,mimeType:j.file.type,width:j.originalDimensions.width,height:j.originalDimensions.height,exifDate:(H=j.exifData)==null?void 0:H.exifDate}):sD(j)&&(N=c.current.get(j.photoId)??null);const L=!!I;return p.jsxs("div",{ref:$=>y.current[B]=$,draggable:K,onDragStart:$=>{$.target instanceof Element&&!$.target.closest("button")&&K&&P($,B)},onDragOver:$=>K&&R($,B),onDragEnd:K?T:void 0,onTouchStart:$=>{$.target instanceof Element&&!$.target.closest("button")&&K&&F($,B)},className:ie("relative group aspect-square border rounded bg-muted overflow-hidden touch-manipulation",K?"cursor-grab active:cursor-grabbing":"cursor-default",w===B?"opacity-50 scale-95 shadow-lg z-10":"opacity-100 z-0","transition-all duration-150 ease-in-out"),children:[p.jsx(i4,{imageUrl:I,thumbnailUrl:I,crop:U,photoMetadata:N,altText:`Photo ${B+1} thumbnail`,className:"rounded",enableLoadingState:!!I&&I.startsWith("blob:")}),p.jsxs("div",{className:ie("absolute inset-0 bg-black/40 flex items-center justify-center gap-4 rounded transition-opacity duration-150","opacity-100 hover:opacity-90",n&&"opacity-0 pointer-events-none"),style:{zIndex:10},onClick:$=>$.stopPropagation(),children:[p.jsx("div",{className:"z-20",children:p.jsx(be,{type:"button",variant:"outline",size:"icon",className:"h-12 w-12 bg-white/90 hover:bg-white cursor-pointer",onClick:$=>{$.stopPropagation(),$.preventDefault(),!n&&!r&&L?(S.log(`[PhotoManager] Crop button clicked for photo ${B}`),s(B)):L||S.warn(`Cannot open cropper: original URL missing for ${M}`)},disabled:n||!L,children:p.jsx(b8,{className:"h-5 w-5"})})}),p.jsx("div",{className:"z-20",children:p.jsx(be,{type:"button",variant:"destructive",size:"icon",className:"h-12 w-12 cursor-pointer",onClick:$=>{$.stopPropagation(),$.preventDefault(),!n&&!r&&(S.log(`[PhotoManager] Delete button clicked for photo ${B}`),i(B))},disabled:n,children:p.jsx(Em,{className:"h-5 w-5"})})})]}),K&&p.jsx("div",{className:"absolute top-1 left-1 opacity-70 group-hover:opacity-90 transition-opacity cursor-grab p-2 bg-black/60 rounded-sm drag-handle",style:{zIndex:20},children:p.jsx(k8,{className:"h-4 w-4 text-white"})})]},M+"-"+B)}),e.length<Va&&p.jsx(X9,{onFilesSelect:a,disabled:n,className:"aspect-square h-full w-full p-0 m-0",maxFiles:Va,currentFileCount:e.length,children:p.jsx("button",{type:"button",className:"w-full h-full flex flex-col items-center justify-center border-2 border-dashed border-muted-foreground/50 rounded hover:border-primary hover:bg-accent transition-colors disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:border-muted-foreground/50 disabled:hover:bg-transparent",disabled:n,"aria-label":"Add photo",children:f?p.jsx(Ht,{className:"h-5 w-5 animate-spin text-muted-foreground"}):p.jsxs(p.Fragment,{children:[p.jsx(R8,{className:"h-5 w-5 text-muted-foreground mb-1"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Add"})]})})})]}),d!==null&&d<u&&!n&&p.jsxs("div",{className:"mt-2 text-sm text-muted-foreground flex items-center",children:[p.jsx(Ht,{className:"h-4 w-4 mr-2 animate-spin"})," Processing photo ",d+1," of"," ",u,"..."]})]})}function e7({date:e,onDateChange:t,showExifWarning:n,initialExifDate:r,onUseExifDate:o,isBusy:s}){return p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{htmlFor:"date",children:"Date"}),p.jsx("input",{id:"date",type:"date",className:"input-basic",value:e.toISOString().split("T")[0],onChange:t,disabled:s}),n&&r&&p.jsxs("div",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400 flex items-center space-x-1",children:[p.jsx(O8,{className:"h-3 w-3 flex-shrink-0"}),p.jsxs("span",{children:["First photo date (",r,") differs."]}),p.jsx("button",{type:"button",onClick:o,className:"underline cursor-pointer text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:"Use photo date"})]})]})}const T4=h.forwardRef(({className:e,...t},n)=>p.jsx("textarea",{className:ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));T4.displayName="Textarea";function t7({content:e,setContent:t,isBusy:n,onKeyDown:r,textAreaRef:o}){return p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{htmlFor:"content",children:"Content"}),p.jsx(T4,{ref:o,id:"content",placeholder:"Write thoughts...",className:"min-h-[120px]",value:e,onChange:s=>t(s.target.value),disabled:n,onKeyDown:r})]})}function n7({isBusy:e,isSaving:t,isEditMode:n,canSave:r,onCancel:o,onSave:s}){return p.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 border-t pt-4 mt-4",children:[p.jsx(be,{variant:"outline",onClick:o,disabled:e,children:"Cancel"}),p.jsx(be,{onClick:s,disabled:e||t||!r,children:t?p.jsxs(p.Fragment,{children:[p.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):n?"Update Entry":"Save Entry"})]})}function r7(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}function o7(e=2e3,t=new Date().getFullYear()+5){const n=[];for(let r=e;r<=t;r++)n.push(r);return n}function s7(){const{isMonthYearPickerOpen:e,closeMonthYearPicker:t,handleMonthYearSelect:n,currentMonth:r,currentYear:o,navigate:s}=Hr(),[i,a]=h.useState(r),[l,c]=h.useState(o);h.useEffect(()=>{e&&(a(r),c(o))},[e,r,o]);const u=r7(),d=o7(2e3,new Date().getFullYear()+5),f=h.useCallback(()=>{t(),S.log(`[MonthYearPicker] Navigating to selected month/year: ${l}-${i}`),s(`/month/${l}/${i}`)},[i,l,s,t]);return p.jsx(Bs,{open:e,onOpenChange:t,children:p.jsxs(rs,{className:"sm:max-w-md",children:[p.jsxs(os,{children:[p.jsx(ss,{children:"Select Month and Year"}),p.jsx(ra,{children:"Choose the month and year you want to navigate to"})]}),p.jsx("div",{className:"grid gap-4 py-4",children:p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"month-select",className:"text-sm font-medium",children:"Month"}),p.jsx("select",{id:"month-select",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:i,onChange:m=>a(parseInt(m.target.value)),children:u.map((m,g)=>p.jsx("option",{value:g+1,children:m},g))})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"year-select",className:"text-sm font-medium",children:"Year"}),p.jsx("select",{id:"year-select",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:l,onChange:m=>c(parseInt(m.target.value)),children:d.map(m=>p.jsx("option",{value:m,children:m},m))})]})]})}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx(be,{variant:"outline",onClick:t,children:"Cancel"}),p.jsx(be,{onClick:f,children:"Apply"})]})]})})}function Rw(e){const t=e.params.year?parseInt(e.params.year,10):void 0,n=e.params.month?parseInt(e.params.month,10):void 0,{monthViewType:r,isLoadingEntries:o,isLoadingImagesMeta:s,isSaving:i,operationError:a,clearOperationError:l,isOnline:c,currentMonth:u,currentYear:d,handleMonthYearSelect:f}=Hr();ig(),mm(),h.useEffect(()=>{t&&n&&(S.log(`[Home] URL parameters detected: year=${t}, month=${n}`),(t!==d||n!==u)&&(S.log(`[Home] Navigating to year=${t}, month=${n} (from ${d}-${u})`),f(n,t)))},[t,n,d,u,f]);const m=i,g=i?"Saving...":"",w={enter:{opacity:0,transition:{duration:.15}},center:{opacity:1,transition:{duration:.2,delay:.1}},exit:{opacity:0,transition:{duration:.15}}},C=c?"pt-16":"pt-20";return p.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex flex-col",children:[p.jsx(p_,{}),m&&p.jsxs("div",{className:ie("fixed left-1/2 transform -translate-x-1/2 z-20 bg-background/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg border flex items-center text-sm text-muted-foreground",c?"top-16":"top-20","mt-2"),children:[p.jsx(Ht,{className:"h-4 w-4 animate-spin mr-2"}),p.jsx("span",{children:g})]}),a&&!m&&p.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded flex justify-between items-center max-w-sm shadow-md z-50",children:[p.jsxs("span",{children:["Error: ",a.message]}),p.jsx("button",{onClick:l,className:"ml-3 font-bold","aria-label":"Close",children:p.jsx(md,{className:"h-4 w-4"})})]}),p.jsxs("main",{className:ie("container mx-auto px-4 pb-4 flex-grow flex flex-col overflow-hidden",C),children:[p.jsx(L$,{}),p.jsx("div",{className:"mx-auto max-w-3xl w-full flex-grow flex flex-col overflow-hidden",children:p.jsx("div",{className:"flex-grow overflow-hidden relative",children:o||s?p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 z-10",children:p.jsx(Ht,{className:"h-8 w-8 animate-spin text-primary"})}):p.jsx(Xg,{initial:!1,mode:"wait",children:p.jsx(_d.div,{variants:w,initial:"enter",animate:"center",exit:"exit",className:"absolute inset-0 view-container",children:p.jsx("div",{className:"h-full",children:r==="calendar"?p.jsx(B$,{}):p.jsx(j9,{})})},r)})})})]}),p.jsx(s7,{}),p.jsx(_9,{}),p.jsx(Y9,{})]})}var R4=["PageUp","PageDown"],F4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],M4={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},sa="Slider",[gp,i7,a7]=ud(sa),[N4,U7]=En(sa,[a7]),[l7,zd]=N4(sa),I4=h.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:s=1,orientation:i="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:m=!1,form:g,...w}=e,C=h.useRef(new Set),v=h.useRef(0),y=i==="horizontal"?c7:u7,[E=[],b]=Vr({prop:u,defaultProp:c,onChange:T=>{var _;(_=[...C.current][v.current])==null||_.focus(),d(T)}}),D=h.useRef(E);function A(T){const F=m7(E,T);k(T,F)}function P(T){k(T,v.current)}function R(){const T=D.current[v.current];E[v.current]!==T&&f(E)}function k(T,F,{commit:_}={commit:!1}){const O=y7(s),K=w7(Math.round((T-r)/s)*s+r,O),j=Qg(K,[r,o]);b((B=[])=>{const M=h7(B,j,F);if(v7(M,l*s)){v.current=M.indexOf(j);const I=String(M)!==String(B);return I&&_&&f(M),I?M:B}else return B})}return p.jsx(l7,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:o,valueIndexToChangeRef:v,thumbs:C.current,values:E,orientation:i,form:g,children:p.jsx(gp.Provider,{scope:e.__scopeSlider,children:p.jsx(gp.Slot,{scope:e.__scopeSlider,children:p.jsx(y,{"aria-disabled":a,"data-disabled":a?"":void 0,...w,ref:t,onPointerDown:se(w.onPointerDown,()=>{a||(D.current=E)}),min:r,max:o,inverted:m,onSlideStart:a?void 0:A,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:R,onHomeKeyDown:()=>!a&&k(r,0,{commit:!0}),onEndKeyDown:()=>!a&&k(o,E.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:F})=>{if(!a){const K=R4.includes(T.key)||T.shiftKey&&F4.includes(T.key)?10:1,j=v.current,B=E[j],M=s*K*F;k(B+M,j,{commit:!0})}}})})})})});I4.displayName=sa;var[j4,_4]=N4(sa,{startEdge:"left",endEdge:"right",size:"width",direction:1}),c7=h.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,[d,f]=h.useState(null),m=Le(t,y=>f(y)),g=h.useRef(void 0),w=Zi(o),C=w==="ltr",v=C&&!s||!C&&s;function x(y){const E=g.current||d.getBoundingClientRect(),b=[0,E.width],A=mx(b,v?[n,r]:[r,n]);return g.current=E,A(y-E.left)}return p.jsx(j4,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:p.jsx(B4,{dir:w,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:y=>{const E=x(y.clientX);i==null||i(E)},onSlideMove:y=>{const E=x(y.clientX);a==null||a(E)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:y=>{const b=M4[v?"from-left":"from-right"].includes(y.key);c==null||c({event:y,direction:b?-1:1})}})})}),u7=h.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onStepKeyDown:l,...c}=e,u=h.useRef(null),d=Le(t,u),f=h.useRef(void 0),m=!o;function g(w){const C=f.current||u.current.getBoundingClientRect(),v=[0,C.height],y=mx(v,m?[r,n]:[n,r]);return f.current=C,y(w-C.top)}return p.jsx(j4,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:p.jsx(B4,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const C=g(w.clientY);s==null||s(C)},onSlideMove:w=>{const C=g(w.clientY);i==null||i(C)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:w=>{const v=M4[m?"from-bottom":"from-top"].includes(w.key);l==null||l({event:w,direction:v?-1:1})}})})}),B4=h.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:a,onStepKeyDown:l,...c}=e,u=zd(sa,n);return p.jsx(Se.span,{...c,ref:t,onKeyDown:se(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):R4.concat(F4).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:se(e.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:se(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:se(e.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),L4="SliderTrack",O4=h.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=zd(L4,n);return p.jsx(Se.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});O4.displayName=L4;var xp="SliderRange",$4=h.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=zd(xp,n),s=_4(xp,n),i=h.useRef(null),a=Le(t,i),l=o.values.length,c=o.values.map(f=>V4(f,o.min,o.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return p.jsx(Se.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:a,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});$4.displayName=xp;var vp="SliderThumb",z4=h.forwardRef((e,t)=>{const n=i7(e.__scopeSlider),[r,o]=h.useState(null),s=Le(t,a=>o(a)),i=h.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return p.jsx(d7,{...e,ref:s,index:i})}),d7=h.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...s}=e,i=zd(vp,n),a=_4(vp,n),[l,c]=h.useState(null),u=Le(t,x=>c(x)),d=l?i.form||!!l.closest("form"):!0,f=yd(l),m=i.values[r],g=m===void 0?0:V4(m,i.min,i.max),w=p7(r,i.values.length),C=f==null?void 0:f[a.size],v=C?g7(C,g,a.direction):0;return h.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${v}px)`},children:[p.jsx(gp.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(Se.span,{role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...s,ref:u,style:m===void 0?{display:"none"}:e.style,onFocus:se(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),d&&p.jsx(f7,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},r)]})});z4.displayName=vp;var f7=e=>{const{value:t,...n}=e,r=h.useRef(null),o=tg(t);return h.useEffect(()=>{const s=r.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==t&&l){const c=new Event("input",{bubbles:!0});l.call(s,t),s.dispatchEvent(c)}},[o,t]),p.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function h7(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,s)=>o-s)}function V4(e,t,n){const s=100/(n-t)*(e-t);return Qg(s,[0,100])}function p7(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function m7(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function g7(e,t,n){const r=e/2,s=mx([0,50],[0,r]);return(r-s(t)*n)*n}function x7(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function v7(e,t){if(t>0){const n=x7(e);return Math.min(...n)>=t}return!0}function mx(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function y7(e){return(String(e).split(".")[1]||"").length}function w7(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var U4=I4,C7=O4,E7=$4,S7=z4;const H4=h.forwardRef(({className:e,...t},n)=>p.jsxs(U4,{ref:n,className:ie("relative flex w-full touch-none select-none items-center",e),...t,children:[p.jsx(C7,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:p.jsx(E7,{className:"absolute h-full bg-primary"})}),p.jsx(S7,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));H4.displayName=U4.displayName;const at=250,Fw=200;function b7({imageUrl:e,onCropComplete:t,onCancel:n,initialCropData:r,initialImageDimensions:o}){const s=h.useRef(null),i=h.useRef(null),a=h.useRef(null),l=h.useRef(!1),c=h.useRef(!1),u=h.useRef(null),d=h.useRef(null),[f,m]=h.useState({x:0,y:0,scale:1}),[g,w]=h.useState(o||{width:0,height:0}),[C,v]=h.useState(!1),[x,y]=h.useState(!1),[E,b]=h.useState(!1),[D,A]=h.useState(.1),[P,R]=h.useState(5),[k,T]=h.useState(!1),[F,_]=h.useState({x:0,y:0,pinchDistance:void 0,imageX:0,imageY:0}),[O,K]=h.useState(null),[j,B]=h.useState(null),[M,I]=h.useState(null),[U,N]=h.useState(null),L=C&&x,H=e!==d.current&&!L,$=J=>!J||typeof J!="object"?!1:"x"in J&&"y"in J&&"w"in J&&"h"in J&&typeof J.x=="number"&&typeof J.y=="number"&&typeof J.w=="number"&&typeof J.h=="number"&&J.w>0&&J.h>0&&J.w===J.h,fe=h.useCallback((J,q)=>J<=0||q<=0||at<=0?.1:Math.max(at/J,at/q),[]),ce=h.useCallback((J,q)=>J<=0||q<=0||at<=0||Fw<=0?5:Math.max(Math.max(at/J,at/q),at/Fw),[]),Y=h.useCallback((J,q,oe)=>{const pe=s.current;if(!C||g.width<=0||g.height<=0)return{x:J,y:q};const me=(pe==null?void 0:pe.clientWidth)??0,je=(pe==null?void 0:pe.clientHeight)??0;if(me<=0||je<=0)return{x:J,y:q};const Re=g.width*oe,Ge=g.height*oe,mt=(me-at)/2,Jt=(je-at)/2,_t=mt,nn=mt+at-Re,rn=Jt,Vt=Jt+at-Ge,yt=Re<at?mt+(at-Re)/2:Math.min(_t,Math.max(nn,J)),mn=Ge<at?Jt+(at-Ge)/2:Math.min(rn,Math.max(Vt,q));return{x:yt,y:mn}},[C,g]),ne=h.useCallback((J,q)=>{if(!C||!l.current||x||g.width<=0||g.height<=0)return;const oe=g.width,pe=g.height,me=fe(oe,pe),je=ce(oe,pe);A(me),R(je);let Re,Ge,mt;if($(r)){Re=at/r.w,Re=Math.max(me,Math.min(je,Re));const nn=(J-at)/2,rn=(q-at)/2;Ge=nn-r.x*Re,mt=rn-r.y*Re}else Re=Math.max(at/oe,at/pe),Re=Math.max(me,Re),Ge=(J-oe*Re)/2,mt=(q-pe*Re)/2;const _t={...Y(Ge,mt,Re),scale:Re};m(_t),y(!0),c.current=!0},[C,x,g,r,fe,ce,Y]);h.useEffect(()=>(l.current=!0,()=>{l.current=!1,u.current&&u.current.disconnect()}),[]),h.useEffect(()=>{e!==d.current&&(S.log(`[ImprovedImageCropper] Image URL changed: ${d.current||"none"}  ${e}`),v(!1),y(!1),c.current=!1,B(d.current),I(f),N(g),d.current=e,S.log("[ImprovedImageCropper] Reset loader state and stored previous image state"))},[e,f,g]),h.useEffect(()=>{d.current!==e?(d.current&&x?(B(d.current),I(f),N(g)):(B(null),I(null),N(null)),v(!1),y(!1),w(o||{width:0,height:0}),m({x:0,y:0,scale:1}),A(.1),R(5),c.current=!1,b(!1),d.current=e):o&&!x&&(o.width!==g.width||o.height!==g.height)&&w(o)},[e,o]);const ue=h.useCallback(()=>{const J=i.current;if(S.log(`[ImprovedImageCropper] handleImageLoad called for image: ${e}`),!J){S.warn("[ImprovedImageCropper] Image ref is null in handleImageLoad");return}if(!l.current){S.warn("[ImprovedImageCropper] Component unmounted during image load");return}if(J.src!==e){S.warn(`[ImprovedImageCropper] Image src mismatch: ${J.src} vs ${e}`);return}const q=J.naturalWidth,oe=J.naturalHeight;if(S.log(`[ImprovedImageCropper] Image loaded with dimensions: ${q}${oe}`),q<=0||oe<=0){S.error(`[ImprovedImageCropper] Image has invalid dimensions on load: ${q}${oe}`),v(!1),y(!1);return}(g.width!==q||g.height!==oe)&&(S.log(`[ImprovedImageCropper] Updating image dimensions: ${g.width}${g.height}  ${q}${oe}`),w({width:q,height:oe})),v(!0),S.log("[ImprovedImageCropper] Image successfully loaded and ready")},[e,g]),Te=h.useCallback(()=>{const J=i.current;!J||!l.current||J.src!==e||(S.error(`[Cropper] Image failed to load internally: ${e}`),v(!1),y(!1))},[e]);h.useEffect(()=>{const J=s.current;if(J&&C&&!x){const q=me=>{if(!(!l.current||x))for(const je of me){const{width:Re,height:Ge}=je.contentRect||{width:je.target.clientWidth,height:je.target.clientHeight};Re>0&&Ge>0?ne(Re,Ge):S.warn("[Cropper] ResizeObserver triggered with zero dimensions.")}};u.current&&u.current.disconnect(),u.current=new ResizeObserver(q),u.current.observe(J);const oe=J.clientWidth,pe=J.clientHeight;return oe>0&&pe>0&&ne(oe,pe),()=>{u.current&&u.current.disconnect(),u.current=null}}else u.current&&(u.current.disconnect(),u.current=null)},[C,x,ne]),h.useEffect(()=>{if(C&&x){const{x:J,y:q,scale:oe}=f,pe=Y(J,q,oe);(pe.x!==J||pe.y!==q)&&m(me=>({...me,...pe}))}},[f.scale,C,x,Y,f.x,f.y]);const Pe=h.useCallback((J,q,oe)=>{!L||!s.current||m(pe=>{let me=pe.scale*J;if(me=Math.max(D,Math.min(P,me)),me===pe.scale)return pe;const je=(q-pe.x)/pe.scale,Re=(oe-pe.y)/pe.scale,Ge=q-je*me,mt=oe-Re*me;return{scale:me,...Y(Ge,mt,me)}})},[L,D,P,Y]),re=(J,q,oe)=>{!L||E||(T(!0),_({x:J,y:q,pinchDistance:oe,imageX:f.x,imageY:f.y}),K(oe??null))},xe=(J,q,oe)=>{if(!(!k||!L||!s.current)){if(oe!==void 0&&O!==null){const pe=oe/O,me=s.current.getBoundingClientRect(),je=F.x-me.left,Re=F.y-me.top;Pe(pe,je,Re),K(oe)}else if(O===null){const pe=J-F.x,me=q-F.y,je=F.imageX+pe,Re=F.imageY+me;m(Ge=>({...Ge,...Y(je,Re,Ge.scale)}))}}},ve=()=>{k&&(T(!1),K(null))},he=J=>re(J.clientX,J.clientY),Ue=J=>xe(J.clientX,J.clientY),ct=J=>{if(J.touches.length===2){const q=J.touches[0],oe=J.touches[1],pe=Math.hypot(oe.clientX-q.clientX,oe.clientY-q.clientY),me=(q.clientX+oe.clientX)/2,je=(q.clientY+oe.clientY)/2;re(me,je,pe)}else J.touches.length===1&&re(J.touches[0].clientX,J.touches[0].clientY)},Je=J=>{if(k)if(J.cancelable&&J.preventDefault(),J.touches.length===2){const q=J.touches[0],oe=J.touches[1],pe=Math.hypot(oe.clientX-q.clientX,oe.clientY-q.clientY),me=(q.clientX+oe.clientX)/2,je=(q.clientY+oe.clientY)/2;xe(me,je,pe)}else J.touches.length===1&&xe(J.touches[0].clientX,J.touches[0].clientY)},Ye=h.useCallback(J=>{if(!L||!s.current||E)return;J.preventDefault();const q=s.current.getBoundingClientRect(),oe=J.clientX-q.left,pe=J.clientY-q.top,je=1+J.deltaY*-.005;Pe(je,oe,pe)},[L,E,Pe]);h.useEffect(()=>{if(k)return window.addEventListener("mousemove",Ue),window.addEventListener("touchmove",Je,{passive:!1}),window.addEventListener("mouseup",ve),window.addEventListener("touchend",ve),window.addEventListener("touchcancel",ve),()=>{window.removeEventListener("mousemove",Ue),window.removeEventListener("touchmove",Je),window.removeEventListener("mouseup",ve),window.removeEventListener("touchend",ve),window.removeEventListener("touchcancel",ve)}},[k,Je]),h.useEffect(()=>{const J=s.current;if(J&&L)return J.addEventListener("wheel",Ye,{passive:!1}),()=>J.removeEventListener("wheel",Ye)},[L,Ye]);const ht=h.useCallback(J=>{if(!s.current||!L||(J=Math.max(D,Math.min(P,J)),J===f.scale))return;const q=s.current,oe=q.clientWidth/2,pe=q.clientHeight/2;Pe(J/f.scale,oe,pe)},[L,D,P,f.scale,Pe]),nt=()=>ht(f.scale*1.15),Xe=()=>ht(f.scale/1.15),Mt=J=>ht(J[0]),Ee=()=>{if(y(!1),c.current=!1,m({x:0,y:0,scale:1}),s.current&&C){const J=s.current.clientWidth,q=s.current.clientHeight;J>0&&q>0&&ne(J,q)}},He=()=>{S.log("[ImprovedImageCropper] performCrop called");const J=s.current,q=i.current;if(S.log("[ImprovedImageCropper] Checking crop preconditions:",{hasContainer:!!J,isInitialized:x,hasCurrentImage:!!q,naturalWidth:q==null?void 0:q.naturalWidth,naturalHeight:q==null?void 0:q.naturalHeight,imageUrl:e}),!J||!x||!q||!q.naturalWidth||!q.naturalHeight||q.naturalWidth<=0||q.naturalHeight<=0){S.error("[ImprovedImageCropper] Cannot crop: Preconditions fail");return}S.log("[ImprovedImageCropper] Starting crop processing"),b(!0);try{const oe=J.clientWidth,pe=J.clientHeight;S.log(`[ImprovedImageCropper] Container dimensions: ${oe}${pe}`);const me=(oe-at)/2,je=(pe-at)/2;S.log(`[ImprovedImageCropper] Frame position: (${me}, ${je})`);const Re=me-f.x,Ge=je-f.y,mt=Re/f.scale,Jt=Ge/f.scale;S.log(`[ImprovedImageCropper] Source position (original): (${mt}, ${Jt})`);const _t=at/f.scale,nn=at/f.scale;S.log(`[ImprovedImageCropper] Source dimensions (original): ${_t}${nn}`);const rn=Math.max(0,mt),Vt=Math.max(0,Jt),yt=Math.min(_t,q.naturalWidth-rn),mn=Math.min(nn,q.naturalHeight-Vt);if(S.log(`[ImprovedImageCropper] Clamped source: (${rn}, ${Vt}, ${yt}, ${mn})`),yt<=0||mn<=0){const dr=`Crop area zero/negative: W=${yt}, H=${mn}`;throw S.error(`[ImprovedImageCropper] ${dr}`),new Error(dr)}let wt={x:Math.round(rn),y:Math.round(Vt),w:Math.round(yt),h:Math.round(mn)};S.log(`[ImprovedImageCropper] Initial crop data: (${wt.x}, ${wt.y}, ${wt.w}, ${wt.h})`);const qn=Math.min(wt.w,wt.h);if(wt.w=qn,wt.h=qn,S.log(`[ImprovedImageCropper] Final square crop data: (${wt.x}, ${wt.y}, ${wt.w}, ${wt.h})`),wt.w<=0){const dr=`Final crop width <= 0: ${wt.w}`;throw S.error(`[ImprovedImageCropper] ${dr}`),new Error(dr)}l.current?(S.log("[ImprovedImageCropper] Component still mounted, calling onCropComplete with final crop data"),t(wt)):S.warn("[ImprovedImageCropper] Component unmounted, skipping onCropComplete call")}catch(oe){S.error("[ImprovedImageCropper] Error during cropping:",oe),oe instanceof Error&&(S.error(`[ImprovedImageCropper] Error message: ${oe.message}`),S.error(`[ImprovedImageCropper] Error stack: ${oe.stack}`))}finally{l.current&&(S.log("[ImprovedImageCropper] Setting isProcessing to false"),b(!1))}},ot=H||!x&&!E,jt=!x&&!E,jn=!x||E,rt={position:"absolute",top:0,left:0,maxWidth:"none",maxHeight:"none",willChange:"transform, opacity"},pt={...rt,transform:`translate(${f.x}px, ${f.y}px) scale(${f.scale})`,opacity:x?1:0,transition:k?"none":"transform 0.1s linear",zIndex:2},st={...rt,transform:M?`translate(${M.x}px, ${M.y}px) scale(${M.scale})`:"translate(0px, 0px) scale(1)",opacity:x?0:1,pointerEvents:"none",zIndex:1};return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"text-center mb-2 flex-shrink-0 relative h-8",children:[p.jsx("h3",{className:"text-lg font-medium absolute left-1/2 top-0 transform -translate-x-1/2",children:"Adjust Image"}),E&&p.jsx("div",{className:"absolute top-0 right-0 mr-2 mt-1 z-30",children:p.jsx(Ht,{className:"h-5 w-5 animate-spin text-muted-foreground"})})]}),p.jsxs("div",{ref:s,className:ie("relative overflow-hidden bg-checkerboard rounded-lg flex-grow w-full","min-h-[250px] select-none touch-none","border border-muted",k?"cursor-grabbing":"cursor-grab"),onMouseDown:he,onTouchStart:ct,children:[j&&M&&U&&p.jsx("img",{ref:a,src:j,alt:"",className:"absolute transform-gpu origin-top-left block",style:st,draggable:!1,width:U.width,height:U.height},j+"-prev"),p.jsx("img",{ref:i,src:e,alt:"Crop preview",className:"absolute transform-gpu origin-top-left block",style:pt,onLoad:ue,onError:Te,draggable:!1,loading:"eager"},e),ot&&p.jsx("div",{className:"absolute inset-0 z-[5] flex items-center justify-center bg-black/20 pointer-events-none",children:p.jsx(Ht,{className:"h-8 w-8 animate-spin text-white/80"})}),p.jsxs("div",{className:"absolute inset-0 z-[3] pointer-events-none flex items-center justify-center","aria-hidden":"true",children:[" ",p.jsx("div",{className:"absolute inset-0",style:{boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}})," ",p.jsx("div",{className:"absolute border border-white rounded",style:{width:`${at}px`,height:`${at}px`,boxShadow:"0 0 0 9999px transparent"}})," "]})]}),p.jsxs("div",{className:"mt-6 space-y-5 flex-shrink-0",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs(be,{type:"button",variant:"outline",size:"icon",onClick:Xe,disabled:!L||E||f.scale<=D,className:"h-9 w-9 flex-shrink-0","aria-label":"Zoom out",children:[" ",p.jsx(z8,{className:"h-4 w-4"})," "]}),p.jsx(H4,{value:[f.scale],min:D,max:P,step:(P-D)/100,onValueChange:Mt,className:"flex-grow",disabled:!L||E,"aria-label":"Zoom slider"}),p.jsxs(be,{type:"button",variant:"outline",size:"icon",onClick:nt,disabled:!L||E||f.scale>=P,className:"h-9 w-9 flex-shrink-0","aria-label":"Zoom in",children:[" ",p.jsx($8,{className:"h-4 w-4"})," "]})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsxs(be,{type:"button",variant:"outline",onClick:n,disabled:E,children:[" ","Cancel"," "]}),p.jsxs("div",{className:"space-x-2",children:[p.jsxs(be,{type:"button",variant:"ghost",onClick:Ee,disabled:!L||E,className:"px-3",children:[" ",p.jsx(_8,{className:"h-4 w-4 mr-2"})," Reset"," "]}),p.jsx(be,{type:"button",variant:"default",onClick:He,disabled:jn,className:"px-4 w-[110px]",children:E?p.jsxs(p.Fragment,{children:[" ",p.jsx(Ht,{className:"h-4 w-4 mr-2 animate-spin"})," Applying..."," "]}):jt?p.jsxs(p.Fragment,{children:[" ",p.jsx(Ht,{className:"h-4 w-4 mr-2 animate-spin"})," Loading..."," "]}):p.jsxs(p.Fragment,{children:[" ",p.jsx(qS,{className:"h-4 w-4 mr-2"})," Apply"," "]})})]})]})]})]})}function Mw({open:e,onOpenChange:t,onConfirm:n,title:r,description:o,confirmText:s="Confirm",cancelText:i="Cancel",isConfirming:a=!1}){const l=c=>{c.preventDefault(),a||n()};return p.jsx(P4,{open:e,onOpenChange:t,children:p.jsxs(lx,{children:[p.jsxs(cx,{children:[p.jsx(dx,{children:r}),p.jsx(fx,{children:o})]}),p.jsxs(ux,{children:[p.jsx(px,{disabled:a,children:i}),p.jsxs(hx,{onClick:l,disabled:a,className:"bg-red-500 hover:bg-red-600 focus:ring-red-500",children:[a?p.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}):null,a?"Confirming...":s]})]})]})})}const D7=(e,t,n)=>{if(e<=1)return;const r=[];new Set([...Object.keys(t),...Object.keys(n)]).forEach(s=>{const i=t[s],a=n[s];if(i!==a){let l="ref changed";typeof a!="object"&&typeof a!="function"&&(l=`value changed: ${i} -> ${a}`),r.push({key:s,change:l,prev:i,current:a})}}),r.length>0&&S.warn(`[EntryForm Init Effect init-${e}] Re-running due to changed dependencies:`,r.map(s=>s.key))};function B0({entryId:e}){const t=Hr(),{handleSaveEntry:n,getEntryById:r,loadSpecificEntry:o,getPhotoBlobUrl:s,imagesMetadata:i,isSaving:a,shareKeyForForm:l,clearShareKeyForForm:c,deleteSharedFilesFromStorage:u,navigate:d,isLoadingImagesMeta:f,isClientReady:m,activeJournal:g,journalList:w}=t,{toast:C}=Ml(),[v,x]=h.useState(!1),[y,E]=h.useState(null),[b,D]=h.useState(null),[A,P]=h.useState(()=>{const Q=window.location.hash.split("?")[1];let Z=null;if(Q)try{Z=new URLSearchParams(Q).get("date")}catch{}if(Z&&/^\d{4}-\d{2}-\d{2}$/.test(Z))return S.log(`[EntryForm State Init] Initializing date from param: ${Z}`),new Date(Z+"T00:00:00Z");{S.log("[EntryForm State Init] Initializing date to today (UTC).");const ye=new Date;return new Date(Date.UTC(ye.getFullYear(),ye.getMonth(),ye.getDate()))}}),[R,k]=h.useState(!1),[T,F]=h.useState(""),[_,O]=h.useState([]),[K,j]=h.useState(!1),[B,M]=h.useState(null),[I,U]=h.useState(!1),[N,L]=h.useState(null),[H,$]=h.useState(null),[fe,ce]=h.useState(!0),[Y,ne]=h.useState([]),[ue,Te]=h.useState(null),[Pe,re]=h.useState(!1),[xe,ve]=h.useState(null),[he,Ue]=h.useState(null),[ct,Je]=h.useState(!1),[Ye,ht]=h.useState(!1),[nt,Xe]=h.useState(new Map),Mt=h.useRef(null),Ee=h.useRef(!0),He=h.useRef(new Map),ot=h.useRef(new Map),jt=h.useRef(null),jn=h.useRef(!1),rt=h.useRef(null),pt=h.useRef(!1),st=h.useRef(0),J=h.useRef({}),q=h.useRef(null);No.getInstance();const oe=!!e,pe=ue!==null&&ue<Y.length,me=a||pe||Pe,je=!fe&&!me&&!a&&_.length>0&&!I&&Y.length===0&&ct,Re=h.useMemo(()=>{const te=y?y.date:A.toISOString().split("T")[0],Q=y?y.content:"",Z=y?y.photos:[],ye=new Set(Z.map(de=>de.photoId));return{date:te,content:Q,photoIds:ye}},[y,A]);h.useEffect(()=>{if(fe||f){Je(!1);return}const te=A.toISOString().split("T")[0]!==Re.date,Q=T!==Re.content,Z=new Set(_.map(we=>kn(we)?we.localId:we.photoId)),ye=Re.photoIds;let de=Z.size!==ye.size;if(!de){for(const we of Z)ye.has(we)||(de=!0);if(!de)for(const we of ye)Z.has(we)||(de=!0)}let De=!1;if(y&&!de){for(const we of _)if(!kn(we)){const _e=y.photos.find(Ae=>Ae.photoId===we.photoId);if(_e&&(we.crop.x!==_e.crop.x||we.crop.y!==_e.crop.y||we.crop.w!==_e.crop.w||we.crop.h!==_e.crop.h)){De=!0;break}}}if(oe)Je(te||Q||de||De);else{const we=(()=>{const Qe=window.location.hash.split("?")[1];let Ze=null;if(Qe)try{Ze=new URLSearchParams(Qe).get("date")}catch{}if(Ze&&/^\d{4}-\d{2}-\d{2}$/.test(Ze))return Ze;{const We=new Date;return new Date(Date.UTC(We.getFullYear(),We.getMonth(),We.getDate())).toISOString().split("T")[0]}})(),_e=A.toISOString().split("T")[0]!==we;Je(T.trim()!==""||_.length>0||_e)}},[A,T,_,Re.date,Re.content,Re.photoIds,oe,fe,f,y]);const Ge=h.useCallback(async te=>{if(!Ee.current||te>=Y.length)return;const Q=Y[te];if(!Q||nt.has(Q.localId))return;jt.current&&jt.current.abort();const Z=new AbortController;jt.current=Z;try{const[ye,de]=await Promise.all([Hy(Q.file),Wy(Q.file)]);if(Z.signal.aborted||!Ee.current)return;Xe(De=>new Map(De).set(Q.localId,{dims:ye,exif:de}))}catch(ye){ye.name==="AbortError"||Ee.current&&S.error(`[Prefetch] Error pre-fetching data for index ${te}, file: ${Q.file.name}`,ye)}finally{jt.current===Z&&(jt.current=null)}},[Y,nt]),mt=h.useCallback((te,Q=[],Z=!1)=>{if(!te||te.length===0){S.warn("[EntryForm] No files selected");return}S.log("[EntryForm handleFilesSelect] Processing files",{fileCount:te.length,previewUrlCount:Q.length,isFromSharedFiles:Z,blobUrlsCount:He.current.size});const ye=Va-_.length-Y.length;if(S.log(`[EntryForm] Available slots: ${ye} (MAX_PHOTOS: ${Va}, current photos: ${_.length}, queue: ${Y.length})`),te.length>ye&&(S.warn(`[EntryForm] Too many files (${te.length}), limiting to ${ye}`),C({title:"Too many files",description:`You can only add ${ye} more photo(s). Some files were ignored.`,variant:"destructive"}),typeof URL.revokeObjectURL=="function"&&(S.log(`[EntryForm] Revoking excess blob URLs (${Q.length-ye})`),Q.slice(ye).forEach(De=>{S.log(`[EntryForm] Revoking excess blob URL: ${De}`),URL.revokeObjectURL(De)})),te=te.slice(0,ye),Q=Q.slice(0,ye),te.length===0)){S.warn("[EntryForm] No files left after limiting");return}const de=te.map((De,we)=>{const _e=crypto.randomUUID(),Ae=Q[we];return S.log(`[EntryForm] Processing file for queue: ${De.name}, type: ${De.type}, size: ${De.size}`),S.log(`[EntryForm] Generated localId: ${_e} for blob URL: ${Ae}`),(!Ae||!Ae.startsWith("blob:"))&&S.error(`[EntryForm] Invalid blob URL for file ${De.name}: ${Ae}`),Z&&S.log(`[EntryForm] Using existing blob URL for shared file: ${Ae}`),He.current.set(_e,Ae),S.log(`[EntryForm] Stored in originalBlobUrlsRef. Current count: ${He.current.size}`),{file:De,previewUrl:Ae,localId:_e}});S.log(`[EntryForm] Created ${de.length} new queue items`),ne(De=>{const we=[...De,...de];return S.log(`[EntryForm] ProcessingQueue updated: ${De.length}  ${we.length} items`),ue===null&&we.length>0?(S.log("[EntryForm] Starting queue processing - setting currentQueueIndex to 0"),Te(0),we.length>1&&(S.log("[EntryForm] Prefetching next item at index 1"),Ge(1))):S.log(`[EntryForm] Queue processing already in progress, currentQueueIndex: ${ue}`),we})},[_.length,Y.length,C,ue,Ge,He]);h.useEffect(()=>{const te={entryId:e,isClientReady:m,isLoadingImagesMeta:f,navigate:d,toast:C,getEntryById:r,loadSpecificEntry:o,getPhotoBlobUrl:s,imagesMetadata:i==null?void 0:i.length,initialEntryId:y==null?void 0:y.id};st.current++;const Q=st.current,Z=`init-${Q}`;if(D7(Q,J.current,te),(Q===1||e!==J.current.entryId)&&(pt.current=!1),!(m&&!f)){ce(!0),J.current=te;return}Ee.current=!0,Je(!1);const de=()=>{const Ae=st.current;if(S.log(`[EntryForm Init Effect ${Ae}] Dependency check complete. Current state:`,{isEditMode:oe,isClientReady:m,isLoadingImagesMeta:f,isRequestingSharedFiles:v,isLoadingData:fe,photos:_.length}),l&&!jn.current){E(null),F(""),j(!1),M(null),re(!1),ve(null),Ue(null);return}E(null),F(""),O([]),j(!1),M(null),U(!1),L(null),H&&S.log(`[EntryForm Init Effect ${Ae}] Clearing cropperImageUrl: ${H}`),$(null),re(!1),ve(null),Ue(null),Xe(new Map)},De=async Ae=>{if(S.log(`[EntryForm Init Effect ${Z}] Populate form for entry ID:`,Ae.id),!Ee.current)return;let Qe=new Date(Ae.date+"T00:00:00Z");if(P(Qe),F(Ae.content),E({...Ae}),k(!0),S.log(`[EntryForm Init Effect ${Z}] Basic form fields populated. isDateSetByUserIntent: true`),O([]),Ae.photos&&Ae.photos.length>0){S.log(`[EntryForm Init Effect ${Z}] Loading ${Ae.photos.length} photos.`),(!i||i.length===0)&&S.warn(`[EntryForm Init Effect ${Z}] Missing imagesMetadata.`);const Ze=Ae.photos.map(async We=>{const it=(i||[]).find(X=>X.id===We.photoId),gt=(it==null?void 0:it.photoMetadata)??null,z=gt==null?void 0:gt.contentHash;let V=null;try{if(V=await s(z,We.photoId),!Ee.current)return null;V?(He.current.set(We.photoId,V),gt&&ot.current.set(We.photoId,gt)):S.warn(`[EntryForm Init Effect ${Z}] No preview URL for photo ${We.photoId}`)}catch(X){S.error(`[EntryForm Init Effect ${Z}] Failed getting preview link for photo ${We.photoId}:`,X)}const W=V===null?void 0:V;return W?{...We,isNew:!1,localPreviewUrl:W}:null});try{const We=await Promise.all(Ze);if(!Ee.current)return;const it=We.filter(gt=>gt!==null);if(S.log(`[EntryForm Init Effect ${Z}] Setting ${it.length} photos.`),O(it),it.length>0){const gt=ot.current.get(it[0].photoId),z=(gt==null?void 0:gt.exifDate)??null;S.log(`[EntryForm Init Edit] Storing initial EXIF date: ${z}`),M(z);const V=Qe.toISOString().split("T")[0];let W=!1,X="";if(z){const[ae,Fe,ge]=z.split("-").map(Number);!isNaN(ae)&&!isNaN(Fe)&&!isNaN(ge)&&(X=new Date(Date.UTC(ae,Fe-1,ge)).toISOString().split("T")[0],W=V!==X)}S.log(`[EntryForm Init Edit] Comparing Form UTC: ${V} vs EXIF as UTC: ${X||"N/A"}. Show warning: ${W}`),j(W)}else S.log("[EntryForm Init Edit] No photos, setting initial EXIF null."),M(null),j(!1)}catch(We){S.error(`[EntryForm Init Effect ${Z}] Error loading initial photo details:`,We),Ee.current&&O([])}}else S.log(`[EntryForm Init Effect ${Z}] Entry has no photos.`),O([]),M(null),j(!1);S.log(`[EntryForm Init Effect ${Z}] populateForm finished.`)},we=async()=>{if(pt.current){ce(!1);return}ce(!0),de();try{if(oe&&e){S.log(`[EntryForm Init Effect ${Z}] EDIT MODE: Initializing for entry ID: ${e}`);let Ae;if(Ae=r(e)||void 0,Ae||(S.log(`[EntryForm Init Effect ${Z}] EDIT MODE: Not in context, loading...`),Ae=await o(e)),Ae&&Ee.current)await De(Ae),pt.current=!0;else if(Ee.current){S.error(`[EntryForm Init Effect ${Z}] EDIT MODE: Entry ${e} not found. Redirecting.`),C({title:"Error",description:"Entry not found.",variant:"destructive"}),d("/");return}}else{S.log(`[EntryForm Init Effect ${Z}] NEW MODE: Initializing.`);const Qe=window.location.hash.split("?")[1];let Ze=null;if(Qe)try{Ze=new URLSearchParams(Qe).get("date")}catch{}let We=!1,it;if(Ze&&/^\d{4}-\d{2}-\d{2}$/.test(Ze))it=new Date(Ze+"T00:00:00Z"),We=!0,S.log(`[EntryForm Init Effect ${Z}] NEW MODE: Date from param: ${Ze}. User intent: true.`);else{const gt=new Date;it=new Date(Date.UTC(gt.getFullYear(),gt.getMonth(),gt.getDate())),We=!1,S.log(`[EntryForm Init Effect ${Z}] NEW MODE: Date defaulted to today. User intent: false.`)}P(it),k(We),E(null),pt.current=!0}}finally{Ee.current&&ce(!1)}};return l&&!jn.current&&Y.length===0?(S.log(`[EntryForm Init Effect ${Z}] Skipping initializeForm() due to pending shared files that need processing first`),S.log(`[EntryForm Init Effect ${Z}] Setting isLoadingData to false to allow Shared Files Effect to run`),ce(!1)):we(),J.current=te,()=>{S.log(`[EntryForm Cleanup ${Z}] Cleanup running. CurrentState:`,{isMounted:Ee.current,queueItems:Y.length,shareKey:l?"present":"none",hasProcessedSharedFiles:jn.current,blobUrlCount:He.current.size,currentQueueIndex:ue,cleanupTimeMs:Date.now()}),Y.length>0&&S.log(`[EntryForm Cleanup ${Z}]  ATTENTION: Setting isMountedRef.current=false during active queue processing!`,{queueLength:Y.length,currentQueueIndex:ue,shareKey:l?"present":"none"}),Ee.current=!1,jt.current&&(jt.current.abort(),jt.current=null);const Ae=Y.length>0,Qe=l&&!jn.current;if(Ae||Qe){S.log(`[EntryForm Cleanup ${Z}] Skipping URL revocation due to active processing (queue: ${Y.length}, shareKey: ${l?"present":"none"})`);return}}},[e,m,f,r,o,s,i,d,C,l,Y.length]),h.useEffect(()=>{S.log(`[EntryForm Cleanup] Revoking ${He.current.size} URLs:`,Array.from(He.current.entries()).map(([te,Q])=>({id:te,url:Q}))),He.current.forEach((te,Q)=>{try{te&&te.startsWith("blob:")&&(S.log(`[EntryForm Cleanup] Revoking URL for id ${Q}: ${te}`),URL.revokeObjectURL(te))}catch(Z){S.error(`[EntryForm Cleanup] Error revoking URL: ${Z}`)}}),He.current.clear(),ot.current.clear()},[]),h.useEffect(()=>{const te=Date.now();if(S.log(`[ShareKey Effect ${te}] Running check.`,{isEditMode:oe,shareKeyForForm:l,isClientReady:m,isRequestingSharedFiles:v,isLoadingData:fe,photos:_.length,isMounted:Ee.current}),oe||!l||!m||v||fe){S.log(`[ShareKey Effect ${te}] Skipping due to conditions not met`,{isEditMode:oe,hasShareKey:!!l,isClientReady:m,isRequestingSharedFiles:v,isLoadingData:fe,blockingCondition:oe?"isEditMode":l?m?v?"alreadyRequesting":fe?"isLoadingData":"unknown":"clientNotReady":"noShareKey"});return}S.log(`[ShareKey Effect] Detected shareKeyForForm: ${l}, requesting files`),x(!0);const Q=qh(),Z={type:"GET_STORED_FILES",key:l};return Q.sendMessageToSW(Z).catch(ye=>{S.error("[ShareKey Effect] Failed to send GET_STORED_FILES to SW:",ye),C({title:"Share Error",description:"Could not request shared files from service worker.",variant:"destructive"}),x(!1)}),()=>{S.log("[ShareKey Effect] Cleaning up EntryForm SW message listeners.")}},[l,m,fe,oe,v,C]),h.useEffect(()=>{const te=de=>{if(!de){S.warn("[ShareKey Effect] Received empty SW message");return}if(S.log(`[ShareKey Effect] Received SW message type: ${de.type}`,{key:de.key,filesCount:de.files?de.files.length:"none",error:de.error||"none"}),de.type==="STORED_FILES_DATA"&&de.files)if(x(!1),de.files.length>0){S.log(`[ShareKey Effect] Received ${de.files.length} shared files:`,{types:de.files.map(we=>we.type),sizes:de.files.map(we=>we.size),names:de.files.map(we=>we.name)});const De=de.files.map(we=>URL.createObjectURL(we));q.current=l,rt.current=de.files,jn.current=!0,mt(de.files,De,!0)}else S.warn("[ShareKey Effect] Received empty files array"),C({title:"Share Info",description:"No shared files found to process.",variant:"default"}),c();else de.type==="STORED_FILES_ERROR"&&(x(!1),S.error(`[ShareKey Effect] Error receiving files: ${de.error}`),C({title:"Share Error",description:`Failed to load shared files: ${de.error}`,variant:"destructive"}),c())},Q=qh(),Z=Q.registerListener("STORED_FILES_DATA",te),ye=Q.registerListener("STORED_FILES_ERROR",te);return()=>{Z(),ye()}},[C,l,mt,c]),h.useEffect(()=>{const te=Date.now(),Q=q.current!==null&&Y.length>0;if(S.log(`[Queue Effect ${te}] Checking processing conditions:`,{isProcessingQueue:pe,isMounted:Ee.current,isProcessingSharedFiles:Q,currentQueueIndex:ue,queueLength:Y.length,pendingShareKey:q.current,originalBlobUrlsCount:He.current.size}),!pe||!Ee.current&&!Q){S.log(`[Queue Effect ${te}] Queue processing skipped`,{skipReason:pe?!Ee.current&&!Q?"not mounted and not shared files":"unknown":"isProcessingQueue is false",isProcessingQueue:pe,isMounted:Ee.current,isProcessingSharedFiles:Q,currentQueueIndex:ue,queueLength:Y.length,pendingShareKey:q.current});return}Q&&S.log("[Queue Effect] Processing shared file queue items",{pendingShareKey:q.current,queueLength:Y.length}),S.log(`[Queue Effect] Processing queue item at index ${ue} of ${Y.length}`);const Z=Y[ue];if(!Z){S.error(`[Queue Effect] No item found at index ${ue} in queue of length ${Y.length}`),Y.length>0&&ue!==null&&(S.warn("[Queue Effect] Invalid queue state detected, resetting queue"),Te(null),ne([]),I&&U(!1));return}S.log(`[Queue Effect] Found item to process: file=${Z.file.name}, localId=${Z.localId}, blob=${Z.previewUrl}`),(async()=>{if(!Ee.current&&!Q){S.warn("[Queue Effect] Component unmounted during processing (async start)");return}const de=Z,{file:De,previewUrl:we,localId:_e}=de;S.log(`[Queue Effect] Processing file: ${De.name}, type: ${De.type}, size: ${De.size}`),S.log(`[Queue Effect] Using blob URL: ${we}`);let Ae=null;nt.has(_e)?(S.log(`[Queue Effect] Using pre-fetched data for ${_e}`),Ae=nt.get(_e),Xe(Qe=>{const Ze=new Map(Qe);return Ze.delete(_e),Ze})):S.log(`[Queue Effect] No pre-fetched data available for ${_e}, will fetch now`);try{S.log(`[Queue Effect] Fetching image dimensions and EXIF data for ${De.name}`);const{dims:Qe,exif:Ze}=Ae??await(async()=>{S.log(`[Queue Effect] Fetching data now for ${De.name}`);const V=await Hy(De),W=await Wy(De);return S.log(`[Queue Effect] Got dimensions: ${V.width}${V.height} and EXIF data:`,W),{dims:V,exif:W}})();if(!Ee.current&&!Q){S.warn("[Queue Effect] Component unmounted during data fetch");return}S.log(`[Queue Effect] Calculating initial crop for ${De.name}`);const We=Math.min(Qe.width,Qe.height),it={x:Math.round((Qe.width-We)/2),y:Math.round((Qe.height-We)/2),w:Math.round(We),h:Math.round(We)};S.log(`[Queue Effect] Initial crop calculated: x=${it.x}, y=${it.y}, w=${it.w}, h=${it.h}`);const gt={isNew:!0,file:De,originalDimensions:Qe,exifData:Ze,localPreviewUrl:we,localId:_e};if(S.log(`[Queue Effect] Created newPhotoBase object with localId: ${_e}`),S.log(`[Queue Effect] Date Logic check - photos: ${_.length}, initialExifDate: ${B}, isEditMode: ${oe}`),_.length===0&&!B&&!oe){S.log("[Queue Effect - DATE LOGIC] Processing date logic for first photo in new entry");const V=Ze.exifDate;let W=!1;if(S.log(`[Queue Effect - DATE LOGIC 1] First photo. isDateSetByUserIntent=${R}. Storing initial EXIF date string: ${V}`),M(V),V){S.log(`[Queue Effect - DATE LOGIC] Found EXIF date: ${V}, parsing components`);const[X,ae,Fe]=V.split("-").map(Number);if(S.log(`[Queue Effect - DATE LOGIC] Parsed components: year=${X}, month=${ae}, day=${Fe}`),!isNaN(X)&&!isNaN(ae)&&!isNaN(Fe)){const ge=new Date(Date.UTC(X,ae-1,Fe)),ke=ge.toISOString().split("T")[0],An=A.toISOString().split("T")[0];S.log(`[Queue Effect - DATE LOGIC] Valid date components, created UTC date: ${ke}`),R?(S.log(`[Queue Effect - DATE LOGIC 2a] User date intent=true. Comparing Form UTC: ${An} vs EXIF as UTC: ${ke}`),W=ke!==An,S.log(`[Queue Effect - DATE LOGIC 3a] Setting warning: ${W}`)):(S.log(`[Queue Effect - DATE LOGIC 2b] User date intent=false. Setting date to EXIF date: ${ke}`),P(ge),W=!1,S.log("[Queue Effect - DATE LOGIC 3b] Setting warning: false (auto-set)"))}else S.warn(`[Queue Effect] Invalid date components parsed from EXIF: ${V}. Setting warning false.`),W=!1}else S.log("[Queue Effect - DATE LOGIC 2c] No EXIF date found. Setting warning false."),W=!1;S.log(`[Queue Effect - DATE LOGIC 4] Setting final warning state to: ${W}`),j(W)}else S.log("[Queue Effect - DATE LOGIC] Skipping date logic - not first photo or in edit mode");Ue(gt),L(null),$(we),I||U(!0);const z=ue+1;z<Y.length&&Ge(z)}catch(Qe){if(S.error(`[Queue Effect] Error processing queue item ${ue}:`,Qe),C({title:"Error Processing Photo",description:`Could not process: ${De.name}. ${Qe instanceof Error?Qe.message:"Unknown error"}`,variant:"destructive"}),typeof URL.revokeObjectURL=="function")try{URL.revokeObjectURL(we)}catch{}if(He.current.delete(_e),Ee.current||Q){const Ze=ue!==null?ue+1:null;Ze!==null&&Ze<Y.length?Te(Ze):(S.log("[Queue Effect] Last item failed or queue empty. Resetting queue."),Te(null),ne([]),I&&U(!1),Q&&(c(),q.current&&(u(q.current),q.current=null)))}}})()},[ue,Y,nt,I,Ge,_.length,B,oe,A,C,R,pe,c,u]);const Jt=h.useCallback(te=>{if(!(Ee.current||q.current!==null&&Y.length>0)){S.warn("[EntryForm] handleCropComplete called but component unmounted/not processing shared");return}if(S.log("[EntryForm] handleCropComplete called with crop data:",{newCropData:te,hasPendingNewPhotoData:!!he,photoIndexToCrop:N,pendingPhotoLocalId:he==null?void 0:he.localId,pendingPhotoInfo:he?{fileName:he.file.name,fileType:he.file.type,fileSize:he.file.size,dimensions:`${he.originalDimensions.width}${he.originalDimensions.height}`,localPreviewUrl:he.localPreviewUrl}:"none"}),he){S.log(`[EntryForm] Processing pending new photo with localId: ${he.localId}`);const ye={...he,crop:te};S.log(`[EntryForm] Adding new photo to photos array, current count: ${_.length}`),O(de=>[...de,ye]),Ue(null),S.log("[EntryForm] Set pendingNewPhotoData to null")}else N!==null&&(S.log(`[EntryForm] Updating crop for existing photo at index: ${N}`),O(ye=>ye.map((de,De)=>De===N?{...de,crop:te}:de)));L(null);const Z=ue!==null?ue+1:null;S.log(`[EntryForm] Crop complete. Next queue index: ${Z}. Queue length: ${Y.length}`),Z!==null&&Z<Y.length?(S.log(`[EntryForm] Moving to next item in queue (index ${Z}), cropper stays open`),Te(Z)):(S.log("[EntryForm] Queue processing finished. Clearing queue and closing cropper"),Te(null),ne([]),U(!1),q.current&&c()),Z!==null&&Z<Y.length||(S.log("[EntryForm] Scheduling focus on content textarea"),setTimeout(()=>{Mt.current?(Mt.current.focus(),S.log("[EntryForm] Content textarea focused")):S.warn("[EntryForm] Content textarea ref not available")},50))},[ue,Y.length,he,N,_.length,c]),_t=h.useCallback(()=>{if(!(Ee.current||q.current!==null&&Y.length>0)){S.warn("[EntryForm] handleCropCancel called but component unmounted/not processing shared");return}if(S.log("[EntryForm] handleCropCancel called:",{hasPendingNewPhotoData:!!he,photoIndexToCrop:N,currentQueueIndex:ue,processingQueueLength:Y.length}),he){if(S.log(`[EntryForm] Discarding pending new photo with localId: ${he.localId}`,{fileName:he.file.name,fileSize:he.file.size,fileType:he.file.type,localPreviewUrl:he.localPreviewUrl}),typeof URL.revokeObjectURL=="function"){S.log(`[EntryForm] [BLOB URL REVOCATION] Revoking blob URL on CROP CANCEL for localId ${he.localId}: ${he.localPreviewUrl}`,{revocationReason:"cropCancel",blobUrlsBeforeCount:He.current.size});try{URL.revokeObjectURL(he.localPreviewUrl),S.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked URL for ${he.localId}`)}catch(Z){S.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking URL: ${Z}`)}}S.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing URL from originalBlobUrlsRef for localId: ${he.localId}`),He.current.delete(he.localId),S.log(`[EntryForm] [BLOB URL LIFECYCLE] BlobUrls count after deletion: ${He.current.size}`),Ue(null)}L(null);const Q=ue!==null?ue+1:null;Q!==null&&Q<Y.length?Te(Q):(Te(null),ne([]),U(!1),q.current&&(c(),u(q.current),q.current=null)),Q!==null&&Q<Y.length||setTimeout(()=>{var Z;return(Z=Mt.current)==null?void 0:Z.focus()},50)},[ue,Y.length,he,N,c,u]),nn=h.useCallback(te=>{const Q=_[te];if(!Q||pe||me){S.warn(`[EntryForm] openCropperForPhoto prevented for index ${te}.`,{isProcessingQueue:pe,isBusy:me});return}const Z=kn(Q)?Q.localId:Q.photoId;S.log(`[EntryForm] [BLOB URL USAGE] openCropperForPhoto retrieving URL for index ${te}`,{photoId:Z,isNewPhoto:kn(Q),photoType:kn(Q)?"newPhoto":"existingPhoto",blobUrlsCount:He.current.size,photoCount:_.length});const ye=He.current.get(Z);ye?(S.log(`[EntryForm] [BLOB URL USAGE] Found URL for photo ID ${Z}: ${ye}`),L(te),Ue(null),$(ye),U(!0)):(C({title:"Cannot Edit Crop",description:"Original image data is missing or invalid.",variant:"destructive"}),S.warn(`[EntryForm] Cannot open cropper: original URL missing/invalid for photo index ${te}, id ${Z}`))},[_,pe,me,C]),rn=h.useCallback(te=>{ve(te),re(!0)},[]),Vt=h.useCallback(()=>{var we;if(xe===null)return;const te=xe,Q=_[te];if(!Q){S.warn(`[EntryForm] Photo to remove at index ${te} not found.`),re(!1),ve(null);return}const Z=kn(Q)?Q.localId:Q.photoId,ye=te===0;let de=[];S.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing photo id ${Z}`,{wasFirstPhoto:ye,photoType:kn(Q)?"newPhoto":"existingPhoto",currentPhotosCount:_.length,currentBlobUrlsCount:He.current.size});const De=He.current.get(Z);if(typeof URL.revokeObjectURL=="function"&&De){S.log(`[EntryForm] [BLOB URL REVOCATION] Revoking original URL on REMOVE CONFIRM for ${Z}: ${De}`,{revocationReason:"photoRemoval",blobUrlsBeforeCount:He.current.size});try{URL.revokeObjectURL(De),S.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked original URL for ${Z}`)}catch(_e){S.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking original URL on remove: ${_e}`)}}if(typeof URL.revokeObjectURL=="function"&&Q.localPreviewUrl&&Q.localPreviewUrl.startsWith("blob:")&&Q.localPreviewUrl!==De){S.log(`[EntryForm] [BLOB URL REVOCATION] Revoking preview URL on REMOVE CONFIRM for ${Z}: ${Q.localPreviewUrl}`,{revocationReason:"photoRemoval",isDifferentFromOriginal:!0});try{URL.revokeObjectURL(Q.localPreviewUrl),S.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked preview URL for ${Z}`)}catch(_e){S.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking preview URL on remove: ${_e}`)}}if(S.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing entries from refs for id: ${Z}`),He.current.delete(Z),kn(Q)||ot.current.delete(Q.photoId),O(_e=>(de=_e.filter((Ae,Qe)=>Qe!==te),de)),ye&&Ee.current){const _e=de.length>0?de[0]:null;let Ae=null;if(_e)if(kn(_e))Ae=((we=_e.exifData)==null?void 0:we.exifDate)??null;else{const it=ot.current.get(_e.photoId);Ae=(it==null?void 0:it.exifDate)??null}S.log(`[Remove Photo - DATE CHECK 1] First photo removed. New initial EXIF date string: ${Ae}`),M(Ae);const Qe=A.toISOString().split("T")[0];let Ze=!1,We="";if(Ae){const[it,gt,z]=Ae.split("-").map(Number);!isNaN(it)&&!isNaN(gt)&&!isNaN(z)&&(We=new Date(Date.UTC(it,gt-1,z)).toISOString().split("T")[0],Ze=Qe!==We)}S.log(`[Remove Photo - DATE CHECK 2] Comparing Form UTC: ${Qe} vs New EXIF as UTC: ${We||"N/A"}. Show warning: ${Ze}`),j(Ze)}re(!1),ve(null)},[xe,_,A]),yt=h.useCallback(()=>{if(B){S.log(`[EntryForm] handleUseExifDate called. Setting date to EXIF: ${B}.`);const[te,Q,Z]=B.split("-").map(Number);P(new Date(Date.UTC(te,Q-1,Z))),S.log("[EntryForm] handleUseExifDate setting warning to false."),j(!1)}},[B]),mn=h.useCallback(te=>{try{const Q=new Date(te.target.value+"T00:00:00Z");if(isNaN(Q.getTime()))S.warn("[EntryForm] Invalid date input received:",te.target.value);else{P(Q);const Z=Q.toISOString().split("T")[0];let ye=!1,de="";if(B){const[De,we,_e]=B.split("-").map(Number);!isNaN(De)&&!isNaN(we)&&!isNaN(_e)&&(de=new Date(Date.UTC(De,we-1,_e)).toISOString().split("T")[0],ye=Z!==de)}S.log(`[handleDateChange - DATE CHECK 1] Date changed to ${te.target.value}. Comparing New Form UTC: ${Z} vs Initial EXIF as UTC: ${de||"N/A"}. Show warning: ${ye}`),j(ye)}}catch(Q){S.error("[EntryForm] Error processing date change:",Q)}},[B]),wt=h.useCallback(async()=>{if(S.log("[EntryForm] handleSave called.",{isBusy:me,canSave:je}),me||!je){S.warn("[EntryForm] Save prevented:",{isBusy:me,canSave:je});return}const te={date:A,content:T,photos:_};let Q;!oe&&b&&(Q=b,S.log(`[EntryForm] Using selected target journal: ${Q}`)),await n(te,y,Q)?(S.log("[EntryForm] Save successful, resetting dirty state."),Je(!1),q.current&&(S.log(`[EntryForm] Save successful, cleaning up shared files with key: ${q.current}`),u(q.current),q.current=null,c())):S.warn("[EntryForm] Save failed (returned false).")},[me,je,A,T,_,n,y,u,c]),qn=h.useCallback(()=>{I?_t():ct?ht(!0):(q.current&&(S.log(`[EntryForm] Canceling clean entry, cleaning up shared files with key: ${q.current}`),u(q.current),q.current=null,c()),d("/"))},[I,ct,d,_t,u,c]),dr=h.useCallback(()=>{ht(!1),Je(!1),q.current&&(S.log(`[EntryForm] Canceling entry, cleaning up shared files with key: ${q.current}`),u(q.current),q.current=null,c()),d("/")},[d,u,c]),kr=h.useCallback(te=>{te.key==="Enter"&&(te.metaKey||te.ctrlKey)&&(te.preventDefault(),je&&!me&&wt())},[je,me,wt]);if(fe)return S.log("[EntryForm Render] Rendering Loading (Data)..."),p.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[" ",p.jsx(Ht,{className:"h-8 w-8 animate-spin text-primary"})," "]});S.log("[EntryForm Render] Rendering main content. State:",{isCropperOpen:I,isEditMode:oe,photoCount:_.length,queueLength:Y.length,currentQueueIndex:ue,isLoadingData:fe,isBusy:me,formDateUTC:A.toISOString().split("T")[0],initialExifDate:B,showExifDateMismatchWarning:K,isDateSetByUserIntent:R});const Lt=()=>{var te;if(I&&H){const Q=he??(N!==null?_[N]:null),Z=Q&&"crop"in Q?Q.crop:void 0;let ye;if(he&&he.originalDimensions)ye=he.originalDimensions;else if(N!==null&&sD(_[N])){const de=ot.current.get(_[N].photoId);de!=null&&de.width&&(de!=null&&de.height)&&(ye={width:de.width,height:de.height})}else N!==null&&kn(_[N])&&(ye=_[N].originalDimensions);return p.jsx("div",{className:"p-4 md:p-6 flex-grow overflow-hidden flex flex-col",children:p.jsx(b7,{imageUrl:H,onCropComplete:Jt,onCancel:_t,initialCropData:Z,initialImageDimensions:ye})})}else return p.jsxs("div",{className:"space-y-4 p-6 flex-grow overflow-y-auto custom-scrollbar",children:[p.jsx(Z9,{photos:_,setPhotos:O,isBusy:me,isLoadingInitial:!1,initialPhotoCount:((te=y==null?void 0:y.photos)==null?void 0:te.length)??0,onOpenCropper:nn,onRemovePhoto:rn,onFilesSelect:mt,originalBlobUrlsRef:He,existingPhotoMetaRef:ot,processingQueueLength:Y.length,currentQueueIndex:ue,isProcessingQueueItem:pe}),_.length>0&&p.jsxs(p.Fragment,{children:[p.jsx(e7,{date:A,onDateChange:mn,showExifWarning:K,initialExifDate:B,onUseExifDate:yt,isBusy:me}),p.jsx(t7,{content:T,setContent:F,isBusy:me,onKeyDown:kr,textAreaRef:Mt})]})]})},Dn=()=>I?`Adjust Photo${Y.length>0&&ue!==null?` (${ue+1}/${Y.length})`:""}`:oe?"Edit Entry":"New Entry";return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex flex-col min-h-screen",children:[p.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md border-b p-4 flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between w-full",children:[p.jsxs(be,{variant:"ghost",size:"icon",onClick:qn,disabled:me&&!I,"aria-label":I?"Cancel Crop":"Go Back",children:[" ",p.jsx(GS,{className:"h-5 w-5"})," "]}),p.jsx("h1",{className:"text-lg font-semibold",children:Dn()}),p.jsxs(be,{variant:"ghost",size:"icon",onClick:qn,disabled:me&&!I,"aria-label":"Close",children:[" ",p.jsx(md,{className:"h-5 w-5"})," "]})]}),!I&&!oe&&g&&w.length>0&&p.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[p.jsx("span",{className:"mr-2",children:"Journal:"}),p.jsx("select",{className:"p-1 rounded border text-sm",value:b||g.id,onChange:te=>D(te.target.value),disabled:me,children:w.map(te=>p.jsxs("option",{value:te.id,children:[te.name," ",te.id===g.id?"(Active)":""]},te.id))})]}),!I&&oe&&y&&p.jsx("div",{className:"mt-2 text-sm",children:p.jsxs("span",{className:"text-muted-foreground",children:["Editing entry in journal: ",(g==null?void 0:g.name)||"Unknown Journal"]})})]}),p.jsxs("main",{className:"flex flex-col flex-grow overflow-hidden",children:[Lt(),!I&&p.jsx("div",{className:"p-4 border-t",children:p.jsx(n7,{isBusy:me,isSaving:a,isEditMode:oe,canSave:je,onCancel:qn,onSave:wt})})]})]}),p.jsx(Mw,{open:Pe,onOpenChange:re,onConfirm:Vt,title:"Remove Photo?",description:"Are you sure you want to remove this photo from the entry?",confirmText:"Remove",isConfirming:a}),p.jsx(Mw,{open:Ye,onOpenChange:ht,onConfirm:dr,title:"Discard Changes?",description:"You have unsaved changes. Are you sure you want to discard them and go back?",confirmText:"Discard"})]})}function A7(){return S.log("[App] Using hook:",Gh),p.jsx(yF,{client:EF,children:p.jsx(O5,{children:p.jsxs(q3,{children:[p.jsx(fS,{hook:Gh,children:p.jsxs(qR,{children:[p.jsx(Vs,{path:"/",component:Rw}),p.jsx(Vs,{path:"/month/:year/:month",component:Rw}),p.jsx(Vs,{path:"/entry",children:p.jsx(B0,{})}),p.jsx(Vs,{path:"/entry/new",children:p.jsx(B0,{})}),p.jsx(Vs,{path:"/entry/edit/:id",children:e=>p.jsx(B0,{entryId:e.id})}),p.jsx(Vs,{children:()=>p.jsx(tN,{})})]})}),p.jsx(SM,{})]})})})}tS(document.getElementById("root")).render(p.jsx(U5,{attribute:"class",children:p.jsx(A7,{})}));
