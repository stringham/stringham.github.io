var kx=e=>{throw TypeError(e)};var Gd=(e,t,n)=>t.has(e)||kx("Cannot "+n);var K=(e,t,n)=>(Gd(e,t,"read from private field"),n?n.call(e):t.get(e)),Qe=(e,t,n)=>t.has(e)?kx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ie=(e,t,n,r)=>(Gd(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ln=(e,t,n)=>(Gd(e,t,"access private method"),n);var tc=(e,t,n,r)=>({set _(o){Ie(e,t,o,n)},get _(){return K(e,t,r)}});function t4(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n4(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Zw={exports:{}},qu={},eE={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=Symbol.for("react.element"),r4=Symbol.for("react.portal"),o4=Symbol.for("react.fragment"),s4=Symbol.for("react.strict_mode"),i4=Symbol.for("react.profiler"),a4=Symbol.for("react.provider"),l4=Symbol.for("react.context"),c4=Symbol.for("react.forward_ref"),u4=Symbol.for("react.suspense"),d4=Symbol.for("react.memo"),f4=Symbol.for("react.lazy"),Tx=Symbol.iterator;function h4(e){return e===null||typeof e!="object"?null:(e=Tx&&e[Tx]||e["@@iterator"],typeof e=="function"?e:null)}var tE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nE=Object.assign,rE={};function ta(e,t,n){this.props=e,this.context=t,this.refs=rE,this.updater=n||tE}ta.prototype.isReactComponent={};ta.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ta.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oE(){}oE.prototype=ta.prototype;function Tp(e,t,n){this.props=e,this.context=t,this.refs=rE,this.updater=n||tE}var Fp=Tp.prototype=new oE;Fp.constructor=Tp;nE(Fp,ta.prototype);Fp.isPureReactComponent=!0;var Fx=Array.isArray,sE=Object.prototype.hasOwnProperty,Rp={current:null},iE={key:!0,ref:!0,__self:!0,__source:!0};function aE(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)sE.call(t,r)&&!iE.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Ml,type:e,key:s,ref:i,props:o,_owner:Rp.current}}function p4(e,t){return{$$typeof:Ml,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ml}function m4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Rx=/\/+/g;function Kd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?m4(""+e.key):t.toString(36)}function Lc(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ml:case r4:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Kd(i,0):r,Fx(o)?(n="",e!=null&&(n=e.replace(Rx,"$&/")+"/"),Lc(o,t,n,"",function(c){return c})):o!=null&&(Mp(o)&&(o=p4(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Rx,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",Fx(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Kd(s,a);i+=Lc(s,t,n,l,o)}else if(l=h4(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Kd(s,a++),i+=Lc(s,t,n,l,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function nc(e,t,n){if(e==null)return e;var r=[],o=0;return Lc(e,r,"","",function(s){return t.call(n,s,o++)}),r}function g4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cn={current:null},Oc={transition:null},x4={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:Oc,ReactCurrentOwner:Rp};function lE(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:nc,forEach:function(e,t,n){nc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return nc(e,function(){t++}),t},toArray:function(e){return nc(e,function(t){return t})||[]},only:function(e){if(!Mp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Oe.Component=ta;Oe.Fragment=o4;Oe.Profiler=i4;Oe.PureComponent=Tp;Oe.StrictMode=s4;Oe.Suspense=u4;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x4;Oe.act=lE;Oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=nE({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Rp.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)sE.call(t,l)&&!iE.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ml,type:e.type,key:o,ref:s,props:r,_owner:i}};Oe.createContext=function(e){return e={$$typeof:l4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:a4,_context:e},e.Consumer=e};Oe.createElement=aE;Oe.createFactory=function(e){var t=aE.bind(null,e);return t.type=e,t};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(e){return{$$typeof:c4,render:e}};Oe.isValidElement=Mp;Oe.lazy=function(e){return{$$typeof:f4,_payload:{_status:-1,_result:e},_init:g4}};Oe.memo=function(e,t){return{$$typeof:d4,type:e,compare:t===void 0?null:t}};Oe.startTransition=function(e){var t=Oc.transition;Oc.transition={};try{e()}finally{Oc.transition=t}};Oe.unstable_act=lE;Oe.useCallback=function(e,t){return Cn.current.useCallback(e,t)};Oe.useContext=function(e){return Cn.current.useContext(e)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(e){return Cn.current.useDeferredValue(e)};Oe.useEffect=function(e,t){return Cn.current.useEffect(e,t)};Oe.useId=function(){return Cn.current.useId()};Oe.useImperativeHandle=function(e,t,n){return Cn.current.useImperativeHandle(e,t,n)};Oe.useInsertionEffect=function(e,t){return Cn.current.useInsertionEffect(e,t)};Oe.useLayoutEffect=function(e,t){return Cn.current.useLayoutEffect(e,t)};Oe.useMemo=function(e,t){return Cn.current.useMemo(e,t)};Oe.useReducer=function(e,t,n){return Cn.current.useReducer(e,t,n)};Oe.useRef=function(e){return Cn.current.useRef(e)};Oe.useState=function(e){return Cn.current.useState(e)};Oe.useSyncExternalStore=function(e,t,n){return Cn.current.useSyncExternalStore(e,t,n)};Oe.useTransition=function(){return Cn.current.useTransition()};Oe.version="18.3.1";eE.exports=Oe;var p=eE.exports;const xt=Qw(p),cE=t4({__proto__:null,default:xt},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v4=p,y4=Symbol.for("react.element"),w4=Symbol.for("react.fragment"),E4=Object.prototype.hasOwnProperty,C4=v4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S4={key:!0,ref:!0,__self:!0,__source:!0};function uE(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)E4.call(t,r)&&!S4.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:y4,type:e,key:s,ref:i,props:o,_owner:C4.current}}qu.Fragment=w4;qu.jsx=uE;qu.jsxs=uE;Zw.exports=qu;var h=Zw.exports,dE={exports:{}},Kn={},fE={exports:{}},hE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,N){var V=R.length;R.push(N);e:for(;0<V;){var I=V-1>>>1,L=R[I];if(0<o(L,N))R[I]=N,R[V]=L,V=I;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var N=R[0],V=R.pop();if(V!==N){R[0]=V;e:for(var I=0,L=R.length,H=L>>>1;I<H;){var $=2*(I+1)-1,he=R[$],de=$+1,Y=R[de];if(0>o(he,V))de<L&&0>o(Y,he)?(R[I]=Y,R[de]=V,I=de):(R[I]=he,R[$]=V,I=$);else if(de<L&&0>o(Y,V))R[I]=Y,R[de]=V,I=de;else break e}}return N}function o(R,N){var V=R.sortIndex-N.sortIndex;return V!==0?V:R.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,f=null,d=3,m=!1,g=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=R)r(c),N.sortIndex=N.expirationTime,t(l,N);else break;N=n(c)}}function C(R){if(y=!1,v(R),!g)if(n(l)!==null)g=!0,j(b);else{var N=n(c);N!==null&&B(C,N.startTime-R)}}function b(R,N){g=!1,y&&(y=!1,w(P),P=-1),m=!0;var V=d;try{for(v(N),f=n(l);f!==null&&(!(f.expirationTime>N)||R&&!T());){var I=f.callback;if(typeof I=="function"){f.callback=null,d=f.priorityLevel;var L=I(f.expirationTime<=N);N=e.unstable_now(),typeof L=="function"?f.callback=L:f===n(l)&&r(l),v(N)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var $=n(c);$!==null&&B(C,$.startTime-N),H=!1}return H}finally{f=null,d=V,m=!1}}var D=!1,A=null,P=-1,F=5,k=-1;function T(){return!(e.unstable_now()-k<F)}function M(){if(A!==null){var R=e.unstable_now();k=R;var N=!0;try{N=A(!0,R)}finally{N?_():(D=!1,A=null)}}else D=!1}var _;if(typeof x=="function")_=function(){x(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,W=O.port2;O.port1.onmessage=M,_=function(){W.postMessage(null)}}else _=function(){E(M,0)};function j(R){A=R,D||(D=!0,_())}function B(R,N){P=E(function(){R(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,j(b))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(R){switch(d){case 1:case 2:case 3:var N=3;break;default:N=d}var V=d;d=N;try{return R()}finally{d=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,N){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=d;d=R;try{return N()}finally{d=V}},e.unstable_scheduleCallback=function(R,N,V){var I=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?I+V:I):V=I,R){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=V+L,R={id:u++,callback:N,priorityLevel:R,startTime:V,expirationTime:L,sortIndex:-1},V>I?(R.sortIndex=V,t(c,R),n(l)===null&&R===n(c)&&(y?(w(P),P=-1):y=!0,B(C,V-I))):(R.sortIndex=L,t(l,R),g||m||(g=!0,j(b))),R},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(R){var N=d;return function(){var V=d;d=N;try{return R.apply(this,arguments)}finally{d=V}}}})(hE);fE.exports=hE;var b4=fE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4=p,Jn=b4;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pE=new Set,el={};function $s(e,t){Li(e,t),Li(e+"Capture",t)}function Li(e,t){for(el[e]=t,e=0;e<t.length;e++)pE.add(t[e])}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),W0=Object.prototype.hasOwnProperty,A4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Nx={};function P4(e){return W0.call(Nx,e)?!0:W0.call(Mx,e)?!1:A4.test(e)?Nx[e]=!0:(Mx[e]=!0,!1)}function k4(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T4(e,t,n,r){if(t===null||typeof t>"u"||k4(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sn(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rn[e]=new Sn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rn[t]=new Sn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rn[e]=new Sn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rn[e]=new Sn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rn[e]=new Sn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rn[e]=new Sn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rn[e]=new Sn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rn[e]=new Sn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rn[e]=new Sn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Np=/[\-:]([a-z])/g;function Ip(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Np,Ip);rn[t]=new Sn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Np,Ip);rn[t]=new Sn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Np,Ip);rn[t]=new Sn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rn[e]=new Sn(e,1,!1,e.toLowerCase(),null,!1,!1)});rn.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rn[e]=new Sn(e,1,!1,e.toLowerCase(),null,!0,!0)});function jp(e,t,n,r){var o=rn.hasOwnProperty(t)?rn[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T4(t,n,o,r)&&(n=null),r||o===null?P4(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ho=D4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rc=Symbol.for("react.element"),ei=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),J0=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),Bp=Symbol.for("react.forward_ref"),G0=Symbol.for("react.suspense"),K0=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),Ao=Symbol.for("react.lazy"),xE=Symbol.for("react.offscreen"),Ix=Symbol.iterator;function pa(e){return e===null||typeof e!="object"?null:(e=Ix&&e[Ix]||e["@@iterator"],typeof e=="function"?e:null)}var St=Object.assign,qd;function Ta(e){if(qd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qd=t&&t[1]||""}return`
`+qd+e}var Yd=!1;function Xd(e,t){if(!e||Yd)return"";Yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{Yd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ta(e):""}function F4(e){switch(e.tag){case 5:return Ta(e.type);case 16:return Ta("Lazy");case 13:return Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 2:case 15:return e=Xd(e.type,!1),e;case 11:return e=Xd(e.type.render,!1),e;case 1:return e=Xd(e.type,!0),e;default:return""}}function q0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ti:return"Fragment";case ei:return"Portal";case J0:return"Profiler";case _p:return"StrictMode";case G0:return"Suspense";case K0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gE:return(e.displayName||"Context")+".Consumer";case mE:return(e._context.displayName||"Context")+".Provider";case Bp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Lp:return t=e.displayName||null,t!==null?t:q0(e.type)||"Memo";case Ao:t=e._payload,e=e._init;try{return q0(e(t))}catch{}}return null}function R4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q0(t);case 8:return t===_p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M4(e){var t=vE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function oc(e){e._valueTracker||(e._valueTracker=M4(e))}function yE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vE(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function su(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Y0(e,t){var n=t.checked;return St({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Qo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wE(e,t){t=t.checked,t!=null&&jp(e,"checked",t,!1)}function X0(e,t){wE(e,t);var n=Qo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Q0(e,t.type,n):t.hasOwnProperty("defaultValue")&&Q0(e,t.type,Qo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _x(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Q0(e,t,n){(t!=="number"||su(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fa=Array.isArray;function vi(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qo(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Z0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return St({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(Fa(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Qo(n)}}function EE(e,t){var n=Qo(t.value),r=Qo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Lx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function CE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?CE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sc,SE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sc=sc||document.createElement("div"),sc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var La={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N4=["Webkit","ms","Moz","O"];Object.keys(La).forEach(function(e){N4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),La[t]=La[e]})});function bE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||La.hasOwnProperty(e)&&La[e]?(""+t).trim():t+"px"}function DE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=bE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var I4=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function th(e,t){if(t){if(I4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function nh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rh=null;function Op(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oh=null,yi=null,wi=null;function Ox(e){if(e=jl(e)){if(typeof oh!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=ed(t),oh(e.stateNode,e.type,t))}}function AE(e){yi?wi?wi.push(e):wi=[e]:yi=e}function PE(){if(yi){var e=yi,t=wi;if(wi=yi=null,Ox(e),t)for(e=0;e<t.length;e++)Ox(t[e])}}function kE(e,t){return e(t)}function TE(){}var Qd=!1;function FE(e,t,n){if(Qd)return e(t,n);Qd=!0;try{return kE(e,t,n)}finally{Qd=!1,(yi!==null||wi!==null)&&(TE(),PE())}}function nl(e,t){var n=e.stateNode;if(n===null)return null;var r=ed(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var sh=!1;if(oo)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){sh=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{sh=!1}function j4(e,t,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oa=!1,iu=null,au=!1,ih=null,_4={onError:function(e){Oa=!0,iu=e}};function B4(e,t,n,r,o,s,i,a,l){Oa=!1,iu=null,j4.apply(_4,arguments)}function L4(e,t,n,r,o,s,i,a,l){if(B4.apply(this,arguments),Oa){if(Oa){var c=iu;Oa=!1,iu=null}else throw Error(Q(198));au||(au=!0,ih=c)}}function zs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function RE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $x(e){if(zs(e)!==e)throw Error(Q(188))}function O4(e){var t=e.alternate;if(!t){if(t=zs(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return $x(o),e;if(s===r)return $x(o),t;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function ME(e){return e=O4(e),e!==null?NE(e):null}function NE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=NE(e);if(t!==null)return t;e=e.sibling}return null}var IE=Jn.unstable_scheduleCallback,zx=Jn.unstable_cancelCallback,$4=Jn.unstable_shouldYield,z4=Jn.unstable_requestPaint,Nt=Jn.unstable_now,V4=Jn.unstable_getCurrentPriorityLevel,$p=Jn.unstable_ImmediatePriority,jE=Jn.unstable_UserBlockingPriority,lu=Jn.unstable_NormalPriority,U4=Jn.unstable_LowPriority,_E=Jn.unstable_IdlePriority,Yu=null,Br=null;function H4(e){if(Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(Yu,e,void 0,(e.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:G4,W4=Math.log,J4=Math.LN2;function G4(e){return e>>>=0,e===0?32:31-(W4(e)/J4|0)|0}var ic=64,ac=4194304;function Ra(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Ra(a):(s&=i,s!==0&&(r=Ra(s)))}else i=n&~o,i!==0?r=Ra(i):s!==0&&(r=Ra(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cr(t),o=1<<n,r|=e[n],t&=~o;return r}function K4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q4(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Cr(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=K4(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function ah(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BE(){var e=ic;return ic<<=1,!(ic&4194240)&&(ic=64),e}function Zd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cr(t),e[t]=n}function Y4(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Cr(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function zp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var nt=0;function LE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var OE,Vp,$E,zE,VE,lh=!1,lc=[],$o=null,zo=null,Vo=null,rl=new Map,ol=new Map,To=[],X4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vx(e,t){switch(e){case"focusin":case"focusout":$o=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Vo=null;break;case"pointerover":case"pointerout":rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(t.pointerId)}}function ga(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=jl(t),t!==null&&Vp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Q4(e,t,n,r,o){switch(t){case"focusin":return $o=ga($o,e,t,n,r,o),!0;case"dragenter":return zo=ga(zo,e,t,n,r,o),!0;case"mouseover":return Vo=ga(Vo,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return rl.set(s,ga(rl.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,ol.set(s,ga(ol.get(s)||null,e,t,n,r,o)),!0}return!1}function UE(e){var t=ys(e.target);if(t!==null){var n=zs(t);if(n!==null){if(t=n.tag,t===13){if(t=RE(n),t!==null){e.blockedOn=t,VE(e.priority,function(){$E(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ch(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);rh=r,n.target.dispatchEvent(r),rh=null}else return t=jl(n),t!==null&&Vp(t),e.blockedOn=n,!1;t.shift()}return!0}function Ux(e,t,n){$c(e)&&n.delete(t)}function Z4(){lh=!1,$o!==null&&$c($o)&&($o=null),zo!==null&&$c(zo)&&(zo=null),Vo!==null&&$c(Vo)&&(Vo=null),rl.forEach(Ux),ol.forEach(Ux)}function xa(e,t){e.blockedOn===t&&(e.blockedOn=null,lh||(lh=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,Z4)))}function sl(e){function t(o){return xa(o,e)}if(0<lc.length){xa(lc[0],e);for(var n=1;n<lc.length;n++){var r=lc[n];r.blockedOn===e&&(r.blockedOn=null)}}for($o!==null&&xa($o,e),zo!==null&&xa(zo,e),Vo!==null&&xa(Vo,e),rl.forEach(t),ol.forEach(t),n=0;n<To.length;n++)r=To[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<To.length&&(n=To[0],n.blockedOn===null);)UE(n),n.blockedOn===null&&To.shift()}var Ei=ho.ReactCurrentBatchConfig,uu=!0;function eT(e,t,n,r){var o=nt,s=Ei.transition;Ei.transition=null;try{nt=1,Up(e,t,n,r)}finally{nt=o,Ei.transition=s}}function tT(e,t,n,r){var o=nt,s=Ei.transition;Ei.transition=null;try{nt=4,Up(e,t,n,r)}finally{nt=o,Ei.transition=s}}function Up(e,t,n,r){if(uu){var o=ch(e,t,n,r);if(o===null)uf(e,t,r,du,n),Vx(e,r);else if(Q4(o,e,t,n,r))r.stopPropagation();else if(Vx(e,r),t&4&&-1<X4.indexOf(e)){for(;o!==null;){var s=jl(o);if(s!==null&&OE(s),s=ch(e,t,n,r),s===null&&uf(e,t,r,du,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else uf(e,t,r,null,n)}}var du=null;function ch(e,t,n,r){if(du=null,e=Op(r),e=ys(e),e!==null)if(t=zs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=RE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return du=e,null}function HE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V4()){case $p:return 1;case jE:return 4;case lu:case U4:return 16;case _E:return 536870912;default:return 16}default:return 16}}var _o=null,Hp=null,zc=null;function WE(){if(zc)return zc;var e,t=Hp,n=t.length,r,o="value"in _o?_o.value:_o.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return zc=o.slice(e,1<r?1-r:void 0)}function Vc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cc(){return!0}function Hx(){return!1}function qn(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cc:Hx,this.isPropagationStopped=Hx,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),t}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wp=qn(na),Il=St({},na,{view:0,detail:0}),nT=qn(Il),ef,tf,va,Xu=St({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==va&&(va&&e.type==="mousemove"?(ef=e.screenX-va.screenX,tf=e.screenY-va.screenY):tf=ef=0,va=e),ef)},movementY:function(e){return"movementY"in e?e.movementY:tf}}),Wx=qn(Xu),rT=St({},Xu,{dataTransfer:0}),oT=qn(rT),sT=St({},Il,{relatedTarget:0}),nf=qn(sT),iT=St({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),aT=qn(iT),lT=St({},na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cT=qn(lT),uT=St({},na,{data:0}),Jx=qn(uT),dT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hT[e])?!!t[e]:!1}function Jp(){return pT}var mT=St({},Il,{key:function(e){if(e.key){var t=dT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jp,charCode:function(e){return e.type==="keypress"?Vc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gT=qn(mT),xT=St({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gx=qn(xT),vT=St({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jp}),yT=qn(vT),wT=St({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),ET=qn(wT),CT=St({},Xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ST=qn(CT),bT=[9,13,27,32],Gp=oo&&"CompositionEvent"in window,$a=null;oo&&"documentMode"in document&&($a=document.documentMode);var DT=oo&&"TextEvent"in window&&!$a,JE=oo&&(!Gp||$a&&8<$a&&11>=$a),Kx=" ",qx=!1;function GE(e,t){switch(e){case"keyup":return bT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ni=!1;function AT(e,t){switch(e){case"compositionend":return KE(t);case"keypress":return t.which!==32?null:(qx=!0,Kx);case"textInput":return e=t.data,e===Kx&&qx?null:e;default:return null}}function PT(e,t){if(ni)return e==="compositionend"||!Gp&&GE(e,t)?(e=WE(),zc=Hp=_o=null,ni=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return JE&&t.locale!=="ko"?null:t.data;default:return null}}var kT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kT[e.type]:t==="textarea"}function qE(e,t,n,r){AE(r),t=fu(t,"onChange"),0<t.length&&(n=new Wp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var za=null,il=null;function TT(e){iC(e,0)}function Qu(e){var t=si(e);if(yE(t))return e}function FT(e,t){if(e==="change")return t}var YE=!1;if(oo){var rf;if(oo){var of="oninput"in document;if(!of){var Xx=document.createElement("div");Xx.setAttribute("oninput","return;"),of=typeof Xx.oninput=="function"}rf=of}else rf=!1;YE=rf&&(!document.documentMode||9<document.documentMode)}function Qx(){za&&(za.detachEvent("onpropertychange",XE),il=za=null)}function XE(e){if(e.propertyName==="value"&&Qu(il)){var t=[];qE(t,il,e,Op(e)),FE(TT,t)}}function RT(e,t,n){e==="focusin"?(Qx(),za=t,il=n,za.attachEvent("onpropertychange",XE)):e==="focusout"&&Qx()}function MT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qu(il)}function NT(e,t){if(e==="click")return Qu(t)}function IT(e,t){if(e==="input"||e==="change")return Qu(t)}function jT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ar=typeof Object.is=="function"?Object.is:jT;function al(e,t){if(Ar(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!W0.call(t,o)||!Ar(e[o],t[o]))return!1}return!0}function Zx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ev(e,t){var n=Zx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zx(n)}}function QE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZE(){for(var e=window,t=su();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=su(e.document)}return t}function Kp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _T(e){var t=ZE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&QE(n.ownerDocument.documentElement,n)){if(r!==null&&Kp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=ev(n,s);var i=ev(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BT=oo&&"documentMode"in document&&11>=document.documentMode,ri=null,uh=null,Va=null,dh=!1;function tv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dh||ri==null||ri!==su(r)||(r=ri,"selectionStart"in r&&Kp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Va&&al(Va,r)||(Va=r,r=fu(uh,"onSelect"),0<r.length&&(t=new Wp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ri)))}function uc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var oi={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},sf={},eC={};oo&&(eC=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function Zu(e){if(sf[e])return sf[e];if(!oi[e])return e;var t=oi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in eC)return sf[e]=t[n];return e}var tC=Zu("animationend"),nC=Zu("animationiteration"),rC=Zu("animationstart"),oC=Zu("transitionend"),sC=new Map,nv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(e,t){sC.set(e,t),$s(t,[e])}for(var af=0;af<nv.length;af++){var lf=nv[af],LT=lf.toLowerCase(),OT=lf[0].toUpperCase()+lf.slice(1);ss(LT,"on"+OT)}ss(tC,"onAnimationEnd");ss(nC,"onAnimationIteration");ss(rC,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(oC,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function rv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,L4(r,t,void 0,e),e.currentTarget=null}function iC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;rv(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;rv(o,a,c),s=l}}}if(au)throw e=ih,au=!1,ih=null,e}function ft(e,t){var n=t[gh];n===void 0&&(n=t[gh]=new Set);var r=e+"__bubble";n.has(r)||(aC(t,e,2,!1),n.add(r))}function cf(e,t,n){var r=0;t&&(r|=4),aC(n,e,r,t)}var dc="_reactListening"+Math.random().toString(36).slice(2);function ll(e){if(!e[dc]){e[dc]=!0,pE.forEach(function(n){n!=="selectionchange"&&($T.has(n)||cf(n,!1,e),cf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dc]||(t[dc]=!0,cf("selectionchange",!1,t))}}function aC(e,t,n,r){switch(HE(t)){case 1:var o=eT;break;case 4:o=tT;break;default:o=Up}n=o.bind(null,t,n,e),o=void 0,!sh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function uf(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=ys(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}FE(function(){var c=s,u=Op(n),f=[];e:{var d=sC.get(e);if(d!==void 0){var m=Wp,g=e;switch(e){case"keypress":if(Vc(n)===0)break e;case"keydown":case"keyup":m=gT;break;case"focusin":g="focus",m=nf;break;case"focusout":g="blur",m=nf;break;case"beforeblur":case"afterblur":m=nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=oT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=yT;break;case tC:case nC:case rC:m=aT;break;case oC:m=ET;break;case"scroll":m=nT;break;case"wheel":m=ST;break;case"copy":case"cut":case"paste":m=cT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gx}var y=(t&4)!==0,E=!y&&e==="scroll",w=y?d!==null?d+"Capture":null:d;y=[];for(var x=c,v;x!==null;){v=x;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,w!==null&&(C=nl(x,w),C!=null&&y.push(cl(x,C,v)))),E)break;x=x.return}0<y.length&&(d=new m(d,g,null,n,u),f.push({event:d,listeners:y}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",d&&n!==rh&&(g=n.relatedTarget||n.fromElement)&&(ys(g)||g[so]))break e;if((m||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?ys(g):null,g!==null&&(E=zs(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(y=Wx,C="onMouseLeave",w="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Gx,C="onPointerLeave",w="onPointerEnter",x="pointer"),E=m==null?d:si(m),v=g==null?d:si(g),d=new y(C,x+"leave",m,n,u),d.target=E,d.relatedTarget=v,C=null,ys(u)===c&&(y=new y(w,x+"enter",g,n,u),y.target=v,y.relatedTarget=E,C=y),E=C,m&&g)t:{for(y=m,w=g,x=0,v=y;v;v=Ks(v))x++;for(v=0,C=w;C;C=Ks(C))v++;for(;0<x-v;)y=Ks(y),x--;for(;0<v-x;)w=Ks(w),v--;for(;x--;){if(y===w||w!==null&&y===w.alternate)break t;y=Ks(y),w=Ks(w)}y=null}else y=null;m!==null&&ov(f,d,m,y,!1),g!==null&&E!==null&&ov(f,E,g,y,!0)}}e:{if(d=c?si(c):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var b=FT;else if(Yx(d))if(YE)b=IT;else{b=MT;var D=RT}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=NT);if(b&&(b=b(e,c))){qE(f,b,n,u);break e}D&&D(e,d,c),e==="focusout"&&(D=d._wrapperState)&&D.controlled&&d.type==="number"&&Q0(d,"number",d.value)}switch(D=c?si(c):window,e){case"focusin":(Yx(D)||D.contentEditable==="true")&&(ri=D,uh=c,Va=null);break;case"focusout":Va=uh=ri=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,tv(f,n,u);break;case"selectionchange":if(BT)break;case"keydown":case"keyup":tv(f,n,u)}var A;if(Gp)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ni?GE(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(JE&&n.locale!=="ko"&&(ni||P!=="onCompositionStart"?P==="onCompositionEnd"&&ni&&(A=WE()):(_o=u,Hp="value"in _o?_o.value:_o.textContent,ni=!0)),D=fu(c,P),0<D.length&&(P=new Jx(P,e,null,n,u),f.push({event:P,listeners:D}),A?P.data=A:(A=KE(n),A!==null&&(P.data=A)))),(A=DT?AT(e,n):PT(e,n))&&(c=fu(c,"onBeforeInput"),0<c.length&&(u=new Jx("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=A))}iC(f,t)})}function cl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fu(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=nl(e,n),s!=null&&r.unshift(cl(e,s,o)),s=nl(e,t),s!=null&&r.push(cl(e,s,o))),e=e.return}return r}function Ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ov(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=nl(n,s),l!=null&&i.unshift(cl(n,l,a))):o||(l=nl(n,s),l!=null&&i.push(cl(n,l,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var zT=/\r\n?/g,VT=/\u0000|\uFFFD/g;function sv(e){return(typeof e=="string"?e:""+e).replace(zT,`
`).replace(VT,"")}function fc(e,t,n){if(t=sv(t),sv(e)!==t&&n)throw Error(Q(425))}function hu(){}var fh=null,hh=null;function ph(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,UT=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,HT=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(e){return iv.resolve(null).then(e).catch(WT)}:mh;function WT(e){setTimeout(function(){throw e})}function df(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),sl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);sl(t)}function Uo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function av(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ra=Math.random().toString(36).slice(2),jr="__reactFiber$"+ra,ul="__reactProps$"+ra,so="__reactContainer$"+ra,gh="__reactEvents$"+ra,JT="__reactListeners$"+ra,GT="__reactHandles$"+ra;function ys(e){var t=e[jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[so]||n[jr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=av(e);e!==null;){if(n=e[jr])return n;e=av(e)}return t}e=n,n=e.parentNode}return null}function jl(e){return e=e[jr]||e[so],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function si(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function ed(e){return e[ul]||null}var xh=[],ii=-1;function is(e){return{current:e}}function ht(e){0>ii||(e.current=xh[ii],xh[ii]=null,ii--)}function lt(e,t){ii++,xh[ii]=e.current,e.current=t}var Zo={},gn=is(Zo),In=is(!1),Ms=Zo;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Zo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function jn(e){return e=e.childContextTypes,e!=null}function pu(){ht(In),ht(gn)}function lv(e,t,n){if(gn.current!==Zo)throw Error(Q(168));lt(gn,t),lt(In,n)}function lC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Q(108,R4(e)||"Unknown",o));return St({},n,r)}function mu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zo,Ms=gn.current,lt(gn,e),lt(In,In.current),!0}function cv(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=lC(e,t,Ms),r.__reactInternalMemoizedMergedChildContext=e,ht(In),ht(gn),lt(gn,e)):ht(In),lt(In,n)}var Yr=null,td=!1,ff=!1;function cC(e){Yr===null?Yr=[e]:Yr.push(e)}function KT(e){td=!0,cC(e)}function as(){if(!ff&&Yr!==null){ff=!0;var e=0,t=nt;try{var n=Yr;for(nt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yr=null,td=!1}catch(o){throw Yr!==null&&(Yr=Yr.slice(e+1)),IE($p,as),o}finally{nt=t,ff=!1}}return null}var ai=[],li=0,gu=null,xu=0,rr=[],or=0,Ns=null,Xr=1,Qr="";function ms(e,t){ai[li++]=xu,ai[li++]=gu,gu=e,xu=t}function uC(e,t,n){rr[or++]=Xr,rr[or++]=Qr,rr[or++]=Ns,Ns=e;var r=Xr;e=Qr;var o=32-Cr(r)-1;r&=~(1<<o),n+=1;var s=32-Cr(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Xr=1<<32-Cr(t)+o|n<<o|r,Qr=s+e}else Xr=1<<s|n<<o|r,Qr=e}function qp(e){e.return!==null&&(ms(e,1),uC(e,1,0))}function Yp(e){for(;e===gu;)gu=ai[--li],ai[li]=null,xu=ai[--li],ai[li]=null;for(;e===Ns;)Ns=rr[--or],rr[or]=null,Qr=rr[--or],rr[or]=null,Xr=rr[--or],rr[or]=null}var Hn=null,Un=null,vt=!1,Er=null;function dC(e,t){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function uv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hn=e,Un=Uo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hn=e,Un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ns!==null?{id:Xr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hn=e,Un=null,!0):!1;default:return!1}}function vh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yh(e){if(vt){var t=Un;if(t){var n=t;if(!uv(e,t)){if(vh(e))throw Error(Q(418));t=Uo(n.nextSibling);var r=Hn;t&&uv(e,t)?dC(r,n):(e.flags=e.flags&-4097|2,vt=!1,Hn=e)}}else{if(vh(e))throw Error(Q(418));e.flags=e.flags&-4097|2,vt=!1,Hn=e}}}function dv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hn=e}function hc(e){if(e!==Hn)return!1;if(!vt)return dv(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ph(e.type,e.memoizedProps)),t&&(t=Un)){if(vh(e))throw fC(),Error(Q(418));for(;t;)dC(e,t),t=Uo(t.nextSibling)}if(dv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Un=Uo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Un=null}}else Un=Hn?Uo(e.stateNode.nextSibling):null;return!0}function fC(){for(var e=Un;e;)e=Uo(e.nextSibling)}function $i(){Un=Hn=null,vt=!1}function Xp(e){Er===null?Er=[e]:Er.push(e)}var qT=ho.ReactCurrentBatchConfig;function ya(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function pc(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fv(e){var t=e._init;return t(e._payload)}function hC(e){function t(w,x){if(e){var v=w.deletions;v===null?(w.deletions=[x],w.flags|=16):v.push(x)}}function n(w,x){if(!e)return null;for(;x!==null;)t(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function o(w,x){return w=Go(w,x),w.index=0,w.sibling=null,w}function s(w,x,v){return w.index=v,e?(v=w.alternate,v!==null?(v=v.index,v<x?(w.flags|=2,x):v):(w.flags|=2,x)):(w.flags|=1048576,x)}function i(w){return e&&w.alternate===null&&(w.flags|=2),w}function a(w,x,v,C){return x===null||x.tag!==6?(x=yf(v,w.mode,C),x.return=w,x):(x=o(x,v),x.return=w,x)}function l(w,x,v,C){var b=v.type;return b===ti?u(w,x,v.props.children,C,v.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ao&&fv(b)===x.type)?(C=o(x,v.props),C.ref=ya(w,x,v),C.return=w,C):(C=qc(v.type,v.key,v.props,null,w.mode,C),C.ref=ya(w,x,v),C.return=w,C)}function c(w,x,v,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=wf(v,w.mode,C),x.return=w,x):(x=o(x,v.children||[]),x.return=w,x)}function u(w,x,v,C,b){return x===null||x.tag!==7?(x=Ts(v,w.mode,C,b),x.return=w,x):(x=o(x,v),x.return=w,x)}function f(w,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=yf(""+x,w.mode,v),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rc:return v=qc(x.type,x.key,x.props,null,w.mode,v),v.ref=ya(w,null,x),v.return=w,v;case ei:return x=wf(x,w.mode,v),x.return=w,x;case Ao:var C=x._init;return f(w,C(x._payload),v)}if(Fa(x)||pa(x))return x=Ts(x,w.mode,v,null),x.return=w,x;pc(w,x)}return null}function d(w,x,v,C){var b=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(w,x,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rc:return v.key===b?l(w,x,v,C):null;case ei:return v.key===b?c(w,x,v,C):null;case Ao:return b=v._init,d(w,x,b(v._payload),C)}if(Fa(v)||pa(v))return b!==null?null:u(w,x,v,C,null);pc(w,v)}return null}function m(w,x,v,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(v)||null,a(x,w,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case rc:return w=w.get(C.key===null?v:C.key)||null,l(x,w,C,b);case ei:return w=w.get(C.key===null?v:C.key)||null,c(x,w,C,b);case Ao:var D=C._init;return m(w,x,v,D(C._payload),b)}if(Fa(C)||pa(C))return w=w.get(v)||null,u(x,w,C,b,null);pc(x,C)}return null}function g(w,x,v,C){for(var b=null,D=null,A=x,P=x=0,F=null;A!==null&&P<v.length;P++){A.index>P?(F=A,A=null):F=A.sibling;var k=d(w,A,v[P],C);if(k===null){A===null&&(A=F);break}e&&A&&k.alternate===null&&t(w,A),x=s(k,x,P),D===null?b=k:D.sibling=k,D=k,A=F}if(P===v.length)return n(w,A),vt&&ms(w,P),b;if(A===null){for(;P<v.length;P++)A=f(w,v[P],C),A!==null&&(x=s(A,x,P),D===null?b=A:D.sibling=A,D=A);return vt&&ms(w,P),b}for(A=r(w,A);P<v.length;P++)F=m(A,w,P,v[P],C),F!==null&&(e&&F.alternate!==null&&A.delete(F.key===null?P:F.key),x=s(F,x,P),D===null?b=F:D.sibling=F,D=F);return e&&A.forEach(function(T){return t(w,T)}),vt&&ms(w,P),b}function y(w,x,v,C){var b=pa(v);if(typeof b!="function")throw Error(Q(150));if(v=b.call(v),v==null)throw Error(Q(151));for(var D=b=null,A=x,P=x=0,F=null,k=v.next();A!==null&&!k.done;P++,k=v.next()){A.index>P?(F=A,A=null):F=A.sibling;var T=d(w,A,k.value,C);if(T===null){A===null&&(A=F);break}e&&A&&T.alternate===null&&t(w,A),x=s(T,x,P),D===null?b=T:D.sibling=T,D=T,A=F}if(k.done)return n(w,A),vt&&ms(w,P),b;if(A===null){for(;!k.done;P++,k=v.next())k=f(w,k.value,C),k!==null&&(x=s(k,x,P),D===null?b=k:D.sibling=k,D=k);return vt&&ms(w,P),b}for(A=r(w,A);!k.done;P++,k=v.next())k=m(A,w,P,k.value,C),k!==null&&(e&&k.alternate!==null&&A.delete(k.key===null?P:k.key),x=s(k,x,P),D===null?b=k:D.sibling=k,D=k);return e&&A.forEach(function(M){return t(w,M)}),vt&&ms(w,P),b}function E(w,x,v,C){if(typeof v=="object"&&v!==null&&v.type===ti&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case rc:e:{for(var b=v.key,D=x;D!==null;){if(D.key===b){if(b=v.type,b===ti){if(D.tag===7){n(w,D.sibling),x=o(D,v.props.children),x.return=w,w=x;break e}}else if(D.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ao&&fv(b)===D.type){n(w,D.sibling),x=o(D,v.props),x.ref=ya(w,D,v),x.return=w,w=x;break e}n(w,D);break}else t(w,D);D=D.sibling}v.type===ti?(x=Ts(v.props.children,w.mode,C,v.key),x.return=w,w=x):(C=qc(v.type,v.key,v.props,null,w.mode,C),C.ref=ya(w,x,v),C.return=w,w=C)}return i(w);case ei:e:{for(D=v.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(w,x.sibling),x=o(x,v.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else t(w,x);x=x.sibling}x=wf(v,w.mode,C),x.return=w,w=x}return i(w);case Ao:return D=v._init,E(w,x,D(v._payload),C)}if(Fa(v))return g(w,x,v,C);if(pa(v))return y(w,x,v,C);pc(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(w,x.sibling),x=o(x,v),x.return=w,w=x):(n(w,x),x=yf(v,w.mode,C),x.return=w,w=x),i(w)):n(w,x)}return E}var zi=hC(!0),pC=hC(!1),vu=is(null),yu=null,ci=null,Qp=null;function Zp(){Qp=ci=yu=null}function em(e){var t=vu.current;ht(vu),e._currentValue=t}function wh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){yu=e,Qp=ci=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nn=!0),e.firstContext=null)}function cr(e){var t=e._currentValue;if(Qp!==e)if(e={context:e,memoizedValue:t,next:null},ci===null){if(yu===null)throw Error(Q(308));ci=e,yu.dependencies={lanes:0,firstContext:e}}else ci=ci.next=e;return t}var ws=null;function tm(e){ws===null?ws=[e]:ws.push(e)}function mC(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,tm(t)):(n.next=o.next,o.next=n),t.interleaved=n,io(e,r)}function io(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Po=!1;function nm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function to(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ho(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,io(e,n)}return o=r.interleaved,o===null?(t.next=t,tm(r)):(t.next=o.next,o.next=t),r.interleaved=t,io(e,n)}function Uc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zp(e,n)}}function hv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function wu(e,t,n,r){var o=e.updateQueue;Po=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=o.baseState;i=0,u=c=l=null,a=s;do{var d=a.lane,m=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,y=a;switch(d=t,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(m,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,d=typeof g=="function"?g.call(m,f,d):g,d==null)break e;f=St({},f,d);break e;case 2:Po=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=o.effects,d===null?o.effects=[a]:d.push(a))}else m={eventTime:m,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,i|=d;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;d=a,a=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(u===null&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);js|=i,e.lanes=i,e.memoizedState=f}}function pv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Q(191,o));o.call(r)}}}var _l={},Lr=is(_l),dl=is(_l),fl=is(_l);function Es(e){if(e===_l)throw Error(Q(174));return e}function rm(e,t){switch(lt(fl,t),lt(dl,e),lt(Lr,_l),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=eh(t,e)}ht(Lr),lt(Lr,t)}function Vi(){ht(Lr),ht(dl),ht(fl)}function xC(e){Es(fl.current);var t=Es(Lr.current),n=eh(t,e.type);t!==n&&(lt(dl,e),lt(Lr,n))}function om(e){dl.current===e&&(ht(Lr),ht(dl))}var yt=is(0);function Eu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hf=[];function sm(){for(var e=0;e<hf.length;e++)hf[e]._workInProgressVersionPrimary=null;hf.length=0}var Hc=ho.ReactCurrentDispatcher,pf=ho.ReactCurrentBatchConfig,Is=0,Ct=null,Bt=null,Vt=null,Cu=!1,Ua=!1,hl=0,YT=0;function cn(){throw Error(Q(321))}function im(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ar(e[n],t[n]))return!1;return!0}function am(e,t,n,r,o,s){if(Is=s,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hc.current=e===null||e.memoizedState===null?eF:tF,e=n(r,o),Ua){s=0;do{if(Ua=!1,hl=0,25<=s)throw Error(Q(301));s+=1,Vt=Bt=null,t.updateQueue=null,Hc.current=nF,e=n(r,o)}while(Ua)}if(Hc.current=Su,t=Bt!==null&&Bt.next!==null,Is=0,Vt=Bt=Ct=null,Cu=!1,t)throw Error(Q(300));return e}function lm(){var e=hl!==0;return hl=0,e}function Rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ct.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function ur(){if(Bt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var t=Vt===null?Ct.memoizedState:Vt.next;if(t!==null)Vt=t,Bt=e;else{if(e===null)throw Error(Q(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Vt===null?Ct.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function pl(e,t){return typeof t=="function"?t(e):t}function mf(e){var t=ur(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=Bt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var u=c.lane;if((Is&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,i=r):l=l.next=f,Ct.lanes|=u,js|=u}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Ar(r,t.memoizedState)||(Nn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ct.lanes|=s,js|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function gf(e){var t=ur(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);Ar(s,t.memoizedState)||(Nn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function vC(){}function yC(e,t){var n=Ct,r=ur(),o=t(),s=!Ar(r.memoizedState,o);if(s&&(r.memoizedState=o,Nn=!0),r=r.queue,cm(CC.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,ml(9,EC.bind(null,n,r,o,t),void 0,null),Ht===null)throw Error(Q(349));Is&30||wC(n,t,o)}return o}function wC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function EC(e,t,n,r){t.value=n,t.getSnapshot=r,SC(t)&&bC(e)}function CC(e,t,n){return n(function(){SC(t)&&bC(e)})}function SC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ar(e,n)}catch{return!0}}function bC(e){var t=io(e,1);t!==null&&Sr(t,e,1,-1)}function mv(e){var t=Rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:e},t.queue=e,e=e.dispatch=ZT.bind(null,Ct,e),[t.memoizedState,e]}function ml(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function DC(){return ur().memoizedState}function Wc(e,t,n,r){var o=Rr();Ct.flags|=e,o.memoizedState=ml(1|t,n,void 0,r===void 0?null:r)}function nd(e,t,n,r){var o=ur();r=r===void 0?null:r;var s=void 0;if(Bt!==null){var i=Bt.memoizedState;if(s=i.destroy,r!==null&&im(r,i.deps)){o.memoizedState=ml(t,n,s,r);return}}Ct.flags|=e,o.memoizedState=ml(1|t,n,s,r)}function gv(e,t){return Wc(8390656,8,e,t)}function cm(e,t){return nd(2048,8,e,t)}function AC(e,t){return nd(4,2,e,t)}function PC(e,t){return nd(4,4,e,t)}function kC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function TC(e,t,n){return n=n!=null?n.concat([e]):null,nd(4,4,kC.bind(null,t,e),n)}function um(){}function FC(e,t){var n=ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&im(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function RC(e,t){var n=ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&im(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function MC(e,t,n){return Is&21?(Ar(n,t)||(n=BE(),Ct.lanes|=n,js|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nn=!0),e.memoizedState=n)}function XT(e,t){var n=nt;nt=n!==0&&4>n?n:4,e(!0);var r=pf.transition;pf.transition={};try{e(!1),t()}finally{nt=n,pf.transition=r}}function NC(){return ur().memoizedState}function QT(e,t,n){var r=Jo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IC(e))jC(t,n);else if(n=mC(e,t,n,r),n!==null){var o=En();Sr(n,e,r,o),_C(n,t,r)}}function ZT(e,t,n){var r=Jo(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IC(e))jC(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Ar(a,i)){var l=t.interleaved;l===null?(o.next=o,tm(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=mC(e,t,o,r),n!==null&&(o=En(),Sr(n,e,r,o),_C(n,t,r))}}function IC(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function jC(e,t){Ua=Cu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _C(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zp(e,n)}}var Su={readContext:cr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},eF={readContext:cr,useCallback:function(e,t){return Rr().memoizedState=[e,t===void 0?null:t],e},useContext:cr,useEffect:gv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wc(4194308,4,kC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wc(4,2,e,t)},useMemo:function(e,t){var n=Rr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=QT.bind(null,Ct,e),[r.memoizedState,e]},useRef:function(e){var t=Rr();return e={current:e},t.memoizedState=e},useState:mv,useDebugValue:um,useDeferredValue:function(e){return Rr().memoizedState=e},useTransition:function(){var e=mv(!1),t=e[0];return e=XT.bind(null,e[1]),Rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ct,o=Rr();if(vt){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),Ht===null)throw Error(Q(349));Is&30||wC(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,gv(CC.bind(null,r,s,e),[e]),r.flags|=2048,ml(9,EC.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rr(),t=Ht.identifierPrefix;if(vt){var n=Qr,r=Xr;n=(r&~(1<<32-Cr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=YT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tF={readContext:cr,useCallback:FC,useContext:cr,useEffect:cm,useImperativeHandle:TC,useInsertionEffect:AC,useLayoutEffect:PC,useMemo:RC,useReducer:mf,useRef:DC,useState:function(){return mf(pl)},useDebugValue:um,useDeferredValue:function(e){var t=ur();return MC(t,Bt.memoizedState,e)},useTransition:function(){var e=mf(pl)[0],t=ur().memoizedState;return[e,t]},useMutableSource:vC,useSyncExternalStore:yC,useId:NC,unstable_isNewReconciler:!1},nF={readContext:cr,useCallback:FC,useContext:cr,useEffect:cm,useImperativeHandle:TC,useInsertionEffect:AC,useLayoutEffect:PC,useMemo:RC,useReducer:gf,useRef:DC,useState:function(){return gf(pl)},useDebugValue:um,useDeferredValue:function(e){var t=ur();return Bt===null?t.memoizedState=e:MC(t,Bt.memoizedState,e)},useTransition:function(){var e=gf(pl)[0],t=ur().memoizedState;return[e,t]},useMutableSource:vC,useSyncExternalStore:yC,useId:NC,unstable_isNewReconciler:!1};function xr(e,t){if(e&&e.defaultProps){t=St({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Eh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:St({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var rd={isMounted:function(e){return(e=e._reactInternals)?zs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=En(),o=Jo(e),s=to(r,o);s.payload=t,n!=null&&(s.callback=n),t=Ho(e,s,o),t!==null&&(Sr(t,e,o,r),Uc(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=En(),o=Jo(e),s=to(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ho(e,s,o),t!==null&&(Sr(t,e,o,r),Uc(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=En(),r=Jo(e),o=to(n,r);o.tag=2,t!=null&&(o.callback=t),t=Ho(e,o,r),t!==null&&(Sr(t,e,r,n),Uc(t,e,r))}};function xv(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!al(n,r)||!al(o,s):!0}function BC(e,t,n){var r=!1,o=Zo,s=t.contextType;return typeof s=="object"&&s!==null?s=cr(s):(o=jn(t)?Ms:gn.current,r=t.contextTypes,s=(r=r!=null)?Oi(e,o):Zo),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function vv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&rd.enqueueReplaceState(t,t.state,null)}function Ch(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},nm(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=cr(s):(s=jn(t)?Ms:gn.current,o.context=Oi(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Eh(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&rd.enqueueReplaceState(o,o.state,null),wu(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ui(e,t){try{var n="",r=t;do n+=F4(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function xf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rF=typeof WeakMap=="function"?WeakMap:Map;function LC(e,t,n){n=to(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Du||(Du=!0,Nh=r),Sh(e,t)},n}function OC(e,t,n){n=to(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Sh(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sh(e,t),typeof r!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function yv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rF;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=xF.bind(null,e,t,n),t.then(e,e))}function wv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ev(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=to(-1,1),t.tag=2,Ho(n,t,1))),n.lanes|=1),e)}var oF=ho.ReactCurrentOwner,Nn=!1;function yn(e,t,n,r){t.child=e===null?pC(t,null,n,r):zi(t,e.child,n,r)}function Cv(e,t,n,r,o){n=n.render;var s=t.ref;return Ci(t,o),r=am(e,t,n,r,s,o),n=lm(),e!==null&&!Nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ao(e,t,o)):(vt&&n&&qp(t),t.flags|=1,yn(e,t,r,o),t.child)}function Sv(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!vm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,$C(e,t,s,r,o)):(e=qc(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:al,n(i,r)&&e.ref===t.ref)return ao(e,t,o)}return t.flags|=1,e=Go(s,r),e.ref=t.ref,e.return=t,t.child=e}function $C(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(al(s,r)&&e.ref===t.ref)if(Nn=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Nn=!0);else return t.lanes=e.lanes,ao(e,t,o)}return bh(e,t,n,r,o)}function zC(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(di,$n),$n|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lt(di,$n),$n|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,lt(di,$n),$n|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,lt(di,$n),$n|=r;return yn(e,t,o,n),t.child}function VC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bh(e,t,n,r,o){var s=jn(n)?Ms:gn.current;return s=Oi(t,s),Ci(t,o),n=am(e,t,n,r,s,o),r=lm(),e!==null&&!Nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ao(e,t,o)):(vt&&r&&qp(t),t.flags|=1,yn(e,t,n,o),t.child)}function bv(e,t,n,r,o){if(jn(n)){var s=!0;mu(t)}else s=!1;if(Ci(t,o),t.stateNode===null)Jc(e,t),BC(t,n,r),Ch(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=cr(c):(c=jn(n)?Ms:gn.current,c=Oi(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&vv(t,i,r,c),Po=!1;var d=t.memoizedState;i.state=d,wu(t,r,i,o),l=t.memoizedState,a!==r||d!==l||In.current||Po?(typeof u=="function"&&(Eh(t,n,u,r),l=t.memoizedState),(a=Po||xv(t,n,a,r,d,l,c))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,gC(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:xr(t.type,a),i.props=c,f=t.pendingProps,d=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=cr(l):(l=jn(n)?Ms:gn.current,l=Oi(t,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||d!==l)&&vv(t,i,r,l),Po=!1,d=t.memoizedState,i.state=d,wu(t,r,i,o);var g=t.memoizedState;a!==f||d!==g||In.current||Po?(typeof m=="function"&&(Eh(t,n,m,r),g=t.memoizedState),(c=Po||xv(t,n,c,r,d,g,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Dh(e,t,n,r,s,o)}function Dh(e,t,n,r,o,s){VC(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&cv(t,n,!1),ao(e,t,s);r=t.stateNode,oF.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=zi(t,e.child,null,s),t.child=zi(t,null,a,s)):yn(e,t,a,s),t.memoizedState=r.state,o&&cv(t,n,!0),t.child}function UC(e){var t=e.stateNode;t.pendingContext?lv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lv(e,t.context,!1),rm(e,t.containerInfo)}function Dv(e,t,n,r,o){return $i(),Xp(o),t.flags|=256,yn(e,t,n,r),t.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Ph(e){return{baseLanes:e,cachePool:null,transitions:null}}function HC(e,t,n){var r=t.pendingProps,o=yt.current,s=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),lt(yt,o&1),e===null)return yh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=id(i,r,0,null),e=Ts(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ph(n),t.memoizedState=Ah,e):dm(t,i));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return sF(e,t,i,r,a,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Go(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Go(a,s):(s=Ts(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Ph(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Ah,r}return s=e.child,e=s.sibling,r=Go(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function dm(e,t){return t=id({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mc(e,t,n,r){return r!==null&&Xp(r),zi(t,e.child,null,n),e=dm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sF(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=xf(Error(Q(422))),mc(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=id({mode:"visible",children:r.children},o,0,null),s=Ts(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&zi(t,e.child,null,i),t.child.memoizedState=Ph(i),t.memoizedState=Ah,s);if(!(t.mode&1))return mc(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=xf(s,r,void 0),mc(e,t,i,r)}if(a=(i&e.childLanes)!==0,Nn||a){if(r=Ht,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,io(e,o),Sr(r,e,o,-1))}return xm(),r=xf(Error(Q(421))),mc(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=vF.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Un=Uo(o.nextSibling),Hn=t,vt=!0,Er=null,e!==null&&(rr[or++]=Xr,rr[or++]=Qr,rr[or++]=Ns,Xr=e.id,Qr=e.overflow,Ns=t),t=dm(t,r.children),t.flags|=4096,t)}function Av(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wh(e.return,t,n)}function vf(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function WC(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(yn(e,t,r.children,n),r=yt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Av(e,n,t);else if(e.tag===19)Av(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(yt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Eu(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),vf(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Eu(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}vf(t,!0,n,null,s);break;case"together":vf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ao(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),js|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=Go(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Go(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iF(e,t,n){switch(t.tag){case 3:UC(t),$i();break;case 5:xC(t);break;case 1:jn(t.type)&&mu(t);break;case 4:rm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;lt(vu,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(lt(yt,yt.current&1),t.flags|=128,null):n&t.child.childLanes?HC(e,t,n):(lt(yt,yt.current&1),e=ao(e,t,n),e!==null?e.sibling:null);lt(yt,yt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return WC(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),lt(yt,yt.current),r)break;return null;case 22:case 23:return t.lanes=0,zC(e,t,n)}return ao(e,t,n)}var JC,kh,GC,KC;JC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kh=function(){};GC=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Es(Lr.current);var s=null;switch(n){case"input":o=Y0(e,o),r=Y0(e,r),s=[];break;case"select":o=St({},o,{value:void 0}),r=St({},r,{value:void 0}),s=[];break;case"textarea":o=Z0(e,o),r=Z0(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=hu)}th(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(el.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(el.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ft("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};KC=function(e,t,n,r){n!==r&&(t.flags|=4)};function wa(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function aF(e,t,n){var r=t.pendingProps;switch(Yp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return jn(t.type)&&pu(),un(t),null;case 3:return r=t.stateNode,Vi(),ht(In),ht(gn),sm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Er!==null&&(_h(Er),Er=null))),kh(e,t),un(t),null;case 5:om(t);var o=Es(fl.current);if(n=t.type,e!==null&&t.stateNode!=null)GC(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return un(t),null}if(e=Es(Lr.current),hc(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[jr]=t,r[ul]=s,e=(t.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(o=0;o<Ma.length;o++)ft(Ma[o],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":jx(r,s),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ft("invalid",r);break;case"textarea":Bx(r,s),ft("invalid",r)}th(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&fc(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fc(r.textContent,a,e),o=["children",""+a]):el.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&ft("scroll",r)}switch(n){case"input":oc(r),_x(r,s,!0);break;case"textarea":oc(r),Lx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hu)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=CE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[jr]=t,e[ul]=r,JC(e,t,!1,!1),t.stateNode=e;e:{switch(i=nh(n,r),n){case"dialog":ft("cancel",e),ft("close",e),o=r;break;case"iframe":case"object":case"embed":ft("load",e),o=r;break;case"video":case"audio":for(o=0;o<Ma.length;o++)ft(Ma[o],e);o=r;break;case"source":ft("error",e),o=r;break;case"img":case"image":case"link":ft("error",e),ft("load",e),o=r;break;case"details":ft("toggle",e),o=r;break;case"input":jx(e,r),o=Y0(e,r),ft("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=St({},r,{value:void 0}),ft("invalid",e);break;case"textarea":Bx(e,r),o=Z0(e,r),ft("invalid",e);break;default:o=r}th(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DE(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&SE(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tl(e,l):typeof l=="number"&&tl(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(el.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ft("scroll",e):l!=null&&jp(e,s,l,i))}switch(n){case"input":oc(e),_x(e,r,!1);break;case"textarea":oc(e),Lx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Qo(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?vi(e,!!r.multiple,s,!1):r.defaultValue!=null&&vi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=hu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return un(t),null;case 6:if(e&&t.stateNode!=null)KC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=Es(fl.current),Es(Lr.current),hc(t)){if(r=t.stateNode,n=t.memoizedProps,r[jr]=t,(s=r.nodeValue!==n)&&(e=Hn,e!==null))switch(e.tag){case 3:fc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fc(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=t,t.stateNode=r}return un(t),null;case 13:if(ht(yt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&Un!==null&&t.mode&1&&!(t.flags&128))fC(),$i(),t.flags|=98560,s=!1;else if(s=hc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[jr]=t}else $i(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),s=!1}else Er!==null&&(_h(Er),Er=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||yt.current&1?Ot===0&&(Ot=3):xm())),t.updateQueue!==null&&(t.flags|=4),un(t),null);case 4:return Vi(),kh(e,t),e===null&&ll(t.stateNode.containerInfo),un(t),null;case 10:return em(t.type._context),un(t),null;case 17:return jn(t.type)&&pu(),un(t),null;case 19:if(ht(yt),s=t.memoizedState,s===null)return un(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)wa(s,!1);else{if(Ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Eu(e),i!==null){for(t.flags|=128,wa(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lt(yt,yt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Nt()>Hi&&(t.flags|=128,r=!0,wa(s,!1),t.lanes=4194304)}else{if(!r)if(e=Eu(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!vt)return un(t),null}else 2*Nt()-s.renderingStartTime>Hi&&n!==1073741824&&(t.flags|=128,r=!0,wa(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Nt(),t.sibling=null,n=yt.current,lt(yt,r?n&1|2:n&1),t):(un(t),null);case 22:case 23:return gm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$n&1073741824&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function lF(e,t){switch(Yp(t),t.tag){case 1:return jn(t.type)&&pu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vi(),ht(In),ht(gn),sm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return om(t),null;case 13:if(ht(yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));$i()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ht(yt),null;case 4:return Vi(),null;case 10:return em(t.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var gc=!1,hn=!1,cF=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ui(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pt(e,t,r)}else n.current=null}function Th(e,t,n){try{n()}catch(r){Pt(e,t,r)}}var Pv=!1;function uF(e,t){if(fh=uu,e=ZE(),Kp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,f=e,d=null;t:for(;;){for(var m;f!==n||o!==0&&f.nodeType!==3||(a=i+o),f!==s||r!==0&&f.nodeType!==3||(l=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(m=f.firstChild)!==null;)d=f,f=m;for(;;){if(f===e)break t;if(d===n&&++c===o&&(a=i),d===s&&++u===r&&(l=i),(m=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hh={focusedElem:e,selectionRange:n},uu=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,E=g.memoizedState,w=t.stateNode,x=w.getSnapshotBeforeUpdate(t.elementType===t.type?y:xr(t.type,y),E);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(C){Pt(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return g=Pv,Pv=!1,g}function Ha(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Th(t,n,s)}o=o.next}while(o!==r)}}function od(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qC(e){var t=e.alternate;t!==null&&(e.alternate=null,qC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jr],delete t[ul],delete t[gh],delete t[JT],delete t[GT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YC(e){return e.tag===5||e.tag===3||e.tag===4}function kv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hu));else if(r!==4&&(e=e.child,e!==null))for(Rh(e,t,n),e=e.sibling;e!==null;)Rh(e,t,n),e=e.sibling}function Mh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Mh(e,t,n),e=e.sibling;e!==null;)Mh(e,t,n),e=e.sibling}var Zt=null,wr=!1;function xo(e,t,n){for(n=n.child;n!==null;)XC(e,t,n),n=n.sibling}function XC(e,t,n){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(Yu,n)}catch{}switch(n.tag){case 5:hn||ui(n,t);case 6:var r=Zt,o=wr;Zt=null,xo(e,t,n),Zt=r,wr=o,Zt!==null&&(wr?(e=Zt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Zt.removeChild(n.stateNode));break;case 18:Zt!==null&&(wr?(e=Zt,n=n.stateNode,e.nodeType===8?df(e.parentNode,n):e.nodeType===1&&df(e,n),sl(e)):df(Zt,n.stateNode));break;case 4:r=Zt,o=wr,Zt=n.stateNode.containerInfo,wr=!0,xo(e,t,n),Zt=r,wr=o;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Th(n,t,i),o=o.next}while(o!==r)}xo(e,t,n);break;case 1:if(!hn&&(ui(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pt(n,t,a)}xo(e,t,n);break;case 21:xo(e,t,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,xo(e,t,n),hn=r):xo(e,t,n);break;default:xo(e,t,n)}}function Tv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cF),t.forEach(function(r){var o=yF.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function pr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Zt=a.stateNode,wr=!1;break e;case 3:Zt=a.stateNode.containerInfo,wr=!0;break e;case 4:Zt=a.stateNode.containerInfo,wr=!0;break e}a=a.return}if(Zt===null)throw Error(Q(160));XC(s,i,o),Zt=null,wr=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Pt(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QC(t,e),t=t.sibling}function QC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pr(t,e),Fr(e),r&4){try{Ha(3,e,e.return),od(3,e)}catch(y){Pt(e,e.return,y)}try{Ha(5,e,e.return)}catch(y){Pt(e,e.return,y)}}break;case 1:pr(t,e),Fr(e),r&512&&n!==null&&ui(n,n.return);break;case 5:if(pr(t,e),Fr(e),r&512&&n!==null&&ui(n,n.return),e.flags&32){var o=e.stateNode;try{tl(o,"")}catch(y){Pt(e,e.return,y)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wE(o,s),nh(a,i);var c=nh(a,s);for(i=0;i<l.length;i+=2){var u=l[i],f=l[i+1];u==="style"?DE(o,f):u==="dangerouslySetInnerHTML"?SE(o,f):u==="children"?tl(o,f):jp(o,u,f,c)}switch(a){case"input":X0(o,s);break;case"textarea":EE(o,s);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?vi(o,!!s.multiple,m,!1):d!==!!s.multiple&&(s.defaultValue!=null?vi(o,!!s.multiple,s.defaultValue,!0):vi(o,!!s.multiple,s.multiple?[]:"",!1))}o[ul]=s}catch(y){Pt(e,e.return,y)}}break;case 6:if(pr(t,e),Fr(e),r&4){if(e.stateNode===null)throw Error(Q(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(y){Pt(e,e.return,y)}}break;case 3:if(pr(t,e),Fr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sl(t.containerInfo)}catch(y){Pt(e,e.return,y)}break;case 4:pr(t,e),Fr(e);break;case 13:pr(t,e),Fr(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(pm=Nt())),r&4&&Tv(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(hn=(c=hn)||u,pr(t,e),hn=c):pr(t,e),Fr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(ue=e,u=e.child;u!==null;){for(f=ue=u;ue!==null;){switch(d=ue,m=d.child,d.tag){case 0:case 11:case 14:case 15:Ha(4,d,d.return);break;case 1:ui(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Pt(r,n,y)}}break;case 5:ui(d,d.return);break;case 22:if(d.memoizedState!==null){Rv(f);continue}}m!==null?(m.return=d,ue=m):Rv(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{o=f.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bE("display",i))}catch(y){Pt(e,e.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Pt(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pr(t,e),Fr(e),r&4&&Tv(e);break;case 21:break;default:pr(t,e),Fr(e)}}function Fr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(YC(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(tl(o,""),r.flags&=-33);var s=kv(e);Mh(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=kv(e);Rh(e,a,i);break;default:throw Error(Q(161))}}catch(l){Pt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dF(e,t,n){ue=e,ZC(e)}function ZC(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var o=ue,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||gc;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||hn;a=gc;var c=hn;if(gc=i,(hn=l)&&!c)for(ue=o;ue!==null;)i=ue,l=i.child,i.tag===22&&i.memoizedState!==null?Mv(o):l!==null?(l.return=i,ue=l):Mv(o);for(;s!==null;)ue=s,ZC(s),s=s.sibling;ue=o,gc=a,hn=c}Fv(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,ue=s):Fv(e)}}function Fv(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||od(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!hn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:xr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&pv(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}pv(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&sl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}hn||t.flags&512&&Fh(t)}catch(d){Pt(t,t.return,d)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Rv(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Mv(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{od(4,t)}catch(l){Pt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){Pt(t,o,l)}}var s=t.return;try{Fh(t)}catch(l){Pt(t,s,l)}break;case 5:var i=t.return;try{Fh(t)}catch(l){Pt(t,i,l)}}}catch(l){Pt(t,t.return,l)}if(t===e){ue=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ue=a;break}ue=t.return}}var fF=Math.ceil,bu=ho.ReactCurrentDispatcher,fm=ho.ReactCurrentOwner,ar=ho.ReactCurrentBatchConfig,Ue=0,Ht=null,It=null,nn=0,$n=0,di=is(0),Ot=0,gl=null,js=0,sd=0,hm=0,Wa=null,Rn=null,pm=0,Hi=1/0,qr=null,Du=!1,Nh=null,Wo=null,xc=!1,Bo=null,Au=0,Ja=0,Ih=null,Gc=-1,Kc=0;function En(){return Ue&6?Nt():Gc!==-1?Gc:Gc=Nt()}function Jo(e){return e.mode&1?Ue&2&&nn!==0?nn&-nn:qT.transition!==null?(Kc===0&&(Kc=BE()),Kc):(e=nt,e!==0||(e=window.event,e=e===void 0?16:HE(e.type)),e):1}function Sr(e,t,n,r){if(50<Ja)throw Ja=0,Ih=null,Error(Q(185));Nl(e,n,r),(!(Ue&2)||e!==Ht)&&(e===Ht&&(!(Ue&2)&&(sd|=n),Ot===4&&Fo(e,nn)),_n(e,r),n===1&&Ue===0&&!(t.mode&1)&&(Hi=Nt()+500,td&&as()))}function _n(e,t){var n=e.callbackNode;q4(e,t);var r=cu(e,e===Ht?nn:0);if(r===0)n!==null&&zx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&zx(n),t===1)e.tag===0?KT(Nv.bind(null,e)):cC(Nv.bind(null,e)),HT(function(){!(Ue&6)&&as()}),n=null;else{switch(LE(r)){case 1:n=$p;break;case 4:n=jE;break;case 16:n=lu;break;case 536870912:n=_E;break;default:n=lu}n=aS(n,eS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function eS(e,t){if(Gc=-1,Kc=0,Ue&6)throw Error(Q(327));var n=e.callbackNode;if(Si()&&e.callbackNode!==n)return null;var r=cu(e,e===Ht?nn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pu(e,r);else{t=r;var o=Ue;Ue|=2;var s=nS();(Ht!==e||nn!==t)&&(qr=null,Hi=Nt()+500,ks(e,t));do try{mF();break}catch(a){tS(e,a)}while(!0);Zp(),bu.current=s,Ue=o,It!==null?t=0:(Ht=null,nn=0,t=Ot)}if(t!==0){if(t===2&&(o=ah(e),o!==0&&(r=o,t=jh(e,o))),t===1)throw n=gl,ks(e,0),Fo(e,r),_n(e,Nt()),n;if(t===6)Fo(e,r);else{if(o=e.current.alternate,!(r&30)&&!hF(o)&&(t=Pu(e,r),t===2&&(s=ah(e),s!==0&&(r=s,t=jh(e,s))),t===1))throw n=gl,ks(e,0),Fo(e,r),_n(e,Nt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:gs(e,Rn,qr);break;case 3:if(Fo(e,r),(r&130023424)===r&&(t=pm+500-Nt(),10<t)){if(cu(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){En(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=mh(gs.bind(null,e,Rn,qr),t);break}gs(e,Rn,qr);break;case 4:if(Fo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Cr(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fF(r/1960))-r,10<r){e.timeoutHandle=mh(gs.bind(null,e,Rn,qr),r);break}gs(e,Rn,qr);break;case 5:gs(e,Rn,qr);break;default:throw Error(Q(329))}}}return _n(e,Nt()),e.callbackNode===n?eS.bind(null,e):null}function jh(e,t){var n=Wa;return e.current.memoizedState.isDehydrated&&(ks(e,t).flags|=256),e=Pu(e,t),e!==2&&(t=Rn,Rn=n,t!==null&&_h(t)),e}function _h(e){Rn===null?Rn=e:Rn.push.apply(Rn,e)}function hF(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Ar(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fo(e,t){for(t&=~hm,t&=~sd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cr(t),r=1<<n;e[n]=-1,t&=~r}}function Nv(e){if(Ue&6)throw Error(Q(327));Si();var t=cu(e,0);if(!(t&1))return _n(e,Nt()),null;var n=Pu(e,t);if(e.tag!==0&&n===2){var r=ah(e);r!==0&&(t=r,n=jh(e,r))}if(n===1)throw n=gl,ks(e,0),Fo(e,t),_n(e,Nt()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gs(e,Rn,qr),_n(e,Nt()),null}function mm(e,t){var n=Ue;Ue|=1;try{return e(t)}finally{Ue=n,Ue===0&&(Hi=Nt()+500,td&&as())}}function _s(e){Bo!==null&&Bo.tag===0&&!(Ue&6)&&Si();var t=Ue;Ue|=1;var n=ar.transition,r=nt;try{if(ar.transition=null,nt=1,e)return e()}finally{nt=r,ar.transition=n,Ue=t,!(Ue&6)&&as()}}function gm(){$n=di.current,ht(di)}function ks(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,UT(n)),It!==null)for(n=It.return;n!==null;){var r=n;switch(Yp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pu();break;case 3:Vi(),ht(In),ht(gn),sm();break;case 5:om(r);break;case 4:Vi();break;case 13:ht(yt);break;case 19:ht(yt);break;case 10:em(r.type._context);break;case 22:case 23:gm()}n=n.return}if(Ht=e,It=e=Go(e.current,null),nn=$n=t,Ot=0,gl=null,hm=sd=js=0,Rn=Wa=null,ws!==null){for(t=0;t<ws.length;t++)if(n=ws[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}ws=null}return e}function tS(e,t){do{var n=It;try{if(Zp(),Hc.current=Su,Cu){for(var r=Ct.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Cu=!1}if(Is=0,Vt=Bt=Ct=null,Ua=!1,hl=0,fm.current=null,n===null||n.return===null){Ot=1,gl=t,It=null;break}e:{var s=e,i=n.return,a=n,l=t;if(t=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=wv(i);if(m!==null){m.flags&=-257,Ev(m,i,a,s,t),m.mode&1&&yv(s,c,t),t=m,l=c;var g=t.updateQueue;if(g===null){var y=new Set;y.add(l),t.updateQueue=y}else g.add(l);break e}else{if(!(t&1)){yv(s,c,t),xm();break e}l=Error(Q(426))}}else if(vt&&a.mode&1){var E=wv(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Ev(E,i,a,s,t),Xp(Ui(l,a));break e}}s=l=Ui(l,a),Ot!==4&&(Ot=2),Wa===null?Wa=[s]:Wa.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=LC(s,l,t);hv(s,w);break e;case 1:a=l;var x=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Wo===null||!Wo.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var C=OC(s,a,t);hv(s,C);break e}}s=s.return}while(s!==null)}oS(n)}catch(b){t=b,It===n&&n!==null&&(It=n=n.return);continue}break}while(!0)}function nS(){var e=bu.current;return bu.current=Su,e===null?Su:e}function xm(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Ht===null||!(js&268435455)&&!(sd&268435455)||Fo(Ht,nn)}function Pu(e,t){var n=Ue;Ue|=2;var r=nS();(Ht!==e||nn!==t)&&(qr=null,ks(e,t));do try{pF();break}catch(o){tS(e,o)}while(!0);if(Zp(),Ue=n,bu.current=r,It!==null)throw Error(Q(261));return Ht=null,nn=0,Ot}function pF(){for(;It!==null;)rS(It)}function mF(){for(;It!==null&&!$4();)rS(It)}function rS(e){var t=iS(e.alternate,e,$n);e.memoizedProps=e.pendingProps,t===null?oS(e):It=t,fm.current=null}function oS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lF(n,t),n!==null){n.flags&=32767,It=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,It=null;return}}else if(n=aF(n,t,$n),n!==null){It=n;return}if(t=t.sibling,t!==null){It=t;return}It=t=e}while(t!==null);Ot===0&&(Ot=5)}function gs(e,t,n){var r=nt,o=ar.transition;try{ar.transition=null,nt=1,gF(e,t,n,r)}finally{ar.transition=o,nt=r}return null}function gF(e,t,n,r){do Si();while(Bo!==null);if(Ue&6)throw Error(Q(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Y4(e,s),e===Ht&&(It=Ht=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xc||(xc=!0,aS(lu,function(){return Si(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ar.transition,ar.transition=null;var i=nt;nt=1;var a=Ue;Ue|=4,fm.current=null,uF(e,n),QC(n,e),_T(hh),uu=!!fh,hh=fh=null,e.current=n,dF(n),z4(),Ue=a,nt=i,ar.transition=s}else e.current=n;if(xc&&(xc=!1,Bo=e,Au=o),s=e.pendingLanes,s===0&&(Wo=null),H4(n.stateNode),_n(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Du)throw Du=!1,e=Nh,Nh=null,e;return Au&1&&e.tag!==0&&Si(),s=e.pendingLanes,s&1?e===Ih?Ja++:(Ja=0,Ih=e):Ja=0,as(),null}function Si(){if(Bo!==null){var e=LE(Au),t=ar.transition,n=nt;try{if(ar.transition=null,nt=16>e?16:e,Bo===null)var r=!1;else{if(e=Bo,Bo=null,Au=0,Ue&6)throw Error(Q(331));var o=Ue;for(Ue|=4,ue=e.current;ue!==null;){var s=ue,i=s.child;if(ue.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ue=c;ue!==null;){var u=ue;switch(u.tag){case 0:case 11:case 15:Ha(8,u,s)}var f=u.child;if(f!==null)f.return=u,ue=f;else for(;ue!==null;){u=ue;var d=u.sibling,m=u.return;if(qC(u),u===c){ue=null;break}if(d!==null){d.return=m,ue=d;break}ue=m}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}ue=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,ue=i;else e:for(;ue!==null;){if(s=ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ha(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ue=w;break e}ue=s.return}}var x=e.current;for(ue=x;ue!==null;){i=ue;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,ue=v;else e:for(i=x;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:od(9,a)}}catch(b){Pt(a,a.return,b)}if(a===i){ue=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ue=C;break e}ue=a.return}}if(Ue=o,as(),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(Yu,e)}catch{}r=!0}return r}finally{nt=n,ar.transition=t}}return!1}function Iv(e,t,n){t=Ui(n,t),t=LC(e,t,1),e=Ho(e,t,1),t=En(),e!==null&&(Nl(e,1,t),_n(e,t))}function Pt(e,t,n){if(e.tag===3)Iv(e,e,n);else for(;t!==null;){if(t.tag===3){Iv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wo===null||!Wo.has(r))){e=Ui(n,e),e=OC(t,e,1),t=Ho(t,e,1),e=En(),t!==null&&(Nl(t,1,e),_n(t,e));break}}t=t.return}}function xF(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=En(),e.pingedLanes|=e.suspendedLanes&n,Ht===e&&(nn&n)===n&&(Ot===4||Ot===3&&(nn&130023424)===nn&&500>Nt()-pm?ks(e,0):hm|=n),_n(e,t)}function sS(e,t){t===0&&(e.mode&1?(t=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):t=1);var n=En();e=io(e,t),e!==null&&(Nl(e,t,n),_n(e,n))}function vF(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sS(e,n)}function yF(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),sS(e,n)}var iS;iS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||In.current)Nn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nn=!1,iF(e,t,n);Nn=!!(e.flags&131072)}else Nn=!1,vt&&t.flags&1048576&&uC(t,xu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jc(e,t),e=t.pendingProps;var o=Oi(t,gn.current);Ci(t,n),o=am(null,t,r,e,o,n);var s=lm();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jn(r)?(s=!0,mu(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,nm(t),o.updater=rd,t.stateNode=o,o._reactInternals=t,Ch(t,r,e,n),t=Dh(null,t,r,!0,s,n)):(t.tag=0,vt&&s&&qp(t),yn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Jc(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=EF(r),e=xr(r,e),o){case 0:t=bh(null,t,r,e,n);break e;case 1:t=bv(null,t,r,e,n);break e;case 11:t=Cv(null,t,r,e,n);break e;case 14:t=Sv(null,t,r,xr(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),bh(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),bv(e,t,r,o,n);case 3:e:{if(UC(t),e===null)throw Error(Q(387));r=t.pendingProps,s=t.memoizedState,o=s.element,gC(e,t),wu(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Ui(Error(Q(423)),t),t=Dv(e,t,r,n,o);break e}else if(r!==o){o=Ui(Error(Q(424)),t),t=Dv(e,t,r,n,o);break e}else for(Un=Uo(t.stateNode.containerInfo.firstChild),Hn=t,vt=!0,Er=null,n=pC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($i(),r===o){t=ao(e,t,n);break e}yn(e,t,r,n)}t=t.child}return t;case 5:return xC(t),e===null&&yh(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,ph(r,o)?i=null:s!==null&&ph(r,s)&&(t.flags|=32),VC(e,t),yn(e,t,i,n),t.child;case 6:return e===null&&yh(t),null;case 13:return HC(e,t,n);case 4:return rm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zi(t,null,r,n):yn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),Cv(e,t,r,o,n);case 7:return yn(e,t,t.pendingProps,n),t.child;case 8:return yn(e,t,t.pendingProps.children,n),t.child;case 12:return yn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,lt(vu,r._currentValue),r._currentValue=i,s!==null)if(Ar(s.value,i)){if(s.children===o.children&&!In.current){t=ao(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=to(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),wh(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Q(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),wh(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}yn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ci(t,n),o=cr(o),r=r(o),t.flags|=1,yn(e,t,r,n),t.child;case 14:return r=t.type,o=xr(r,t.pendingProps),o=xr(r.type,o),Sv(e,t,r,o,n);case 15:return $C(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),Jc(e,t),t.tag=1,jn(r)?(e=!0,mu(t)):e=!1,Ci(t,n),BC(t,r,o),Ch(t,r,o,n),Dh(null,t,r,!0,e,n);case 19:return WC(e,t,n);case 22:return zC(e,t,n)}throw Error(Q(156,t.tag))};function aS(e,t){return IE(e,t)}function wF(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,n,r){return new wF(e,t,n,r)}function vm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function EF(e){if(typeof e=="function")return vm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bp)return 11;if(e===Lp)return 14}return 2}function Go(e,t){var n=e.alternate;return n===null?(n=ir(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qc(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")vm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ti:return Ts(n.children,o,s,t);case _p:i=8,o|=8;break;case J0:return e=ir(12,n,t,o|2),e.elementType=J0,e.lanes=s,e;case G0:return e=ir(13,n,t,o),e.elementType=G0,e.lanes=s,e;case K0:return e=ir(19,n,t,o),e.elementType=K0,e.lanes=s,e;case xE:return id(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mE:i=10;break e;case gE:i=9;break e;case Bp:i=11;break e;case Lp:i=14;break e;case Ao:i=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=ir(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Ts(e,t,n,r){return e=ir(7,e,r,t),e.lanes=n,e}function id(e,t,n,r){return e=ir(22,e,r,t),e.elementType=xE,e.lanes=n,e.stateNode={isHidden:!1},e}function yf(e,t,n){return e=ir(6,e,null,t),e.lanes=n,e}function wf(e,t,n){return t=ir(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CF(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zd(0),this.expirationTimes=Zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zd(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ym(e,t,n,r,o,s,i,a,l){return e=new CF(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ir(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nm(s),e}function SF(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lS(e){if(!e)return Zo;e=e._reactInternals;e:{if(zs(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(jn(n))return lC(e,n,t)}return t}function cS(e,t,n,r,o,s,i,a,l){return e=ym(n,r,!0,e,o,s,i,a,l),e.context=lS(null),n=e.current,r=En(),o=Jo(n),s=to(r,o),s.callback=t??null,Ho(n,s,o),e.current.lanes=o,Nl(e,o,r),_n(e,r),e}function ad(e,t,n,r){var o=t.current,s=En(),i=Jo(o);return n=lS(n),t.context===null?t.context=n:t.pendingContext=n,t=to(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ho(o,t,i),e!==null&&(Sr(e,o,i,s),Uc(e,o,i)),i}function ku(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wm(e,t){jv(e,t),(e=e.alternate)&&jv(e,t)}function bF(){return null}var uS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Em(e){this._internalRoot=e}ld.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));ad(e,t,null,null)};ld.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_s(function(){ad(null,e,null,null)}),t[so]=null}};function ld(e){this._internalRoot=e}ld.prototype.unstable_scheduleHydration=function(e){if(e){var t=zE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<To.length&&t!==0&&t<To[n].priority;n++);To.splice(n,0,e),n===0&&UE(e)}};function Cm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _v(){}function DF(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=ku(i);s.call(c)}}var i=cS(t,r,e,0,null,!1,!1,"",_v);return e._reactRootContainer=i,e[so]=i.current,ll(e.nodeType===8?e.parentNode:e),_s(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=ku(l);a.call(c)}}var l=ym(e,0,!1,null,null,!1,!1,"",_v);return e._reactRootContainer=l,e[so]=l.current,ll(e.nodeType===8?e.parentNode:e),_s(function(){ad(t,l,n,r)}),l}function ud(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=ku(i);a.call(l)}}ad(t,i,e,o)}else i=DF(n,t,e,o,r);return ku(i)}OE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ra(t.pendingLanes);n!==0&&(zp(t,n|1),_n(t,Nt()),!(Ue&6)&&(Hi=Nt()+500,as()))}break;case 13:_s(function(){var r=io(e,1);if(r!==null){var o=En();Sr(r,e,1,o)}}),wm(e,1)}};Vp=function(e){if(e.tag===13){var t=io(e,134217728);if(t!==null){var n=En();Sr(t,e,134217728,n)}wm(e,134217728)}};$E=function(e){if(e.tag===13){var t=Jo(e),n=io(e,t);if(n!==null){var r=En();Sr(n,e,t,r)}wm(e,t)}};zE=function(){return nt};VE=function(e,t){var n=nt;try{return nt=e,t()}finally{nt=n}};oh=function(e,t,n){switch(t){case"input":if(X0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ed(r);if(!o)throw Error(Q(90));yE(r),X0(r,o)}}}break;case"textarea":EE(e,n);break;case"select":t=n.value,t!=null&&vi(e,!!n.multiple,t,!1)}};kE=mm;TE=_s;var AF={usingClientEntryPoint:!1,Events:[jl,si,ed,AE,PE,mm]},Ea={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PF={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ho.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ME(e),e===null?null:e.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||bF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{Yu=vc.inject(PF),Br=vc}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AF;Kn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cm(t))throw Error(Q(200));return SF(e,t,null,n)};Kn.createRoot=function(e,t){if(!Cm(e))throw Error(Q(299));var n=!1,r="",o=uS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=ym(e,1,!1,null,null,n,!1,r,o),e[so]=t.current,ll(e.nodeType===8?e.parentNode:e),new Em(t)};Kn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=ME(t),e=e===null?null:e.stateNode,e};Kn.flushSync=function(e){return _s(e)};Kn.hydrate=function(e,t,n){if(!cd(t))throw Error(Q(200));return ud(null,e,t,!0,n)};Kn.hydrateRoot=function(e,t,n){if(!Cm(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=uS;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=cS(t,null,e,1,n??null,o,!1,s,i),e[so]=t.current,ll(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ld(t)};Kn.render=function(e,t,n){if(!cd(t))throw Error(Q(200));return ud(null,e,t,!1,n)};Kn.unmountComponentAtNode=function(e){if(!cd(e))throw Error(Q(40));return e._reactRootContainer?(_s(function(){ud(null,null,e,!1,function(){e._reactRootContainer=null,e[so]=null})}),!0):!1};Kn.unstable_batchedUpdates=mm;Kn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!cd(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return ud(e,t,n,!1,r)};Kn.version="18.3.1-next-f1338f8080-20240426";function dS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dS)}catch(e){console.error(e)}}dS(),dE.exports=Kn;var Bl=dE.exports;const kF=Qw(Bl);var fS,Bv=Bl;fS=Bv.createRoot,Bv.hydrateRoot;function TF(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,o,s,i=[],a="",l=e.split("/");for(l[0]||l.shift();o=l.shift();)n=o[0],n==="*"?(i.push(n),a+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),s=o.indexOf(".",1),i.push(o.substring(1,~r?r:~s?s:o.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+o.substring(s))):a+="/"+o;return{keys:i,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}var hS={exports:{}},pS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wi=p;function FF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var RF=typeof Object.is=="function"?Object.is:FF,MF=Wi.useState,NF=Wi.useEffect,IF=Wi.useLayoutEffect,jF=Wi.useDebugValue;function _F(e,t){var n=t(),r=MF({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return IF(function(){o.value=n,o.getSnapshot=t,Ef(o)&&s({inst:o})},[e,n,t]),NF(function(){return Ef(o)&&s({inst:o}),e(function(){Ef(o)&&s({inst:o})})},[e]),jF(n),n}function Ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!RF(e,n)}catch{return!0}}function BF(e,t){return t()}var LF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BF:_F;pS.useSyncExternalStore=Wi.useSyncExternalStore!==void 0?Wi.useSyncExternalStore:LF;hS.exports=pS;var OF=hS.exports;const $F=cE.useInsertionEffect,zF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VF=zF?p.useLayoutEffect:p.useEffect,UF=$F||VF,mS=e=>{const t=p.useRef([e,(...n)=>t[0](...n)]).current;return UF(()=>{t[0]=e}),t[1]},HF="popstate",Sm="pushState",bm="replaceState",WF="hashchange",Lv=[HF,Sm,bm,WF],JF=e=>{for(const t of Lv)addEventListener(t,e);return()=>{for(const t of Lv)removeEventListener(t,e)}},gS=(e,t)=>OF.useSyncExternalStore(JF,e,t),GF=()=>location.search,KF=({ssrSearch:e=""}={})=>gS(GF,()=>e),Ov=()=>location.pathname,qF=({ssrPath:e}={})=>gS(Ov,e?()=>e:Ov),YF=(e,{replace:t=!1,state:n=null}={})=>history[t?bm:Sm](n,"",e),XF=(e={})=>[qF(e),YF],$v=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[$v]>"u"){for(const e of[Sm,bm]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,$v,{value:!0})}const QF=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",xS=(e="")=>e==="/"?"":e,ZF=(e,t)=>e[0]==="~"?e.slice(1):xS(t)+e,eR=(e="",t)=>QF(zv(xS(e)),zv(t)),zv=e=>{try{return decodeURI(e)}catch{return e}},vS={hook:XF,searchHook:KF,parser:TF,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},yS=p.createContext(vS),Ll=()=>p.useContext(yS),wS={},ES=p.createContext(wS),tR=()=>p.useContext(ES),dd=e=>{const[t,n]=e.hook(e);return[eR(e.base,t),mS((r,o)=>n(ZF(r,e.base),o))]},Dm=()=>dd(Ll()),CS=(e,t,n,r)=>{const{pattern:o,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),i=o.exec(n)||[],[a,...l]=i;return a!==void 0?[!0,(()=>{const c=s!==!1?Object.fromEntries(s.map((f,d)=>[f,l[d]])):i.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},SS=({children:e,...t})=>{var u,f;const n=Ll(),r=t.hook?vS:n;let o=r;const[s,i]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=s),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let a=p.useRef({}),l=a.current,c=l;for(let d in r){const m=d==="base"?r[d]+(t[d]||""):t[d]||r[d];l===c&&m!==c[d]&&(a.current=c={...c}),c[d]=m,m!==r[d]&&(o=c)}return p.createElement(yS.Provider,{value:o,children:e})},Vv=({children:e,component:t},n)=>t?p.createElement(t,{params:n}):typeof e=="function"?e(n):e,nR=e=>{let t=p.useRef(wS),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},qs=({path:e,nest:t,match:n,...r})=>{const o=Ll(),[s]=dd(o),[i,a,l]=n??CS(o.parser,e,s,t),c=nR({...tR(),...a});if(!i)return null;const u=l?p.createElement(SS,{base:l},Vv(r,c)):Vv(r,c);return p.createElement(ES.Provider,{value:c,children:u})},rR=p.forwardRef((e,t)=>{const n=Ll(),[r,o]=dd(n),{to:s="",href:i=s,onClick:a,asChild:l,children:c,className:u,replace:f,state:d,...m}=e,g=mS(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(a==null||a(E),E.defaultPrevented||(E.preventDefault(),o(i,e)))}),y=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return l&&p.isValidElement(c)?p.cloneElement(c,{onClick:g,href:y}):p.createElement("a",{...m,onClick:g,href:y,className:u!=null&&u.call?u(r===i):u,children:c,ref:t})}),bS=e=>Array.isArray(e)?e.flatMap(t=>bS(t&&t.type===p.Fragment?t.props.children:t)):[e],oR=({children:e,location:t})=>{const n=Ll(),[r]=dd(n);for(const o of bS(e)){let s=0;if(p.isValidElement(o)&&(s=CS(n.parser,o.props.path,t||r,o.props.nest))[0])return p.cloneElement(o,{match:s})}return null};var fd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hd=typeof window>"u"||"Deno"in globalThis;function vr(){}function sR(e,t){return typeof e=="function"?e(t):e}function iR(e){return typeof e=="number"&&e>=0&&e!==1/0}function aR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Uv(e,t){return typeof e=="function"?e(t):e}function lR(e,t){return typeof e=="function"?e(t):e}function Hv(e,t){const{type:n="all",exact:r,fetchStatus:o,predicate:s,queryKey:i,stale:a}=e;if(i){if(r){if(t.queryHash!==Am(i,t.options))return!1}else if(!vl(t.queryKey,i))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||o&&o!==t.state.fetchStatus||s&&!s(t))}function Wv(e,t){const{exact:n,status:r,predicate:o,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(xl(t.options.mutationKey)!==xl(s))return!1}else if(!vl(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||o&&!o(t))}function Am(e,t){return((t==null?void 0:t.queryKeyHashFn)||xl)(e)}function xl(e){return JSON.stringify(e,(t,n)=>Bh(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function vl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!vl(e[n],t[n])):!1}function DS(e,t){if(e===t)return e;const n=Jv(e)&&Jv(t);if(n||Bh(e)&&Bh(t)){const r=n?e:Object.keys(e),o=r.length,s=n?t:Object.keys(t),i=s.length,a=n?[]:{};let l=0;for(let c=0;c<i;c++){const u=n?c:s[c];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(a[u]=void 0,l++):(a[u]=DS(e[u],t[u]),a[u]===e[u]&&e[u]!==void 0&&l++)}return o===i&&l===o?e:a}return t}function Jv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Bh(e){if(!Gv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Gv(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Gv(e){return Object.prototype.toString.call(e)==="[object Object]"}function cR(e){return new Promise(t=>{setTimeout(t,e)})}function uR(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?DS(e,t):t}function dR(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function fR(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Pm=Symbol();function AS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Pm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var bs,Ro,Ti,Hw,hR=(Hw=class extends fd{constructor(){super();Qe(this,bs);Qe(this,Ro);Qe(this,Ti);Ie(this,Ti,t=>{if(!hd&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,Ro)||this.setEventListener(K(this,Ti))}onUnsubscribe(){var t;this.hasListeners()||((t=K(this,Ro))==null||t.call(this),Ie(this,Ro,void 0))}setEventListener(t){var n;Ie(this,Ti,t),(n=K(this,Ro))==null||n.call(this),Ie(this,Ro,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){K(this,bs)!==t&&(Ie(this,bs,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof K(this,bs)=="boolean"?K(this,bs):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},bs=new WeakMap,Ro=new WeakMap,Ti=new WeakMap,Hw),PS=new hR,Fi,Mo,Ri,Ww,pR=(Ww=class extends fd{constructor(){super();Qe(this,Fi,!0);Qe(this,Mo);Qe(this,Ri);Ie(this,Ri,t=>{if(!hd&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,Mo)||this.setEventListener(K(this,Ri))}onUnsubscribe(){var t;this.hasListeners()||((t=K(this,Mo))==null||t.call(this),Ie(this,Mo,void 0))}setEventListener(t){var n;Ie(this,Ri,t),(n=K(this,Mo))==null||n.call(this),Ie(this,Mo,t(this.setOnline.bind(this)))}setOnline(t){K(this,Fi)!==t&&(Ie(this,Fi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return K(this,Fi)}},Fi=new WeakMap,Mo=new WeakMap,Ri=new WeakMap,Ww),Tu=new pR;function mR(){let e,t;const n=new Promise((o,s)=>{e=o,t=s});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),e(o)},n.reject=o=>{r({status:"rejected",reason:o}),t(o)},n}function gR(e){return Math.min(1e3*2**e,3e4)}function kS(e){return(e??"online")==="online"?Tu.isOnline():!0}var TS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Cf(e){return e instanceof TS}function FS(e){let t=!1,n=0,r=!1,o;const s=mR(),i=y=>{var E;r||(d(new TS(y)),(E=e.abort)==null||E.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>PS.isFocused()&&(e.networkMode==="always"||Tu.isOnline())&&e.canRun(),u=()=>kS(e.networkMode)&&e.canRun(),f=y=>{var E;r||(r=!0,(E=e.onSuccess)==null||E.call(e,y),o==null||o(),s.resolve(y))},d=y=>{var E;r||(r=!0,(E=e.onError)==null||E.call(e,y),o==null||o(),s.reject(y))},m=()=>new Promise(y=>{var E;o=w=>{(r||c())&&y(w)},(E=e.onPause)==null||E.call(e)}).then(()=>{var y;o=void 0,r||(y=e.onContinue)==null||y.call(e)}),g=()=>{if(r)return;let y;const E=n===0?e.initialPromise:void 0;try{y=E??e.fn()}catch(w){y=Promise.reject(w)}Promise.resolve(y).then(f).catch(w=>{var D;if(r)return;const x=e.retry??(hd?0:3),v=e.retryDelay??gR,C=typeof v=="function"?v(n,w):v,b=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,w);if(t||!b){d(w);return}n++,(D=e.onFail)==null||D.call(e,n,w),cR(C).then(()=>c()?void 0:m()).then(()=>{t?d(w):g()})})};return{promise:s,cancel:i,continue:()=>(o==null||o(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?g():m().then(g),s)}}function xR(){let e=[],t=0,n=a=>{a()},r=a=>{a()},o=a=>setTimeout(a,0);const s=a=>{t?e.push(a):o(()=>{n(a)})},i=()=>{const a=e;e=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||i()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var wn=xR(),Ds,Jw,RS=(Jw=class{constructor(){Qe(this,Ds)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),iR(this.gcTime)&&Ie(this,Ds,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hd?1/0:5*60*1e3))}clearGcTimeout(){K(this,Ds)&&(clearTimeout(K(this,Ds)),Ie(this,Ds,void 0))}},Ds=new WeakMap,Jw),Mi,Ni,nr,dn,Fl,As,yr,Kr,Gw,vR=(Gw=class extends RS{constructor(t){super();Qe(this,yr);Qe(this,Mi);Qe(this,Ni);Qe(this,nr);Qe(this,dn);Qe(this,Fl);Qe(this,As);Ie(this,As,!1),Ie(this,Fl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ie(this,nr,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ie(this,Mi,wR(this.options)),this.state=t.state??K(this,Mi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=K(this,dn))==null?void 0:t.promise}setOptions(t){this.options={...K(this,Fl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,nr).remove(this)}setData(t,n){const r=uR(this.state.data,t,this.options);return ln(this,yr,Kr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ln(this,yr,Kr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,o;const n=(r=K(this,dn))==null?void 0:r.promise;return(o=K(this,dn))==null||o.cancel(t),n?n.then(vr).catch(vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,Mi))}isActive(){return this.observers.some(t=>lR(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!aR(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=K(this,dn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=K(this,dn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),K(this,nr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(K(this,dn)&&(K(this,As)?K(this,dn).cancel({revert:!0}):K(this,dn).cancelRetry()),this.scheduleGc()),K(this,nr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ln(this,yr,Kr).call(this,{type:"invalidate"})}fetch(t,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(K(this,dn))return K(this,dn).continueRetry(),K(this,dn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,o=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Ie(this,As,!0),r.signal)})},s=()=>{const f=AS(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return o(d),Ie(this,As,!1),this.options.persister?this.options.persister(f,d,this):f(d)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};o(i),(l=this.options.behavior)==null||l.onFetch(i,this),Ie(this,Ni,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=i.fetchOptions)==null?void 0:c.meta))&&ln(this,yr,Kr).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const a=f=>{var d,m,g,y;Cf(f)&&f.silent||ln(this,yr,Kr).call(this,{type:"error",error:f}),Cf(f)||((m=(d=K(this,nr).config).onError)==null||m.call(d,f,this),(y=(g=K(this,nr).config).onSettled)==null||y.call(g,this.state.data,f,this)),this.scheduleGc()};return Ie(this,dn,FS({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,m,g,y;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(E){a(E);return}(m=(d=K(this,nr).config).onSuccess)==null||m.call(d,f,this),(y=(g=K(this,nr).config).onSettled)==null||y.call(g,f,this.state.error,this),this.scheduleGc()},onError:a,onFail:(f,d)=>{ln(this,yr,Kr).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{ln(this,yr,Kr).call(this,{type:"pause"})},onContinue:()=>{ln(this,yr,Kr).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),K(this,dn).start()}},Mi=new WeakMap,Ni=new WeakMap,nr=new WeakMap,dn=new WeakMap,Fl=new WeakMap,As=new WeakMap,yr=new WeakSet,Kr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...yR(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return Cf(o)&&o.revert&&K(this,Ni)?{...K(this,Ni),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),wn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),K(this,nr).notify({query:this,type:"updated",action:t})})},Gw);function yR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wR(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Mr,Kw,ER=(Kw=class extends fd{constructor(t={}){super();Qe(this,Mr);this.config=t,Ie(this,Mr,new Map)}build(t,n,r){const o=n.queryKey,s=n.queryHash??Am(o,n);let i=this.get(s);return i||(i=new vR({cache:this,queryKey:o,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(o)}),this.add(i)),i}add(t){K(this,Mr).has(t.queryHash)||(K(this,Mr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=K(this,Mr).get(t.queryHash);n&&(t.destroy(),n===t&&K(this,Mr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return K(this,Mr).get(t)}getAll(){return[...K(this,Mr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Hv(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Hv(t,r)):n}notify(t){wn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){wn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Mr=new WeakMap,Kw),Nr,vn,Ps,Ir,wo,qw,CR=(qw=class extends RS{constructor(t){super();Qe(this,Ir);Qe(this,Nr);Qe(this,vn);Qe(this,Ps);this.mutationId=t.mutationId,Ie(this,vn,t.mutationCache),Ie(this,Nr,[]),this.state=t.state||SR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){K(this,Nr).includes(t)||(K(this,Nr).push(t),this.clearGcTimeout(),K(this,vn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ie(this,Nr,K(this,Nr).filter(n=>n!==t)),this.scheduleGc(),K(this,vn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){K(this,Nr).length||(this.state.status==="pending"?this.scheduleGc():K(this,vn).remove(this))}continue(){var t;return((t=K(this,Ps))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,s,i,a,l,c,u,f,d,m,g,y,E,w,x,v,C,b,D,A;Ie(this,Ps,FS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,F)=>{ln(this,Ir,wo).call(this,{type:"failed",failureCount:P,error:F})},onPause:()=>{ln(this,Ir,wo).call(this,{type:"pause"})},onContinue:()=>{ln(this,Ir,wo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,vn).canRun(this)}));const n=this.state.status==="pending",r=!K(this,Ps).canStart();try{if(!n){ln(this,Ir,wo).call(this,{type:"pending",variables:t,isPaused:r}),await((s=(o=K(this,vn).config).onMutate)==null?void 0:s.call(o,t,this));const F=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,t));F!==this.state.context&&ln(this,Ir,wo).call(this,{type:"pending",context:F,variables:t,isPaused:r})}const P=await K(this,Ps).start();return await((c=(l=K(this,vn).config).onSuccess)==null?void 0:c.call(l,P,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,P,t,this.state.context)),await((m=(d=K(this,vn).config).onSettled)==null?void 0:m.call(d,P,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,P,null,t,this.state.context)),ln(this,Ir,wo).call(this,{type:"success",data:P}),P}catch(P){try{throw await((w=(E=K(this,vn).config).onError)==null?void 0:w.call(E,P,t,this.state.context,this)),await((v=(x=this.options).onError)==null?void 0:v.call(x,P,t,this.state.context)),await((b=(C=K(this,vn).config).onSettled)==null?void 0:b.call(C,void 0,P,this.state.variables,this.state.context,this)),await((A=(D=this.options).onSettled)==null?void 0:A.call(D,void 0,P,t,this.state.context)),P}finally{ln(this,Ir,wo).call(this,{type:"error",error:P})}}finally{K(this,vn).runNext(this)}}},Nr=new WeakMap,vn=new WeakMap,Ps=new WeakMap,Ir=new WeakSet,wo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wn.batch(()=>{K(this,Nr).forEach(r=>{r.onMutationUpdate(t)}),K(this,vn).notify({mutation:this,type:"updated",action:t})})},qw);function SR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var On,Rl,Yw,bR=(Yw=class extends fd{constructor(t={}){super();Qe(this,On);Qe(this,Rl);this.config=t,Ie(this,On,new Map),Ie(this,Rl,Date.now())}build(t,n,r){const o=new CR({mutationCache:this,mutationId:++tc(this,Rl)._,options:t.defaultMutationOptions(n),state:r});return this.add(o),o}add(t){const n=yc(t),r=K(this,On).get(n)??[];r.push(t),K(this,On).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=yc(t);if(K(this,On).has(n)){const o=(r=K(this,On).get(n))==null?void 0:r.filter(s=>s!==t);o&&(o.length===0?K(this,On).delete(n):K(this,On).set(n,o))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=K(this,On).get(yc(t)))==null?void 0:r.find(o=>o.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=K(this,On).get(yc(t)))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){wn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...K(this,On).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Wv(n,r))}findAll(t={}){return this.getAll().filter(n=>Wv(t,n))}notify(t){wn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return wn.batch(()=>Promise.all(t.map(n=>n.continue().catch(vr))))}},On=new WeakMap,Rl=new WeakMap,Yw);function yc(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Kv(e){return{onFetch:(t,n)=>{var u,f,d,m,g;const r=t.options,o=(d=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:d.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],i=((g=t.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const E=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},w=AS(t.options,t.fetchOptions),x=async(v,C,b)=>{if(y)return Promise.reject();if(C==null&&v.pages.length)return Promise.resolve(v);const D={queryKey:t.queryKey,pageParam:C,direction:b?"backward":"forward",meta:t.options.meta};E(D);const A=await w(D),{maxPages:P}=t.options,F=b?fR:dR;return{pages:F(v.pages,A,P),pageParams:F(v.pageParams,C,P)}};if(o&&s.length){const v=o==="backward",C=v?DR:qv,b={pages:s,pageParams:i},D=C(r,b);a=await x(b,D,v)}else{const v=e??s.length;do{const C=l===0?i[0]??r.initialPageParam:qv(r,a);if(l>0&&C==null)break;a=await x(a,C),l++}while(l<v)}return a};t.options.persister?t.fetchFn=()=>{var y,E;return(E=(y=t.options).persister)==null?void 0:E.call(y,c,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function qv(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function DR(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Dt,No,Io,Ii,ji,jo,_i,Bi,Xw,AR=(Xw=class{constructor(e={}){Qe(this,Dt);Qe(this,No);Qe(this,Io);Qe(this,Ii);Qe(this,ji);Qe(this,jo);Qe(this,_i);Qe(this,Bi);Ie(this,Dt,e.queryCache||new ER),Ie(this,No,e.mutationCache||new bR),Ie(this,Io,e.defaultOptions||{}),Ie(this,Ii,new Map),Ie(this,ji,new Map),Ie(this,jo,0)}mount(){tc(this,jo)._++,K(this,jo)===1&&(Ie(this,_i,PS.subscribe(async e=>{e&&(await this.resumePausedMutations(),K(this,Dt).onFocus())})),Ie(this,Bi,Tu.subscribe(async e=>{e&&(await this.resumePausedMutations(),K(this,Dt).onOnline())})))}unmount(){var e,t;tc(this,jo)._--,K(this,jo)===0&&((e=K(this,_i))==null||e.call(this),Ie(this,_i,void 0),(t=K(this,Bi))==null||t.call(this),Ie(this,Bi,void 0))}isFetching(e){return K(this,Dt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return K(this,No).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=K(this,Dt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=K(this,Dt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Uv(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return K(this,Dt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=K(this,Dt).get(r.queryHash),s=o==null?void 0:o.state.data,i=sR(t,s);if(i!==void 0)return K(this,Dt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return wn.batch(()=>K(this,Dt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=K(this,Dt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=K(this,Dt);wn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=K(this,Dt),r={type:"active",...e};return wn.batch(()=>(n.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=wn.batch(()=>K(this,Dt).findAll(e).map(o=>o.cancel(n)));return Promise.all(r).then(vr).catch(vr)}invalidateQueries(e={},t={}){return wn.batch(()=>{if(K(this,Dt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=wn.batch(()=>K(this,Dt).findAll(e).filter(o=>!o.isDisabled()).map(o=>{let s=o.fetch(void 0,n);return n.throwOnError||(s=s.catch(vr)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(vr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=K(this,Dt).build(this,t);return n.isStaleByTime(Uv(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vr).catch(vr)}fetchInfiniteQuery(e){return e.behavior=Kv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vr).catch(vr)}ensureInfiniteQueryData(e){return e.behavior=Kv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Tu.isOnline()?K(this,No).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,Dt)}getMutationCache(){return K(this,No)}getDefaultOptions(){return K(this,Io)}setDefaultOptions(e){Ie(this,Io,e)}setQueryDefaults(e,t){K(this,Ii).set(xl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...K(this,Ii).values()];let n={};return t.forEach(r=>{vl(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){K(this,ji).set(xl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...K(this,ji).values()];let n={};return t.forEach(r=>{vl(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...K(this,Io).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Am(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Pm&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...K(this,Io).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){K(this,Dt).clear(),K(this,No).clear()}},Dt=new WeakMap,No=new WeakMap,Io=new WeakMap,Ii=new WeakMap,ji=new WeakMap,jo=new WeakMap,_i=new WeakMap,Bi=new WeakMap,Xw),PR=p.createContext(void 0),kR=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),h.jsx(PR.Provider,{value:e,children:t}));async function TR(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}const FR=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await TR(n),await n.json())},RR=new AR({defaultOptions:{queries:{queryFn:FR({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),MR=1,NR=1e6;let Sf=0;function IR(){return Sf=(Sf+1)%Number.MAX_SAFE_INTEGER,Sf.toString()}const bf=new Map,Yv=e=>{if(bf.has(e))return;const t=setTimeout(()=>{bf.delete(e),Ga({type:"REMOVE_TOAST",toastId:e})},NR);bf.set(e,t)},jR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,MR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Yv(n):e.toasts.forEach(r=>{Yv(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Yc=[];let Xc={toasts:[]};function Ga(e){Xc=jR(Xc,e),Yc.forEach(t=>{t(Xc)})}function _R({...e}){const t=IR(),n=o=>Ga({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Ga({type:"DISMISS_TOAST",toastId:t});return Ga({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function Ol(){const[e,t]=p.useState(Xc);return p.useEffect(()=>(Yc.push(t),()=>{const n=Yc.indexOf(t);n>-1&&Yc.splice(n,1)}),[e]),{...e,toast:_R,dismiss:n=>Ga({type:"DISMISS_TOAST",toastId:n})}}function se(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Xv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pd(...e){return t=>{let n=!1;const r=e.map(o=>{const s=Xv(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():Xv(e[o],null)}}}}function Le(...e){return p.useCallback(pd(...e),e)}function BR(e,t){const n=p.createContext(t),r=s=>{const{children:i,...a}=s,l=p.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function o(s){const i=p.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,o]}function bn(e,t=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];const c=f=>{var w;const{scope:d,children:m,...g}=f,y=((w=d==null?void 0:d[e])==null?void 0:w[l])||a,E=p.useMemo(()=>g,Object.values(g));return h.jsx(y.Provider,{value:E,children:m})};c.displayName=s+"Provider";function u(f,d){var y;const m=((y=d==null?void 0:d[e])==null?void 0:y[l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[e])||s;return p.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,LR(o,...t)]}function LR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Ji(e){const t=$R(e),n=p.forwardRef((r,o)=>{const{children:s,...i}=r,a=p.Children.toArray(s),l=a.find(zR);if(l){const c=l.props.children,u=a.map(f=>f===l?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:p.isValidElement(c)?p.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var OR=Ji("Slot");function $R(e){const t=p.forwardRef((n,r)=>{const{children:o,...s}=n;if(p.isValidElement(o)){const i=UR(o),a=VR(s,o.props);return o.type!==p.Fragment&&(a.ref=r?pd(r,i):i),p.cloneElement(o,a)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var MS=Symbol("radix.slottable");function NS(e){const t=({children:n})=>h.jsx(h.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=MS,t}function zR(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===MS}function VR(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function UR(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function md(e){const t=e+"CollectionProvider",[n,r]=bn(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:E,children:w}=y,x=xt.useRef(null),v=xt.useRef(new Map).current;return h.jsx(o,{scope:E,itemMap:v,collectionRef:x,children:w})};i.displayName=t;const a=e+"CollectionSlot",l=Ji(a),c=xt.forwardRef((y,E)=>{const{scope:w,children:x}=y,v=s(a,w),C=Le(E,v.collectionRef);return h.jsx(l,{ref:C,children:x})});c.displayName=a;const u=e+"CollectionItemSlot",f="data-radix-collection-item",d=Ji(u),m=xt.forwardRef((y,E)=>{const{scope:w,children:x,...v}=y,C=xt.useRef(null),b=Le(E,C),D=s(u,w);return xt.useEffect(()=>(D.itemMap.set(C,{ref:C,...v}),()=>void D.itemMap.delete(C))),h.jsx(d,{[f]:"",ref:b,children:x})});m.displayName=u;function g(y){const E=s(e+"CollectionConsumer",y);return xt.useCallback(()=>{const x=E.collectionRef.current;if(!x)return[];const v=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(E.itemMap.values()).sort((D,A)=>v.indexOf(D.ref.current)-v.indexOf(A.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:i,Slot:c,ItemSlot:m},g,r]}var HR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],De=HR.reduce((e,t)=>{const n=Ji(`Primitive.${t}`),r=p.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function km(e,t){e&&Bl.flushSync(()=>e.dispatchEvent(t))}function kt(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function WR(e,t=globalThis==null?void 0:globalThis.document){const n=kt(e);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var JR="DismissableLayer",Lh="dismissableLayer.update",GR="dismissableLayer.pointerDownOutside",KR="dismissableLayer.focusOutside",Qv,IS=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$l=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=e,c=p.useContext(IS),[u,f]=p.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=Le(t,A=>f(A)),y=Array.from(c.layers),[E]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(E),x=u?y.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,C=x>=w,b=YR(A=>{const P=A.target,F=[...c.branches].some(k=>k.contains(P));!C||F||(o==null||o(A),i==null||i(A),A.defaultPrevented||a==null||a())},d),D=XR(A=>{const P=A.target;[...c.branches].some(k=>k.contains(P))||(s==null||s(A),i==null||i(A),A.defaultPrevented||a==null||a())},d);return WR(A=>{x===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},d),p.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Qv=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Zv(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=Qv)}},[u,d,n,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Zv())},[u,c]),p.useEffect(()=>{const A=()=>m({});return document.addEventListener(Lh,A),()=>document.removeEventListener(Lh,A)},[]),h.jsx(De.div,{...l,ref:g,style:{pointerEvents:v?C?"auto":"none":void 0,...e.style},onFocusCapture:se(e.onFocusCapture,D.onFocusCapture),onBlurCapture:se(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:se(e.onPointerDownCapture,b.onPointerDownCapture)})});$l.displayName=JR;var qR="DismissableLayerBranch",jS=p.forwardRef((e,t)=>{const n=p.useContext(IS),r=p.useRef(null),o=Le(t,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(De.div,{...e,ref:o})});jS.displayName=qR;function YR(e,t=globalThis==null?void 0:globalThis.document){const n=kt(e),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){_S(GR,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function XR(e,t=globalThis==null?void 0:globalThis.document){const n=kt(e),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&_S(KR,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Zv(){const e=new CustomEvent(Lh);document.dispatchEvent(e)}function _S(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?km(o,s):o.dispatchEvent(s)}var QR=$l,ZR=jS,lo=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},e8="Portal",gd=p.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,s]=p.useState(!1);lo(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?kF.createPortal(h.jsx(De.div,{...r,ref:t}),i):null});gd.displayName=e8;function t8(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var Dn=e=>{const{present:t,children:n}=e,r=n8(t),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=Le(r.ref,r8(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};Dn.displayName="Presence";function n8(e){const[t,n]=p.useState(),r=p.useRef({}),o=p.useRef(e),s=p.useRef("none"),i=e?"mounted":"unmounted",[a,l]=t8(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=wc(r.current);s.current=a==="mounted"?c:"none"},[a]),lo(()=>{const c=r.current,u=o.current;if(u!==e){const d=s.current,m=wc(c);e?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),lo(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,f=m=>{const y=wc(r.current).includes(m.animationName);if(m.target===t&&y&&(l("ANIMATION_END"),!o.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},d=m=>{m.target===t&&(s.current=wc(r.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function wc(e){return(e==null?void 0:e.animationName)||"none"}function r8(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ur({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=o8({defaultProp:t,onChange:n}),s=e!==void 0,i=s?e:r,a=kt(n),l=p.useCallback(c=>{if(s){const f=typeof c=="function"?c(e):c;f!==e&&a(f)}else o(c)},[s,e,o,a]);return[i,l]}function o8({defaultProp:e,onChange:t}){const n=p.useState(e),[r]=n,o=p.useRef(r),s=kt(t);return p.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var s8="VisuallyHidden",xd=p.forwardRef((e,t)=>h.jsx(De.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));xd.displayName=s8;var i8=xd,Tm="ToastProvider",[Fm,a8,l8]=md("Toast"),[BS,$7]=bn("Toast",[l8]),[c8,vd]=BS(Tm),LS=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:i}=e,[a,l]=p.useState(null),[c,u]=p.useState(0),f=p.useRef(!1),d=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Tm}\`. Expected non-empty \`string\`.`),h.jsx(Fm.Provider,{scope:t,children:h.jsx(c8,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:p.useCallback(()=>u(m=>m+1),[]),onToastRemove:p.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:d,children:i})})};LS.displayName=Tm;var OS="ToastViewport",u8=["F8"],Oh="toast.viewportPause",$h="toast.viewportResume",$S=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=u8,label:o="Notifications ({hotkey})",...s}=e,i=vd(OS,n),a=a8(n),l=p.useRef(null),c=p.useRef(null),u=p.useRef(null),f=p.useRef(null),d=Le(t,f,i.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;p.useEffect(()=>{const E=w=>{var v;r.length!==0&&r.every(C=>w[C]||w.code===C)&&((v=f.current)==null||v.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),p.useEffect(()=>{const E=l.current,w=f.current;if(g&&E&&w){const x=()=>{if(!i.isClosePausedRef.current){const D=new CustomEvent(Oh);w.dispatchEvent(D),i.isClosePausedRef.current=!0}},v=()=>{if(i.isClosePausedRef.current){const D=new CustomEvent($h);w.dispatchEvent(D),i.isClosePausedRef.current=!1}},C=D=>{!E.contains(D.relatedTarget)&&v()},b=()=>{E.contains(document.activeElement)||v()};return E.addEventListener("focusin",x),E.addEventListener("focusout",C),E.addEventListener("pointermove",x),E.addEventListener("pointerleave",b),window.addEventListener("blur",x),window.addEventListener("focus",v),()=>{E.removeEventListener("focusin",x),E.removeEventListener("focusout",C),E.removeEventListener("pointermove",x),E.removeEventListener("pointerleave",b),window.removeEventListener("blur",x),window.removeEventListener("focus",v)}}},[g,i.isClosePausedRef]);const y=p.useCallback(({tabbingDirection:E})=>{const x=a().map(v=>{const C=v.ref.current,b=[C,...S8(C)];return E==="forwards"?b:b.reverse()});return(E==="forwards"?x.reverse():x).flat()},[a]);return p.useEffect(()=>{const E=f.current;if(E){const w=x=>{var b,D,A;const v=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!v){const P=document.activeElement,F=x.shiftKey;if(x.target===E&&F){(b=c.current)==null||b.focus();return}const M=y({tabbingDirection:F?"backwards":"forwards"}),_=M.findIndex(O=>O===P);Df(M.slice(_+1))?x.preventDefault():F?(D=c.current)==null||D.focus():(A=u.current)==null||A.focus()}};return E.addEventListener("keydown",w),()=>E.removeEventListener("keydown",w)}},[a,y]),h.jsxs(ZR,{ref:l,role:"region","aria-label":o.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(zh,{ref:c,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"forwards"});Df(E)}}),h.jsx(Fm.Slot,{scope:n,children:h.jsx(De.ol,{tabIndex:-1,...s,ref:d})}),g&&h.jsx(zh,{ref:u,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"backwards"});Df(E)}})]})});$S.displayName=OS;var zS="ToastFocusProxy",zh=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,s=vd(zS,n);return h.jsx(xd,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:i=>{var c;const a=i.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});zh.displayName=zS;var yd="Toast",d8="toast.swipeStart",f8="toast.swipeMove",h8="toast.swipeCancel",p8="toast.swipeEnd",VS=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:s,...i}=e,[a=!0,l]=Ur({prop:r,defaultProp:o,onChange:s});return h.jsx(Dn,{present:n||a,children:h.jsx(x8,{open:a,...i,ref:t,onClose:()=>l(!1),onPause:kt(e.onPause),onResume:kt(e.onResume),onSwipeStart:se(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:se(e.onSwipeMove,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:se(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:se(e.onSwipeEnd,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});VS.displayName=yd;var[m8,g8]=BS(yd,{onClose(){}}),x8=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:s,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:d,onSwipeEnd:m,...g}=e,y=vd(yd,n),[E,w]=p.useState(null),x=Le(t,O=>w(O)),v=p.useRef(null),C=p.useRef(null),b=o||y.duration,D=p.useRef(0),A=p.useRef(b),P=p.useRef(0),{onToastAdd:F,onToastRemove:k}=y,T=kt(()=>{var W;(E==null?void 0:E.contains(document.activeElement))&&((W=y.viewport)==null||W.focus()),i()}),M=p.useCallback(O=>{!O||O===1/0||(window.clearTimeout(P.current),D.current=new Date().getTime(),P.current=window.setTimeout(T,O))},[T]);p.useEffect(()=>{const O=y.viewport;if(O){const W=()=>{M(A.current),c==null||c()},j=()=>{const B=new Date().getTime()-D.current;A.current=A.current-B,window.clearTimeout(P.current),l==null||l()};return O.addEventListener(Oh,j),O.addEventListener($h,W),()=>{O.removeEventListener(Oh,j),O.removeEventListener($h,W)}}},[y.viewport,b,l,c,M]),p.useEffect(()=>{s&&!y.isClosePausedRef.current&&M(b)},[s,b,y.isClosePausedRef,M]),p.useEffect(()=>(F(),()=>k()),[F,k]);const _=p.useMemo(()=>E?qS(E):null,[E]);return y.viewport?h.jsxs(h.Fragment,{children:[_&&h.jsx(v8,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:_}),h.jsx(m8,{scope:n,onClose:T,children:Bl.createPortal(h.jsx(Fm.ItemSlot,{scope:n,children:h.jsx(QR,{asChild:!0,onEscapeKeyDown:se(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||T(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:se(e.onKeyDown,O=>{O.key==="Escape"&&(a==null||a(O.nativeEvent),O.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:se(e.onPointerDown,O=>{O.button===0&&(v.current={x:O.clientX,y:O.clientY})}),onPointerMove:se(e.onPointerMove,O=>{if(!v.current)return;const W=O.clientX-v.current.x,j=O.clientY-v.current.y,B=!!C.current,R=["left","right"].includes(y.swipeDirection),N=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,V=R?N(0,W):0,I=R?0:N(0,j),L=O.pointerType==="touch"?10:2,H={x:V,y:I},$={originalEvent:O,delta:H};B?(C.current=H,Ec(f8,f,$,{discrete:!1})):ey(H,y.swipeDirection,L)?(C.current=H,Ec(d8,u,$,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(W)>L||Math.abs(j)>L)&&(v.current=null)}),onPointerUp:se(e.onPointerUp,O=>{const W=C.current,j=O.target;if(j.hasPointerCapture(O.pointerId)&&j.releasePointerCapture(O.pointerId),C.current=null,v.current=null,W){const B=O.currentTarget,R={originalEvent:O,delta:W};ey(W,y.swipeDirection,y.swipeThreshold)?Ec(p8,m,R,{discrete:!0}):Ec(h8,d,R,{discrete:!0}),B.addEventListener("click",N=>N.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),v8=e=>{const{__scopeToast:t,children:n,...r}=e,o=vd(yd,t),[s,i]=p.useState(!1),[a,l]=p.useState(!1);return E8(()=>i(!0)),p.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(gd,{asChild:!0,children:h.jsx(xd,{...r,children:s&&h.jsxs(h.Fragment,{children:[o.label," ",n]})})})},y8="ToastTitle",US=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return h.jsx(De.div,{...r,ref:t})});US.displayName=y8;var w8="ToastDescription",HS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return h.jsx(De.div,{...r,ref:t})});HS.displayName=w8;var WS="ToastAction",JS=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?h.jsx(KS,{altText:n,asChild:!0,children:h.jsx(Rm,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${WS}\`. Expected non-empty \`string\`.`),null)});JS.displayName=WS;var GS="ToastClose",Rm=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,o=g8(GS,n);return h.jsx(KS,{asChild:!0,children:h.jsx(De.button,{type:"button",...r,ref:t,onClick:se(e.onClick,o.onClose)})})});Rm.displayName=GS;var KS=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...o}=e;return h.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function qS(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),C8(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...qS(r))}}),t}function Ec(e,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?km(o,s):o.dispatchEvent(s)}var ey=(e,t,n=0)=>{const r=Math.abs(e.x),o=Math.abs(e.y),s=r>o;return t==="left"||t==="right"?s&&r>n:!s&&o>n};function E8(e=()=>{}){const t=kt(e);lo(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function C8(e){return e.nodeType===e.ELEMENT_NODE}function S8(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Df(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var b8=LS,YS=$S,XS=VS,QS=US,ZS=HS,eb=JS,tb=Rm;function nb(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=nb(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rb(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=nb(e))&&(r&&(r+=" "),r+=t);return r}const ty=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ny=rb,zl=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return ny(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],f=s==null?void 0:s[c];if(u===null)return null;const d=ty(u)||ty(f);return o[c][d]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:d,...m}=u;return Object.entries(m).every(g=>{let[y,E]=g;return Array.isArray(E)?E.includes({...s,...a}[y]):{...s,...a}[y]===E})?[...c,f,d]:c},[]);return ny(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ob=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>p.createElement("svg",{ref:l,...A8,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ob("lucide",o),...a},[...i.map(([c,u])=>p.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(e,t)=>{const n=p.forwardRef(({className:r,...o},s)=>p.createElement(P8,{ref:s,iconNode:t,className:ob(`lucide-${D8(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=Ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=Ve("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=Ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=Ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=Ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=Ve("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Ve("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Ve("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=Ve("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=Ve("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=Ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=Ve("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=Ve("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=Ve("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=Ve("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=Ve("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=Ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=Ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=Ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=Ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=Ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Ve("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=Ve("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=Ve("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Im="-",Y8=e=>{const t=Q8(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(Im);return a[0]===""&&a.length!==1&&a.shift(),db(a,t)||X8(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},db=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?db(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(Im);return(i=t.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},oy=/^\[(.+)\]$/,X8=e=>{if(oy.test(e)){const t=oy.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Q8=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return eM(Object.entries(e.classGroups),n).forEach(([s,i])=>{Vh(i,r,s,t)}),r},Vh=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:sy(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(Z8(o)){Vh(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{Vh(i,sy(t,s),n,r)})})},sy=(e,t)=>{let n=e;return t.split(Im).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Z8=e=>e.isThemeGetter,eM=(e,t)=>t?e.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[t+i,a])):s);return[n,o]}):e,tM=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},fb="!",nM=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,o=t[0],s=t.length,i=a=>{const l=[];let c=0,u=0,f;for(let E=0;E<a.length;E++){let w=a[E];if(c===0){if(w===o&&(r||a.slice(E,E+s)===t)){l.push(a.slice(u,E)),u=E+s;continue}if(w==="/"){f=E;continue}}w==="["?c++:w==="]"&&c--}const d=l.length===0?a:a.substring(u),m=d.startsWith(fb),g=m?d.substring(1):d,y=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:i}):i},rM=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},oM=e=>({cache:tM(e.cacheSize),parseClassName:nM(e),...Y8(e)}),sM=/\s+/,iM=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,s=[],i=e.trim().split(sM);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:m}=n(c);let g=!!m,y=r(g?d.substring(0,m):d);if(!y){if(!g){a=c+(a.length>0?" "+a:a);continue}if(y=r(d),!y){a=c+(a.length>0?" "+a:a);continue}g=!1}const E=rM(u).join(":"),w=f?E+fb:E,x=w+y;if(s.includes(x))continue;s.push(x);const v=o(y,g);for(let C=0;C<v.length;++C){const b=v[C];s.push(w+b)}a=c+(a.length>0?" "+a:a)}return a};function aM(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=hb(t))&&(r&&(r+=" "),r+=n);return r}const hb=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=hb(e[r]))&&(n&&(n+=" "),n+=t);return n};function lM(e,...t){let n,r,o,s=i;function i(l){const c=t.reduce((u,f)=>f(u),e());return n=oM(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=iM(l,n);return o(l,u),u}return function(){return s(aM.apply(null,arguments))}}const dt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},pb=/^\[(?:([a-z-]+):)?(.+)\]$/i,cM=/^\d+\/\d+$/,uM=new Set(["px","full","screen"]),dM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gr=e=>bi(e)||uM.has(e)||cM.test(e),vo=e=>oa(e,"length",SM),bi=e=>!!e&&!Number.isNaN(Number(e)),Pf=e=>oa(e,"number",bi),Ca=e=>!!e&&Number.isInteger(Number(e)),gM=e=>e.endsWith("%")&&bi(e.slice(0,-1)),Re=e=>pb.test(e),yo=e=>dM.test(e),xM=new Set(["length","size","percentage"]),vM=e=>oa(e,xM,mb),yM=e=>oa(e,"position",mb),wM=new Set(["image","url"]),EM=e=>oa(e,wM,DM),CM=e=>oa(e,"",bM),Sa=()=>!0,oa=(e,t,n)=>{const r=pb.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},SM=e=>fM.test(e)&&!hM.test(e),mb=()=>!1,bM=e=>pM.test(e),DM=e=>mM.test(e),AM=()=>{const e=dt("colors"),t=dt("spacing"),n=dt("blur"),r=dt("brightness"),o=dt("borderColor"),s=dt("borderRadius"),i=dt("borderSpacing"),a=dt("borderWidth"),l=dt("contrast"),c=dt("grayscale"),u=dt("hueRotate"),f=dt("invert"),d=dt("gap"),m=dt("gradientColorStops"),g=dt("gradientColorStopPositions"),y=dt("inset"),E=dt("margin"),w=dt("opacity"),x=dt("padding"),v=dt("saturate"),C=dt("scale"),b=dt("sepia"),D=dt("skew"),A=dt("space"),P=dt("translate"),F=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",Re,t],M=()=>[Re,t],_=()=>["",Gr,vo],O=()=>["auto",bi,Re],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],N=()=>["","0",Re],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[bi,Re];return{cacheSize:500,separator:":",theme:{colors:[Sa],spacing:[Gr,vo],blur:["none","",yo,Re],brightness:I(),borderColor:[e],borderRadius:["none","","full",yo,Re],borderSpacing:M(),borderWidth:_(),contrast:I(),grayscale:N(),hueRotate:I(),invert:N(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[gM,vo],inset:T(),margin:T(),opacity:I(),padding:M(),saturate:I(),scale:I(),sepia:N(),skew:I(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Re]}],container:["container"],columns:[{columns:[yo]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Re]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ca,Re]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Re]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",Ca,Re]}],"grid-cols":[{"grid-cols":[Sa]}],"col-start-end":[{col:["auto",{span:["full",Ca,Re]},Re]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Sa]}],"row-start-end":[{row:["auto",{span:[Ca,Re]},Re]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Re]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Re,t]}],"min-w":[{"min-w":[Re,t,"min","max","fit"]}],"max-w":[{"max-w":[Re,t,"none","full","min","max","fit","prose",{screen:[yo]},yo]}],h:[{h:[Re,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Re,t,"auto","min","max","fit"]}],"font-size":[{text:["base",yo,vo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pf]}],"font-family":[{font:[Sa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Re]}],"line-clamp":[{"line-clamp":["none",bi,Pf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gr,Re]}],"list-image":[{"list-image":["none",Re]}],"list-style-type":[{list:["none","disc","decimal",Re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gr,vo]}],"underline-offset":[{"underline-offset":["auto",Gr,Re]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),yM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},EM]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:j()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[Gr,Re]}],"outline-w":[{outline:[Gr,vo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Gr,vo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",yo,CM]}],"shadow-color":[{shadow:[Sa]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",yo,Re]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Re]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Re]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Ca,Re]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Gr,vo,Pf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},PM=lM(AM);function ie(...e){return PM(rb(e))}const kM=b8,gb=p.forwardRef(({className:e,...t},n)=>h.jsx(YS,{ref:n,className:ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));gb.displayName=YS.displayName;const TM=zl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),xb=p.forwardRef(({className:e,variant:t,...n},r)=>h.jsx(XS,{ref:r,className:ie(TM({variant:t}),e),...n}));xb.displayName=XS.displayName;const FM=p.forwardRef(({className:e,...t},n)=>h.jsx(eb,{ref:n,className:ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));FM.displayName=eb.displayName;const vb=p.forwardRef(({className:e,...t},n)=>h.jsx(tb,{ref:n,className:ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:h.jsx(wd,{className:"h-4 w-4"})}));vb.displayName=tb.displayName;const yb=p.forwardRef(({className:e,...t},n)=>h.jsx(QS,{ref:n,className:ie("text-sm font-semibold",e),...t}));yb.displayName=QS.displayName;const wb=p.forwardRef(({className:e,...t},n)=>h.jsx(ZS,{ref:n,className:ie("text-sm opacity-90",e),...t}));wb.displayName=ZS.displayName;function RM(){const{toasts:e}=Ol();return h.jsxs(kM,{children:[e.map(function({id:t,title:n,description:r,action:o,...s}){return h.jsxs(xb,{...s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(yb,{children:n}),r&&h.jsx(wb,{children:r})]}),o,h.jsx(vb,{})]},t)}),h.jsx(gb,{})]})}var MM=cE[" useId ".trim().toString()]||(()=>{}),NM=0;function Di(e){const[t,n]=p.useState(MM());return lo(()=>{n(r=>r??String(NM++))},[e]),t?`radix-${t}`:""}const IM=["top","right","bottom","left"],es=Math.min,zn=Math.max,Fu=Math.round,Cc=Math.floor,Or=e=>({x:e,y:e}),jM={left:"right",right:"left",bottom:"top",top:"bottom"},_M={start:"end",end:"start"};function Uh(e,t,n){return zn(e,es(t,n))}function co(e,t){return typeof e=="function"?e(t):e}function uo(e){return e.split("-")[0]}function sa(e){return e.split("-")[1]}function jm(e){return e==="x"?"y":"x"}function _m(e){return e==="y"?"height":"width"}function ts(e){return["top","bottom"].includes(uo(e))?"y":"x"}function Bm(e){return jm(ts(e))}function BM(e,t,n){n===void 0&&(n=!1);const r=sa(e),o=Bm(e),s=_m(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=Ru(i)),[i,Ru(i)]}function LM(e){const t=Ru(e);return[Hh(e),t,Hh(t)]}function Hh(e){return e.replace(/start|end/g,t=>_M[t])}function OM(e,t,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?s:i;default:return[]}}function $M(e,t,n,r){const o=sa(e);let s=OM(uo(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(Hh)))),s}function Ru(e){return e.replace(/left|right|bottom|top/g,t=>jM[t])}function zM(e){return{top:0,right:0,bottom:0,left:0,...e}}function Eb(e){return typeof e!="number"?zM(e):{top:e,right:e,bottom:e,left:e}}function Mu(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function iy(e,t,n){let{reference:r,floating:o}=e;const s=ts(t),i=Bm(t),a=_m(i),l=uo(t),c=s==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,d=r[a]/2-o[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-o.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-o.width,y:f};break;default:m={x:r.x,y:r.y}}switch(sa(t)){case"start":m[i]-=d*(n&&c?-1:1);break;case"end":m[i]+=d*(n&&c?-1:1);break}return m}const VM=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=iy(c,r,l),d=r,m={},g=0;for(let y=0;y<a.length;y++){const{name:E,fn:w}=a[y],{x,y:v,data:C,reset:b}=await w({x:u,y:f,initialPlacement:r,placement:d,strategy:o,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});u=x??u,f=v??f,m={...m,[E]:{...m[E],...C}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(d=b.placement),b.rects&&(c=b.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):b.rects),{x:u,y:f}=iy(c,d,l)),y=-1)}return{x:u,y:f,placement:d,strategy:o,middlewareData:m}};async function yl(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:m=0}=co(t,e),g=Eb(m),E=a[d?f==="floating"?"reference":"floating":f],w=Mu(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(E)))==null||n?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},b=Mu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:v,strategy:l}):x);return{top:(w.top-b.top+g.top)/C.y,bottom:(b.bottom-w.bottom+g.bottom)/C.y,left:(w.left-b.left+g.left)/C.x,right:(b.right-w.right+g.right)/C.x}}const UM=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=co(e,t)||{};if(c==null)return{};const f=Eb(u),d={x:n,y:r},m=Bm(o),g=_m(m),y=await i.getDimensions(c),E=m==="y",w=E?"top":"left",x=E?"bottom":"right",v=E?"clientHeight":"clientWidth",C=s.reference[g]+s.reference[m]-d[m]-s.floating[g],b=d[m]-s.reference[m],D=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let A=D?D[v]:0;(!A||!await(i.isElement==null?void 0:i.isElement(D)))&&(A=a.floating[v]||s.floating[g]);const P=C/2-b/2,F=A/2-y[g]/2-1,k=es(f[w],F),T=es(f[x],F),M=k,_=A-y[g]-T,O=A/2-y[g]/2+P,W=Uh(M,O,_),j=!l.arrow&&sa(o)!=null&&O!==W&&s.reference[g]/2-(O<M?k:T)-y[g]/2<0,B=j?O<M?O-M:O-_:0;return{[m]:d[m]+B,data:{[m]:W,centerOffset:O-W-B,...j&&{alignmentOffset:B}},reset:j}}}),HM=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...E}=co(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=uo(o),x=ts(a),v=uo(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=d||(v||!y?[Ru(a)]:LM(a)),D=g!=="none";!d&&D&&b.push(...$M(a,y,g,C));const A=[a,...b],P=await yl(t,E),F=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&F.push(P[w]),f){const O=BM(o,i,C);F.push(P[O[0]],P[O[1]])}if(k=[...k,{placement:o,overflows:F}],!F.every(O=>O<=0)){var T,M;const O=(((T=s.flip)==null?void 0:T.index)||0)+1,W=A[O];if(W)return{data:{index:O,overflows:k},reset:{placement:W}};let j=(M=k.filter(B=>B.overflows[0]<=0).sort((B,R)=>B.overflows[1]-R.overflows[1])[0])==null?void 0:M.placement;if(!j)switch(m){case"bestFit":{var _;const B=(_=k.filter(R=>{if(D){const N=ts(R.placement);return N===x||N==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(N=>N>0).reduce((N,V)=>N+V,0)]).sort((R,N)=>R[1]-N[1])[0])==null?void 0:_[0];B&&(j=B);break}case"initialPlacement":j=a;break}if(o!==j)return{reset:{placement:j}}}return{}}}};function ay(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ly(e){return IM.some(t=>e[t]>=0)}const WM=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=co(e,t);switch(r){case"referenceHidden":{const s=await yl(t,{...o,elementContext:"reference"}),i=ay(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ly(i)}}}case"escaped":{const s=await yl(t,{...o,altBoundary:!0}),i=ay(s,n.floating);return{data:{escapedOffsets:i,escaped:ly(i)}}}default:return{}}}}};async function JM(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=uo(n),a=sa(n),l=ts(n)==="y",c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,f=co(t,e);let{mainAxis:d,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:d*c}:{x:d*c,y:m*u}}const GM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,l=await JM(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},KM=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:E=>{let{x:w,y:x}=E;return{x:w,y:x}}},...l}=co(e,t),c={x:n,y:r},u=await yl(t,l),f=ts(uo(o)),d=jm(f);let m=c[d],g=c[f];if(s){const E=d==="y"?"top":"left",w=d==="y"?"bottom":"right",x=m+u[E],v=m-u[w];m=Uh(x,m,v)}if(i){const E=f==="y"?"top":"left",w=f==="y"?"bottom":"right",x=g+u[E],v=g-u[w];g=Uh(x,g,v)}const y=a.fn({...t,[d]:m,[f]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[d]:s,[f]:i}}}}}},qM=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=co(e,t),u={x:n,y:r},f=ts(o),d=jm(f);let m=u[d],g=u[f];const y=co(a,t),E=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const v=d==="y"?"height":"width",C=s.reference[d]-s.floating[v]+E.mainAxis,b=s.reference[d]+s.reference[v]-E.mainAxis;m<C?m=C:m>b&&(m=b)}if(c){var w,x;const v=d==="y"?"width":"height",C=["top","left"].includes(uo(o)),b=s.reference[f]-s.floating[v]+(C&&((w=i.offset)==null?void 0:w[f])||0)+(C?0:E.crossAxis),D=s.reference[f]+s.reference[v]+(C?0:((x=i.offset)==null?void 0:x[f])||0)-(C?E.crossAxis:0);g<b?g=b:g>D&&(g=D)}return{[d]:m,[f]:g}}}},YM=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:l=()=>{},...c}=co(e,t),u=await yl(t,c),f=uo(o),d=sa(o),m=ts(o)==="y",{width:g,height:y}=s.floating;let E,w;f==="top"||f==="bottom"?(E=f,w=d===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(w=f,E=d==="end"?"top":"bottom");const x=y-u.top-u.bottom,v=g-u.left-u.right,C=es(y-u[E],x),b=es(g-u[w],v),D=!t.middlewareData.shift;let A=C,P=b;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=v),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=x),D&&!d){const k=zn(u.left,0),T=zn(u.right,0),M=zn(u.top,0),_=zn(u.bottom,0);m?P=g-2*(k!==0||T!==0?k+T:zn(u.left,u.right)):A=y-2*(M!==0||_!==0?M+_:zn(u.top,u.bottom))}await l({...t,availableWidth:P,availableHeight:A});const F=await i.getDimensions(a.floating);return g!==F.width||y!==F.height?{reset:{rects:!0}}:{}}}};function Ed(){return typeof window<"u"}function ia(e){return Cb(e)?(e.nodeName||"").toLowerCase():"#document"}function Wn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hr(e){var t;return(t=(Cb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Cb(e){return Ed()?e instanceof Node||e instanceof Wn(e).Node:!1}function Pr(e){return Ed()?e instanceof Element||e instanceof Wn(e).Element:!1}function Vr(e){return Ed()?e instanceof HTMLElement||e instanceof Wn(e).HTMLElement:!1}function cy(e){return!Ed()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Wn(e).ShadowRoot}function Vl(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function XM(e){return["table","td","th"].includes(ia(e))}function Cd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Lm(e){const t=Om(),n=Pr(e)?kr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function QM(e){let t=ns(e);for(;Vr(t)&&!Gi(t);){if(Lm(t))return t;if(Cd(t))return null;t=ns(t)}return null}function Om(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gi(e){return["html","body","#document"].includes(ia(e))}function kr(e){return Wn(e).getComputedStyle(e)}function Sd(e){return Pr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ns(e){if(ia(e)==="html")return e;const t=e.assignedSlot||e.parentNode||cy(e)&&e.host||Hr(e);return cy(t)?t.host:t}function Sb(e){const t=ns(e);return Gi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Vr(t)&&Vl(t)?t:Sb(t)}function wl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Sb(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=Wn(o);if(s){const a=Wh(i);return t.concat(i,i.visualViewport||[],Vl(o)?o:[],a&&n?wl(a):[])}return t.concat(o,wl(o,[],n))}function Wh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function bb(e){const t=kr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Vr(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=Fu(n)!==s||Fu(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function $m(e){return Pr(e)?e:e.contextElement}function Ai(e){const t=$m(e);if(!Vr(t))return Or(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=bb(t);let i=(s?Fu(n.width):n.width)/r,a=(s?Fu(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const ZM=Or(0);function Db(e){const t=Wn(e);return!Om()||!t.visualViewport?ZM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function eN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Wn(e)?!1:t}function Bs(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=$m(e);let i=Or(1);t&&(r?Pr(r)&&(i=Ai(r)):i=Ai(e));const a=eN(s,n,r)?Db(s):Or(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,f=o.height/i.y;if(s){const d=Wn(s),m=r&&Pr(r)?Wn(r):r;let g=d,y=Wh(g);for(;y&&r&&m!==g;){const E=Ai(y),w=y.getBoundingClientRect(),x=kr(y),v=w.left+(y.clientLeft+parseFloat(x.paddingLeft))*E.x,C=w.top+(y.clientTop+parseFloat(x.paddingTop))*E.y;l*=E.x,c*=E.y,u*=E.x,f*=E.y,l+=v,c+=C,g=Wn(y),y=Wh(g)}}return Mu({width:u,height:f,x:l,y:c})}function zm(e,t){const n=Sd(e).scrollLeft;return t?t.left+n:Bs(Hr(e)).left+n}function Ab(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:zm(e,r)),s=r.top+t.scrollTop;return{x:o,y:s}}function tN(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=Hr(r),a=t?Cd(t.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Or(1);const u=Or(0),f=Vr(r);if((f||!f&&!s)&&((ia(r)!=="body"||Vl(i))&&(l=Sd(r)),Vr(r))){const m=Bs(r);c=Ai(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const d=i&&!f&&!s?Ab(i,l,!0):Or(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:n.y*c.y-l.scrollTop*c.y+u.y+d.y}}function nN(e){return Array.from(e.getClientRects())}function rN(e){const t=Hr(e),n=Sd(e),r=e.ownerDocument.body,o=zn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=zn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+zm(e);const a=-n.scrollTop;return kr(r).direction==="rtl"&&(i+=zn(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function oN(e,t){const n=Wn(e),r=Hr(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=Om();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function sN(e,t){const n=Bs(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=Vr(e)?Ai(e):Or(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function uy(e,t,n){let r;if(t==="viewport")r=oN(e,n);else if(t==="document")r=rN(Hr(e));else if(Pr(t))r=sN(t,n);else{const o=Db(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Mu(r)}function Pb(e,t){const n=ns(e);return n===t||!Pr(n)||Gi(n)?!1:kr(n).position==="fixed"||Pb(n,t)}function iN(e,t){const n=t.get(e);if(n)return n;let r=wl(e,[],!1).filter(a=>Pr(a)&&ia(a)!=="body"),o=null;const s=kr(e).position==="fixed";let i=s?ns(e):e;for(;Pr(i)&&!Gi(i);){const a=kr(i),l=Lm(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Vl(i)&&!l&&Pb(e,i))?r=r.filter(u=>u!==i):o=a,i=ns(i)}return t.set(e,r),r}function aN(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?Cd(t)?[]:iN(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const f=uy(t,u,o);return c.top=zn(f.top,c.top),c.right=es(f.right,c.right),c.bottom=es(f.bottom,c.bottom),c.left=zn(f.left,c.left),c},uy(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function lN(e){const{width:t,height:n}=bb(e);return{width:t,height:n}}function cN(e,t,n){const r=Vr(t),o=Hr(t),s=n==="fixed",i=Bs(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Or(0);if(r||!r&&!s)if((ia(t)!=="body"||Vl(o))&&(a=Sd(t)),r){const d=Bs(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else o&&(l.x=zm(o));const c=o&&!r&&!s?Ab(o,a):Or(0),u=i.left+a.scrollLeft-l.x-c.x,f=i.top+a.scrollTop-l.y-c.y;return{x:u,y:f,width:i.width,height:i.height}}function kf(e){return kr(e).position==="static"}function dy(e,t){if(!Vr(e)||kr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Hr(e)===n&&(n=n.ownerDocument.body),n}function kb(e,t){const n=Wn(e);if(Cd(e))return n;if(!Vr(e)){let o=ns(e);for(;o&&!Gi(o);){if(Pr(o)&&!kf(o))return o;o=ns(o)}return n}let r=dy(e,t);for(;r&&XM(r)&&kf(r);)r=dy(r,t);return r&&Gi(r)&&kf(r)&&!Lm(r)?n:r||QM(e)||n}const uN=async function(e){const t=this.getOffsetParent||kb,n=this.getDimensions,r=await n(e.floating);return{reference:cN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function dN(e){return kr(e).direction==="rtl"}const fN={convertOffsetParentRelativeRectToViewportRelativeRect:tN,getDocumentElement:Hr,getClippingRect:aN,getOffsetParent:kb,getElementRects:uN,getClientRects:nN,getDimensions:lN,getScale:Ai,isElement:Pr,isRTL:dN};function Tb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function hN(e,t){let n=null,r;const o=Hr(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:f,width:d,height:m}=c;if(a||t(),!d||!m)return;const g=Cc(f),y=Cc(o.clientWidth-(u+d)),E=Cc(o.clientHeight-(f+m)),w=Cc(u),v={rootMargin:-g+"px "+-y+"px "+-E+"px "+-w+"px",threshold:zn(0,es(1,l))||1};let C=!0;function b(D){const A=D[0].intersectionRatio;if(A!==l){if(!C)return i();A?i(!1,A):r=setTimeout(()=>{i(!1,1e-7)},1e3)}A===1&&!Tb(c,e.getBoundingClientRect())&&i(),C=!1}try{n=new IntersectionObserver(b,{...v,root:o.ownerDocument})}catch{n=new IntersectionObserver(b,v)}n.observe(e)}return i(!0),s}function pN(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=$m(e),u=o||s?[...c?wl(c):[],...wl(t)]:[];u.forEach(w=>{o&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const f=c&&a?hN(c,n):null;let d=-1,m=null;i&&(m=new ResizeObserver(w=>{let[x]=w;x&&x.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let g,y=l?Bs(e):null;l&&E();function E(){const w=Bs(e);y&&!Tb(y,w)&&n(),y=w,g=requestAnimationFrame(E)}return n(),()=>{var w;u.forEach(x=>{o&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),f==null||f(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const mN=GM,gN=KM,xN=HM,vN=YM,yN=WM,fy=UM,wN=qM,EN=(e,t,n)=>{const r=new Map,o={platform:fN,...n},s={...o.platform,_c:r};return VM(e,t,{...o,platform:s})};var Qc=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Nu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Nu(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Nu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function hy(e,t){const n=Fb(e);return Math.round(t*n)/n}function Tf(e){const t=p.useRef(e);return Qc(()=>{t.current=e}),t}function CN(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,f]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,m]=p.useState(r);Nu(d,r)||m(r);const[g,y]=p.useState(null),[E,w]=p.useState(null),x=p.useCallback(R=>{R!==D.current&&(D.current=R,y(R))},[]),v=p.useCallback(R=>{R!==A.current&&(A.current=R,w(R))},[]),C=s||g,b=i||E,D=p.useRef(null),A=p.useRef(null),P=p.useRef(u),F=l!=null,k=Tf(l),T=Tf(o),M=Tf(c),_=p.useCallback(()=>{if(!D.current||!A.current)return;const R={placement:t,strategy:n,middleware:d};T.current&&(R.platform=T.current),EN(D.current,A.current,R).then(N=>{const V={...N,isPositioned:M.current!==!1};O.current&&!Nu(P.current,V)&&(P.current=V,Bl.flushSync(()=>{f(V)}))})},[d,t,n,T,M]);Qc(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(R=>({...R,isPositioned:!1})))},[c]);const O=p.useRef(!1);Qc(()=>(O.current=!0,()=>{O.current=!1}),[]),Qc(()=>{if(C&&(D.current=C),b&&(A.current=b),C&&b){if(k.current)return k.current(C,b,_);_()}},[C,b,_,k,F]);const W=p.useMemo(()=>({reference:D,floating:A,setReference:x,setFloating:v}),[x,v]),j=p.useMemo(()=>({reference:C,floating:b}),[C,b]),B=p.useMemo(()=>{const R={position:n,left:0,top:0};if(!j.floating)return R;const N=hy(j.floating,u.x),V=hy(j.floating,u.y);return a?{...R,transform:"translate("+N+"px, "+V+"px)",...Fb(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:N,top:V}},[n,a,j.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:_,refs:W,elements:j,floatingStyles:B}),[u,_,W,j,B])}const SN=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?fy({element:r.current,padding:o}).fn(n):{}:r?fy({element:r,padding:o}).fn(n):{}}}},bN=(e,t)=>({...mN(e),options:[e,t]}),DN=(e,t)=>({...gN(e),options:[e,t]}),AN=(e,t)=>({...wN(e),options:[e,t]}),PN=(e,t)=>({...xN(e),options:[e,t]}),kN=(e,t)=>({...vN(e),options:[e,t]}),TN=(e,t)=>({...yN(e),options:[e,t]}),FN=(e,t)=>({...SN(e),options:[e,t]});var RN="Arrow",Rb=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return h.jsx(De.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});Rb.displayName=RN;var MN=Rb;function bd(e){const[t,n]=p.useState(void 0);return lo(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Vm="Popper",[Mb,Dd]=bn(Vm),[NN,Nb]=Mb(Vm),Ib=e=>{const{__scopePopper:t,children:n}=e,[r,o]=p.useState(null);return h.jsx(NN,{scope:t,anchor:r,onAnchorChange:o,children:n})};Ib.displayName=Vm;var jb="PopperAnchor",_b=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=Nb(jb,n),i=p.useRef(null),a=Le(t,i);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:h.jsx(De.div,{...o,ref:a})});_b.displayName=jb;var Um="PopperContent",[IN,jN]=Mb(Um),Bb=p.forwardRef((e,t)=>{var Y,re,fe,ke,Ae,ne;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:m="optimized",onPlaced:g,...y}=e,E=Nb(Um,n),[w,x]=p.useState(null),v=Le(t,ve=>x(ve)),[C,b]=p.useState(null),D=bd(C),A=(D==null?void 0:D.width)??0,P=(D==null?void 0:D.height)??0,F=r+(s!=="center"?"-"+s:""),k=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(c)?c:[c],M=T.length>0,_={padding:k,boundary:T.filter(BN),altBoundary:M},{refs:O,floatingStyles:W,placement:j,isPositioned:B,middlewareData:R}=CN({strategy:"fixed",placement:F,whileElementsMounted:(...ve)=>pN(...ve,{animationFrame:m==="always"}),elements:{reference:E.anchor},middleware:[bN({mainAxis:o+P,alignmentAxis:i}),l&&DN({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?AN():void 0,..._}),l&&PN({..._}),kN({..._,apply:({elements:ve,rects:ye,availableWidth:pe,availableHeight:He})=>{const{width:ct,height:qe}=ye.reference,Ze=ve.floating.style;Ze.setProperty("--radix-popper-available-width",`${pe}px`),Ze.setProperty("--radix-popper-available-height",`${He}px`),Ze.setProperty("--radix-popper-anchor-width",`${ct}px`),Ze.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),C&&FN({element:C,padding:a}),LN({arrowWidth:A,arrowHeight:P}),d&&TN({strategy:"referenceHidden",..._})]}),[N,V]=$b(j),I=kt(g);lo(()=>{B&&(I==null||I())},[B,I]);const L=(Y=R.arrow)==null?void 0:Y.x,H=(re=R.arrow)==null?void 0:re.y,$=((fe=R.arrow)==null?void 0:fe.centerOffset)!==0,[he,de]=p.useState();return lo(()=>{w&&de(window.getComputedStyle(w).zIndex)},[w]),h.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:B?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(ke=R.transformOrigin)==null?void 0:ke.x,(Ae=R.transformOrigin)==null?void 0:Ae.y].join(" "),...((ne=R.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(IN,{scope:n,placedSide:N,onArrowChange:b,arrowX:L,arrowY:H,shouldHideArrow:$,children:h.jsx(De.div,{"data-side":N,"data-align":V,...y,ref:v,style:{...y.style,animation:B?void 0:"none"}})})})});Bb.displayName=Um;var Lb="PopperArrow",_N={top:"bottom",right:"left",bottom:"top",left:"right"},Ob=p.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=jN(Lb,r),i=_N[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(MN,{...o,ref:n,style:{...o.style,display:"block"}})})});Ob.displayName=Lb;function BN(e){return e!==null}var LN=e=>({name:"transformOrigin",options:e,fn(t){var E,w,x;const{placement:n,rects:r,middlewareData:o}=t,i=((E=o.arrow)==null?void 0:E.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,u]=$b(n),f={start:"0%",center:"50%",end:"100%"}[u],d=(((w=o.arrow)==null?void 0:w.x)??0)+a/2,m=(((x=o.arrow)==null?void 0:x.y)??0)+l/2;let g="",y="";return c==="bottom"?(g=i?f:`${d}px`,y=`${-l}px`):c==="top"?(g=i?f:`${d}px`,y=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,y=i?f:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,y=i?f:`${m}px`),{data:{x:g,y}}}});function $b(e){const[t,n="center"]=e.split("-");return[t,n]}var ON=Ib,zb=_b,Vb=Bb,Ub=Ob,[Ad,z7]=bn("Tooltip",[Dd]),Hm=Dd(),Hb="TooltipProvider",$N=700,py="tooltip.open",[zN,Wb]=Ad(Hb),Jb=e=>{const{__scopeTooltip:t,delayDuration:n=$N,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=e,i=p.useRef(!0),a=p.useRef(!1),l=p.useRef(0);return p.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(zN,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:s})};Jb.displayName=Hb;var Gb="Tooltip",[V7,Pd]=Ad(Gb),Jh="TooltipTrigger",VN=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Pd(Jh,n),s=Wb(Jh,n),i=Hm(n),a=p.useRef(null),l=Le(t,a,o.onTriggerChange),c=p.useRef(!1),u=p.useRef(!1),f=p.useCallback(()=>c.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(zb,{asChild:!0,...i,children:h.jsx(De.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:se(e.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:se(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:se(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:se(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:se(e.onBlur,o.onClose),onClick:se(e.onClick,o.onClose)})})});VN.displayName=Jh;var UN="TooltipPortal",[U7,HN]=Ad(UN,{forceMount:void 0}),Ki="TooltipContent",Kb=p.forwardRef((e,t)=>{const n=HN(Ki,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=e,i=Pd(Ki,e.__scopeTooltip);return h.jsx(Dn,{present:r||i.open,children:i.disableHoverableContent?h.jsx(qb,{side:o,...s,ref:t}):h.jsx(WN,{side:o,...s,ref:t})})}),WN=p.forwardRef((e,t)=>{const n=Pd(Ki,e.__scopeTooltip),r=Wb(Ki,e.__scopeTooltip),o=p.useRef(null),s=Le(t,o),[i,a]=p.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:f}=r,d=p.useCallback(()=>{a(null),f(!1)},[f]),m=p.useCallback((g,y)=>{const E=g.currentTarget,w={x:g.clientX,y:g.clientY},x=YN(w,E.getBoundingClientRect()),v=XN(w,x),C=QN(y.getBoundingClientRect()),b=e3([...v,...C]);a(b),f(!0)},[f]);return p.useEffect(()=>()=>d(),[d]),p.useEffect(()=>{if(l&&u){const g=E=>m(E,u),y=E=>m(E,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",y)}}},[l,u,m,d]),p.useEffect(()=>{if(i){const g=y=>{const E=y.target,w={x:y.clientX,y:y.clientY},x=(l==null?void 0:l.contains(E))||(u==null?void 0:u.contains(E)),v=!ZN(w,i);x?d():v&&(d(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,i,c,d]),h.jsx(qb,{...e,ref:s})}),[JN,GN]=Ad(Gb,{isInside:!1}),KN=NS("TooltipContent"),qb=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=e,l=Pd(Ki,n),c=Hm(n),{onClose:u}=l;return p.useEffect(()=>(document.addEventListener(py,u),()=>document.removeEventListener(py,u)),[u]),p.useEffect(()=>{if(l.trigger){const f=d=>{const m=d.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),h.jsx($l,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:h.jsxs(Vb,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(KN,{children:r}),h.jsx(JN,{scope:n,isInside:!0,children:h.jsx(i8,{id:l.contentId,role:"tooltip",children:o||r})})]})})});Kb.displayName=Ki;var Yb="TooltipArrow",qN=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Hm(n);return GN(Yb,n).isInside?null:h.jsx(Ub,{...o,...r,ref:t})});qN.displayName=Yb;function YN(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function XN(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function QN(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function ZN(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s].x,l=t[s].y,c=t[i].x,u=t[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function e3(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),t3(t)}function t3(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var n3=Jb,Xb=Kb;const r3=n3,o3=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(Xb,{ref:r,sideOffset:t,className:ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));o3.displayName=Xb.displayName;const Wm=p.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:ie("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Wm.displayName="Card";const s3=p.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:ie("flex flex-col space-y-1.5 p-6",e),...t}));s3.displayName="CardHeader";const i3=p.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:ie("text-2xl font-semibold leading-none tracking-tight",e),...t}));i3.displayName="CardTitle";const a3=p.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:ie("text-sm text-muted-foreground",e),...t}));a3.displayName="CardDescription";const Jm=p.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:ie("p-6 pt-0",e),...t}));Jm.displayName="CardContent";const l3=p.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:ie("flex items-center p-6 pt-0",e),...t}));l3.displayName="CardFooter";function c3(){return h.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:h.jsx(Wm,{className:"w-full max-w-md mx-4",children:h.jsxs(Jm,{className:"pt-6",children:[h.jsxs("div",{className:"flex mb-4 gap-2",children:[h.jsx(M8,{className:"h-8 w-8 text-red-500"}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),h.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Gm=zl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),be=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},s)=>{const i=r?OR:"button";return h.jsx(i,{className:ie(Gm({variant:t,size:n,className:e})),ref:s,...o})});be.displayName="Button";const Ff=e=>e.map(t=>typeof t=="object"?JSON.stringify(t):t),S={log:(...e)=>{typeof console<"u"&&console.log&&console.log("[Phojo]",...Ff(e))},warn:(...e)=>{typeof console<"u"&&console.warn&&console.warn("[Phojo WARN]",...Ff(e))},error:(...e)=>{typeof console<"u"&&console.error&&console.error("[Phojo ERROR]",...Ff(e))}};function u3(e,t,n){const r=o=>{if(Array.isArray(o))return o.map(r);if(o!==null&&typeof o=="object"){const s={};return Object.keys(o).sort().forEach(i=>{s[i]=r(o[i])}),s}else return o};return JSON.stringify(r(e),t,n)}async function d3(e,t,n){const r=t.getJournalById(e);if(!r)throw new Error(`Journal with ID ${e} not found`);const o=await n.getAllEntries({includeDeleted:!0}),s=await n.getAllImageMetadata({includeDeleted:!0}),i={name:r.name,color:r.color,updatedAt:r.journalPropertiesUpdatedAt},a=r.journalPropertiesUpdatedAt,l=s.map(d=>{var m,g,y,E,w,x;return{id:d.id,contentHash:((m=d.photoMetadata)==null?void 0:m.contentHash)||"",originalFilename:((g=d.photoMetadata)==null?void 0:g.filename)||"",mimeType:((y=d.photoMetadata)==null?void 0:y.mimeType)||"",width:(E=d.photoMetadata)==null?void 0:E.width,height:(w=d.photoMetadata)==null?void 0:w.height,exifDate:(x=d.photoMetadata)==null?void 0:x.exifDate,createdAt:d.createdAt,updatedAt:d.updatedAt,isDeleted:d.isDeleted}}),c={};o.forEach(d=>{const{id:m,...g}=d;d.isDeleted===!1&&delete g.isDeleted,c[m]=g});const u={};return l.forEach(d=>{const{id:m,...g}=d;d.isDeleted===!1&&delete g.isDeleted,u[m]=g}),{schemaVersion:1,journalContentLastModified:a,journalProperties:i,entries:c,photoMetadata:u}}async function my(e,t,n,r){const o=await n.getAllEntries({includeDeleted:!0}),s=new Set(o.map(c=>c.id)),i=await n.getAllImageMetadata({includeDeleted:!0}),a=new Set(i.map(c=>c.id));for(const[c,u]of Object.entries(t.entries))try{const f={id:c,...u},d=s.has(c)?await n.getEntryById(c):null;if(d){const m=new Date(f.updatedAt).getTime(),g=new Date(d.updatedAt).getTime();m>g?(await n.saveSyncedEntry(f,d),S.log(`[Sync] Updated entry ${c} from sync data`)):S.log(`[Sync] Kept local entry ${c} (newer or same age as sync data)`)}else await n.saveSyncedEntry(f,null),S.log(`[Sync] Created new entry ${c} from sync data`);s.delete(c)}catch(f){S.error(`[Sync] Error processing synced entry ${c}:`,f)}for(const[c,u]of Object.entries(t.photoMetadata))try{const f={id:c,...u},d=a.has(c)?await n.getImageMetadataById(c):null;if(d){const m=new Date(f.updatedAt).getTime(),g=new Date(d.updatedAt).getTime();if(m>g){const y={id:f.id,photoFilename:f.originalFilename,photoMetadata:{filename:f.originalFilename,mimeType:f.mimeType,width:f.width,height:f.height,exifDate:f.exifDate,contentHash:f.contentHash},createdAt:f.createdAt,updatedAt:f.updatedAt,isDeleted:f.isDeleted};await n.saveImageMetadata([y]),S.log(`[Sync] Updated photo metadata ${c} from sync data`)}else S.log(`[Sync] Kept local photo metadata ${c} (newer than sync data)`)}else{const m={id:f.id,photoFilename:f.originalFilename,photoMetadata:{filename:f.originalFilename,mimeType:f.mimeType,width:f.width,height:f.height,exifDate:f.exifDate,contentHash:f.contentHash},createdAt:f.createdAt,updatedAt:f.updatedAt,isDeleted:f.isDeleted};await n.saveImageMetadata([m]),S.log(`[Sync] Created new photo metadata ${c} from sync data`)}a.delete(c)}catch(f){S.error(`[Sync] Error processing synced photo metadata ${c}:`,f)}for(const c of s)try{const u=await n.getEntryById(c);u&&!u.isDeleted&&(await n.deleteEntry(c),S.log(`[Sync] Soft-deleted local entry ${c} not in sync data`))}catch(u){S.error(`[Sync] Error processing local-only entry ${c}:`,u)}for(const c of a)try{const u=await n.getImageMetadataById(c);await n.deleteImageMetadata(c),S.log(`[Sync] Soft-deleted local photo metadata ${c} not in sync data`)}catch(u){S.error(`[Sync] Error processing local-only photo metadata ${c}:`,u)}const l=r.getJournalById(e);if(l){const c=new Date(l.journalPropertiesUpdatedAt).getTime();if(new Date(t.journalProperties.updatedAt).getTime()>c){const f={name:t.journalProperties.name,color:t.journalProperties.color,journalPropertiesUpdatedAt:t.journalProperties.updatedAt};r.updateJournalMetadata(e,f),S.log(`[Sync] Updated journal properties for ${e} from sync data`)}else S.log(`[Sync] Kept local journal properties for ${e} (newer than sync data)`)}}const ko="PhojoCacheDB",gy=4,Mn="entries",Ko="imageMetadata",qo="photoBlobs",Vn="cacheStatus",Rf="saveQueue",br="pending-blob-operations",sr=new Map;function Qb(e){sr.has(e)&&(S.log(`[IDB] Removing database ${e} from connection cache`),sr.delete(e))}async function qi(e=ko){return new Promise((t,n)=>{const r=sr.get(e);if(r)try{if(r.objectStoreNames.length>0){t(r);return}}catch{S.warn(`[IDB] Existing database connection for ${e} is invalid, removing from cache`),sr.delete(e)}S.log(`[IDB] Opening database ${e} version ${gy}...`);const o=indexedDB.open(e,gy);o.onerror=s=>{var i;S.error(`[IDB] Database error opening ${e}:`,o.error),n(`IndexedDB error: ${(i=o.error)==null?void 0:i.message}`)},o.onsuccess=s=>{S.log(`[IDB] Database ${e} opened successfully.`);const i=o.result;i.onclose=()=>{S.warn(`[IDB] Database ${e} connection closed unexpectedly.`),sr.delete(e)},i.onversionchange=()=>{S.warn(`[IDB] Database ${e} version change detected. Closing connection.`),i.close(),sr.delete(e)},sr.set(e,i),t(i)},o.onupgradeneeded=s=>{S.log(`[IDB] Upgrading database ${e} from version ${s.oldVersion} to ${s.newVersion}.`);const i=o.result,a=s.oldVersion||0;if(!i.objectStoreNames.contains(Mn))i.createObjectStore(Mn).createIndex("byDate","date",{unique:!1}),S.log(`[IDB] Object store created: ${Mn} with index 'byDate'`);else if(a<2){const l=s.target.transaction.objectStore(Mn);l.indexNames.contains("byDate")||(l.createIndex("byDate","date",{unique:!1}),S.log(`[IDB] Added 'byDate' index to ${Mn} store`))}if(i.objectStoreNames.contains(Ko)||(i.createObjectStore(Ko),S.log(`[IDB] Object store created: ${Ko}`)),i.objectStoreNames.contains(qo)||(i.createObjectStore(qo),S.log(`[IDB] Object store created: ${qo}`)),!i.objectStoreNames.contains(Vn))i.createObjectStore(Vn).createIndex("lastAccessed","lastAccessed",{unique:!1}),S.log(`[IDB] Object store created: ${Vn} with index 'lastAccessed'`);else if(a<2){const l=s.target.transaction.objectStore(Vn);l.indexNames.contains("lastAccessed")||(l.createIndex("lastAccessed","lastAccessed",{unique:!1}),S.log(`[IDB] Re-created 'lastAccessed' index on ${Vn}`))}a>=3&&i.objectStoreNames.contains(Rf)&&(i.deleteObjectStore(Rf),S.log(`[IDB] Removed old object store: ${Rf}`)),a<4&&!i.objectStoreNames.contains(br)&&(i.createObjectStore(br),S.log(`[IDB] Object store created: ${br}`)),S.log(`[IDB] Database ${e} upgrade complete.`)},o.onblocked=()=>{S.warn(`[IDB] Database ${e} open request blocked, possibly due to open connections in other tabs.`),n(new Error("IndexedDB open request blocked. Please close other tabs using this app and retry."))}})}async function dr(e,t,n,r){if(!r||r.objectStoreNames.length===0){const o=r==null?void 0:r.name;throw o&&sr.has(o)&&(S.warn(`[IDB] Invalid database connection detected for ${o} before transaction, removing from cache`),sr.delete(o)),new Error("Invalid database connection")}return new Promise((o,s)=>{let i=null;try{i=r.transaction(e,t),i.onerror=a=>{S.error(`[IDB] Transaction error on stores ${JSON.stringify(e)}:`,i==null?void 0:i.error),s((i==null?void 0:i.error)||new Error("Unknown transaction error"))},i.onabort=a=>{S.warn(`[IDB] Transaction aborted on stores ${JSON.stringify(e)}:`,i==null?void 0:i.error),s((i==null?void 0:i.error)||new Error("Transaction aborted"))},n(i).then(o).catch(a=>{S.error(`[IDB] Error during transaction action on stores ${JSON.stringify(e)}:`,a);try{i==null||i.abort()}catch(l){S.error("[IDB] Error aborting transaction after action error:",l)}s(a)})}catch(a){S.error(`[IDB] Failed to initiate transaction on stores ${JSON.stringify(e)}:`,a),r!=null&&r.name&&(S.warn(`[IDB] Removing database ${r.name} from cache due to transaction failure`),sr.delete(r.name)),s(a)}})}async function Ul(e,t,n,r){await dr(t,"readwrite",o=>new Promise((s,i)=>{const l=o.objectStore(t).put(r,n);l.onsuccess=()=>s(),l.onerror=()=>i(l.error)}),e)}async function Yi(e,t,n){return dr(t,"readonly",r=>new Promise((o,s)=>{const a=r.objectStore(t).get(n);a.onsuccess=()=>o(a.result),a.onerror=()=>s(a.error)}),e)}async function f3(e,t,n){await dr(t,"readwrite",r=>new Promise((o,s)=>{const a=r.objectStore(t).delete(n);a.onsuccess=()=>o(),a.onerror=()=>s(a.error)}),e),S.log(`[IDB] Data delete successful for key '${String(n)}' in store '${t}'.`)}async function h3(e,t){return dr(Vn,"readonly",n=>new Promise((r,o)=>{try{const a=n.objectStore(Vn).index("lastAccessed").openCursor(),l=[];a.onsuccess=c=>{const u=c.target.result;if(u){const f=u.primaryKey,d=u.value;l.push({key:f,lastAccessed:d.lastAccessed,type:d.type}),l.length<t?u.continue():r(l)}else r(l)},a.onerror=()=>{S.error("[IDB] Error querying by lastAccessed:",a.error),o(a.error)}}catch(s){S.error("[IDB] Error setting up index query:",s),o(s)}}),e)}async function Ka(e,t,n){const r=n.toString().padStart(2,"0"),o=`${t}-${r}-01`,s=new Date(t,n,0).getDate(),i=`${t}-${r}-${s.toString().padStart(2,"0")}`;return dr(Mn,"readonly",async a=>new Promise((l,c)=>{try{const f=a.objectStore(Mn).index("byDate"),d=IDBKeyRange.bound(o,i),m=f.getAll(d);m.onsuccess=()=>{const g=m.result;if(g&&g.length>0){const y=g.map(E=>({...E,createdAt:typeof E.createdAt=="string"?E.createdAt:new Date(E.createdAt||0).toISOString(),updatedAt:typeof E.updatedAt=="string"?E.updatedAt:new Date(E.updatedAt||0).toISOString()}));l(y)}else l(void 0)},m.onerror=()=>{S.error(`[IDB] Failed to query entries for ${t}-${r}:`,m.error),c(m.error)}}catch(u){S.error("[IDB] Error querying entries by date:",u),c(u)}}),e)}async function Na(e,t){return dr(Mn,"readwrite",async n=>new Promise((r,o)=>{try{if(t.length===0){r();return}const s=n.objectStore(Mn);let i=0,a=null;const l=(c,u)=>{if(a)return;const f=c.target;if(c.type==="error"){a=f.error,S.error(`[IDB] Failed to store entry ${u}:`,a);try{n.abort()}catch{}o(a);return}c.type==="success"&&(i++,i===t.length&&(S.log(`[IDB] Successfully cached ${t.length} entries.`),r()))};for(const c of t){if(a)break;const u={...c,createdAt:typeof c.createdAt=="object"?c.createdAt.toISOString():c.createdAt,updatedAt:typeof c.updatedAt=="object"?c.updatedAt.toISOString():c.updatedAt},f=s.put(u,c.id);f.onsuccess=d=>l(d,c.id),f.onerror=d=>l(d,c.id)}}catch(s){try{n.abort()}catch{}o(s)}}),e)}async function p3(e){return dr(Ko,"readonly",async t=>new Promise((n,r)=>{const s=t.objectStore(Ko).getAll();s.onsuccess=()=>{const i=s.result;if(i&&i.length>0){const a=i.map(l=>({...l,createdAt:typeof l.createdAt=="object"?l.createdAt.toISOString():typeof l.createdAt=="string"?l.createdAt:new Date(l.createdAt||0).toISOString(),updatedAt:typeof l.updatedAt=="object"?l.updatedAt.toISOString():typeof l.updatedAt=="string"?l.updatedAt:new Date(l.updatedAt||0).toISOString()}));n(a)}else n(void 0)},s.onerror=()=>{S.error("[IDB] Failed to get all metadata:",s.error),r(s.error)}}),e)}async function Km(e){return dr(Mn,"readonly",async t=>new Promise((n,r)=>{const s=t.objectStore(Mn).getAll();s.onsuccess=()=>{const i=s.result;if(i&&i.length>0){const a=i.map(l=>({...l,createdAt:typeof l.createdAt=="object"?l.createdAt.toISOString():typeof l.createdAt=="string"?l.createdAt:new Date(l.createdAt||0).toISOString(),updatedAt:typeof l.updatedAt=="object"?l.updatedAt.toISOString():typeof l.updatedAt=="string"?l.updatedAt:new Date(l.updatedAt||0).toISOString()}));n(a)}else n(void 0)},s.onerror=()=>{S.error("[IDB] Failed to get all entries:",s.error),r(s.error)}}),e)}async function m3(e,t){return dr(Ko,"readwrite",async n=>new Promise((r,o)=>{try{if(t.length===0){r();return}const s=n.objectStore(Ko);let i=0,a=null;const l=(c,u)=>{if(a)return;const f=c.target;if(c.type==="error"){a=f.error,S.error(`[IDB] Failed to store metadata ${u}:`,a);try{n.abort()}catch{}o(a);return}c.type==="success"&&(i++,i===t.length&&(S.log(`[IDB] Successfully cached ${t.length} metadata entries.`),r()))};for(const c of t){if(a)break;const u={...c,createdAt:typeof c.createdAt=="object"?c.createdAt.toISOString():typeof c.createdAt=="string"?c.createdAt:new Date(c.createdAt||0).toISOString()},f=s.put(u,c.id);f.onsuccess=d=>l(d,c.id),f.onerror=d=>l(d,c.id)}}catch(s){S.error("[IDB] Error caching metadata:",s);try{n.abort()}catch{}o(s)}}),e)}async function Sc(e,t){return Yi(e,qo,t)}async function bc(e,t,n,r){const o=Date.now(),s={blob:n,timestamp:o,lastAccessed:o,type:r},i={lastAccessed:o,size:n.size,type:r};await dr([qo,Vn],"readwrite",a=>new Promise(async(l,c)=>{try{const u=a.objectStore(qo),f=a.objectStore(Vn),d=new Promise((g,y)=>{const E=u.put(s,t);E.onsuccess=()=>g(),E.onerror=()=>y(E.error)}),m=new Promise((g,y)=>{const E=f.put(i,t);E.onsuccess=()=>g(),E.onerror=()=>y(E.error)});await Promise.all([d,m]),l()}catch(u){S.error(`[IDB] Error caching blob/status for ${t}:`,u),c(u)}}),e)}async function Gh(e,t){await dr([qo,Vn],"readwrite",n=>new Promise(async(r,o)=>{try{const s=n.objectStore(qo),i=n.objectStore(Vn),a=new Promise((c,u)=>{const f=s.delete(t);f.onsuccess=()=>c(),f.onerror=()=>u(f.error)}),l=new Promise((c,u)=>{const f=i.delete(t);f.onsuccess=()=>c(),f.onerror=()=>u(f.error)});await Promise.all([a,l]),r()}catch(s){S.error(`[IDB] Error deleting blob/status for ${t}:`,s),o(s)}}),e),S.log(`[IDB] Deleted blob and status for ${t}`)}async function Dc(e,t){try{const n=await Yi(e,Vn,t);if(!n)return;const r={...n,lastAccessed:Date.now()};await Ul(e,Vn,t,r)}catch(n){S.error(`[IDB] Error updating access time for ${t}:`,n)}}async function g3(e){const t=sr.get(e);return t&&(S.log(`[IDB] Closing connection to ${e} before deletion`),t.close(),sr.delete(e)),new Promise((n,r)=>{S.log(`[IDB] Deleting database ${e}...`);const o=indexedDB.deleteDatabase(e);o.onsuccess=()=>{S.log(`[IDB] Database ${e} deleted successfully`),n()},o.onerror=()=>{S.error(`[IDB] Error deleting database ${e}:`,o.error),r(o.error)},o.onblocked=()=>{S.warn(`[IDB] Database deletion blocked for ${e}. Some connections might still be open.`),r(new Error(`Database deletion blocked for ${e}. Some connections might still be open.`))}})}async function xy(e,t){if(!t.id)throw new Error("Entry must have an ID");const n={...t,createdAt:t.createdAt instanceof Date?t.createdAt.toISOString():t.createdAt,updatedAt:t.updatedAt instanceof Date?t.updatedAt.toISOString():t.updatedAt};if(await Ul(e,Mn,n.id,n),n.date){const r=new Date(n.date),o=r.getFullYear(),s=r.getMonth()+1;try{const i=await Ka(e,o,s)||[];i.findIndex(l=>l.id===n.id)===-1?(i.push(n),await Na(e,i),S.log(`[IDB] Added entry ${n.id} to ${o}-${s} cache`)):S.log(`[IDB] Entry ${n.id} already in ${o}-${s} cache`)}catch(i){S.warn("[IDB] Error updating month cache for new entry:",i)}}return n.id}async function Mf(e,t,n){if(!t.id||!n.id)throw new Error("Entry must have an ID");const r={...t,createdAt:t.createdAt instanceof Date?t.createdAt.toISOString():t.createdAt,updatedAt:t.updatedAt instanceof Date?t.updatedAt.toISOString():t.updatedAt};await Ul(e,Mn,r.id,r);const o=new Date(n.date),s=o.getFullYear(),i=o.getMonth()+1,a=new Date(r.date),l=a.getFullYear(),c=a.getMonth()+1,u=s!==l||i!==c;try{if(u){const f=await Ka(e,s,i)||[],d=f.filter(y=>y.id!==r.id);d.length!==f.length&&(await Na(e,d),S.log(`[IDB] Removed entry ${r.id} from ${s}-${i} cache`));const m=await Ka(e,l,c)||[],g=m.findIndex(y=>y.id===r.id);g===-1?(m.push(r),await Na(e,m),S.log(`[IDB] Added entry ${r.id} to ${l}-${c} cache`)):(m[g]=r,await Na(e,m),S.log(`[IDB] Updated entry ${r.id} in ${l}-${c} cache`))}else{const f=await Ka(e,l,c)||[],d=f.findIndex(m=>m.id===r.id);d!==-1&&(f[d]=r,await Na(e,f),S.log(`[IDB] Updated entry ${r.id} in ${l}-${c} cache`))}}catch(f){S.warn("[IDB] Error updating month cache for updated entry:",f)}return r.id}qi(ko).catch(e=>S.error("[IDB] Initial DB open failed:",e));function Hl(e){return e.objectStoreNames.contains(br)}async function Kh(e,t,n,r){if(!Hl(e)){console.warn(`Cannot add blob to queue: sync queue store doesn't exist in database ${e.name}`);return}const o={journalId:t,contentHash:n.contentHash,extension:n.extension,type:r,timestamp:new Date().toISOString(),attempts:0};try{await Ul(e,br,n.contentHash,o)}catch(s){throw console.error("Error adding blob to sync queue:",s),s}}async function x3(e,t){try{if(!Hl(e))return[];const n=[];return await dr(br,"readonly",async r=>{const s=r.objectStore(br).openCursor();return new Promise((i,a)=>{s.onsuccess=l=>{const c=l.target.result;c?(n.push(c.value),c.continue()):i()},s.onerror=()=>{a(new Error("Error iterating cursors in sync queue"))}})},e),n}catch(n){return console.error("Error getting pending blobs:",n),[]}}async function vy(e,t,n){try{if(!Hl(e))return;await f3(e,br,n)}catch(r){throw console.error("Error removing blob from sync queue:",r),r}}async function v3(e,t,n){try{if(!Hl(e))return;const r=await Yi(e,br,n);r&&(r.attempts++,r.lastAttempt=new Date().toISOString(),await Ul(e,br,n,r))}catch(r){throw console.error("Error incrementing blob attempt:",r),r}}async function yy(e,t,n,r){try{if(!Hl(e))return!1;const o=await Yi(e,br,n);return!!o&&o.type===r}catch(o){return console.error("Error checking if blob is in queue:",o),!1}}var Zb={exports:{}};function y3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nf={exports:{}};const w3={},E3=Object.freeze(Object.defineProperty({__proto__:null,default:w3},Symbol.toStringTag,{value:"Module"})),C3=n4(E3);var wy;function ze(){return wy||(wy=1,function(e,t){(function(n,r){e.exports=r()})(Be,function(){var n=n||function(r,o){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Be<"u"&&Be.crypto&&(s=Be.crypto),!s&&typeof y3=="function")try{s=C3}catch{}var i=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function x(){}return function(v){var C;return x.prototype=v,C=new x,x.prototype=null,C}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(x){var v=a(this);return x&&v.mixIn(x),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var v in x)x.hasOwnProperty(v)&&(this[v]=x[v]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=u.extend({init:function(x,v){x=this.words=x||[],v!=o?this.sigBytes=v:this.sigBytes=x.length*4},toString:function(x){return(x||m).stringify(this)},concat:function(x){var v=this.words,C=x.words,b=this.sigBytes,D=x.sigBytes;if(this.clamp(),b%4)for(var A=0;A<D;A++){var P=C[A>>>2]>>>24-A%4*8&255;v[b+A>>>2]|=P<<24-(b+A)%4*8}else for(var F=0;F<D;F+=4)v[b+F>>>2]=C[F>>>2];return this.sigBytes+=D,this},clamp:function(){var x=this.words,v=this.sigBytes;x[v>>>2]&=4294967295<<32-v%4*8,x.length=r.ceil(v/4)},clone:function(){var x=u.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var v=[],C=0;C<x;C+=4)v.push(i());return new f.init(v,x)}}),d=l.enc={},m=d.Hex={stringify:function(x){for(var v=x.words,C=x.sigBytes,b=[],D=0;D<C;D++){var A=v[D>>>2]>>>24-D%4*8&255;b.push((A>>>4).toString(16)),b.push((A&15).toString(16))}return b.join("")},parse:function(x){for(var v=x.length,C=[],b=0;b<v;b+=2)C[b>>>3]|=parseInt(x.substr(b,2),16)<<24-b%8*4;return new f.init(C,v/2)}},g=d.Latin1={stringify:function(x){for(var v=x.words,C=x.sigBytes,b=[],D=0;D<C;D++){var A=v[D>>>2]>>>24-D%4*8&255;b.push(String.fromCharCode(A))}return b.join("")},parse:function(x){for(var v=x.length,C=[],b=0;b<v;b++)C[b>>>2]|=(x.charCodeAt(b)&255)<<24-b%4*8;return new f.init(C,v)}},y=d.Utf8={stringify:function(x){try{return decodeURIComponent(escape(g.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return g.parse(unescape(encodeURIComponent(x)))}},E=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=y.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var v,C=this._data,b=C.words,D=C.sigBytes,A=this.blockSize,P=A*4,F=D/P;x?F=r.ceil(F):F=r.max((F|0)-this._minBufferSize,0);var k=F*A,T=r.min(k*4,D);if(k){for(var M=0;M<k;M+=A)this._doProcessBlock(b,M);v=b.splice(0,k),C.sigBytes-=T}return new f.init(v,T)},clone:function(){var x=u.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});c.Hasher=E.extend({cfg:u.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var v=this._doFinalize();return v},blockSize:16,_createHelper:function(x){return function(v,C){return new x.init(C).finalize(v)}},_createHmacHelper:function(x){return function(v,C){return new w.HMAC.init(x,C).finalize(v)}}});var w=l.algo={};return l}(Math);return n})}(Nf)),Nf.exports}var If={exports:{}},Ey;function kd(){return Ey||(Ey=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.Base,a=s.WordArray,l=o.x64={};l.Word=i.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=i.extend({init:function(c,u){c=this.words=c||[],u!=r?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,f=[],d=0;d<u;d++){var m=c[d];f.push(m.high),f.push(m.low)}return a.create(f,this.sigBytes)},clone:function(){for(var c=i.clone.call(this),u=c.words=this.words.slice(0),f=u.length,d=0;d<f;d++)u[d]=u[d].clone();return c}})}(),n})}(If)),If.exports}var jf={exports:{}},Cy;function S3(){return Cy||(Cy=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,o=r.lib,s=o.WordArray,i=s.init,a=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],f=0;f<c;f++)u[f>>>2]|=l[f]<<24-f%4*8;i.call(this,u,c)}else i.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(jf)),jf.exports}var _f={exports:{}},Sy;function b3(){return Sy||(Sy=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.enc;i.Utf16=i.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],d=0;d<u;d+=2){var m=c[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(m))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=l.charCodeAt(f)<<16-f%2*16;return s.create(u,c*2)}},i.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],d=0;d<u;d+=2){var m=a(c[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(m))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=a(l.charCodeAt(f)<<16-f%2*16);return s.create(u,c*2)}};function a(l){return l<<8&4278255360|l>>>8&16711935}}(),n.enc.Utf16})}(_f)),_f.exports}var Bf={exports:{}},by;function Vs(){return by||(by=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.enc;i.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,f=this._map;l.clamp();for(var d=[],m=0;m<u;m+=3)for(var g=c[m>>>2]>>>24-m%4*8&255,y=c[m+1>>>2]>>>24-(m+1)%4*8&255,E=c[m+2>>>2]>>>24-(m+2)%4*8&255,w=g<<16|y<<8|E,x=0;x<4&&m+x*.75<u;x++)d.push(f.charAt(w>>>6*(3-x)&63));var v=f.charAt(64);if(v)for(;d.length%4;)d.push(v);return d.join("")},parse:function(l){var c=l.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<u.length;d++)f[u.charCodeAt(d)]=d}var m=u.charAt(64);if(m){var g=l.indexOf(m);g!==-1&&(c=g)}return a(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var f=[],d=0,m=0;m<c;m++)if(m%4){var g=u[l.charCodeAt(m-1)]<<m%4*2,y=u[l.charCodeAt(m)]>>>6-m%4*2,E=g|y;f[d>>>2]|=E<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(Bf)),Bf.exports}var Lf={exports:{}},Dy;function D3(){return Dy||(Dy=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.enc;i.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,f=l.sigBytes,d=c?this._safe_map:this._map;l.clamp();for(var m=[],g=0;g<f;g+=3)for(var y=u[g>>>2]>>>24-g%4*8&255,E=u[g+1>>>2]>>>24-(g+1)%4*8&255,w=u[g+2>>>2]>>>24-(g+2)%4*8&255,x=y<<16|E<<8|w,v=0;v<4&&g+v*.75<f;v++)m.push(d.charAt(x>>>6*(3-v)&63));var C=d.charAt(64);if(C)for(;m.length%4;)m.push(C);return m.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,f=c?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var m=0;m<f.length;m++)d[f.charCodeAt(m)]=m}var g=f.charAt(64);if(g){var y=l.indexOf(g);y!==-1&&(u=y)}return a(l,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var f=[],d=0,m=0;m<c;m++)if(m%4){var g=u[l.charCodeAt(m-1)]<<m%4*2,y=u[l.charCodeAt(m)]>>>6-m%4*2,E=g|y;f[d>>>2]|=E<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(Lf)),Lf.exports}var Of={exports:{}},Ay;function Us(){return Ay||(Ay=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.algo,c=[];(function(){for(var y=0;y<64;y++)c[y]=r.abs(r.sin(y+1))*4294967296|0})();var u=l.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,E){for(var w=0;w<16;w++){var x=E+w,v=y[x];y[x]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var C=this._hash.words,b=y[E+0],D=y[E+1],A=y[E+2],P=y[E+3],F=y[E+4],k=y[E+5],T=y[E+6],M=y[E+7],_=y[E+8],O=y[E+9],W=y[E+10],j=y[E+11],B=y[E+12],R=y[E+13],N=y[E+14],V=y[E+15],I=C[0],L=C[1],H=C[2],$=C[3];I=f(I,L,H,$,b,7,c[0]),$=f($,I,L,H,D,12,c[1]),H=f(H,$,I,L,A,17,c[2]),L=f(L,H,$,I,P,22,c[3]),I=f(I,L,H,$,F,7,c[4]),$=f($,I,L,H,k,12,c[5]),H=f(H,$,I,L,T,17,c[6]),L=f(L,H,$,I,M,22,c[7]),I=f(I,L,H,$,_,7,c[8]),$=f($,I,L,H,O,12,c[9]),H=f(H,$,I,L,W,17,c[10]),L=f(L,H,$,I,j,22,c[11]),I=f(I,L,H,$,B,7,c[12]),$=f($,I,L,H,R,12,c[13]),H=f(H,$,I,L,N,17,c[14]),L=f(L,H,$,I,V,22,c[15]),I=d(I,L,H,$,D,5,c[16]),$=d($,I,L,H,T,9,c[17]),H=d(H,$,I,L,j,14,c[18]),L=d(L,H,$,I,b,20,c[19]),I=d(I,L,H,$,k,5,c[20]),$=d($,I,L,H,W,9,c[21]),H=d(H,$,I,L,V,14,c[22]),L=d(L,H,$,I,F,20,c[23]),I=d(I,L,H,$,O,5,c[24]),$=d($,I,L,H,N,9,c[25]),H=d(H,$,I,L,P,14,c[26]),L=d(L,H,$,I,_,20,c[27]),I=d(I,L,H,$,R,5,c[28]),$=d($,I,L,H,A,9,c[29]),H=d(H,$,I,L,M,14,c[30]),L=d(L,H,$,I,B,20,c[31]),I=m(I,L,H,$,k,4,c[32]),$=m($,I,L,H,_,11,c[33]),H=m(H,$,I,L,j,16,c[34]),L=m(L,H,$,I,N,23,c[35]),I=m(I,L,H,$,D,4,c[36]),$=m($,I,L,H,F,11,c[37]),H=m(H,$,I,L,M,16,c[38]),L=m(L,H,$,I,W,23,c[39]),I=m(I,L,H,$,R,4,c[40]),$=m($,I,L,H,b,11,c[41]),H=m(H,$,I,L,P,16,c[42]),L=m(L,H,$,I,T,23,c[43]),I=m(I,L,H,$,O,4,c[44]),$=m($,I,L,H,B,11,c[45]),H=m(H,$,I,L,V,16,c[46]),L=m(L,H,$,I,A,23,c[47]),I=g(I,L,H,$,b,6,c[48]),$=g($,I,L,H,M,10,c[49]),H=g(H,$,I,L,N,15,c[50]),L=g(L,H,$,I,k,21,c[51]),I=g(I,L,H,$,B,6,c[52]),$=g($,I,L,H,P,10,c[53]),H=g(H,$,I,L,W,15,c[54]),L=g(L,H,$,I,D,21,c[55]),I=g(I,L,H,$,_,6,c[56]),$=g($,I,L,H,V,10,c[57]),H=g(H,$,I,L,T,15,c[58]),L=g(L,H,$,I,R,21,c[59]),I=g(I,L,H,$,F,6,c[60]),$=g($,I,L,H,j,10,c[61]),H=g(H,$,I,L,A,15,c[62]),L=g(L,H,$,I,O,21,c[63]),C[0]=C[0]+I|0,C[1]=C[1]+L|0,C[2]=C[2]+H|0,C[3]=C[3]+$|0},_doFinalize:function(){var y=this._data,E=y.words,w=this._nDataBytes*8,x=y.sigBytes*8;E[x>>>5]|=128<<24-x%32;var v=r.floor(w/4294967296),C=w;E[(x+64>>>9<<4)+15]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E[(x+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,y.sigBytes=(E.length+1)*4,this._process();for(var b=this._hash,D=b.words,A=0;A<4;A++){var P=D[A];D[A]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return b},clone:function(){var y=a.clone.call(this);return y._hash=this._hash.clone(),y}});function f(y,E,w,x,v,C,b){var D=y+(E&w|~E&x)+v+b;return(D<<C|D>>>32-C)+E}function d(y,E,w,x,v,C,b){var D=y+(E&x|w&~x)+v+b;return(D<<C|D>>>32-C)+E}function m(y,E,w,x,v,C,b){var D=y+(E^w^x)+v+b;return(D<<C|D>>>32-C)+E}function g(y,E,w,x,v,C,b){var D=y+(w^(E|~x))+v+b;return(D<<C|D>>>32-C)+E}o.MD5=a._createHelper(u),o.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5})}(Of)),Of.exports}var $f={exports:{}},Py;function e2(){return Py||(Py=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=o.Hasher,a=r.algo,l=[],c=a.SHA1=i.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var d=this._hash.words,m=d[0],g=d[1],y=d[2],E=d[3],w=d[4],x=0;x<80;x++){if(x<16)l[x]=u[f+x]|0;else{var v=l[x-3]^l[x-8]^l[x-14]^l[x-16];l[x]=v<<1|v>>>31}var C=(m<<5|m>>>27)+w+l[x];x<20?C+=(g&y|~g&E)+1518500249:x<40?C+=(g^y^E)+1859775393:x<60?C+=(g&y|g&E|y&E)-1894007588:C+=(g^y^E)-899497514,w=E,E=y,y=g<<30|g>>>2,g=m,m=C}d[0]=d[0]+m|0,d[1]=d[1]+g|0,d[2]=d[2]+y|0,d[3]=d[3]+E|0,d[4]=d[4]+w|0},_doFinalize:function(){var u=this._data,f=u.words,d=this._nDataBytes*8,m=u.sigBytes*8;return f[m>>>5]|=128<<24-m%32,f[(m+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(m+64>>>9<<4)+15]=d,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=i.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=i._createHelper(c),r.HmacSHA1=i._createHmacHelper(c)}(),n.SHA1})}($f)),$f.exports}var zf={exports:{}},ky;function qm(){return ky||(ky=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.algo,c=[],u=[];(function(){function m(w){for(var x=r.sqrt(w),v=2;v<=x;v++)if(!(w%v))return!1;return!0}function g(w){return(w-(w|0))*4294967296|0}for(var y=2,E=0;E<64;)m(y)&&(E<8&&(c[E]=g(r.pow(y,1/2))),u[E]=g(r.pow(y,1/3)),E++),y++})();var f=[],d=l.SHA256=a.extend({_doReset:function(){this._hash=new i.init(c.slice(0))},_doProcessBlock:function(m,g){for(var y=this._hash.words,E=y[0],w=y[1],x=y[2],v=y[3],C=y[4],b=y[5],D=y[6],A=y[7],P=0;P<64;P++){if(P<16)f[P]=m[g+P]|0;else{var F=f[P-15],k=(F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3,T=f[P-2],M=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;f[P]=k+f[P-7]+M+f[P-16]}var _=C&b^~C&D,O=E&w^E&x^w&x,W=(E<<30|E>>>2)^(E<<19|E>>>13)^(E<<10|E>>>22),j=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),B=A+j+_+u[P]+f[P],R=W+O;A=D,D=b,b=C,C=v+B|0,v=x,x=w,w=E,E=B+R|0}y[0]=y[0]+E|0,y[1]=y[1]+w|0,y[2]=y[2]+x|0,y[3]=y[3]+v|0,y[4]=y[4]+C|0,y[5]=y[5]+b|0,y[6]=y[6]+D|0,y[7]=y[7]+A|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,E=m.sigBytes*8;return g[E>>>5]|=128<<24-E%32,g[(E+64>>>9<<4)+14]=r.floor(y/4294967296),g[(E+64>>>9<<4)+15]=y,m.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});o.SHA256=a._createHelper(d),o.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(zf)),zf.exports}var Vf={exports:{}},Ty;function A3(){return Ty||(Ty=1,function(e,t){(function(n,r,o){e.exports=r(ze(),qm())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=r.algo,a=i.SHA256,l=i.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=4,c}});r.SHA224=a._createHelper(l),r.HmacSHA224=a._createHmacHelper(l)}(),n.SHA224})}(Vf)),Vf.exports}var Uf={exports:{}},Fy;function t2(){return Fy||(Fy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),kd())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.Hasher,i=r.x64,a=i.Word,l=i.WordArray,c=r.algo;function u(){return a.create.apply(a,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],d=[];(function(){for(var g=0;g<80;g++)d[g]=u()})();var m=c.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(g,y){for(var E=this._hash.words,w=E[0],x=E[1],v=E[2],C=E[3],b=E[4],D=E[5],A=E[6],P=E[7],F=w.high,k=w.low,T=x.high,M=x.low,_=v.high,O=v.low,W=C.high,j=C.low,B=b.high,R=b.low,N=D.high,V=D.low,I=A.high,L=A.low,H=P.high,$=P.low,he=F,de=k,Y=T,re=M,fe=_,ke=O,Ae=W,ne=j,ve=B,ye=R,pe=N,He=V,ct=I,qe=L,Ze=H,ut=$,ot=0;ot<80;ot++){var et,Tt,Ee=d[ot];if(ot<16)Tt=Ee.high=g[y+ot*2]|0,et=Ee.low=g[y+ot*2+1]|0;else{var We=d[ot-15],st=We.high,Ft=We.low,Pn=(st>>>1|Ft<<31)^(st>>>8|Ft<<24)^st>>>7,Yn=(Ft>>>1|st<<31)^(Ft>>>8|st<<24)^(Ft>>>7|st<<25),$t=d[ot-2],Je=$t.high,G=$t.low,q=(Je>>>19|G<<13)^(Je<<3|G>>>29)^Je>>>6,oe=(G>>>19|Je<<13)^(G<<3|Je>>>29)^(G>>>6|Je<<26),le=d[ot-7],me=le.high,je=le.low,Te=d[ot-16],Ye=Te.high,pt=Te.low;et=Yn+je,Tt=Pn+me+(et>>>0<Yn>>>0?1:0),et=et+oe,Tt=Tt+q+(et>>>0<oe>>>0?1:0),et=et+pt,Tt=Tt+Ye+(et>>>0<pt>>>0?1:0),Ee.high=Tt,Ee.low=et}var Jt=ve&pe^~ve&ct,jt=ye&He^~ye&qe,on=he&Y^he&fe^Y&fe,Gt=de&re^de&ke^re&ke,xn=(he>>>28|de<<4)^(he<<30|de>>>2)^(he<<25|de>>>7),Kt=(de>>>28|he<<4)^(de<<30|he>>>2)^(de<<25|he>>>7),zt=(ve>>>14|ye<<18)^(ve>>>18|ye<<14)^(ve<<23|ye>>>9),Xe=(ye>>>14|ve<<18)^(ye>>>18|ve<<14)^(ye<<23|ve>>>9),Xn=f[ot],hr=Xn.high,hs=Xn.low,qt=ut+Xe,sn=Ze+zt+(qt>>>0<ut>>>0?1:0),qt=qt+jt,sn=sn+Jt+(qt>>>0<jt>>>0?1:0),qt=qt+hs,sn=sn+hr+(qt>>>0<hs>>>0?1:0),qt=qt+et,sn=sn+Tt+(qt>>>0<et>>>0?1:0),te=Kt+Gt,Z=xn+on+(te>>>0<Kt>>>0?1:0);Ze=ct,ut=qe,ct=pe,qe=He,pe=ve,He=ye,ye=ne+qt|0,ve=Ae+sn+(ye>>>0<ne>>>0?1:0)|0,Ae=fe,ne=ke,fe=Y,ke=re,Y=he,re=de,de=qt+te|0,he=sn+Z+(de>>>0<qt>>>0?1:0)|0}k=w.low=k+de,w.high=F+he+(k>>>0<de>>>0?1:0),M=x.low=M+re,x.high=T+Y+(M>>>0<re>>>0?1:0),O=v.low=O+ke,v.high=_+fe+(O>>>0<ke>>>0?1:0),j=C.low=j+ne,C.high=W+Ae+(j>>>0<ne>>>0?1:0),R=b.low=R+ye,b.high=B+ve+(R>>>0<ye>>>0?1:0),V=D.low=V+He,D.high=N+pe+(V>>>0<He>>>0?1:0),L=A.low=L+qe,A.high=I+ct+(L>>>0<qe>>>0?1:0),$=P.low=$+ut,P.high=H+Ze+($>>>0<ut>>>0?1:0)},_doFinalize:function(){var g=this._data,y=g.words,E=this._nDataBytes*8,w=g.sigBytes*8;y[w>>>5]|=128<<24-w%32,y[(w+128>>>10<<5)+30]=Math.floor(E/4294967296),y[(w+128>>>10<<5)+31]=E,g.sigBytes=y.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});r.SHA512=s._createHelper(m),r.HmacSHA512=s._createHmacHelper(m)}(),n.SHA512})}(Uf)),Uf.exports}var Hf={exports:{}},Ry;function P3(){return Ry||(Ry=1,function(e,t){(function(n,r,o){e.exports=r(ze(),kd(),t2())})(Be,function(n){return function(){var r=n,o=r.x64,s=o.Word,i=o.WordArray,a=r.algo,l=a.SHA512,c=a.SHA384=l.extend({_doReset:function(){this._hash=new i.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=l._createHelper(c),r.HmacSHA384=l._createHmacHelper(c)}(),n.SHA384})}(Hf)),Hf.exports}var Wf={exports:{}},My;function k3(){return My||(My=1,function(e,t){(function(n,r,o){e.exports=r(ze(),kd())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.x64,c=l.Word,u=o.algo,f=[],d=[],m=[];(function(){for(var E=1,w=0,x=0;x<24;x++){f[E+5*w]=(x+1)*(x+2)/2%64;var v=w%5,C=(2*E+3*w)%5;E=v,w=C}for(var E=0;E<5;E++)for(var w=0;w<5;w++)d[E+5*w]=w+(2*E+3*w)%5*5;for(var b=1,D=0;D<24;D++){for(var A=0,P=0,F=0;F<7;F++){if(b&1){var k=(1<<F)-1;k<32?P^=1<<k:A^=1<<k-32}b&128?b=b<<1^113:b<<=1}m[D]=c.create(A,P)}})();var g=[];(function(){for(var E=0;E<25;E++)g[E]=c.create()})();var y=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var E=this._state=[],w=0;w<25;w++)E[w]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(E,w){for(var x=this._state,v=this.blockSize/2,C=0;C<v;C++){var b=E[w+2*C],D=E[w+2*C+1];b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var A=x[C];A.high^=D,A.low^=b}for(var P=0;P<24;P++){for(var F=0;F<5;F++){for(var k=0,T=0,M=0;M<5;M++){var A=x[F+5*M];k^=A.high,T^=A.low}var _=g[F];_.high=k,_.low=T}for(var F=0;F<5;F++)for(var O=g[(F+4)%5],W=g[(F+1)%5],j=W.high,B=W.low,k=O.high^(j<<1|B>>>31),T=O.low^(B<<1|j>>>31),M=0;M<5;M++){var A=x[F+5*M];A.high^=k,A.low^=T}for(var R=1;R<25;R++){var k,T,A=x[R],N=A.high,V=A.low,I=f[R];I<32?(k=N<<I|V>>>32-I,T=V<<I|N>>>32-I):(k=V<<I-32|N>>>64-I,T=N<<I-32|V>>>64-I);var L=g[d[R]];L.high=k,L.low=T}var H=g[0],$=x[0];H.high=$.high,H.low=$.low;for(var F=0;F<5;F++)for(var M=0;M<5;M++){var R=F+5*M,A=x[R],he=g[R],de=g[(F+1)%5+5*M],Y=g[(F+2)%5+5*M];A.high=he.high^~de.high&Y.high,A.low=he.low^~de.low&Y.low}var A=x[0],re=m[P];A.high^=re.high,A.low^=re.low}},_doFinalize:function(){var E=this._data,w=E.words;this._nDataBytes*8;var x=E.sigBytes*8,v=this.blockSize*32;w[x>>>5]|=1<<24-x%32,w[(r.ceil((x+1)/v)*v>>>5)-1]|=128,E.sigBytes=w.length*4,this._process();for(var C=this._state,b=this.cfg.outputLength/8,D=b/8,A=[],P=0;P<D;P++){var F=C[P],k=F.high,T=F.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,A.push(T),A.push(k)}return new i.init(A,b)},clone:function(){for(var E=a.clone.call(this),w=E._state=this._state.slice(0),x=0;x<25;x++)w[x]=w[x].clone();return E}});o.SHA3=a._createHelper(y),o.HmacSHA3=a._createHmacHelper(y)}(Math),n.SHA3})}(Wf)),Wf.exports}var Jf={exports:{}},Ny;function T3(){return Ny||(Ny=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var o=n,s=o.lib,i=s.WordArray,a=s.Hasher,l=o.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=i.create([0,1518500249,1859775393,2400959708,2840853838]),g=i.create([1352829926,1548603684,1836072691,2053994217,0]),y=l.RIPEMD160=a.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,A){for(var P=0;P<16;P++){var F=A+P,k=D[F];D[F]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var T=this._hash.words,M=m.words,_=g.words,O=c.words,W=u.words,j=f.words,B=d.words,R,N,V,I,L,H,$,he,de,Y;H=R=T[0],$=N=T[1],he=V=T[2],de=I=T[3],Y=L=T[4];for(var re,P=0;P<80;P+=1)re=R+D[A+O[P]]|0,P<16?re+=E(N,V,I)+M[0]:P<32?re+=w(N,V,I)+M[1]:P<48?re+=x(N,V,I)+M[2]:P<64?re+=v(N,V,I)+M[3]:re+=C(N,V,I)+M[4],re=re|0,re=b(re,j[P]),re=re+L|0,R=L,L=I,I=b(V,10),V=N,N=re,re=H+D[A+W[P]]|0,P<16?re+=C($,he,de)+_[0]:P<32?re+=v($,he,de)+_[1]:P<48?re+=x($,he,de)+_[2]:P<64?re+=w($,he,de)+_[3]:re+=E($,he,de)+_[4],re=re|0,re=b(re,B[P]),re=re+Y|0,H=Y,Y=de,de=b(he,10),he=$,$=re;re=T[1]+V+de|0,T[1]=T[2]+I+Y|0,T[2]=T[3]+L+H|0,T[3]=T[4]+R+$|0,T[4]=T[0]+N+he|0,T[0]=re},_doFinalize:function(){var D=this._data,A=D.words,P=this._nDataBytes*8,F=D.sigBytes*8;A[F>>>5]|=128<<24-F%32,A[(F+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D.sigBytes=(A.length+1)*4,this._process();for(var k=this._hash,T=k.words,M=0;M<5;M++){var _=T[M];T[M]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return k},clone:function(){var D=a.clone.call(this);return D._hash=this._hash.clone(),D}});function E(D,A,P){return D^A^P}function w(D,A,P){return D&A|~D&P}function x(D,A,P){return(D|~A)^P}function v(D,A,P){return D&P|A&~P}function C(D,A,P){return D^(A|~P)}function b(D,A){return D<<A|D>>>32-A}o.RIPEMD160=a._createHelper(y),o.HmacRIPEMD160=a._createHmacHelper(y)}(),n.RIPEMD160})}(Jf)),Jf.exports}var Gf={exports:{}},Iy;function Ym(){return Iy||(Iy=1,function(e,t){(function(n,r){e.exports=r(ze())})(Be,function(n){(function(){var r=n,o=r.lib,s=o.Base,i=r.enc,a=i.Utf8,l=r.algo;l.HMAC=s.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=a.parse(u));var f=c.blockSize,d=f*4;u.sigBytes>d&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),g=this._iKey=u.clone(),y=m.words,E=g.words,w=0;w<f;w++)y[w]^=1549556828,E[w]^=909522486;m.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,f=u.finalize(c);u.reset();var d=u.finalize(this._oKey.clone().concat(f));return d}})})()})}(Gf)),Gf.exports}var Kf={exports:{}},jy;function F3(){return jy||(jy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),qm(),Ym())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.Base,i=o.WordArray,a=r.algo,l=a.SHA256,c=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var m=this.cfg,g=c.create(m.hasher,f),y=i.create(),E=i.create([1]),w=y.words,x=E.words,v=m.keySize,C=m.iterations;w.length<v;){var b=g.update(d).finalize(E);g.reset();for(var D=b.words,A=D.length,P=b,F=1;F<C;F++){P=g.finalize(P),g.reset();for(var k=P.words,T=0;T<A;T++)D[T]^=k[T]}y.concat(b),x[0]++}return y.sigBytes=v*4,y}});r.PBKDF2=function(f,d,m){return u.create(m).compute(f,d)}}(),n.PBKDF2})}(Kf)),Kf.exports}var qf={exports:{}},_y;function ls(){return _y||(_y=1,function(e,t){(function(n,r,o){e.exports=r(ze(),e2(),Ym())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.Base,i=o.WordArray,a=r.algo,l=a.MD5,c=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var d,m=this.cfg,g=m.hasher.create(),y=i.create(),E=y.words,w=m.keySize,x=m.iterations;E.length<w;){d&&g.update(d),d=g.update(u).finalize(f),g.reset();for(var v=1;v<x;v++)d=g.finalize(d),g.reset();y.concat(d)}return y.sigBytes=w*4,y}});r.EvpKDF=function(u,f,d){return c.create(d).compute(u,f)}}(),n.EvpKDF})}(qf)),qf.exports}var Yf={exports:{}},By;function Wt(){return By||(By=1,function(e,t){(function(n,r,o){e.exports=r(ze(),ls())})(Be,function(n){n.lib.Cipher||function(r){var o=n,s=o.lib,i=s.Base,a=s.WordArray,l=s.BufferedBlockAlgorithm,c=o.enc;c.Utf8;var u=c.Base64,f=o.algo,d=f.EvpKDF,m=s.Cipher=l.extend({cfg:i.extend(),createEncryptor:function(k,T){return this.create(this._ENC_XFORM_MODE,k,T)},createDecryptor:function(k,T){return this.create(this._DEC_XFORM_MODE,k,T)},init:function(k,T,M){this.cfg=this.cfg.extend(M),this._xformMode=k,this._key=T,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var T=this._doFinalize();return T},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(T){return typeof T=="string"?F:D}return function(T){return{encrypt:function(M,_,O){return k(_).encrypt(T,M,_,O)},decrypt:function(M,_,O){return k(_).decrypt(T,M,_,O)}}}}()});s.StreamCipher=m.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var g=o.mode={},y=s.BlockCipherMode=i.extend({createEncryptor:function(k,T){return this.Encryptor.create(k,T)},createDecryptor:function(k,T){return this.Decryptor.create(k,T)},init:function(k,T){this._cipher=k,this._iv=T}}),E=g.CBC=function(){var k=y.extend();k.Encryptor=k.extend({processBlock:function(M,_){var O=this._cipher,W=O.blockSize;T.call(this,M,_,W),O.encryptBlock(M,_),this._prevBlock=M.slice(_,_+W)}}),k.Decryptor=k.extend({processBlock:function(M,_){var O=this._cipher,W=O.blockSize,j=M.slice(_,_+W);O.decryptBlock(M,_),T.call(this,M,_,W),this._prevBlock=j}});function T(M,_,O){var W,j=this._iv;j?(W=j,this._iv=r):W=this._prevBlock;for(var B=0;B<O;B++)M[_+B]^=W[B]}return k}(),w=o.pad={},x=w.Pkcs7={pad:function(k,T){for(var M=T*4,_=M-k.sigBytes%M,O=_<<24|_<<16|_<<8|_,W=[],j=0;j<_;j+=4)W.push(O);var B=a.create(W,_);k.concat(B)},unpad:function(k){var T=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=T}};s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:E,padding:x}),reset:function(){var k;m.reset.call(this);var T=this.cfg,M=T.iv,_=T.mode;this._xformMode==this._ENC_XFORM_MODE?k=_.createEncryptor:(k=_.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,M&&M.words):(this._mode=k.call(_,this,M&&M.words),this._mode.__creator=k)},_doProcessBlock:function(k,T){this._mode.processBlock(k,T)},_doFinalize:function(){var k,T=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(T.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),T.unpad(k)),k},blockSize:128/32});var v=s.CipherParams=i.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),C=o.format={},b=C.OpenSSL={stringify:function(k){var T,M=k.ciphertext,_=k.salt;return _?T=a.create([1398893684,1701076831]).concat(_).concat(M):T=M,T.toString(u)},parse:function(k){var T,M=u.parse(k),_=M.words;return _[0]==1398893684&&_[1]==1701076831&&(T=a.create(_.slice(2,4)),_.splice(0,4),M.sigBytes-=16),v.create({ciphertext:M,salt:T})}},D=s.SerializableCipher=i.extend({cfg:i.extend({format:b}),encrypt:function(k,T,M,_){_=this.cfg.extend(_);var O=k.createEncryptor(M,_),W=O.finalize(T),j=O.cfg;return v.create({ciphertext:W,key:M,iv:j.iv,algorithm:k,mode:j.mode,padding:j.padding,blockSize:k.blockSize,formatter:_.format})},decrypt:function(k,T,M,_){_=this.cfg.extend(_),T=this._parse(T,_.format);var O=k.createDecryptor(M,_).finalize(T.ciphertext);return O},_parse:function(k,T){return typeof k=="string"?T.parse(k,this):k}}),A=o.kdf={},P=A.OpenSSL={execute:function(k,T,M,_,O){if(_||(_=a.random(64/8)),O)var W=d.create({keySize:T+M,hasher:O}).compute(k,_);else var W=d.create({keySize:T+M}).compute(k,_);var j=a.create(W.words.slice(T),M*4);return W.sigBytes=T*4,v.create({key:W,iv:j,salt:_})}},F=s.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:P}),encrypt:function(k,T,M,_){_=this.cfg.extend(_);var O=_.kdf.execute(M,k.keySize,k.ivSize,_.salt,_.hasher);_.iv=O.iv;var W=D.encrypt.call(this,k,T,O.key,_);return W.mixIn(O),W},decrypt:function(k,T,M,_){_=this.cfg.extend(_),T=this._parse(T,_.format);var O=_.kdf.execute(M,k.keySize,k.ivSize,T.salt,_.hasher);_.iv=O.iv;var W=D.decrypt.call(this,k,T,O.key,_);return W}})}()})}(Yf)),Yf.exports}var Xf={exports:{}},Ly;function R3(){return Ly||(Ly=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize;o.call(this,s,i,l,a),this._prevBlock=s.slice(i,i+l)}}),r.Decryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize,c=s.slice(i,i+l);o.call(this,s,i,l,a),this._prevBlock=c}});function o(s,i,a,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var f=0;f<a;f++)s[i+f]^=c[f]}return r}(),n.mode.CFB})}(Xf)),Xf.exports}var Qf={exports:{}},Oy;function M3(){return Oy||(Oy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var f=u.slice(0);a.encryptBlock(f,0),u[l-1]=u[l-1]+1|0;for(var d=0;d<l;d++)s[i+d]^=f[d]}});return r.Decryptor=o,r}(),n.mode.CTR})}(Qf)),Qf.exports}var Zf={exports:{}},$y;function N3(){return $y||($y=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function o(a){if((a>>24&255)===255){var l=a>>16&255,c=a>>8&255,u=a&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,a=0,a+=l<<16,a+=c<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=o(a[0]))===0&&(a[1]=o(a[1])),a}var i=r.Encryptor=r.extend({processBlock:function(a,l){var c=this._cipher,u=c.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var m=d.slice(0);c.encryptBlock(m,0);for(var g=0;g<u;g++)a[l+g]^=m[g]}});return r.Decryptor=i,r}(),n.mode.CTRGladman})}(Zf)),Zf.exports}var e0={exports:{}},zy;function I3(){return zy||(zy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(s,i){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var f=0;f<l;f++)s[i+f]^=u[f]}});return r.Decryptor=o,r}(),n.mode.OFB})}(e0)),e0.exports}var t0={exports:{}},Vy;function j3(){return Vy||(Vy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(o,s){this._cipher.encryptBlock(o,s)}}),r.Decryptor=r.extend({processBlock:function(o,s){this._cipher.decryptBlock(o,s)}}),r}(),n.mode.ECB})}(t0)),t0.exports}var n0={exports:{}},Uy;function _3(){return Uy||(Uy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.pad.AnsiX923={pad:function(r,o){var s=r.sigBytes,i=o*4,a=i-s%i,l=s+a-1;r.clamp(),r.words[l>>>2]|=a<<24-l%4*8,r.sigBytes+=a},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},n.pad.Ansix923})}(n0)),n0.exports}var r0={exports:{}},Hy;function B3(){return Hy||(Hy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.pad.Iso10126={pad:function(r,o){var s=o*4,i=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},n.pad.Iso10126})}(r0)),r0.exports}var o0={exports:{}},Wy;function L3(){return Wy||(Wy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.pad.Iso97971={pad:function(r,o){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,o)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(o0)),o0.exports}var s0={exports:{}},Jy;function O3(){return Jy||(Jy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.pad.ZeroPadding={pad:function(r,o){var s=o*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var o=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(o[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(s0)),s0.exports}var i0={exports:{}},Gy;function $3(){return Gy||(Gy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(i0)),i0.exports}var a0={exports:{}},Ky;function z3(){return Ky||(Ky=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Wt())})(Be,function(n){return function(r){var o=n,s=o.lib,i=s.CipherParams,a=o.enc,l=a.Hex,c=o.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var f=l.parse(u);return i.create({ciphertext:f})}}}(),n.format.Hex})}(a0)),a0.exports}var l0={exports:{}},qy;function V3(){return qy||(qy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Vs(),Us(),ls(),Wt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.BlockCipher,i=r.algo,a=[],l=[],c=[],u=[],f=[],d=[],m=[],g=[],y=[],E=[];(function(){for(var v=[],C=0;C<256;C++)C<128?v[C]=C<<1:v[C]=C<<1^283;for(var b=0,D=0,C=0;C<256;C++){var A=D^D<<1^D<<2^D<<3^D<<4;A=A>>>8^A&255^99,a[b]=A,l[A]=b;var P=v[b],F=v[P],k=v[F],T=v[A]*257^A*16843008;c[b]=T<<24|T>>>8,u[b]=T<<16|T>>>16,f[b]=T<<8|T>>>24,d[b]=T;var T=k*16843009^F*65537^P*257^b*16843008;m[A]=T<<24|T>>>8,g[A]=T<<16|T>>>16,y[A]=T<<8|T>>>24,E[A]=T,b?(b=P^v[v[v[k^P]]],D^=v[v[D]]):b=D=1}})();var w=[0,1,2,4,8,16,32,64,128,27,54],x=i.AES=s.extend({_doReset:function(){var v;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var C=this._keyPriorReset=this._key,b=C.words,D=C.sigBytes/4,A=this._nRounds=D+6,P=(A+1)*4,F=this._keySchedule=[],k=0;k<P;k++)k<D?F[k]=b[k]:(v=F[k-1],k%D?D>6&&k%D==4&&(v=a[v>>>24]<<24|a[v>>>16&255]<<16|a[v>>>8&255]<<8|a[v&255]):(v=v<<8|v>>>24,v=a[v>>>24]<<24|a[v>>>16&255]<<16|a[v>>>8&255]<<8|a[v&255],v^=w[k/D|0]<<24),F[k]=F[k-D]^v);for(var T=this._invKeySchedule=[],M=0;M<P;M++){var k=P-M;if(M%4)var v=F[k];else var v=F[k-4];M<4||k<=4?T[M]=v:T[M]=m[a[v>>>24]]^g[a[v>>>16&255]]^y[a[v>>>8&255]]^E[a[v&255]]}}},encryptBlock:function(v,C){this._doCryptBlock(v,C,this._keySchedule,c,u,f,d,a)},decryptBlock:function(v,C){var b=v[C+1];v[C+1]=v[C+3],v[C+3]=b,this._doCryptBlock(v,C,this._invKeySchedule,m,g,y,E,l);var b=v[C+1];v[C+1]=v[C+3],v[C+3]=b},_doCryptBlock:function(v,C,b,D,A,P,F,k){for(var T=this._nRounds,M=v[C]^b[0],_=v[C+1]^b[1],O=v[C+2]^b[2],W=v[C+3]^b[3],j=4,B=1;B<T;B++){var R=D[M>>>24]^A[_>>>16&255]^P[O>>>8&255]^F[W&255]^b[j++],N=D[_>>>24]^A[O>>>16&255]^P[W>>>8&255]^F[M&255]^b[j++],V=D[O>>>24]^A[W>>>16&255]^P[M>>>8&255]^F[_&255]^b[j++],I=D[W>>>24]^A[M>>>16&255]^P[_>>>8&255]^F[O&255]^b[j++];M=R,_=N,O=V,W=I}var R=(k[M>>>24]<<24|k[_>>>16&255]<<16|k[O>>>8&255]<<8|k[W&255])^b[j++],N=(k[_>>>24]<<24|k[O>>>16&255]<<16|k[W>>>8&255]<<8|k[M&255])^b[j++],V=(k[O>>>24]<<24|k[W>>>16&255]<<16|k[M>>>8&255]<<8|k[_&255])^b[j++],I=(k[W>>>24]<<24|k[M>>>16&255]<<16|k[_>>>8&255]<<8|k[O&255])^b[j++];v[C]=R,v[C+1]=N,v[C+2]=V,v[C+3]=I},keySize:256/32});r.AES=s._createHelper(x)}(),n.AES})}(l0)),l0.exports}var c0={exports:{}},Yy;function U3(){return Yy||(Yy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Vs(),Us(),ls(),Wt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.WordArray,i=o.BlockCipher,a=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=a.DES=i.extend({_doReset:function(){for(var w=this._key,x=w.words,v=[],C=0;C<56;C++){var b=l[C]-1;v[C]=x[b>>>5]>>>31-b%32&1}for(var D=this._subKeys=[],A=0;A<16;A++){for(var P=D[A]=[],F=u[A],C=0;C<24;C++)P[C/6|0]|=v[(c[C]-1+F)%28]<<31-C%6,P[4+(C/6|0)]|=v[28+(c[C+24]-1+F)%28]<<31-C%6;P[0]=P[0]<<1|P[0]>>>31;for(var C=1;C<7;C++)P[C]=P[C]>>>(C-1)*4+3;P[7]=P[7]<<5|P[7]>>>27}for(var k=this._invSubKeys=[],C=0;C<16;C++)k[C]=D[15-C]},encryptBlock:function(w,x){this._doCryptBlock(w,x,this._subKeys)},decryptBlock:function(w,x){this._doCryptBlock(w,x,this._invSubKeys)},_doCryptBlock:function(w,x,v){this._lBlock=w[x],this._rBlock=w[x+1],g.call(this,4,252645135),g.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),g.call(this,1,1431655765);for(var C=0;C<16;C++){for(var b=v[C],D=this._lBlock,A=this._rBlock,P=0,F=0;F<8;F++)P|=f[F][((A^b[F])&d[F])>>>0];this._lBlock=A,this._rBlock=D^P}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,g.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),w[x]=this._lBlock,w[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(w,x){var v=(this._lBlock>>>w^this._rBlock)&x;this._rBlock^=v,this._lBlock^=v<<w}function y(w,x){var v=(this._rBlock>>>w^this._lBlock)&x;this._lBlock^=v,this._rBlock^=v<<w}r.DES=i._createHelper(m);var E=a.TripleDES=i.extend({_doReset:function(){var w=this._key,x=w.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var v=x.slice(0,2),C=x.length<4?x.slice(0,2):x.slice(2,4),b=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=m.createEncryptor(s.create(v)),this._des2=m.createEncryptor(s.create(C)),this._des3=m.createEncryptor(s.create(b))},encryptBlock:function(w,x){this._des1.encryptBlock(w,x),this._des2.decryptBlock(w,x),this._des3.encryptBlock(w,x)},decryptBlock:function(w,x){this._des3.decryptBlock(w,x),this._des2.encryptBlock(w,x),this._des1.decryptBlock(w,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=i._createHelper(E)}(),n.TripleDES})}(c0)),c0.exports}var u0={exports:{}},Xy;function H3(){return Xy||(Xy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Vs(),Us(),ls(),Wt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.StreamCipher,i=r.algo,a=i.RC4=s.extend({_doReset:function(){for(var u=this._key,f=u.words,d=u.sigBytes,m=this._S=[],g=0;g<256;g++)m[g]=g;for(var g=0,y=0;g<256;g++){var E=g%d,w=f[E>>>2]>>>24-E%4*8&255;y=(y+m[g]+w)%256;var x=m[g];m[g]=m[y],m[y]=x}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,f=this._i,d=this._j,m=0,g=0;g<4;g++){f=(f+1)%256,d=(d+u[f])%256;var y=u[f];u[f]=u[d],u[d]=y,m|=u[(u[f]+u[d])%256]<<24-g*8}return this._i=f,this._j=d,m}r.RC4=s._createHelper(a);var c=i.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});r.RC4Drop=s._createHelper(c)}(),n.RC4})}(u0)),u0.exports}var d0={exports:{}},Qy;function W3(){return Qy||(Qy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Vs(),Us(),ls(),Wt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.StreamCipher,i=r.algo,a=[],l=[],c=[],u=i.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,m=this.cfg.iv,g=0;g<4;g++)d[g]=(d[g]<<8|d[g]>>>24)&16711935|(d[g]<<24|d[g]>>>8)&4278255360;var y=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],E=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)E[g]^=y[g+4&7];if(m){var w=m.words,x=w[0],v=w[1],C=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,b=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,D=C>>>16|b&4294901760,A=b<<16|C&65535;E[0]^=C,E[1]^=D,E[2]^=b,E[3]^=A,E[4]^=C,E[5]^=D,E[6]^=b,E[7]^=A;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,m){var g=this._X;f.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)a[y]=(a[y]<<8|a[y]>>>24)&16711935|(a[y]<<24|a[y]>>>8)&4278255360,d[m+y]^=a[y]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,m=this._C,g=0;g<8;g++)l[g]=m[g];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var y=d[g]+m[g],E=y&65535,w=y>>>16,x=((E*E>>>17)+E*w>>>15)+w*w,v=((y&4294901760)*y|0)+((y&65535)*y|0);c[g]=x^v}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.Rabbit=s._createHelper(u)}(),n.Rabbit})}(d0)),d0.exports}var f0={exports:{}},Zy;function J3(){return Zy||(Zy=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Vs(),Us(),ls(),Wt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.StreamCipher,i=r.algo,a=[],l=[],c=[],u=i.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,m=this.cfg.iv,g=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],y=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var E=0;E<4;E++)f.call(this);for(var E=0;E<8;E++)y[E]^=g[E+4&7];if(m){var w=m.words,x=w[0],v=w[1],C=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,b=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,D=C>>>16|b&4294901760,A=b<<16|C&65535;y[0]^=C,y[1]^=D,y[2]^=b,y[3]^=A,y[4]^=C,y[5]^=D,y[6]^=b,y[7]^=A;for(var E=0;E<4;E++)f.call(this)}},_doProcessBlock:function(d,m){var g=this._X;f.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)a[y]=(a[y]<<8|a[y]>>>24)&16711935|(a[y]<<24|a[y]>>>8)&4278255360,d[m+y]^=a[y]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,m=this._C,g=0;g<8;g++)l[g]=m[g];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var g=0;g<8;g++){var y=d[g]+m[g],E=y&65535,w=y>>>16,x=((E*E>>>17)+E*w>>>15)+w*w,v=((y&4294901760)*y|0)+((y&65535)*y|0);c[g]=x^v}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.RabbitLegacy=s._createHelper(u)}(),n.RabbitLegacy})}(f0)),f0.exports}var h0={exports:{}},e1;function G3(){return e1||(e1=1,function(e,t){(function(n,r,o){e.exports=r(ze(),Vs(),Us(),ls(),Wt())})(Be,function(n){return function(){var r=n,o=r.lib,s=o.BlockCipher,i=r.algo;const a=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(E,w){let x=w>>24&255,v=w>>16&255,C=w>>8&255,b=w&255,D=E.sbox[0][x]+E.sbox[1][v];return D=D^E.sbox[2][C],D=D+E.sbox[3][b],D}function d(E,w,x){let v=w,C=x,b;for(let D=0;D<a;++D)v=v^E.pbox[D],C=f(E,v)^C,b=v,v=C,C=b;return b=v,v=C,C=b,C=C^E.pbox[a],v=v^E.pbox[a+1],{left:v,right:C}}function m(E,w,x){let v=w,C=x,b;for(let D=a+1;D>1;--D)v=v^E.pbox[D],C=f(E,v)^C,b=v,v=C,C=b;return b=v,v=C,C=b,C=C^E.pbox[1],v=v^E.pbox[0],{left:v,right:C}}function g(E,w,x){for(let A=0;A<4;A++){E.sbox[A]=[];for(let P=0;P<256;P++)E.sbox[A][P]=c[A][P]}let v=0;for(let A=0;A<a+2;A++)E.pbox[A]=l[A]^w[v],v++,v>=x&&(v=0);let C=0,b=0,D=0;for(let A=0;A<a+2;A+=2)D=d(E,C,b),C=D.left,b=D.right,E.pbox[A]=C,E.pbox[A+1]=b;for(let A=0;A<4;A++)for(let P=0;P<256;P+=2)D=d(E,C,b),C=D.left,b=D.right,E.sbox[A][P]=C,E.sbox[A][P+1]=b;return!0}var y=i.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var E=this._keyPriorReset=this._key,w=E.words,x=E.sigBytes/4;g(u,w,x)}},encryptBlock:function(E,w){var x=d(u,E[w],E[w+1]);E[w]=x.left,E[w+1]=x.right},decryptBlock:function(E,w){var x=m(u,E[w],E[w+1]);E[w]=x.left,E[w+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(y)}(),n.Blowfish})}(h0)),h0.exports}(function(e,t){(function(n,r,o){e.exports=r(ze(),kd(),S3(),b3(),Vs(),D3(),Us(),e2(),qm(),A3(),t2(),P3(),k3(),T3(),Ym(),F3(),ls(),Wt(),R3(),M3(),N3(),I3(),j3(),_3(),B3(),L3(),O3(),$3(),z3(),V3(),U3(),H3(),W3(),J3(),G3())})(Be,function(n){return n})})(Zb);var K3=Zb.exports;function qh(e){const t=e.lastIndexOf(".");return t===-1||t===e.length-1?"jpg":e.substring(t+1).toLowerCase()}async function t1(e){return new Promise((t,n)=>{S.log("[getImageDimensions] Starting dimension extraction",{type:typeof e,isFile:e instanceof File,fileDetails:e instanceof File?{name:e.name,size:e.size,type:e.type}:"Not a file"});const r=new Image;if(r.onload=()=>{S.log(`[getImageDimensions] Image loaded successfully with dimensions: ${r.naturalWidth}x${r.naturalHeight}`),r.naturalWidth>0&&r.naturalHeight>0?t({width:r.naturalWidth,height:r.naturalHeight}):(S.error("[getImageDimensions] Image loaded with zero dimensions"),n(new Error("Image loaded with zero dimensions.")))},r.onerror=o=>{S.error("[getImageDimensions] Image loading error:",o),n(new Error("Failed to load image to get dimensions."))},typeof e=="string")S.log(`[getImageDimensions] Processing string URL: ${e.substring(0,50)}...`),r.src=e;else if(e instanceof File){S.log(`[getImageDimensions] Processing File object: ${e.name}, size: ${e.size}, type: ${e.type}`);const o=new FileReader;o.onload=s=>{var i;if(S.log("[getImageDimensions] FileReader load successful"),(i=s.target)!=null&&i.result){const a=s.target.result;S.log(`[getImageDimensions] Data URL created, length: ${a.length}, setting as img.src`),r.src=a}else S.error("[getImageDimensions] FileReader result is empty"),n(new Error("FileReader result is empty."))},o.onerror=s=>{S.error("[getImageDimensions] FileReader error:",s),n(new Error("Failed to read file."))},S.log("[getImageDimensions] Calling reader.readAsDataURL on file"),o.readAsDataURL(e)}else S.error("[getImageDimensions] Invalid input type"),n(new Error("Invalid input for getImageDimensions"))})}const q3=e=>{if(!e||typeof e!="string")return null;try{const t=e.split(" ");if(t.length<1)return null;const n=t[0].replace(/:/g,"-");return/^\d{4}-\d{2}-\d{2}$/.test(n)?n:null}catch(t){return S.error("Error parsing EXIF date string:",t),null}};function n1(e){return new Promise(t=>{if(!window.EXIF){S.warn("EXIF library not loaded."),t({exifDate:null});return}let n=!1;const r=setTimeout(()=>{n||(S.warn("EXIF extraction timed out."),n=!0,t({exifDate:null}))},2500);try{window.EXIF.getData(e,function(){if(!n){clearTimeout(r),n=!0;try{const o=window.EXIF.getTag(this,"DateTimeOriginal")||window.EXIF.getTag(this,"DateTimeDigitized"),s=q3(o);t({exifDate:s})}catch(o){S.error("Error reading EXIF tags:",o),t({exifDate:null})}}})}catch(o){n||(clearTimeout(r),n=!0,S.error("Error initiating EXIF.getData:",o),t({exifDate:null}))}})}var Tn=(e=>(e.IDLE="idle",e.CONNECTING="connecting",e.FETCHING="fetching",e.MERGING="merging",e.UPLOADING="uploading",e.SYNCING_PHOTOS="syncing_photos",e.CLEANING_UP="cleaning_up",e.COMPLETED="completed",e.FAILED="failed",e))(Tn||{});class Cs{constructor(t,n,r){this.listeners=[],this.currentStatus="idle",this.currentStatusMessage="",this.abortController=null,this.provider=t,this.journal=n,this.journalMetaService=r}addStatusListener(t){this.listeners.push(t)}removeStatusListener(t){this.listeners=this.listeners.filter(n=>n!==t)}removeAllListeners(){this.listeners=[]}updateStatus(t,n){this.currentStatus=t,this.currentStatusMessage=n,this.listeners.forEach(r=>{try{r(t,n)}catch(o){console.error("Error in sync status listener:",o)}})}async updateJournalStats(t){try{const n=await this.journal.getAllEntries({includeDeleted:!1}),r=n.length;let o=new Date(0);n.length>0&&(o=n.reduce((s,i)=>{const a=new Date(i.updatedAt);return a>s?a:s},new Date(0))),await this.journalMetaService.updateJournalMetadata(t,{entryCount:r,lastModifiedTimestamp:o.getTime(),journalPropertiesUpdatedAt:new Date().toISOString()}),console.log(`Updated journal stats: ${r} entries, last modified ${o.toISOString()}`)}catch(n){console.error("[updateJournalStats] Error updating journal statistics:",n)}}getCurrentStatus(){return this.currentStatus}abortSync(){this.abortController&&(this.abortController.abort(),this.abortController=null,this.updateStatus("idle","Sync operation aborted"))}calculateHash(t){return K3.SHA256(t).toString()}async performSync(t,n={}){if(t!==this.journal.id)throw new Error(`Journal ID ${t} does not match the current journal ID ${this.journal.id}`);if(this.currentStatus!=="idle"&&this.currentStatus!=="completed")return{success:!1,message:"Sync already in progress"};this.abortController=new AbortController;const{signal:r}=this.abortController;try{if(this.updateStatus("connecting","Connecting to provider"),!await this.provider.connect(t))return this.updateStatus("failed","Failed to connect to provider"),{success:!1,message:"Failed to connect to provider"};this.updateStatus("fetching","Fetching sync lock");let s=await this.provider.getSyncLock(t);const i=await this.journalMetaService.getJournalById(t),a={lastKnownProviderVersionId:(i==null?void 0:i.lastKnownProviderVersionId)||null,lastKnownProviderTimestamp:(i==null?void 0:i.lastKnownProviderTimestamp)||null,localDirtyFlag:(i==null?void 0:i.localDirtyFlag)||!1},l=n.forceFullSync||s!==null&&s.currentDataFileVersionId!==a.lastKnownProviderVersionId||a.localDirtyFlag;this.updateStatus("merging","Preparing local data");const c=await d3(t,this.journalMetaService,this.journal);if(r.aborted)throw new Error("Sync aborted");let u=null;if(l&&(s!=null&&s.currentDataFileVersionId)&&(this.updateStatus("fetching","Downloading remote data"),u=await this.provider.getDataFile(t,s.currentDataFileVersionId)),l&&(s!=null&&s.currentDataFileVersionId)&&!u){const w=`Critical error: Sync lock points to missing data file (${s.currentDataFileVersionId}) on provider. Sync paused.`;return this.updateStatus("failed",w),{success:!1,message:w}}if(r.aborted)throw new Error("Sync aborted");this.updateStatus("merging","Merging local and remote data");const f=u?this.mergeJournalContents(c,u):c,d=u3(f),m=this.calculateHash(d),g=!(s!=null&&s.currentDataFileVersionId)||s.currentDataFileVersionId!==m;let y={success:!0,newVersionId:m,updatedEntryCount:0,updatedPhotoMetadataCount:0,uploadedPhotoCount:0,downloadedPhotoCount:0};if(g){if(this.updateStatus("uploading","Uploading data"),!(await this.provider.uploadDataFile(t,m,f)).success)return this.updateStatus("failed","Failed to upload data file"),{success:!1,message:"Failed to upload data file"};const x=n.maxRetries||5;let v=0,C=!1;for(;v<x&&!C;){if(v>0&&(this.updateStatus("uploading",`Retrying sync lock update (${v}/${x})`),await new Promise(A=>setTimeout(A,Math.pow(2,v)*500))),r.aborted)throw new Error("Sync aborted");const b={currentDataFileVersionId:m,timestamp:f.journalContentLastModified};if((await this.provider.updateSyncLock(t,b,(s==null?void 0:s.currentDataFileVersionId)||null)).success)C=!0;else if(v++,v<x){const A=await this.provider.getSyncLock(t);A&&(s=A,A.currentDataFileVersionId===m&&(C=!0))}}if(!C)return this.updateStatus("failed","Failed to update sync lock after retries"),{success:!1,message:"Failed to update sync lock after retries. Another client may have updated the data."};if(s!=null&&s.currentDataFileVersionId&&s.currentDataFileVersionId!==m)try{await this.provider.deleteOldDataFile(t,s.currentDataFileVersionId)}catch(b){console.warn("Failed to delete old data file:",b)}}this.updateStatus("merging","Updating local storage"),await my(t,f,this.journal,this.journalMetaService),await this.journalMetaService.updateJournalMetadata(t,{lastKnownProviderVersionId:m,lastKnownProviderTimestamp:f.journalContentLastModified,localDirtyFlag:!1}),n.uploadPhotos!==!1&&(this.updateStatus("syncing_photos","Uploading photo blobs"),await this.syncPhotoBlobs(t,f)),n.downloadPhotos!==!1&&(this.updateStatus("syncing_photos","Downloading missing photo blobs"),await this.downloadMissingPhotos(t,f)),this.updateStatus("syncing_photos","Processing queued blob operations");const E=await this.processQueuedBlobOperations(t);return E>0&&console.log(`Processed ${E} queued blob operations.`),this.updateStatus("cleaning_up","Updating journal statistics"),await this.updateJournalStats(t),this.updateStatus("completed","Sync completed successfully"),y}catch(o){const s=o instanceof Error?o.message:"Unknown error occurred";return this.updateStatus("failed",`Sync failed: ${s}`),{success:!1,message:`Sync failed: ${s}`,error:o instanceof Error?o:new Error(s)}}finally{this.abortController=null}}mergeJournalContents(t,n){const r=this.mergeRecordsAsObject(t.entries,n.entries),o=this.mergeRecordsAsObject(t.photoMetadata,n.photoMetadata),s=new Date(t.journalContentLastModified)>=new Date(n.journalContentLastModified)?t.journalContentLastModified:n.journalContentLastModified;for(const a of Object.values(r))a.isDeleted===!1&&delete a.isDeleted;for(const a of Object.values(o))a.isDeleted===!1&&delete a.isDeleted;return{schemaVersion:Math.max(t.schemaVersion||1,n.schemaVersion||1),journalContentLastModified:s,journalProperties:this.mergeJournalProperties(t.journalProperties,n.journalProperties),entries:r,photoMetadata:o}}mergeJournalProperties(t,n){return new Date(t.updatedAt)>=new Date(n.updatedAt)?{...t}:{...n}}mergeRecordsAsObject(t,n){const r={},o=new Set([...Object.keys(t),...Object.keys(n)]);for(const s of o){const i=t[s],a=n[s];if(i&&!a)r[s]=i;else if(!i&&a)r[s]=a;else if(i&&a){const l=new Date(i.updatedAt),c=new Date(a.updatedAt);l>c?r[s]=i:r[s]=a}}return r}async syncPhotoBlobs(t,n){const r=await this.provider.listPhotoFiles(t),o=new Set(r.map(a=>a.contentHash)),s=[];Object.entries(n.photoMetadata).forEach(([a,l])=>{l.isDeleted||s.push({id:a,...l})});const i=await this.journal.getDb();for(const a of s){if(o.has(a.contentHash))continue;if(!await this.journal.getPhotoBlobUrl(a.contentHash,a.id)){console.log(`Skipping queue for photo ${a.id} with hash ${a.contentHash} - blob doesn't exist locally`);continue}const c=qh(a.originalFilename);await yy(i,t,a.contentHash,"upload")||(console.log(`Queueing upload for photo ${a.id} with hash ${a.contentHash}`),await Kh(i,t,{contentHash:a.contentHash,extension:c},"upload"))}}async downloadMissingPhotos(t,n){const r=await this.provider.listPhotoFiles(t),o=new Set(r.map(a=>a.contentHash)),s=[];Object.entries(n.photoMetadata).forEach(([a,l])=>{l.isDeleted||s.push({id:a,...l})});const i=await this.journal.getDb();for(const a of s){if(await this.journal.getPhotoBlobUrl(a.contentHash,a.id))continue;if(!o.has(a.contentHash)){console.log(`Skipping queue for photo ${a.id} with hash ${a.contentHash} - blob doesn't exist on provider`);continue}const c=qh(a.originalFilename);await yy(i,t,a.contentHash,"download")||(console.log(`Queueing download for photo ${a.id} with hash ${a.contentHash}`),await Kh(i,t,{contentHash:a.contentHash,extension:c},"download"))}}async processQueuedBlobOperations(t){const n=await this.journal.getDb(),r=await x3(n);let o=0;const s=await this.journal.getAllImageMetadata(),i=10,a=[];for(let l=0;l<r.length;l+=i){const c=r.slice(l,l+i);a.push(c)}for(const l of a){const c=await Promise.all(l.map(async u=>{try{if(await v3(n,t,u.contentHash),u.type==="upload"){const f=s.find(d=>d.photoMetadata&&d.photoMetadata.contentHash===u.contentHash);if(f){const d=await this.journal.getPhotoBlobUrl(u.contentHash,f.id);if(d){const g=await(await fetch(d)).blob();if((await this.provider.uploadPhotoBlob(t,u.contentHash,u.extension,g)).success)return await vy(n,t,u.contentHash),!0}}}else if(u.type==="download"){const f=`${u.contentHash}.${u.extension}`,d=await this.provider.downloadPhotoBlob(t,f);if(d&&s.find(g=>g.photoMetadata&&g.photoMetadata.contentHash===u.contentHash))return await this.journal.savePhotoBlob(u.contentHash,d,"full"),await vy(n,t,u.contentHash),!0}return!1}catch(f){return console.error(`Error processing queued operation for ${u.contentHash}:`,f),!1}}));o+=c.filter(u=>u).length}return o}async checkAndImportExistingData(t){try{if(await this.provider.checkForExistingData(t)){const r=await this.provider.getSyncLock(t);if(r&&r.currentDataFileVersionId){const o=await this.provider.getDataFile(t,r.currentDataFileVersionId);if(o)return await my(t,o,this.journal,this.journalMetaService),await this.journalMetaService.updateJournalMetadata(t,{lastKnownProviderVersionId:r.currentDataFileVersionId,lastKnownProviderTimestamp:r.timestamp,localDirtyFlag:!1}),this.updateStatus("syncing_photos","Downloading and syncing photo blobs"),await this.downloadMissingPhotos(t,o),await this.processQueuedBlobOperations(t),!0}}return!1}catch(n){return console.error("Error checking for existing data:",n),!1}}}var Y3=p.createContext(void 0);function aa(e){const t=p.useContext(Y3);return e||t||"ltr"}var p0="rovingFocusGroup.onEntryFocus",X3={bubbles:!1,cancelable:!0},Td="RovingFocusGroup",[Yh,n2,Q3]=md(Td),[Z3,la]=bn(Td,[Q3]),[eI,tI]=Z3(Td),r2=p.forwardRef((e,t)=>h.jsx(Yh.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Yh.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(nI,{...e,ref:t})})}));r2.displayName=Td;var nI=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=e,d=p.useRef(null),m=Le(t,d),g=aa(s),[y=null,E]=Ur({prop:i,defaultProp:a,onChange:l}),[w,x]=p.useState(!1),v=kt(c),C=n2(n),b=p.useRef(!1),[D,A]=p.useState(0);return p.useEffect(()=>{const P=d.current;if(P)return P.addEventListener(p0,v),()=>P.removeEventListener(p0,v)},[v]),h.jsx(eI,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:y,onItemFocus:p.useCallback(P=>E(P),[E]),onItemShiftTab:p.useCallback(()=>x(!0),[]),onFocusableItemAdd:p.useCallback(()=>A(P=>P+1),[]),onFocusableItemRemove:p.useCallback(()=>A(P=>P-1),[]),children:h.jsx(De.div,{tabIndex:w||D===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:se(e.onMouseDown,()=>{b.current=!0}),onFocus:se(e.onFocus,P=>{const F=!b.current;if(P.target===P.currentTarget&&F&&!w){const k=new CustomEvent(p0,X3);if(P.currentTarget.dispatchEvent(k),!k.defaultPrevented){const T=C().filter(j=>j.focusable),M=T.find(j=>j.active),_=T.find(j=>j.id===y),W=[M,_,...T].filter(Boolean).map(j=>j.ref.current);i2(W,u)}}b.current=!1}),onBlur:se(e.onBlur,()=>x(!1))})})}),o2="RovingFocusGroupItem",s2=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=e,a=Di(),l=s||a,c=tI(o2,n),u=c.currentTabStopId===l,f=n2(n),{onFocusableItemAdd:d,onFocusableItemRemove:m}=c;return p.useEffect(()=>{if(r)return d(),()=>m()},[r,d,m]),h.jsx(Yh.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:h.jsx(De.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:t,onMouseDown:se(e.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:se(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:se(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=sI(g,c.orientation,c.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=f().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const x=w.indexOf(g.currentTarget);w=c.loop?iI(w,x+1):w.slice(x+1)}setTimeout(()=>i2(w))}})})})});s2.displayName=o2;var rI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function sI(e,t,n){const r=oI(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rI[r]}function i2(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function iI(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Xm=r2,Qm=s2,aI="Toggle",Zm=p.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...s}=e,[i=!1,a]=Ur({prop:n,onChange:o,defaultProp:r});return h.jsx(De.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:se(e.onClick,()=>{e.disabled||a(!i)})})});Zm.displayName=aI;var a2=Zm,ca="ToggleGroup",[l2,H7]=bn(ca,[la]),c2=la(),eg=xt.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return h.jsx(lI,{...o,ref:t})}if(n==="multiple"){const o=r;return h.jsx(cI,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${ca}\``)});eg.displayName=ca;var[u2,d2]=l2(ca),lI=xt.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,a]=Ur({prop:n,defaultProp:r,onChange:o});return h.jsx(u2,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:a,onItemDeactivate:xt.useCallback(()=>a(""),[a]),children:h.jsx(f2,{...s,ref:t})})}),cI=xt.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i=[],a]=Ur({prop:n,defaultProp:r,onChange:o}),l=xt.useCallback(u=>a((f=[])=>[...f,u]),[a]),c=xt.useCallback(u=>a((f=[])=>f.filter(d=>d!==u)),[a]);return h.jsx(u2,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:l,onItemDeactivate:c,children:h.jsx(f2,{...s,ref:t})})});eg.displayName=ca;var[uI,dI]=l2(ca),f2=xt.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:s,dir:i,loop:a=!0,...l}=e,c=c2(n),u=aa(i),f={role:"group",dir:u,...l};return h.jsx(uI,{scope:n,rovingFocus:o,disabled:r,children:o?h.jsx(Xm,{asChild:!0,...c,orientation:s,dir:u,loop:a,children:h.jsx(De.div,{...f,ref:t})}):h.jsx(De.div,{...f,ref:t})})}),Iu="ToggleGroupItem",h2=xt.forwardRef((e,t)=>{const n=d2(Iu,e.__scopeToggleGroup),r=dI(Iu,e.__scopeToggleGroup),o=c2(e.__scopeToggleGroup),s=n.value.includes(e.value),i=r.disabled||e.disabled,a={...e,pressed:s,disabled:i},l=xt.useRef(null);return r.rovingFocus?h.jsx(Qm,{asChild:!0,...o,focusable:!i,active:s,ref:l,children:h.jsx(r1,{...a,ref:t})}):h.jsx(r1,{...a,ref:t})});h2.displayName=Iu;var r1=xt.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,s=d2(Iu,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=s.type==="single"?i:void 0;return h.jsx(Zm,{...a,...o,ref:t,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}})}),p2=eg,m2=h2;const g2=zl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),fI=p.forwardRef(({className:e,variant:t,size:n,...r},o)=>h.jsx(a2,{ref:o,className:ie(g2({variant:t,size:n,className:e})),...r}));fI.displayName=a2.displayName;const x2=p.createContext({size:"default",variant:"default"}),v2=p.forwardRef(({className:e,variant:t,size:n,children:r,...o},s)=>h.jsx(p2,{ref:s,className:ie("flex items-center justify-center gap-1",e),...o,children:h.jsx(x2.Provider,{value:{variant:t,size:n},children:r})}));v2.displayName=p2.displayName;const Xh=p.forwardRef(({className:e,children:t,variant:n,size:r,...o},s)=>{const i=p.useContext(x2);return h.jsx(m2,{ref:s,className:ie(g2({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});Xh.displayName=m2.displayName;var m0="focusScope.autoFocusOnMount",g0="focusScope.autoFocusOnUnmount",o1={bubbles:!1,cancelable:!0},hI="FocusScope",tg=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[a,l]=p.useState(null),c=kt(o),u=kt(s),f=p.useRef(null),d=Le(t,y=>l(y)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(v){if(m.paused||!a)return;const C=v.target;a.contains(C)?f.current=C:Eo(f.current,{select:!0})},E=function(v){if(m.paused||!a)return;const C=v.relatedTarget;C!==null&&(a.contains(C)||Eo(f.current,{select:!0}))},w=function(v){if(document.activeElement===document.body)for(const b of v)b.removedNodes.length>0&&Eo(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",E);const x=new MutationObserver(w);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",E),x.disconnect()}}},[r,a,m.paused]),p.useEffect(()=>{if(a){i1.add(m);const y=document.activeElement;if(!a.contains(y)){const w=new CustomEvent(m0,o1);a.addEventListener(m0,c),a.dispatchEvent(w),w.defaultPrevented||(pI(yI(y2(a)),{select:!0}),document.activeElement===y&&Eo(a))}return()=>{a.removeEventListener(m0,c),setTimeout(()=>{const w=new CustomEvent(g0,o1);a.addEventListener(g0,u),a.dispatchEvent(w),w.defaultPrevented||Eo(y??document.body,{select:!0}),a.removeEventListener(g0,u),i1.remove(m)},0)}}},[a,c,u,m]);const g=p.useCallback(y=>{if(!n&&!r||m.paused)return;const E=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(E&&w){const x=y.currentTarget,[v,C]=mI(x);v&&C?!y.shiftKey&&w===C?(y.preventDefault(),n&&Eo(v,{select:!0})):y.shiftKey&&w===v&&(y.preventDefault(),n&&Eo(C,{select:!0})):w===x&&y.preventDefault()}},[n,r,m.paused]);return h.jsx(De.div,{tabIndex:-1,...i,ref:d,onKeyDown:g})});tg.displayName=hI;function pI(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Eo(r,{select:t}),document.activeElement!==n)return}function mI(e){const t=y2(e),n=s1(t,e),r=s1(t.reverse(),e);return[n,r]}function y2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function s1(e,t){for(const n of e)if(!gI(n,{upTo:t}))return n}function gI(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xI(e){return e instanceof HTMLInputElement&&"select"in e}function Eo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&xI(e)&&t&&e.select()}}var i1=vI();function vI(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=a1(e,t),e.unshift(t)},remove(t){var n;e=a1(e,t),(n=e[0])==null||n.resume()}}}function a1(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function yI(e){return e.filter(t=>t.tagName!=="A")}var x0=0;function w2(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??l1()),document.body.insertAdjacentElement("beforeend",e[1]??l1()),x0++,()=>{x0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),x0--}},[])}function l1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _r=function(){return _r=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_r.apply(this,arguments)};function E2(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function wI(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Zc="right-scroll-bar-position",eu="width-before-scroll-bar",EI="with-scroll-bars-hidden",CI="--removed-body-scroll-bar-size";function v0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function SI(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var bI=typeof window<"u"?p.useLayoutEffect:p.useEffect,c1=new WeakMap;function DI(e,t){var n=SI(null,function(r){return e.forEach(function(o){return v0(o,r)})});return bI(function(){var r=c1.get(n);if(r){var o=new Set(r),s=new Set(e),i=n.current;o.forEach(function(a){s.has(a)||v0(a,null)}),s.forEach(function(a){o.has(a)||v0(a,i)})}c1.set(n,e)},[e]),n}function AI(e){return e}function PI(e,t){t===void 0&&(t=AI);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var u=i;i=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return o}function kI(e){e===void 0&&(e={});var t=PI(null);return t.options=_r({async:!0,ssr:!1},e),t}var C2=function(e){var t=e.sideCar,n=E2(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,_r({},n))};C2.isSideCarExport=!0;function TI(e,t){return e.useMedium(t),C2}var S2=kI(),y0=function(){},Fd=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:y0,onWheelCapture:y0,onTouchMoveCapture:y0}),o=r[0],s=r[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,f=e.shards,d=e.sideCar,m=e.noIsolation,g=e.inert,y=e.allowPinchZoom,E=e.as,w=E===void 0?"div":E,x=e.gapMode,v=E2(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=d,b=DI([n,t]),D=_r(_r({},v),o);return p.createElement(p.Fragment,null,u&&p.createElement(C,{sideCar:S2,removeScrollBar:c,shards:f,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:x}),i?p.cloneElement(p.Children.only(a),_r(_r({},D),{ref:b})):p.createElement(w,_r({},D,{className:l,ref:b}),a))});Fd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fd.classNames={fullWidth:eu,zeroRight:Zc};var FI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RI(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=FI();return t&&e.setAttribute("nonce",t),e}function MI(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function NI(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var II=function(){var e=0,t=null;return{add:function(n){e==0&&(t=RI())&&(MI(t,n),NI(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jI=function(){var e=II();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},b2=function(){var e=jI(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},_I={left:0,top:0,right:0,gap:0},w0=function(e){return parseInt(e||"",10)||0},BI=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[w0(n),w0(r),w0(o)]},LI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return _I;var t=BI(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},OI=b2(),Pi="data-scroll-locked",$I=function(e,t,n,r){var o=e.left,s=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(EI,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Pi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(eu,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Zc," .").concat(Zc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(eu," .").concat(eu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pi,`] {
    `).concat(CI,": ").concat(a,`px;
  }
`)},u1=function(){var e=parseInt(document.body.getAttribute(Pi)||"0",10);return isFinite(e)?e:0},zI=function(){p.useEffect(function(){return document.body.setAttribute(Pi,(u1()+1).toString()),function(){var e=u1()-1;e<=0?document.body.removeAttribute(Pi):document.body.setAttribute(Pi,e.toString())}},[])},VI=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;zI();var s=p.useMemo(function(){return LI(o)},[o]);return p.createElement(OI,{styles:$I(s,!t,o,n?"":"!important")})},Qh=!1;if(typeof window<"u")try{var Ac=Object.defineProperty({},"passive",{get:function(){return Qh=!0,!0}});window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{Qh=!1}var Ys=Qh?{passive:!1}:!1,UI=function(e){return e.tagName==="TEXTAREA"},D2=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!UI(e)&&n[t]==="visible")},HI=function(e){return D2(e,"overflowY")},WI=function(e){return D2(e,"overflowX")},d1=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=A2(e,r);if(o){var s=P2(e,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},JI=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},GI=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},A2=function(e,t){return e==="v"?HI(t):WI(t)},P2=function(e,t){return e==="v"?JI(t):GI(t)},KI=function(e,t){return e==="h"&&t==="rtl"?-1:1},qI=function(e,t,n,r,o){var s=KI(e,window.getComputedStyle(t).direction),i=s*r,a=n.target,l=t.contains(a),c=!1,u=i>0,f=0,d=0;do{var m=P2(e,a),g=m[0],y=m[1],E=m[2],w=y-E-s*g;(g||w)&&A2(e,a)&&(f+=w,d+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(Math.abs(f)<1||!o)||!u&&(Math.abs(d)<1||!o))&&(c=!0),c},Pc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},f1=function(e){return[e.deltaX,e.deltaY]},h1=function(e){return e&&"current"in e?e.current:e},YI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},XI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},QI=0,Xs=[];function ZI(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(QI++)[0],s=p.useState(b2)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var y=wI([e.lockRef.current],(e.shards||[]).map(h1),!0).filter(Boolean);return y.forEach(function(E){return E.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=p.useCallback(function(y,E){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var w=Pc(y),x=n.current,v="deltaX"in y?y.deltaX:x[0]-w[0],C="deltaY"in y?y.deltaY:x[1]-w[1],b,D=y.target,A=Math.abs(v)>Math.abs(C)?"h":"v";if("touches"in y&&A==="h"&&D.type==="range")return!1;var P=d1(A,D);if(!P)return!0;if(P?b=A:(b=A==="v"?"h":"v",P=d1(A,D)),!P)return!1;if(!r.current&&"changedTouches"in y&&(v||C)&&(r.current=b),!b)return!0;var F=r.current||b;return qI(F,E,y,F==="h"?v:C,!0)},[]),l=p.useCallback(function(y){var E=y;if(!(!Xs.length||Xs[Xs.length-1]!==s)){var w="deltaY"in E?f1(E):Pc(E),x=t.current.filter(function(b){return b.name===E.type&&(b.target===E.target||E.target===b.shadowParent)&&YI(b.delta,w)})[0];if(x&&x.should){E.cancelable&&E.preventDefault();return}if(!x){var v=(i.current.shards||[]).map(h1).filter(Boolean).filter(function(b){return b.contains(E.target)}),C=v.length>0?a(E,v[0]):!i.current.noIsolation;C&&E.cancelable&&E.preventDefault()}}},[]),c=p.useCallback(function(y,E,w,x){var v={name:y,delta:E,target:w,should:x,shadowParent:ej(w)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(C){return C!==v})},1)},[]),u=p.useCallback(function(y){n.current=Pc(y),r.current=void 0},[]),f=p.useCallback(function(y){c(y.type,f1(y),y.target,a(y,e.lockRef.current))},[]),d=p.useCallback(function(y){c(y.type,Pc(y),y.target,a(y,e.lockRef.current))},[]);p.useEffect(function(){return Xs.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",l,Ys),document.addEventListener("touchmove",l,Ys),document.addEventListener("touchstart",u,Ys),function(){Xs=Xs.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Ys),document.removeEventListener("touchmove",l,Ys),document.removeEventListener("touchstart",u,Ys)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:XI(o)}):null,m?p.createElement(VI,{gapMode:e.gapMode}):null)}function ej(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const tj=TI(S2,ZI);var ng=p.forwardRef(function(e,t){return p.createElement(Fd,_r({},e,{ref:t,sideCar:tj}))});ng.classNames=Fd.classNames;var nj=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Qs=new WeakMap,kc=new WeakMap,Tc={},E0=0,k2=function(e){return e&&(e.host||k2(e.parentNode))},rj=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=k2(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},oj=function(e,t,n,r){var o=rj(t,Array.isArray(e)?e:[e]);Tc[n]||(Tc[n]=new WeakMap);var s=Tc[n],i=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(d){if(a.has(d))u(d);else try{var m=d.getAttribute(r),g=m!==null&&m!=="false",y=(Qs.get(d)||0)+1,E=(s.get(d)||0)+1;Qs.set(d,y),s.set(d,E),i.push(d),y===1&&g&&kc.set(d,!0),E===1&&d.setAttribute(n,"true"),g||d.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",d,w)}})};return u(t),a.clear(),E0++,function(){i.forEach(function(f){var d=Qs.get(f)-1,m=s.get(f)-1;Qs.set(f,d),s.set(f,m),d||(kc.has(f)||f.removeAttribute(r),kc.delete(f)),m||f.removeAttribute(n)}),E0--,E0||(Qs=new WeakMap,Qs=new WeakMap,kc=new WeakMap,Tc={})}},T2=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=nj(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),oj(r,o,n,"aria-hidden")):function(){return null}},rg="Dialog",[F2,R2]=bn(rg),[sj,Tr]=F2(rg),M2=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,a=p.useRef(null),l=p.useRef(null),[c=!1,u]=Ur({prop:r,defaultProp:o,onChange:s});return h.jsx(sj,{scope:t,triggerRef:a,contentRef:l,contentId:Di(),titleId:Di(),descriptionId:Di(),open:c,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),modal:i,children:n})};M2.displayName=rg;var N2="DialogTrigger",I2=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Tr(N2,n),s=Le(t,o.triggerRef);return h.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ig(o.open),...r,ref:s,onClick:se(e.onClick,o.onOpenToggle)})});I2.displayName=N2;var og="DialogPortal",[ij,j2]=F2(og,{forceMount:void 0}),_2=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=Tr(og,t);return h.jsx(ij,{scope:t,forceMount:n,children:p.Children.map(r,i=>h.jsx(Dn,{present:n||s.open,children:h.jsx(gd,{asChild:!0,container:o,children:i})}))})};_2.displayName=og;var ju="DialogOverlay",B2=p.forwardRef((e,t)=>{const n=j2(ju,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Tr(ju,e.__scopeDialog);return s.modal?h.jsx(Dn,{present:r||s.open,children:h.jsx(lj,{...o,ref:t})}):null});B2.displayName=ju;var aj=Ji("DialogOverlay.RemoveScroll"),lj=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Tr(ju,n);return h.jsx(ng,{as:aj,allowPinchZoom:!0,shards:[o.contentRef],children:h.jsx(De.div,{"data-state":ig(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ls="DialogContent",L2=p.forwardRef((e,t)=>{const n=j2(Ls,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Tr(Ls,e.__scopeDialog);return h.jsx(Dn,{present:r||s.open,children:s.modal?h.jsx(cj,{...o,ref:t}):h.jsx(uj,{...o,ref:t})})});L2.displayName=Ls;var cj=p.forwardRef((e,t)=>{const n=Tr(Ls,e.__scopeDialog),r=p.useRef(null),o=Le(t,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return T2(s)},[]),h.jsx(O2,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(e.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:se(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:se(e.onFocusOutside,s=>s.preventDefault())})}),uj=p.forwardRef((e,t)=>{const n=Tr(Ls,e.__scopeDialog),r=p.useRef(!1),o=p.useRef(!1);return h.jsx(O2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),O2=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=e,a=Tr(Ls,n),l=p.useRef(null),c=Le(t,l);return w2(),h.jsxs(h.Fragment,{children:[h.jsx(tg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:h.jsx($l,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":ig(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(fj,{titleId:a.titleId}),h.jsx(pj,{contentRef:l,descriptionId:a.descriptionId})]})]})}),sg="DialogTitle",$2=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Tr(sg,n);return h.jsx(De.h2,{id:o.titleId,...r,ref:t})});$2.displayName=sg;var z2="DialogDescription",V2=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Tr(z2,n);return h.jsx(De.p,{id:o.descriptionId,...r,ref:t})});V2.displayName=z2;var U2="DialogClose",H2=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Tr(U2,n);return h.jsx(De.button,{type:"button",...r,ref:t,onClick:se(e.onClick,()=>o.onOpenChange(!1))})});H2.displayName=U2;function ig(e){return e?"open":"closed"}var W2="DialogTitleWarning",[dj,J2]=BR(W2,{contentName:Ls,titleName:sg,docsSlug:"dialog"}),fj=({titleId:e})=>{const t=J2(W2),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},hj="DialogDescriptionWarning",pj=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${J2(hj).contentName}}.`;return p.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},G2=M2,mj=I2,K2=_2,ag=B2,lg=L2,cg=$2,ug=V2,dg=H2;const Hs=G2,gj=K2,q2=p.forwardRef(({className:e,...t},n)=>h.jsx(ag,{ref:n,className:ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));q2.displayName=ag.displayName;const cs=p.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(gj,{children:[h.jsx(q2,{}),h.jsxs(lg,{ref:r,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,h.jsxs(dg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(wd,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cs.displayName=lg.displayName;const us=({className:e,...t})=>h.jsx("div",{className:ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});us.displayName="DialogHeader";const ua=({className:e,...t})=>h.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ua.displayName="DialogFooter";const ds=p.forwardRef(({className:e,...t},n)=>h.jsx(cg,{ref:n,className:ie("text-lg font-semibold leading-none tracking-tight",e),...t}));ds.displayName=cg.displayName;const da=p.forwardRef(({className:e,...t},n)=>h.jsx(ug,{ref:n,className:ie("text-sm text-muted-foreground",e),...t}));da.displayName=ug.displayName;const Rd=p.forwardRef(({className:e,type:t,...n},r)=>h.jsx("input",{type:t,className:ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Rd.displayName="Input";var xj="Label",Y2=p.forwardRef((e,t)=>h.jsx(De.label,{...e,ref:t,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=e.onMouseDown)==null||o.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Y2.displayName=xj;var X2=Y2;const vj=zl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Lt=p.forwardRef(({className:e,...t},n)=>h.jsx(X2,{ref:n,className:ie(vj(),e),...t}));Lt.displayName=X2.displayName;function fg(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var hg="Radio",[yj,Q2]=bn(hg),[wj,Ej]=yj(hg),Z2=p.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:s,disabled:i,value:a="on",onCheck:l,form:c,...u}=e,[f,d]=p.useState(null),m=Le(t,E=>d(E)),g=p.useRef(!1),y=f?c||!!f.closest("form"):!0;return h.jsxs(wj,{scope:n,checked:o,disabled:i,children:[h.jsx(De.button,{type:"button",role:"radio","aria-checked":o,"data-state":nD(o),"data-disabled":i?"":void 0,disabled:i,value:a,...u,ref:m,onClick:se(e.onClick,E=>{o||l==null||l(),y&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})}),y&&h.jsx(Cj,{control:f,bubbles:!g.current,name:r,value:a,checked:o,required:s,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});Z2.displayName=hg;var eD="RadioIndicator",tD=p.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...o}=e,s=Ej(eD,n);return h.jsx(Dn,{present:r||s.checked,children:h.jsx(De.span,{"data-state":nD(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t})})});tD.displayName=eD;var Cj=e=>{const{control:t,checked:n,bubbles:r=!0,...o}=e,s=p.useRef(null),i=fg(n),a=bd(t);return p.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&f){const d=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(d)}},[i,n,r]),h.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function nD(e){return e?"checked":"unchecked"}var Sj=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pg="RadioGroup",[bj,W7]=bn(pg,[la,Q2]),rD=la(),oD=Q2(),[Dj,Aj]=bj(pg),sD=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:s,required:i=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:f,...d}=e,m=rD(n),g=aa(c),[y,E]=Ur({prop:s,defaultProp:o,onChange:f});return h.jsx(Dj,{scope:n,name:r,required:i,disabled:a,value:y,onValueChange:E,children:h.jsx(Xm,{asChild:!0,...m,orientation:l,dir:g,loop:u,children:h.jsx(De.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":a?"":void 0,dir:g,...d,ref:t})})})});sD.displayName=pg;var iD="RadioGroupItem",aD=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...o}=e,s=Aj(iD,n),i=s.disabled||r,a=rD(n),l=oD(n),c=p.useRef(null),u=Le(t,c),f=s.value===o.value,d=p.useRef(!1);return p.useEffect(()=>{const m=y=>{Sj.includes(y.key)&&(d.current=!0)},g=()=>d.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),h.jsx(Qm,{asChild:!0,...a,focusable:!i,active:f,children:h.jsx(Z2,{disabled:i,required:s.required,checked:f,...l,...o,name:s.name,ref:u,onCheck:()=>s.onValueChange(o.value),onKeyDown:se(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:se(o.onFocus,()=>{var m;d.current&&((m=c.current)==null||m.click())})})})});aD.displayName=iD;var Pj="RadioGroupIndicator",lD=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,o=oD(n);return h.jsx(tD,{...o,...r,ref:t})});lD.displayName=Pj;var cD=sD,uD=aD,kj=lD;const _u=p.forwardRef(({className:e,...t},n)=>h.jsx(cD,{className:ie("grid gap-2",e),...t,ref:n}));_u.displayName=cD.displayName;const Lo=p.forwardRef(({className:e,...t},n)=>h.jsx(uD,{ref:n,className:ie("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(kj,{className:"flex items-center justify-center",children:h.jsx(lb,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Lo.displayName=uD.displayName;function tn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Tj(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Fc=43200,p1=1440;let Fj={};function Rj(){return Fj}function m1(e){const t=tn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function tu(e,t){const n=tn(e),r=tn(t),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}function Mj(e){return Tj(e,Date.now())}function Nj(e,t){const n=tn(e),r=tn(t),o=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return o*12+s}function Ij(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function jj(e,t){return+tn(e)-+tn(t)}function _j(e){const t=tn(e);return t.setHours(23,59,59,999),t}function Bj(e){const t=tn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Lj(e){const t=tn(e);return+_j(t)==+Bj(t)}function Oj(e,t){const n=tn(e),r=tn(t),o=tu(n,r),s=Math.abs(Nj(n,r));let i;if(s<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*s);let a=tu(n,r)===-o;Lj(tn(e))&&s===1&&tu(e,r)===1&&(a=!1),i=o*(s-Number(a))}return i===0?0:i}function $j(e,t,n){const r=jj(e,t)/1e3;return Ij(n==null?void 0:n.roundingMethod)(r)}const zj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Vj=(e,t,n)=>{let r;const o=zj[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function C0(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Uj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Wj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jj={date:C0({formats:Uj,defaultWidth:"full"}),time:C0({formats:Hj,defaultWidth:"full"}),dateTime:C0({formats:Wj,defaultWidth:"full"})},Gj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kj=(e,t,n,r)=>Gj[e];function ba(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[a]||e.values[i]}const s=e.argumentCallback?e.argumentCallback(t):t;return o[s]}}const qj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Qj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},e_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},t_=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},n_={ordinalNumber:t_,era:ba({values:qj,defaultWidth:"wide"}),quarter:ba({values:Yj,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ba({values:Xj,defaultWidth:"wide"}),day:ba({values:Qj,defaultWidth:"wide"}),dayPeriod:ba({values:Zj,defaultWidth:"wide",formattingValues:e_,defaultFormattingWidth:"wide"})};function Da(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;const i=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?o_(a,f=>f.test(i)):r_(a,f=>f.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(i.length);return{value:c,rest:u}}}function r_(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function o_(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function s_(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],s=t.match(e.parsePattern);if(!s)return null;let i=e.valueCallback?e.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=t.slice(o.length);return{value:i,rest:a}}}const i_=/^(\d+)(th|st|nd|rd)?/i,a_=/\d+/i,l_={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c_={any:[/^b/i,/^(a|c)/i]},u_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},d_={any:[/1/i,/2/i,/3/i,/4/i]},f_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p_={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},m_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},g_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},x_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v_={ordinalNumber:s_({matchPattern:i_,parsePattern:a_,valueCallback:e=>parseInt(e,10)}),era:Da({matchPatterns:l_,defaultMatchWidth:"wide",parsePatterns:c_,defaultParseWidth:"any"}),quarter:Da({matchPatterns:u_,defaultMatchWidth:"wide",parsePatterns:d_,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Da({matchPatterns:f_,defaultMatchWidth:"wide",parsePatterns:h_,defaultParseWidth:"any"}),day:Da({matchPatterns:p_,defaultMatchWidth:"wide",parsePatterns:m_,defaultParseWidth:"any"}),dayPeriod:Da({matchPatterns:g_,defaultMatchWidth:"any",parsePatterns:x_,defaultParseWidth:"any"})},y_={code:"en-US",formatDistance:Vj,formatLong:Jj,formatRelative:Kj,localize:n_,match:v_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w_(e,t,n){const r=Rj(),o=(n==null?void 0:n.locale)??r.locale??y_,s=2520,i=tu(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let l,c;i>0?(l=tn(t),c=tn(e)):(l=tn(e),c=tn(t));const u=$j(c,l),f=(m1(c)-m1(l))/1e3,d=Math.round((u-f)/60);let m;if(d<2)return n!=null&&n.includeSeconds?u<5?o.formatDistance("lessThanXSeconds",5,a):u<10?o.formatDistance("lessThanXSeconds",10,a):u<20?o.formatDistance("lessThanXSeconds",20,a):u<40?o.formatDistance("halfAMinute",0,a):u<60?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",1,a):d===0?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",d,a);if(d<45)return o.formatDistance("xMinutes",d,a);if(d<90)return o.formatDistance("aboutXHours",1,a);if(d<p1){const g=Math.round(d/60);return o.formatDistance("aboutXHours",g,a)}else{if(d<s)return o.formatDistance("xDays",1,a);if(d<Fc){const g=Math.round(d/p1);return o.formatDistance("xDays",g,a)}else if(d<Fc*2)return m=Math.round(d/Fc),o.formatDistance("aboutXMonths",m,a)}if(m=Oj(c,l),m<12){const g=Math.round(d/Fc);return o.formatDistance("xMonths",g,a)}else{const g=m%12,y=Math.trunc(m/12);return g<3?o.formatDistance("aboutXYears",y,a):g<9?o.formatDistance("overXYears",y,a):o.formatDistance("almostXYears",y+1,a)}}function E_(e,t){return w_(e,Mj(e),t)}const C_=({journal:e,isActive:t,onSelect:n,onInitiateRename:r,onInitiateDeleteJournal:o,onInitiateChangeColor:s})=>{const i=new Date(e.lastModifiedTimestamp),a=S_(e.color),l={background:t?`linear-gradient(135deg, ${a}15, ${a}30)`:`linear-gradient(135deg, ${a}10, ${a}20)`,borderLeft:`4px solid ${a}`};return h.jsxs("div",{className:`p-4 border rounded-md mb-3 shadow-sm transition-all hover:shadow-md
                ${t?"ring-1 ring-primary/30":""}
                relative overflow-hidden`,style:l,role:"listitem","data-testid":`journal-list-item-${e.id}`,"data-journal-name":e.name,children:[h.jsxs("div",{className:"absolute top-0 right-0 flex",children:[e.isDefault&&h.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary text-primary-foreground rounded-bl-md",children:"Default"}),t&&h.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary text-secondary-foreground rounded-bl-md",style:{marginLeft:e.isDefault?"1px":"0"},children:"Active"})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx("div",{className:"w-5 h-5 rounded-full mr-3 shadow-sm flex-shrink-0",style:{backgroundColor:a},title:`${e.color} color`}),h.jsx("h3",{className:"text-lg font-semibold truncate",children:e.name})]}),h.jsxs("div",{className:"text-sm text-muted-foreground mb-3 ml-8",children:[h.jsx("span",{className:"font-medium",children:e.entryCount})," ",e.entryCount===1?"entry":"entries"," •"," ",e.lastModifiedTimestamp>0?`Modified ${E_(i,{addSuffix:!0})}`:"No entries yet"]}),h.jsxs("div",{className:"flex flex-wrap gap-2 ml-8",children:[!t&&h.jsxs(be,{variant:"secondary",size:"sm",className:"whitespace-nowrap",onClick:()=>n(e.id),"aria-label":"Switch to this journal",children:[h.jsx("span",{className:"hidden sm:inline",children:"Switch to"}),h.jsx("span",{className:"sm:hidden",children:"Use"})]}),h.jsx(be,{variant:"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>r(e.id),"aria-label":"Rename journal",children:"Rename"}),h.jsx(be,{variant:"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>s(e.id),"aria-label":"Change journal color",children:"Change Color"}),h.jsx(be,{variant:"outline",size:"sm",className:"whitespace-nowrap text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>o(e.id),"aria-label":"Delete journal",children:"Delete"})]})]})]})};function S_(e){return{Slate:"#64748b",Red:"#ef4444",Orange:"#f97316",Green:"#22c55e",Blue:"#3b82f6",Indigo:"#6366f1",Violet:"#8b5cf6",Teal:"#14b8a6",Amber:"#f59e0b",Rose:"#f43f5e"}[e]||"#64748b"}const b_=({onSubmit:e,onCancel:t})=>{const[n,r]=p.useState(""),[o,s]=p.useState(""),[i,a]=p.useState("create"),[l,c]=p.useState("local"),u=xt.useRef(null);xt.useEffect(()=>{u.current&&i==="create"&&u.current.focus()},[i]);const f=d=>{if(d.preventDefault(),i==="create"){if(!n||n.trim()===""){s("Journal name cannot be empty");return}e(n,!1,void 0)}else e("",!0,l)};return h.jsxs("form",{onSubmit:f,className:"space-y-6",role:"form",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Lt,{className:"text-base font-medium",children:"Journal Setup"}),h.jsxs(_u,{value:i,onValueChange:d=>a(d),children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Lo,{value:"create",id:"create"}),h.jsx(Lt,{htmlFor:"create",children:"Create New Journal"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Lo,{value:"import",id:"import"}),h.jsx(Lt,{htmlFor:"import",children:"Import Existing Journal"})]})]})]}),i==="create"?h.jsxs("div",{className:"bg-secondary/10 -mx-6 px-6 py-4 border-y",children:[h.jsx(Lt,{htmlFor:"journal-name",className:"text-base font-medium mb-2 block",children:"Journal Name"}),h.jsx(Rd,{id:"journal-name",ref:u,value:n,onChange:d=>{r(d.target.value),s("")},placeholder:"E.g. Travel Journal, Work Notes, Daily Thoughts...",className:`text-base ${o?"border-destructive focus-visible:ring-destructive":""}`}),o&&h.jsx("p",{className:"text-destructive text-sm mt-2",children:o})]}):h.jsx("div",{className:"bg-secondary/10 -mx-6 px-6 py-4 border-y",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx(Lt,{className:"text-base font-medium",children:"Select Provider"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Choose where your existing journal is stored:"}),h.jsxs(_u,{value:l,onValueChange:d=>c(d),children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Lo,{value:"local",id:"local-provider"}),h.jsx(Lt,{htmlFor:"local-provider",children:"Local File System"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Lo,{value:"google",id:"google-provider"}),h.jsx(Lt,{htmlFor:"google-provider",children:"Google Drive"})]})]})]})}),h.jsx("div",{className:"text-sm text-muted-foreground",children:i==="create"?h.jsx("p",{children:"Your journal will be stored locally on this device."}):h.jsx("p",{children:"The journal name and data will be imported from the selected location."})})]}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx(be,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),h.jsx(be,{type:"submit",className:"px-5",disabled:i==="create"&&!n.trim(),children:i==="create"?"Create Journal":"Continue to Import"})]})]})},D_=({isOpen:e,onClose:t,journals:n,activeJournalId:r,onSelectJournal:o,onInitiateCreateNewJournal:s,onInitiateRenameJournal:i,onInitiateDeleteJournal:a,onInitiateChangeJournalColor:l,isCreating:c,onCreateJournal:u,onCancelCreate:f})=>{const d=[...n].sort((m,g)=>m.name.localeCompare(g.name));return h.jsx(Hs,{open:e,onOpenChange:m=>!m&&t(),children:h.jsxs(cs,{className:"sm:max-w-xl max-h-[90vh] md:max-h-[85vh] p-0 overflow-hidden",children:[h.jsxs(us,{className:"px-6 pt-6 pb-4",children:[h.jsx(ds,{className:"text-xl",children:c?"Create New Journal":"Your Journals"}),!c&&h.jsx(da,{className:"text-sm",children:d.length>0?"Select a journal to switch to, rename, change color, or delete.":"You don't have any journals yet. Create your first one!"})]}),c?h.jsx("div",{className:"px-6",children:h.jsx(b_,{onSubmit:u,onCancel:f})}):h.jsx(h.Fragment,{children:d.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6 space-y-4 bg-muted/30",children:[h.jsx("div",{className:"text-6xl",children:"📔"}),h.jsx("p",{className:"text-center text-muted-foreground",children:"No journals found. Create your first journal to get started!"}),h.jsx(be,{onClick:s,className:"mt-2",children:"Create First Journal"})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"max-h-[60vh] overflow-y-auto py-2 px-6 space-y-1",children:d.map(m=>h.jsx(C_,{journal:m,isActive:m.id===r,onSelect:o,onInitiateRename:i,onInitiateDeleteJournal:a,onInitiateChangeColor:l},m.id))}),h.jsxs(ua,{className:"px-6 py-4 bg-muted/20 border-t mt-2 flex justify-between sm:justify-between",children:[h.jsxs(be,{onClick:s,variant:"outline",className:"gap-2",children:[h.jsx("span",{className:"text-lg",children:"+"})," New Journal"]}),h.jsx(be,{onClick:t,children:"Close"})]})]})})]})})},Rc=50,A_=({isOpen:e,onClose:t,journal:n,onRename:r})=>{const[o,s]=p.useState(""),[i,a]=p.useState(!1),[l,c]=p.useState(null),u=p.useRef(null);p.useEffect(()=>{e&&n&&(s(n.name),c(null),a(!1),setTimeout(()=>{var d,m;(d=u.current)==null||d.focus(),(m=u.current)==null||m.select()},50))},[e,n]);const f=async d=>{d.preventDefault();const m=o.trim();if(!m){c("Journal name cannot be empty");return}if(m.length>Rc){c(`Journal name cannot exceed ${Rc} characters`);return}if(!n){c("No journal selected for renaming");return}if(m===n.name){t();return}try{a(!0),c(null),await r(n.id,m),t()}catch(g){c(g.message||"An error occurred while renaming the journal"),a(!1)}};return h.jsx(Hs,{open:e,onOpenChange:d=>!d&&t(),children:h.jsxs(cs,{className:"sm:max-w-md",children:[h.jsxs(us,{children:[h.jsx(ds,{children:"Rename Journal"}),h.jsxs(da,{children:['Change the name of "',n==null?void 0:n.name,'". Journal names help you organize your entries.']})]}),h.jsxs("form",{role:"form",onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Lt,{htmlFor:"journal-name",children:"Journal Name"}),h.jsx(Rd,{id:"journal-name",ref:u,value:o,onChange:d=>{s(d.target.value),l&&c(null)},onKeyDown:d=>{d.key==="Escape"&&(d.preventDefault(),t())},placeholder:"Enter journal name",maxLength:Rc,"aria-invalid":!!l,"aria-describedby":l?"journal-name-error":void 0,required:!0,disabled:i}),l&&h.jsx("p",{id:"journal-name-error",className:"text-sm text-destructive mt-1",role:"alert",children:l}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.length,"/",Rc," characters"]})]}),h.jsxs(ua,{children:[h.jsx(be,{type:"button",variant:"outline",onClick:t,disabled:i,className:"min-w-[80px]",children:"Cancel"}),h.jsx(be,{type:"submit",disabled:!o.trim()||i,className:"min-w-[80px]",children:i?h.jsxs(h.Fragment,{children:[h.jsx(Ut,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving"]}):"Save"})]})]})]})})},P_=[{name:"Slate",hex:"#64748b"},{name:"Red",hex:"#ef4444"},{name:"Orange",hex:"#f97316"},{name:"Green",hex:"#22c55e"},{name:"Blue",hex:"#3b82f6"},{name:"Indigo",hex:"#6366f1"},{name:"Violet",hex:"#8b5cf6"},{name:"Teal",hex:"#14b8a6"},{name:"Amber",hex:"#f59e0b"},{name:"Rose",hex:"#f43f5e"}],k_=({isOpen:e,onClose:t,journal:n,onSelectColor:r})=>{const[o,s]=p.useState(!1),[i,a]=p.useState(null),[l,c]=p.useState("");xt.useEffect(()=>{n&&(c(n.color),a(null),s(!1))},[n]);const u=async f=>{if(n)try{c(f),s(!0),a(null),await r(n.id,f),t()}catch(d){a(d.message||"An error occurred while changing the journal color"),s(!1)}};return h.jsx(Hs,{open:e,onOpenChange:f=>!f&&t(),children:h.jsxs(cs,{className:"sm:max-w-md",children:[h.jsx(us,{children:h.jsx(ds,{children:"Select Journal Color"})}),i&&h.jsx("p",{className:"text-sm text-destructive mb-4",children:i}),h.jsx("div",{className:"grid grid-cols-5 gap-3 py-4",children:P_.map(f=>h.jsx("button",{className:`w-full aspect-square rounded-full ${l===f.name?"ring-2 ring-offset-2 ring-primary":"hover:ring-2 hover:ring-offset-1 hover:ring-primary/50"}`,style:{backgroundColor:f.hex},title:f.name,onClick:()=>u(f.name),disabled:o,"aria-label":`Select ${f.name} color`},f.name))}),h.jsx(ua,{children:h.jsx(be,{onClick:t,variant:"outline",disabled:o,children:"Cancel"})})]})})},T_=({isOpen:e,onClose:t,journal:n,onConfirmDelete:r})=>{const[o,s]=p.useState(""),[i,a]=p.useState(!1),[l,c]=p.useState(null);if(p.useEffect(()=>{e&&n&&(s(""),c(null),a(!1))},[e,n]),!n)return null;const u=o===n.name,f=async()=>{if(!u){c("Please type the exact journal name to confirm deletion");return}try{a(!0),c(null),await r(n.id)}catch(d){c(d.message||"An error occurred while deleting the journal"),a(!1)}};return h.jsx(Hs,{open:e,onOpenChange:d=>!d&&t(),children:h.jsxs(cs,{className:"sm:max-w-md",children:[h.jsxs(us,{children:[h.jsx(ds,{className:"text-destructive",children:"Delete Journal"}),h.jsxs(da,{children:['This action will permanently delete the journal "',n.name,'" and all its entries and photos. This cannot be undone.']})]}),h.jsxs("div",{className:"space-y-4 py-2",children:[h.jsx("div",{className:"bg-destructive/10 text-destructive p-3 rounded-md text-sm",children:h.jsxs("p",{children:["You are about to delete ",h.jsx("strong",{children:n.name}),", which contains ",n.entryCount," ",n.entryCount===1?"entry":"entries","."]})}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Lt,{htmlFor:"confirm-text",children:["To confirm, type ",h.jsxs("strong",{children:['"',n.name,'"']})," below"]}),h.jsx(Rd,{id:"confirm-text",value:o,onChange:d=>s(d.target.value),placeholder:`Type ${n.name}`,autoFocus:!0}),l&&h.jsx("p",{className:"text-sm text-destructive",children:l})]})]}),h.jsxs(ua,{children:[h.jsx(be,{type:"button",variant:"outline",onClick:t,disabled:i,children:"Cancel"}),h.jsx(be,{type:"button",variant:"destructive",onClick:f,disabled:!u||i,children:i?"Deleting...":"Delete Journal"})]})]})})};var F_="Separator",g1="horizontal",R_=["horizontal","vertical"],dD=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=g1,...o}=e,s=M_(r)?r:g1,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return h.jsx(De.div,{"data-orientation":s,...a,...o,ref:t})});dD.displayName=F_;function M_(e){return R_.includes(e)}var fD=dD;const Zh=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>h.jsx(fD,{ref:o,decorative:n,orientation:t,className:ie("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Zh.displayName=fD.displayName;const N_=zl("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Co=p.forwardRef(({className:e,variant:t,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:ie(N_({variant:t}),e),...n}));Co.displayName="Alert";const So=p.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:ie("mb-1 font-medium leading-none tracking-tight",e),...t}));So.displayName="AlertTitle";const bo=p.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:ie("text-sm [&_p]:leading-relaxed",e),...t}));bo.displayName="AlertDescription";const gr=class gr{constructor(t){this.cachedHandles={},this.journalMetaService=t}async getDirectoryHandleForJournal(t){if(this.cachedHandles[t])return this.cachedHandles[t];try{const n=await this.retrieveDirectoryHandle(t);if(n){if(await this.verifyPermission(n))return this.cachedHandles[t]=n,n;console.warn("Permission denied for stored directory handle, need to request again")}}catch(n){console.error("Error retrieving directory handle:",n)}return null}async openHandleDb(){return new Promise((t,n)=>{const r=indexedDB.open(gr.HANDLE_DB_NAME,1);r.onupgradeneeded=o=>{const s=o.target.result;s.objectStoreNames.contains(gr.HANDLE_STORE_NAME)||s.createObjectStore(gr.HANDLE_STORE_NAME)},r.onsuccess=o=>{t(o.target.result)},r.onerror=o=>{console.error("Error opening handle database:",o),n(new Error("Could not open handle database"))}})}async storeDirectoryHandle(t,n){try{const r=await this.openHandleDb();return new Promise((o,s)=>{const i=r.transaction(gr.HANDLE_STORE_NAME,"readwrite"),l=i.objectStore(gr.HANDLE_STORE_NAME).put(n,t);i.oncomplete=()=>{o()},i.onerror=c=>{console.error("Error storing directory handle:",c),s(new Error("Failed to store directory handle"))}})}catch(r){throw console.error("Error in storeDirectoryHandle:",r),r}}async retrieveDirectoryHandle(t){try{const n=await this.openHandleDb();return new Promise((r,o)=>{const a=n.transaction(gr.HANDLE_STORE_NAME,"readonly").objectStore(gr.HANDLE_STORE_NAME).get(t);a.onsuccess=()=>{const l=a.result;r(l||null)},a.onerror=l=>{console.error("Error retrieving directory handle:",l),o(new Error("Failed to retrieve directory handle"))}})}catch(n){return console.error("Error in retrieveDirectoryHandle:",n),null}}async verifyPermission(t){try{return await t.requestPermission({mode:"readwrite"})==="granted"}catch(n){return console.error("Error verifying permission:",n),!1}}async getOrCreateDirectory(t,n){return t.getDirectoryHandle(n,{create:!0})}async connect(t){try{const n=await this.getDirectoryHandleForJournal(t);return n?await n.requestPermission({mode:"readwrite"})==="granted":!1}catch(n){return console.error("Error connecting to local filesystem:",n),!1}}async disconnect(t){this.cachedHandles[t]&&delete this.cachedHandles[t]}async getSyncLock(t){try{const n=await this.getDirectoryHandleForJournal(t);if(!n)return null;try{const s=await(await(await n.getFileHandle("sync_lock.json")).getFile()).text();return JSON.parse(s)}catch{return null}}catch(n){return console.error("Error getting sync lock:",n),null}}async getDataFile(t,n){try{const r=await this.getDirectoryHandleForJournal(t);if(!r)return null;const o=`journal_content_${n}.json`;try{const a=await(await(await r.getFileHandle(o)).getFile()).text();return JSON.parse(a)}catch{return null}}catch(r){return console.error("Error getting data file:",r),null}}async uploadDataFile(t,n,r){try{const o=await this.getDirectoryHandleForJournal(t);if(!o)return{success:!1};const s=`journal_content_${n}.json`,a=await(await o.getFileHandle(s,{create:!0})).createWritable();return await a.write(JSON.stringify(r,null,2)),await a.close(),{success:!0,fileIdentifier:s}}catch(o){return console.error("Error uploading data file:",o),{success:!1}}}async updateSyncLock(t,n,r){try{const o=await this.getDirectoryHandleForJournal(t);if(!o)return{success:!1};if(r!==null){const a=await this.getSyncLock(t);if(a){if(a.currentDataFileVersionId!==r)return{success:!1}}else if(r!==null)return{success:!1}}const i=await(await o.getFileHandle("sync_lock.json",{create:!0})).createWritable();return await i.write(JSON.stringify(n,null,2)),await i.close(),{success:!0}}catch(o){return console.error("Error updating sync lock:",o),{success:!1}}}async deleteOldDataFile(t,n){try{const r=await this.getDirectoryHandleForJournal(t);if(!r)return{success:!0};const o=`journal_content_${n}.json`;try{return await r.removeEntry(o),{success:!0}}catch(s){if(console.warn(`Could not delete old data file ${o}:`,s),s.name==="NotFoundError")return{success:!0}}return{success:!0}}catch(r){return console.error("Error deleting old data file:",r),{success:!1}}}async listPhotoFiles(t){try{const n=await this.getDirectoryHandleForJournal(t);if(!n)return[];let r;try{r=await n.getDirectoryHandle("photos")}catch{return[]}const o=[];for await(const s of r.values())if(s.kind==="file"){const i=s.name,a=i.lastIndexOf("."),l=a>0?i.substring(0,a):i;o.push({name:i,contentHash:l})}return o}catch(n){return console.error("Error listing photo files:",n),[]}}async uploadPhotoBlob(t,n,r,o){try{const s=await this.getDirectoryHandleForJournal(t);if(!s)return{success:!1};const i=await this.getOrCreateDirectory(s,"photos"),a=`${n}.${r}`,c=await(await i.getFileHandle(a,{create:!0})).createWritable();return await c.write(o),await c.close(),{success:!0}}catch(s){return console.error("Error uploading photo blob:",s),{success:!1}}}async downloadPhotoBlob(t,n){try{const r=await this.getDirectoryHandleForJournal(t);if(!r)return null;let o;try{o=await r.getDirectoryHandle("photos")}catch{return null}try{return await(await o.getFileHandle(n)).getFile()}catch{return null}}catch(r){return console.error("Error downloading photo blob:",r),null}}async getFolderReference(t){try{const n=await this.journalMetaService.getJournalById(t);return(n==null?void 0:n.syncProviderFolderReference)||null}catch(n){return console.error("Error getting folder reference:",n),null}}async setFolderReference(t,n){try{await this.journalMetaService.updateJournalMetadata(t,{syncProviderType:"local",syncProviderFolderReference:n})}catch(r){console.error("Error setting folder reference:",r)}}async selectFolder(t){try{const n=await window.showDirectoryPicker({id:`phojo-journal-${t}`.substring(0,32),mode:"readwrite",startIn:"documents"});this.cachedHandles[t]=n,await this.storeDirectoryHandle(t,n);const r=n.name;return await this.journalMetaService.updateJournalMetadata(t,{syncProviderType:"local",syncProviderFolderReference:r}),t}catch(n){return console.error("Error selecting folder:",n),null}}async checkForExistingData(t){try{const n=await this.getDirectoryHandleForJournal(t);if(!n)return!1;try{return await n.getFileHandle("sync_lock.json"),!0}catch{return!1}}catch(n){return console.error("Error checking for existing data:",n),!1}}};gr.HANDLE_DB_NAME="phojo-fs-handles",gr.HANDLE_STORE_NAME="directory-handles";let Fs=gr;const Zs={CLIENT_ID:"898284076604-kanrimrean0dlo2253odat4fjrmcgmrt.apps.googleusercontent.com",API_KEY:"AIzaSyDgKMr4PlrIHKa5mQSwtoJ_1TfvYHM24Xo",APP_ID:"phojo-458117",DISCOVERY_DOCS:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],SCOPES:"https://www.googleapis.com/auth/drive.file"},Mc="sync_lock.json",S0="photos",I_="phojoGoogleDriveToken_";class ep{constructor(t){this.gapiInitialized=!1,this.gisInitialized=!1,this.driveApiLoaded=!1,this.pickerApiLoaded=!1,this._isAttemptingSilentAuthFor={},this._journalsWithSuccessfulAuth=new Set,this.accessTokens={},this.journalMetaService=t;try{const n=localStorage.getItem("googleDriveSuccessfulAuthJournals");n&&(this._journalsWithSuccessfulAuth=new Set(JSON.parse(n)))}catch(n){console.warn("Failed to load successful auth journals from localStorage:",n)}this._initializeGoogleApis().catch(n=>{console.error("Initial Google API initialization failed:",n)})}async _loadGapiScript(){return typeof gapi<"u"&&gapi.load?(this.gapiInitialized=!0,Promise.resolve()):new Promise((t,n)=>{const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.async=!0,r.defer=!0,r.onload=()=>{this.gapiInitialized=!0,t()},r.onerror=o=>n(new Error(`Failed to load GAPI script: ${o}`)),document.body.appendChild(r)})}async _loadGisScript(){return typeof google<"u"&&google.accounts?(this.gisInitialized=!0,Promise.resolve()):new Promise((t,n)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{this.gisInitialized=!0,t()},r.onerror=o=>n(new Error(`Failed to load GIS script: ${o}`)),document.body.appendChild(r)})}async _initializeGoogleApis(){if(!(this.driveApiLoaded&&this.pickerApiLoaded&&this.gisInitialized)){if(await this._loadGapiScript(),await this._loadGisScript(),!this.gapiInitialized)throw new Error("GAPI script not loaded after attempt.");if(!this.gisInitialized)throw new Error("GIS script not loaded after attempt.");return new Promise((t,n)=>{gapi.load("client:picker",async()=>{try{if(!gapi.client&&(await new Promise(r=>setTimeout(r,100)),!gapi.client))throw new Error("gapi.client still not available after load.");await gapi.client.init({apiKey:Zs.API_KEY,discoveryDocs:Zs.DISCOVERY_DOCS}),this.driveApiLoaded=!0,this.pickerApiLoaded=!0,console.log("Google Drive API and Picker client initialized."),t()}catch(r){console.error("Error initializing Google Drive API client:",r),this.driveApiLoaded=!1,this.pickerApiLoaded=!1,n(r)}})})}}async _ensureApisReady(){if(!this.driveApiLoaded||!this.pickerApiLoaded||!this.gisInitialized){if(console.log("APIs not ready, attempting to initialize..."),await this._initializeGoogleApis(),!this.driveApiLoaded||!this.pickerApiLoaded||!this.gisInitialized)throw new Error("Failed to initialize required Google APIs.");console.log("APIs initialized successfully on demand.")}}async _getAccessToken(t,n=!1){const r=I_+t;await this._ensureApisReady();const o=Date.now();if(this.accessTokens[t]&&this.accessTokens[t].expiry>o)return gapi&&gapi.client&&gapi.client.setToken({access_token:this.accessTokens[t].token}),this.accessTokens[t].token;const s=localStorage.getItem(r);if(s)try{const i=JSON.parse(s);if(i.token&&i.expiry>o)return this.accessTokens[t]=i,gapi&&gapi.client&&gapi.client.setToken({access_token:i.token}),console.log(`Using token from local storage for journal ${t}`),i.token;localStorage.removeItem(r)}catch(i){console.warn("Failed to parse token from local storage:",i),localStorage.removeItem(r)}return new Promise(async(i,a)=>{try{if(!google||!google.accounts||!google.accounts.oauth2){a(new Error("Google Identity Services (GIS) not available."));return}this._isAttemptingSilentAuthFor||(this._isAttemptingSilentAuthFor={});const l=google.accounts.oauth2.initTokenClient({client_id:Zs.CLIENT_ID,scope:Zs.SCOPES,callback:c=>{if(c&&c.access_token){const u=(parseInt(c.expires_in,10)||3600)*1e3,f=Date.now()+u-3e5;gapi&&gapi.client&&gapi.client.setToken({access_token:c.access_token}),this.accessTokens[t]={token:c.access_token,expiry:f},localStorage.setItem(r,JSON.stringify({token:c.access_token,expiry:f})),this._journalsWithSuccessfulAuth.has(t)||(this._journalsWithSuccessfulAuth.add(t),localStorage.setItem("googleDriveSuccessfulAuthJournals",JSON.stringify([...this._journalsWithSuccessfulAuth]))),console.log(`Access token obtained for journal ${t}.`),this._isAttemptingSilentAuthFor[t]=!1,i(c.access_token)}else{const u=c.error||(c.type==="popup_closed"?"popup_closed_by_user":"unknown_token_error"),f=["popup_closed_by_user","user_declined_consent","consent_required","interaction_required","access_denied","user_logged_out"];this._isAttemptingSilentAuthFor[t]&&n&&f.includes(u)?(console.log(`Silent token acquisition failed for journal ${t} (${u}). Attempting interactive.`),this._isAttemptingSilentAuthFor[t]=!1,l.requestAccessToken({prompt:"consent"})):(console.error(`Failed to obtain access token for journal ${t}. Error: ${u}`,c),this._journalsWithSuccessfulAuth.has(t)&&(this._journalsWithSuccessfulAuth.delete(t),localStorage.setItem("googleDriveSuccessfulAuthJournals",JSON.stringify([...this._journalsWithSuccessfulAuth])),console.log(`Removed journal ${t} from successful auth tracking due to auth failure`)),this._isAttemptingSilentAuthFor[t]=!1,a(new Error(`Failed to obtain access token. ${u}`)))}},error_callback:c=>{console.error(`Google Token Client error_callback for journal ${t}:`,c),this._isAttemptingSilentAuthFor[t]&&n?(console.log(`Silent token acquisition failed in error_callback for journal ${t}. Attempting interactive.`),this._isAttemptingSilentAuthFor[t]=!1,l.requestAccessToken({prompt:"consent"})):(this._isAttemptingSilentAuthFor[t]=!1,this._journalsWithSuccessfulAuth.has(t)&&(this._journalsWithSuccessfulAuth.delete(t),localStorage.setItem("googleDriveSuccessfulAuthJournals",JSON.stringify([...this._journalsWithSuccessfulAuth])),console.log(`Removed journal ${t} from successful auth tracking due to token operation failure`)),a(new Error(`Token client operation error: ${c.type||c.message||"Unknown error"}`)))}});this._journalsWithSuccessfulAuth.has(t)?(this._isAttemptingSilentAuthFor[t]=!0,console.log(`Attempting silent auth for journal ${t} with previous success history`),l.requestAccessToken({prompt:"none"})):(console.log(`No previous successful auth for journal ${t}, going straight to consent`),l.requestAccessToken({prompt:"consent"}))}catch(l){console.error(`Error in _getAccessToken setup for journal ${t}:`,l),this._isAttemptingSilentAuthFor[t]=!1,a(l)}})}async connect(t){try{if(await this._ensureApisReady(),!await this._getAccessToken(t,!0))return console.warn(`Connection failed for journal ${t}: Could not obtain access token.`),!1;const r=await this.getFolderReference(t);return!0}catch(n){return console.error(`Error connecting to Google Drive for journal ${t}:`,n),!1}}async disconnect(t){const n=this.accessTokens[t];if(n&&n.token&&typeof google<"u"&&google.accounts&&google.accounts.oauth2)try{await google.accounts.oauth2.revoke(n.token,()=>{console.log(`Token revoked for journal ${t}`)})}catch(r){console.warn(`Error revoking token for journal ${t}:`,r)}delete this.accessTokens[t],console.log(`Disconnected from Google Drive for journal ${t}.`)}async _getJournalRootFolderId(t){const n=await this.getFolderReference(t);return n?n.id:null}async _executeDriveRequest(t){try{return(await t()).result}catch(n){throw console.error("Google Drive API request error:",n),n.status===401&&console.warn("Google Drive API returned 401 (Unauthorized). Token might be invalid or expired."),n}}async _findFileInFolder(t,n,r){let o=`name = '${n.replace(/'/g,"\\'")}' and '${t}' in parents and trashed = false`;r&&(o+=` and mimeType = '${r}'`);const s=await this._executeDriveRequest(()=>gapi.client.drive.files.list({q:o,fields:"files(id, name, headRevisionId, version, modifiedTime, mimeType)",pageSize:1}));return s.files&&s.files.length>0?s.files[0]:null}async _readFileContent(t){try{const n=await gapi.client.drive.files.get({fileId:t,alt:"media"});return typeof n.body=="string"?n.body:JSON.stringify(n.body)}catch(n){if(console.error(`Error reading file content for fileId '${t}':`,n),n.status===404)return null;throw n}}async _getOrCreateSubFolder(t,n,r){const o=await this._findFileInFolder(n,r,"application/vnd.google-apps.folder");if(o&&o.id)return o.id;const s={name:r,mimeType:"application/vnd.google-apps.folder",parents:[n]};return(await this._executeDriveRequest(()=>gapi.client.drive.files.create({resource:s,fields:"id"}))).id||null}async getSyncLock(t){await this._getAccessToken(t,!1);const n=await this._getJournalRootFolderId(t);if(!n)return console.warn("getSyncLock: No root folder ID found for journal."),null;const r=await this._findFileInFolder(n,Mc);if(!r||!r.id)return null;const o=await this._readFileContent(r.id);return o?JSON.parse(o):null}async getDataFile(t,n){await this._getAccessToken(t,!1);const r=await this._getJournalRootFolderId(t);if(!r)return null;const o=`journal_content_${n}.json`,s=await this._findFileInFolder(r,o);if(!s||!s.id)return null;const i=await this._readFileContent(s.id);return i?JSON.parse(i):null}async _uploadFile(t,n,r,o,s,i){var m,g;const a=(m=this.accessTokens[t])==null?void 0:m.token;if(!a)throw new Error("No access token available for upload.");const l={name:r,mimeType:s};i||(l.parents=[n]);const c=new FormData;c.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),c.append("file",o instanceof Blob?o:new Blob([o],{type:s}));let u="https://www.googleapis.com/upload/drive/v3/files",f="POST";i?(u+=`/${i}?uploadType=multipart&fields=id,name,headRevisionId`,f="PATCH"):u+="?uploadType=multipart&fields=id,name,headRevisionId";const d=await fetch(u,{method:f,headers:new Headers({Authorization:"Bearer "+a}),body:c});if(!d.ok){const y=await d.json();throw console.error(`Error ${f==="POST"?"uploading new":"updating"} file '${r}':`,y),new Error(`File ${f} failed: ${((g=y==null?void 0:y.error)==null?void 0:g.message)||d.statusText}`)}return await d.json()}async uploadDataFile(t,n,r){try{await this._getAccessToken(t,!1);const o=await this._getJournalRootFolderId(t);if(!o)return{success:!1,fileIdentifier:void 0};const s=`journal_content_${n}.json`,i=JSON.stringify(r,null,2),a=await this._uploadFile(t,o,s,i,"application/json");return{success:!!a,fileIdentifier:a==null?void 0:a.id}}catch(o){return console.error("Error uploading data file:",o),{success:!1}}}async updateSyncLock(t,n,r){try{await this._getAccessToken(t,!1);const o=await this._getJournalRootFolderId(t);if(!o)return{success:!1};const s=await this._findFileInFolder(o,Mc);if(r!==null){if(!s||!s.id)return console.warn("UpdateSyncLock: Expected lock file not found, but an expected version was provided."),{success:!1};const l=await this._readFileContent(s.id);if(!l)return console.warn("UpdateSyncLock: Could not read current lock file content for comparison."),{success:!1};const c=JSON.parse(l);if(c.currentDataFileVersionId!==r)return console.warn(`UpdateSyncLock: Conflict. Expected version '${r}', found '${c.currentDataFileVersionId}'.`),{success:!1}}const i=JSON.stringify(n,null,2),a=await this._uploadFile(t,o,Mc,i,"application/json",s==null?void 0:s.id);return{success:!!a,newEtag:a==null?void 0:a.headRevisionId}}catch(o){return console.error("Error updating sync lock:",o),{success:!1}}}async deleteOldDataFile(t,n){try{await this._getAccessToken(t,!1);const r=await this._getJournalRootFolderId(t);if(!r)return{success:!1};const o=`journal_content_${n}.json`,s=await this._findFileInFolder(r,o);return s&&s.id?(await this._executeDriveRequest(()=>gapi.client.drive.files.delete({fileId:s.id})),console.log(`Deleted old data file: ${o}`),{success:!0}):(console.warn(`Old data file not found for deletion: ${o}`),{success:!0})}catch(r){return console.error("Error deleting old data file:",r),{success:!1}}}async listPhotoFiles(t){const n=[];try{await this._getAccessToken(t,!1);const r=await this._getJournalRootFolderId(t);if(!r)return n;const o=await this._getOrCreateSubFolder(t,r,S0);if(!o)return n;let s;do{const i=await this._executeDriveRequest(()=>gapi.client.drive.files.list({q:`'${o}' in parents and trashed = false and mimeType != 'application/vnd.google-apps.folder'`,fields:"nextPageToken, files(name)",pageSize:100,pageToken:s}));i.files&&i.files.forEach(a=>{const l=a.name,c=l.lastIndexOf("."),u=c>0?l.substring(0,c):l;n.push({name:l,contentHash:u})}),s=i.nextPageToken}while(s);return n}catch(r){return console.error("Error listing photo files:",r),n}}async uploadPhotoBlob(t,n,r,o){try{await this._getAccessToken(t,!1);const s=await this._getJournalRootFolderId(t);if(!s)return{success:!1};const i=await this._getOrCreateSubFolder(t,s,S0);if(!i)return{success:!1};const a=`${n}.${r}`;return{success:!!await this._uploadFile(t,i,a,o,o.type||"application/octet-stream")}}catch(s){return console.error("Error uploading photo blob:",s),{success:!1}}}async downloadPhotoBlob(t,n){var r;try{await this._getAccessToken(t,!1);const o=await this._getJournalRootFolderId(t);if(!o)return null;const s=await this._getOrCreateSubFolder(t,o,S0);if(!s)return null;const i=await this._findFileInFolder(s,n);if(!i||!i.id)return null;const a=(r=this.accessTokens[t])==null?void 0:r.token;if(!a)throw new Error("No access token available for download.");const l=await fetch(`https://www.googleapis.com/drive/v3/files/${i.id}?alt=media`,{method:"GET",headers:new Headers({Authorization:"Bearer "+a})});return l.ok?await l.blob():(console.error(`Error downloading photo blob ${n}: ${l.statusText}`),null)}catch(o){return console.error("Error downloading photo blob:",o),null}}async getFolderReference(t){const n=this.journalMetaService.getJournalById(t);return n&&n.syncProviderType==="google"&&n.syncProviderFolderReference?n.syncProviderFolderReference:null}async setFolderReference(t,n){if(!(!n||!n.hasOwnProperty("id")||!n.hasOwnProperty("name")||!n.hasOwnProperty("url")))try{await this.journalMetaService.updateJournalMetadata(t,{syncProviderType:"google",syncProviderFolderReference:n})}catch(r){console.error("Error setting folder reference:",r)}}async selectFolder(t){await this._ensureApisReady();const n=await this._getAccessToken(t,!0);return n?new Promise((r,o)=>{if(!google||!google.picker){o(new Error("Google Picker API not available."));return}const s=document.body.style.pointerEvents;document.body.style.pointerEvents="";const i=async c=>{if(c.action===google.picker.Action.PICKED){document.body.style.pointerEvents=s;const u=c.docs&&c.docs[0];u&&u.id&&u.mimeType==="application/vnd.google-apps.folder"?(await this.setFolderReference(t,{id:u.id,name:u.name,url:u.url}),r({id:u.id,name:u.name,url:u.url})):(console.warn("No folder selected or selection was not a folder."),r(null))}else c.action===google.picker.Action.CANCEL&&(document.body.style.pointerEvents=s,console.log("Folder selection cancelled by user."),r(null))},a=new google.picker.View(google.picker.ViewId.FOLDERS);a.setMimeTypes("application/vnd.google-apps.folder"),a.setOptions({selectFolder:!0}),new google.picker.PickerBuilder().setAppId(Zs.APP_ID).setOAuthToken(n).setDeveloperKey(Zs.API_KEY).addView(a).setCallback(i).build().setVisible(!0)}):(console.error("Could not get access token for folder selection."),null)}async checkForExistingData(t){try{await this._getAccessToken(t,!1);const n=await this._getJournalRootFolderId(t);if(!n)return!1;const r=await this._findFileInFolder(n,Mc);return!!(r&&r.id)}catch(n){return console.error("Error checking for existing data:",n),!1}}}const j_=({open:e,onClose:t,journalId:n,journalName:r,journalMetaService:o,journal:s,isImportMode:i=!1})=>{const[a,l]=p.useState("none"),[c,u]=p.useState(!1),[f,d]=p.useState(""),[m,g]=p.useState(""),[y,E]=p.useState(""),[w,x]=p.useState(!1),[v,C]=p.useState(!1),[b,D]=p.useState(Tn.IDLE),[A,P]=p.useState(null),[F,k]=p.useState(null);p.useEffect(()=>{e&&(async()=>{try{u(!0);const B=await o.getJournalById(n);if(B){const R=B.syncProviderType||"none";if(l(R),R==="local"){const N=new Fs(o);P(N);const V=new Cs(N,s,o);if(k(V),B.syncProviderFolderReference)try{const I=await N.getFolderReference(n);if(I){const L=JSON.parse(I);E(L.name||"(Local folder)")}}catch(I){console.error("Error getting folder name:",I),E("(Local folder)")}}else if(R==="google"){const N=new ep(o);P(N);const V=new Cs(N,s,o);if(k(V),B.syncProviderFolderReference)try{const I=await N.getFolderReference(n);I&&E(I.name)}catch(I){console.error("Error getting Google Drive folder:",I),E("Google Drive folder")}}}u(!1)}catch(B){console.error("Error loading sync settings:",B),g("Error loading sync settings"),u(!1)}})()},[e,n,o,s]);const T=async j=>{if(l(j),j==="none"){P(null),k(null),E(""),x(!1);try{u(!0),await o.updateJournalMetadata(n,{syncProviderType:"none",syncProviderFolderReference:void 0,lastKnownProviderVersionId:void 0,lastKnownProviderTimestamp:void 0}),d("Sync disabled successfully"),u(!1)}catch(B){console.error("Error disabling sync:",B),g("Error disabling sync"),u(!1)}}else if(j!==a){P(null),k(null),E(""),x(!1);let B;if(j==="local")B=new Fs(o);else if(j==="google")B=new ep(o);else{console.error("Unknown provider type:",j);return}P(B);const R=new Cs(B,s,o);k(R);try{await o.updateJournalMetadata(n,{syncProviderType:j})}catch(N){console.error("Error updating provider type:",N)}}},M=async()=>{if(A)try{u(!0),d("Selecting folder..."),g("");const j=await A.selectFolder(n);if(j){if(await A.setFolderReference(n,j),a==="google")E("Selected Google Drive folder"),await o.updateJournalMetadata(n,{syncProviderFolderReference:j});else try{const B=JSON.parse(j);E(B.name||"(Selected folder)")}catch{E("(Selected folder)")}if(A){const B=await A.checkForExistingData(n);x(B),B?(d("Found existing journal data in this folder."),i&&B&&F&&setTimeout(()=>{_()},500)):d("Folder selected successfully.")}}else g("Folder selection cancelled or failed.");u(!1)}catch(j){console.error("Error selecting folder:",j),g("Error selecting folder"),u(!1)}},_=async()=>{if(F)try{if(u(!0),d("Importing existing data..."),g(""),await F.checkAndImportExistingData(n)){let B="",R=0;if(i&&A)try{const N=await A.getSyncLock(n);if(N&&N.currentDataFileVersionId){const V=await A.getDataFile(n,N.currentDataFileVersionId);V&&V.journalProperties&&V.journalProperties.name&&(B=V.journalProperties.name,await o.updateJournalMetadata(n,{name:B}))}}catch(N){console.error("Error extracting journal name from import:",N)}try{const N=await s.getAllEntries({includeDeleted:!1});R=N.length;let V=null;N.length>0&&(V=N.reduce((I,L)=>{const H=new Date(L.updatedAt);return H>I?H:I},new Date(0))),await o.updateJournalMetadata(n,{entryCount:R,lastModifiedTimestamp:V?V.getTime():Date.now()}),d(B?`Journal "${B}" imported successfully with ${R} entries.`:`Journal imported successfully with ${R} entries.`)}catch(N){console.error("Error updating entry statistics:",N),d(B?`Journal "${B}" imported successfully.`:"Journal imported successfully.")}}else g("Failed to import existing data.");u(!1)}catch(j){console.error("Error importing data:",j),g(`Error importing data: ${(j==null?void 0:j.message)||"Unknown error"}`),u(!1)}},O=async()=>{if(F)try{C(!0),d("Syncing..."),g("");const j=(R,N)=>{D(R),d(N)};F.addStatusListener(j);const B=await F.performSync(n);B.success?d(`Sync completed successfully. ${B.updatedEntryCount} entries updated.`):g(`Sync failed: ${B.message}`),F.removeStatusListener(j),C(!1)}catch(j){console.error("Error syncing:",j),g(`Error syncing: ${(j==null?void 0:j.message)||"Unknown error"}`),C(!1)}},W=()=>v?h.jsxs("div",{className:"flex items-center my-2 space-x-2",children:[h.jsx(Ut,{className:"h-4 w-4 animate-spin"}),h.jsx("p",{className:"text-sm text-gray-500",children:f})]}):null;return h.jsx(Hs,{open:e,onOpenChange:()=>t(),children:h.jsxs(cs,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[h.jsxs(us,{children:[h.jsx(ds,{children:i?`Import ${r}`:`Sync Settings for ${r}`}),h.jsx(da,{children:i?"Select a folder with existing journal data to import from":"Configure synchronization settings for this journal"})]}),c?h.jsx("div",{className:"flex justify-center items-center p-6",children:h.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):i&&!y?h.jsxs("div",{className:"space-y-6",children:[h.jsxs(Co,{variant:"default",className:"bg-blue-50 border-blue-200",children:[h.jsx(So,{className:"text-blue-800 font-medium",children:"Required Step: Select a Folder"}),h.jsx(bo,{className:"text-blue-700",children:"To complete the import, you must select the folder where your existing journal is stored."})]}),a==="google"?h.jsxs("div",{className:"space-y-4",children:[h.jsxs(Co,{className:"bg-blue-50 border-blue-200",children:[h.jsx(So,{className:"text-blue-800",children:"Google Drive Instructions"}),h.jsx(bo,{className:"text-blue-700 text-sm space-y-2",children:h.jsxs("ol",{className:"list-decimal list-inside space-y-1 pl-1",children:[h.jsx("li",{children:"Select the folder where your journal is stored on Google Drive"}),h.jsxs("li",{children:["You need ",h.jsx("strong",{children:"edit access"})," to this folder"]}),h.jsxs("li",{children:["This will request access to ",h.jsx("strong",{children:"all files"})," in Google Drive, but will only use the folder you select"]})]})})]}),h.jsxs(be,{onClick:M,disabled:c||v,className:"w-full flex items-center justify-center gap-2 py-6 text-base",children:[h.jsx(Af,{className:"h-5 w-5"}),"Select Google Drive Folder"]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs(Co,{className:"bg-blue-50 border-blue-200",children:[h.jsx(So,{className:"text-blue-800",children:"Local Folder Instructions"}),h.jsx(bo,{className:"text-blue-700 text-sm space-y-2",children:h.jsxs("ol",{className:"list-decimal list-inside space-y-1 pl-1",children:[h.jsx("li",{children:"Select the folder where your journal is stored on your local system"}),h.jsx("li",{children:"This folder should contain your journal data files"})]})})]}),h.jsxs(be,{variant:"outline",onClick:M,disabled:c||v,className:"w-full flex items-center justify-center gap-2 py-6 text-base",children:[h.jsx(Af,{className:"h-5 w-5"}),"Select Local Folder"]})]})]}):h.jsxs("div",{className:"space-y-4",children:[m&&h.jsxs(Co,{variant:"destructive",children:[h.jsx(So,{children:"Error"}),h.jsx(bo,{children:m})]}),f&&!m&&h.jsxs(Co,{children:[h.jsx(So,{children:"Info"}),h.jsx(bo,{children:f})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Lt,{children:"Sync Provider"}),h.jsxs(_u,{value:a,onValueChange:j=>T(j),children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Lo,{value:"none",id:"none"}),h.jsx(Lt,{htmlFor:"none",children:"No Sync (Local Only)"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Lo,{value:"local",id:"local"}),h.jsx(Lt,{htmlFor:"local",children:"Local File System (via File System Access API)"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Lo,{value:"google",id:"google"}),h.jsx(Lt,{htmlFor:"google",children:"Google Drive"})]})]})]}),a!=="none"&&h.jsxs(h.Fragment,{children:[h.jsx(Zh,{}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(Lt,{className:"text-base font-semibold",children:"Folder Configuration"}),y?h.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:h.jsxs("p",{className:"font-medium text-green-800",children:["Connected folder: ",h.jsx("strong",{children:y})]})}):h.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No folder selected. Please select an existing folder to use for synchronization."}),a==="google"&&h.jsxs(Co,{className:"bg-blue-50 border-blue-200",children:[h.jsx(So,{className:"text-blue-800",children:"Google Drive Instructions"}),h.jsx(bo,{className:"text-blue-700 text-sm space-y-2",children:h.jsxs("ol",{className:"list-decimal list-inside space-y-1 pl-1",children:[h.jsxs("li",{children:["You ",h.jsx("strong",{children:"must create the folder"})," before clicking the button below. You can create a folder at"," ",h.jsx("a",{href:"https://drive.google.com",className:"underline",target:"_blank",rel:"noopener noreferrer",children:"drive.google.com"})]}),h.jsxs("li",{children:["You need ",h.jsx("strong",{children:"edit access"})," to the selected folder."]}),h.jsxs("li",{children:["When you click this button, it will request access to"," ",h.jsx("strong",{children:"all files"})," in Google Drive. This level of access is required in order to sync your journal, but the app will"," ",h.jsx("strong",{children:"only"})," ever read from and write to the folder you select."]})]})})]}),h.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:h.jsxs(be,{variant:a==="google"?"default":"outline",onClick:M,disabled:c||v,className:"flex items-center gap-2 px-4 py-2",children:[h.jsx(Af,{className:"h-4 w-4"}),a==="google"?"Select Google Drive Folder":"Select Folder"]})})]}),w&&h.jsxs("div",{className:"space-y-3 mt-2",children:[h.jsxs(Co,{className:"bg-amber-50 border-amber-200",children:[h.jsx(So,{className:"text-amber-800 font-medium",children:"Existing Data Found"}),h.jsx(bo,{className:"text-amber-700",children:"This folder contains existing journal data. You can import this data to sync your journal with the content in this folder."})]}),h.jsxs(be,{variant:"outline",onClick:_,disabled:c||v,className:"w-full bg-amber-50 hover:bg-amber-100 text-amber-800 border-amber-300 hover:border-amber-400",children:[h.jsx(I8,{className:"h-4 w-4 mr-2"}),"Import Existing Data"]})]}),h.jsx(Zh,{className:"my-6"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(Lt,{className:"text-base font-semibold",children:"Sync Control"}),!y&&h.jsx("p",{className:"text-sm text-gray-600",children:"Select a folder above to enable synchronization."}),W(),h.jsx("div",{className:"pt-1",children:h.jsxs(be,{onClick:O,disabled:c||v||!y,className:"w-full flex items-center justify-center gap-2 py-2",children:[h.jsx(Mm,{className:`h-5 w-5 ${v?"animate-spin":""}`}),"Sync Now"]})}),y&&h.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Sync your journal data securely with the selected folder"})]})]})]}),h.jsx(ua,{children:h.jsx(be,{variant:"outline",onClick:t,children:"Close"})})]})})};class Oo{constructor(){this.urlMap=new Map}static getInstance(){return Oo.instance||(Oo.instance=new Oo),Oo.instance}createUrl(t,n){let r=this.urlMap.get(t);return r?(S.log(`[BlobMgr] [URL REUSE] Reusing existing URL for hash ${t}: ${r}`,{action:"createUrl_reuse",contentHash:t,mapSize:this.urlMap.size,timestamp:Date.now()}),r):(r=URL.createObjectURL(n),this.urlMap.set(t,r),S.log(`[BlobMgr] [URL CREATION] Created URL for hash ${t}: ${r}`,{action:"createUrl_new",contentHash:t,blobType:n.type,blobSize:n.size,mapSize:this.urlMap.size,timestamp:Date.now()}),r)}getUrl(t){const n=this.urlMap.get(t)||null;return S.log(`[BlobMgr] [URL ACCESS] GetUrl for hash ${t}: ${n?"found":"not found"}`,{action:"getUrl",contentHash:t,found:!!n,mapSize:this.urlMap.size,timestamp:Date.now()}),n}revokeUrl(t){const n=this.urlMap.get(t);if(n){S.log(`[BlobMgr] [URL REVOCATION] Revoking URL for hash ${t}: ${n}`,{action:"revokeUrl",contentHash:t,mapSize:this.urlMap.size,timestamp:Date.now(),stackTrace:new Error().stack});try{URL.revokeObjectURL(n),S.log(`[BlobMgr] [URL REVOCATION] Successfully revoked URL for hash ${t}`)}catch(r){S.error(`[BlobMgr] [URL REVOCATION] Error revoking URL for hash ${t}:`,r)}this.urlMap.delete(t),S.log(`[BlobMgr] [URL LIFECYCLE] Removed URL from map for hash ${t}. Map size now: ${this.urlMap.size}`)}else S.warn(`[BlobMgr] [URL REVOCATION] Attempted to revoke URL for hash ${t}, but no URL was found`)}revokeAllUrls(){const t=this.urlMap.size;S.log(`[BlobMgr] [URL BULK REVOCATION] Revoking all ${t} URLs.`,{action:"revokeAllUrls",mapSize:t,timestamp:Date.now(),hashList:Array.from(this.urlMap.keys()),stackTrace:new Error().stack}),this.urlMap.forEach((n,r)=>{try{S.log(`[BlobMgr] [URL BULK REVOCATION] Revoking URL for hash ${r}: ${n}`),URL.revokeObjectURL(n)}catch(o){S.error(`[BlobMgr] [URL BULK REVOCATION] Error revoking URL for hash ${r}:`,o)}}),this.urlMap.clear(),S.log(`[BlobMgr] [URL LIFECYCLE] Cleared all ${t} URLs from map. Map size now: ${this.urlMap.size}`)}}async function b0(e,t=256){return new Promise((n,r)=>{const o=new Image,s=URL.createObjectURL(e);o.onload=()=>{try{URL.revokeObjectURL(s);let i=o.width,a=o.height;const l=i/a;i>a&&i>t?(i=t,a=Math.round(i/l)):a>t&&(a=t,i=Math.round(a*l));const c=document.createElement("canvas");c.width=i,c.height=a;const u=c.getContext("2d");if(!u){r(new Error("Failed to get canvas context"));return}u.imageSmoothingQuality="high",u.drawImage(o,0,0,i,a),c.toBlob(f=>{f?(S.log(`[ImageUtils] Generated thumbnail: ${i}x${a} (original: ${o.width}x${o.height})`),n(f)):r(new Error("Failed to generate thumbnail blob"))},e.type,.85)}catch(i){S.error("[ImageUtils] Error generating thumbnail:",i),r(i)}},o.onerror=()=>{URL.revokeObjectURL(s),r(new Error("Failed to load image for thumbnail generation"))},o.src=s})}const hD=.8,__=.7,B_=10;async function tp(){try{if(!navigator.storage||!navigator.storage.estimate)return S.warn("[StorageMgr] navigator.storage.estimate not supported"),null;const e=await navigator.storage.estimate();if(!e.quota||!e.usage)return S.warn("[StorageMgr] Storage estimate missing quota or usage"),null;const t=e.usage/e.quota;return S.log(`[StorageMgr] Storage usage: ${e.usage} / ${e.quota} bytes (${(t*100).toFixed(2)}%)`),{usageBytes:e.usage,quotaBytes:e.quota,usagePercentage:t}}catch(e){return S.error("[StorageMgr] Error getting storage estimate:",e),null}}async function x1(e,t=!0,n){try{const r=await qi(n),o=await h3(r,e);if(t){const s=o.filter(a=>a.type==="full").map(a=>a.key),i=o.filter(a=>a.type==="thumb").map(a=>a.key);return[...s,...i].slice(0,e)}return o.map(s=>s.key)}catch(r){return S.error("[StorageMgr] Error getting oldest blobs:",r),[]}}async function mg(e,t){try{let n=0,r=!0;const o=await qi(t);if(typeof e=="number"&&e>0){const i=await x1(e,!0,t);return i.length>0?(S.log(`[StorageMgr] Forced pruning ${i.length} blobs`),await Promise.all(i.map(a=>Gh(o,a))),n=i.length,i.length):0}const s=await tp();if(!s||s.usagePercentage<hD)return S.log("[StorageMgr] Current storage usage is below threshold, no pruning needed"),0;for(;r;){const i=await x1(B_,!0,t);if(i.length===0){S.log("[StorageMgr] No more blobs to prune");break}S.log(`[StorageMgr] Pruning batch of ${i.length} blobs`),await Promise.all(i.map(l=>Gh(o,l))),n+=i.length;const a=await tp();!a||a.usagePercentage<=__?(S.log(`[StorageMgr] Reached target usage: ${(a==null?void 0:a.usagePercentage.toFixed(2))||"unknown"}`),r=!1):n>=50&&(S.warn("[StorageMgr] Reached safety limit of 50 items, stopping pruning"),r=!1)}return S.log(`[StorageMgr] Pruning complete. Removed ${n} items`),n}catch(n){return S.error("[StorageMgr] Error during pruning:",n),0}}async function Aa(e){try{const t=await tp();if(!t)return;if(t.usagePercentage>=hD){S.warn(`[StorageMgr] Storage usage high (${(t.usagePercentage*100).toFixed(2)}%). Running pruning...`);const n=await mg(void 0,e);S.log(`[StorageMgr] Automatic pruning complete. Removed ${n} items.`)}}catch(t){S.error("[StorageMgr] Error in automatic pruning check:",t)}}const qa=10,Fn=e=>e.isNew===!0,pD=e=>e.isNew===!1;function L_(e){return Array.from(new Uint8Array(e)).map(t=>t.toString(16).padStart(2,"0")).join("")}async function O_(e){try{const t=await crypto.subtle.digest("SHA-256",e);return L_(t)}catch(t){throw S.error("Error calculating array buffer hash:",t),new Error("Could not calculate hash from array buffer.")}}async function $_(e){try{const t=await e.arrayBuffer();return O_(t)}catch(t){throw S.error("Error calculating file hash:",t),new Error("Could not calculate file hash.")}}class D0{constructor(t,n){this.db=null,this.dbPromise=null,this.blobUrlManager=Oo.getInstance(),this.id=t.id,this.name=t.name,this.dbName=t.dbName,this.color=t.color,this.isDefault=t.isDefault,this.entryCount=t.entryCount,this.lastModifiedTimestamp=t.lastModifiedTimestamp,this.journalMetaService=n,S.log(`[Journal] Instantiated journal "${this.name}" (${this.id}) with database "${this.dbName}"`)}getSyncConfiguration(){const t=this.journalMetaService.getJournalById(this.id);if(t)return{syncProviderType:t.syncProviderType,syncProviderFolderReference:t.syncProviderFolderReference}}async getDb(){if(this.db)try{if(this.db.objectStoreNames.length>0)return this.db;S.warn(`[Journal] DB connection for ${this.dbName} is invalid, will reopen`),this.db=null}catch(t){S.warn(`[Journal] Error accessing DB connection for ${this.dbName}, will reopen:`,t),this.db=null}if(this.dbPromise)try{return this.db=await this.dbPromise,this.db}catch(t){throw this.dbPromise=null,t}S.log(`[Journal] Opening database "${this.dbName}" for journal "${this.name}"`),this.dbPromise=qi(this.dbName);try{return this.db=await this.dbPromise,this.dbPromise=null,this.db}catch(t){throw this.dbPromise=null,S.error(`[Journal] Error opening database "${this.dbName}":`,t),new Error(`Failed to open journal database: ${t instanceof Error?t.message:String(t)}`)}}closeDb(){this.db&&(S.log(`[Journal] Closing database connection for "${this.dbName}"`),this.db.close(),this.db=null,Qb(this.dbName))}async getEntries(t,n,r){try{const o=await this.getDb(),s=await Ka(o,t,n)||[];return r!=null&&r.includeDeleted?s:s.filter(i=>!i.isDeleted)}catch(o){throw S.error(`[Journal] Error fetching entries for ${t}-${n}:`,o),o}}async getAllEntries(t){try{const n=await this.getDb(),r=await Km(n)||[];return t!=null&&t.includeDeleted?r:r.filter(o=>!o.isDeleted)}catch(n){throw S.error("[Journal] Error fetching all entries:",n),n}}async getEntryById(t){try{const n=await this.getDb();return await Yi(n,Mn,t)}catch(n){throw S.error(`[Journal] Error fetching entry ${t}:`,n),n}}async getAllImageMetadata(t){try{const n=await this.getDb(),r=await p3(n)||[];return t!=null&&t.includeDeleted?r:r.filter(o=>!o.isDeleted)}catch(n){throw S.error("[Journal] Error fetching image metadata:",n),n}}async getImageMetadataById(t,n){try{const r=await this.getDb(),o=await Yi(r,Ko,t);return o&&o.isDeleted&&!(n!=null&&n.includeDeleted)?void 0:o}catch(r){throw S.error(`[Journal] Error fetching image metadata for ${t}:`,r),r}}async getPhotoThumbnailUrl(t,n){if(!t)return S.warn(`[Journal] Cannot get thumbnail URL: contentHash missing for photoId ${n}`),null;const r=`${t}-thumb`,o=this.blobUrlManager.getUrl(r);if(o)return this.getDb().then(s=>Dc(s,r)).catch(s=>S.warn(`[Journal] Failed background update access time for ${r}:`,s)),o;try{const s=await this.getDb(),i=await Sc(s,r);if(i)return S.log(`[Journal] Found thumbnail in IDB for hash ${r}.`),await Dc(s,r),this.blobUrlManager.createUrl(r,i.blob);const a=await Sc(s,t);if(a){S.log(`[Journal] Found full blob in IDB for hash ${t}. Generating thumbnail...`);try{const l=await b0(a.blob);return S.log(`[Journal] Generated thumbnail for hash ${t}. Caching...`),await bc(s,r,l,"thumb"),this.blobUrlManager.createUrl(r,l)}catch(l){return S.error(`[Journal] Error generating thumbnail for hash ${t}:`,l),this.getPhotoBlobUrl(t,n)}}else return S.log(`[Journal] Neither thumbnail nor full blob found in IDB for hash ${t}.`),null}catch(s){return S.error(`[Journal] Error accessing IDB for thumbnail/blob hash ${t}:`,s),null}}async getPhotoBlobUrl(t,n){if(!t)return S.warn(`[Journal] Cannot get blob URL: contentHash missing for photoId ${n}`),null;const r=this.blobUrlManager.getUrl(t);if(r)return S.log(`[Memory] Found cached URL for hash ${t}`),this.getDb().then(o=>Dc(o,t)).catch(o=>S.warn(`[Journal] Failed background update access time for ${t}:`,o)),r;try{const o=await this.getDb(),s=await Sc(o,t);return s?(S.log(`[Journal] Found blob in IDB for hash ${t}.`),await Dc(o,t),this.generateThumbnailInBackground(t,s.blob),this.blobUrlManager.createUrl(t,s.blob)):(S.log(`[Journal] Blob not found in IDB for hash ${t}.`),null)}catch(o){return S.error(`[Journal] Error checking IDB for blob hash ${t}:`,o),null}}async savePhotoBlob(t,n,r){try{const o=await this.getDb();await bc(o,t,n,r),r==="full"&&this.generateThumbnailInBackground(t,n)}catch(o){throw S.error(`[Journal] Error caching blob for ${t}:`,o),o}}async deletePhotoBlob(t){try{const n=await this.getDb();await Gh(n,t),this.blobUrlManager.revokeUrl(t),this.blobUrlManager.revokeUrl(`${t}-thumb`)}catch(n){throw S.error(`[Journal] Error deleting blob for ${t}:`,n),n}}async deleteImageMetadata(t){try{const n=await this.getDb(),r=await this.getImageMetadataById(t,{includeDeleted:!0});if(!r)throw new Error(`Image metadata ${t} not found for deletion`);const o=new Date().toISOString(),s={...r,isDeleted:!0,updatedAt:o};await this.saveImageMetadata([s]),S.log(`[Journal] Soft deleted image metadata (marked isDeleted=true): ${t}`),this.journalMetaService.markJournalAsDirty(this.id)}catch(n){throw S.error(`[Journal] Error soft deleting image metadata ${t}:`,n),n}}async updateName(t){try{if(t===this.name)return;if(this.name=t,this.lastModifiedTimestamp=Date.now(),!this.journalMetaService.updateJournalMetadata(this.id,{name:t,lastModifiedTimestamp:this.lastModifiedTimestamp}))throw new Error(`Failed to update journal name for journal ${this.id}`);S.log(`[Journal] Updated name for journal ${this.id} to "${t}"`)}catch(n){throw S.error("[Journal] Error updating journal name:",n),n}}async updateColor(t){try{if(t===this.color)return;if(this.color=t,this.lastModifiedTimestamp=Date.now(),!this.journalMetaService.updateJournalMetadata(this.id,{color:t,lastModifiedTimestamp:this.lastModifiedTimestamp}))throw new Error(`Failed to update journal color for journal ${this.id}`);S.log(`[Journal] Updated color for journal ${this.id} to "${t}"`)}catch(n){throw S.error("[Journal] Error updating journal color:",n),n}}async generateThumbnailInBackground(t,n){const r=`${t}-thumb`;try{const o=await this.getDb();if(await Sc(o,r))return;S.log(`[Journal] Generating thumbnail for hash ${t}...`);const i=await b0(n);S.log(`[Journal] Caching new thumbnail for hash ${t}.`),await bc(o,r,i,"thumb"),S.log(`[Journal] Successfully cached thumbnail: ${r}`)}catch(o){if(o instanceof DOMException&&o.name==="QuotaExceededError"){S.warn(`[Journal] Storage quota exceeded while caching thumbnail ${r}. Triggering pruning...`);try{await mg(5);const s=await this.getDb(),i=await b0(n);await bc(s,r,i,"thumb"),S.log(`[Journal] Successfully cached thumbnail after pruning: ${r}`)}catch(s){S.error(`[Journal] Failed to prune and retry caching thumbnail ${r}:`,s)}}else S.error(`[Journal] Failed to generate/cache thumbnail for hash ${t}:`,o)}}async saveSyncedEntry(t,n){try{const r=await this.getDb(),o=!n,s={id:t.id,date:t.date,content:t.content,photos:t.photos,createdAt:t.createdAt,updatedAt:t.updatedAt,isDeleted:t.isDeleted===void 0?!1:t.isDeleted};let i;o?(i=await xy(r,s),S.log(`[Journal] Saved new entry from sync: ${i}`),this.entryCount+=1):(i=await Mf(r,s,n),S.log(`[Journal] Updated existing entry from sync: ${i}`));const a=new Date(s.updatedAt).getTime();return a>this.lastModifiedTimestamp&&(this.lastModifiedTimestamp=a),this.journalMetaService.updateJournalMetadata(this.id,{entryCount:this.entryCount,lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn(`[Journal] Failed to update journal metadata after saving synced entry ${i}`),i}catch(r){throw S.error("[Journal] Error saving synced entry:",r),r}}async saveFormEntry(t,n){var r;try{const o=await this.getDb(),s=!n,i=t.photos.map(d=>Fn(d)?{photoId:crypto.randomUUID(),crop:d.crop}:{photoId:d.photoId,crop:d.crop}),a=new Date().toISOString(),l={id:s?crypto.randomUUID():n.id,content:t.content,date:t.date.toISOString().split("T")[0],photos:i,createdAt:s?a:n.createdAt,updatedAt:a,isDeleted:s?!1:t.isDeleted!==void 0?t.isDeleted:n.isDeleted};let c;n?(c=await Mf(o,l,n),S.log(`[Journal] Updated existing entry: ${c}`)):(c=await xy(o,l),S.log(`[Journal] Saved new entry: ${c}`),this.entryCount+=1);const u=[];if(t.photos){for(const d of t.photos)if(Fn(d)){const m=d,g=await $_(m.file),y=m.file,E=t.photos.indexOf(d),x={id:i[E].photoId,photoFilename:y.name,photoMetadata:{filename:y.name,mimeType:y.type,width:m.originalDimensions.width,height:m.originalDimensions.height,exifDate:((r=m.exifData)==null?void 0:r.exifDate)||null,contentHash:g},createdAt:l.createdAt instanceof Date?l.createdAt.toISOString():l.createdAt,updatedAt:l.updatedAt instanceof Date?l.updatedAt.toISOString():l.updatedAt};u.push(x),await this.savePhotoBlob(g,y,"full");const v=qh(y.name);await Kh(o,this.id,{contentHash:g,extension:v},"upload")}}return u.length>0&&(await this.saveImageMetadata(u),S.log(`[Journal] Saved metadata for ${u.length} new photos`)),this.lastModifiedTimestamp=Date.now(),this.journalMetaService.updateJournalMetadata(this.id,{entryCount:this.entryCount,lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn(`[Journal] Failed to update journal metadata after saving entry ${c}`),this.journalMetaService.markJournalAsDirty(this.id),c}catch(o){throw S.error("[Journal] Error saving form entry:",o),o}}async deleteEntry(t){try{const n=await this.getDb(),r=await this.getEntryById(t);if(!r)throw new Error(`Entry ${t} not found for deletion`);const o=new Date().toISOString(),s={...r,isDeleted:!0,updatedAt:o};await Mf(n,s,r),S.log(`[Journal] Soft deleted entry (marked isDeleted=true): ${t}`),this.entryCount>0&&!r.isDeleted&&(this.entryCount-=1),this.lastModifiedTimestamp=Date.now(),this.journalMetaService.updateJournalMetadata(this.id,{entryCount:this.entryCount,lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn(`[Journal] Failed to update journal metadata after soft deleting entry ${t}`),this.journalMetaService.markJournalAsDirty(this.id)}catch(n){throw S.error(`[Journal] Error soft deleting entry ${t}:`,n),n}}async saveImageMetadata(t){if(!(!t||t.length===0))try{const n=await this.getDb(),r=new Date().toISOString(),o=t.map(i=>({...i,createdAt:i.createdAt||r,updatedAt:i.updatedAt||r,isDeleted:i.isDeleted!==void 0?i.isDeleted:!1}));await m3(n,o),this.lastModifiedTimestamp=Date.now(),this.journalMetaService.updateJournalMetadata(this.id,{lastModifiedTimestamp:this.lastModifiedTimestamp})||S.warn("[Journal] Failed to update journal metadata after saving metadata entries"),S.log(`[Journal] Saved ${t.length} image metadata entries`),this.journalMetaService.markJournalAsDirty(this.id)}catch(n){throw S.error("[Journal] Error saving image metadata:",n),n}}getJournalId(){return this.id}getJournalName(){return this.name}getDbName(){return this.dbName}getEntryCount(){return this.entryCount}getLastModifiedTimestamp(){return this.lastModifiedTimestamp}async deleteJournalData(){try{this.closeDb(),S.log(`[Journal] Deleting database for journal ${this.id} (${this.dbName})`),await g3(this.dbName),this.blobUrlManager.revokeAllUrls(),S.log(`[Journal] Completely deleted journal data for ${this.id}`)}catch(t){throw S.error("[Journal] Error deleting journal data:",t),t}}}const v1="JournalList",A0="ActiveJournal",P0="phojoJournalMigrationV1_6Complete",Pa="default-journal",Nc="My Journal",Qt=[];for(let e=0;e<256;++e)Qt.push((e+256).toString(16).slice(1));function z_(e,t=0){return(Qt[e[t+0]]+Qt[e[t+1]]+Qt[e[t+2]]+Qt[e[t+3]]+"-"+Qt[e[t+4]]+Qt[e[t+5]]+"-"+Qt[e[t+6]]+Qt[e[t+7]]+"-"+Qt[e[t+8]]+Qt[e[t+9]]+"-"+Qt[e[t+10]]+Qt[e[t+11]]+Qt[e[t+12]]+Qt[e[t+13]]+Qt[e[t+14]]+Qt[e[t+15]]).toLowerCase()}let k0;const V_=new Uint8Array(16);function U_(){if(!k0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k0=crypto.getRandomValues.bind(crypto)}return k0(V_)}const H_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),y1={randomUUID:H_};function w1(e,t,n){var o;if(y1.randomUUID&&!t&&!e)return y1.randomUUID();e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??U_();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,z_(r)}class W_{async ensureDefaultJournalExistsAndMigrate(){try{const t=localStorage.getItem(P0)==="true";S.log(`[JournalMetaService] Migration flag status: ${t?"COMPLETE":"NOT COMPLETE"}`);const n=this.getJournalList(),r=n.find(i=>i.id===Pa||i.dbName===ko);if(r)return S.log(`[JournalMetaService] Default journal already exists: ${r.name}`),localStorage.setItem(P0,"true"),r;if(t)return n.length===0?this.createDefaultJournal():null;let o=!1;try{const i=await qi(ko);o=i.objectStoreNames.length>0,i.close(),S.log(`[JournalMetaService] Default database exists: ${o}`)}catch(i){S.warn("[JournalMetaService] Error checking default database existence:",i),o=!1}const s={id:Pa,name:Nc,dbName:ko,isDefault:!0,color:"Slate",entryCount:0,lastModifiedTimestamp:Date.now(),journalPropertiesUpdatedAt:new Date().toISOString()};if(o){S.log("[JournalMetaService] Calculating stats for migrated journal data...");try{let i=null;try{i=await qi(ko);const a=await Km(i)||[];s.entryCount=a.length;let l=0;for(const c of a){const u=new Date(c.updatedAt).getTime();u>l&&(l=u)}s.lastModifiedTimestamp=l>0?l:Date.now()}finally{i&&(S.log("[JournalMetaService] Closing temporary database connection for migration"),i.close(),Qb(ko))}S.log(`[JournalMetaService] Migrated journal stats: ${s.entryCount} entries, last modified ${new Date(s.lastModifiedTimestamp).toLocaleString()}`)}catch(i){S.error("[JournalMetaService] Error calculating stats for migrated journal:",i),s.entryCount=0,s.lastModifiedTimestamp=Date.now()}}return this.addJournalMetadata(s),this.setActiveJournalId(Pa),localStorage.setItem(P0,"true"),S.log(`[JournalMetaService] Migration complete. Default journal '${Nc}' created.`),s}catch(t){throw S.error("[JournalMetaService] Error during migration:",t),new Error(`Failed to ensure default journal exists: ${t instanceof Error?t.message:String(t)}`)}}createDefaultJournal(){const t={id:Pa,name:Nc,dbName:ko,isDefault:!0,color:"Slate",entryCount:0,lastModifiedTimestamp:Date.now(),journalPropertiesUpdatedAt:new Date().toISOString()};return this.addJournalMetadata(t),this.setActiveJournalId(Pa),S.log(`[JournalMetaService] Created new default journal '${Nc}'`),t}getJournalList(){try{const t=localStorage.getItem(v1);if(!t)return[];const n=JSON.parse(t);return!n||typeof n!="object"||n.schemaVersion!==1?(S.warn("[JournalMetaService] Invalid or outdated journal list schema"),[]):Array.isArray(n.journals)?n.journals.filter(r=>this.isValidJournalMetadata(r)):(S.warn("[JournalMetaService] Journal list is not an array"),[])}catch(t){return S.error("[JournalMetaService] Error retrieving journal list:",t),[]}}saveJournalList(t){try{const n={schemaVersion:1,journals:t};localStorage.setItem(v1,JSON.stringify(n))}catch(n){S.error("[JournalMetaService] Error saving journal list:",n)}}getActiveJournalId(){try{const t=localStorage.getItem(A0);if(!t)return S.log("[JournalMetaService] No active journal ID set"),null;const n=this.getJournalList();if(!n.some(o=>o.id===t)){S.warn(`[JournalMetaService] Active journal ID ${t} not found in journal list`);const o=n.find(s=>s.isDefault);return o?(S.log(`[JournalMetaService] Falling back to default journal: ${o.id}`),this.setActiveJournalId(o.id),o.id):null}return t}catch(t){return S.error("[JournalMetaService] Error retrieving active journal ID:",t),null}}setActiveJournalId(t){try{localStorage.setItem(A0,t)}catch(n){S.error("[JournalMetaService] Error setting active journal ID:",n)}}getJournalById(t){return this.getJournalList().find(o=>o.id===t)||null}getJournalByDbName(t){return this.getJournalList().find(o=>o.dbName===t)||null}generateNewDbName(){return`PhojoCacheDB_${w1()}`}createNewJournal(t){if(!t||t.trim()==="")throw new Error("Journal name cannot be empty");const n=w1(),r=this.generateNewDbName(),o=new Date().toISOString(),s={id:n,name:t.trim(),dbName:r,isDefault:!1,color:"Slate",entryCount:0,lastModifiedTimestamp:Date.now(),syncProviderType:"none",localDirtyFlag:!1,journalPropertiesUpdatedAt:o,lastKnownProviderVersionId:null,lastKnownProviderTimestamp:null};return this.addJournalMetadata(s),S.log(`[JournalMetaService] Created new journal '${t}' with ID ${n} and DB ${r}`),s}addJournalMetadata(t){const n=this.getJournalList();if(n.some(r=>r.id===t.id)){S.warn(`[JournalMetaService] Journal with ID ${t.id} already exists`);return}n.push(t),this.saveJournalList(n)}updateJournalMetadata(t,n){const r=this.getJournalList(),o=r.findIndex(u=>u.id===t);if(o===-1)return S.warn(`[JournalMetaService] Cannot update - journal with ID ${t} not found`),!1;const s=r[o];let i={...n};const a="name"in n&&n.name!==s.name,l="color"in n&&n.color!==s.color;return a||l?(i.journalPropertiesUpdatedAt=new Date().toISOString(),i.localDirtyFlag=!0,S.log(`[JournalMetaService] Core properties (name/color) actually changed for journal ${t}. Marked as dirty. New props timestamp: ${i.journalPropertiesUpdatedAt}`)):"journalPropertiesUpdatedAt"in n&&n.journalPropertiesUpdatedAt!==s.journalPropertiesUpdatedAt&&(i.journalPropertiesUpdatedAt=n.journalPropertiesUpdatedAt,S.log(`[JournalMetaService] Applying journalPropertiesUpdatedAt from updates for ${t}: ${n.journalPropertiesUpdatedAt}`)),Object.keys(n).some(u=>u!=="localDirtyFlag"||n.localDirtyFlag===!0)&&(i.lastModifiedTimestamp=Date.now()),r[o]={...s,...i},this.saveJournalList(r),!0}removeJournalMetadata(t){const n=this.getJournalList(),r=n.findIndex(s=>s.id===t);if(r===-1)return S.warn(`[JournalMetaService] Cannot remove - journal with ID ${t} not found`),!1;if(this.getActiveJournalId()===t){const s=n.find(i=>i.isDefault&&i.id!==t);if(s)this.setActiveJournalId(s.id);else if(n.length>1){const i=n.find(a=>a.id!==t);i&&this.setActiveJournalId(i.id)}else localStorage.removeItem(A0)}return n.splice(r,1),this.saveJournalList(n),S.log(`[JournalMetaService] Removed journal with ID ${t}`),!0}markJournalAsDirty(t){const n=this.getJournalList(),r=n.findIndex(o=>o.id===t);return r===-1?(S.warn(`[JournalMetaService] Cannot mark as dirty - journal with ID ${t} not found`),!1):(n[r]={...n[r],localDirtyFlag:!0,lastModifiedTimestamp:Date.now()},this.saveJournalList(n),S.log(`[JournalMetaService] Marked journal ${t} as dirty for sync`),!0)}isValidJournalMetadata(t){if(!t||typeof t!="object")return!1;const n=t;return typeof n.id=="string"&&typeof n.name=="string"&&typeof n.dbName=="string"&&typeof n.isDefault=="boolean"&&typeof n.color=="string"&&typeof n.entryCount=="number"&&typeof n.lastModifiedTimestamp=="number"}}const $e=new W_;function J_(e,t){const[n,r]=p.useState(e),[o,s]=p.useState(t),[i,a]=p.useState(0),[l,c]=p.useState(!1),u=p.useCallback((w,x)=>{const v=new Date(x,w-1),C=new Date(o,n-1);v>C?a(1):v<C?a(-1):a(0),r(w),s(x)},[n,o]),f=p.useCallback(()=>{let w=n,x=o;w===1?(x--,w=12):w--,u(w,x)},[n,o,u]),d=p.useCallback(()=>{let w=n,x=o;w===12?(x++,w=1):w++,u(w,x)},[n,o,u]),m=p.useCallback((w,x)=>{u(w,x),c(!1)},[u]),g=p.useCallback(w=>{w>0?d():w<0&&f()},[d,f]),y=p.useCallback(()=>c(!0),[]),E=p.useCallback(()=>c(!1),[]);return{currentMonth:n,currentYear:o,swipeDirection:i,isMonthYearPickerOpen:l,goToPreviousMonth:f,goToNextMonth:d,handleMonthYearSelect:m,handleCalendarSwipe:g,openMonthYearPicker:y,closeMonthYearPicker:E,setSwipeDirection:a}}function G_(){const[e,t]=p.useState(!1),[n,r]=p.useState([]),[o,s]=p.useState(new Date),[i,a]=p.useState(!1),[l,c]=p.useState(null),u=p.useCallback((g,y)=>{s(g),r(y),a(!1),t(!0)},[]),f=p.useCallback(g=>{c(g),a(!0)},[]),d=p.useCallback(()=>{t(!1),r([])},[]),m=p.useCallback(()=>{a(!1),c(null)},[]);return{isViewEntryModalOpen:e,selectedBasicEntriesForModal:n,entryDateForModal:o,openViewEntriesModal:u,closeViewModal:d,isDeleteDialogOpen:i,entryToDeleteId:l,openDeleteConfirmation:f,closeDeleteDialog:m}}const T0=()=>window.location.hash.replace(/^#/,"").split(/[?&]/)[0]||"/",np=()=>{const[e,t]=p.useState(T0());p.useEffect(()=>{const r=()=>{const o=T0();o!==e&&t(o)};return window.addEventListener("hashchange",r),()=>{window.removeEventListener("hashchange",r)}},[e]);const n=p.useCallback((r,{replace:o=!1}={})=>{const i=`#${r.startsWith("/")?r:`/${r}`}`,a=window.location.hash||"#/";i!==a&&(o?window.location.replace(i):window.location.hash=i)},[]);return p.useEffect(()=>{let r=window.location.hash;const o=setInterval(()=>{const s=window.location.hash;if(s!==r){const i=T0();i!==e&&t(i),r=s}},250);return()=>{clearInterval(o)}},[e]),[e,n]},rp=()=>fi.getInstance();class fi{constructor(){this.listeners=new Map,this.swController=null,this.messageQueue=[],this.isListenerAttached=!1,this.handleControllerChange=()=>{S.log("[SWHandler] Service Worker controller changed."),this.swController=navigator.serviceWorker.controller,this.attachMessageListener()},this.handleIncomingMessage=t=>{const n=t.data;if(!n||!n.type){S.warn("[SWHandler] Received SW message with no data or type",t.data);return}this.dispatchMessage(n)},S.log("[SWHandler] Initializing ServiceWorkerMessageHandler..."),this.readyPromise=this.initializeServiceWorker()}static getInstance(){return fi.instance||(fi.instance=new fi),fi.instance}async initializeServiceWorker(){if(typeof window>"u"||!("serviceWorker"in navigator)){S.warn("[SWHandler] Service Worker API not supported in this environment.");return}try{const t=await navigator.serviceWorker.ready;return S.log("[SWHandler] Service Worker is ready."),this.swController=t.active||navigator.serviceWorker.controller,this.attachMessageListener(),navigator.serviceWorker.addEventListener("controllerchange",this.handleControllerChange),this.messageQueue.forEach(n=>this.dispatchMessage(n)),this.messageQueue=[],t}catch(t){S.error("[SWHandler] Service Worker registration failed:",t);return}}attachMessageListener(){!this.isListenerAttached&&navigator.serviceWorker&&(navigator.serviceWorker.addEventListener("message",this.handleIncomingMessage),this.isListenerAttached=!0,S.log("[SWHandler] Global message listener attached to navigator.serviceWorker."))}dispatchMessage(t){S.log(`[SWHandler] Dispatching message of type: ${t.type}`,t);const n=this.listeners.get(t.type);n?n.forEach(r=>{try{r(t)}catch(o){S.error(`[SWHandler] Error in callback for message type ${t.type}:`,o)}}):S.log(`[SWHandler] No listeners registered for message type: ${t.type}`)}registerListener(t,n){return this.readyPromise.then(r=>{r?(this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n),S.log(`[SWHandler] Listener registered for type: ${t}`)):(S.warn(`[SWHandler] SW not ready, listener for ${t} not actively registered yet, but queued.`),this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n))}).catch(r=>{S.error(`[SWHandler] Error during SW readiness check for listener registration (${t}):`,r)}),()=>{this.unregisterListener(t,n)}}unregisterListener(t,n){const r=this.listeners.get(t);r&&(r.delete(n),S.log(`[SWHandler] Listener unregistered for type: ${t}`),r.size===0&&(this.listeners.delete(t),S.log(`[SWHandler] All listeners for type ${t} removed.`)))}async sendMessageToSW(t){if(await this.readyPromise,this.swController)try{S.log("[SWHandler] Sending message to SW:",t),this.swController.postMessage(t)}catch(n){throw S.error("[SWHandler] Error sending message to SW:",n),n}else throw S.error("[SWHandler] Service Worker controller not available. Cannot send message:",t),new Error("Service Worker controller not available to send message.")}async getController(){return await this.readyPromise,this.swController}cleanup(){this.isListenerAttached&&navigator.serviceWorker&&(navigator.serviceWorker.removeEventListener("message",this.handleIncomingMessage),navigator.serviceWorker.removeEventListener("controllerchange",this.handleControllerChange),this.isListenerAttached=!1,S.log("[SWHandler] Global message listener removed.")),this.listeners.clear()}}const mD=p.createContext(void 0),K_=({children:e})=>{const{toast:t}=Ol(),[,n]=np(),r=p.useRef(!0),o=J_(new Date().getMonth()+1,new Date().getFullYear()),s=G_(),[i,a]=p.useState(null),[l,c]=p.useState([]),[u,f]=p.useState(!1),[d,m]=p.useState(navigator.onLine),g=p.useRef(d),[y,E]=p.useState([]),[w,x]=p.useState(!1),[v,C]=p.useState([]),[b,D]=p.useState(!1),[A,P]=p.useState(null),[F,k]=p.useState(null),[T,M]=p.useState(null),[_,O]=p.useState(!1),[W,j]=p.useState("calendar"),[B,R]=p.useState(null),[N,V]=p.useState(!1),[I,L]=p.useState(!1),[H,$]=p.useState(!1),[he,de]=p.useState(!1),[Y,re]=p.useState(!1),[fe,ke]=p.useState(!1),[Ae,ne]=p.useState(!1),[ve,ye]=p.useState(null),[pe,He]=p.useState(null),[ct,qe]=p.useState(null),[Ze,ut]=p.useState(null),[ot,et]=p.useState(!1),[Tt,Ee]=p.useState(Tn.IDLE),[We,st]=p.useState(""),[Ft,Pn]=p.useState(!1),[Yn,$t]=p.useState(null),[Je,G]=p.useState(null),q=Oo.getInstance(),oe=p.useCallback(()=>{L(!0),$(!1)},[]),le=p.useCallback(()=>{L(!1),$(!1)},[]),me=p.useCallback(z=>{const U=l.find(J=>J.id===z);U?(ye(U),de(!0)):S.error(`[AppContext] Journal with ID ${z} not found for renaming`)},[l]),je=p.useCallback(()=>{de(!1),ye(null)},[]),Te=p.useCallback(z=>{const U=l.find(J=>J.id===z);U?(He(U),re(!0)):S.error(`[AppContext] Journal with ID ${z} not found for color change`)},[l]),Ye=p.useCallback(()=>{re(!1),He(null)},[]),pt=p.useCallback(z=>{const U=l.find(J=>J.id===z);U?(qe(U),ke(!0)):S.error(`[AppContext] Journal with ID ${z} not found for deletion`)},[l]),Jt=p.useCallback(()=>{ke(!1),qe(null)},[]),jt=p.useCallback(async(z,U)=>{try{if(!l.find(ae=>ae.id===z))throw new Error(`Journal with ID ${z} not found`);if(!$e.updateJournalMetadata(z,{color:U,lastModifiedTimestamp:Date.now()}))throw new Error("Failed to update journal color");c($e.getJournalList()),i&&i.id===z&&(i.color=U),re(!1),He(null),t({title:"Journal Color Updated",description:"Journal color updated successfully."})}catch(J){throw S.error("[AppContext] Error changing journal color:",J),t({title:"Error",description:J instanceof Error?J.message:"Failed to change journal color. Please try again.",variant:"destructive"}),J}},[l,i,t]),on=p.useCallback(async(z,U)=>{try{if(!U.trim())throw new Error("Journal name cannot be empty");if(!l.find(ae=>ae.id===z))throw new Error(`Journal with ID ${z} not found`);if(!$e.updateJournalMetadata(z,{name:U.trim(),lastModifiedTimestamp:Date.now()}))throw new Error("Failed to update journal name");c($e.getJournalList()),i&&i.id===z&&(i.name=U.trim()),de(!1),ye(null),t({title:"Journal Renamed",description:`Journal renamed to "${U.trim()}".`})}catch(J){throw S.error("[AppContext] Error renaming journal:",J),t({title:"Error",description:J instanceof Error?J.message:"Failed to rename journal. Please try again.",variant:"destructive"}),J}},[l,i,t]),Gt=p.useCallback(()=>{$(!0)},[]),xn=p.useCallback(()=>{$(!1)},[]),Kt=p.useCallback(async(z,U=!1,J)=>{try{const X=U&&(!z||z.trim()==="")?`Import ${new Date().toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:z,ae=$e.createNewJournal(X);c($e.getJournalList()),await zt(ae.id),U&&J?(await $e.updateJournalMetadata(ae.id,{syncProviderType:J}),le(),ut(ae),ne(!0),Pn(!0),t({title:"Select Import Source",description:"Please select the folder containing your journal data."})):(le(),t({title:"Journal Created",description:`Created new journal "${z}" and switched to it.`}))}catch(X){S.error("[AppContext] Error creating new journal:",X),t({title:"Error",description:"Failed to create new journal. Please try again.",variant:"destructive"})}},[t,$e]),zt=p.useCallback(async z=>{if(!(i&&i.id===z))try{V(!0),S.log(`[AppContext] Switching to journal with ID ${z}`),i&&i.closeDb(),q.revokeAllUrls(),E([]),C([]),P(null),k(null),M(null),$e.setActiveJournalId(z);const U=$e.getJournalById(z);if(!U)throw new Error(`Journal with ID ${z} not found`);const J=new D0(U,$e);a(J),et(!0);try{const X=await J.getAllImageMetadata();r.current&&C(X),S.log(`[AppContext] Loaded metadata for new journal. Count: ${X.length}`)}catch(X){S.error("[AppContext] Error loading metadata for new journal:",X),r.current&&M(X instanceof Error?X:new Error("Failed to load metadata"))}try{const X=await J.getEntries(o.currentYear,o.currentMonth);r.current&&E(X),S.log(`[AppContext] Loaded entries for new journal. Count: ${X.length}`)}catch(X){S.error("[AppContext] Error loading entries for new journal:",X),r.current&&P(X instanceof Error?X:new Error("Failed to load entries"))}le(),t({title:"Journal Switched",description:`Switched to journal "${U.name}".`})}catch(U){S.error("[AppContext] Error switching journal:",U),t({title:"Error",description:"Failed to switch journal. Please try again.",variant:"destructive"})}finally{r.current&&(V(!1),et(!1))}},[i,q,o.currentMonth,o.currentYear,t,le]),Xe=p.useCallback(async z=>{if(i&&i.id===z)return i;try{const U=l.find(J=>J.id===z);if(!U)throw new Error(`Journal with ID ${z} not found`);return S.log(`[AppContext] Creating temporary Journal instance for ${U.name} (${z})`),new D0(U,$e)}catch(U){throw S.error("[AppContext] Error creating journal instance:",U),U}},[i,l]),Xn=p.useCallback(async z=>{var U;try{const J=l.find(xe=>xe.id===z);if(!J)throw new Error(`Journal with ID ${z} not found`);const X=i&&i.id===z,ae=X?i:await Xe(z);if(!ae)throw new Error(`Failed to get journal instance for ID ${z}`);await ae.deleteJournalData(),$e.removeJournalMetadata(z);const Fe=$e.getJournalList();if(c(Fe),X){let xe=(U=Fe.find(Me=>Me.isDefault))==null?void 0:U.id;!xe&&Fe.length>0&&(xe=Fe[0].id),xe?await zt(xe):(a(null),$e.setActiveJournalId(""),E([]),C([]))}ke(!1),qe(null),t({title:"Journal Deleted",description:`Journal "${J.name}" has been permanently deleted.`}),I&&le()}catch(J){throw S.error("[AppContext] Error deleting journal:",J),t({title:"Error",description:J instanceof Error?J.message:"Failed to delete journal. Please try again.",variant:"destructive"}),J}},[l,i,zt,Xe,t,I,le]),hr=p.useCallback(async z=>{try{const U=l.find(J=>J.id===z);if(!U){S.error(`[AppContext] Journal with ID ${z} not found for sync settings`);return}if(i&&i.id===z){if(ut(U),ne(!0),U.syncProviderType==="local"){const J=new Fs($e);$t(J);const X=new Cs(J,i,$e);G(X),X.addStatusListener((ae,Fe)=>{Ee(ae),st(Fe)})}}else S.warn(`[AppContext] Trying to configure sync for non-active journal ${z}`)}catch(U){S.error("[AppContext] Error initiating sync settings:",U)}},[l,i,$e]),hs=p.useCallback(()=>{ne(!1),ut(null),Pn(!1),Je&&Je.removeAllListeners(),Ee(Tn.IDLE),st(""),G(null)},[Je]),qt=async(z,U)=>{let J=z;if((!J||J.journal.id!==U)&&i&&i.id===U){const ae=l.find(Fe=>Fe.id===U);if((ae==null?void 0:ae.syncProviderType)==="local"){S.log(`[AppContext performSync] Initializing/Re-initializing SyncService for ${U}`);const Fe=new Fs($e),xe=new Cs(Fe,i,$e);xe.addStatusListener((Me,Bn)=>{Ee(Me),st(Bn)}),G(xe),J=xe}else if((ae==null?void 0:ae.syncProviderType)==="google"){S.log(`[AppContext performSync] Initializing/Re-initializing SyncService for ${U}`);const Fe=new ep($e),xe=new Cs(Fe,i,$e);xe.addStatusListener((Me,Bn)=>{Ee(Me),st(Bn)}),G(xe),J=xe}else return S.error(`[AppContext performSync] Cannot initialize sync for ${U}: No local provider or not active journal.`),t({title:"Sync Error",description:"Cannot initialize sync service.",variant:"destructive"}),Ee(Tn.FAILED),{success:!1,message:"Sync service initialization failed"}}else if(J&&J.journal.id!==U)return S.error(`[AppContext performSync] Critical: SyncService journal ID (${J.journal.id}) mismatch with requested journal ID (${U}). Aborting sync.`),t({title:"Sync Error",description:"Internal sync configuration mismatch. Please try configuring sync again.",variant:"destructive"}),Ee(Tn.FAILED),{success:!1,message:"Sync service mismatch"};if(!J)return S.error(`[AppContext performSync] No SyncService available for journal ${U}.`),t({title:"Sync Error",description:"Sync service not configured.",variant:"destructive"}),Ee(Tn.FAILED),{success:!1,message:"Sync service not configured"};const X=await J.performSync(U);if(X.success&&i&&i.id===U){const ae=await i.getEntries(o.currentYear,o.currentMonth);r.current&&ae&&E(ae)}return!X.success||X.error?Ee(Tn.FAILED):Ee(Tn.IDLE),X},sn=p.useCallback(async z=>{try{return await qt(Je,z)}catch(U){return S.error("[AppContext] Error performing sync:",U),t({title:"Sync Error",description:U instanceof Error?U.message:"An error occurred during sync",variant:"destructive"}),Ee(Tn.IDLE),{success:!1,message:U instanceof Error?U.message:"Unknown sync error",error:U instanceof Error?U:new Error(String(U))}}},[i,l,Je,$e,t,o.currentYear,o.currentMonth,Xe,G,Ee,st]);p.useEffect(()=>{if(!u||!i)return;S.log("[AppContext] Setting up periodic storage check and pruning"),Aa&&Aa().catch(U=>{S.error("[AppContext] Periodic storage check/prune error:",U)});const z=setInterval(()=>{r.current&&(S.log("[AppContext] Running periodic storage check and pruning"),Aa&&Aa().catch(U=>{S.error("[AppContext] Periodic storage check/prune error:",U)}))},5*60*1e3);return()=>{clearInterval(z)}},[u,i]),p.useEffect(()=>{const z=()=>r.current&&m(!0),U=()=>r.current&&m(!1);return window.addEventListener("online",z),window.addEventListener("offline",U),S.log(`[AppContext] Initial network status: ${navigator.onLine?"ONLINE":"OFFLINE"}`),g.current=navigator.onLine,()=>{window.removeEventListener("online",z),window.removeEventListener("offline",U),q.revokeAllUrls()}},[q]),p.useEffect(()=>{!g.current&&d&&S.log("[AppContext] Detected transition from offline to online."),g.current=d},[d]),p.useEffect(()=>{const z=U=>{const J=U;J.message&&J.message.includes("QuotaExceededError")&&(S.error("[AppContext] Storage quota exceeded. Attempting to free up space..."),mg(20).catch(X=>{S.error("[AppContext] Failed to prune cache:",X)})),J.message&&J.message.includes("IndexedDB")&&(S.error("[AppContext] IndexedDB error detected:",J.message),t({title:"Database Error",description:"There was a problem with the app database. Please reload the page.",variant:"destructive"}))};return window.addEventListener("error",z),()=>{window.removeEventListener("error",z)}},[t]),p.useEffect(()=>(f(!1),S.log("[AppContext] Initializing Journal..."),(async()=>{try{let U;try{et(!0),U=await $e.ensureDefaultJournalExistsAndMigrate(),S.log(`[AppContext] Default journal ensured: ${U==null?void 0:U.name}`)}catch(xe){S.error("[AppContext] Failed to ensure default journal:",xe),t({title:"Migration Error",description:"Failed to create default journal. Please reload the app.",variant:"destructive"}),et(!1);return}const J=$e.getJournalList();c(J),S.log(`[AppContext] Found ${J.length} journals`);let X=$e.getActiveJournalId(),ae=null,Fe="";if(X?(ae=$e.getJournalById(X),ae||(Fe="The previously active journal was not found",S.warn(`[AppContext] Active journal ID ${X} not found in journal list`))):(Fe="No active journal was set",S.warn("[AppContext] No active journal ID found")),!ae){S.log("[AppContext] Looking for default journal as fallback");const xe=l.find(Me=>Me.isDefault);xe?(ae=xe,X=xe.id,$e.setActiveJournalId(X),S.log(`[AppContext] Falling back to default journal: ${ae.name}`)):S.warn("[AppContext] No default journal found in journal list")}if(!ae){S.log("[AppContext] No default journal found, checking for PhojoCacheDB to trigger migration");const xe=await $e.ensureDefaultJournalExistsAndMigrate();xe?(ae=xe,X=xe.id,$e.setActiveJournalId(X),S.log(`[AppContext] Successfully migrated to 'My Journal': ${ae.name}`),Fe="A new default journal was created from your existing data"):S.warn("[AppContext] Migration unsuccessful, no valid journal available")}if(ae?Fe&&t({title:"Journal Switched",description:`${Fe}. Now using '${ae.name}'.`}):(S.warn("[AppContext] No valid journal found after all fallback attempts"),t({title:"Journal Setup Required",description:"Please create a new journal to continue.",variant:"destructive"}),Gt()),ae){const xe=new D0(ae,$e);a(xe),f(!0),S.log(`[AppContext] Journal initialized: ${xe.name}`),D(!0),M(null);try{const Me=await xe.getAllImageMetadata();r.current&&(C(Me),D(!1))}catch(Me){r.current&&(S.error("[AppContext] Error loading image metadata:",Me),M(Me instanceof Error?Me:new Error("Failed to load image metadata")),D(!1))}finally{r.current&&et(!1)}}Aa().catch(xe=>{S.error("[AppContext] Initial storage check/prune error:",xe)})}catch(U){S.error("[AppContext] Failed to initialize Journal:",U),a(null),f(!1),et(!1),t({title:"Initialization Error",description:"Failed to initialize the application storage. Please try reloading.",variant:"destructive"})}})(),()=>{S.log("[AppContext] Journal cleanup"),i&&i.closeDb(),q.revokeAllUrls()}),[]),p.useEffect(()=>{let z=null;return(async()=>{if(!u||!i){Je&&(S.log("[AppContext SyncEffect] Active journal/client not ready. Cleaning up existing SyncService."),Je.removeAllListeners(),G(null),Ee(Tn.IDLE),st(""));return}const J=$e.getJournalById(i.id);if((J==null?void 0:J.syncProviderType)==="local"&&J.syncProviderFolderReference){if(S.log(`[AppContext SyncEffect] Journal ${i.name} has sync configured.`),!Je||Je.journal.id!==i.id){Je&&(S.log(`[AppContext SyncEffect] Cleaning up SyncService from previous journal ${Je.journal.name}.`),Je.removeAllListeners()),S.log(`[AppContext SyncEffect] Initializing new SyncService for ${i.name}.`);const X=new Fs($e),ae=new Cs(X,i,$e);ae.addStatusListener((Fe,xe)=>{r.current&&(Ee(Fe),st(xe))}),G(ae),z=ae}else S.log(`[AppContext SyncEffect] Reusing existing SyncService for ${i.name}.`),z=Je;if(z){S.log(`[AppContext SyncEffect] Triggering performSync for ${i.name}.`);try{const X=await sn(i.id);r.current&&(X.success?S.log(`[AppContext SyncEffect] Auto-sync for ${i.name} completed successfully.`):S.warn(`[AppContext SyncEffect] Auto-sync for ${i.name} failed: ${X.message}`))}catch(X){r.current&&S.error(`[AppContext SyncEffect] Error during auto-sync for ${i.name}:`,X)}}else S.error(`[AppContext SyncEffect] SyncService instance is unexpectedly null for ${i.name} before sync attempt.`)}else S.log(`[AppContext SyncEffect] Journal ${i.name} sync not configured. Cleaning up.`),Je&&(Je.removeAllListeners(),G(null),Ee(Tn.IDLE),st(""))})(),()=>{z&&(S.log(`[AppContext SyncEffect Cleanup] Cleaning up listeners for SyncService of journal ${z.journal.name} (instance from this effect run).`),z.removeAllListeners())}},[i,u,$e,sn]),p.useEffect(()=>{if(u&&i){x(!0),P(null);const z=o.currentYear,U=o.currentMonth;S.log(`[AppContext] Fetching local entries effect triggered for ${z}-${U}`),i.getEntries(z,U).then(J=>{S.log(`[AppContext] Loaded ${J.length} local entries for ${z}-${U}`),r.current&&E(J)}).catch(J=>{S.error(`[AppContext] Err loading local entries for ${z}-${U}:`,J),r.current&&P(J instanceof Error?J:new Error("Failed entries load"))}).finally(()=>{S.log(`[AppContext] Finished loading local entries for ${z}-${U}. isLoadingEntries: false`),r.current&&x(!1)})}else E([]),x(!1),P(null),S.log("[AppContext] Journal not ready, skipping entry fetch.")},[u,i,o.currentYear,o.currentMonth]),p.useEffect(()=>{k(null)},[o.currentYear,o.currentMonth]),p.useEffect(()=>{u&&(n(`/month/${o.currentYear}/${o.currentMonth}`),S.log(`[AppContext] Updated URL to year=${o.currentYear}, month=${o.currentMonth}`))},[o.currentYear,o.currentMonth,n,u]),p.useEffect(()=>{T&&t({title:"Metadata Error",description:T.message,variant:"destructive"})},[T,t]),p.useEffect(()=>{A&&t({title:"Entries Error",description:A.message,variant:"destructive"})},[A,t]),p.useEffect(()=>{F&&t({title:"Operation Error",description:F.message,variant:"destructive"})},[F,t]),p.useEffect(()=>{const z=window.location.hash,U=z.match(/shareKey=([\w-]+)/);if(U&&U[1]){const J=U[1];S.log(`[App Context] Share detected via hash, setting shareKeyForForm: ${J}`),R(J),n("/entry/new",{replace:!0})}else z.includes("/phojo/")&&(S.log(`[App Context] Detected incorrect hash path: ${z}, redirecting to root`),n("/",{replace:!0}))},[n]);const te=p.useCallback(()=>{S.log("[AppContext] Clearing shareKeyForForm"),R(null)},[]),Z=rp();p.useEffect(()=>{const z=X=>{r.current&&(S.log(`[App Context] Received SW message via Handler: type=${X.type}`,X),X.type==="SHARED_FILES_READY"&&X.key?(S.log(`[App Context] Processing SHARED_FILES_READY with key: ${X.key}`),R(X.key),n("/entry/new")):X.type==="STORED_FILES_ERROR"&&(S.error("[App Context] Received STORED_FILES_ERROR from SW:",X.error),t({title:"Share Error",description:`Failed to retrieve/store shared files: ${X.error||"Unknown SW error"}`,variant:"destructive"}),X.key===B&&te()))},U=Z.registerListener("SHARED_FILES_READY",z),J=Z.registerListener("STORED_FILES_ERROR",z);return()=>{S.log("[App Context] Cleaning up SW message listeners."),U(),J()}},[t,n,B,te]);const ee=p.useCallback(z=>{const U={type:"DELETE_STORED_FILES",key:z};S.log(`[App Context] Requesting SW to delete stored files with key: ${z}`),Z.sendMessageToSW(U).catch(J=>{S.warn(`[App Context] Failed to send DELETE_STORED_FILES message to SW for key ${z}:`,J)})},[]),ge=p.useCallback(async(z,U)=>{if(!u||!i||!z)return null;try{return await i.getPhotoBlobUrl(z,U)}catch(J){return S.error(`getPhotoBlobUrl Error for hash ${z} (ID ${U}):`,J),null}},[i,u]),ce=p.useCallback(async(z,U)=>{if(!u||!i||!z)return null;try{return await i.getPhotoThumbnailUrl(z,U)}catch(J){return S.error(`getPhotoThumbnailUrl Error for hash ${z} (ID ${U}):`,J),null}},[i,u]),Pe=p.useCallback(async z=>{if(!u||!i)throw new Error("Journal not ready");let U=[];try{U=await i.getAllImageMetadata(),r.current&&v.length===0&&U.length>0&&C(U)}catch(ae){S.error("getCombinedEntryDetails: Failed to load local metadata:",ae),U=v}const J=(z.photos||[]).map(async ae=>{let Fe=null,xe=null;const Me=U.find(gt=>gt.id===ae.photoId),Bn=(Me==null?void 0:Me.photoMetadata)??null,Ne=(Me==null?void 0:Me.photoFilename)??null,bt=Bn==null?void 0:Bn.contentHash;if(!bt)S.warn(`Metadata or contentHash missing for photoId: ${ae.photoId}`);else{const[gt,Yt]=await Promise.all([ge(bt,ae.photoId),ce(bt,ae.photoId)]);Fe=gt,xe=Yt}return{...ae,photoUrl:Fe,thumbnailUrl:xe,photoMetadata:Bn,photoFilename:Ne}}),X=await Promise.all(J);return{...z,photos:X}},[i,u,v,ge,ce]),Ce=p.useCallback(async()=>{if(W!=="calendar"||!r.current||!u||!i)return;let z=0;const U=3;let J=document.querySelectorAll(".day-with-image");for(;J.length===0&&z<U;){S.log(`[loadDayBackgrounds] No day elements found, retrying (${z+1}/${U})...`);const Ne=200*Math.pow(2,z);await new Promise(bt=>setTimeout(bt,Ne)),J=document.querySelectorAll(".day-with-image"),z++}if(y.length===0||J.length===0){S.warn("[loadDayBackgrounds] No entries or day elements after retries, aborting.");return}const X=new Map;y.forEach(Ne=>{if(Ne.photos&&Ne.photos.length>0){const bt=X.get(Ne.date),gt=new Date(Ne.createdAt),Yt=bt?new Date(bt.createdAt):new Date(0);(!bt||gt.getTime()>Yt.getTime())&&X.set(Ne.date,Ne)}});let ae=[];try{ae=await i.getAllImageMetadata(),r.current&&v.length===0&&ae.length>0&&C(ae)}catch(Ne){S.error("[loadDayBackgrounds] Failed load local metadata:",Ne),ae=v}const Fe=(Ne,bt,gt)=>{var an;if(!r.current)return;const Yt=bt.crop,_t=gt==null?void 0:gt.width,Qn=gt==null?void 0:gt.height,Ln=(an=Ne.parentElement)==null?void 0:an.getBoundingClientRect(),Zn=(Ln==null?void 0:Ln.width)??0;if(Yt&&_t&&Qn&&_t>0&&Qn>0&&Yt.w>0&&Zn>0){const Xt=Zn/Yt.w,mo=_t*Xt,Ql=Qn*Xt,Zl=-Yt.x*Xt,go=-Yt.y*Xt;Object.assign(Ne.style,{width:`${mo}px`,height:`${Ql}px`,transform:`translate(${Zl}px, ${go}px)`,objectFit:"initial",objectPosition:"initial",opacity:""})}else Object.assign(Ne.style,{width:"100%",height:"100%",transform:"",objectFit:"cover",objectPosition:"center center",opacity:""});requestAnimationFrame(()=>{r.current&&Ne.classList.add("img-loaded")})},xe=Ne=>{Ne.src&&Ne.src.startsWith("blob:")&&q.revokeUrl(Ne.getAttribute("data-content-hash")??""),Ne.removeAttribute("src"),Object.assign(Ne.style,{width:"",height:"",transform:"",objectPosition:"",opacity:""}),Ne.classList.remove("img-loaded"),Ne.removeAttribute("data-photo-id"),Ne.removeAttribute("data-content-hash")},Me=new Set;J.forEach(Ne=>{var Ln,Zn;const bt=Ne.getAttribute("data-day");if(!bt)return;const Yt=new Date(Date.UTC(o.currentYear,o.currentMonth-1,parseInt(bt))).toISOString().split("T")[0],_t=X.get(Yt),Qn=(Ln=_t==null?void 0:_t.photos)==null?void 0:Ln[0];if(Qn!=null&&Qn.photoId){const an=ae.find(mo=>mo.id===Qn.photoId),Xt=(Zn=an==null?void 0:an.photoMetadata)==null?void 0:Zn.contentHash;Xt&&Me.add(Xt)}}),document.querySelectorAll(".calendar-day-img.img-loaded").forEach(Ne=>{const bt=Ne,gt=bt.getAttribute("data-content-hash");gt&&!Me.has(gt)&&xe(bt)});const Bn=Array.from(J).map(async Ne=>{var Ql,Zl;const bt=Ne.getAttribute("data-day");if(!bt)return;const Yt=new Date(Date.UTC(o.currentYear,o.currentMonth-1,parseInt(bt))).toISOString().split("T")[0],_t=Ne.querySelector(".calendar-day-img");if(!_t)return;const Qn=X.get(Yt),Ln=(Ql=Qn==null?void 0:Qn.photos)==null?void 0:Ql[0],Zn=(Ln==null?void 0:Ln.photoId)??null,an=Zn?ae.find(go=>go.id===Zn):null,Xt=((Zl=an==null?void 0:an.photoMetadata)==null?void 0:Zl.contentHash)??null,mo=_t.getAttribute("data-content-hash");if(mo&&mo!==Xt&&xe(_t),Xt&&i&&mo!==Xt&&Zn&&Ln&&(an!=null&&an.photoMetadata)){_t.setAttribute("data-photo-id",Zn),_t.setAttribute("data-content-hash",Xt);let go=null;const ec=Ln.crop,Px=an.photoMetadata.width||0,e4=an.photoMetadata.height||0;(ec.w*ec.h/(Px*e4)<.3||ec.w<300||ec.h<300)&&Px>0?go=await ge(Xt,Zn):go=await ce(Xt,Zn),go&&r.current&&_t.getAttribute("data-content-hash")===Xt?(_t.src=go,Fe(_t,Ln,an.photoMetadata)):r.current&&_t.getAttribute("data-content-hash")===Xt&&xe(_t)}else!Xt&&mo&&xe(_t)});await Promise.all(Bn)},[i,u,y,o,v,W,ge,ce,q]);p.useEffect(()=>{let z=null;return W==="calendar"&&u&&i?z=setTimeout(()=>{r.current&&(S.log("[AppContext] Triggering loadDayBackgrounds from effect."),Ce())},500):document.querySelectorAll(".calendar-day-img").forEach(U=>{const J=U;J.src&&J.src.startsWith("blob:")&&q.revokeUrl(J.getAttribute("data-content-hash")??""),J.removeAttribute("src"),Object.assign(J.style,{width:"",height:"",transform:"",objectPosition:"",opacity:""}),J.classList.remove("img-loaded"),J.removeAttribute("data-photo-id"),J.removeAttribute("data-content-hash")}),()=>{z&&clearTimeout(z)}},[Ce,W,q,y,v,u,i]);const _e=p.useCallback(z=>{const J=new Date(Date.UTC(o.currentYear,o.currentMonth-1,z)).toISOString().split("T")[0];return y.filter(X=>X.date===J)},[y,o.currentMonth,o.currentYear]),Se=p.useCallback(z=>y.find(U=>U.id===z),[y]),Ke=p.useCallback(async(z,U)=>{if(!u){S.warn("[AppContext] loadSpecificEntry: Client not ready");return}try{const J=U?await Xe(U):i;if(!J){S.warn("[AppContext] loadSpecificEntry: No active journal");return}const X=Se(z);if(X)return S.log(`[AppContext] loadSpecificEntry: Found entry ${z} in current month.`),X;S.log(`[AppContext] loadSpecificEntry: Entry ${z} not found in current month data, will load from journal...`);const ae=await J.getEntryById(z);if(ae)return S.log(`[AppContext] loadSpecificEntry: Found entry ${z} in journal`),ae;S.warn(`[AppContext] loadSpecificEntry: Entry ${z} not found in journal`);return}catch(J){S.error("[AppContext] loadSpecificEntry: Error loading entry from journal:",J);try{const X=i;if(!X)return;S.log(`[AppContext] loadSpecificEntry: Falling back to loading all entries to find ${z}`);const ae=await X.getDb(),Fe=await Km(ae);if(Fe&&Fe.length>0){S.log(`[AppContext] loadSpecificEntry: Loaded ${Fe.length} total entries, searching for ${z}`);const xe=Fe.find(Me=>Me.id===z);if(xe)return S.log(`[AppContext] loadSpecificEntry: Found entry ${z} in all entries`),xe;S.warn(`[AppContext] loadSpecificEntry: Entry ${z} not found in any entries (searched ${Fe.length} entries)`)}else S.warn("[AppContext] loadSpecificEntry: No entries found in database")}catch(X){S.error("[AppContext] loadSpecificEntry: Error during fallback:",X)}S.warn(`[AppContext] loadSpecificEntry: Entry ${z} not found in database.`);return}},[i,u,Se,Xe]),tt=p.useCallback(async z=>{if(S.log(`[AppContext handleDayClick] START - Day: ${z}, isClientReady: ${u}`),!u||!i){S.log("[AppContext handleDayClick] EXIT - Journal not ready");return}const U=_e(z),J=new Date(Date.UTC(o.currentYear,o.currentMonth-1,z));if(S.log(`[AppContext handleDayClick] Day: ${z}, Entries found: ${U.length}`),U.length>0)S.log("[AppContext handleDayClick] Opening view modal."),s.openViewEntriesModal(J,U);else{const X=J.toISOString().split("T")[0];S.log("[AppContext handleDayClick] Navigating to /entry/new for date:",X),n(`/entry/new?date=${X}`)}},[i,u,o.currentMonth,o.currentYear,_e,s.openViewEntriesModal,n,t]),Ge=p.useCallback(z=>{s.closeViewModal(),n(`/entry/edit/${z}`)},[n,s.closeViewModal]),it=p.useCallback(z=>{s.openDeleteConfirmation(z)},[s.openDeleteConfirmation]),mt=p.useCallback(async(z,U,J)=>{if(z.content=z.content.trim(),!u||!i)return k(new Error("Journal not ready.")),!1;O(!0),k(null),P(null);try{const X=z.date.getUTCFullYear(),ae=z.date.getUTCMonth()+1;let Fe=null,xe=null;if(U){const Ne=new Date(U.date+"T00:00:00Z");Fe=Ne.getUTCFullYear(),xe=Ne.getUTCMonth()+1}let Me=i;if(!U&&J&&J!==i.id&&(S.log(`[AppContext] Using non-active journal (${J}) for new entry`),Me=await Xe(J),!Me))return k(new Error(`Target journal not found: ${J}`)),!1;S.log(`[AppContext] Saving entry to journal: ${Me.getJournalName()} (${Me.getJournalId()})`);const Bn=await Me.saveFormEntry(z,U);if(!Bn)throw new Error("Failed to save entry - no entry ID returned");t({title:U?"Entry Updated":"Entry Saved",description:`Your entry has been saved to journal: ${Me.getJournalName()}`,variant:"default"});try{const Ne=await i.getEntries(X,ae),bt=await i.getAllImageMetadata();if(r.current){if(C(bt),X===o.currentYear&&ae===o.currentMonth)E(Ne);else if(U&&Fe===o.currentYear&&xe===o.currentMonth){const Yt=await i.getEntries(Fe,xe);E(Yt)}const gt=Me.getSyncConfiguration();Bn&&(gt==null?void 0:gt.syncProviderType)!=="none"&&(gt!=null&&gt.syncProviderFolderReference)&&(S.log(`[AppContext] Entry saved/updated. Triggering sync for journal: ${Me.getJournalName()}`),sn(Me.getJournalId()).catch(Yt=>{S.error(`[AppContext] Sync after save for ${Me.getJournalName()} failed:`,Yt)}))}}catch(Ne){S.error("[AppContext] Error refreshing data after save:",Ne)}return r.current&&(S.log(`[AppContext] Navigating to month after save: ${X}-${ae}`),n(`/month/${X}/${ae}`)),!0}catch(X){return S.error("[AppContext] Save Err: Failed save entry to journal:",X),r.current&&k(X instanceof Error?X:new Error("Failed to save entry to journal")),!1}finally{r.current&&O(!1)}},[i,u,v,o,n,t,Xe]),kn=p.useCallback(async()=>{if(!(!u||!s.entryToDeleteId||!i)){O(!0),k(null),P(null);try{const z=s.entryToDeleteId;let U=Se(z);if(U||(U=await Ke(z)),!U){S.error(`Delete Error: Could not find entry source for ID ${z}`),k(new Error("Could not find entry to delete")),O(!1),s.closeDeleteDialog();return}const J=new Date(U.date+"T00:00:00Z"),X=J.getUTCFullYear(),ae=J.getUTCMonth()+1;if(await i.deleteEntry(z),S.log(`[AppContext] Deleting entry ${z} from journal ${i.name}.`),t({title:"Entry Deleted",description:"The entry has been deleted from journal.",variant:"default"}),s.closeDeleteDialog(),s.closeViewModal(),r.current){if(X===o.currentYear&&ae===o.currentMonth){const Me=await i.getEntries(X,ae);E(Me)}const Fe=await i.getAllImageMetadata();C(Fe);const xe=i.getSyncConfiguration();(xe==null?void 0:xe.syncProviderType)!=="none"&&(xe!=null&&xe.syncProviderFolderReference)&&(S.log(`[AppContext] Entry saved/updated. Triggering sync for journal: ${i.getJournalName()}`),sn(i.getJournalId()).catch(Me=>{S.error(`[AppContext] Sync after save for ${i.getJournalName()} failed:`,Me)}))}}catch(z){S.error("[AppContext] Delete Error:",z),r.current&&k(z instanceof Error?z:new Error("Failed to delete entry from journal"))}finally{r.current&&O(!1)}}},[i,u,s,o,Se,Ke,t,v]),Rt={activeJournal:i,isClientReady:u,isOnline:d,journalList:l,isSwitchingJournal:N,isLoadingActiveJournalData:ot,isJournalSelectorOpen:I,isCreatingJournal:H,isRenamingJournal:he,isChangingJournalColor:Y,isDeletingJournal:fe,isConfiguringSyncSettings:!!Ze,journalForSyncSettings:Ze,journalToRename:ve,journalToChangeColor:pe,journalToDelete:ct,openJournalSelector:oe,closeJournalSelector:le,handleCreateNewJournal:Kt,handleSwitchJournal:zt,handleRenameJournal:on,handleChangeJournalColor:jt,handleDeleteJournal:Xn,initiateCreateNewJournal:Gt,initiateRenameJournal:me,initiateChangeJournalColor:Te,initiateDeleteJournal:pt,initiateConfigureSyncSettings:hr,cancelCreateNewJournal:xn,cancelRenameJournal:je,cancelChangeJournalColor:Ye,cancelDeleteJournal:Jt,cancelConfigureSyncSettings:hs,performSync:sn,syncStatus:Tt,syncMessage:We,currentMonth:o.currentMonth,currentYear:o.currentYear,swipeDirection:o.swipeDirection,isMonthYearPickerOpen:o.isMonthYearPickerOpen,goToPreviousMonth:o.goToPreviousMonth,goToNextMonth:o.goToNextMonth,handleMonthYearSelect:o.handleMonthYearSelect,handleCalendarSwipe:o.handleCalendarSwipe,openMonthYearPicker:o.openMonthYearPicker,closeMonthYearPicker:o.closeMonthYearPicker,setSwipeDirection:o.setSwipeDirection,monthViewType:W,setMonthViewType:j,currentMonthEntries:y,isLoadingEntries:w,imagesMetadata:v,isLoadingImagesMeta:b,entriesError:A,operationError:F,imagesMetaError:T,setEntriesError:P,setImagesMetaError:M,clearOperationError:()=>k(null),isViewEntryModalOpen:s.isViewEntryModalOpen,getJournalInstance:Xe,selectedBasicEntriesForModal:s.selectedBasicEntriesForModal,viewEntryModalDate:s.entryDateForModal,openViewEntriesModal:s.openViewEntriesModal,closeViewModal:s.closeViewModal,isDeleteDialogOpen:s.isDeleteDialogOpen,entryToDeleteId:s.entryToDeleteId,openDeleteConfirmation:s.openDeleteConfirmation,closeDeleteDialog:s.closeDeleteDialog,isSaving:_,handleSaveEntry:mt,handleDeleteEntry:kn,loadDayBackgrounds:Ce,getPhotoBlobUrl:ge,getPhotoThumbnailUrl:ce,getCombinedEntryDetails:Pe,getEntriesForDay:_e,getEntryById:Se,loadSpecificEntry:Ke,handleDayClick:tt,handleEditRequest:Ge,handleDeleteRequest:it,shareKeyForForm:B,clearShareKeyForForm:te,deleteSharedFilesFromStorage:ee,navigate:n};return h.jsxs(mD.Provider,{value:Rt,children:[e,h.jsx(D_,{isOpen:I,onClose:le,journals:l,activeJournalId:(i==null?void 0:i.id)||null,onSelectJournal:zt,onInitiateCreateNewJournal:Gt,onInitiateRenameJournal:me,onInitiateDeleteJournal:pt,onInitiateChangeJournalColor:Te,isCreating:H,onCreateJournal:Kt,onCancelCreate:xn}),h.jsx(A_,{isOpen:he,onClose:je,journal:ve,onRename:on}),h.jsx(k_,{isOpen:Y,onClose:Ye,journal:pe,onSelectColor:jt}),h.jsx(T_,{isOpen:fe,onClose:Jt,journal:ct,onConfirmDelete:Xn}),Ze&&i&&h.jsx(j_,{open:Ae,onClose:hs,journalId:Ze.id,journalName:Ze.name,journalMetaService:$e,journal:i,isImportMode:Ft})]})};function Wr(){const e=p.useContext(mD);if(e===void 0)throw new Error("useAppContext must be used within an AppProvider");return e}var q_=(e,t,n,r,o,s,i,a)=>{let l=document.documentElement,c=["light","dark"];function u(m){(Array.isArray(e)?e:[e]).forEach(g=>{let y=g==="class",E=y&&s?o.map(w=>s[w]||w):o;y?(l.classList.remove(...E),l.classList.add(s&&s[m]?s[m]:m)):l.setAttribute(g,m)}),f(m)}function f(m){a&&c.includes(m)&&(l.style.colorScheme=m)}function d(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let m=localStorage.getItem(t)||n,g=i&&m==="system"?d():m;u(g)}catch{}},E1=["light","dark"],gD="(prefers-color-scheme: dark)",Y_=typeof window>"u",gg=p.createContext(void 0),X_={setTheme:e=>{},themes:[]},xg=()=>{var e;return(e=p.useContext(gg))!=null?e:X_},Q_=e=>p.useContext(gg)?p.createElement(p.Fragment,null,e.children):p.createElement(e5,{...e}),Z_=["light","dark"],e5=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:o="theme",themes:s=Z_,defaultTheme:i=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u,scriptProps:f})=>{let[d,m]=p.useState(()=>n5(o,i)),[g,y]=p.useState(()=>d==="system"?F0():d),E=l?Object.values(l):s,w=p.useCallback(b=>{let D=b;if(!D)return;b==="system"&&n&&(D=F0());let A=l?l[D]:D,P=t?r5(u):null,F=document.documentElement,k=T=>{T==="class"?(F.classList.remove(...E),A&&F.classList.add(A)):T.startsWith("data-")&&(A?F.setAttribute(T,A):F.removeAttribute(T))};if(Array.isArray(a)?a.forEach(k):k(a),r){let T=E1.includes(i)?i:null,M=E1.includes(D)?D:T;F.style.colorScheme=M}P==null||P()},[u]),x=p.useCallback(b=>{let D=typeof b=="function"?b(d):b;m(D);try{localStorage.setItem(o,D)}catch{}},[d]),v=p.useCallback(b=>{let D=F0(b);y(D),d==="system"&&n&&!e&&w("system")},[d,e]);p.useEffect(()=>{let b=window.matchMedia(gD);return b.addListener(v),v(b),()=>b.removeListener(v)},[v]),p.useEffect(()=>{let b=D=>{D.key===o&&(D.newValue?m(D.newValue):x(i))};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[x]),p.useEffect(()=>{w(e??d)},[e,d]);let C=p.useMemo(()=>({theme:d,setTheme:x,forcedTheme:e,resolvedTheme:d==="system"?g:d,themes:n?[...s,"system"]:s,systemTheme:n?g:void 0}),[d,x,e,g,n,s]);return p.createElement(gg.Provider,{value:C},p.createElement(t5,{forcedTheme:e,storageKey:o,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:l,themes:s,nonce:u,scriptProps:f}),c)},t5=p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,t,s,e,a,i,r,o]).slice(1,-1);return p.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${q_.toString()})(${u})`}})}),n5=(e,t)=>{if(Y_)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},r5=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},F0=e=>(e||(e=window.matchMedia(gD)),e.matches?"dark":"light"),op=["Enter"," "],o5=["ArrowDown","PageUp","Home"],xD=["ArrowUp","PageDown","End"],s5=[...o5,...xD],i5={ltr:[...op,"ArrowRight"],rtl:[...op,"ArrowLeft"]},a5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wl="Menu",[El,l5,c5]=md(Wl),[Ws,vD]=bn(Wl,[c5,Dd,la]),Md=Dd(),yD=la(),[u5,Js]=Ws(Wl),[d5,Jl]=Ws(Wl),wD=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=e,a=Md(t),[l,c]=p.useState(null),u=p.useRef(!1),f=kt(s),d=aa(o);return p.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),h.jsx(ON,{...a,children:h.jsx(u5,{scope:t,open:n,onOpenChange:f,content:l,onContentChange:c,children:h.jsx(d5,{scope:t,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:d,modal:i,children:r})})})};wD.displayName=Wl;var f5="MenuAnchor",vg=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Md(n);return h.jsx(zb,{...o,...r,ref:t})});vg.displayName=f5;var yg="MenuPortal",[h5,ED]=Ws(yg,{forceMount:void 0}),CD=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=Js(yg,t);return h.jsx(h5,{scope:t,forceMount:n,children:h.jsx(Dn,{present:n||s.open,children:h.jsx(gd,{asChild:!0,container:o,children:r})})})};CD.displayName=yg;var lr="MenuContent",[p5,wg]=Ws(lr),SD=p.forwardRef((e,t)=>{const n=ED(lr,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Js(lr,e.__scopeMenu),i=Jl(lr,e.__scopeMenu);return h.jsx(El.Provider,{scope:e.__scopeMenu,children:h.jsx(Dn,{present:r||s.open,children:h.jsx(El.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(m5,{...o,ref:t}):h.jsx(g5,{...o,ref:t})})})})}),m5=p.forwardRef((e,t)=>{const n=Js(lr,e.__scopeMenu),r=p.useRef(null),o=Le(t,r);return p.useEffect(()=>{const s=r.current;if(s)return T2(s)},[]),h.jsx(Eg,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:se(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),g5=p.forwardRef((e,t)=>{const n=Js(lr,e.__scopeMenu);return h.jsx(Eg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),x5=Ji("MenuContent.ScrollLock"),Eg=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:m,disableOutsideScroll:g,...y}=e,E=Js(lr,n),w=Jl(lr,n),x=Md(n),v=yD(n),C=l5(n),[b,D]=p.useState(null),A=p.useRef(null),P=Le(t,A,E.onContentChange),F=p.useRef(0),k=p.useRef(""),T=p.useRef(0),M=p.useRef(null),_=p.useRef("right"),O=p.useRef(0),W=g?ng:p.Fragment,j=g?{as:x5,allowPinchZoom:!0}:void 0,B=N=>{var Y,re;const V=k.current+N,I=C().filter(fe=>!fe.disabled),L=document.activeElement,H=(Y=I.find(fe=>fe.ref.current===L))==null?void 0:Y.textValue,$=I.map(fe=>fe.textValue),he=T5($,V,H),de=(re=I.find(fe=>fe.textValue===he))==null?void 0:re.ref.current;(function fe(ke){k.current=ke,window.clearTimeout(F.current),ke!==""&&(F.current=window.setTimeout(()=>fe(""),1e3))})(V),de&&setTimeout(()=>de.focus())};p.useEffect(()=>()=>window.clearTimeout(F.current),[]),w2();const R=p.useCallback(N=>{var I,L;return _.current===((I=M.current)==null?void 0:I.side)&&R5(N,(L=M.current)==null?void 0:L.area)},[]);return h.jsx(p5,{scope:n,searchRef:k,onItemEnter:p.useCallback(N=>{R(N)&&N.preventDefault()},[R]),onItemLeave:p.useCallback(N=>{var V;R(N)||((V=A.current)==null||V.focus(),D(null))},[R]),onTriggerLeave:p.useCallback(N=>{R(N)&&N.preventDefault()},[R]),pointerGraceTimerRef:T,onPointerGraceIntentChange:p.useCallback(N=>{M.current=N},[]),children:h.jsx(W,{...j,children:h.jsx(tg,{asChild:!0,trapped:o,onMountAutoFocus:se(s,N=>{var V;N.preventDefault(),(V=A.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx($l,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:m,children:h.jsx(Xm,{asChild:!0,...v,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:b,onCurrentTabStopIdChange:D,onEntryFocus:se(l,N=>{w.isUsingKeyboardRef.current||N.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(Vb,{role:"menu","aria-orientation":"vertical","data-state":OD(E.open),"data-radix-menu-content":"",dir:w.dir,...x,...y,ref:P,style:{outline:"none",...y.style},onKeyDown:se(y.onKeyDown,N=>{const I=N.target.closest("[data-radix-menu-content]")===N.currentTarget,L=N.ctrlKey||N.altKey||N.metaKey,H=N.key.length===1;I&&(N.key==="Tab"&&N.preventDefault(),!L&&H&&B(N.key));const $=A.current;if(N.target!==$||!s5.includes(N.key))return;N.preventDefault();const de=C().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);xD.includes(N.key)&&de.reverse(),P5(de)}),onBlur:se(e.onBlur,N=>{N.currentTarget.contains(N.target)||(window.clearTimeout(F.current),k.current="")}),onPointerMove:se(e.onPointerMove,Cl(N=>{const V=N.target,I=O.current!==N.clientX;if(N.currentTarget.contains(V)&&I){const L=N.clientX>O.current?"right":"left";_.current=L,O.current=N.clientX}}))})})})})})})});SD.displayName=lr;var v5="MenuGroup",Cg=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(De.div,{role:"group",...r,ref:t})});Cg.displayName=v5;var y5="MenuLabel",bD=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(De.div,{...r,ref:t})});bD.displayName=y5;var Bu="MenuItem",C1="menu.itemSelect",Nd=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=p.useRef(null),i=Jl(Bu,e.__scopeMenu),a=wg(Bu,e.__scopeMenu),l=Le(t,s),c=p.useRef(!1),u=()=>{const f=s.current;if(!n&&f){const d=new CustomEvent(C1,{bubbles:!0,cancelable:!0});f.addEventListener(C1,m=>r==null?void 0:r(m),{once:!0}),km(f,d),d.defaultPrevented?c.current=!1:i.onClose()}};return h.jsx(DD,{...o,ref:l,disabled:n,onClick:se(e.onClick,u),onPointerDown:f=>{var d;(d=e.onPointerDown)==null||d.call(e,f),c.current=!0},onPointerUp:se(e.onPointerUp,f=>{var d;c.current||(d=f.currentTarget)==null||d.click()}),onKeyDown:se(e.onKeyDown,f=>{const d=a.searchRef.current!=="";n||d&&f.key===" "||op.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Nd.displayName=Bu;var DD=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,i=wg(Bu,n),a=yD(n),l=p.useRef(null),c=Le(t,l),[u,f]=p.useState(!1),[d,m]=p.useState("");return p.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[s.children]),h.jsx(El.ItemSlot,{scope:n,disabled:r,textValue:o??d,children:h.jsx(Qm,{asChild:!0,...a,focusable:!r,children:h.jsx(De.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:se(e.onPointerMove,Cl(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:se(e.onPointerLeave,Cl(g=>i.onItemLeave(g))),onFocus:se(e.onFocus,()=>f(!0)),onBlur:se(e.onBlur,()=>f(!1))})})})}),w5="MenuCheckboxItem",AD=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return h.jsx(RD,{scope:e.__scopeMenu,checked:n,children:h.jsx(Nd,{role:"menuitemcheckbox","aria-checked":Lu(n)?"mixed":n,...o,ref:t,"data-state":bg(n),onSelect:se(o.onSelect,()=>r==null?void 0:r(Lu(n)?!0:!n),{checkForDefaultPrevented:!1})})})});AD.displayName=w5;var PD="MenuRadioGroup",[E5,C5]=Ws(PD,{value:void 0,onValueChange:()=>{}}),kD=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=kt(r);return h.jsx(E5,{scope:e.__scopeMenu,value:n,onValueChange:s,children:h.jsx(Cg,{...o,ref:t})})});kD.displayName=PD;var TD="MenuRadioItem",FD=p.forwardRef((e,t)=>{const{value:n,...r}=e,o=C5(TD,e.__scopeMenu),s=n===o.value;return h.jsx(RD,{scope:e.__scopeMenu,checked:s,children:h.jsx(Nd,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":bg(s),onSelect:se(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});FD.displayName=TD;var Sg="MenuItemIndicator",[RD,S5]=Ws(Sg,{checked:!1}),MD=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=S5(Sg,n);return h.jsx(Dn,{present:r||Lu(s.checked)||s.checked===!0,children:h.jsx(De.span,{...o,ref:t,"data-state":bg(s.checked)})})});MD.displayName=Sg;var b5="MenuSeparator",ND=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(De.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});ND.displayName=b5;var D5="MenuArrow",ID=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Md(n);return h.jsx(Ub,{...o,...r,ref:t})});ID.displayName=D5;var A5="MenuSub",[J7,jD]=Ws(A5),Ia="MenuSubTrigger",_D=p.forwardRef((e,t)=>{const n=Js(Ia,e.__scopeMenu),r=Jl(Ia,e.__scopeMenu),o=jD(Ia,e.__scopeMenu),s=wg(Ia,e.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),h.jsx(vg,{asChild:!0,...c,children:h.jsx(DD,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":OD(n.open),...e,ref:pd(t,o.onTriggerChange),onClick:f=>{var d;(d=e.onClick)==null||d.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:se(e.onPointerMove,Cl(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:se(e.onPointerLeave,Cl(f=>{var m,g;u();const d=(m=n.content)==null?void 0:m.getBoundingClientRect();if(d){const y=(g=n.content)==null?void 0:g.dataset.side,E=y==="right",w=E?-5:5,x=d[E?"left":"right"],v=d[E?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+w,y:f.clientY},{x,y:d.top},{x:v,y:d.top},{x:v,y:d.bottom},{x,y:d.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:se(e.onKeyDown,f=>{var m;const d=s.searchRef.current!=="";e.disabled||d&&f.key===" "||i5[r.dir].includes(f.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),f.preventDefault())})})})});_D.displayName=Ia;var BD="MenuSubContent",LD=p.forwardRef((e,t)=>{const n=ED(lr,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Js(lr,e.__scopeMenu),i=Jl(lr,e.__scopeMenu),a=jD(BD,e.__scopeMenu),l=p.useRef(null),c=Le(t,l);return h.jsx(El.Provider,{scope:e.__scopeMenu,children:h.jsx(Dn,{present:r||s.open,children:h.jsx(El.Slot,{scope:e.__scopeMenu,children:h.jsx(Eg,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:se(e.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:se(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:se(e.onKeyDown,u=>{var m;const f=u.currentTarget.contains(u.target),d=a5[i.dir].includes(u.key);f&&d&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});LD.displayName=BD;function OD(e){return e?"open":"closed"}function Lu(e){return e==="indeterminate"}function bg(e){return Lu(e)?"indeterminate":e?"checked":"unchecked"}function P5(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function k5(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function T5(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=k5(e,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function F5(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s].x,l=t[s].y,c=t[i].x,u=t[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function R5(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return F5(n,t)}function Cl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var M5=wD,N5=vg,I5=CD,j5=SD,_5=Cg,B5=bD,L5=Nd,O5=AD,$5=kD,z5=FD,V5=MD,U5=ND,H5=ID,W5=_D,J5=LD,Dg="DropdownMenu",[G5,G7]=bn(Dg,[vD]),An=vD(),[K5,$D]=G5(Dg),zD=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=An(t),c=p.useRef(null),[u=!1,f]=Ur({prop:o,defaultProp:s,onChange:i});return h.jsx(K5,{scope:t,triggerId:Di(),triggerRef:c,contentId:Di(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:a,children:h.jsx(M5,{...l,open:u,onOpenChange:f,dir:r,modal:a,children:n})})};zD.displayName=Dg;var VD="DropdownMenuTrigger",UD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,s=$D(VD,n),i=An(n);return h.jsx(N5,{asChild:!0,...i,children:h.jsx(De.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:pd(t,s.triggerRef),onPointerDown:se(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:se(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});UD.displayName=VD;var q5="DropdownMenuPortal",HD=e=>{const{__scopeDropdownMenu:t,...n}=e,r=An(t);return h.jsx(I5,{...r,...n})};HD.displayName=q5;var WD="DropdownMenuContent",JD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$D(WD,n),s=An(n),i=p.useRef(!1);return h.jsx(j5,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:t,onCloseAutoFocus:se(e.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:se(e.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JD.displayName=WD;var Y5="DropdownMenuGroup",GD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(_5,{...o,...r,ref:t})});GD.displayName=Y5;var X5="DropdownMenuLabel",KD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(B5,{...o,...r,ref:t})});KD.displayName=X5;var Q5="DropdownMenuItem",qD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(L5,{...o,...r,ref:t})});qD.displayName=Q5;var Z5="DropdownMenuCheckboxItem",YD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(O5,{...o,...r,ref:t})});YD.displayName=Z5;var e6="DropdownMenuRadioGroup",t6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx($5,{...o,...r,ref:t})});t6.displayName=e6;var n6="DropdownMenuRadioItem",XD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(z5,{...o,...r,ref:t})});XD.displayName=n6;var r6="DropdownMenuItemIndicator",QD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(V5,{...o,...r,ref:t})});QD.displayName=r6;var o6="DropdownMenuSeparator",ZD=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(U5,{...o,...r,ref:t})});ZD.displayName=o6;var s6="DropdownMenuArrow",i6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(H5,{...o,...r,ref:t})});i6.displayName=s6;var a6="DropdownMenuSubTrigger",eA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(W5,{...o,...r,ref:t})});eA.displayName=a6;var l6="DropdownMenuSubContent",tA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=An(n);return h.jsx(J5,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tA.displayName=l6;var c6=zD,u6=UD,d6=HD,nA=JD,f6=GD,rA=KD,oA=qD,sA=YD,iA=XD,aA=QD,lA=ZD,cA=eA,uA=tA;const Ag=c6,Pg=u6,h6=f6,p6=p.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(cA,{ref:o,className:ie("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,h.jsx(ab,{className:"ml-auto"})]}));p6.displayName=cA.displayName;const m6=p.forwardRef(({className:e,...t},n)=>h.jsx(uA,{ref:n,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));m6.displayName=uA.displayName;const Id=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(d6,{children:h.jsx(nA,{ref:r,sideOffset:t,className:ie("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Id.displayName=nA.displayName;const Zr=p.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(oA,{ref:r,className:ie("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Zr.displayName=oA.displayName;const g6=p.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(sA,{ref:o,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(aA,{children:h.jsx(ib,{className:"h-4 w-4"})})}),t]}));g6.displayName=sA.displayName;const x6=p.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(iA,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(aA,{children:h.jsx(lb,{className:"h-2 w-2 fill-current"})})}),t]}));x6.displayName=iA.displayName;const sp=p.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(rA,{ref:r,className:ie("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));sp.displayName=rA.displayName;const ip=p.forwardRef(({className:e,...t},n)=>h.jsx(lA,{ref:n,className:ie("-mx-1 my-1 h-px bg-muted",e),...t}));ip.displayName=lA.displayName;const dA=({className:e,...t})=>h.jsx("span",{className:ie("ml-auto text-xs tracking-widest opacity-60",e),...t});dA.displayName="DropdownMenuShortcut";var kg="Switch",[v6,K7]=bn(kg),[y6,w6]=v6(kg),fA=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...f}=e,[d,m]=p.useState(null),g=Le(t,v=>m(v)),y=p.useRef(!1),E=d?u||!!d.closest("form"):!0,[w=!1,x]=Ur({prop:o,defaultProp:s,onChange:c});return h.jsxs(y6,{scope:n,checked:w,disabled:a,children:[h.jsx(De.button,{type:"button",role:"switch","aria-checked":w,"aria-required":i,"data-state":mA(w),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:g,onClick:se(e.onClick,v=>{x(C=>!C),E&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),E&&h.jsx(E6,{control:d,bubbles:!y.current,name:r,value:l,checked:w,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});fA.displayName=kg;var hA="SwitchThumb",pA=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,o=w6(hA,n);return h.jsx(De.span,{"data-state":mA(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});pA.displayName=hA;var E6=e=>{const{control:t,checked:n,bubbles:r=!0,...o}=e,s=p.useRef(null),i=fg(n),a=bd(t);return p.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&f){const d=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(d)}},[i,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function mA(e){return e?"checked":"unchecked"}var gA=fA,C6=pA;const xA=p.forwardRef(({className:e,...t},n)=>h.jsx(gA,{className:ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:h.jsx(C6,{className:ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xA.displayName=gA.displayName;function S6(){const{openJournalSelector:e,initiateConfigureSyncSettings:t,activeJournal:n,journalList:r,handleSwitchJournal:o}=Wr(),{theme:s,setTheme:i,resolvedTheme:a}=xg(),l=a==="dark",c=xt.useMemo(()=>!r||!n?[]:[...r].sort((d,m)=>m.lastModifiedTimestamp-d.lastModifiedTimestamp).filter(d=>d.id!==n.id).slice(0,3),[r,n]),u=f=>{i(f?"dark":"light")};return h.jsxs(Ag,{children:[h.jsx(Pg,{asChild:!0,children:h.jsx(be,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"Settings Menu",children:h.jsx(W8,{className:"h-4 w-4"})})}),h.jsxs(Id,{className:"w-56",align:"end",forceMount:!0,children:[h.jsx(sp,{className:"font-normal",children:"Settings"}),h.jsx(ip,{}),c.length>0&&h.jsxs(h6,{children:[h.jsx(sp,{className:"text-xs text-muted-foreground py-1",children:"Recent Journals"}),c.map(f=>h.jsxs(Zr,{className:"cursor-pointer pl-6",onClick:()=>o(f.id),children:[h.jsx("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:`var(--${f.color.toLowerCase()}-500)`}}),h.jsx("span",{className:"truncate",children:f.name}),h.jsxs(dA,{children:[f.entryCount," ",f.entryCount===1?"entry":"entries"]})]},f.id)),h.jsx(ip,{})]}),h.jsxs(Zr,{className:"cursor-pointer",onClick:()=>e(),children:[h.jsx(T8,{className:"mr-2 h-4 w-4"}),h.jsx("span",{children:"Switch Journal"})]}),n&&h.jsxs(Zr,{className:"cursor-pointer",onClick:()=>t(n.id),children:[h.jsx(Mm,{className:"mr-2 h-4 w-4"}),h.jsx("span",{children:"Sync Settings"})]}),h.jsx(Zr,{className:"cursor-pointer",onSelect:f=>f.preventDefault(),children:h.jsxs("div",{className:"flex items-center justify-between w-full",children:[h.jsxs("div",{className:"flex items-center",children:[l?h.jsx(V8,{className:"mr-2 h-4 w-4"}):h.jsx(J8,{className:"mr-2 h-4 w-4"}),h.jsx("span",{children:"Dark Mode"})]}),h.jsx(xA,{checked:l,onCheckedChange:u,"aria-label":"Toggle dark mode"})]})})]})]})}function b6(){const{monthViewType:e,setMonthViewType:t,isOnline:n,activeJournal:r,journalList:o,openJournalSelector:s,initiateRenameJournal:i,initiateConfigureSyncSettings:a,performSync:l,syncStatus:c,syncMessage:u}=Wr();xg();const[,f]=Dm(),{toast:d}=Ol(),m=p.useRef(null);p.useEffect(()=>{S.log("[Header] setLocation instance type:",typeof f)},[f]);const g=E=>{S.log("[Header] New Entry Link clicked. Href:",E.currentTarget.href)},y=E=>{const w=E.target.files;if(w&&w.length>0){const x=Array.from(w),v=x.filter(b=>!b.type.startsWith("image/"));v.length>0&&d({title:"Invalid File Type",description:`Only image files are allowed. ${v.map(b=>b.name).join(", ")} ${v.length===1?"was":"were"} ignored.`,variant:"destructive"});const C=x.filter(b=>b.type.startsWith("image/"));if(C.length>0){const b=crypto.randomUUID();S.log(`[Header] Storing ${C.length} files with service worker using key: ${b}`),navigator.serviceWorker&&navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"STORE_FILES",key:b,files:C}),setTimeout(()=>{f(`/entry/new#shareKey=${b}`)},100)):(S.error("[Header] Service worker not available"),d({title:"Error",description:"Could not process files. Please try again.",variant:"destructive"}))}else S.log("[Header] No valid image files selected.")}else S.log("[Header] No files selected.");E.target&&(E.target.value="")};return h.jsxs("header",{className:ie("fixed top-0 left-0 right-0 z-10 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-md border-b",n?"border-neutral-200 dark:border-neutral-800":"border-orange-400 dark:border-orange-600"),children:[!n&&h.jsxs("div",{className:"absolute top-full left-0 right-0 bg-orange-100 dark:bg-orange-900 border-b border-orange-400 dark:border-orange-600 text-orange-700 dark:text-orange-200 px-4 py-1 text-xs flex items-center justify-center z-10",children:[h.jsx(ry,{className:"h-3 w-3 mr-1.5"}),"Offline Mode."]}),h.jsx("input",{type:"file",ref:m,onChange:y,multiple:!0,accept:"image/*",className:"hidden","aria-hidden":"true"}),h.jsxs("div",{className:ie("container mx-auto flex items-center justify-between h-16 px-4"),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("img",{src:"./logo.svg",alt:"Phojo Logo",className:"h-6 w-auto mr-2"}),r&&h.jsx("div",{className:"flex items-center",children:h.jsx("div",{className:"flex items-center group cursor-pointer px-2 py-1.5 rounded-md transition-colors hover:bg-gray-100 dark:hover:bg-gray-800",onClick:s,title:"Switch to another journal",role:"button",tabIndex:0,onKeyDown:E=>E.key==="Enter"&&s(),"aria-label":"Open journal selector",style:{backgroundColor:r.color?`var(--${r.color.toLowerCase()}-50)`:void 0,borderLeft:r.color?`3px solid var(--${r.color.toLowerCase()}-500)`:void 0},children:h.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",children:r.name})})})]}),h.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[h.jsxs(v2,{type:"single",size:"sm",value:e,onValueChange:E=>{E&&t(E)},className:"bg-muted p-0.5 rounded-md","aria-label":"View type",children:[h.jsx(Xh,{value:"calendar","aria-label":"Calendar view",className:"h-7 w-7 px-1 data-[state=on]:bg-background data-[state=on]:shadow-sm",children:h.jsx(j8,{className:"h-4 w-4"})}),h.jsx(Xh,{value:"list","aria-label":"List view",className:"h-7 w-7 px-1 data-[state=on]:bg-background data-[state=on]:shadow-sm",children:h.jsx(O8,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[r&&o.some(E=>E.id===r.id&&E.syncProviderType&&E.syncProviderType!=="none")&&h.jsx(be,{variant:"ghost",size:"icon",onClick:()=>l(r.id),title:"Sync Now",disabled:c!==Tn.IDLE,children:c===Tn.IDLE?h.jsx(Mm,{className:"h-5 w-5"}):h.jsx(Ut,{className:"h-5 w-5 animate-spin"})}),!n&&h.jsxs("div",{className:"flex items-center mr-2 px-1.5 py-1 bg-yellow-200 dark:bg-yellow-800 dark:text-white text-black rounded-md text-xs",title:"Offline Mode",children:[h.jsx(ry,{className:"h-3 w-3 mr-1"})," Offline"]})]}),h.jsx(rR,{href:"/entry/new",onClick:g,children:h.jsx(be,{size:"icon",className:"h-8 w-8","aria-label":"New Entry",title:"New Entry",children:h.jsx(U8,{className:"h-4 w-4"})})}),h.jsx(S6,{})]})]})]})}function D6(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}function jd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const ap=e=>Array.isArray(e);function vA(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Sl(e){return typeof e=="string"||Array.isArray(e)}function S1(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Tg(e,t,n,r){if(typeof t=="function"){const[o,s]=S1(r);t=t(n!==void 0?n:e.custom,o,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,s]=S1(r);t=t(n!==void 0?n:e.custom,o,s)}return t}function _d(e,t,n){const r=e.getProps();return Tg(r,t,n!==void 0?n:r.custom,e)}const Fg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rg=["initial",...Fg],Gl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gs=new Set(Gl),no=e=>e*1e3,ro=e=>e/1e3,A6={type:"spring",stiffness:500,damping:25,restSpeed:10},P6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),k6={type:"keyframes",duration:.8},T6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},F6=(e,{keyframes:t})=>t.length>2?k6:Gs.has(e)?e.startsWith("scale")?P6(t[1]):A6:T6;function Mg(e,t){return e?e[t]||e.default||e:void 0}const R6={skipAnimations:!1,useManualTiming:!1},M6=e=>e!==null;function Bd(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(M6),s=t&&n!=="loop"&&t%2===1?0:o.length-1;return!s||r===void 0?o[s]:r}const mn=e=>e;let lp=mn;function N6(e){let t=new Set,n=new Set,r=!1,o=!1;const s=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),e()),c(i)}const l={schedule:(c,u=!1,f=!1)=>{const m=f&&r?t:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(i=c,r){o=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(a),r=!1,o&&(o=!1,l.process(c))}};return l}const Ic=["read","resolveKeyframes","update","preRender","render","postRender"],I6=40;function yA(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=Ic.reduce((w,x)=>(w[x]=N6(s),w),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:d}=i,m=()=>{const w=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,I6),1),o.timestamp=w,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),u.process(o),f.process(o),d.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,o.isProcessing||e(m)};return{schedule:Ic.reduce((w,x)=>{const v=i[x];return w[x]=(C,b=!1,D=!1)=>(n||g(),v.schedule(C,b,D)),w},{}),cancel:w=>{for(let x=0;x<Ic.length;x++)i[Ic[x]].cancel(w)},state:o,steps:i}}const{schedule:rt,cancel:rs,state:en,steps:R0}=yA(typeof requestAnimationFrame<"u"?requestAnimationFrame:mn,!0),wA=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,j6=1e-7,_6=12;function B6(e,t,n,r,o){let s,i,a=0;do i=t+(n-t)/2,s=wA(i,r,o)-e,s>0?n=i:t=i;while(Math.abs(s)>j6&&++a<_6);return i}function Kl(e,t,n,r){if(e===t&&n===r)return mn;const o=s=>B6(s,0,1,e,n);return s=>s===0||s===1?s:wA(o(s),t,r)}const EA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,CA=e=>t=>1-e(1-t),SA=Kl(.33,1.53,.69,.99),Ng=CA(SA),bA=EA(Ng),DA=e=>(e*=2)<1?.5*Ng(e):.5*(2-Math.pow(2,-10*(e-1))),Ig=e=>1-Math.sin(Math.acos(e)),AA=CA(Ig),PA=EA(Ig),kA=e=>/^0[^.\s]+$/u.test(e);function L6(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||kA(e):!0}const TA=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),FA=e=>t=>typeof t=="string"&&t.startsWith(e),RA=FA("--"),O6=FA("var(--"),jg=e=>O6(e)?$6.test(e.split("/*")[0].trim()):!1,$6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,z6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function V6(e){const t=z6.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function MA(e,t,n=1){const[r,o]=V6(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const i=s.trim();return TA(i)?parseFloat(i):i}return jg(o)?MA(o,t,n+1):o}const fo=(e,t,n)=>n>t?t:n<e?e:n,fa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},bl={...fa,transform:e=>fo(0,1,e)},jc={...fa,default:1},ql=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Do=ql("deg"),$r=ql("%"),we=ql("px"),U6=ql("vh"),H6=ql("vw"),b1={...$r,parse:e=>$r.parse(e)/100,transform:e=>$r.transform(e*100)},W6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),D1=e=>e===fa||e===we,A1=(e,t)=>parseFloat(e.split(", ")[t]),P1=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return A1(o[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?A1(s[1],e):0}},J6=new Set(["x","y","z"]),G6=Gl.filter(e=>!J6.has(e));function K6(e){const t=[];return G6.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Xi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:P1(4,13),y:P1(5,14)};Xi.translateX=Xi.x;Xi.translateY=Xi.y;const NA=e=>t=>t.test(e),q6={test:e=>e==="auto",parse:e=>e},IA=[fa,we,$r,Do,H6,U6,q6],k1=e=>IA.find(NA(e)),Rs=new Set;let cp=!1,up=!1;function jA(){if(up){const e=Array.from(Rs).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=K6(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}up=!1,cp=!1,Rs.forEach(e=>e.complete()),Rs.clear()}function _A(){Rs.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(up=!0)})}function Y6(){_A(),jA()}class _g{constructor(t,n,r,o,s,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Rs.add(this),cp||(cp=!0,rt.read(_A),rt.resolveKeyframes(jA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const i=o==null?void 0:o.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),o&&i===void 0&&o.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Rs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Rs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ya=e=>Math.round(e*1e5)/1e5,Bg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function X6(e){return e==null}const Q6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lg=(e,t)=>n=>!!(typeof n=="string"&&Q6.test(n)&&n.startsWith(e)||t&&!X6(n)&&Object.prototype.hasOwnProperty.call(n,t)),BA=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(Bg);return{[e]:parseFloat(o),[t]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},Z6=e=>fo(0,255,e),M0={...fa,transform:e=>Math.round(Z6(e))},Ss={test:Lg("rgb","red"),parse:BA("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+M0.transform(e)+", "+M0.transform(t)+", "+M0.transform(n)+", "+Ya(bl.transform(r))+")"};function eB(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const dp={test:Lg("#"),parse:eB,transform:Ss.transform},hi={test:Lg("hsl","hue"),parse:BA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+$r.transform(Ya(t))+", "+$r.transform(Ya(n))+", "+Ya(bl.transform(r))+")"},fn={test:e=>Ss.test(e)||dp.test(e)||hi.test(e),parse:e=>Ss.test(e)?Ss.parse(e):hi.test(e)?hi.parse(e):dp.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ss.transform(e):hi.transform(e)},tB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nB(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Bg))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(tB))===null||n===void 0?void 0:n.length)||0)>0}const LA="number",OA="color",rB="var",oB="var(",T1="${}",sB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dl(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=t.replace(sB,l=>(fn.test(l)?(r.color.push(s),o.push(OA),n.push(fn.parse(l))):l.startsWith(oB)?(r.var.push(s),o.push(rB),n.push(l)):(r.number.push(s),o.push(LA),n.push(parseFloat(l))),++s,T1)).split(T1);return{values:n,split:a,indexes:r,types:o}}function $A(e){return Dl(e).values}function zA(e){const{split:t,types:n}=Dl(e),r=t.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=t[i],o[i]!==void 0){const a=n[i];a===LA?s+=Ya(o[i]):a===OA?s+=fn.transform(o[i]):s+=o[i]}return s}}const iB=e=>typeof e=="number"?0:e;function aB(e){const t=$A(e);return zA(e)(t.map(iB))}const os={test:nB,parse:$A,createTransformer:zA,getAnimatableNone:aB},lB=new Set(["brightness","contrast","saturate","opacity"]);function cB(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Bg)||[];if(!r)return e;const o=n.replace(r,"");let s=lB.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+o+")"}const uB=/\b([a-z-]*)\(.*?\)/gu,fp={...os,getAnimatableNone:e=>{const t=e.match(uB);return t?t.map(cB).join(" "):e}},dB={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we},fB={rotate:Do,rotateX:Do,rotateY:Do,rotateZ:Do,scale:jc,scaleX:jc,scaleY:jc,scaleZ:jc,skew:Do,skewX:Do,skewY:Do,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:bl,originX:b1,originY:b1,originZ:we},F1={...fa,transform:Math.round},Og={...dB,...fB,zIndex:F1,size:we,fillOpacity:bl,strokeOpacity:bl,numOctaves:F1},hB={...Og,color:fn,backgroundColor:fn,outlineColor:fn,fill:fn,stroke:fn,borderColor:fn,borderTopColor:fn,borderRightColor:fn,borderBottomColor:fn,borderLeftColor:fn,filter:fp,WebkitFilter:fp},$g=e=>hB[e];function VA(e,t){let n=$g(e);return n!==fp&&(n=os),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const pB=new Set(["auto","none","0"]);function mB(e,t,n){let r=0,o;for(;r<e.length&&!o;){const s=e[r];typeof s=="string"&&!pB.has(s)&&Dl(s).values.length&&(o=e[r]),r++}if(o&&n)for(const s of t)e[s]=VA(n,o)}class UA extends _g{constructor(t,n,r,o,s){super(t,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),jg(c))){const u=MA(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!W6.has(r)||t.length!==2)return;const[o,s]=t,i=k1(o),a=k1(s);if(i!==a)if(D1(i)&&D1(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)L6(t[o])&&r.push(o);r.length&&mB(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=o.length-1,a=o[i];o[i]=Xi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function zg(e){return typeof e=="function"}let nu;function gB(){nu=void 0}const zr={now:()=>(nu===void 0&&zr.set(en.isProcessing||R6.useManualTiming?en.timestamp:performance.now()),nu),set:e=>{nu=e,queueMicrotask(gB)}},R1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(os.test(e)||e==="0")&&!e.startsWith("url("));function xB(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function vB(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],i=R1(o,t),a=R1(s,t);return!i||!a?!1:xB(e)||(n==="spring"||zg(n))&&r}const yB=40;class HA{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=zr.now(),this.options={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>yB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Y6(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=zr.now(),this.hasAttemptedResolve=!0;const{name:r,type:o,velocity:s,delay:i,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!vB(t,r,o,s))if(i)this.options.duration=0;else{l==null||l(Bd(t,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,n);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Qi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},WA=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let s=0;s<o;s++)r+=e(Qi(0,o-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function JA(e,t){return t?e*(1e3/t):0}const wB=5;function GA(e,t,n){const r=Math.max(t-wB,0);return JA(n-e(r),t-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},N0=.001;function EB({duration:e=At.duration,bounce:t=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let o,s,i=1-t;i=fo(At.minDamping,At.maxDamping,i),e=fo(At.minDuration,At.maxDuration,ro(e)),i<1?(o=c=>{const u=c*i,f=u*e,d=u-n,m=hp(c,i),g=Math.exp(-f);return N0-d/m*g},s=c=>{const f=c*i*e,d=f*n+n,m=Math.pow(i,2)*Math.pow(c,2)*e,g=Math.exp(-f),y=hp(Math.pow(c,2),i);return(-o(c)+N0>0?-1:1)*((d-m)*g)/y}):(o=c=>{const u=Math.exp(-c*e),f=(c-n)*e+1;return-N0+u*f},s=c=>{const u=Math.exp(-c*e),f=(n-c)*(e*e);return u*f});const a=5/e,l=SB(o,s,a);if(e=no(e),isNaN(l))return{stiffness:At.stiffness,damping:At.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:e}}}const CB=12;function SB(e,t,n){let r=n;for(let o=1;o<CB;o++)r=r-e(r)/t(r);return r}function hp(e,t){return e*Math.sqrt(1-t*t)}const pp=2e4;function KA(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<pp;)t+=n,r=e.next(t);return t>=pp?1/0:t}const bB=["duration","bounce"],DB=["stiffness","damping","mass"];function M1(e,t){return t.some(n=>e[n]!==void 0)}function AB(e){let t={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...e};if(!M1(e,DB)&&M1(e,bB))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,s=2*fo(.05,1,1-e.bounce)*Math.sqrt(o);t={...t,mass:At.mass,stiffness:o,damping:s}}else{const n=EB(e);t={...t,...n,mass:At.mass},t.isResolvedFromDuration=!0}return t}function qA(e=At.visualDuration,t=At.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:m}=AB({...n,velocity:-ro(n.velocity||0)}),g=d||0,y=c/(2*Math.sqrt(l*u)),E=i-s,w=ro(Math.sqrt(l/u)),x=Math.abs(E)<5;r||(r=x?At.restSpeed.granular:At.restSpeed.default),o||(o=x?At.restDelta.granular:At.restDelta.default);let v;if(y<1){const b=hp(w,y);v=D=>{const A=Math.exp(-y*w*D);return i-A*((g+y*w*E)/b*Math.sin(b*D)+E*Math.cos(b*D))}}else if(y===1)v=b=>i-Math.exp(-w*b)*(E+(g+w*E)*b);else{const b=w*Math.sqrt(y*y-1);v=D=>{const A=Math.exp(-y*w*D),P=Math.min(b*D,300);return i-A*((g+y*w*E)*Math.sinh(P)+b*E*Math.cosh(P))/b}}const C={calculatedDuration:m&&f||null,next:b=>{const D=v(b);if(m)a.done=b>=f;else{let A=0;y<1&&(A=b===0?no(g):GA(v,b,D));const P=Math.abs(A)<=r,F=Math.abs(i-D)<=o;a.done=P&&F}return a.value=a.done?i:D,a},toString:()=>{const b=Math.min(KA(C),pp),D=WA(A=>C.next(b*A).value,b,30);return b+"ms "+D}};return C}function N1({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=e[0],d={done:!1,value:f},m=P=>a!==void 0&&P<a||l!==void 0&&P>l,g=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let y=n*t;const E=f+y,w=i===void 0?E:i(E);w!==E&&(y=w-f);const x=P=>-y*Math.exp(-P/r),v=P=>w+x(P),C=P=>{const F=x(P),k=v(P);d.done=Math.abs(F)<=c,d.value=d.done?w:k};let b,D;const A=P=>{m(d.value)&&(b=P,D=qA({keyframes:[d.value,g(d.value)],velocity:GA(v,P,d.value),damping:o,stiffness:s,restDelta:c,restSpeed:u}))};return A(0),{calculatedDuration:null,next:P=>{let F=!1;return!D&&b===void 0&&(F=!0,C(P),A(P)),b!==void 0&&P>=b?D.next(P-b):(!F&&C(P),d)}}}const PB=Kl(.42,0,1,1),kB=Kl(0,0,.58,1),YA=Kl(.42,0,.58,1),TB=e=>Array.isArray(e)&&typeof e[0]!="number",Vg=e=>Array.isArray(e)&&typeof e[0]=="number",I1={linear:mn,easeIn:PB,easeInOut:YA,easeOut:kB,circIn:Ig,circInOut:PA,circOut:AA,backIn:Ng,backInOut:bA,backOut:SA,anticipate:DA},j1=e=>{if(Vg(e)){lp(e.length===4);const[t,n,r,o]=e;return Kl(t,n,r,o)}else if(typeof e=="string")return lp(I1[e]!==void 0),I1[e];return e},FB=(e,t)=>n=>t(e(n)),Yo=(...e)=>e.reduce(FB),wt=(e,t,n)=>e+(t-e)*n;function I0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function RB({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,s=0,i=0;if(!t)o=s=i=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=I0(l,a,e+1/3),s=I0(l,a,e),i=I0(l,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function Ou(e,t){return n=>n>0?t:e}const j0=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},MB=[dp,Ss,hi],NB=e=>MB.find(t=>t.test(e));function _1(e){const t=NB(e);if(!t)return!1;let n=t.parse(e);return t===hi&&(n=RB(n)),n}const B1=(e,t)=>{const n=_1(e),r=_1(t);if(!n||!r)return Ou(e,t);const o={...n};return s=>(o.red=j0(n.red,r.red,s),o.green=j0(n.green,r.green,s),o.blue=j0(n.blue,r.blue,s),o.alpha=wt(n.alpha,r.alpha,s),Ss.transform(o))},mp=new Set(["none","hidden"]);function IB(e,t){return mp.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function jB(e,t){return n=>wt(e,t,n)}function Ug(e){return typeof e=="number"?jB:typeof e=="string"?jg(e)?Ou:fn.test(e)?B1:LB:Array.isArray(e)?XA:typeof e=="object"?fn.test(e)?B1:_B:Ou}function XA(e,t){const n=[...e],r=n.length,o=e.map((s,i)=>Ug(s)(s,t[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function _B(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=Ug(e[o])(e[o],t[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function BB(e,t){var n;const r=[],o={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][o[i]],l=(n=e.values[a])!==null&&n!==void 0?n:0;r[s]=l,o[i]++}return r}const LB=(e,t)=>{const n=os.createTransformer(t),r=Dl(e),o=Dl(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?mp.has(e)&&!o.values.length||mp.has(t)&&!r.values.length?IB(e,t):Yo(XA(BB(r,o),o.values),n):Ou(e,t)};function QA(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?wt(e,t,n):Ug(e)(e,t)}function OB(e,t,n){const r=[],o=n||QA,s=e.length-1;for(let i=0;i<s;i++){let a=o(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||mn:t;a=Yo(l,a)}r.push(a)}return r}function $B(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const s=e.length;if(lp(s===t.length),s===1)return()=>t[0];if(s===2&&e[0]===e[1])return()=>t[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=OB(t,r,o),a=i.length,l=c=>{let u=0;if(a>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const f=Qi(e[u],e[u+1],c);return i[u](f)};return n?c=>l(fo(e[0],e[s-1],c)):l}function zB(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Qi(0,t,r);e.push(wt(n,1,o))}}function VB(e){const t=[0];return zB(t,e.length-1),t}function UB(e,t){return e.map(n=>n*t)}function HB(e,t){return e.map(()=>t||YA).splice(0,e.length-1)}function $u({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=TB(r)?r.map(j1):j1(r),s={done:!1,value:t[0]},i=UB(n&&n.length===t.length?n:VB(t),e),a=$B(i,t,{ease:Array.isArray(o)?o:HB(t,o)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const WB=e=>{const t=({timestamp:n})=>e(n);return{start:()=>rt.update(t,!0),stop:()=>rs(t),now:()=>en.isProcessing?en.timestamp:zr.now()}},JB={decay:N1,inertia:N1,tween:$u,keyframes:$u,spring:qA},GB=e=>e/100;class Hg extends HA{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:o,keyframes:s}=this.options,i=(o==null?void 0:o.KeyframeResolver)||_g,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new i(s,a,n,r,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=this.options,a=zg(n)?n:JB[n]||$u;let l,c;a!==$u&&typeof t[0]!="number"&&(l=Yo(GB,QA(t[0],t[1])),t=[0,100]);const u=a({...this.options,keyframes:t});s==="mirror"&&(c=a({...this.options,keyframes:[...t].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=KA(u));const{calculatedDuration:f}=u,d=f+o,m=d*(r+1)-o;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:d,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:o,generator:s,mirroredGenerator:i,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:d,repeat:m,repeatType:g,repeatDelay:y,onUpdate:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const w=this.currentTime-d*(this.speed>=0?1:-1),x=this.speed>=0?w<0:w>u;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let v=this.currentTime,C=s;if(m){const P=Math.min(this.currentTime,u)/f;let F=Math.floor(P),k=P%1;!k&&P>=1&&(k=1),k===1&&F--,F=Math.min(F,m+1),!!(F%2)&&(g==="reverse"?(k=1-k,y&&(k-=y/f)):g==="mirror"&&(C=i)),v=fo(0,1,k)*f}const b=x?{done:!1,value:l[0]}:C.next(v);a&&(b.value=a(b.value));let{done:D}=b;!x&&c!==null&&(D=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return A&&o!==void 0&&(b.value=Bd(l,this.options,o)),E&&E(b.value),A&&this.finish(),b}get duration(){const{resolved:t}=this;return t?ro(t.calculatedDuration):0}get time(){return ro(this.currentTime)}set time(t){t=no(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ro(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=WB,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const KB=new Set(["opacity","clipPath","filter","transform"]);function Wg(e){let t;return()=>(t===void 0&&(t=e()),t)}const qB={linearEasing:void 0};function YB(e,t){const n=Wg(e);return()=>{var r;return(r=qB[t])!==null&&r!==void 0?r:n()}}const zu=YB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function ZA(e){return!!(typeof e=="function"&&zu()||!e||typeof e=="string"&&(e in gp||zu())||Vg(e)||Array.isArray(e)&&e.every(ZA))}const ja=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,gp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ja([0,.65,.55,1]),circOut:ja([.55,0,1,.45]),backIn:ja([.31,.01,.66,-.59]),backOut:ja([.33,1.53,.69,.99])};function eP(e,t){if(e)return typeof e=="function"&&zu()?WA(e,t):Vg(e)?ja(e):Array.isArray(e)?e.map(n=>eP(n,t)||gp.easeOut):gp[e]}function XB(e,t,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const u=eP(a,o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"})}function L1(e,t){e.timeline=t,e.onfinish=null}const QB=Wg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vu=10,ZB=2e4;function eL(e){return zg(e.type)||e.type==="spring"||!ZA(e.ease)}function tL(e,t){const n=new Hg({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const o=[];let s=0;for(;!r.done&&s<ZB;)r=n.sample(s),o.push(r.value),s+=Vu;return{times:void 0,keyframes:o,duration:s-Vu,ease:"linear"}}const tP={anticipate:DA,backInOut:bA,circInOut:PA};function nL(e){return e in tP}class O1 extends HA{constructor(t){super(t);const{name:n,motionValue:r,element:o,keyframes:s}=this.options;this.resolver=new UA(s,(i,a)=>this.onKeyframesResolved(i,a),n,r,o),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:o=300,times:s,ease:i,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof i=="string"&&zu()&&nL(i)&&(i=tP[i]),eL(this.options)){const{onComplete:d,onUpdate:m,motionValue:g,element:y,...E}=this.options,w=tL(t,E);t=w.keyframes,t.length===1&&(t[1]=t[0]),o=w.duration,s=w.times,i=w.ease,a="keyframes"}const f=XB(l.owner.current,c,t,{...this.options,duration:o,times:s,ease:i});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(L1(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;l.set(Bd(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:o,times:s,type:a,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return ro(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return ro(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=no(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return mn;const{animation:r}=n;L1(r,t)}return mn}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:o,type:s,ease:i,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:d,...m}=this.options,g=new Hg({...m,keyframes:r,duration:o,type:s,ease:i,times:a,isGenerator:!0}),y=no(this.time);c.setWithVelocity(g.sample(y-Vu).value,g.sample(y).value,Vu)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:o,repeatType:s,damping:i,type:a}=t;return QB()&&r&&KB.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!o&&s!=="mirror"&&i!==0&&a!=="inertia"}}const rL=Wg(()=>window.ScrollTimeline!==void 0);class oL{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(o=>rL()&&o.attachTimeline?o.attachTimeline(t):n(o));return()=>{r.forEach((o,s)=>{o&&o(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function sL({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Jg=(e,t,n,r={},o,s)=>i=>{const a=Mg(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-no(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:d=>{t.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:o};sL(a)||(u={...u,...F6(e,u)}),u.duration&&(u.duration=no(u.duration)),u.repeatDelay&&(u.repeatDelay=no(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&t.get()!==void 0){const d=Bd(u.keyframes,a);if(d!==void 0)return rt.update(()=>{u.onUpdate(d),u.onComplete()}),new oL([])}return!s&&O1.supports(u)?new O1(u):new Hg(u)},iL=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),aL=e=>ap(e)?e[e.length-1]||0:e;function Gg(e,t){e.indexOf(t)===-1&&e.push(t)}function Kg(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class qg{constructor(){this.subscriptions=[]}add(t){return Gg(this.subscriptions,t),()=>Kg(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $1=30,lL=e=>!isNaN(parseFloat(e));class cL{constructor(t,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{const s=zr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=zr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=lL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new qg);const r=this.events[t].add(n);return t==="change"?()=>{r(),rt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=zr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>$1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$1);return JA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Al(e,t){return new cL(e,t)}function uL(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Al(n))}function dL(e,t){const n=_d(e,t);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=aL(s[i]);uL(e,i,a)}}const Yg=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fL="framerAppearId",nP="data-"+Yg(fL);function rP(e){return e.props[nP]}const pn=e=>!!(e&&e.getVelocity);function hL(e){return!!(pn(e)&&e.add)}function xp(e,t){const n=e.getValue("willChange");if(hL(n))return n.add(t)}function pL({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function oP(e,t,{delay:n=0,transitionOverride:r,type:o}={}){var s;let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(i=r);const c=[],u=o&&e.animationState&&e.animationState.getState()[o];for(const f in l){const d=e.getValue(f,(s=e.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||u&&pL(u,f))continue;const g={delay:n,...Mg(i||{},f)};let y=!1;if(window.MotionHandoffAnimation){const w=rP(e);if(w){const x=window.MotionHandoffAnimation(w,f,rt);x!==null&&(g.startTime=x,y=!0)}}xp(e,f),d.start(Jg(f,d,m,e.shouldReduceMotion&&Gs.has(f)?{type:!1}:g,e,y));const E=d.animation;E&&c.push(E)}return a&&Promise.all(c).then(()=>{rt.update(()=>{a&&dL(e,a)})}),c}function vp(e,t,n={}){var r;const o=_d(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(s=n.transitionOverride);const i=o?()=>Promise.all(oP(e,o,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return mL(e,t,u+c,f,d,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function mL(e,t,n=0,r=0,o=1,s){const i=[],a=(e.variantChildren.size-1)*r,l=o===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(e.variantChildren).sort(gL).forEach((c,u)=>{c.notify("AnimationStart",t),i.push(vp(c,t,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(i)}function gL(e,t){return e.sortNodePosition(t)}function xL(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(s=>vp(e,s,n));r=Promise.all(o)}else if(typeof t=="string")r=vp(e,t,n);else{const o=typeof t=="function"?_d(e,t,n.custom):t;r=Promise.all(oP(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const vL=Rg.length;function sP(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?sP(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<vL;n++){const r=Rg[n],o=e.props[r];(Sl(o)||o===!1)&&(t[r]=o)}return t}const yL=[...Fg].reverse(),wL=Fg.length;function EL(e){return t=>Promise.all(t.map(({animation:n,options:r})=>xL(e,n,r)))}function CL(e){let t=EL(e),n=z1(),r=!0;const o=l=>(c,u)=>{var f;const d=_d(e,u,l==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(d){const{transition:m,transitionEnd:g,...y}=d;c={...c,...y,...g}}return c};function s(l){t=l(e)}function i(l){const{props:c}=e,u=sP(e.parent)||{},f=[],d=new Set;let m={},g=1/0;for(let E=0;E<wL;E++){const w=yL[E],x=n[w],v=c[w]!==void 0?c[w]:u[w],C=Sl(v),b=w===l?x.isActive:null;b===!1&&(g=E);let D=v===u[w]&&v!==c[w]&&C;if(D&&r&&e.manuallyAnimateOnMount&&(D=!1),x.protectedKeys={...m},!x.isActive&&b===null||!v&&!x.prevProp||jd(v)||typeof v=="boolean")continue;const A=SL(x.prevProp,v);let P=A||w===l&&x.isActive&&!D&&C||E>g&&C,F=!1;const k=Array.isArray(v)?v:[v];let T=k.reduce(o(w),{});b===!1&&(T={});const{prevResolvedValues:M={}}=x,_={...M,...T},O=B=>{P=!0,d.has(B)&&(F=!0,d.delete(B)),x.needsAnimating[B]=!0;const R=e.getValue(B);R&&(R.liveStyle=!1)};for(const B in _){const R=T[B],N=M[B];if(m.hasOwnProperty(B))continue;let V=!1;ap(R)&&ap(N)?V=!vA(R,N):V=R!==N,V?R!=null?O(B):d.add(B):R!==void 0&&d.has(B)?O(B):x.protectedKeys[B]=!0}x.prevProp=v,x.prevResolvedValues=T,x.isActive&&(m={...m,...T}),r&&e.blockInitialAnimation&&(P=!1),P&&(!(D&&A)||F)&&f.push(...k.map(B=>({animation:B,options:{type:w}})))}if(d.size){const E={};d.forEach(w=>{const x=e.getBaseTarget(w),v=e.getValue(w);v&&(v.liveStyle=!0),E[w]=x??null}),f.push({animation:E})}let y=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(f):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(d=>{var m;return(m=d.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const f=i(l);for(const d in n)n[d].protectedKeys={};return f}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=z1(),r=!0}}}function SL(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!vA(t,e):!1}function ps(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function z1(){return{animate:ps(!0),whileInView:ps(),whileHover:ps(),whileTap:ps(),whileDrag:ps(),whileFocus:ps(),exit:ps()}}class fs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class bL extends fs{constructor(t){super(t),t.animationState||(t.animationState=CL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();jd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let DL=0;class AL extends fs{constructor(){super(...arguments),this.id=DL++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const PL={animation:{Feature:bL},exit:{Feature:AL}};function kL(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let o=document;const s=(r=void 0)!==null&&r!==void 0?r:o.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const mr={x:!1,y:!1};function iP(){return mr.x||mr.y}function V1(e){return t=>{t.pointerType==="touch"||iP()||e(t)}}function TL(e,t,n={}){const r=new AbortController,o={passive:!0,...n,signal:r.signal},s=V1(i=>{const{target:a}=i,l=t(i);if(!l||!a)return;const c=V1(u=>{l(u),a.removeEventListener("pointerleave",c)});a.addEventListener("pointerleave",c,o)});return kL(e).forEach(i=>{i.addEventListener("pointerenter",s,o)}),()=>r.abort()}function FL(e){return e==="x"||e==="y"?mr[e]?null:(mr[e]=!0,()=>{mr[e]=!1}):mr.x||mr.y?null:(mr.x=mr.y=!0,()=>{mr.x=mr.y=!1})}const aP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Yl(e){return{point:{x:e.pageX,y:e.pageY}}}const RL=e=>t=>aP(t)&&e(t,Yl(t));function eo(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Xo(e,t,n,r){return eo(e,t,RL(n),r)}const U1=(e,t)=>Math.abs(e-t);function ML(e,t){const n=U1(e.x,t.x),r=U1(e.y,t.y);return Math.sqrt(n**2+r**2)}class lP{constructor(t,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=B0(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,m=ML(f.offset,{x:0,y:0})>=3;if(!d&&!m)return;const{point:g}=f,{timestamp:y}=en;this.history.push({...g,timestamp:y});const{onStart:E,onMove:w}=this.handlers;d||(E&&E(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=_0(d,this.transformPagePoint),rt.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=B0(f.type==="pointercancel"?this.lastMoveEventInfo:_0(d,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,E),g&&g(f,E)},!aP(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=Yl(t),a=_0(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=en;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(t,B0(a,this.history)),this.removeListeners=Yo(Xo(this.contextWindow,"pointermove",this.handlePointerMove),Xo(this.contextWindow,"pointerup",this.handlePointerUp),Xo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),rs(this.updatePoint)}}function _0(e,t){return t?{point:t(e.point)}:e}function H1(e,t){return{x:e.x-t.x,y:e.y-t.y}}function B0({point:e},t){return{point:e,delta:H1(e,cP(t)),offset:H1(e,NL(t)),velocity:IL(t,.1)}}function NL(e){return e[0]}function cP(e){return e[e.length-1]}function IL(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=cP(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>no(t)));)n--;if(!r)return{x:0,y:0};const s=ro(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function pi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const uP=1e-4,jL=1-uP,_L=1+uP,dP=.01,BL=0-dP,LL=0+dP;function Gn(e){return e.max-e.min}function OL(e,t,n){return Math.abs(e-t)<=n}function W1(e,t,n,r=.5){e.origin=r,e.originPoint=wt(t.min,t.max,e.origin),e.scale=Gn(n)/Gn(t),e.translate=wt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=jL&&e.scale<=_L||isNaN(e.scale))&&(e.scale=1),(e.translate>=BL&&e.translate<=LL||isNaN(e.translate))&&(e.translate=0)}function Xa(e,t,n,r){W1(e.x,t.x,n.x,r?r.originX:void 0),W1(e.y,t.y,n.y,r?r.originY:void 0)}function J1(e,t,n){e.min=n.min+t.min,e.max=e.min+Gn(t)}function $L(e,t,n){J1(e.x,t.x,n.x),J1(e.y,t.y,n.y)}function G1(e,t,n){e.min=t.min-n.min,e.max=e.min+Gn(t)}function Qa(e,t,n){G1(e.x,t.x,n.x),G1(e.y,t.y,n.y)}function zL(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?wt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?wt(n,e,r.max):Math.min(e,n)),e}function K1(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function VL(e,{top:t,left:n,bottom:r,right:o}){return{x:K1(e.x,n,o),y:K1(e.y,t,r)}}function q1(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function UL(e,t){return{x:q1(e.x,t.x),y:q1(e.y,t.y)}}function HL(e,t){let n=.5;const r=Gn(e),o=Gn(t);return o>r?n=Qi(t.min,t.max-r,e.min):r>o&&(n=Qi(e.min,e.max-o,t.min)),fo(0,1,n)}function WL(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const yp=.35;function JL(e=yp){return e===!1?e=0:e===!0&&(e=yp),{x:Y1(e,"left","right"),y:Y1(e,"top","bottom")}}function Y1(e,t,n){return{min:X1(e,t),max:X1(e,n)}}function X1(e,t){return typeof e=="number"?e:e[t]||0}const Q1=()=>({translate:0,scale:1,origin:0,originPoint:0}),mi=()=>({x:Q1(),y:Q1()}),Z1=()=>({min:0,max:0}),Mt=()=>({x:Z1(),y:Z1()});function tr(e){return[e("x"),e("y")]}function fP({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function GL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function KL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function L0(e){return e===void 0||e===1}function wp({scale:e,scaleX:t,scaleY:n}){return!L0(e)||!L0(t)||!L0(n)}function xs(e){return wp(e)||hP(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function hP(e){return ew(e.x)||ew(e.y)}function ew(e){return e&&e!=="0%"}function Uu(e,t,n){const r=e-n,o=t*r;return n+o}function tw(e,t,n,r,o){return o!==void 0&&(e=Uu(e,o,r)),Uu(e,n,r)+t}function Ep(e,t=0,n=1,r,o){e.min=tw(e.min,t,n,r,o),e.max=tw(e.max,t,n,r,o)}function pP(e,{x:t,y:n}){Ep(e.x,t.translate,t.scale,t.originPoint),Ep(e.y,n.translate,n.scale,n.originPoint)}const nw=.999999999999,rw=1.0000000000001;function qL(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&xi(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,pP(e,i)),r&&xs(s.latestValues)&&xi(e,s.latestValues))}t.x<rw&&t.x>nw&&(t.x=1),t.y<rw&&t.y>nw&&(t.y=1)}function gi(e,t){e.min=e.min+t,e.max=e.max+t}function ow(e,t,n,r,o=.5){const s=wt(e.min,e.max,o);Ep(e,t,n,s,r)}function xi(e,t){ow(e.x,t.x,t.scaleX,t.scale,t.originX),ow(e.y,t.y,t.scaleY,t.scale,t.originY)}function mP(e,t){return fP(KL(e.getBoundingClientRect(),t))}function YL(e,t,n){const r=mP(e,n),{scroll:o}=t;return o&&(gi(r.x,o.offset.x),gi(r.y,o.offset.y)),r}const gP=({current:e})=>e?e.ownerDocument.defaultView:null,XL=new WeakMap;class QL{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Yl(u).point)},s=(u,f)=>{const{drag:d,dragPropagation:m,onDragStart:g}=this.getProps();if(d&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FL(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),tr(E=>{let w=this.getAxisMotionValue(E).get()||0;if($r.test(w)){const{projection:x}=this.visualElement;if(x&&x.layout){const v=x.layout.layoutBox[E];v&&(w=Gn(v)*(parseFloat(w)/100))}}this.originPoint[E]=w}),g&&rt.postRender(()=>g(u,f)),xp(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},i=(u,f)=>{const{dragPropagation:d,dragDirectionLock:m,onDirectionLock:g,onDrag:y}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:E}=f;if(m&&this.currentDirection===null){this.currentDirection=ZL(E),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,E),this.updateAxis("y",f.point,E),this.visualElement.render(),y&&y(u,f)},a=(u,f)=>this.stop(u,f),l=()=>tr(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new lP(t,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:gP(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&rt.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!_c(t,o,this.currentDirection))return;const s=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=zL(i,this.constraints[t],this.elastic[t])),s.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&pi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=VL(o.layoutBox,n):this.constraints=!1,this.elastic=JL(r),s!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&tr(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=WL(o.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!pi(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=YL(r,o.root,this.visualElement.getTransformPagePoint());let i=UL(o.layout.layoutBox,s);if(n){const a=n(GL(i));this.hasMutatedConstraints=!!a,a&&(i=fP(a))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=tr(u=>{if(!_c(u,n,this.currentDirection))return;let f=l&&l[u]||{};i&&(f={min:0,max:0});const d=o?200:1e6,m=o?40:1e7,g={type:"inertia",velocity:r?t[u]:0,bounceStiffness:d,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return xp(this.visualElement,t),r.start(Jg(t,r,0,n,this.visualElement,!1))}stopAnimation(){tr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){tr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){tr(n=>{const{drag:r}=this.getProps();if(!_c(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(t[n]-wt(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!pi(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};tr(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=HL({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),tr(i=>{if(!_c(i,t,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(wt(l,c,o[i]))})}addListeners(){if(!this.visualElement.current)return;XL.set(this.visualElement,this);const t=this.visualElement.current,n=Xo(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();pi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),rt.read(r);const i=eo(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(tr(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=yp,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function _c(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function ZL(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class eO extends fs{constructor(t){super(t),this.removeGroupControls=mn,this.removeListeners=mn,this.controls=new QL(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const sw=e=>(t,n)=>{e&&rt.postRender(()=>e(t,n))};class tO extends fs{constructor(){super(...arguments),this.removePointerDownListener=mn}onPointerDown(t){this.session=new lP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:sw(t),onStart:sw(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&rt.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=Xo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ld=p.createContext(null);function nO(){const e=p.useContext(Ld);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,o=p.useId();p.useEffect(()=>r(o),[]);const s=p.useCallback(()=>n&&n(o),[o,n]);return!t&&n?[!1,s]:[!0]}const Xg=p.createContext({}),xP=p.createContext({}),ru={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iw(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ka={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(we.test(e))e=parseFloat(e);else return e;const n=iw(e,t.target.x),r=iw(e,t.target.y);return`${n}% ${r}%`}},rO={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=os.parse(e);if(o.length>5)return r;const s=os.createTransformer(e),i=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;o[0+i]/=a,o[1+i]/=l;const c=wt(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=c),typeof o[3+i]=="number"&&(o[3+i]/=c),s(o)}},Hu={};function oO(e){Object.assign(Hu,e)}const{schedule:Qg,cancel:q7}=yA(queueMicrotask,!1);class sO extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=t;oO(iO),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ru.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,i=r.projection;return i&&(i.isPresent=s,o||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?i.promote():i.relegate()||rt.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Qg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vP(e){const[t,n]=nO(),r=p.useContext(Xg);return h.jsx(sO,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(xP),isPresent:t,safeToRemove:n})}const iO={borderRadius:{...ka,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ka,borderTopRightRadius:ka,borderBottomLeftRadius:ka,borderBottomRightRadius:ka,boxShadow:rO},yP=["TopLeft","TopRight","BottomLeft","BottomRight"],aO=yP.length,aw=e=>typeof e=="string"?parseFloat(e):e,lw=e=>typeof e=="number"||we.test(e);function lO(e,t,n,r,o,s){o?(e.opacity=wt(0,n.opacity!==void 0?n.opacity:1,cO(r)),e.opacityExit=wt(t.opacity!==void 0?t.opacity:1,0,uO(r))):s&&(e.opacity=wt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<aO;i++){const a=`border${yP[i]}Radius`;let l=cw(t,a),c=cw(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||lw(l)===lw(c)?(e[a]=Math.max(wt(aw(l),aw(c),r),0),($r.test(c)||$r.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=wt(t.rotate||0,n.rotate||0,r))}function cw(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const cO=wP(0,.5,AA),uO=wP(.5,.95,mn);function wP(e,t,n){return r=>r<e?0:r>t?1:n(Qi(e,t,r))}function uw(e,t){e.min=t.min,e.max=t.max}function er(e,t){uw(e.x,t.x),uw(e.y,t.y)}function dw(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function fw(e,t,n,r,o){return e-=t,e=Uu(e,1/n,r),o!==void 0&&(e=Uu(e,1/o,r)),e}function dO(e,t=0,n=1,r=.5,o,s=e,i=e){if($r.test(t)&&(t=parseFloat(t),t=wt(i.min,i.max,t/100)-i.min),typeof t!="number")return;let a=wt(s.min,s.max,r);e===s&&(a-=t),e.min=fw(e.min,t,n,a,o),e.max=fw(e.max,t,n,a,o)}function hw(e,t,[n,r,o],s,i){dO(e,t[n],t[r],t[o],t.scale,s,i)}const fO=["x","scaleX","originX"],hO=["y","scaleY","originY"];function pw(e,t,n,r){hw(e.x,t,fO,n?n.x:void 0,r?r.x:void 0),hw(e.y,t,hO,n?n.y:void 0,r?r.y:void 0)}function mw(e){return e.translate===0&&e.scale===1}function EP(e){return mw(e.x)&&mw(e.y)}function gw(e,t){return e.min===t.min&&e.max===t.max}function pO(e,t){return gw(e.x,t.x)&&gw(e.y,t.y)}function xw(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function CP(e,t){return xw(e.x,t.x)&&xw(e.y,t.y)}function vw(e){return Gn(e.x)/Gn(e.y)}function yw(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class mO{constructor(){this.members=[]}add(t){Gg(this.members,t),t.scheduleRender()}remove(t){if(Kg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gO(e,t,n){let r="";const o=e.x.translate/t.x,s=e.y.translate/t.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:d,skewX:m,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),d&&(r+=`rotateY(${d}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const xO=(e,t)=>e.depth-t.depth;class vO{constructor(){this.children=[],this.isDirty=!1}add(t){Gg(this.children,t),this.isDirty=!0}remove(t){Kg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(xO),this.isDirty=!1,this.children.forEach(t)}}function ou(e){const t=pn(e)?e.get():e;return iL(t)?t.toValue():t}function yO(e,t){const n=zr.now(),r=({timestamp:o})=>{const s=o-n;s>=t&&(rs(r),e(s-t))};return rt.read(r,!0),()=>rs(r)}function wO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function EO(e,t,n){const r=pn(e)?e:Al(e);return r.start(Jg("",r,t,n)),r.animation}const vs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},_a=typeof window<"u"&&window.MotionDebug!==void 0,O0=["","X","Y","Z"],CO={visibility:"hidden"},ww=1e3;let SO=0;function $0(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function SP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=rP(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",rt,!(o||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&SP(r)}function bP({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=t==null?void 0:t()){this.id=SO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_a&&(vs.totalNodes=vs.resolvedTargetDeltas=vs.recalculatedProjection=0),this.nodes.forEach(AO),this.nodes.forEach(RO),this.nodes.forEach(MO),this.nodes.forEach(PO),_a&&window.MotionDebug.record(vs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vO)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new qg),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wO(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=yO(d,250),ru.hasAnimatedSinceResize&&(ru.hasAnimatedSinceResize=!1,this.nodes.forEach(Cw))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||BO,{onLayoutAnimationStart:E,onLayoutAnimationComplete:w}=u.getProps(),x=!this.targetLayout||!CP(this.targetLayout,g)||m,v=!d&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,v);const C={...Mg(y,"layout"),onPlay:E,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else d||Cw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,rs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NO),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ew);return}this.isUpdating||this.nodes.forEach(TO),this.isUpdating=!1,this.nodes.forEach(FO),this.nodes.forEach(bO),this.nodes.forEach(DO),this.clearAllSnapshots();const a=zr.now();en.delta=fo(0,1e3/60,a-en.timestamp),en.timestamp=a,en.isProcessing=!0,R0.update.process(en),R0.preRender.process(en),R0.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kO),this.sharedNodes.forEach(IO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!EP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;i&&(a||xs(this.latestValues)||u)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),LO(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:a}=this.options;if(!a)return Mt();const l=a.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(OO))){const{scroll:u}=this.root;u&&(gi(l.x,u.offset.x),gi(l.y,u.offset.y))}return l}removeElementScroll(i){var a;const l=Mt();if(er(l,i),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;u!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&er(l,i),gi(l.x,f.offset.x),gi(l.y,f.offset.y))}return l}applyTransform(i,a=!1){const l=Mt();er(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&xi(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),xs(u.latestValues)&&xi(l,u.latestValues)}return xs(this.latestValues)&&xi(l,this.latestValues),l}removeTransform(i){const a=Mt();er(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!xs(c.latestValues))continue;wp(c.latestValues)&&c.updateSnapshot();const u=Mt(),f=c.measurePageBox();er(u,f),pw(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return xs(this.latestValues)&&pw(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Qa(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$L(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):er(this.target,this.layout.layoutBox),pP(this.target,this.targetDelta)):er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Qa(this.relativeTargetOrigin,this.target,m.target),er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_a&&vs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||wp(this.parent.latestValues)||hP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===en.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;er(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;qL(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Mt());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(dw(this.prevProjectionDelta.x,this.projectionDelta.x),dw(this.prevProjectionDelta.y,this.projectionDelta.y)),Xa(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!yw(this.projectionDelta.x,this.prevProjectionDelta.x)||!yw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),_a&&vs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mi(),this.projectionDelta=mi(),this.projectionDeltaWithTransform=mi()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=mi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Mt(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,E=this.getStack(),w=!E||E.members.length<=1,x=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(_O));this.animationProgress=0;let v;this.mixTargetDelta=C=>{const b=C/1e3;Sw(f.x,i.x,b),Sw(f.y,i.y,b),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qa(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jO(this.relativeTarget,this.relativeTargetOrigin,d,b),v&&pO(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Mt()),er(v,this.relativeTarget)),y&&(this.animationValues=u,lO(u,c,this.latestValues,b,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(rs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rt.update(()=>{ru.hasAnimatedSinceResize=!0,this.currentAnimation=EO(0,ww,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ww),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&DP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Mt();const f=Gn(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+f;const d=Gn(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+d}er(a,l),xi(a,u),Xa(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new mO),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&$0("z",i,c,this.animationValues);for(let u=0;u<O0.length;u++)$0(`rotate${O0[u]}`,i,c,this.animationValues),$0(`skew${O0[u]}`,i,c,this.animationValues);i.render();for(const u in c)i.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);i.scheduleRender()}getProjectionStyles(i){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return CO;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ou(i==null?void 0:i.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=ou(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!xs(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=gO(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in Hu){if(d[y]===void 0)continue;const{correct:E,applyTo:w}=Hu[y],x=c.transform==="none"?d[y]:E(d[y],f);if(w){const v=w.length;for(let C=0;C<v;C++)c[w[C]]=x}else c[y]=x}return this.options.layoutId&&(c.pointerEvents=f===this?ou(i==null?void 0:i.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Ew),this.root.sharedNodes.clear()}}}function bO(e){e.updateLayout()}function DO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;s==="size"?tr(f=>{const d=i?n.measuredBox[f]:n.layoutBox[f],m=Gn(d);d.min=r[f].min,d.max=d.min+m}):DP(s,n.layoutBox,r)&&tr(f=>{const d=i?n.measuredBox[f]:n.layoutBox[f],m=Gn(r[f]);d.max=d.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=mi();Xa(a,r,n.layoutBox);const l=mi();i?Xa(l,e.applyTransform(o,!0),n.measuredBox):Xa(l,r,n.layoutBox);const c=!EP(a);let u=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:m}=f;if(d&&m){const g=Mt();Qa(g,n.layoutBox,d.layoutBox);const y=Mt();Qa(y,r,m.layoutBox),CP(g,y)||(u=!0),f.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function AO(e){_a&&vs.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function PO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function kO(e){e.clearSnapshot()}function Ew(e){e.clearMeasurements()}function TO(e){e.isLayoutDirty=!1}function FO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Cw(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function RO(e){e.resolveTargetDelta()}function MO(e){e.calcProjection()}function NO(e){e.resetSkewAndRotation()}function IO(e){e.removeLeadSnapshot()}function Sw(e,t,n){e.translate=wt(t.translate,0,n),e.scale=wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bw(e,t,n,r){e.min=wt(t.min,n.min,r),e.max=wt(t.max,n.max,r)}function jO(e,t,n,r){bw(e.x,t.x,n.x,r),bw(e.y,t.y,n.y,r)}function _O(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const BO={duration:.45,ease:[.4,0,.1,1]},Dw=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Aw=Dw("applewebkit/")&&!Dw("chrome/")?Math.round:mn;function Pw(e){e.min=Aw(e.min),e.max=Aw(e.max)}function LO(e){Pw(e.x),Pw(e.y)}function DP(e,t,n){return e==="position"||e==="preserve-aspect"&&!OL(vw(t),vw(n),.2)}function OO(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const $O=bP({attachResizeListener:(e,t)=>eo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),z0={current:void 0},AP=bP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!z0.current){const e=new $O({});e.mount(window),e.setOptions({layoutScroll:!0}),z0.current=e}return z0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),zO={pan:{Feature:tO},drag:{Feature:eO,ProjectionNode:AP,MeasureLayout:vP}};function kw(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n);const o=r[n?"onHoverStart":"onHoverEnd"];o&&rt.postRender(()=>o(t,Yl(t)))}class VO extends fs{mount(){const{current:t,props:n}=this.node;t&&(this.unmount=TL(t,r=>(kw(this.node,r,!0),o=>kw(this.node,o,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class UO extends fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yo(eo(this.node.current,"focus",()=>this.onFocus()),eo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const PP=(e,t)=>t?e===t?!0:PP(e,t.parentElement):!1;function V0(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Yl(n))}class HO extends fs{constructor(){super(...arguments),this.removeStartListeners=mn,this.removeEndListeners=mn,this.removeAccessibleListeners=mn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Xo(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:f}=this.node.getProps(),d=!f&&!PP(this.node.current,a.target)?u:c;d&&rt.update(()=>d(a,l))},{passive:!(r.onTap||r.onPointerUp)}),i=Xo(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Yo(s,i),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const i=a=>{a.key!=="Enter"||!this.checkPressEnd()||V0("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&rt.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=eo(this.node.current,"keyup",i),V0("down",(a,l)=>{this.startPress(a,l)})},n=eo(this.node.current,"keydown",t),r=()=>{this.isPressing&&V0("cancel",(s,i)=>this.cancelPress(s,i))},o=eo(this.node.current,"blur",r);this.removeAccessibleListeners=Yo(n,o)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&rt.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!iP()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&rt.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Xo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=eo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Yo(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Cp=new WeakMap,U0=new WeakMap,WO=e=>{const t=Cp.get(e.target);t&&t(e)},JO=e=>{e.forEach(WO)};function GO({root:e,...t}){const n=e||document;U0.has(n)||U0.set(n,{});const r=U0.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(JO,{root:e,...t})),r[o]}function KO(e,t,n){const r=GO(t);return Cp.set(e,n),r.observe(e),()=>{Cp.delete(e),r.unobserve(e)}}const qO={some:0,all:1};class YO extends fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:qO[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),d=c?u:f;d&&d(l)};return KO(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(XO(t,n))&&this.startObserver()}unmount(){}}function XO({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const QO={inView:{Feature:YO},tap:{Feature:HO},focus:{Feature:UO},hover:{Feature:VO}},ZO={layout:{ProjectionNode:AP,MeasureLayout:vP}},Zg=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Od=p.createContext({}),ex=typeof window<"u",kP=ex?p.useLayoutEffect:p.useEffect,TP=p.createContext({strict:!1});function e$(e,t,n,r,o){var s,i;const{visualElement:a}=p.useContext(Od),l=p.useContext(TP),c=p.useContext(Ld),u=p.useContext(Zg).reducedMotion,f=p.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const d=f.current,m=p.useContext(xP);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&t$(f.current,n,o,m);const g=p.useRef(!1);p.useInsertionEffect(()=>{d&&g.current&&d.update(n,c)});const y=n[nP],E=p.useRef(!!y&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,y))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,y)));return kP(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Qg.render(d.render),E.current&&d.animationState&&d.animationState.animateChanges())}),p.useEffect(()=>{d&&(!E.current&&d.animationState&&d.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,y)}),E.current=!1))}),d}function t$(e,t,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:FP(e.parent)),e.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&pi(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function FP(e){if(e)return e.options.allowProjection!==!1?e.projection:FP(e.parent)}function n$(e,t,n){return p.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):pi(n)&&(n.current=r))},[t])}function $d(e){return jd(e.animate)||Rg.some(t=>Sl(e[t]))}function RP(e){return!!($d(e)||e.variants)}function r$(e,t){if($d(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Sl(n)?n:void 0,animate:Sl(r)?r:void 0}}return e.inherit!==!1?t:{}}function o$(e){const{initial:t,animate:n}=r$(e,p.useContext(Od));return p.useMemo(()=>({initial:t,animate:n}),[Tw(t),Tw(n)])}function Tw(e){return Array.isArray(e)?e.join(" "):e}const Fw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zi={};for(const e in Fw)Zi[e]={isEnabled:t=>Fw[e].some(n=>!!t[n])};function s$(e){for(const t in e)Zi[t]={...Zi[t],...e[t]}}const i$=Symbol.for("motionComponentSymbol");function a$({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:o}){e&&s$(e);function s(a,l){let c;const u={...p.useContext(Zg),...a,layoutId:l$(a)},{isStatic:f}=u,d=o$(a),m=r(a,f);if(!f&&ex){c$();const g=u$(u);c=g.MeasureLayout,d.visualElement=e$(o,m,u,t,g.ProjectionNode)}return h.jsxs(Od.Provider,{value:d,children:[c&&d.visualElement?h.jsx(c,{visualElement:d.visualElement,...u}):null,n(o,a,n$(m,d.visualElement,l),m,f,d.visualElement)]})}const i=p.forwardRef(s);return i[i$]=o,i}function l$({layoutId:e}){const t=p.useContext(Xg).id;return t&&e!==void 0?t+"-"+e:e}function c$(e,t){p.useContext(TP).strict}function u$(e){const{drag:t,layout:n}=Zi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const d$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tx(e){return typeof e!="string"||e.includes("-")?!1:!!(d$.indexOf(e)>-1||/[A-Z]/u.test(e))}function MP(e,{style:t,vars:n},r,o){Object.assign(e.style,t,o&&o.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const NP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IP(e,t,n,r){MP(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(NP.has(o)?o:Yg(o),t.attrs[o])}function jP(e,{layout:t,layoutId:n}){return Gs.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Hu[e]||e==="opacity")}function nx(e,t,n){var r;const{style:o}=e,s={};for(const i in o)(pn(o[i])||t.style&&pn(t.style[i])||jP(i,e)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[i]=o[i]);return s}function _P(e,t,n){const r=nx(e,t,n);for(const o in e)if(pn(e[o])||pn(t[o])){const s=Gl.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=e[o]}return r}function rx(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}function f$({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,o,s){const i={latestValues:h$(r,o,s,e),renderState:t()};return n&&(i.mount=a=>n(r,a,i)),i}const BP=e=>(t,n)=>{const r=p.useContext(Od),o=p.useContext(Ld),s=()=>f$(e,t,r,o);return n?s():rx(s)};function h$(e,t,n,r){const o={},s=r(e,{});for(const d in s)o[d]=ou(s[d]);let{initial:i,animate:a}=e;const l=$d(e),c=RP(e);t&&c&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||i===!1;const f=u?a:i;if(f&&typeof f!="boolean"&&!jd(f)){const d=Array.isArray(f)?f:[f];for(let m=0;m<d.length;m++){const g=Tg(e,d[m]);if(g){const{transitionEnd:y,transition:E,...w}=g;for(const x in w){let v=w[x];if(Array.isArray(v)){const C=u?v.length-1:0;v=v[C]}v!==null&&(o[x]=v)}for(const x in y)o[x]=y[x]}}}return o}const ox=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),LP=()=>({...ox(),attrs:{}}),OP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,p$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},m$=Gl.length;function g$(e,t,n){let r="",o=!0;for(let s=0;s<m$;s++){const i=Gl[s],a=e[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=OP(a,Og[i]);if(!l){o=!1;const u=p$[i]||i;r+=`${u}(${c}) `}n&&(t[i]=c)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function sx(e,t,n){const{style:r,vars:o,transformOrigin:s}=e;let i=!1,a=!1;for(const l in t){const c=t[l];if(Gs.has(l)){i=!0;continue}else if(RA(l)){o[l]=c;continue}else{const u=OP(c,Og[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(t.transform||(i||n?r.transform=g$(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}function Rw(e,t,n){return typeof e=="string"?e:we.transform(t+n*e)}function x$(e,t,n){const r=Rw(t,e.x,e.width),o=Rw(n,e.y,e.height);return`${r} ${o}`}const v$={offset:"stroke-dashoffset",array:"stroke-dasharray"},y$={offset:"strokeDashoffset",array:"strokeDasharray"};function w$(e,t,n=1,r=0,o=!0){e.pathLength=1;const s=o?v$:y$;e[s.offset]=we.transform(-r);const i=we.transform(t),a=we.transform(n);e[s.array]=`${i} ${a}`}function ix(e,{attrX:t,attrY:n,attrScale:r,originX:o,originY:s,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(sx(e,c,f),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:m,dimensions:g}=e;d.transform&&(g&&(m.transform=d.transform),delete d.transform),g&&(o!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=x$(g,o!==void 0?o:.5,s!==void 0?s:.5)),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&w$(d,i,a,l,!1)}const ax=e=>typeof e=="string"&&e.toLowerCase()==="svg",E$={useVisualState:BP({scrapeMotionValuesFromProps:_P,createRenderState:LP,onMount:(e,t,{renderState:n,latestValues:r})=>{rt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),rt.render(()=>{ix(n,r,ax(t.tagName),e.transformTemplate),IP(t,n)})}})},C$={useVisualState:BP({scrapeMotionValuesFromProps:nx,createRenderState:ox})};function $P(e,t,n){for(const r in t)!pn(t[r])&&!jP(r,n)&&(e[r]=t[r])}function S$({transformTemplate:e},t){return p.useMemo(()=>{const n=ox();return sx(n,t,e),Object.assign({},n.vars,n.style)},[t])}function b$(e,t){const n=e.style||{},r={};return $P(r,n,e),Object.assign(r,S$(e,t)),r}function D$(e,t){const n={},r=b$(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const A$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||A$.has(e)}let zP=e=>!Wu(e);function P$(e){e&&(zP=t=>t.startsWith("on")?!Wu(t):e(t))}try{P$(require("@emotion/is-prop-valid").default)}catch{}function k$(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(zP(o)||n===!0&&Wu(o)||!t&&!Wu(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function T$(e,t,n,r){const o=p.useMemo(()=>{const s=LP();return ix(s,t,ax(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};$P(s,e.style,e),o.style={...s,...o.style}}return o}function F$(e=!1){return(n,r,o,{latestValues:s},i)=>{const l=(tx(n)?T$:D$)(r,s,i,n),c=k$(r,typeof n=="string",e),u=n!==p.Fragment?{...c,...l,ref:o}:{},{children:f}=r,d=p.useMemo(()=>pn(f)?f.get():f,[f]);return p.createElement(n,{...u,children:d})}}function R$(e,t){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...tx(r)?E$:C$,preloadedFeatures:e,useRender:F$(o),createVisualElement:t,Component:r};return a$(i)}}const Sp={current:null},VP={current:!1};function M$(){if(VP.current=!0,!!ex)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Sp.current=e.matches;e.addListener(t),t()}else Sp.current=!1}function N$(e,t,n){for(const r in t){const o=t[r],s=n[r];if(pn(o))e.addValue(r,o);else if(pn(s))e.addValue(r,Al(o,{owner:e}));else if(s!==o)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=e.getStaticValue(r);e.addValue(r,Al(i!==void 0?i:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Mw=new WeakMap,I$=[...IA,fn,os],j$=e=>I$.find(NA(e)),Nw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _${scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_g,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=zr.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,rt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=$d(n),this.isVariantNode=RP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in f){const m=f[d];l[d]!==void 0&&pn(m)&&m.set(l[d],!1)}}mount(t){this.current=t,Mw.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),VP.current||M$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Mw.delete(this.current),this.projection&&this.projection.unmount(),rs(this.notifyUpdate),rs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Gs.has(t),o=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&rt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zi){const n=Zi[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Nw.length;r++){const o=Nw[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=t[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=N$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Al(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(TA(o)||kA(o))?o=parseFloat(o):!j$(o)&&os.test(n)&&(o=VA(t,n)),this.setBaseTarget(t,pn(o)?o.get():o)),pn(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const i=Tg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(o=i[t])}if(r&&o!==void 0)return o;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!pn(s)?s:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new qg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class UP extends _${constructor(){super(...arguments),this.KeyframeResolver=UA}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function B$(e){return window.getComputedStyle(e)}class L$ extends UP{constructor(){super(...arguments),this.type="html",this.renderInstance=MP}readValueFromInstance(t,n){if(Gs.has(n)){const r=$g(n);return r&&r.default||0}else{const r=B$(t),o=(RA(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return mP(t,n)}build(t,n,r){sx(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return nx(t,n,r)}}class O$ extends UP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Gs.has(n)){const r=$g(n);return r&&r.default||0}return n=NP.has(n)?n:Yg(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return _P(t,n,r)}build(t,n,r){ix(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,o){IP(t,n,r,o)}mount(t){this.isSVGTag=ax(t.tagName),super.mount(t)}}const $$=(e,t)=>tx(e)?new O$(t):new L$(t,{allowProjection:e!==p.Fragment}),z$=R$({...PL,...QO,...zO,...ZO},$$),zd=D6(z$);class V$ extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function U$({children:e,isPresent:t}){const n=p.useId(),r=p.useRef(null),o=p.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=p.useContext(Zg);return p.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=o.current;if(t||!r.current||!i||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),h.jsx(V$,{isPresent:t,childRef:r,sizeRef:o,children:p.cloneElement(e,{ref:r})})}const H$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i})=>{const a=rx(W$),l=p.useId(),c=p.useCallback(f=>{a.set(f,!0);for(const d of a.values())if(!d)return;r&&r()},[a,r]),u=p.useMemo(()=>({id:l,initial:t,isPresent:n,custom:o,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return p.useMemo(()=>{a.forEach((f,d)=>a.set(d,!1))},[n]),p.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),i==="popLayout"&&(e=h.jsx(U$,{isPresent:n,children:e})),h.jsx(Ld.Provider,{value:u,children:e})};function W$(){return new Map}const Bc=e=>e.key||"";function Iw(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const lx=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:s=!0,mode:i="sync"})=>{const a=p.useMemo(()=>Iw(e),[e]),l=a.map(Bc),c=p.useRef(!0),u=p.useRef(a),f=rx(()=>new Map),[d,m]=p.useState(a),[g,y]=p.useState(a);kP(()=>{c.current=!1,u.current=a;for(let x=0;x<g.length;x++){const v=Bc(g[x]);l.includes(v)?f.delete(v):f.get(v)!==!0&&f.set(v,!1)}},[g,l.length,l.join("-")]);const E=[];if(a!==d){let x=[...a];for(let v=0;v<g.length;v++){const C=g[v],b=Bc(C);l.includes(b)||(x.splice(v,0,C),E.push(C))}i==="wait"&&E.length&&(x=E),y(Iw(x)),m(a);return}const{forceRender:w}=p.useContext(Xg);return h.jsx(h.Fragment,{children:g.map(x=>{const v=Bc(x),C=a===g||l.includes(v),b=()=>{if(f.has(v))f.set(v,!0);else return;let D=!0;f.forEach(A=>{A||(D=!1)}),D&&(w==null||w(),y(u.current),o&&o())};return h.jsx(H$,{isPresent:C,initial:!c.current||r?void 0:!1,custom:C?void 0:n,presenceAffectsLayout:s,mode:i,onExitComplete:C?void 0:b,children:x},v)})})};function J$({day:e,hasPhotoEntries:t,entryCount:n,onClick:r}){const o=`calendar-day aspect-square relative p-1 transition-colors duration-200 rounded-lg select-none cursor-pointer bg-white dark:bg-neutral-800 shadow-sm hover:shadow-md hover:bg-neutral-50 dark:hover:bg-neutral-700 overflow-hidden ${t?"day-with-image":""}`;return h.jsxs(zd.div,{className:o,onClick:r,"data-day":e,layout:!0,whileTap:{scale:.95},children:[t&&h.jsx("img",{alt:"",className:"calendar-day-img absolute top-0 left-0 rounded-lg z-0 max-w-none",loading:"lazy"}),h.jsxs("div",{className:"day-content relative z-10 flex flex-col h-full justify-between",children:[h.jsx("div",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200 self-start",children:e}),n>0&&h.jsx("div",{className:"mt-auto self-end w-full px-0.5 pb-0.5",children:h.jsxs("div",{className:"flex justify-end items-center space-x-1",children:[n===1&&h.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),n>1&&h.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-primary/80 text-primary-foreground rounded-full leading-none",children:n})]})})]})]})}function G$(){const{currentMonth:e,currentYear:t,currentMonthEntries:n,swipeDirection:r,handleDayClick:o,handleCalendarSwipe:s,loadDayBackgrounds:i}=Wr(),a=50,l=.3,c={enter:g=>({x:g>0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0}),center:{x:0,opacity:1,position:"relative",width:"100%",transition:{duration:.4,ease:[.4,0,.2,1]}},exit:g=>({x:g<0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0})},u=(g,y)=>{const{offset:E,velocity:w}=y;E.x>a||w.x>l&&E.x>10?s(-1):(E.x<-a||w.x<-l&&E.x<-10)&&s(1)},f=p.useCallback(g=>{const E=new Date(Date.UTC(t,e-1,g)).toISOString().split("T")[0],w=n.filter(v=>v.date===E);return{hasPhotoEntries:w.some(v=>v.photos&&v.photos.length>0),entryCount:w.length}},[n,e,t]),d=p.useCallback(()=>{const g=new Date(t,e-1,0).getDate(),y=new Date(t,e-1,1).getDay(),E=Array(y).fill(null).map((x,v)=>({type:"empty",index:v})),w=Array.from({length:g},(x,v)=>({type:"day",day:v+1}));return[...E,...w]},[e,t]),m=()=>{i()};return h.jsxs("div",{className:"relative overflow-hidden",children:[h.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>h.jsx("div",{className:"text-center text-xs font-medium text-neutral-500 dark:text-neutral-400 py-2",children:g},g))}),h.jsxs("div",{className:"relative min-h-[300px] md:min-h-[500px]",children:[" ",h.jsx(lx,{initial:!1,custom:r,mode:"wait",children:h.jsx(zd.div,{custom:r,variants:c,initial:"enter",animate:"center",exit:"exit",onAnimationComplete:m,className:"grid grid-cols-7 gap-1 md:gap-2 touch-none",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.15,onDragEnd:u,dragDirectionLock:!0,dragPropagation:!1,style:{willChange:"transform"},children:d().map(g=>{const y=w=>w.type==="day",E=y(g)?`day-${g.day}`:`empty-${g.index}`;if(y(g)){const{hasPhotoEntries:w,entryCount:x}=f(g.day);return h.jsx(J$,{day:g.day,hasPhotoEntries:w,entryCount:x,onClick:()=>o(g.day)},E)}else return h.jsx("div",{className:"aspect-square relative p-1 bg-transparent"},E)})},`${t}-${e}`)})]})]})}function K$(){const{currentMonth:e,currentYear:t,goToPreviousMonth:n,goToNextMonth:r,openMonthYearPicker:o,navigate:s}=Wr(),i=new Date(t,e-1).toLocaleString("default",{month:"long"}),a=p.useCallback(()=>{let u=e,f=t;u===1?(u=12,f--):u--,S.log(`[MonthNavigation] Navigating to previous month: ${f}-${u}`),s(`/month/${f}/${u}`)},[e,t,s]),l=p.useCallback(()=>{let u=e,f=t;u===12?(u=1,f++):u++,S.log(`[MonthNavigation] Navigating to next month: ${f}-${u}`),s(`/month/${f}/${u}`)},[e,t,s]),c=p.useCallback(()=>{o(),s(`/month/${t}/${e}`)},[t,e,o,s]);return h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx(be,{variant:"outline",size:"icon",onClick:a,"aria-label":"Previous Month",className:"w-9 h-9",children:h.jsx(R8,{className:"h-4 w-4"})}),h.jsxs(be,{variant:"ghost",onClick:c,className:"font-medium text-lg px-2",children:[h.jsx(F8,{className:"h-4 w-4 mr-2"}),i," ",t]}),h.jsx(be,{variant:"outline",size:"icon",onClick:l,"aria-label":"Next Month",className:"w-9 h-9",children:h.jsx(ab,{className:"h-4 w-4"})})]})}function cx(e,[t,n]){return Math.min(n,Math.max(t,e))}function q$(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var ux="ScrollArea",[HP,X7]=bn(ux),[Y$,fr]=HP(ux),WP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[a,l]=p.useState(null),[c,u]=p.useState(null),[f,d]=p.useState(null),[m,g]=p.useState(null),[y,E]=p.useState(null),[w,x]=p.useState(0),[v,C]=p.useState(0),[b,D]=p.useState(!1),[A,P]=p.useState(!1),F=Le(t,T=>l(T)),k=aa(o);return h.jsx(Y$,{scope:n,type:r,dir:k,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:f,onContentChange:d,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:b,onScrollbarXEnabledChange:D,scrollbarY:y,onScrollbarYChange:E,scrollbarYEnabled:A,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:C,children:h.jsx(De.div,{dir:k,...i,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});WP.displayName=ux;var JP="ScrollAreaViewport",GP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,i=fr(JP,n),a=p.useRef(null),l=Le(t,a,i.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),h.jsx(De.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:h.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});GP.displayName=JP;var Jr="ScrollAreaScrollbar",dx=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=fr(Jr,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,a=e.orientation==="horizontal";return p.useEffect(()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)}),[a,s,i]),o.type==="hover"?h.jsx(X$,{...r,ref:t,forceMount:n}):o.type==="scroll"?h.jsx(Q$,{...r,ref:t,forceMount:n}):o.type==="auto"?h.jsx(KP,{...r,ref:t,forceMount:n}):o.type==="always"?h.jsx(fx,{...r,ref:t}):null});dx.displayName=Jr;var X$=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=fr(Jr,e.__scopeScrollArea),[s,i]=p.useState(!1);return p.useEffect(()=>{const a=o.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),h.jsx(Dn,{present:n||s,children:h.jsx(KP,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Q$=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=fr(Jr,e.__scopeScrollArea),s=e.orientation==="horizontal",i=Ud(()=>l("SCROLL_END"),100),[a,l]=q$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,o.scrollHideDelay,l]),p.useEffect(()=>{const c=o.viewport,u=s?"scrollLeft":"scrollTop";if(c){let f=c[u];const d=()=>{const m=c[u];f!==m&&(l("SCROLL"),i()),f=m};return c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[o.viewport,s,l,i]),h.jsx(Dn,{present:n||a!=="hidden",children:h.jsx(fx,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:se(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:se(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),KP=p.forwardRef((e,t)=>{const n=fr(Jr,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=p.useState(!1),a=e.orientation==="horizontal",l=Ud(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?c:u)}},10);return ea(n.viewport,l),ea(n.content,l),h.jsx(Dn,{present:r||s,children:h.jsx(fx,{"data-state":s?"visible":"hidden",...o,ref:t})})}),fx=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=fr(Jr,e.__scopeScrollArea),s=p.useRef(null),i=p.useRef(0),[a,l]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=ZP(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:d=>i.current=d};function f(d,m){return o9(d,i.current,a,m)}return n==="horizontal"?h.jsx(Z$,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const d=o.viewport.scrollLeft,m=jw(d,a,o.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:d=>{o.viewport&&(o.viewport.scrollLeft=d)},onDragScroll:d=>{o.viewport&&(o.viewport.scrollLeft=f(d,o.dir))}}):n==="vertical"?h.jsx(e9,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const d=o.viewport.scrollTop,m=jw(d,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:d=>{o.viewport&&(o.viewport.scrollTop=d)},onDragScroll:d=>{o.viewport&&(o.viewport.scrollTop=f(d))}}):null}),Z$=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=fr(Jr,e.__scopeScrollArea),[i,a]=p.useState(),l=p.useRef(null),c=Le(t,l,s.onScrollbarXChange);return p.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(YP,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Vd(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(d),tk(d,f)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Gu(i.paddingLeft),paddingEnd:Gu(i.paddingRight)}})}})}),e9=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=fr(Jr,e.__scopeScrollArea),[i,a]=p.useState(),l=p.useRef(null),c=Le(t,l,s.onScrollbarYChange);return p.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(YP,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Vd(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(s.viewport){const d=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(d),tk(d,f)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Gu(i.paddingTop),paddingEnd:Gu(i.paddingBottom)}})}})}),[t9,qP]=HP(Jr),YP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:f,...d}=e,m=fr(Jr,n),[g,y]=p.useState(null),E=Le(t,F=>y(F)),w=p.useRef(null),x=p.useRef(""),v=m.viewport,C=r.content-r.viewport,b=kt(u),D=kt(l),A=Ud(f,10);function P(F){if(w.current){const k=F.clientX-w.current.left,T=F.clientY-w.current.top;c({x:k,y:T})}}return p.useEffect(()=>{const F=k=>{const T=k.target;(g==null?void 0:g.contains(T))&&b(k,C)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[v,g,C,b]),p.useEffect(D,[r,D]),ea(g,A),ea(m.content,A),h.jsx(t9,{scope:n,scrollbar:g,hasThumb:o,onThumbChange:kt(s),onThumbPointerUp:kt(i),onThumbPositionChange:D,onThumbPointerDown:kt(a),children:h.jsx(De.div,{...d,ref:E,style:{position:"absolute",...d.style},onPointerDown:se(e.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),w.current=g.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(F))}),onPointerMove:se(e.onPointerMove,P),onPointerUp:se(e.onPointerUp,F=>{const k=F.target;k.hasPointerCapture(F.pointerId)&&k.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),w.current=null})})})}),Ju="ScrollAreaThumb",XP=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=qP(Ju,e.__scopeScrollArea);return h.jsx(Dn,{present:n||o.hasThumb,children:h.jsx(n9,{ref:t,...r})})}),n9=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=fr(Ju,n),i=qP(Ju,n),{onThumbPositionChange:a}=i,l=Le(t,f=>i.onThumbChange(f)),c=p.useRef(void 0),u=Ud(()=>{c.current&&(c.current(),c.current=void 0)},100);return p.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(u(),!c.current){const m=s9(f,a);c.current=m,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,u,a]),h.jsx(De.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:se(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),g=f.clientX-m.left,y=f.clientY-m.top;i.onThumbPointerDown({x:g,y})}),onPointerUp:se(e.onPointerUp,i.onThumbPointerUp)})});XP.displayName=Ju;var hx="ScrollAreaCorner",QP=p.forwardRef((e,t)=>{const n=fr(hx,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?h.jsx(r9,{...e,ref:t}):null});QP.displayName=hx;var r9=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=fr(hx,n),[s,i]=p.useState(0),[a,l]=p.useState(0),c=!!(s&&a);return ea(o.scrollbarX,()=>{var f;const u=((f=o.scrollbarX)==null?void 0:f.offsetHeight)||0;o.onCornerHeightChange(u),l(u)}),ea(o.scrollbarY,()=>{var f;const u=((f=o.scrollbarY)==null?void 0:f.offsetWidth)||0;o.onCornerWidthChange(u),i(u)}),c?h.jsx(De.div,{...r,ref:t,style:{width:s,height:a,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Gu(e){return e?parseInt(e,10):0}function ZP(e,t){const n=e/t;return isNaN(n)?0:n}function Vd(e){const t=ZP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function o9(e,t,n,r="ltr"){const o=Vd(n),s=o/2,i=t||s,a=o-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,f=r==="ltr"?[0,u]:[u*-1,0];return ek([l,c],f)(e)}function jw(e,t,n="ltr"){const r=Vd(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,i]:[i*-1,0],c=cx(e,l);return ek([0,i],[0,a])(c)}function ek(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function tk(e,t){return e>0&&e<t}var s9=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&t(),n=s,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function Ud(e,t){const n=kt(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function ea(e,t){const n=kt(t);lo(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var nk=WP,i9=GP,a9=QP;const rk=p.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(nk,{ref:r,className:ie("relative overflow-hidden",e),...n,children:[h.jsx(i9,{className:"h-full w-full rounded-[inherit]",children:t}),h.jsx(ok,{}),h.jsx(a9,{})]}));rk.displayName=nk.displayName;const ok=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>h.jsx(dx,{ref:r,orientation:t,className:ie("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:h.jsx(XP,{className:"relative flex-1 rounded-full bg-border"})}));ok.displayName=dx.displayName;const l9=e=>{if(!e)return 18;const t=window.getComputedStyle(e),n=t.lineHeight;if(n==="normal"){const r=parseFloat(t.fontSize);return Math.floor(r*1.3)}return parseFloat(n)},sk=({text:e,linesToShow:t=4,className:n})=>{const[r,o]=p.useState(!1),[s,i]=p.useState(!1),[a,l]=p.useState(!1),c=p.useRef(null),u=p.useRef(null),f=p.useCallback(()=>{const m=c.current,g=u.current;if(g){const y=l9(g),E=y*t,x=g.scrollHeight>E+y*.5;l(x),i(m&&!r?m.scrollHeight>m.clientHeight+2||x:!1),m&&!r&&x?(m.style.maxHeight=`${E}px`,m.style.overflow="hidden"):m&&(m.style.maxHeight="",m.style.overflow="")}},[t,r]);p.useLayoutEffect(()=>{f()},[e,t,f]),p.useEffect(()=>{const m=c.current;if(!m)return;const g=new ResizeObserver(()=>{f()});return g.observe(m),()=>g.disconnect()},[f]);const d=()=>{o(!r)};return h.jsxs("div",{children:[h.jsx("p",{ref:u,className:ie("text-sm font-sans whitespace-pre-wrap break-words invisible absolute -z-10",n),"aria-hidden":"true",children:e||""}),h.jsxs("p",{ref:c,"data-testid":"truncated-text-content",className:ie("text-sm text-foreground font-sans whitespace-pre-wrap break-words relative transition-[max-height]",!r&&a?"overflow-hidden":"",n),children:[e||"",!r&&s&&h.jsx("span",{className:"absolute bottom-0 left-0 w-full h-4 bg-gradient-to-t from-background to-transparent pointer-events-none"})]}),a&&h.jsx(be,{variant:"link",className:"p-0 h-auto text-xs text-muted-foreground hover:text-primary mt-1",onClick:d,children:r?"(less)":"(more)"})]})};function c9(e){return Object.prototype.toString.call(e)==="[object Object]"}function _w(e){return c9(e)||Array.isArray(e)}function u9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function px(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const o=JSON.stringify(Object.keys(e.breakpoints||{})),s=JSON.stringify(Object.keys(t.breakpoints||{}));return o!==s?!1:n.every(i=>{const a=e[i],l=t[i];return typeof a=="function"?`${a}`==`${l}`:!_w(a)||!_w(l)?a===l:px(a,l)})}function Bw(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function d9(e,t){if(e.length!==t.length)return!1;const n=Bw(e),r=Bw(t);return n.every((o,s)=>{const i=r[s];return px(o,i)})}function mx(e){return typeof e=="number"}function bp(e){return typeof e=="string"}function Hd(e){return typeof e=="boolean"}function Lw(e){return Object.prototype.toString.call(e)==="[object Object]"}function Et(e){return Math.abs(e)}function gx(e){return Math.sign(e)}function Za(e,t){return Et(e-t)}function f9(e,t){if(e===0||t===0||Et(e)<=Et(t))return 0;const n=Za(Et(e),Et(t));return Et(n/e)}function h9(e){return Math.round(e*100)/100}function Pl(e){return kl(e).map(Number)}function Dr(e){return e[Xl(e)]}function Xl(e){return Math.max(0,e.length-1)}function xx(e,t){return t===Xl(e)}function Ow(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function kl(e){return Object.keys(e)}function ik(e,t){return[e,t].reduce((n,r)=>(kl(r).forEach(o=>{const s=n[o],i=r[o],a=Lw(s)&&Lw(i);n[o]=a?ik(s,i):i}),n),{})}function Dp(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function p9(e,t){const n={start:r,center:o,end:s};function r(){return 0}function o(l){return s(l)/2}function s(l){return t-l}function i(l,c){return bp(e)?n[e](l):e(t,l,c)}return{measure:i}}function Tl(){let e=[];function t(o,s,i,a={passive:!0}){let l;if("addEventListener"in o)o.addEventListener(s,i,a),l=()=>o.removeEventListener(s,i,a);else{const c=o;c.addListener(i),l=()=>c.removeListener(i)}return e.push(l),r}function n(){e=e.filter(o=>o())}const r={add:t,clear:n};return r}function m9(e,t,n,r){const o=Tl(),s=1e3/60;let i=null,a=0,l=0;function c(){o.add(e,"visibilitychange",()=>{e.hidden&&g()})}function u(){m(),o.clear()}function f(E){if(!l)return;i||(i=E,n(),n());const w=E-i;for(i=E,a+=w;a>=s;)n(),a-=s;const x=a/s;r(x),l&&(l=t.requestAnimationFrame(f))}function d(){l||(l=t.requestAnimationFrame(f))}function m(){t.cancelAnimationFrame(l),i=null,a=0,l=0}function g(){i=null,a=0}return{init:c,destroy:u,start:d,stop:m,update:n,render:r}}function g9(e,t){const n=t==="rtl",r=e==="y",o=r?"y":"x",s=r?"x":"y",i=!r&&n?-1:1,a=u(),l=f();function c(g){const{height:y,width:E}=g;return r?y:E}function u(){return r?"top":n?"right":"left"}function f(){return r?"bottom":n?"left":"right"}function d(g){return g*i}return{scroll:o,cross:s,startEdge:a,endEdge:l,measureSize:c,direction:d}}function Os(e=0,t=0){const n=Et(e-t);function r(c){return c<e}function o(c){return c>t}function s(c){return r(c)||o(c)}function i(c){return s(c)?r(c)?e:t:c}function a(c){return n?c-n*Math.ceil((c-t)/n):c}return{length:n,max:t,min:e,constrain:i,reachedAny:s,reachedMax:o,reachedMin:r,removeOffset:a}}function ak(e,t,n){const{constrain:r}=Os(0,e),o=e+1;let s=i(t);function i(d){return n?Et((o+d)%o):r(d)}function a(){return s}function l(d){return s=i(d),f}function c(d){return u().set(a()+d)}function u(){return ak(e,a(),n)}const f={get:a,set:l,add:c,clone:u};return f}function x9(e,t,n,r,o,s,i,a,l,c,u,f,d,m,g,y,E,w,x){const{cross:v,direction:C}=e,b=["INPUT","SELECT","TEXTAREA"],D={passive:!1},A=Tl(),P=Tl(),F=Os(50,225).constrain(m.measure(20)),k={mouse:300,touch:400},T={mouse:500,touch:600},M=g?43:25;let _=!1,O=0,W=0,j=!1,B=!1,R=!1,N=!1;function V(ne){if(!x)return;function ve(pe){(Hd(x)||x(ne,pe))&&de(pe)}const ye=t;A.add(ye,"dragstart",pe=>pe.preventDefault(),D).add(ye,"touchmove",()=>{},D).add(ye,"touchend",()=>{}).add(ye,"touchstart",ve).add(ye,"mousedown",ve).add(ye,"touchcancel",re).add(ye,"contextmenu",re).add(ye,"click",fe,!0)}function I(){A.clear(),P.clear()}function L(){const ne=N?n:t;P.add(ne,"touchmove",Y,D).add(ne,"touchend",re).add(ne,"mousemove",Y,D).add(ne,"mouseup",re)}function H(ne){const ve=ne.nodeName||"";return b.includes(ve)}function $(){return(g?T:k)[N?"mouse":"touch"]}function he(ne,ve){const ye=f.add(gx(ne)*-1),pe=u.byDistance(ne,!g).distance;return g||Et(ne)<F?pe:E&&ve?pe*.5:u.byIndex(ye.get(),0).distance}function de(ne){const ve=Dp(ne,r);N=ve,R=g&&ve&&!ne.buttons&&_,_=Za(o.get(),i.get())>=2,!(ve&&ne.button!==0)&&(H(ne.target)||(j=!0,s.pointerDown(ne),c.useFriction(0).useDuration(0),o.set(i),L(),O=s.readPoint(ne),W=s.readPoint(ne,v),d.emit("pointerDown")))}function Y(ne){if(!Dp(ne,r)&&ne.touches.length>=2)return re(ne);const ye=s.readPoint(ne),pe=s.readPoint(ne,v),He=Za(ye,O),ct=Za(pe,W);if(!B&&!N&&(!ne.cancelable||(B=He>ct,!B)))return re(ne);const qe=s.pointerMove(ne);He>y&&(R=!0),c.useFriction(.3).useDuration(.75),a.start(),o.add(C(qe)),ne.preventDefault()}function re(ne){const ye=u.byDistance(0,!1).index!==f.get(),pe=s.pointerUp(ne)*$(),He=he(C(pe),ye),ct=f9(pe,He),qe=M-10*ct,Ze=w+ct/50;B=!1,j=!1,P.clear(),c.useDuration(qe).useFriction(Ze),l.distance(He,!g),N=!1,d.emit("pointerUp")}function fe(ne){R&&(ne.stopPropagation(),ne.preventDefault(),R=!1)}function ke(){return j}return{init:V,destroy:I,pointerDown:ke}}function v9(e,t){let r,o;function s(f){return f.timeStamp}function i(f,d){const g=`client${(d||e.scroll)==="x"?"X":"Y"}`;return(Dp(f,t)?f:f.touches[0])[g]}function a(f){return r=f,o=f,i(f)}function l(f){const d=i(f)-i(o),m=s(f)-s(r)>170;return o=f,m&&(r=f),d}function c(f){if(!r||!o)return 0;const d=i(o)-i(r),m=s(f)-s(r),g=s(f)-s(o)>170,y=d/m;return m&&!g&&Et(y)>.1?y:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:i}}function y9(){function e(n){const{offsetTop:r,offsetLeft:o,offsetWidth:s,offsetHeight:i}=n;return{top:r,right:o+s,bottom:r+i,left:o,width:s,height:i}}return{measure:e}}function w9(e){function t(r){return e*(r/100)}return{measure:t}}function E9(e,t,n,r,o,s,i){const a=[e].concat(r);let l,c,u=[],f=!1;function d(E){return o.measureSize(i.measure(E))}function m(E){if(!s)return;c=d(e),u=r.map(d);function w(x){for(const v of x){if(f)return;const C=v.target===e,b=r.indexOf(v.target),D=C?c:u[b],A=d(C?e:r[b]);if(Et(A-D)>=.5){E.reInit(),t.emit("resize");break}}}l=new ResizeObserver(x=>{(Hd(s)||s(E,x))&&w(x)}),n.requestAnimationFrame(()=>{a.forEach(x=>l.observe(x))})}function g(){f=!0,l&&l.disconnect()}return{init:m,destroy:g}}function C9(e,t,n,r,o,s){let i=0,a=0,l=o,c=s,u=e.get(),f=0;function d(){const D=r.get()-e.get(),A=!l;let P=0;return A?(i=0,n.set(r),e.set(r),P=D):(n.set(e),i+=D/l,i*=c,u+=i,e.add(i),P=u-f),a=gx(P),f=u,b}function m(){const D=r.get()-t.get();return Et(D)<.001}function g(){return l}function y(){return a}function E(){return i}function w(){return v(o)}function x(){return C(s)}function v(D){return l=D,b}function C(D){return c=D,b}const b={direction:y,duration:g,velocity:E,seek:d,settled:m,useBaseFriction:x,useBaseDuration:w,useFriction:C,useDuration:v};return b}function S9(e,t,n,r,o){const s=o.measure(10),i=o.measure(50),a=Os(.1,.99);let l=!1;function c(){return!(l||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function u(m){if(!c())return;const g=e.reachedMin(t.get())?"min":"max",y=Et(e[g]-t.get()),E=n.get()-t.get(),w=a.constrain(y/i);n.subtract(E*w),!m&&Et(E)<s&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function f(m){l=!m}return{shouldConstrain:c,constrain:u,toggleActive:f}}function b9(e,t,n,r,o){const s=Os(-t+e,0),i=f(),a=u(),l=d();function c(g,y){return Za(g,y)<=1}function u(){const g=i[0],y=Dr(i),E=i.lastIndexOf(g),w=i.indexOf(y)+1;return Os(E,w)}function f(){return n.map((g,y)=>{const{min:E,max:w}=s,x=s.constrain(g),v=!y,C=xx(n,y);return v?w:C||c(E,x)?E:c(w,x)?w:x}).map(g=>parseFloat(g.toFixed(3)))}function d(){if(t<=e+o)return[s.max];if(r==="keepSnaps")return i;const{min:g,max:y}=a;return i.slice(g,y)}return{snapsContained:l,scrollContainLimit:a}}function D9(e,t,n){const r=t[0],o=n?r-e:Dr(t);return{limit:Os(o,r)}}function A9(e,t,n,r){const s=t.min+.1,i=t.max+.1,{reachedMin:a,reachedMax:l}=Os(s,i);function c(d){return d===1?l(n.get()):d===-1?a(n.get()):!1}function u(d){if(!c(d))return;const m=e*(d*-1);r.forEach(g=>g.add(m))}return{loop:u}}function P9(e){const{max:t,length:n}=e;function r(s){const i=s-t;return n?i/-n:0}return{get:r}}function k9(e,t,n,r,o){const{startEdge:s,endEdge:i}=e,{groupSlides:a}=o,l=f().map(t.measure),c=d(),u=m();function f(){return a(r).map(y=>Dr(y)[i]-y[0][s]).map(Et)}function d(){return r.map(y=>n[s]-y[s]).map(y=>-Et(y))}function m(){return a(c).map(y=>y[0]).map((y,E)=>y+l[E])}return{snaps:c,snapsAligned:u}}function T9(e,t,n,r,o,s){const{groupSlides:i}=o,{min:a,max:l}=r,c=u();function u(){const d=i(s),m=!e||t==="keepSnaps";return n.length===1?[s]:m?d:d.slice(a,l).map((g,y,E)=>{const w=!y,x=xx(E,y);if(w){const v=Dr(E[0])+1;return Ow(v)}if(x){const v=Xl(s)-Dr(E)[0]+1;return Ow(v,Dr(E)[0])}return g})}return{slideRegistry:c}}function F9(e,t,n,r,o){const{reachedAny:s,removeOffset:i,constrain:a}=r;function l(g){return g.concat().sort((y,E)=>Et(y)-Et(E))[0]}function c(g){const y=e?i(g):a(g),E=t.map((x,v)=>({diff:u(x-y,0),index:v})).sort((x,v)=>Et(x.diff)-Et(v.diff)),{index:w}=E[0];return{index:w,distance:y}}function u(g,y){const E=[g,g+n,g-n];if(!e)return g;if(!y)return l(E);const w=E.filter(x=>gx(x)===y);return w.length?l(w):Dr(E)-n}function f(g,y){const E=t[g]-o.get(),w=u(E,y);return{index:g,distance:w}}function d(g,y){const E=o.get()+g,{index:w,distance:x}=c(E),v=!e&&s(E);if(!y||v)return{index:w,distance:g};const C=t[w]-x,b=g+u(C,0);return{index:w,distance:b}}return{byDistance:d,byIndex:f,shortcut:u}}function R9(e,t,n,r,o,s,i){function a(f){const d=f.distance,m=f.index!==t.get();s.add(d),d&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),m&&(n.set(t.get()),t.set(f.index),i.emit("select"))}function l(f,d){const m=o.byDistance(f,d);a(m)}function c(f,d){const m=t.clone().set(f),g=o.byIndex(m.get(),d);a(g)}return{distance:l,index:c}}function M9(e,t,n,r,o,s,i,a){const l={passive:!0,capture:!0};let c=0;function u(m){if(!a)return;function g(y){if(new Date().getTime()-c>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const x=n.findIndex(v=>v.includes(y));mx(x)&&(o.useDuration(0),r.index(x,0),i.emit("slideFocus"))}s.add(document,"keydown",f,!1),t.forEach((y,E)=>{s.add(y,"focus",w=>{(Hd(a)||a(m,w))&&g(E)},l)})}function f(m){m.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function Ba(e){let t=e;function n(){return t}function r(l){t=i(l)}function o(l){t+=i(l)}function s(l){t-=i(l)}function i(l){return mx(l)?l:l.get()}return{get:n,set:r,add:o,subtract:s}}function lk(e,t){const n=e.scroll==="x"?i:a,r=t.style;let o=null,s=!1;function i(d){return`translate3d(${d}px,0px,0px)`}function a(d){return`translate3d(0px,${d}px,0px)`}function l(d){if(s)return;const m=h9(e.direction(d));m!==o&&(r.transform=n(m),o=m)}function c(d){s=!d}function u(){s||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:u,to:l,toggleActive:c}}function N9(e,t,n,r,o,s,i,a,l){const u=Pl(o),f=Pl(o).reverse(),d=w().concat(x());function m(A,P){return A.reduce((F,k)=>F-o[k],P)}function g(A,P){return A.reduce((F,k)=>m(F,P)>0?F.concat([k]):F,[])}function y(A){return s.map((P,F)=>({start:P-r[F]+.5+A,end:P+t-.5+A}))}function E(A,P,F){const k=y(P);return A.map(T=>{const M=F?0:-n,_=F?n:0,O=F?"end":"start",W=k[T][O];return{index:T,loopPoint:W,slideLocation:Ba(-1),translate:lk(e,l[T]),target:()=>a.get()>W?M:_}})}function w(){const A=i[0],P=g(f,A);return E(P,n,!1)}function x(){const A=t-i[0]-1,P=g(u,A);return E(P,-n,!0)}function v(){return d.every(({index:A})=>{const P=u.filter(F=>F!==A);return m(P,t)<=.1})}function C(){d.forEach(A=>{const{target:P,translate:F,slideLocation:k}=A,T=P();T!==k.get()&&(F.to(T),k.set(T))})}function b(){d.forEach(A=>A.translate.clear())}return{canLoop:v,clear:b,loop:C,loopPoints:d}}function I9(e,t,n){let r,o=!1;function s(l){if(!n)return;function c(u){for(const f of u)if(f.type==="childList"){l.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(u=>{o||(Hd(n)||n(l,u))&&c(u)}),r.observe(e,{childList:!0})}function i(){r&&r.disconnect(),o=!0}return{init:s,destroy:i}}function j9(e,t,n,r){const o={};let s=null,i=null,a,l=!1;function c(){a=new IntersectionObserver(g=>{l||(g.forEach(y=>{const E=t.indexOf(y.target);o[E]=y}),s=null,i=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(g=>a.observe(g))}function u(){a&&a.disconnect(),l=!0}function f(g){return kl(o).reduce((y,E)=>{const w=parseInt(E),{isIntersecting:x}=o[w];return(g&&x||!g&&!x)&&y.push(w),y},[])}function d(g=!0){if(g&&s)return s;if(!g&&i)return i;const y=f(g);return g&&(s=y),g||(i=y),y}return{init:c,destroy:u,get:d}}function _9(e,t,n,r,o,s){const{measureSize:i,startEdge:a,endEdge:l}=e,c=n[0]&&o,u=g(),f=y(),d=n.map(i),m=E();function g(){if(!c)return 0;const x=n[0];return Et(t[a]-x[a])}function y(){if(!c)return 0;const x=s.getComputedStyle(Dr(r));return parseFloat(x.getPropertyValue(`margin-${l}`))}function E(){return n.map((x,v,C)=>{const b=!v,D=xx(C,v);return b?d[v]+u:D?d[v]+f:C[v+1][a]-x[a]}).map(Et)}return{slideSizes:d,slideSizesWithGaps:m,startGap:u,endGap:f}}function B9(e,t,n,r,o,s,i,a,l){const{startEdge:c,endEdge:u,direction:f}=e,d=mx(n);function m(w,x){return Pl(w).filter(v=>v%x===0).map(v=>w.slice(v,v+x))}function g(w){return w.length?Pl(w).reduce((x,v,C)=>{const b=Dr(x)||0,D=b===0,A=v===Xl(w),P=o[c]-s[b][c],F=o[c]-s[v][u],k=!r&&D?f(i):0,T=!r&&A?f(a):0,M=Et(F-T-(P+k));return C&&M>t+l&&x.push(v),A&&x.push(w.length),x},[]).map((x,v,C)=>{const b=Math.max(C[v-1]||0);return w.slice(b,x)}):[]}function y(w){return d?m(w,n):g(w)}return{groupSlides:y}}function L9(e,t,n,r,o,s,i){const{align:a,axis:l,direction:c,startIndex:u,loop:f,duration:d,dragFree:m,dragThreshold:g,inViewThreshold:y,slidesToScroll:E,skipSnaps:w,containScroll:x,watchResize:v,watchSlides:C,watchDrag:b,watchFocus:D}=s,A=2,P=y9(),F=P.measure(t),k=n.map(P.measure),T=g9(l,c),M=T.measureSize(F),_=w9(M),O=p9(a,M),W=!f&&!!x,j=f||!!x,{slideSizes:B,slideSizesWithGaps:R,startGap:N,endGap:V}=_9(T,F,k,n,j,o),I=B9(T,M,E,f,F,k,N,V,A),{snaps:L,snapsAligned:H}=k9(T,O,F,k,I),$=-Dr(L)+Dr(R),{snapsContained:he,scrollContainLimit:de}=b9(M,$,H,x,A),Y=W?he:H,{limit:re}=D9($,Y,f),fe=ak(Xl(Y),u,f),ke=fe.clone(),Ae=Pl(n),ne=({dragHandler:$t,scrollBody:Je,scrollBounds:G,options:{loop:q}})=>{q||G.constrain($t.pointerDown()),Je.seek()},ve=({scrollBody:$t,translate:Je,location:G,offsetLocation:q,previousLocation:oe,scrollLooper:le,slideLooper:me,dragHandler:je,animation:Te,eventHandler:Ye,scrollBounds:pt,options:{loop:Jt}},jt)=>{const on=$t.settled(),Gt=!pt.shouldConstrain(),xn=Jt?on:on&&Gt,Kt=xn&&!je.pointerDown();Kt&&Te.stop();const zt=G.get()*jt+oe.get()*(1-jt);q.set(zt),Jt&&(le.loop($t.direction()),me.loop()),Je.to(q.get()),Kt&&Ye.emit("settle"),xn||Ye.emit("scroll")},ye=m9(r,o,()=>ne(Yn),$t=>ve(Yn,$t)),pe=.68,He=Y[fe.get()],ct=Ba(He),qe=Ba(He),Ze=Ba(He),ut=Ba(He),ot=C9(ct,Ze,qe,ut,d,pe),et=F9(f,Y,$,re,ut),Tt=R9(ye,fe,ke,ot,et,ut,i),Ee=P9(re),We=Tl(),st=j9(t,n,i,y),{slideRegistry:Ft}=T9(W,x,Y,de,I,Ae),Pn=M9(e,n,Ft,Tt,ot,We,i,D),Yn={ownerDocument:r,ownerWindow:o,eventHandler:i,containerRect:F,slideRects:k,animation:ye,axis:T,dragHandler:x9(T,e,r,o,ut,v9(T,o),ct,ye,Tt,ot,et,fe,i,_,m,g,w,pe,b),eventStore:We,percentOfView:_,index:fe,indexPrevious:ke,limit:re,location:ct,offsetLocation:Ze,previousLocation:qe,options:s,resizeHandler:E9(t,i,o,n,T,v,P),scrollBody:ot,scrollBounds:S9(re,Ze,ut,ot,_),scrollLooper:A9($,re,Ze,[ct,Ze,qe,ut]),scrollProgress:Ee,scrollSnapList:Y.map(Ee.get),scrollSnaps:Y,scrollTarget:et,scrollTo:Tt,slideLooper:N9(T,M,$,B,R,L,Y,Ze,n),slideFocus:Pn,slidesHandler:I9(t,i,C),slidesInView:st,slideIndexes:Ae,slideRegistry:Ft,slidesToScroll:I,target:ut,translate:lk(T,t)};return Yn}function O9(){let e={},t;function n(c){t=c}function r(c){return e[c]||[]}function o(c){return r(c).forEach(u=>u(t,c)),l}function s(c,u){return e[c]=r(c).concat([u]),l}function i(c,u){return e[c]=r(c).filter(f=>f!==u),l}function a(){e={}}const l={init:n,emit:o,off:i,on:s,clear:a};return l}const $9={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function z9(e){function t(s,i){return ik(s,i||{})}function n(s){const i=s.breakpoints||{},a=kl(i).filter(l=>e.matchMedia(l).matches).map(l=>i[l]).reduce((l,c)=>t(l,c),{});return t(s,a)}function r(s){return s.map(i=>kl(i.breakpoints||{})).reduce((i,a)=>i.concat(a),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function V9(e){let t=[];function n(s,i){return t=i.filter(({options:a})=>e.optionsAtMedia(a).active!==!1),t.forEach(a=>a.init(s,e)),i.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){t=t.filter(s=>s.destroy())}return{init:n,destroy:r}}function Ku(e,t,n){const r=e.ownerDocument,o=r.defaultView,s=z9(o),i=V9(s),a=Tl(),l=O9(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:f}=s,{on:d,off:m,emit:g}=l,y=T;let E=!1,w,x=c($9,Ku.globalOptions),v=c(x),C=[],b,D,A;function P(){const{container:Ae,slides:ne}=v;D=(bp(Ae)?e.querySelector(Ae):Ae)||e.children[0];const ye=bp(ne)?D.querySelectorAll(ne):ne;A=[].slice.call(ye||D.children)}function F(Ae){const ne=L9(e,D,A,r,o,Ae,l);if(Ae.loop&&!ne.slideLooper.canLoop()){const ve=Object.assign({},Ae,{loop:!1});return F(ve)}return ne}function k(Ae,ne){E||(x=c(x,Ae),v=u(x),C=ne||C,P(),w=F(v),f([x,...C.map(({options:ve})=>ve)]).forEach(ve=>a.add(ve,"change",T)),v.active&&(w.translate.to(w.location.get()),w.animation.init(),w.slidesInView.init(),w.slideFocus.init(ke),w.eventHandler.init(ke),w.resizeHandler.init(ke),w.slidesHandler.init(ke),w.options.loop&&w.slideLooper.loop(),D.offsetParent&&A.length&&w.dragHandler.init(ke),b=i.init(ke,C)))}function T(Ae,ne){const ve=I();M(),k(c({startIndex:ve},Ae),ne),l.emit("reInit")}function M(){w.dragHandler.destroy(),w.eventStore.clear(),w.translate.clear(),w.slideLooper.clear(),w.resizeHandler.destroy(),w.slidesHandler.destroy(),w.slidesInView.destroy(),w.animation.destroy(),i.destroy(),a.clear()}function _(){E||(E=!0,a.clear(),M(),l.emit("destroy"),l.clear())}function O(Ae,ne,ve){!v.active||E||(w.scrollBody.useBaseFriction().useDuration(ne===!0?0:v.duration),w.scrollTo.index(Ae,ve||0))}function W(Ae){const ne=w.index.add(1).get();O(ne,Ae,-1)}function j(Ae){const ne=w.index.add(-1).get();O(ne,Ae,1)}function B(){return w.index.add(1).get()!==I()}function R(){return w.index.add(-1).get()!==I()}function N(){return w.scrollSnapList}function V(){return w.scrollProgress.get(w.offsetLocation.get())}function I(){return w.index.get()}function L(){return w.indexPrevious.get()}function H(){return w.slidesInView.get()}function $(){return w.slidesInView.get(!1)}function he(){return b}function de(){return w}function Y(){return e}function re(){return D}function fe(){return A}const ke={canScrollNext:B,canScrollPrev:R,containerNode:re,internalEngine:de,destroy:_,off:m,on:d,emit:g,plugins:he,previousScrollSnap:L,reInit:y,rootNode:Y,scrollNext:W,scrollPrev:j,scrollProgress:V,scrollSnapList:N,scrollTo:O,selectedScrollSnap:I,slideNodes:fe,slidesInView:H,slidesNotInView:$};return k(t,n),setTimeout(()=>l.emit("init"),0),ke}Ku.globalOptions=void 0;function vx(e={},t=[]){const n=p.useRef(e),r=p.useRef(t),[o,s]=p.useState(),[i,a]=p.useState(),l=p.useCallback(()=>{o&&o.reInit(n.current,r.current)},[o]);return p.useEffect(()=>{px(n.current,e)||(n.current=e,l())},[e,l]),p.useEffect(()=>{d9(r.current,t)||(r.current=t,l())},[t,l]),p.useEffect(()=>{if(u9()&&i){Ku.globalOptions=vx.globalOptions;const c=Ku(i,n.current,r.current);return s(c),()=>c.destroy()}else s(void 0)},[i,s]),[a,o]}vx.globalOptions=void 0;const ck=p.createContext(null);function Wd(){const e=p.useContext(ck);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const uk=p.forwardRef(({orientation:e="horizontal",opts:t,setApi:n,plugins:r,className:o,children:s,...i},a)=>{const[l,c]=vx({...t,axis:e==="horizontal"?"x":"y"},r),[u,f]=p.useState(!1),[d,m]=p.useState(!1),g=p.useCallback(x=>{x&&(f(x.canScrollPrev()),m(x.canScrollNext()))},[]),y=p.useCallback(()=>{c==null||c.scrollPrev()},[c]),E=p.useCallback(()=>{c==null||c.scrollNext()},[c]),w=p.useCallback(x=>{x.key==="ArrowLeft"?(x.preventDefault(),y()):x.key==="ArrowRight"&&(x.preventDefault(),E())},[y,E]);return p.useEffect(()=>{!c||!n||n(c)},[c,n]),p.useEffect(()=>{if(c)return g(c),c.on("reInit",g),c.on("select",g),()=>{c==null||c.off("select",g)}},[c,g]),h.jsx(ck.Provider,{value:{carouselRef:l,api:c,opts:t,orientation:e||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:y,scrollNext:E,canScrollPrev:u,canScrollNext:d},children:h.jsx("div",{ref:a,onKeyDownCapture:w,className:ie("relative",o),role:"region","aria-roledescription":"carousel",...i,children:s})})});uk.displayName="Carousel";const dk=p.forwardRef(({className:e,...t},n)=>{const{carouselRef:r,orientation:o}=Wd();return h.jsx("div",{ref:r,className:"overflow-hidden",children:h.jsx("div",{ref:n,className:ie("flex",o==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});dk.displayName="CarouselContent";const fk=p.forwardRef(({className:e,...t},n)=>{const{orientation:r}=Wd();return h.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:ie("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...t})});fk.displayName="CarouselItem";const hk=p.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},o)=>{const{orientation:s,scrollPrev:i,canScrollPrev:a}=Wd();return h.jsxs(be,{ref:o,variant:t,size:n,className:ie("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:i,...r,children:[h.jsx(sb,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Previous slide"})]})});hk.displayName="CarouselPrevious";const pk=p.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},o)=>{const{orientation:s,scrollNext:i,canScrollNext:a}=Wd();return h.jsxs(be,{ref:o,variant:t,size:n,className:ie("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:i,...r,children:[h.jsx(k8,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Next slide"})]})});pk.displayName="CarouselNext";const mk=({imageUrl:e,thumbnailUrl:t,crop:n,photoMetadata:r,altText:o="Cropped image",className:s,imgClassName:i,enableLoadingState:a=!0,onFullImageLoaded:l})=>{const[c,u]=p.useState({}),[f,d]=p.useState("idle"),[m,g]=p.useState({width:0,height:0}),[y,E]=p.useState(null),[w,x]=p.useState(!1),[v,C]=p.useState(!0),b=p.useRef(null),D=p.useRef(null),A=p.useCallback(()=>{if(b.current){const T=b.current.offsetWidth,M=b.current.offsetHeight;T>0&&M>0?g({width:T,height:M}):T>0&&g({width:T,height:T})}},[]);p.useEffect(()=>{const T=b.current;if(!T)return;const M=new ResizeObserver(A);return M.observe(T),A(),()=>{M.unobserve(T)}},[A]),p.useEffect(()=>{t&&f!=="loaded"?(E(t),x(!0),f!=="loading"&&d("loading")):e?w||(E(e),f!=="loading"&&f!=="loaded"&&d("loading")):(E(null),x(!1),d("idle"))},[e,t,f,w]),p.useEffect(()=>{if(w&&e&&t){const T=new Image,M=()=>{E(e),x(!1),d("loaded"),l&&l()},_=()=>{S.error("Failed to load full image in background:",e)};return T.onload=M,T.onerror=_,T.src=e,()=>{T.onload=null,T.onerror=null}}},[e,t,w,l]),p.useEffect(()=>{if(f==="loaded"&&v){const T=setTimeout(()=>{C(!1)},50);return()=>clearTimeout(T)}},[f,v]),p.useEffect(()=>{u((()=>{const M=f==="loaded",O={position:"absolute",top:0,left:0,opacity:M?1:0,transition:v?"opacity 0.3s ease-in-out":"opacity 0.3s ease-in-out, transform 0.45s ease-in-out, width 0.45s ease-in-out, height 0.45s ease-in-out",pointerEvents:M?"auto":"none",maxWidth:"none",maxHeight:"none",willChange:v?"opacity":"transform, opacity, width, height"};if(!(r!=null&&r.width)||!(r!=null&&r.height)||m.width<=0||r.width<=0||r.height<=0)return{...O,width:"100%",height:"100%",objectFit:"contain",objectPosition:"center center",transform:"none"};if(!n||n.w<=0||n.h<=0){const{width:L,height:H}=r,$=m.width,he=m.height||$,de=$/L,Y=he/H,re=Math.min(de,Y),fe=L*re,ke=H*re,Ae=($-fe)/2,ne=(he-ke)/2;return{...O,width:`${L}px`,height:`${H}px`,transform:`translate(${Ae}px, ${ne}px) scale(${re})`,transformOrigin:"0 0"}}const{width:W,height:j}=r,B=m.width,R=m.height||B,N=B/n.w,V=-n.x*N,I=-n.y*N;if(isNaN(N)||isNaN(V)||isNaN(I)){S.warn("NaN detected during style calculation",{scale:N,naturalW:W,naturalH:j,crop:n});const L=B/W,H=R/j,$=Math.min(L,H),he=W*$,de=j*$,Y=(B-he)/2,re=(R-de)/2;return{...O,width:`${W}px`,height:`${j}px`,transform:`translate(${Y}px, ${re}px) scale(${$})`,transformOrigin:"0 0"}}return{...O,width:`${W}px`,height:`${j}px`,transform:`translate(${V}px, ${I}px) scale(${N})`,transformOrigin:"0 0",objectFit:"initial",objectPosition:"initial"}})())},[n,r,f,m,v]);const P=p.useCallback(()=>{D.current&&D.current.getAttribute("src")===y&&y&&(d("loaded"),!w&&l&&l())},[y,w,l]),F=p.useCallback(()=>{if(D.current&&D.current.getAttribute("src")===y&&y){if(S.error("Failed to load image in CroppedImageViewer:",y),w&&e){E(e),x(!1);return}if(!w&&t){S.log("Full image failed to load. Falling back to thumbnail:",t),E(t),x(!0);return}d("error")}},[y,e,t,w]),k=a&&(f==="loading"||f==="error");return h.jsxs("div",{ref:b,"data-testid":"image-container",className:ie("relative w-full h-full overflow-hidden bg-muted",s),children:[k&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 bg-muted/50",children:f==="loading"?h.jsx(Ut,{className:"h-5 w-5 animate-spin text-muted-foreground"}):null}),h.jsx("img",{ref:D,src:y??"",alt:o,style:c,className:ie("block",i,w?"thumbnail-quality":"full-quality"),onLoad:P,onError:F,loading:"lazy"})]})},U9=({photo:e,thumbnailUrl:t})=>{const[n,r]=p.useState(!1),[o,s]=p.useState("idle"),i=p.useRef(null),a=p.useRef(null),{photoUrl:l,crop:c,photoMetadata:u}=e,f=!!(l||t);p.useEffect(()=>{s(f?"loading":"idle"),r(!1)},[l,t,f]);const d=()=>{(o==="loaded"||o==="loading")&&r(E=>!E)},m=p.useCallback(()=>{var E,w;((E=a.current)==null?void 0:E.src)===l&&l?(S.log(`[SinglePhotoDisplay] Image loaded: ${l}`),s("loaded")):S.log(`[SinglePhotoDisplay] Image load ignored (stale or no URL): loaded=${(w=a.current)==null?void 0:w.src}, current=${l}`)},[l]),g=p.useCallback(()=>{var E,w;((E=a.current)==null?void 0:E.src)===l&&l?(S.error("[SinglePhotoDisplay] Failed to load image:",l),s("error")):S.log(`[SinglePhotoDisplay] Image error ignored (stale or no URL): errorSrc=${(w=a.current)==null?void 0:w.src}, current=${l}`)},[l]),y=o==="idle"||o==="loading";return h.jsxs("div",{ref:i,className:"relative w-full h-full aspect-square overflow-hidden bg-muted cursor-pointer",onClick:d,title:o==="loaded"?n?"Show cropped image":"Show full image":"",children:[y&&f&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 bg-muted/50",children:h.jsx(Ut,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),o==="error"&&!(l&&t)&&!y&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 bg-muted",children:h.jsx(B8,{className:"h-8 w-8 text-destructive/50"})}),h.jsx("div",{className:"absolute inset-0 z-10",children:h.jsx(mk,{imageUrl:l,thumbnailUrl:t,crop:n?void 0:c,photoMetadata:u,altText:n?"Full entry photo":"Cropped entry photo",className:"w-full h-full",enableLoadingState:!1,onFullImageLoaded:()=>{o!=="loaded"&&s("loaded")}})}),l&&h.jsx("img",{ref:a,src:l,alt:"",onLoad:m,onError:g,style:{display:"none"},loading:"eager"},l),o==="loaded"&&h.jsx("div",{className:"absolute bottom-2 right-2 z-30 bg-black/50 text-white rounded-full p-1.5 pointer-events-none",children:n?h.jsx(z8,{size:16}):h.jsx($8,{size:16})})]})},gk=({entry:e})=>{var a;const[t,n]=p.useState(),[r,o]=p.useState(0),[s,i]=p.useState(0);return p.useEffect(()=>{if(t)return i(t.scrollSnapList().length),o(t.selectedScrollSnap()+1),t.on("select",()=>{t&&o(t.selectedScrollSnap()+1)}),()=>{t==null||t.off("select",()=>{})}},[t]),p.useEffect(()=>{var l,c;i(((l=e.photos)==null?void 0:l.length)??0),o(((c=e.photos)==null?void 0:c.length)>0?1:0),t==null||t.scrollTo(0,!0)},[e.id,(a=e.photos)==null?void 0:a.length,t]),p.useEffect(()=>{t==null||t.scrollTo(0,!1)},[t]),!e.photos||e.photos.length===0?null:h.jsx("div",{className:ie("relative w-full max-w-md aspect-square overflow-hidden rounded-md"),children:h.jsxs(uk,{setApi:n,className:"w-full h-full",children:[h.jsx(dk,{className:"h-full",children:e.photos.map((l,c)=>h.jsx(fk,{className:"h-full",children:h.jsx(U9,{photo:l,thumbnailUrl:l.thumbnailUrl})},`${e.id}-${l.photoId}-${c}`))}),s>1&&h.jsxs(h.Fragment,{children:[h.jsx(hk,{className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 h-8 w-8 bg-black/50 text-white hover:bg-black/70 border-none disabled:hidden"}),h.jsx(pk,{className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 h-8 w-8 bg-black/50 text-white hover:bg-black/70 border-none disabled:hidden"}),h.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 z-10 bg-black/60 text-white text-xs px-2 py-0.5 rounded-full pointer-events-none",children:[r," / ",s]})]})]})})},H9=e=>new Date(e+"T00:00:00Z").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"});function W9(){const{currentMonthEntries:e,isLoadingEntries:t,handleEditRequest:n,handleDeleteRequest:r,getCombinedEntryDetails:o,currentYear:s,currentMonth:i,swipeDirection:a,handleCalendarSwipe:l}=Wr(),[c,u]=p.useState(new Map),[f,d]=p.useState(new Map),m=p.useRef(null),g=50,y=.3,E={enter:v=>({x:v>0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0}),center:{x:0,opacity:1,position:"relative",width:"100%",transition:{duration:.4,ease:[.4,0,.2,1]}},exit:v=>({x:v<0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0,transition:{duration:.3,ease:[.4,0,.2,1]}})},w=(v,C)=>{const{offset:b,velocity:D}=C;let A=v.target;for(;A&&A!==m.current;){if(A.classList.contains("ignore-list-swipe")){S.log("List swipe ignored, started on carousel.");return}A=A.parentElement}b.x>g||D.x>y&&b.x>10?l(-1):(b.x<-g||D.x<-y&&b.x<-10)&&l(1)},x=p.useMemo(()=>[...e].sort((v,C)=>{const b=new Date(v.date).getTime(),D=new Date(C.date).getTime();if(b!==D)return b-D;const A=new Date(v.createdAt).getTime(),P=new Date(C.createdAt).getTime();return A-P}),[e]);return p.useEffect(()=>{let v=!0;return u(new Map),d(new Map),e.forEach(C=>{d(b=>new Map(b).set(C.id,!0)),o(C).then(b=>{v&&u(D=>new Map(D).set(C.id,b))}).catch(b=>{S.error(`Error fetching details for entry ${C.id}:`,b)}).finally(()=>{v&&d(b=>new Map(b).set(C.id,!1))})}),()=>{v=!1}},[e,o]),t?h.jsxs("div",{className:"flex items-center justify-center h-[calc(100%-40px)]",children:[" ",h.jsx(Ut,{className:"h-8 w-8 animate-spin text-primary"})]}):x.length===0&&!t?h.jsxs("div",{className:"text-center p-10 text-muted-foreground h-[calc(100%-40px)] flex items-center justify-center",children:[" ","No entries found for this month."]}):h.jsxs(rk,{className:"h-full",children:[" ",h.jsxs("div",{ref:m,className:"relative overflow-hidden h-full",children:[" ",h.jsx(lx,{initial:!1,custom:a,mode:"wait",children:h.jsx(zd.div,{custom:a,variants:E,initial:"enter",animate:"center",exit:"exit",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.15,dragDirectionLock:!0,dragPropagation:!1,onDragEnd:w,className:"space-y-4 p-1 pr-1 h-full touch-pan-y",style:{willChange:"transform"},children:x.map(v=>{const b=c.get(v.id)||{...v,photos:(v.photos||[]).map(D=>({...D,photoUrl:void 0,photoMetadata:void 0,photoFilename:void 0}))};return h.jsxs(Wm,{className:"overflow-hidden bg-card shadow-sm",children:[h.jsx("div",{className:"flex justify-center w-full border-b dark:border-neutral-700 ignore-list-swipe",onPointerDown:D=>D.stopPropagation(),onTouchStart:D=>D.stopPropagation(),children:h.jsx(gk,{entry:b})}),h.jsxs(Jm,{className:"p-3",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("span",{className:"text-sm font-medium text-foreground flex-shrink-0 pr-2",children:H9(v.date)}),h.jsxs(Ag,{children:[h.jsx(Pg,{asChild:!0,children:h.jsx(be,{variant:"ghost",size:"icon",className:"h-7 w-7 flex-shrink-0 text-muted-foreground hover:text-foreground",onClick:D=>D.stopPropagation(),"aria-label":"Entry options",children:h.jsx(cb,{className:"h-4 w-4"})})}),h.jsxs(Id,{align:"end",children:[h.jsxs(Zr,{onClick:D=>{D.stopPropagation(),n(v.id)},children:[h.jsx(ub,{className:"mr-2 h-4 w-4"})," Edit"]}),h.jsxs(Zr,{onClick:D=>{D.stopPropagation(),r(v.id)},className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[h.jsx(Nm,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),h.jsx(sk,{text:v.content,linesToShow:4})]})]},v.id)})},`${s}-${i}-list`)})]})]})}function xk({className:e,...t}){return h.jsx("div",{className:ie("animate-pulse rounded-md bg-muted",e),...t})}const $w=e=>({...e,photos:(e.photos||[]).map(t=>({...t,photoUrl:void 0,photoMetadata:void 0,photoFilename:void 0}))});function J9(){const{isViewEntryModalOpen:e,closeViewModal:t,selectedBasicEntriesForModal:n,viewEntryModalDate:r,handleEditRequest:o,handleDeleteRequest:s,getCombinedEntryDetails:i}=Wr(),[,a]=Dm(),[l,c]=p.useState(new Map),[u,f]=p.useState(!1),[d,m]=p.useState(new Set),g=p.useRef(!0),[y,E]=p.useState([]),w=p.useMemo(()=>[...n].sort((v,C)=>{const b=new Date(v.createdAt).getTime(),D=new Date(C.createdAt).getTime();return b-D}),[n]);p.useEffect(()=>{if(g.current=!0,e&&w.length>0){E(w),f(!0),c(new Map),m(new Set);const v=w.map(C=>i(C).then(b=>{g.current&&c(D=>new Map(D).set(C.id,b))}).catch(b=>{S.error(`Error fetching details for entry ${C.id} in modal:`,b),g.current&&(m(D=>new Set(D).add(C.id)),c(D=>new Map(D).set(C.id,$w(C))))}));Promise.allSettled(v).finally(()=>{g.current&&f(!1)})}else e||(c(new Map),f(!1),m(new Set));return()=>{g.current=!1}},[e,w,i]);const x=()=>{t(),a("/entry/new")};return h.jsx(Hs,{open:e,onOpenChange:t,children:h.jsxs(cs,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[h.jsx(us,{className:"flex-shrink-0 border-b pb-3",children:h.jsxs(ds,{children:["Entries for ",r.toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"})]})}),h.jsx("div",{className:"py-4 overflow-y-auto flex-grow custom-scrollbar pr-2 -mr-2",children:w.length===0&&!u&&y.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx("p",{className:"text-muted-foreground mb-4",children:"No entries for this date"}),h.jsx(be,{onClick:x,children:"Create New Entry"})]}):h.jsx("div",{className:"space-y-6",children:(w.length>0?w:y).map((v,C)=>{const b=l.get(v.id),D=u&&!b,A=d.has(v.id),P=b||$w(v);return h.jsxs("div",{className:"border dark:border-neutral-700 rounded-lg overflow-hidden shadow-sm bg-card",children:[h.jsx("div",{className:"flex justify-center w-full border-b dark:border-neutral-700 ignore-list-swipe",children:D?h.jsx(xk,{className:"aspect-square w-full max-w-md bg-muted"}):h.jsx(gk,{entry:P})}),h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(v.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),v.createdAt!==v.updatedAt&&h.jsx("span",{className:"italic text-xs",children:" (edited)"})]}),!u&&h.jsxs(Ag,{children:[h.jsx(Pg,{asChild:!0,children:h.jsx(be,{variant:"ghost",className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:h.jsx(cb,{className:"h-4 w-4"})})}),h.jsxs(Id,{align:"end",children:[h.jsxs(Zr,{onClick:()=>{setTimeout(()=>{o(v.id)},300)},children:[h.jsx(ub,{className:"mr-2 h-4 w-4"})," Edit"]}),h.jsxs(Zr,{onClick:()=>s(v.id),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[h.jsx(Nm,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),h.jsx(sk,{text:v.content,linesToShow:4}),A&&h.jsx("p",{className:"text-xs text-destructive mt-1",children:"Error loading photo details for this entry."})]})]},v.id+"-"+C)})})}),!u&&(w.length>0||y.length>0)&&h.jsx("div",{className:"flex justify-end mt-4 border-t dark:border-neutral-700 pt-4 flex-shrink-0",children:h.jsx(be,{onClick:x,children:"Add Another Entry"})})]})})}var vk="AlertDialog",[G9,Q7]=bn(vk,[R2]),po=R2(),yk=e=>{const{__scopeAlertDialog:t,...n}=e,r=po(t);return h.jsx(G2,{...r,...n,modal:!0})};yk.displayName=vk;var K9="AlertDialogTrigger",q9=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=po(n);return h.jsx(mj,{...o,...r,ref:t})});q9.displayName=K9;var Y9="AlertDialogPortal",wk=e=>{const{__scopeAlertDialog:t,...n}=e,r=po(t);return h.jsx(K2,{...r,...n})};wk.displayName=Y9;var X9="AlertDialogOverlay",Ek=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=po(n);return h.jsx(ag,{...o,...r,ref:t})});Ek.displayName=X9;var ki="AlertDialogContent",[Q9,Z9]=G9(ki),e7=NS("AlertDialogContent"),Ck=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,s=po(n),i=p.useRef(null),a=Le(t,i),l=p.useRef(null);return h.jsx(dj,{contentName:ki,titleName:Sk,docsSlug:"alert-dialog",children:h.jsx(Q9,{scope:n,cancelRef:l,children:h.jsxs(lg,{role:"alertdialog",...s,...o,ref:a,onOpenAutoFocus:se(o.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[h.jsx(e7,{children:r}),h.jsx(n7,{contentRef:i})]})})})});Ck.displayName=ki;var Sk="AlertDialogTitle",bk=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=po(n);return h.jsx(cg,{...o,...r,ref:t})});bk.displayName=Sk;var Dk="AlertDialogDescription",Ak=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=po(n);return h.jsx(ug,{...o,...r,ref:t})});Ak.displayName=Dk;var t7="AlertDialogAction",Pk=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=po(n);return h.jsx(dg,{...o,...r,ref:t})});Pk.displayName=t7;var kk="AlertDialogCancel",Tk=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=Z9(kk,n),s=po(n),i=Le(t,o);return h.jsx(dg,{...s,...r,ref:i})});Tk.displayName=kk;var n7=({contentRef:e})=>{const t=`\`${ki}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ki}\` by passing a \`${Dk}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ki}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},r7=yk,o7=wk,Fk=Ek,Rk=Ck,Mk=Pk,Nk=Tk,Ik=bk,jk=Ak;const _k=r7,s7=o7,Bk=p.forwardRef(({className:e,...t},n)=>h.jsx(Fk,{className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Bk.displayName=Fk.displayName;const yx=p.forwardRef(({className:e,...t},n)=>h.jsxs(s7,{children:[h.jsx(Bk,{}),h.jsx(Rk,{ref:n,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));yx.displayName=Rk.displayName;const wx=({className:e,...t})=>h.jsx("div",{className:ie("flex flex-col space-y-2 text-center sm:text-left",e),...t});wx.displayName="AlertDialogHeader";const Ex=({className:e,...t})=>h.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ex.displayName="AlertDialogFooter";const Cx=p.forwardRef(({className:e,...t},n)=>h.jsx(Ik,{ref:n,className:ie("text-lg font-semibold",e),...t}));Cx.displayName=Ik.displayName;const Sx=p.forwardRef(({className:e,...t},n)=>h.jsx(jk,{ref:n,className:ie("text-sm text-muted-foreground",e),...t}));Sx.displayName=jk.displayName;const bx=p.forwardRef(({className:e,...t},n)=>h.jsx(Mk,{ref:n,className:ie(Gm(),e),...t}));bx.displayName=Mk.displayName;const Dx=p.forwardRef(({className:e,...t},n)=>h.jsx(Nk,{ref:n,className:ie(Gm({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Dx.displayName=Nk.displayName;function i7(){const{isDeleteDialogOpen:e,closeDeleteDialog:t,handleDeleteEntry:n,isSaving:r}=Wr(),o=async()=>{await n()};return h.jsx(_k,{open:e,onOpenChange:t,children:h.jsxs(yx,{children:[h.jsxs(wx,{children:[h.jsx(Cx,{children:"Delete Entry"}),h.jsx(Sx,{children:"Are you sure you want to delete this entry? This action cannot be undone."})]}),h.jsxs(Ex,{children:[h.jsx(Dx,{disabled:r,children:"Cancel"}),h.jsx(bx,{onClick:s=>{s.preventDefault(),o()},disabled:r,className:"bg-red-500 hover:bg-red-600 focus:ring-red-500",children:r?"Deleting...":"Delete"})]})]})})}function a7({onFilesSelect:e,disabled:t=!1,className:n,children:r,maxFiles:o=10,currentFileCount:s=0}){const i=p.useRef(null),{toast:a}=Ol(),l=p.useCallback(async g=>{if(!g||g.length===0)return;const y=Array.from(g),E=[],w=[];let x=!0;if(s+y.length>o){a({title:"Too many files",description:`You can only add ${o-s} more photo(s).`,variant:"destructive"}),i.current&&(i.current.value="");return}for(const v of y){if(!v.type.startsWith("image/")){a({title:"Invalid File Type",description:`"${v.name}" is not a supported image file.`,variant:"destructive"}),x=!1;continue}try{const C=URL.createObjectURL(v);E.push(v),w.push(C)}catch(C){S.error("Error creating object URL:",C),a({title:"Processing Error",description:`Could not process file: ${v.name}`,variant:"destructive"}),x=!1,w.forEach(URL.revokeObjectURL),i.current&&(i.current.value="");return}}E.length>0?e(E,w):!x&&w.length>0&&w.forEach(URL.revokeObjectURL),x&&i.current&&(i.current.value="")},[e,a,o,s]),c=p.useCallback(g=>{t||l(g.target.files)},[t,l]),u=p.useCallback(g=>{t||(g.preventDefault(),g.stopPropagation(),l(g.dataTransfer.files))},[t,l]),f=g=>{t||(g.preventDefault(),g.stopPropagation())},d=p.useCallback(()=>{var g;t||(g=i.current)==null||g.click()},[t]),m=r?xt.isValidElement(r)?xt.cloneElement(r,{onClick:d}):h.jsx("div",{onClick:d,children:r}):h.jsxs("div",{className:ie("mt-2 flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-6 transition-colors",t?"cursor-not-allowed bg-muted/50 border-gray-300 dark:border-gray-700":"border-gray-300 dark:border-gray-700 cursor-pointer hover:border-primary hover:bg-accent",n),onDragOver:f,onDrop:u,onClick:d,children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`mb-2 h-10 w-10 ${t?"text-gray-300 dark:text-gray-600":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsxs("p",{className:`mb-2 text-center text-sm ${t?"text-gray-400 dark:text-gray-500":"text-gray-500 dark:text-gray-400"}`,children:[h.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag & drop"]}),h.jsx("p",{className:`text-xs ${t?"text-gray-400 dark:text-gray-500":"text-gray-500 dark:text-gray-400"}`,children:"PNG, JPG (Multiple allowed)"})]});return h.jsxs("div",{className:ie(!r&&"w-full",n),children:[h.jsx("input",{ref:i,type:"file",accept:"image/png, image/jpeg, image/jpg",className:"hidden",onChange:c,disabled:t,multiple:!0}),m]})}const l7=e=>{if(!e)return 8;try{const t=window.getComputedStyle(e),n=t.getPropertyValue("gap")||t.getPropertyValue("column-gap")||"8px";return parseInt(n,10)||8}catch{return 8}};function c7({photos:e,setPhotos:t,isBusy:n,isLoadingInitial:r,initialPhotoCount:o,onOpenCropper:s,onRemovePhoto:i,onFilesSelect:a,originalBlobUrlsRef:l,existingPhotoMetaRef:c,processingQueueLength:u,currentQueueIndex:f,isProcessingQueueItem:d}){const m=p.useRef(null),g=p.useRef(null),[y,E]=p.useState(null),[w,x]=p.useState(null),v=p.useRef([]),C=p.useRef(null),b=p.useRef(null);p.useEffect(()=>{v.current=v.current.slice(0,e.length)},[e.length]);const D=()=>{b.current&&(b.current.style.display="none"),x(null)},A=j=>{const B=b.current,R=C.current;if(!B||!R||j<0||j>e.length){D();return}if(j===w&&B.style.display!=="none")return;x(j);const N=l7(R);let V=null,I=!1;if(j===e.length?(V=v.current[e.length-1],I=!0):(V=v.current[j],I=!1),V){const L=V.getBoundingClientRect(),H=V.offsetTop;let $;I?$=V.offsetLeft+L.width+N/2:$=V.offsetLeft-N/2,B.style.display="block",B.style.top=`${H}px`,B.style.left=`${$}px`,B.style.height=`${L.height}px`}else D()},P=(j,B)=>{if(m.current=B,E(B),D(),j.dataTransfer)try{j.dataTransfer.effectAllowed="move"}catch{}},F=(j,B)=>{if(j.preventDefault(),m.current===null||m.current===B){g.current=null,D();return}g.current=B;const R=v.current[B];if(R){const N=R.getBoundingClientRect(),V=N.left+N.width/2,L=j.clientX<V?B:B+1;A(L)}},k=j=>{C.current&&!C.current.contains(j.relatedTarget)&&(g.current=null,D())},T=()=>{let j=w;m.current!==null&&j!==null&&j>m.current&&j--,m.current!==null&&j!==null&&m.current!==j&&t(B=>{const R=[...B],N=R.splice(m.current,1)[0];return R.splice(j,0,N),R}),m.current=null,g.current=null,E(null),D()},M=(j,B)=>{m.current=B,E(B),D()},_=j=>{if(m.current===null)return;j.cancelable&&j.preventDefault();const B=j.touches[0],R=document.elementFromPoint(B.clientX,B.clientY),N=R==null?void 0:R.closest('[draggable="true"]');if(N){const V=v.current.indexOf(N);if(V!==-1&&V!==m.current){g.current=V;const I=N.getBoundingClientRect(),L=I.left+I.width/2,$=B.clientX<L?V:V+1;A($);return}}g.current=null,D()},O=()=>{let j=w;m.current!==null&&j!==null&&j>m.current&&j--,m.current!==null&&j!==null&&m.current!==j&&t(B=>{const R=[...B],N=R.splice(m.current,1)[0];return R.splice(j,0,N),R}),m.current=null,g.current=null,E(null),D()},W=!n&&e.length>1;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Lt,{children:["Photos (",e.length,"/",qa,")"," ",W&&h.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(Use handle to drag and reorder)"})]}),e.length===0&&!r&&u===0&&h.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Add photos below."}),r&&h.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:[...Array(o||2)].map((j,B)=>h.jsx(xk,{className:"h-16 w-16 rounded aspect-square"},B))}),h.jsxs("div",{ref:C,className:"relative grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",onDragOver:j=>j.preventDefault(),onDragLeave:k,onTouchStart:j=>{},onTouchMove:_,onTouchEnd:O,onTouchCancel:O,children:[h.jsx("div",{ref:b,className:"drop-indicator"}),e.map((j,B)=>{var H;const R=Fn(j)?j.localId:j.photoId,N=l.current.get(R),V=j.crop;let I=null;Fn(j)?j.originalDimensions&&(I={filename:j.file.name,mimeType:j.file.type,width:j.originalDimensions.width,height:j.originalDimensions.height,exifDate:(H=j.exifData)==null?void 0:H.exifDate}):pD(j)&&(I=c.current.get(j.photoId)??null);const L=!!N;return h.jsxs("div",{ref:$=>v.current[B]=$,draggable:W,onDragStart:$=>{$.target instanceof Element&&!$.target.closest("button")&&W&&P($,B)},onDragOver:$=>W&&F($,B),onDragEnd:W?T:void 0,onTouchStart:$=>{$.target instanceof Element&&!$.target.closest("button")&&W&&M($,B)},className:ie("relative group aspect-square border rounded bg-muted overflow-hidden touch-manipulation",W?"cursor-grab active:cursor-grabbing":"cursor-default",y===B?"opacity-50 scale-95 shadow-lg z-10":"opacity-100 z-0","transition-all duration-150 ease-in-out"),children:[h.jsx(mk,{imageUrl:N,thumbnailUrl:N,crop:V,photoMetadata:I,altText:`Photo ${B+1} thumbnail`,className:"rounded",enableLoadingState:!!N&&N.startsWith("blob:")}),h.jsxs("div",{className:ie("absolute inset-0 bg-black/40 flex items-center justify-center gap-4 rounded transition-opacity duration-150","opacity-100 hover:opacity-90",n&&"opacity-0 pointer-events-none"),style:{zIndex:10},onClick:$=>$.stopPropagation(),children:[h.jsx("div",{className:"z-20",children:h.jsx(be,{type:"button",variant:"outline",size:"icon",className:"h-12 w-12 bg-white/90 hover:bg-white cursor-pointer",onClick:$=>{$.stopPropagation(),$.preventDefault(),!n&&!r&&L?(S.log(`[PhotoManager] Crop button clicked for photo ${B}`),s(B)):L||S.warn(`Cannot open cropper: original URL missing for ${R}`)},disabled:n||!L,children:h.jsx(N8,{className:"h-5 w-5"})})}),h.jsx("div",{className:"z-20",children:h.jsx(be,{type:"button",variant:"destructive",size:"icon",className:"h-12 w-12 cursor-pointer",onClick:$=>{$.stopPropagation(),$.preventDefault(),!n&&!r&&(S.log(`[PhotoManager] Delete button clicked for photo ${B}`),i(B))},disabled:n,children:h.jsx(Nm,{className:"h-5 w-5"})})})]}),W&&h.jsx("div",{className:"absolute top-1 left-1 opacity-70 group-hover:opacity-90 transition-opacity cursor-grab p-2 bg-black/60 rounded-sm drag-handle",style:{zIndex:20},children:h.jsx(_8,{className:"h-4 w-4 text-white"})})]},R+"-"+B)}),e.length<qa&&h.jsx(a7,{onFilesSelect:a,disabled:n,className:"aspect-square h-full w-full p-0 m-0",maxFiles:qa,currentFileCount:e.length,children:h.jsx("button",{type:"button",className:"w-full h-full flex flex-col items-center justify-center border-2 border-dashed border-muted-foreground/50 rounded hover:border-primary hover:bg-accent transition-colors disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:border-muted-foreground/50 disabled:hover:bg-transparent",disabled:n,"aria-label":"Add photo",children:d?h.jsx(Ut,{className:"h-5 w-5 animate-spin text-muted-foreground"}):h.jsxs(h.Fragment,{children:[h.jsx(L8,{className:"h-5 w-5 text-muted-foreground mb-1"}),h.jsx("span",{className:"text-xs text-muted-foreground",children:"Add"})]})})})]}),f!==null&&f<u&&!n&&h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground flex items-center",children:[h.jsx(Ut,{className:"h-4 w-4 mr-2 animate-spin"})," Processing photo ",f+1," of"," ",u,"..."]})]})}function u7({date:e,onDateChange:t,showExifWarning:n,initialExifDate:r,onUseExifDate:o,isBusy:s}){return h.jsxs("div",{className:"space-y-2",children:[h.jsx(Lt,{htmlFor:"date",children:"Date"}),h.jsx("input",{id:"date",type:"date",className:"input-basic",value:e.toISOString().split("T")[0],onChange:t,disabled:s}),n&&r&&h.jsxs("div",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400 flex items-center space-x-1",children:[h.jsx(G8,{className:"h-3 w-3 flex-shrink-0"}),h.jsxs("span",{children:["First photo date (",r,") differs."]}),h.jsx("button",{type:"button",onClick:o,className:"underline cursor-pointer text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:"Use photo date"})]})]})}const Lk=p.forwardRef(({className:e,...t},n)=>h.jsx("textarea",{className:ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Lk.displayName="Textarea";function d7({content:e,setContent:t,isBusy:n,onKeyDown:r,textAreaRef:o}){return h.jsxs("div",{className:"space-y-2",children:[h.jsx(Lt,{htmlFor:"content",children:"Content"}),h.jsx(Lk,{ref:o,id:"content",placeholder:"Write thoughts...",className:"min-h-[120px]",value:e,onChange:s=>t(s.target.value),disabled:n,onKeyDown:r})]})}function f7({isBusy:e,isSaving:t,isEditMode:n,canSave:r,onCancel:o,onSave:s}){return h.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 border-t pt-4 mt-4",children:[h.jsx(be,{variant:"outline",onClick:o,disabled:e,children:"Cancel"}),h.jsx(be,{onClick:s,disabled:e||t||!r,children:t?h.jsxs(h.Fragment,{children:[h.jsx(Ut,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):n?"Update Entry":"Save Entry"})]})}function h7(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}function p7(e=2e3,t=new Date().getFullYear()+5){const n=[];for(let r=e;r<=t;r++)n.push(r);return n}function m7(){const{isMonthYearPickerOpen:e,closeMonthYearPicker:t,handleMonthYearSelect:n,currentMonth:r,currentYear:o,navigate:s}=Wr(),[i,a]=p.useState(r),[l,c]=p.useState(o);p.useEffect(()=>{e&&(a(r),c(o))},[e,r,o]);const u=h7(),f=p7(2e3,new Date().getFullYear()+5),d=p.useCallback(()=>{t(),S.log(`[MonthYearPicker] Navigating to selected month/year: ${l}-${i}`),s(`/month/${l}/${i}`)},[i,l,s,t]);return h.jsx(Hs,{open:e,onOpenChange:t,children:h.jsxs(cs,{className:"sm:max-w-md",children:[h.jsxs(us,{children:[h.jsx(ds,{children:"Select Month and Year"}),h.jsx(da,{children:"Choose the month and year you want to navigate to"})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"month-select",className:"text-sm font-medium",children:"Month"}),h.jsx("select",{id:"month-select",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:i,onChange:m=>a(parseInt(m.target.value)),children:u.map((m,g)=>h.jsx("option",{value:g+1,children:m},g))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"year-select",className:"text-sm font-medium",children:"Year"}),h.jsx("select",{id:"year-select",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:l,onChange:m=>c(parseInt(m.target.value)),children:f.map(m=>h.jsx("option",{value:m,children:m},m))})]})]})}),h.jsxs("div",{className:"flex justify-end space-x-2",children:[h.jsx(be,{variant:"outline",onClick:t,children:"Cancel"}),h.jsx(be,{onClick:d,children:"Apply"})]})]})})}function zw(e){const t=e.params.year?parseInt(e.params.year,10):void 0,n=e.params.month?parseInt(e.params.month,10):void 0,{monthViewType:r,isLoadingEntries:o,isLoadingImagesMeta:s,isSaving:i,operationError:a,clearOperationError:l,isOnline:c,currentMonth:u,currentYear:f,handleMonthYearSelect:d}=Wr();xg(),Dm(),p.useEffect(()=>{t&&n&&(S.log(`[Home] URL parameters detected: year=${t}, month=${n}`),(t!==f||n!==u)&&(S.log(`[Home] Navigating to year=${t}, month=${n} (from ${f}-${u})`),d(n,t)))},[t,n,f,u,d]);const m=i,g=i?"Saving...":"",y={enter:{opacity:0,transition:{duration:.15}},center:{opacity:1,transition:{duration:.2,delay:.1}},exit:{opacity:0,transition:{duration:.15}}},E=c?"pt-16":"pt-20";return h.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex flex-col",children:[h.jsx(b6,{}),m&&h.jsxs("div",{className:ie("fixed left-1/2 transform -translate-x-1/2 z-20 bg-background/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg border flex items-center text-sm text-muted-foreground",c?"top-16":"top-20","mt-2"),children:[h.jsx(Ut,{className:"h-4 w-4 animate-spin mr-2"}),h.jsx("span",{children:g})]}),a&&!m&&h.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded flex justify-between items-center max-w-sm shadow-md z-50",children:[h.jsxs("span",{children:["Error: ",a.message]}),h.jsx("button",{onClick:l,className:"ml-3 font-bold","aria-label":"Close",children:h.jsx(wd,{className:"h-4 w-4"})})]}),h.jsxs("main",{className:ie("container mx-auto px-4 pb-4 flex-grow flex flex-col overflow-hidden",E),children:[h.jsx(K$,{}),h.jsx("div",{className:"mx-auto max-w-3xl w-full flex-grow flex flex-col overflow-hidden",children:h.jsx("div",{className:"flex-grow overflow-hidden relative",children:o||s?h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 z-10",children:h.jsx(Ut,{className:"h-8 w-8 animate-spin text-primary"})}):h.jsx(lx,{initial:!1,mode:"wait",children:h.jsx(zd.div,{variants:y,initial:"enter",animate:"center",exit:"exit",className:"absolute inset-0 view-container",children:h.jsx("div",{className:"h-full",children:r==="calendar"?h.jsx(G$,{}):h.jsx(W9,{})})},r)})})})]}),h.jsx(m7,{}),h.jsx(J9,{}),h.jsx(i7,{})]})}var Ok=["PageUp","PageDown"],$k=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],zk={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ha="Slider",[Ap,g7,x7]=md(ha),[Vk,Z7]=bn(ha,[x7]),[v7,Jd]=Vk(ha),Uk=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:s=1,orientation:i="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:f=()=>{},onValueCommit:d=()=>{},inverted:m=!1,form:g,...y}=e,E=p.useRef(new Set),w=p.useRef(0),v=i==="horizontal"?y7:w7,[C=[],b]=Ur({prop:u,defaultProp:c,onChange:T=>{var _;(_=[...E.current][w.current])==null||_.focus(),f(T)}}),D=p.useRef(C);function A(T){const M=D7(C,T);k(T,M)}function P(T){k(T,w.current)}function F(){const T=D.current[w.current];C[w.current]!==T&&d(C)}function k(T,M,{commit:_}={commit:!1}){const O=T7(s),W=F7(Math.round((T-r)/s)*s+r,O),j=cx(W,[r,o]);b((B=[])=>{const R=S7(B,j,M);if(k7(R,l*s)){w.current=R.indexOf(j);const N=String(R)!==String(B);return N&&_&&d(R),N?R:B}else return B})}return h.jsx(v7,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:o,valueIndexToChangeRef:w,thumbs:E.current,values:C,orientation:i,form:g,children:h.jsx(Ap.Provider,{scope:e.__scopeSlider,children:h.jsx(Ap.Slot,{scope:e.__scopeSlider,children:h.jsx(v,{"aria-disabled":a,"data-disabled":a?"":void 0,...y,ref:t,onPointerDown:se(y.onPointerDown,()=>{a||(D.current=C)}),min:r,max:o,inverted:m,onSlideStart:a?void 0:A,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:F,onHomeKeyDown:()=>!a&&k(r,0,{commit:!0}),onEndKeyDown:()=>!a&&k(o,C.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:M})=>{if(!a){const W=Ok.includes(T.key)||T.shiftKey&&$k.includes(T.key)?10:1,j=w.current,B=C[j],R=s*W*M;k(B+R,j,{commit:!0})}}})})})})});Uk.displayName=ha;var[Hk,Wk]=Vk(ha,{startEdge:"left",endEdge:"right",size:"width",direction:1}),y7=p.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,[f,d]=p.useState(null),m=Le(t,v=>d(v)),g=p.useRef(void 0),y=aa(o),E=y==="ltr",w=E&&!s||!E&&s;function x(v){const C=g.current||f.getBoundingClientRect(),b=[0,C.width],A=Ax(b,w?[n,r]:[r,n]);return g.current=C,A(v-C.left)}return h.jsx(Hk,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:h.jsx(Jk,{dir:y,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const C=x(v.clientX);i==null||i(C)},onSlideMove:v=>{const C=x(v.clientX);a==null||a(C)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:v=>{const b=zk[w?"from-left":"from-right"].includes(v.key);c==null||c({event:v,direction:b?-1:1})}})})}),w7=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onStepKeyDown:l,...c}=e,u=p.useRef(null),f=Le(t,u),d=p.useRef(void 0),m=!o;function g(y){const E=d.current||u.current.getBoundingClientRect(),w=[0,E.height],v=Ax(w,m?[r,n]:[n,r]);return d.current=E,v(y-E.top)}return h.jsx(Hk,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:h.jsx(Jk,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const E=g(y.clientY);s==null||s(E)},onSlideMove:y=>{const E=g(y.clientY);i==null||i(E)},onSlideEnd:()=>{d.current=void 0,a==null||a()},onStepKeyDown:y=>{const w=zk[m?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:w?-1:1})}})})}),Jk=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:a,onStepKeyDown:l,...c}=e,u=Jd(ha,n);return h.jsx(De.span,{...c,ref:t,onKeyDown:se(e.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):Ok.concat($k).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:se(e.onPointerDown,f=>{const d=f.target;d.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(d)?d.focus():r(f)}),onPointerMove:se(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&o(f)}),onPointerUp:se(e.onPointerUp,f=>{const d=f.target;d.hasPointerCapture(f.pointerId)&&(d.releasePointerCapture(f.pointerId),s(f))})})}),Gk="SliderTrack",Kk=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=Jd(Gk,n);return h.jsx(De.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});Kk.displayName=Gk;var Pp="SliderRange",qk=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=Jd(Pp,n),s=Wk(Pp,n),i=p.useRef(null),a=Le(t,i),l=o.values.length,c=o.values.map(d=>Xk(d,o.min,o.max)),u=l>1?Math.min(...c):0,f=100-Math.max(...c);return h.jsx(De.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:a,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:f+"%"}})});qk.displayName=Pp;var kp="SliderThumb",Yk=p.forwardRef((e,t)=>{const n=g7(e.__scopeSlider),[r,o]=p.useState(null),s=Le(t,a=>o(a)),i=p.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return h.jsx(E7,{...e,ref:s,index:i})}),E7=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...s}=e,i=Jd(kp,n),a=Wk(kp,n),[l,c]=p.useState(null),u=Le(t,x=>c(x)),f=l?i.form||!!l.closest("form"):!0,d=bd(l),m=i.values[r],g=m===void 0?0:Xk(m,i.min,i.max),y=b7(r,i.values.length),E=d==null?void 0:d[a.size],w=E?A7(E,g,a.direction):0;return p.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${w}px)`},children:[h.jsx(Ap.ItemSlot,{scope:e.__scopeSlider,children:h.jsx(De.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...s,ref:u,style:m===void 0?{display:"none"}:e.style,onFocus:se(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),f&&h.jsx(C7,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},r)]})});Yk.displayName=kp;var C7=e=>{const{value:t,...n}=e,r=p.useRef(null),o=fg(t);return p.useEffect(()=>{const s=r.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==t&&l){const c=new Event("input",{bubbles:!0});l.call(s,t),s.dispatchEvent(c)}},[o,t]),h.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function S7(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,s)=>o-s)}function Xk(e,t,n){const s=100/(n-t)*(e-t);return cx(s,[0,100])}function b7(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function D7(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function A7(e,t,n){const r=e/2,s=Ax([0,50],[0,r]);return(r-s(t)*n)*n}function P7(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function k7(e,t){if(t>0){const n=P7(e);return Math.min(...n)>=t}return!0}function Ax(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function T7(e){return(String(e).split(".")[1]||"").length}function F7(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Qk=Uk,R7=Kk,M7=qk,N7=Yk;const Zk=p.forwardRef(({className:e,...t},n)=>h.jsxs(Qk,{ref:n,className:ie("relative flex w-full touch-none select-none items-center",e),...t,children:[h.jsx(R7,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:h.jsx(M7,{className:"absolute h-full bg-primary"})}),h.jsx(N7,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Zk.displayName=Qk.displayName;const at=250,Vw=200;function I7({imageUrl:e,onCropComplete:t,onCancel:n,initialCropData:r,initialImageDimensions:o}){const s=p.useRef(null),i=p.useRef(null),a=p.useRef(null),l=p.useRef(!1),c=p.useRef(!1),u=p.useRef(null),f=p.useRef(null),[d,m]=p.useState({x:0,y:0,scale:1}),[g,y]=p.useState(o||{width:0,height:0}),[E,w]=p.useState(!1),[x,v]=p.useState(!1),[C,b]=p.useState(!1),[D,A]=p.useState(.1),[P,F]=p.useState(5),[k,T]=p.useState(!1),[M,_]=p.useState({x:0,y:0,pinchDistance:void 0,imageX:0,imageY:0}),[O,W]=p.useState(null),[j,B]=p.useState(null),[R,N]=p.useState(null),[V,I]=p.useState(null),L=E&&x,H=e!==f.current&&!L,$=G=>!G||typeof G!="object"?!1:"x"in G&&"y"in G&&"w"in G&&"h"in G&&typeof G.x=="number"&&typeof G.y=="number"&&typeof G.w=="number"&&typeof G.h=="number"&&G.w>0&&G.h>0&&G.w===G.h,he=p.useCallback((G,q)=>G<=0||q<=0||at<=0?.1:Math.max(at/G,at/q),[]),de=p.useCallback((G,q)=>G<=0||q<=0||at<=0||Vw<=0?5:Math.max(Math.max(at/G,at/q),at/Vw),[]),Y=p.useCallback((G,q,oe)=>{const le=s.current;if(!E||g.width<=0||g.height<=0)return{x:G,y:q};const me=(le==null?void 0:le.clientWidth)??0,je=(le==null?void 0:le.clientHeight)??0;if(me<=0||je<=0)return{x:G,y:q};const Te=g.width*oe,Ye=g.height*oe,pt=(me-at)/2,Jt=(je-at)/2,jt=pt,on=pt+at-Te,Gt=Jt,xn=Jt+at-Ye,Kt=Te<at?pt+(at-Te)/2:Math.min(jt,Math.max(on,G)),zt=Ye<at?Jt+(at-Ye)/2:Math.min(Gt,Math.max(xn,q));return{x:Kt,y:zt}},[E,g]),re=p.useCallback((G,q)=>{if(!E||!l.current||x||g.width<=0||g.height<=0)return;const oe=g.width,le=g.height,me=he(oe,le),je=de(oe,le);A(me),F(je);let Te,Ye,pt;if($(r)){Te=at/r.w,Te=Math.max(me,Math.min(je,Te));const on=(G-at)/2,Gt=(q-at)/2;Ye=on-r.x*Te,pt=Gt-r.y*Te}else Te=Math.max(at/oe,at/le),Te=Math.max(me,Te),Ye=(G-oe*Te)/2,pt=(q-le*Te)/2;const jt={...Y(Ye,pt,Te),scale:Te};m(jt),v(!0),c.current=!0},[E,x,g,r,he,de,Y]);p.useEffect(()=>(l.current=!0,()=>{l.current=!1,u.current&&u.current.disconnect()}),[]),p.useEffect(()=>{e!==f.current&&(S.log(`[ImprovedImageCropper] Image URL changed: ${f.current||"none"} → ${e}`),w(!1),v(!1),c.current=!1,B(f.current),N(d),I(g),f.current=e,S.log("[ImprovedImageCropper] Reset loader state and stored previous image state"))},[e,d,g]),p.useEffect(()=>{f.current!==e?(f.current&&x?(B(f.current),N(d),I(g)):(B(null),N(null),I(null)),w(!1),v(!1),y(o||{width:0,height:0}),m({x:0,y:0,scale:1}),A(.1),F(5),c.current=!1,b(!1),f.current=e):o&&!x&&(o.width!==g.width||o.height!==g.height)&&y(o)},[e,o]);const fe=p.useCallback(()=>{const G=i.current;if(S.log(`[ImprovedImageCropper] handleImageLoad called for image: ${e}`),!G){S.warn("[ImprovedImageCropper] Image ref is null in handleImageLoad");return}if(!l.current){S.warn("[ImprovedImageCropper] Component unmounted during image load");return}if(G.src!==e){S.warn(`[ImprovedImageCropper] Image src mismatch: ${G.src} vs ${e}`);return}const q=G.naturalWidth,oe=G.naturalHeight;if(S.log(`[ImprovedImageCropper] Image loaded with dimensions: ${q}×${oe}`),q<=0||oe<=0){S.error(`[ImprovedImageCropper] Image has invalid dimensions on load: ${q}×${oe}`),w(!1),v(!1);return}(g.width!==q||g.height!==oe)&&(S.log(`[ImprovedImageCropper] Updating image dimensions: ${g.width}×${g.height} → ${q}×${oe}`),y({width:q,height:oe})),w(!0),S.log("[ImprovedImageCropper] Image successfully loaded and ready")},[e,g]),ke=p.useCallback(()=>{const G=i.current;!G||!l.current||G.src!==e||(S.error(`[Cropper] Image failed to load internally: ${e}`),w(!1),v(!1))},[e]);p.useEffect(()=>{const G=s.current;if(G&&E&&!x){const q=me=>{if(!(!l.current||x))for(const je of me){const{width:Te,height:Ye}=je.contentRect||{width:je.target.clientWidth,height:je.target.clientHeight};Te>0&&Ye>0?re(Te,Ye):S.warn("[Cropper] ResizeObserver triggered with zero dimensions.")}};u.current&&u.current.disconnect(),u.current=new ResizeObserver(q),u.current.observe(G);const oe=G.clientWidth,le=G.clientHeight;return oe>0&&le>0&&re(oe,le),()=>{u.current&&u.current.disconnect(),u.current=null}}else u.current&&(u.current.disconnect(),u.current=null)},[E,x,re]),p.useEffect(()=>{if(E&&x){const{x:G,y:q,scale:oe}=d,le=Y(G,q,oe);(le.x!==G||le.y!==q)&&m(me=>({...me,...le}))}},[d.scale,E,x,Y,d.x,d.y]);const Ae=p.useCallback((G,q,oe)=>{!L||!s.current||m(le=>{let me=le.scale*G;if(me=Math.max(D,Math.min(P,me)),me===le.scale)return le;const je=(q-le.x)/le.scale,Te=(oe-le.y)/le.scale,Ye=q-je*me,pt=oe-Te*me;return{scale:me,...Y(Ye,pt,me)}})},[L,D,P,Y]),ne=(G,q,oe)=>{!L||C||(T(!0),_({x:G,y:q,pinchDistance:oe,imageX:d.x,imageY:d.y}),W(oe??null))},ve=(G,q,oe)=>{if(!(!k||!L||!s.current)){if(oe!==void 0&&O!==null){const le=oe/O,me=s.current.getBoundingClientRect(),je=M.x-me.left,Te=M.y-me.top;Ae(le,je,Te),W(oe)}else if(O===null){const le=G-M.x,me=q-M.y,je=M.imageX+le,Te=M.imageY+me;m(Ye=>({...Ye,...Y(je,Te,Ye.scale)}))}}},ye=()=>{k&&(T(!1),W(null))},pe=G=>ne(G.clientX,G.clientY),He=G=>ve(G.clientX,G.clientY),ct=G=>{if(G.touches.length===2){const q=G.touches[0],oe=G.touches[1],le=Math.hypot(oe.clientX-q.clientX,oe.clientY-q.clientY),me=(q.clientX+oe.clientX)/2,je=(q.clientY+oe.clientY)/2;ne(me,je,le)}else G.touches.length===1&&ne(G.touches[0].clientX,G.touches[0].clientY)},qe=G=>{if(k)if(G.cancelable&&G.preventDefault(),G.touches.length===2){const q=G.touches[0],oe=G.touches[1],le=Math.hypot(oe.clientX-q.clientX,oe.clientY-q.clientY),me=(q.clientX+oe.clientX)/2,je=(q.clientY+oe.clientY)/2;ve(me,je,le)}else G.touches.length===1&&ve(G.touches[0].clientX,G.touches[0].clientY)},Ze=p.useCallback(G=>{if(!L||!s.current||C)return;G.preventDefault();const q=s.current.getBoundingClientRect(),oe=G.clientX-q.left,le=G.clientY-q.top,je=1+G.deltaY*-.005;Ae(je,oe,le)},[L,C,Ae]);p.useEffect(()=>{if(k)return window.addEventListener("mousemove",He),window.addEventListener("touchmove",qe,{passive:!1}),window.addEventListener("mouseup",ye),window.addEventListener("touchend",ye),window.addEventListener("touchcancel",ye),()=>{window.removeEventListener("mousemove",He),window.removeEventListener("touchmove",qe),window.removeEventListener("mouseup",ye),window.removeEventListener("touchend",ye),window.removeEventListener("touchcancel",ye)}},[k,qe]),p.useEffect(()=>{const G=s.current;if(G&&L)return G.addEventListener("wheel",Ze,{passive:!1}),()=>G.removeEventListener("wheel",Ze)},[L,Ze]);const ut=p.useCallback(G=>{if(!s.current||!L||(G=Math.max(D,Math.min(P,G)),G===d.scale))return;const q=s.current,oe=q.clientWidth/2,le=q.clientHeight/2;Ae(G/d.scale,oe,le)},[L,D,P,d.scale,Ae]),ot=()=>ut(d.scale*1.15),et=()=>ut(d.scale/1.15),Tt=G=>ut(G[0]),Ee=()=>{if(v(!1),c.current=!1,m({x:0,y:0,scale:1}),s.current&&E){const G=s.current.clientWidth,q=s.current.clientHeight;G>0&&q>0&&re(G,q)}},We=()=>{S.log("[ImprovedImageCropper] performCrop called");const G=s.current,q=i.current;if(S.log("[ImprovedImageCropper] Checking crop preconditions:",{hasContainer:!!G,isInitialized:x,hasCurrentImage:!!q,naturalWidth:q==null?void 0:q.naturalWidth,naturalHeight:q==null?void 0:q.naturalHeight,imageUrl:e}),!G||!x||!q||!q.naturalWidth||!q.naturalHeight||q.naturalWidth<=0||q.naturalHeight<=0){S.error("[ImprovedImageCropper] Cannot crop: Preconditions fail");return}S.log("[ImprovedImageCropper] Starting crop processing"),b(!0);try{const oe=G.clientWidth,le=G.clientHeight;S.log(`[ImprovedImageCropper] Container dimensions: ${oe}×${le}`);const me=(oe-at)/2,je=(le-at)/2;S.log(`[ImprovedImageCropper] Frame position: (${me}, ${je})`);const Te=me-d.x,Ye=je-d.y,pt=Te/d.scale,Jt=Ye/d.scale;S.log(`[ImprovedImageCropper] Source position (original): (${pt}, ${Jt})`);const jt=at/d.scale,on=at/d.scale;S.log(`[ImprovedImageCropper] Source dimensions (original): ${jt}×${on}`);const Gt=Math.max(0,pt),xn=Math.max(0,Jt),Kt=Math.min(jt,q.naturalWidth-Gt),zt=Math.min(on,q.naturalHeight-xn);if(S.log(`[ImprovedImageCropper] Clamped source: (${Gt}, ${xn}, ${Kt}, ${zt})`),Kt<=0||zt<=0){const hr=`Crop area zero/negative: W=${Kt}, H=${zt}`;throw S.error(`[ImprovedImageCropper] ${hr}`),new Error(hr)}let Xe={x:Math.round(Gt),y:Math.round(xn),w:Math.round(Kt),h:Math.round(zt)};S.log(`[ImprovedImageCropper] Initial crop data: (${Xe.x}, ${Xe.y}, ${Xe.w}, ${Xe.h})`);const Xn=Math.min(Xe.w,Xe.h);if(Xe.w=Xn,Xe.h=Xn,S.log(`[ImprovedImageCropper] Final square crop data: (${Xe.x}, ${Xe.y}, ${Xe.w}, ${Xe.h})`),Xe.w<=0){const hr=`Final crop width <= 0: ${Xe.w}`;throw S.error(`[ImprovedImageCropper] ${hr}`),new Error(hr)}l.current?(S.log("[ImprovedImageCropper] Component still mounted, calling onCropComplete with final crop data"),t(Xe)):S.warn("[ImprovedImageCropper] Component unmounted, skipping onCropComplete call")}catch(oe){S.error("[ImprovedImageCropper] Error during cropping:",oe),oe instanceof Error&&(S.error(`[ImprovedImageCropper] Error message: ${oe.message}`),S.error(`[ImprovedImageCropper] Error stack: ${oe.stack}`))}finally{l.current&&(S.log("[ImprovedImageCropper] Setting isProcessing to false"),b(!1))}},st=H||!x&&!C,Ft=!x&&!C,Pn=!x||C,Yn={position:"absolute",top:0,left:0,maxWidth:"none",maxHeight:"none",willChange:"transform, opacity"},$t={...Yn,transform:`translate(${d.x}px, ${d.y}px) scale(${d.scale})`,opacity:x?1:0,transition:k?"none":"transform 0.1s linear",zIndex:2},Je={...Yn,transform:R?`translate(${R.x}px, ${R.y}px) scale(${R.scale})`:"translate(0px, 0px) scale(1)",opacity:x?0:1,pointerEvents:"none",zIndex:1};return h.jsxs("div",{className:"flex flex-col h-full",children:[h.jsxs("div",{className:"text-center mb-2 flex-shrink-0 relative h-8",children:[h.jsx("h3",{className:"text-lg font-medium absolute left-1/2 top-0 transform -translate-x-1/2",children:"Adjust Image"}),C&&h.jsx("div",{className:"absolute top-0 right-0 mr-2 mt-1 z-30",children:h.jsx(Ut,{className:"h-5 w-5 animate-spin text-muted-foreground"})})]}),h.jsxs("div",{ref:s,className:ie("relative overflow-hidden bg-checkerboard rounded-lg flex-grow w-full","min-h-[250px] select-none touch-none","border border-muted",k?"cursor-grabbing":"cursor-grab"),onMouseDown:pe,onTouchStart:ct,children:[j&&R&&V&&h.jsx("img",{ref:a,src:j,alt:"",className:"absolute transform-gpu origin-top-left block",style:Je,draggable:!1,width:V.width,height:V.height},j+"-prev"),h.jsx("img",{ref:i,src:e,alt:"Crop preview",className:"absolute transform-gpu origin-top-left block",style:$t,onLoad:fe,onError:ke,draggable:!1,loading:"eager"},e),st&&h.jsx("div",{className:"absolute inset-0 z-[5] flex items-center justify-center bg-black/20 pointer-events-none",children:h.jsx(Ut,{className:"h-8 w-8 animate-spin text-white/80"})}),h.jsxs("div",{className:"absolute inset-0 z-[3] pointer-events-none flex items-center justify-center","aria-hidden":"true",children:[" ",h.jsx("div",{className:"absolute inset-0",style:{boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}})," ",h.jsx("div",{className:"absolute border border-white rounded",style:{width:`${at}px`,height:`${at}px`,boxShadow:"0 0 0 9999px transparent"}})," "]})]}),h.jsxs("div",{className:"mt-6 space-y-5 flex-shrink-0",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs(be,{type:"button",variant:"outline",size:"icon",onClick:et,disabled:!L||C||d.scale<=D,className:"h-9 w-9 flex-shrink-0","aria-label":"Zoom out",children:[" ",h.jsx(q8,{className:"h-4 w-4"})," "]}),h.jsx(Zk,{value:[d.scale],min:D,max:P,step:(P-D)/100,onValueChange:Tt,className:"flex-grow",disabled:!L||C,"aria-label":"Zoom slider"}),h.jsxs(be,{type:"button",variant:"outline",size:"icon",onClick:ot,disabled:!L||C||d.scale>=P,className:"h-9 w-9 flex-shrink-0","aria-label":"Zoom in",children:[" ",h.jsx(K8,{className:"h-4 w-4"})," "]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsxs(be,{type:"button",variant:"outline",onClick:n,disabled:C,children:[" ","Cancel"," "]}),h.jsxs("div",{className:"space-x-2",children:[h.jsxs(be,{type:"button",variant:"ghost",onClick:Ee,disabled:!L||C,className:"px-3",children:[" ",h.jsx(H8,{className:"h-4 w-4 mr-2"})," Reset"," "]}),h.jsx(be,{type:"button",variant:"default",onClick:We,disabled:Pn,className:"px-4 w-[110px]",children:C?h.jsxs(h.Fragment,{children:[" ",h.jsx(Ut,{className:"h-4 w-4 mr-2 animate-spin"})," Applying..."," "]}):Ft?h.jsxs(h.Fragment,{children:[" ",h.jsx(Ut,{className:"h-4 w-4 mr-2 animate-spin"})," Loading..."," "]}):h.jsxs(h.Fragment,{children:[" ",h.jsx(ib,{className:"h-4 w-4 mr-2"})," Apply"," "]})})]})]})]})]})}function Uw({open:e,onOpenChange:t,onConfirm:n,title:r,description:o,confirmText:s="Confirm",cancelText:i="Cancel",isConfirming:a=!1}){const l=c=>{c.preventDefault(),a||n()};return h.jsx(_k,{open:e,onOpenChange:t,children:h.jsxs(yx,{children:[h.jsxs(wx,{children:[h.jsx(Cx,{children:r}),h.jsx(Sx,{children:o})]}),h.jsxs(Ex,{children:[h.jsx(Dx,{disabled:a,children:i}),h.jsxs(bx,{onClick:l,disabled:a,className:"bg-red-500 hover:bg-red-600 focus:ring-red-500",children:[a?h.jsx(Ut,{className:"mr-2 h-4 w-4 animate-spin"}):null,a?"Confirming...":s]})]})]})})}const j7=(e,t,n)=>{if(e<=1)return;const r=[];new Set([...Object.keys(t),...Object.keys(n)]).forEach(s=>{const i=t[s],a=n[s];if(i!==a){let l="ref changed";typeof a!="object"&&typeof a!="function"&&(l=`value changed: ${i} -> ${a}`),r.push({key:s,change:l,prev:i,current:a})}}),r.length>0&&S.warn(`[EntryForm Init Effect init-${e}] Re-running due to changed dependencies:`,r.map(s=>s.key))};function H0({entryId:e}){const t=Wr(),{handleSaveEntry:n,getEntryById:r,loadSpecificEntry:o,getPhotoBlobUrl:s,imagesMetadata:i,isSaving:a,shareKeyForForm:l,clearShareKeyForForm:c,deleteSharedFilesFromStorage:u,navigate:f,isLoadingImagesMeta:d,isClientReady:m,activeJournal:g,journalList:y}=t,{toast:E}=Ol(),[w,x]=p.useState(!1),[v,C]=p.useState(null),[b,D]=p.useState(null),[A,P]=p.useState(()=>{const Z=window.location.hash.split("?")[1];let ee=null;if(Z)try{ee=new URLSearchParams(Z).get("date")}catch{}if(ee&&/^\d{4}-\d{2}-\d{2}$/.test(ee))return S.log(`[EntryForm State Init] Initializing date from param: ${ee}`),new Date(ee+"T00:00:00Z");{S.log("[EntryForm State Init] Initializing date to today (UTC).");const ge=new Date;return new Date(Date.UTC(ge.getFullYear(),ge.getMonth(),ge.getDate()))}}),[F,k]=p.useState(!1),[T,M]=p.useState(""),[_,O]=p.useState([]),[W,j]=p.useState(!1),[B,R]=p.useState(null),[N,V]=p.useState(!1),[I,L]=p.useState(null),[H,$]=p.useState(null),[he,de]=p.useState(!0),[Y,re]=p.useState([]),[fe,ke]=p.useState(null),[Ae,ne]=p.useState(!1),[ve,ye]=p.useState(null),[pe,He]=p.useState(null),[ct,qe]=p.useState(!1),[Ze,ut]=p.useState(!1),[ot,et]=p.useState(new Map),Tt=p.useRef(null),Ee=p.useRef(!0),We=p.useRef(new Map),st=p.useRef(new Map),Ft=p.useRef(null),Pn=p.useRef(!1),Yn=p.useRef(null),$t=p.useRef(!1),Je=p.useRef(0),G=p.useRef({}),q=p.useRef(null);Oo.getInstance();const oe=!!e,le=fe!==null&&fe<Y.length,me=a||le||Ae,je=!he&&!me&&!a&&_.length>0&&!N&&Y.length===0&&ct,Te=p.useMemo(()=>{const te=v?v.date:A.toISOString().split("T")[0],Z=v?v.content:"",ee=v?v.photos:[],ge=new Set(ee.map(ce=>ce.photoId));return{date:te,content:Z,photoIds:ge}},[v,A]);p.useEffect(()=>{if(he||d){qe(!1);return}const te=A.toISOString().split("T")[0]!==Te.date,Z=T!==Te.content,ee=new Set(_.map(Ce=>Fn(Ce)?Ce.localId:Ce.photoId)),ge=Te.photoIds;let ce=ee.size!==ge.size;if(!ce){for(const Ce of ee)ge.has(Ce)||(ce=!0);if(!ce)for(const Ce of ge)ee.has(Ce)||(ce=!0)}let Pe=!1;if(v&&!ce){for(const Ce of _)if(!Fn(Ce)){const _e=v.photos.find(Se=>Se.photoId===Ce.photoId);if(_e&&(Ce.crop.x!==_e.crop.x||Ce.crop.y!==_e.crop.y||Ce.crop.w!==_e.crop.w||Ce.crop.h!==_e.crop.h)){Pe=!0;break}}}if(oe)qe(te||Z||ce||Pe);else{const Ce=(()=>{const Ke=window.location.hash.split("?")[1];let tt=null;if(Ke)try{tt=new URLSearchParams(Ke).get("date")}catch{}if(tt&&/^\d{4}-\d{2}-\d{2}$/.test(tt))return tt;{const Ge=new Date;return new Date(Date.UTC(Ge.getFullYear(),Ge.getMonth(),Ge.getDate())).toISOString().split("T")[0]}})(),_e=A.toISOString().split("T")[0]!==Ce;qe(T.trim()!==""||_.length>0||_e)}},[A,T,_,Te.date,Te.content,Te.photoIds,oe,he,d,v]);const Ye=p.useCallback(async te=>{if(!Ee.current||te>=Y.length)return;const Z=Y[te];if(!Z||ot.has(Z.localId))return;Ft.current&&Ft.current.abort();const ee=new AbortController;Ft.current=ee;try{const[ge,ce]=await Promise.all([t1(Z.file),n1(Z.file)]);if(ee.signal.aborted||!Ee.current)return;et(Pe=>new Map(Pe).set(Z.localId,{dims:ge,exif:ce}))}catch(ge){ge.name==="AbortError"||Ee.current&&S.error(`[Prefetch] Error pre-fetching data for index ${te}, file: ${Z.file.name}`,ge)}finally{Ft.current===ee&&(Ft.current=null)}},[Y,ot]),pt=p.useCallback((te,Z=[],ee=!1)=>{if(!te||te.length===0){S.warn("[EntryForm] No files selected");return}S.log("[EntryForm handleFilesSelect] Processing files",{fileCount:te.length,previewUrlCount:Z.length,isFromSharedFiles:ee,blobUrlsCount:We.current.size});const ge=qa-_.length-Y.length;if(S.log(`[EntryForm] Available slots: ${ge} (MAX_PHOTOS: ${qa}, current photos: ${_.length}, queue: ${Y.length})`),te.length>ge&&(S.warn(`[EntryForm] Too many files (${te.length}), limiting to ${ge}`),E({title:"Too many files",description:`You can only add ${ge} more photo(s). Some files were ignored.`,variant:"destructive"}),typeof URL.revokeObjectURL=="function"&&(S.log(`[EntryForm] Revoking excess blob URLs (${Z.length-ge})`),Z.slice(ge).forEach(Pe=>{S.log(`[EntryForm] Revoking excess blob URL: ${Pe}`),URL.revokeObjectURL(Pe)})),te=te.slice(0,ge),Z=Z.slice(0,ge),te.length===0)){S.warn("[EntryForm] No files left after limiting");return}const ce=te.map((Pe,Ce)=>{const _e=crypto.randomUUID(),Se=Z[Ce];return S.log(`[EntryForm] Processing file for queue: ${Pe.name}, type: ${Pe.type}, size: ${Pe.size}`),S.log(`[EntryForm] Generated localId: ${_e} for blob URL: ${Se}`),(!Se||!Se.startsWith("blob:"))&&S.error(`[EntryForm] Invalid blob URL for file ${Pe.name}: ${Se}`),ee&&S.log(`[EntryForm] Using existing blob URL for shared file: ${Se}`),We.current.set(_e,Se),S.log(`[EntryForm] Stored in originalBlobUrlsRef. Current count: ${We.current.size}`),{file:Pe,previewUrl:Se,localId:_e}});S.log(`[EntryForm] Created ${ce.length} new queue items`),re(Pe=>{const Ce=[...Pe,...ce];return S.log(`[EntryForm] ProcessingQueue updated: ${Pe.length} → ${Ce.length} items`),fe===null&&Ce.length>0?(S.log("[EntryForm] Starting queue processing - setting currentQueueIndex to 0"),ke(0),Ce.length>1&&(S.log("[EntryForm] Prefetching next item at index 1"),Ye(1))):S.log(`[EntryForm] Queue processing already in progress, currentQueueIndex: ${fe}`),Ce})},[_.length,Y.length,E,fe,Ye,We]);p.useEffect(()=>{const te={entryId:e,isClientReady:m,isLoadingImagesMeta:d,navigate:f,toast:E,getEntryById:r,loadSpecificEntry:o,getPhotoBlobUrl:s,imagesMetadata:i==null?void 0:i.length,initialEntryId:v==null?void 0:v.id};Je.current++;const Z=Je.current,ee=`init-${Z}`;if(j7(Z,G.current,te),(Z===1||e!==G.current.entryId)&&($t.current=!1),!(m&&!d)){de(!0),G.current=te;return}Ee.current=!0,qe(!1);const ce=()=>{const Se=Je.current;if(S.log(`[EntryForm Init Effect ${Se}] Dependency check complete. Current state:`,{isEditMode:oe,isClientReady:m,isLoadingImagesMeta:d,isRequestingSharedFiles:w,isLoadingData:he,photos:_.length}),l&&!Pn.current){C(null),M(""),j(!1),R(null),ne(!1),ye(null),He(null);return}C(null),M(""),O([]),j(!1),R(null),V(!1),L(null),H&&S.log(`[EntryForm Init Effect ${Se}] Clearing cropperImageUrl: ${H}`),$(null),ne(!1),ye(null),He(null),et(new Map)},Pe=async Se=>{if(S.log(`[EntryForm Init Effect ${ee}] Populate form for entry ID:`,Se.id),!Ee.current)return;let Ke=new Date(Se.date+"T00:00:00Z");if(P(Ke),M(Se.content),C({...Se}),k(!0),S.log(`[EntryForm Init Effect ${ee}] Basic form fields populated. isDateSetByUserIntent: true`),O([]),Se.photos&&Se.photos.length>0){S.log(`[EntryForm Init Effect ${ee}] Loading ${Se.photos.length} photos.`),(!i||i.length===0)&&S.warn(`[EntryForm Init Effect ${ee}] Missing imagesMetadata.`);const tt=Se.photos.map(async Ge=>{const it=(i||[]).find(U=>U.id===Ge.photoId),mt=(it==null?void 0:it.photoMetadata)??null,kn=mt==null?void 0:mt.contentHash;let Rt=null;try{if(Rt=await s(kn,Ge.photoId),!Ee.current)return null;Rt?(We.current.set(Ge.photoId,Rt),mt&&st.current.set(Ge.photoId,mt)):S.warn(`[EntryForm Init Effect ${ee}] No preview URL for photo ${Ge.photoId}`)}catch(U){S.error(`[EntryForm Init Effect ${ee}] Failed getting preview link for photo ${Ge.photoId}:`,U)}const z=Rt===null?void 0:Rt;return z?{...Ge,isNew:!1,localPreviewUrl:z}:null});try{const Ge=await Promise.all(tt);if(!Ee.current)return;const it=Ge.filter(mt=>mt!==null);if(S.log(`[EntryForm Init Effect ${ee}] Setting ${it.length} photos.`),O(it),it.length>0){const mt=st.current.get(it[0].photoId),kn=(mt==null?void 0:mt.exifDate)??null;S.log(`[EntryForm Init Edit] Storing initial EXIF date: ${kn}`),R(kn);const Rt=Ke.toISOString().split("T")[0];let z=!1,U="";if(kn){const[J,X,ae]=kn.split("-").map(Number);!isNaN(J)&&!isNaN(X)&&!isNaN(ae)&&(U=new Date(Date.UTC(J,X-1,ae)).toISOString().split("T")[0],z=Rt!==U)}S.log(`[EntryForm Init Edit] Comparing Form UTC: ${Rt} vs EXIF as UTC: ${U||"N/A"}. Show warning: ${z}`),j(z)}else S.log("[EntryForm Init Edit] No photos, setting initial EXIF null."),R(null),j(!1)}catch(Ge){S.error(`[EntryForm Init Effect ${ee}] Error loading initial photo details:`,Ge),Ee.current&&O([])}}else S.log(`[EntryForm Init Effect ${ee}] Entry has no photos.`),O([]),R(null),j(!1);S.log(`[EntryForm Init Effect ${ee}] populateForm finished.`)},Ce=async()=>{if($t.current){de(!1);return}de(!0),ce();try{if(oe&&e){S.log(`[EntryForm Init Effect ${ee}] EDIT MODE: Initializing for entry ID: ${e}`);let Se;if(Se=r(e)||void 0,Se||(S.log(`[EntryForm Init Effect ${ee}] EDIT MODE: Not in context, loading...`),Se=await o(e)),Se&&Ee.current)await Pe(Se),$t.current=!0;else if(Ee.current){S.error(`[EntryForm Init Effect ${ee}] EDIT MODE: Entry ${e} not found. Redirecting.`),E({title:"Error",description:"Entry not found.",variant:"destructive"}),f("/");return}}else{S.log(`[EntryForm Init Effect ${ee}] NEW MODE: Initializing.`);const Ke=window.location.hash.split("?")[1];let tt=null;if(Ke)try{tt=new URLSearchParams(Ke).get("date")}catch{}let Ge=!1,it;if(tt&&/^\d{4}-\d{2}-\d{2}$/.test(tt))it=new Date(tt+"T00:00:00Z"),Ge=!0,S.log(`[EntryForm Init Effect ${ee}] NEW MODE: Date from param: ${tt}. User intent: true.`);else{const mt=new Date;it=new Date(Date.UTC(mt.getFullYear(),mt.getMonth(),mt.getDate())),Ge=!1,S.log(`[EntryForm Init Effect ${ee}] NEW MODE: Date defaulted to today. User intent: false.`)}P(it),k(Ge),C(null),$t.current=!0}}finally{Ee.current&&de(!1)}};return l&&!Pn.current&&Y.length===0?(S.log(`[EntryForm Init Effect ${ee}] Skipping initializeForm() due to pending shared files that need processing first`),S.log(`[EntryForm Init Effect ${ee}] Setting isLoadingData to false to allow Shared Files Effect to run`),de(!1)):Ce(),G.current=te,()=>{S.log(`[EntryForm Cleanup ${ee}] Cleanup running. CurrentState:`,{isMounted:Ee.current,queueItems:Y.length,shareKey:l?"present":"none",hasProcessedSharedFiles:Pn.current,blobUrlCount:We.current.size,currentQueueIndex:fe,cleanupTimeMs:Date.now()}),Y.length>0&&S.log(`[EntryForm Cleanup ${ee}] ⚠️ ATTENTION: Setting isMountedRef.current=false during active queue processing!`,{queueLength:Y.length,currentQueueIndex:fe,shareKey:l?"present":"none"}),Ee.current=!1,Ft.current&&(Ft.current.abort(),Ft.current=null);const Se=Y.length>0,Ke=l&&!Pn.current;if(Se||Ke){S.log(`[EntryForm Cleanup ${ee}] Skipping URL revocation due to active processing (queue: ${Y.length}, shareKey: ${l?"present":"none"})`);return}}},[e,m,d,r,o,s,i,f,E,l,Y.length]),p.useEffect(()=>{S.log(`[EntryForm Cleanup] Revoking ${We.current.size} URLs:`,Array.from(We.current.entries()).map(([te,Z])=>({id:te,url:Z}))),We.current.forEach((te,Z)=>{try{te&&te.startsWith("blob:")&&(S.log(`[EntryForm Cleanup] Revoking URL for id ${Z}: ${te}`),URL.revokeObjectURL(te))}catch(ee){S.error(`[EntryForm Cleanup] Error revoking URL: ${ee}`)}}),We.current.clear(),st.current.clear()},[]),p.useEffect(()=>{const te=Date.now();if(S.log(`[ShareKey Effect ${te}] Running check.`,{isEditMode:oe,shareKeyForForm:l,isClientReady:m,isRequestingSharedFiles:w,isLoadingData:he,photos:_.length,isMounted:Ee.current}),oe||!l||!m||w||he){S.log(`[ShareKey Effect ${te}] Skipping due to conditions not met`,{isEditMode:oe,hasShareKey:!!l,isClientReady:m,isRequestingSharedFiles:w,isLoadingData:he,blockingCondition:oe?"isEditMode":l?m?w?"alreadyRequesting":he?"isLoadingData":"unknown":"clientNotReady":"noShareKey"});return}S.log(`[ShareKey Effect] Detected shareKeyForForm: ${l}, requesting files`),x(!0);const Z=rp(),ee={type:"GET_STORED_FILES",key:l};return Z.sendMessageToSW(ee).catch(ge=>{S.error("[ShareKey Effect] Failed to send GET_STORED_FILES to SW:",ge),E({title:"Share Error",description:"Could not request shared files from service worker.",variant:"destructive"}),x(!1)}),()=>{S.log("[ShareKey Effect] Cleaning up EntryForm SW message listeners.")}},[l,m,he,oe,w,E]),p.useEffect(()=>{const te=ce=>{if(!ce){S.warn("[ShareKey Effect] Received empty SW message");return}if(S.log(`[ShareKey Effect] Received SW message type: ${ce.type}`,{key:ce.key,filesCount:ce.files?ce.files.length:"none",error:ce.error||"none"}),ce.type==="STORED_FILES_DATA"&&ce.files)if(x(!1),ce.files.length>0){S.log(`[ShareKey Effect] Received ${ce.files.length} shared files:`,{types:ce.files.map(Ce=>Ce.type),sizes:ce.files.map(Ce=>Ce.size),names:ce.files.map(Ce=>Ce.name)});const Pe=ce.files.map(Ce=>URL.createObjectURL(Ce));q.current=l,c(),Yn.current=ce.files,Pn.current=!0,pt(ce.files,Pe,!0)}else S.warn("[ShareKey Effect] Received empty files array"),E({title:"Share Info",description:"No shared files found to process.",variant:"default"}),c();else ce.type==="STORED_FILES_ERROR"&&(x(!1),S.error(`[ShareKey Effect] Error receiving files: ${ce.error}`),E({title:"Share Error",description:`Failed to load shared files: ${ce.error}`,variant:"destructive"}),c())},Z=rp(),ee=Z.registerListener("STORED_FILES_DATA",te),ge=Z.registerListener("STORED_FILES_ERROR",te);return()=>{ee(),ge()}},[E,l,pt,c]),p.useEffect(()=>{const te=Date.now(),Z=q.current!==null&&Y.length>0;if(S.log(`[Queue Effect ${te}] Checking processing conditions:`,{isProcessingQueue:le,isMounted:Ee.current,isProcessingSharedFiles:Z,currentQueueIndex:fe,queueLength:Y.length,pendingShareKey:q.current,originalBlobUrlsCount:We.current.size}),!le||!Ee.current&&!Z){S.log(`[Queue Effect ${te}] Queue processing skipped`,{skipReason:le?!Ee.current&&!Z?"not mounted and not shared files":"unknown":"isProcessingQueue is false",isProcessingQueue:le,isMounted:Ee.current,isProcessingSharedFiles:Z,currentQueueIndex:fe,queueLength:Y.length,pendingShareKey:q.current});return}Z&&S.log("[Queue Effect] Processing shared file queue items",{pendingShareKey:q.current,queueLength:Y.length}),S.log(`[Queue Effect] Processing queue item at index ${fe} of ${Y.length}`);const ee=Y[fe];if(!ee){S.error(`[Queue Effect] No item found at index ${fe} in queue of length ${Y.length}`),Y.length>0&&fe!==null&&(S.warn("[Queue Effect] Invalid queue state detected, resetting queue"),ke(null),re([]),N&&V(!1));return}S.log(`[Queue Effect] Found item to process: file=${ee.file.name}, localId=${ee.localId}, blob=${ee.previewUrl}`),(async()=>{if(!Ee.current&&!Z){S.warn("[Queue Effect] Component unmounted during processing (async start)");return}const ce=ee,{file:Pe,previewUrl:Ce,localId:_e}=ce;S.log(`[Queue Effect] Processing file: ${Pe.name}, type: ${Pe.type}, size: ${Pe.size}`),S.log(`[Queue Effect] Using blob URL: ${Ce}`);let Se=null;ot.has(_e)?(S.log(`[Queue Effect] Using pre-fetched data for ${_e}`),Se=ot.get(_e),et(Ke=>{const tt=new Map(Ke);return tt.delete(_e),tt})):S.log(`[Queue Effect] No pre-fetched data available for ${_e}, will fetch now`);try{S.log(`[Queue Effect] Fetching image dimensions and EXIF data for ${Pe.name}`);const{dims:Ke,exif:tt}=Se??await(async()=>{S.log(`[Queue Effect] Fetching data now for ${Pe.name}`);const Rt=await t1(Pe),z=await n1(Pe);return S.log(`[Queue Effect] Got dimensions: ${Rt.width}×${Rt.height} and EXIF data:`,z),{dims:Rt,exif:z}})();if(!Ee.current&&!Z){S.warn("[Queue Effect] Component unmounted during data fetch");return}S.log(`[Queue Effect] Calculating initial crop for ${Pe.name}`);const Ge=Math.min(Ke.width,Ke.height),it={x:Math.round((Ke.width-Ge)/2),y:Math.round((Ke.height-Ge)/2),w:Math.round(Ge),h:Math.round(Ge)};S.log(`[Queue Effect] Initial crop calculated: x=${it.x}, y=${it.y}, w=${it.w}, h=${it.h}`);const mt={isNew:!0,file:Pe,originalDimensions:Ke,exifData:tt,localPreviewUrl:Ce,localId:_e};if(S.log(`[Queue Effect] Created newPhotoBase object with localId: ${_e}`),S.log(`[Queue Effect] Date Logic check - photos: ${_.length}, initialExifDate: ${B}, isEditMode: ${oe}`),_.length===0&&!B&&!oe){S.log("[Queue Effect - DATE LOGIC] Processing date logic for first photo in new entry");const Rt=tt.exifDate;let z=!1;if(S.log(`[Queue Effect - DATE LOGIC 1] First photo. isDateSetByUserIntent=${F}. Storing initial EXIF date string: ${Rt}`),R(Rt),Rt){S.log(`[Queue Effect - DATE LOGIC] Found EXIF date: ${Rt}, parsing components`);const[U,J,X]=Rt.split("-").map(Number);if(S.log(`[Queue Effect - DATE LOGIC] Parsed components: year=${U}, month=${J}, day=${X}`),!isNaN(U)&&!isNaN(J)&&!isNaN(X)){const ae=new Date(Date.UTC(U,J-1,X)),Fe=ae.toISOString().split("T")[0],xe=A.toISOString().split("T")[0];S.log(`[Queue Effect - DATE LOGIC] Valid date components, created UTC date: ${Fe}`),F?(S.log(`[Queue Effect - DATE LOGIC 2a] User date intent=true. Comparing Form UTC: ${xe} vs EXIF as UTC: ${Fe}`),z=Fe!==xe,S.log(`[Queue Effect - DATE LOGIC 3a] Setting warning: ${z}`)):(S.log(`[Queue Effect - DATE LOGIC 2b] User date intent=false. Setting date to EXIF date: ${Fe}`),P(ae),z=!1,S.log("[Queue Effect - DATE LOGIC 3b] Setting warning: false (auto-set)"))}else S.warn(`[Queue Effect] Invalid date components parsed from EXIF: ${Rt}. Setting warning false.`),z=!1}else S.log("[Queue Effect - DATE LOGIC 2c] No EXIF date found. Setting warning false."),z=!1;S.log(`[Queue Effect - DATE LOGIC 4] Setting final warning state to: ${z}`),j(z)}else S.log("[Queue Effect - DATE LOGIC] Skipping date logic - not first photo or in edit mode");He(mt),L(null),$(Ce),N||V(!0);const kn=fe+1;kn<Y.length&&Ye(kn)}catch(Ke){if(S.error(`[Queue Effect] Error processing queue item ${fe}:`,Ke),E({title:"Error Processing Photo",description:`Could not process: ${Pe.name}. ${Ke instanceof Error?Ke.message:"Unknown error"}`,variant:"destructive"}),typeof URL.revokeObjectURL=="function")try{URL.revokeObjectURL(Ce)}catch{}if(We.current.delete(_e),Ee.current||Z){const tt=fe!==null?fe+1:null;tt!==null&&tt<Y.length?ke(tt):(S.log("[Queue Effect] Last item failed or queue empty. Resetting queue."),ke(null),re([]),N&&V(!1),Z&&(c(),q.current&&(u(q.current),q.current=null)))}}})()},[fe,Y,ot,N,Ye,_.length,B,oe,A,E,F,le,c,u]);const Jt=p.useCallback(te=>{if(!(Ee.current||q.current!==null&&Y.length>0)){S.warn("[EntryForm] handleCropComplete called but component unmounted/not processing shared");return}if(S.log("[EntryForm] handleCropComplete called with crop data:",{newCropData:te,hasPendingNewPhotoData:!!pe,photoIndexToCrop:I,pendingPhotoLocalId:pe==null?void 0:pe.localId,pendingPhotoInfo:pe?{fileName:pe.file.name,fileType:pe.file.type,fileSize:pe.file.size,dimensions:`${pe.originalDimensions.width}×${pe.originalDimensions.height}`,localPreviewUrl:pe.localPreviewUrl}:"none"}),pe){S.log(`[EntryForm] Processing pending new photo with localId: ${pe.localId}`);const ge={...pe,crop:te};S.log(`[EntryForm] Adding new photo to photos array, current count: ${_.length}`),O(ce=>[...ce,ge]),He(null),S.log("[EntryForm] Set pendingNewPhotoData to null")}else I!==null&&(S.log(`[EntryForm] Updating crop for existing photo at index: ${I}`),O(ge=>ge.map((ce,Pe)=>Pe===I?{...ce,crop:te}:ce)));L(null);const ee=fe!==null?fe+1:null;S.log(`[EntryForm] Crop complete. Next queue index: ${ee}. Queue length: ${Y.length}`),ee!==null&&ee<Y.length?(S.log(`[EntryForm] Moving to next item in queue (index ${ee}), cropper stays open`),ke(ee)):(S.log("[EntryForm] Queue processing finished. Clearing queue and closing cropper"),ke(null),re([]),V(!1),q.current&&c()),ee!==null&&ee<Y.length||(S.log("[EntryForm] Scheduling focus on content textarea"),setTimeout(()=>{Tt.current?(Tt.current.focus(),S.log("[EntryForm] Content textarea focused")):S.warn("[EntryForm] Content textarea ref not available")},50))},[fe,Y.length,pe,I,_.length,c]),jt=p.useCallback(()=>{if(!(Ee.current||q.current!==null&&Y.length>0)){S.warn("[EntryForm] handleCropCancel called but component unmounted/not processing shared");return}if(S.log("[EntryForm] handleCropCancel called:",{hasPendingNewPhotoData:!!pe,photoIndexToCrop:I,currentQueueIndex:fe,processingQueueLength:Y.length}),pe){if(S.log(`[EntryForm] Discarding pending new photo with localId: ${pe.localId}`,{fileName:pe.file.name,fileSize:pe.file.size,fileType:pe.file.type,localPreviewUrl:pe.localPreviewUrl}),typeof URL.revokeObjectURL=="function"){S.log(`[EntryForm] [BLOB URL REVOCATION] Revoking blob URL on CROP CANCEL for localId ${pe.localId}: ${pe.localPreviewUrl}`,{revocationReason:"cropCancel",blobUrlsBeforeCount:We.current.size});try{URL.revokeObjectURL(pe.localPreviewUrl),S.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked URL for ${pe.localId}`)}catch(ee){S.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking URL: ${ee}`)}}S.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing URL from originalBlobUrlsRef for localId: ${pe.localId}`),We.current.delete(pe.localId),S.log(`[EntryForm] [BLOB URL LIFECYCLE] BlobUrls count after deletion: ${We.current.size}`),He(null)}L(null);const Z=fe!==null?fe+1:null;Z!==null&&Z<Y.length?ke(Z):(ke(null),re([]),V(!1),q.current&&(c(),u(q.current),q.current=null)),Z!==null&&Z<Y.length||setTimeout(()=>{var ee;return(ee=Tt.current)==null?void 0:ee.focus()},50)},[fe,Y.length,pe,I,c,u]),on=p.useCallback(te=>{const Z=_[te];if(!Z||le||me){S.warn(`[EntryForm] openCropperForPhoto prevented for index ${te}.`,{isProcessingQueue:le,isBusy:me});return}const ee=Fn(Z)?Z.localId:Z.photoId;S.log(`[EntryForm] [BLOB URL USAGE] openCropperForPhoto retrieving URL for index ${te}`,{photoId:ee,isNewPhoto:Fn(Z),photoType:Fn(Z)?"newPhoto":"existingPhoto",blobUrlsCount:We.current.size,photoCount:_.length});const ge=We.current.get(ee);ge?(S.log(`[EntryForm] [BLOB URL USAGE] Found URL for photo ID ${ee}: ${ge}`),L(te),He(null),$(ge),V(!0)):(E({title:"Cannot Edit Crop",description:"Original image data is missing or invalid.",variant:"destructive"}),S.warn(`[EntryForm] Cannot open cropper: original URL missing/invalid for photo index ${te}, id ${ee}`))},[_,le,me,E]),Gt=p.useCallback(te=>{ye(te),ne(!0)},[]),xn=p.useCallback(()=>{var Ce;if(ve===null)return;const te=ve,Z=_[te];if(!Z){S.warn(`[EntryForm] Photo to remove at index ${te} not found.`),ne(!1),ye(null);return}const ee=Fn(Z)?Z.localId:Z.photoId,ge=te===0;let ce=[];S.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing photo id ${ee}`,{wasFirstPhoto:ge,photoType:Fn(Z)?"newPhoto":"existingPhoto",currentPhotosCount:_.length,currentBlobUrlsCount:We.current.size});const Pe=We.current.get(ee);if(typeof URL.revokeObjectURL=="function"&&Pe){S.log(`[EntryForm] [BLOB URL REVOCATION] Revoking original URL on REMOVE CONFIRM for ${ee}: ${Pe}`,{revocationReason:"photoRemoval",blobUrlsBeforeCount:We.current.size});try{URL.revokeObjectURL(Pe),S.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked original URL for ${ee}`)}catch(_e){S.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking original URL on remove: ${_e}`)}}if(typeof URL.revokeObjectURL=="function"&&Z.localPreviewUrl&&Z.localPreviewUrl.startsWith("blob:")&&Z.localPreviewUrl!==Pe){S.log(`[EntryForm] [BLOB URL REVOCATION] Revoking preview URL on REMOVE CONFIRM for ${ee}: ${Z.localPreviewUrl}`,{revocationReason:"photoRemoval",isDifferentFromOriginal:!0});try{URL.revokeObjectURL(Z.localPreviewUrl),S.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked preview URL for ${ee}`)}catch(_e){S.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking preview URL on remove: ${_e}`)}}if(S.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing entries from refs for id: ${ee}`),We.current.delete(ee),Fn(Z)||st.current.delete(Z.photoId),O(_e=>(ce=_e.filter((Se,Ke)=>Ke!==te),ce)),ge&&Ee.current){const _e=ce.length>0?ce[0]:null;let Se=null;if(_e)if(Fn(_e))Se=((Ce=_e.exifData)==null?void 0:Ce.exifDate)??null;else{const it=st.current.get(_e.photoId);Se=(it==null?void 0:it.exifDate)??null}S.log(`[Remove Photo - DATE CHECK 1] First photo removed. New initial EXIF date string: ${Se}`),R(Se);const Ke=A.toISOString().split("T")[0];let tt=!1,Ge="";if(Se){const[it,mt,kn]=Se.split("-").map(Number);!isNaN(it)&&!isNaN(mt)&&!isNaN(kn)&&(Ge=new Date(Date.UTC(it,mt-1,kn)).toISOString().split("T")[0],tt=Ke!==Ge)}S.log(`[Remove Photo - DATE CHECK 2] Comparing Form UTC: ${Ke} vs New EXIF as UTC: ${Ge||"N/A"}. Show warning: ${tt}`),j(tt)}ne(!1),ye(null)},[ve,_,A]),Kt=p.useCallback(()=>{if(B){S.log(`[EntryForm] handleUseExifDate called. Setting date to EXIF: ${B}.`);const[te,Z,ee]=B.split("-").map(Number);P(new Date(Date.UTC(te,Z-1,ee))),S.log("[EntryForm] handleUseExifDate setting warning to false."),j(!1)}},[B]),zt=p.useCallback(te=>{try{const Z=new Date(te.target.value+"T00:00:00Z");if(isNaN(Z.getTime()))S.warn("[EntryForm] Invalid date input received:",te.target.value);else{P(Z);const ee=Z.toISOString().split("T")[0];let ge=!1,ce="";if(B){const[Pe,Ce,_e]=B.split("-").map(Number);!isNaN(Pe)&&!isNaN(Ce)&&!isNaN(_e)&&(ce=new Date(Date.UTC(Pe,Ce-1,_e)).toISOString().split("T")[0],ge=ee!==ce)}S.log(`[handleDateChange - DATE CHECK 1] Date changed to ${te.target.value}. Comparing New Form UTC: ${ee} vs Initial EXIF as UTC: ${ce||"N/A"}. Show warning: ${ge}`),j(ge)}}catch(Z){S.error("[EntryForm] Error processing date change:",Z)}},[B]),Xe=p.useCallback(async()=>{if(S.log("[EntryForm] handleSave called.",{isBusy:me,canSave:je}),me||!je){S.warn("[EntryForm] Save prevented:",{isBusy:me,canSave:je});return}const te={date:A,content:T,photos:_};let Z;!oe&&b&&(Z=b,S.log(`[EntryForm] Using selected target journal: ${Z}`)),await n(te,v,Z)?(S.log("[EntryForm] Save successful, resetting dirty state."),qe(!1),q.current&&(S.log(`[EntryForm] Save successful, cleaning up shared files with key: ${q.current}`),u(q.current),q.current=null,c())):S.warn("[EntryForm] Save failed (returned false).")},[me,je,A,T,_,n,v,u,c]),Xn=p.useCallback(()=>{N?jt():ct?ut(!0):(q.current&&(S.log(`[EntryForm] Canceling clean entry, cleaning up shared files with key: ${q.current}`),u(q.current),q.current=null,c()),f("/"))},[N,ct,f,jt,u,c]),hr=p.useCallback(()=>{ut(!1),qe(!1),q.current&&(S.log(`[EntryForm] Canceling entry, cleaning up shared files with key: ${q.current}`),u(q.current),q.current=null,c()),f("/")},[f,u,c]),hs=p.useCallback(te=>{te.key==="Enter"&&(te.metaKey||te.ctrlKey)&&(te.preventDefault(),je&&!me&&Xe())},[je,me,Xe]);if(he)return S.log("[EntryForm Render] Rendering Loading (Data)..."),h.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[" ",h.jsx(Ut,{className:"h-8 w-8 animate-spin text-primary"})," "]});S.log("[EntryForm Render] Rendering main content. State:",{isCropperOpen:N,isEditMode:oe,photoCount:_.length,queueLength:Y.length,currentQueueIndex:fe,isLoadingData:he,isBusy:me,formDateUTC:A.toISOString().split("T")[0],initialExifDate:B,showExifDateMismatchWarning:W,isDateSetByUserIntent:F});const qt=()=>{var te;if(N&&H){const Z=pe??(I!==null?_[I]:null),ee=Z&&"crop"in Z?Z.crop:void 0;let ge;if(pe&&pe.originalDimensions)ge=pe.originalDimensions;else if(I!==null&&pD(_[I])){const ce=st.current.get(_[I].photoId);ce!=null&&ce.width&&(ce!=null&&ce.height)&&(ge={width:ce.width,height:ce.height})}else I!==null&&Fn(_[I])&&(ge=_[I].originalDimensions);return h.jsx("div",{className:"p-4 md:p-6 flex-grow overflow-hidden flex flex-col",children:h.jsx(I7,{imageUrl:H,onCropComplete:Jt,onCancel:jt,initialCropData:ee,initialImageDimensions:ge})})}else return h.jsxs("div",{className:"space-y-4 p-6 flex-grow overflow-y-auto custom-scrollbar",children:[h.jsx(c7,{photos:_,setPhotos:O,isBusy:me,isLoadingInitial:!1,initialPhotoCount:((te=v==null?void 0:v.photos)==null?void 0:te.length)??0,onOpenCropper:on,onRemovePhoto:Gt,onFilesSelect:pt,originalBlobUrlsRef:We,existingPhotoMetaRef:st,processingQueueLength:Y.length,currentQueueIndex:fe,isProcessingQueueItem:le}),_.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(u7,{date:A,onDateChange:zt,showExifWarning:W,initialExifDate:B,onUseExifDate:Kt,isBusy:me}),h.jsx(d7,{content:T,setContent:M,isBusy:me,onKeyDown:hs,textAreaRef:Tt})]})]})},sn=()=>N?`Adjust Photo${Y.length>0&&fe!==null?` (${fe+1}/${Y.length})`:""}`:oe?"Edit Entry":"New Entry";return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col min-h-screen",children:[h.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md border-b p-4 flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between w-full",children:[h.jsxs(be,{variant:"ghost",size:"icon",onClick:Xn,disabled:me&&!N,"aria-label":N?"Cancel Crop":"Go Back",children:[" ",h.jsx(sb,{className:"h-5 w-5"})," "]}),h.jsx("h1",{className:"text-lg font-semibold",children:sn()}),h.jsxs(be,{variant:"ghost",size:"icon",onClick:Xn,disabled:me&&!N,"aria-label":"Close",children:[" ",h.jsx(wd,{className:"h-5 w-5"})," "]})]}),!N&&!oe&&g&&y.length>0&&h.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[h.jsx("span",{className:"mr-2",children:"Journal:"}),h.jsx("select",{className:"p-1 rounded border text-sm",value:b||g.id,onChange:te=>D(te.target.value),disabled:me,children:y.map(te=>h.jsxs("option",{value:te.id,children:[te.name," ",te.id===g.id?"(Active)":""]},te.id))})]}),!N&&oe&&v&&h.jsx("div",{className:"mt-2 text-sm",children:h.jsxs("span",{className:"text-muted-foreground",children:["Editing entry in journal: ",(g==null?void 0:g.name)||"Unknown Journal"]})})]}),h.jsxs("main",{className:"flex flex-col flex-grow overflow-hidden",children:[qt(),!N&&h.jsx("div",{className:"p-4 border-t",children:h.jsx(f7,{isBusy:me,isSaving:a,isEditMode:oe,canSave:je,onCancel:Xn,onSave:Xe})})]})]}),h.jsx(Uw,{open:Ae,onOpenChange:ne,onConfirm:xn,title:"Remove Photo?",description:"Are you sure you want to remove this photo from the entry?",confirmText:"Remove",isConfirming:a}),h.jsx(Uw,{open:Ze,onOpenChange:ut,onConfirm:hr,title:"Discard Changes?",description:"You have unsaved changes. Are you sure you want to discard them and go back?",confirmText:"Discard"})]})}function _7(){return S.log("[App] Using hook:",np),h.jsx(kR,{client:RR,children:h.jsx(K_,{children:h.jsxs(r3,{children:[h.jsx(SS,{hook:np,children:h.jsxs(oR,{children:[h.jsx(qs,{path:"/",component:zw}),h.jsx(qs,{path:"/month/:year/:month",component:zw}),h.jsx(qs,{path:"/entry",children:h.jsx(H0,{})}),h.jsx(qs,{path:"/entry/new",children:h.jsx(H0,{})}),h.jsx(qs,{path:"/entry/edit/:id",children:e=>h.jsx(H0,{entryId:e.id})}),h.jsx(qs,{children:()=>h.jsx(c3,{})})]})}),h.jsx(RM,{})]})})})}fS(document.getElementById("root")).render(h.jsx(Q_,{attribute:"class",children:h.jsx(_7,{})}));
