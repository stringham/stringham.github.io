var xy=e=>{throw TypeError(e)};var PP=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gd=(e,t,n)=>t.has(e)||xy("Cannot "+n);var V=(e,t,n)=>(gd(e,t,"read from private field"),n?n.call(e):t.get(e)),ze=(e,t,n)=>t.has(e)?xy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Pe=(e,t,n,r)=>(gd(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Vt=(e,t,n)=>(gd(e,t,"access private method"),n);var Sl=(e,t,n,r)=>({set _(o){Pe(e,t,o,n)},get _(){return V(e,t,r)}});var b3=PP((O3,AP)=>{function kP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cx={exports:{}},yu={},ux={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),MP=Symbol.for("react.portal"),RP=Symbol.for("react.fragment"),IP=Symbol.for("react.strict_mode"),_P=Symbol.for("react.profiler"),NP=Symbol.for("react.provider"),LP=Symbol.for("react.context"),FP=Symbol.for("react.forward_ref"),OP=Symbol.for("react.suspense"),jP=Symbol.for("react.memo"),$P=Symbol.for("react.lazy"),Sy=Symbol.iterator;function UP(e){return e===null||typeof e!="object"?null:(e=Sy&&e[Sy]||e["@@iterator"],typeof e=="function"?e:null)}var dx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fx=Object.assign,hx={};function Di(e,t,n){this.props=e,this.context=t,this.refs=hx,this.updater=n||dx}Di.prototype.isReactComponent={};Di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function px(){}px.prototype=Di.prototype;function Cp(e,t,n){this.props=e,this.context=t,this.refs=hx,this.updater=n||dx}var Tp=Cp.prototype=new px;Tp.constructor=Cp;fx(Tp,Di.prototype);Tp.isPureReactComponent=!0;var by=Array.isArray,mx=Object.prototype.hasOwnProperty,Dp={current:null},gx={key:!0,ref:!0,__self:!0,__source:!0};function yx(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)mx.call(t,r)&&!gx.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Za,type:e,key:s,ref:i,props:o,_owner:Dp.current}}function VP(e,t){return{$$typeof:Za,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ap(e){return typeof e=="object"&&e!==null&&e.$$typeof===Za}function BP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ey=/\/+/g;function yd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BP(""+e.key):t.toString(36)}function tc(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Za:case MP:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+yd(i,0):r,by(o)?(n="",e!=null&&(n=e.replace(Ey,"$&/")+"/"),tc(o,t,n,"",function(c){return c})):o!=null&&(Ap(o)&&(o=VP(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Ey,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",by(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+yd(s,a);i+=tc(s,t,n,l,o)}else if(l=UP(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+yd(s,a++),i+=tc(s,t,n,l,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function bl(e,t,n){if(e==null)return e;var r=[],o=0;return tc(e,r,"","",function(s){return t.call(n,s,o++)}),r}function zP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},nc={transition:null},qP={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:nc,ReactCurrentOwner:Dp};function vx(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:bl,forEach:function(e,t,n){bl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bl(e,function(){t++}),t},toArray:function(e){return bl(e,function(t){return t})||[]},only:function(e){if(!Ap(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=Di;Me.Fragment=RP;Me.Profiler=_P;Me.PureComponent=Cp;Me.StrictMode=IP;Me.Suspense=OP;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qP;Me.act=vx;Me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fx({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Dp.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)mx.call(t,l)&&!gx.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Za,type:e.type,key:o,ref:s,props:r,_owner:i}};Me.createContext=function(e){return e={$$typeof:LP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:NP,_context:e},e.Consumer=e};Me.createElement=yx;Me.createFactory=function(e){var t=yx.bind(null,e);return t.type=e,t};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:FP,render:e}};Me.isValidElement=Ap;Me.lazy=function(e){return{$$typeof:$P,_payload:{_status:-1,_result:e},_init:zP}};Me.memo=function(e,t){return{$$typeof:jP,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=nc.transition;nc.transition={};try{e()}finally{nc.transition=t}};Me.unstable_act=vx;Me.useCallback=function(e,t){return rn.current.useCallback(e,t)};Me.useContext=function(e){return rn.current.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};Me.useEffect=function(e,t){return rn.current.useEffect(e,t)};Me.useId=function(){return rn.current.useId()};Me.useImperativeHandle=function(e,t,n){return rn.current.useImperativeHandle(e,t,n)};Me.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return rn.current.useMemo(e,t)};Me.useReducer=function(e,t,n){return rn.current.useReducer(e,t,n)};Me.useRef=function(e){return rn.current.useRef(e)};Me.useState=function(e){return rn.current.useState(e)};Me.useSyncExternalStore=function(e,t,n){return rn.current.useSyncExternalStore(e,t,n)};Me.useTransition=function(){return rn.current.useTransition()};Me.version="18.3.1";ux.exports=Me;var f=ux.exports;const At=Ep(f),wx=kP({__proto__:null,default:At},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WP=f,HP=Symbol.for("react.element"),GP=Symbol.for("react.fragment"),KP=Object.prototype.hasOwnProperty,YP=WP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QP={key:!0,ref:!0,__self:!0,__source:!0};function xx(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)KP.call(t,r)&&!QP.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:HP,type:e,key:s,ref:i,props:o,_owner:YP.current}}yu.Fragment=GP;yu.jsx=xx;yu.jsxs=xx;cx.exports=yu;var p=cx.exports,Sx={exports:{}},Cn={},bx={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,R){var F=k.length;k.push(R);e:for(;0<F;){var W=F-1>>>1,J=k[W];if(0<o(J,R))k[W]=R,k[F]=J,F=W;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var R=k[0],F=k.pop();if(F!==R){k[0]=F;e:for(var W=0,J=k.length,be=J>>>1;W<be;){var se=2*(W+1)-1,Ye=k[se],te=se+1,ge=k[te];if(0>o(Ye,F))te<J&&0>o(ge,Ye)?(k[W]=ge,k[te]=F,W=te):(k[W]=Ye,k[se]=F,W=se);else if(te<J&&0>o(ge,F))k[W]=ge,k[te]=F,W=te;else break e}}return R}function o(k,R){var F=k.sortIndex-R.sortIndex;return F!==0?F:k.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],d=1,u=null,h=3,w=!1,y=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=k)r(c),R.sortIndex=R.expirationTime,t(l,R);else break;R=n(c)}}function E(k){if(x=!1,S(k),!y)if(n(l)!==null)y=!0,_(C);else{var R=n(c);R!==null&&L(E,R.startTime-k)}}function C(k,R){y=!1,x&&(x=!1,g(P),P=-1),w=!0;var F=h;try{for(S(R),u=n(l);u!==null&&(!(u.expirationTime>R)||k&&!O());){var W=u.callback;if(typeof W=="function"){u.callback=null,h=u.priorityLevel;var J=W(u.expirationTime<=R);R=e.unstable_now(),typeof J=="function"?u.callback=J:u===n(l)&&r(l),S(R)}else r(l);u=n(l)}if(u!==null)var be=!0;else{var se=n(c);se!==null&&L(E,se.startTime-R),be=!1}return be}finally{u=null,h=F,w=!1}}var T=!1,A=null,P=-1,M=5,I=-1;function O(){return!(e.unstable_now()-I<M)}function N(){if(A!==null){var k=e.unstable_now();I=k;var R=!0;try{R=A(!0,k)}finally{R?U():(T=!1,A=null)}}else T=!1}var U;if(typeof v=="function")U=function(){v(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=N,U=function(){q.postMessage(null)}}else U=function(){b(N,0)};function _(k){A=k,T||(T=!0,U())}function L(k,R){P=b(function(){k(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){y||w||(y=!0,_(C))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(k){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var F=h;h=R;try{return k()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,R){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=h;h=k;try{return R()}finally{h=F}},e.unstable_scheduleCallback=function(k,R,F){var W=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?W+F:W):F=W,k){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=F+J,k={id:d++,callback:R,priorityLevel:k,startTime:F,expirationTime:J,sortIndex:-1},F>W?(k.sortIndex=F,t(c,k),n(l)===null&&k===n(c)&&(x?(g(P),P=-1):x=!0,L(E,F-W))):(k.sortIndex=J,t(l,k),y||w||(y=!0,_(C))),k},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(k){var R=h;return function(){var F=h;h=R;try{return k.apply(this,arguments)}finally{h=F}}}})(Ex);bx.exports=Ex;var XP=bx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZP=f,bn=XP;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cx=new Set,va={};function ls(e,t){ui(e,t),ui(e+"Capture",t)}function ui(e,t){for(va[e]=t,e=0;e<t.length;e++)Cx.add(t[e])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uf=Object.prototype.hasOwnProperty,JP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cy={},Ty={};function ek(e){return Uf.call(Ty,e)?!0:Uf.call(Cy,e)?!1:JP.test(e)?Ty[e]=!0:(Cy[e]=!0,!1)}function tk(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nk(e,t,n,r){if(t===null||typeof t>"u"||tk(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$t[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$t[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$t[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$t[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$t[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$t[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$t[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$t[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$t[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pp=/[\-:]([a-z])/g;function kp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pp,kp);$t[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pp,kp);$t[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pp,kp);$t[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$t[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});$t.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$t[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mp(e,t,n,r){var o=$t.hasOwnProperty(t)?$t[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nk(t,n,o,r)&&(n=null),r||o===null?ek(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Br=ZP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),Rp=Symbol.for("react.strict_mode"),Vf=Symbol.for("react.profiler"),Tx=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Ip=Symbol.for("react.forward_ref"),Bf=Symbol.for("react.suspense"),zf=Symbol.for("react.suspense_list"),_p=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),Ax=Symbol.for("react.offscreen"),Dy=Symbol.iterator;function Li(e){return e===null||typeof e!="object"?null:(e=Dy&&e[Dy]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Object.assign,vd;function Yi(e){if(vd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vd=t&&t[1]||""}return`
`+vd+e}var wd=!1;function xd(e,t){if(!e||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Yi(e):""}function rk(e){switch(e.tag){case 5:return Yi(e.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 2:case 15:return e=xd(e.type,!1),e;case 11:return e=xd(e.type.render,!1),e;case 1:return e=xd(e.type,!0),e;default:return""}}function qf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Es:return"Fragment";case bs:return"Portal";case Vf:return"Profiler";case Rp:return"StrictMode";case Bf:return"Suspense";case zf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dx:return(e.displayName||"Context")+".Consumer";case Tx:return(e._context.displayName||"Context")+".Provider";case Ip:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _p:return t=e.displayName||null,t!==null?t:qf(e.type)||"Memo";case Xr:t=e._payload,e=e._init;try{return qf(e(t))}catch{}}return null}function ok(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qf(t);case 8:return t===Rp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Px(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sk(e){var t=Px(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cl(e){e._valueTracker||(e._valueTracker=sk(e))}function kx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Px(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ec(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wf(e,t){var n=t.checked;return gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ay(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Mx(e,t){t=t.checked,t!=null&&Mp(e,"checked",t,!1)}function Hf(e,t){Mx(e,t);var n=xo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Gf(e,t.type,xo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Py(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Gf(e,t,n){(t!=="number"||Ec(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Qi=Array.isArray;function Vs(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xo(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Kf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ky(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(Qi(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xo(n)}}function Rx(e,t){var n=xo(t.value),r=xo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function My(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ix(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ix(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tl,_x=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ik=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(e){ik.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ra[t]=ra[e]})});function Nx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ra.hasOwnProperty(e)&&ra[e]?(""+t).trim():t+"px"}function Lx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Nx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var ak=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qf(e,t){if(t){if(ak[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Xf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=null;function Np(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jf=null,Bs=null,zs=null;function Ry(e){if(e=tl(e)){if(typeof Jf!="function")throw Error(K(280));var t=e.stateNode;t&&(t=bu(t),Jf(e.stateNode,e.type,t))}}function Fx(e){Bs?zs?zs.push(e):zs=[e]:Bs=e}function Ox(){if(Bs){var e=Bs,t=zs;if(zs=Bs=null,Ry(e),t)for(e=0;e<t.length;e++)Ry(t[e])}}function jx(e,t){return e(t)}function $x(){}var Sd=!1;function Ux(e,t,n){if(Sd)return e(t,n);Sd=!0;try{return jx(e,t,n)}finally{Sd=!1,(Bs!==null||zs!==null)&&($x(),Ox())}}function xa(e,t){var n=e.stateNode;if(n===null)return null;var r=bu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var eh=!1;if(Lr)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){eh=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{eh=!1}function lk(e,t,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var oa=!1,Cc=null,Tc=!1,th=null,ck={onError:function(e){oa=!0,Cc=e}};function uk(e,t,n,r,o,s,i,a,l){oa=!1,Cc=null,lk.apply(ck,arguments)}function dk(e,t,n,r,o,s,i,a,l){if(uk.apply(this,arguments),oa){if(oa){var c=Cc;oa=!1,Cc=null}else throw Error(K(198));Tc||(Tc=!0,th=c)}}function cs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Vx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Iy(e){if(cs(e)!==e)throw Error(K(188))}function fk(e){var t=e.alternate;if(!t){if(t=cs(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Iy(o),e;if(s===r)return Iy(o),t;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function Bx(e){return e=fk(e),e!==null?zx(e):null}function zx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zx(e);if(t!==null)return t;e=e.sibling}return null}var qx=bn.unstable_scheduleCallback,_y=bn.unstable_cancelCallback,hk=bn.unstable_shouldYield,pk=bn.unstable_requestPaint,Tt=bn.unstable_now,mk=bn.unstable_getCurrentPriorityLevel,Lp=bn.unstable_ImmediatePriority,Wx=bn.unstable_UserBlockingPriority,Dc=bn.unstable_NormalPriority,gk=bn.unstable_LowPriority,Hx=bn.unstable_IdlePriority,vu=null,fr=null;function yk(e){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(vu,e,void 0,(e.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:xk,vk=Math.log,wk=Math.LN2;function xk(e){return e>>>=0,e===0?32:31-(vk(e)/wk|0)|0}var Dl=64,Al=4194304;function Xi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ac(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Xi(a):(s&=i,s!==0&&(r=Xi(s)))}else i=n&~o,i!==0?r=Xi(i):s!==0&&(r=Xi(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Yn(t),o=1<<n,r|=e[n],t&=~o;return r}function Sk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Yn(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=Sk(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function nh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gx(){var e=Dl;return Dl<<=1,!(Dl&4194240)&&(Dl=64),e}function bd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ja(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yn(t),e[t]=n}function Ek(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Yn(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Fp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Yn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ke=0;function Kx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yx,Op,Qx,Xx,Zx,rh=!1,Pl=[],co=null,uo=null,fo=null,Sa=new Map,ba=new Map,Jr=[],Ck="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ny(e,t){switch(e){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":Sa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(t.pointerId)}}function Oi(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=tl(t),t!==null&&Op(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Tk(e,t,n,r,o){switch(t){case"focusin":return co=Oi(co,e,t,n,r,o),!0;case"dragenter":return uo=Oi(uo,e,t,n,r,o),!0;case"mouseover":return fo=Oi(fo,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return Sa.set(s,Oi(Sa.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,ba.set(s,Oi(ba.get(s)||null,e,t,n,r,o)),!0}return!1}function Jx(e){var t=Uo(e.target);if(t!==null){var n=cs(t);if(n!==null){if(t=n.tag,t===13){if(t=Vx(n),t!==null){e.blockedOn=t,Zx(e.priority,function(){Qx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Zf=r,n.target.dispatchEvent(r),Zf=null}else return t=tl(n),t!==null&&Op(t),e.blockedOn=n,!1;t.shift()}return!0}function Ly(e,t,n){rc(e)&&n.delete(t)}function Dk(){rh=!1,co!==null&&rc(co)&&(co=null),uo!==null&&rc(uo)&&(uo=null),fo!==null&&rc(fo)&&(fo=null),Sa.forEach(Ly),ba.forEach(Ly)}function ji(e,t){e.blockedOn===t&&(e.blockedOn=null,rh||(rh=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,Dk)))}function Ea(e){function t(o){return ji(o,e)}if(0<Pl.length){ji(Pl[0],e);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(co!==null&&ji(co,e),uo!==null&&ji(uo,e),fo!==null&&ji(fo,e),Sa.forEach(t),ba.forEach(t),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)Jx(n),n.blockedOn===null&&Jr.shift()}var qs=Br.ReactCurrentBatchConfig,Pc=!0;function Ak(e,t,n,r){var o=Ke,s=qs.transition;qs.transition=null;try{Ke=1,jp(e,t,n,r)}finally{Ke=o,qs.transition=s}}function Pk(e,t,n,r){var o=Ke,s=qs.transition;qs.transition=null;try{Ke=4,jp(e,t,n,r)}finally{Ke=o,qs.transition=s}}function jp(e,t,n,r){if(Pc){var o=oh(e,t,n,r);if(o===null)Id(e,t,r,kc,n),Ny(e,r);else if(Tk(o,e,t,n,r))r.stopPropagation();else if(Ny(e,r),t&4&&-1<Ck.indexOf(e)){for(;o!==null;){var s=tl(o);if(s!==null&&Yx(s),s=oh(e,t,n,r),s===null&&Id(e,t,r,kc,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Id(e,t,r,null,n)}}var kc=null;function oh(e,t,n,r){if(kc=null,e=Np(r),e=Uo(e),e!==null)if(t=cs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Vx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kc=e,null}function eS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mk()){case Lp:return 1;case Wx:return 4;case Dc:case gk:return 16;case Hx:return 536870912;default:return 16}default:return 16}}var io=null,$p=null,oc=null;function tS(){if(oc)return oc;var e,t=$p,n=t.length,r,o="value"in io?io.value:io.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return oc=o.slice(e,1<r?1-r:void 0)}function sc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kl(){return!0}function Fy(){return!1}function Tn(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kl:Fy,this.isPropagationStopped=Fy,this}return gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),t}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Up=Tn(Ai),el=gt({},Ai,{view:0,detail:0}),kk=Tn(el),Ed,Cd,$i,wu=gt({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$i&&($i&&e.type==="mousemove"?(Ed=e.screenX-$i.screenX,Cd=e.screenY-$i.screenY):Cd=Ed=0,$i=e),Ed)},movementY:function(e){return"movementY"in e?e.movementY:Cd}}),Oy=Tn(wu),Mk=gt({},wu,{dataTransfer:0}),Rk=Tn(Mk),Ik=gt({},el,{relatedTarget:0}),Td=Tn(Ik),_k=gt({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Nk=Tn(_k),Lk=gt({},Ai,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fk=Tn(Lk),Ok=gt({},Ai,{data:0}),jy=Tn(Ok),jk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$k={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Uk[e])?!!t[e]:!1}function Vp(){return Vk}var Bk=gt({},el,{key:function(e){if(e.key){var t=jk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$k[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vp,charCode:function(e){return e.type==="keypress"?sc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zk=Tn(Bk),qk=gt({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$y=Tn(qk),Wk=gt({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vp}),Hk=Tn(Wk),Gk=gt({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kk=Tn(Gk),Yk=gt({},wu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qk=Tn(Yk),Xk=[9,13,27,32],Bp=Lr&&"CompositionEvent"in window,sa=null;Lr&&"documentMode"in document&&(sa=document.documentMode);var Zk=Lr&&"TextEvent"in window&&!sa,nS=Lr&&(!Bp||sa&&8<sa&&11>=sa),Uy=" ",Vy=!1;function rS(e,t){switch(e){case"keyup":return Xk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cs=!1;function Jk(e,t){switch(e){case"compositionend":return oS(t);case"keypress":return t.which!==32?null:(Vy=!0,Uy);case"textInput":return e=t.data,e===Uy&&Vy?null:e;default:return null}}function eM(e,t){if(Cs)return e==="compositionend"||!Bp&&rS(e,t)?(e=tS(),oc=$p=io=null,Cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nS&&t.locale!=="ko"?null:t.data;default:return null}}var tM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function By(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tM[e.type]:t==="textarea"}function sS(e,t,n,r){Fx(r),t=Mc(t,"onChange"),0<t.length&&(n=new Up("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ia=null,Ca=null;function nM(e){gS(e,0)}function xu(e){var t=As(e);if(kx(t))return e}function rM(e,t){if(e==="change")return t}var iS=!1;if(Lr){var Dd;if(Lr){var Ad="oninput"in document;if(!Ad){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),Ad=typeof zy.oninput=="function"}Dd=Ad}else Dd=!1;iS=Dd&&(!document.documentMode||9<document.documentMode)}function qy(){ia&&(ia.detachEvent("onpropertychange",aS),Ca=ia=null)}function aS(e){if(e.propertyName==="value"&&xu(Ca)){var t=[];sS(t,Ca,e,Np(e)),Ux(nM,t)}}function oM(e,t,n){e==="focusin"?(qy(),ia=t,Ca=n,ia.attachEvent("onpropertychange",aS)):e==="focusout"&&qy()}function sM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xu(Ca)}function iM(e,t){if(e==="click")return xu(t)}function aM(e,t){if(e==="input"||e==="change")return xu(t)}function lM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zn=typeof Object.is=="function"?Object.is:lM;function Ta(e,t){if(Zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Uf.call(t,o)||!Zn(e[o],t[o]))return!1}return!0}function Wy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hy(e,t){var n=Wy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wy(n)}}function lS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cS(){for(var e=window,t=Ec();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ec(e.document)}return t}function zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cM(e){var t=cS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lS(n.ownerDocument.documentElement,n)){if(r!==null&&zp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Hy(n,s);var i=Hy(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uM=Lr&&"documentMode"in document&&11>=document.documentMode,Ts=null,sh=null,aa=null,ih=!1;function Gy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ih||Ts==null||Ts!==Ec(r)||(r=Ts,"selectionStart"in r&&zp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),aa&&Ta(aa,r)||(aa=r,r=Mc(sh,"onSelect"),0<r.length&&(t=new Up("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ts)))}function Ml(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ds={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},Pd={},uS={};Lr&&(uS=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function Su(e){if(Pd[e])return Pd[e];if(!Ds[e])return e;var t=Ds[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uS)return Pd[e]=t[n];return e}var dS=Su("animationend"),fS=Su("animationiteration"),hS=Su("animationstart"),pS=Su("transitionend"),mS=new Map,Ky="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(e,t){mS.set(e,t),ls(t,[e])}for(var kd=0;kd<Ky.length;kd++){var Md=Ky[kd],dM=Md.toLowerCase(),fM=Md[0].toUpperCase()+Md.slice(1);Ao(dM,"on"+fM)}Ao(dS,"onAnimationEnd");Ao(fS,"onAnimationIteration");Ao(hS,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao(pS,"onTransitionEnd");ui("onMouseEnter",["mouseout","mouseover"]);ui("onMouseLeave",["mouseout","mouseover"]);ui("onPointerEnter",["pointerout","pointerover"]);ui("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function Yy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,dk(r,t,void 0,e),e.currentTarget=null}function gS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;Yy(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;Yy(o,a,c),s=l}}}if(Tc)throw e=th,Tc=!1,th=null,e}function rt(e,t){var n=t[dh];n===void 0&&(n=t[dh]=new Set);var r=e+"__bubble";n.has(r)||(yS(t,e,2,!1),n.add(r))}function Rd(e,t,n){var r=0;t&&(r|=4),yS(n,e,r,t)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function Da(e){if(!e[Rl]){e[Rl]=!0,Cx.forEach(function(n){n!=="selectionchange"&&(hM.has(n)||Rd(n,!1,e),Rd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rl]||(t[Rl]=!0,Rd("selectionchange",!1,t))}}function yS(e,t,n,r){switch(eS(t)){case 1:var o=Ak;break;case 4:o=Pk;break;default:o=jp}n=o.bind(null,t,n,e),o=void 0,!eh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Id(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=Uo(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}Ux(function(){var c=s,d=Np(n),u=[];e:{var h=mS.get(e);if(h!==void 0){var w=Up,y=e;switch(e){case"keypress":if(sc(n)===0)break e;case"keydown":case"keyup":w=zk;break;case"focusin":y="focus",w=Td;break;case"focusout":y="blur",w=Td;break;case"beforeblur":case"afterblur":w=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Rk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Hk;break;case dS:case fS:case hS:w=Nk;break;case pS:w=Kk;break;case"scroll":w=kk;break;case"wheel":w=Qk;break;case"copy":case"cut":case"paste":w=Fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=$y}var x=(t&4)!==0,b=!x&&e==="scroll",g=x?h!==null?h+"Capture":null:h;x=[];for(var v=c,S;v!==null;){S=v;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=xa(v,g),E!=null&&x.push(Aa(v,E,S)))),b)break;v=v.return}0<x.length&&(h=new w(h,y,null,n,d),u.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&n!==Zf&&(y=n.relatedTarget||n.fromElement)&&(Uo(y)||y[Fr]))break e;if((w||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,w?(y=n.relatedTarget||n.toElement,w=c,y=y?Uo(y):null,y!==null&&(b=cs(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(w=null,y=c),w!==y)){if(x=Oy,E="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(x=$y,E="onPointerLeave",g="onPointerEnter",v="pointer"),b=w==null?h:As(w),S=y==null?h:As(y),h=new x(E,v+"leave",w,n,d),h.target=b,h.relatedTarget=S,E=null,Uo(d)===c&&(x=new x(g,v+"enter",y,n,d),x.target=S,x.relatedTarget=b,E=x),b=E,w&&y)t:{for(x=w,g=y,v=0,S=x;S;S=hs(S))v++;for(S=0,E=g;E;E=hs(E))S++;for(;0<v-S;)x=hs(x),v--;for(;0<S-v;)g=hs(g),S--;for(;v--;){if(x===g||g!==null&&x===g.alternate)break t;x=hs(x),g=hs(g)}x=null}else x=null;w!==null&&Qy(u,h,w,x,!1),y!==null&&b!==null&&Qy(u,b,y,x,!0)}}e:{if(h=c?As(c):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var C=rM;else if(By(h))if(iS)C=aM;else{C=sM;var T=oM}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=iM);if(C&&(C=C(e,c))){sS(u,C,n,d);break e}T&&T(e,h,c),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&Gf(h,"number",h.value)}switch(T=c?As(c):window,e){case"focusin":(By(T)||T.contentEditable==="true")&&(Ts=T,sh=c,aa=null);break;case"focusout":aa=sh=Ts=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,Gy(u,n,d);break;case"selectionchange":if(uM)break;case"keydown":case"keyup":Gy(u,n,d)}var A;if(Bp)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Cs?rS(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(nS&&n.locale!=="ko"&&(Cs||P!=="onCompositionStart"?P==="onCompositionEnd"&&Cs&&(A=tS()):(io=d,$p="value"in io?io.value:io.textContent,Cs=!0)),T=Mc(c,P),0<T.length&&(P=new jy(P,e,null,n,d),u.push({event:P,listeners:T}),A?P.data=A:(A=oS(n),A!==null&&(P.data=A)))),(A=Zk?Jk(e,n):eM(e,n))&&(c=Mc(c,"onBeforeInput"),0<c.length&&(d=new jy("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=A))}gS(u,t)})}function Aa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mc(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=xa(e,n),s!=null&&r.unshift(Aa(e,s,o)),s=xa(e,t),s!=null&&r.push(Aa(e,s,o))),e=e.return}return r}function hs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qy(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=xa(n,s),l!=null&&i.unshift(Aa(n,l,a))):o||(l=xa(n,s),l!=null&&i.push(Aa(n,l,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var pM=/\r\n?/g,mM=/\u0000|\uFFFD/g;function Xy(e){return(typeof e=="string"?e:""+e).replace(pM,`
`).replace(mM,"")}function Il(e,t,n){if(t=Xy(t),Xy(e)!==t&&n)throw Error(K(425))}function Rc(){}var ah=null,lh=null;function ch(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uh=typeof setTimeout=="function"?setTimeout:void 0,gM=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,yM=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(e){return Zy.resolve(null).then(e).catch(vM)}:uh;function vM(e){setTimeout(function(){throw e})}function _d(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ea(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ea(t)}function ho(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),cr="__reactFiber$"+Pi,Pa="__reactProps$"+Pi,Fr="__reactContainer$"+Pi,dh="__reactEvents$"+Pi,wM="__reactListeners$"+Pi,xM="__reactHandles$"+Pi;function Uo(e){var t=e[cr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fr]||n[cr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Jy(e);e!==null;){if(n=e[cr])return n;e=Jy(e)}return t}e=n,n=e.parentNode}return null}function tl(e){return e=e[cr]||e[Fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function As(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function bu(e){return e[Pa]||null}var fh=[],Ps=-1;function Po(e){return{current:e}}function ot(e){0>Ps||(e.current=fh[Ps],fh[Ps]=null,Ps--)}function tt(e,t){Ps++,fh[Ps]=e.current,e.current=t}var So={},Qt=Po(So),dn=Po(!1),Jo=So;function di(e,t){var n=e.type.contextTypes;if(!n)return So;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function fn(e){return e=e.childContextTypes,e!=null}function Ic(){ot(dn),ot(Qt)}function ev(e,t,n){if(Qt.current!==So)throw Error(K(168));tt(Qt,t),tt(dn,n)}function vS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(K(108,ok(e)||"Unknown",o));return gt({},n,r)}function _c(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||So,Jo=Qt.current,tt(Qt,e),tt(dn,dn.current),!0}function tv(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=vS(e,t,Jo),r.__reactInternalMemoizedMergedChildContext=e,ot(dn),ot(Qt),tt(Qt,e)):ot(dn),tt(dn,n)}var Ar=null,Eu=!1,Nd=!1;function wS(e){Ar===null?Ar=[e]:Ar.push(e)}function SM(e){Eu=!0,wS(e)}function ko(){if(!Nd&&Ar!==null){Nd=!0;var e=0,t=Ke;try{var n=Ar;for(Ke=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ar=null,Eu=!1}catch(o){throw Ar!==null&&(Ar=Ar.slice(e+1)),qx(Lp,ko),o}finally{Ke=t,Nd=!1}}return null}var ks=[],Ms=0,Nc=null,Lc=0,Mn=[],Rn=0,es=null,kr=1,Mr="";function Fo(e,t){ks[Ms++]=Lc,ks[Ms++]=Nc,Nc=e,Lc=t}function xS(e,t,n){Mn[Rn++]=kr,Mn[Rn++]=Mr,Mn[Rn++]=es,es=e;var r=kr;e=Mr;var o=32-Yn(r)-1;r&=~(1<<o),n+=1;var s=32-Yn(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,kr=1<<32-Yn(t)+o|n<<o|r,Mr=s+e}else kr=1<<s|n<<o|r,Mr=e}function qp(e){e.return!==null&&(Fo(e,1),xS(e,1,0))}function Wp(e){for(;e===Nc;)Nc=ks[--Ms],ks[Ms]=null,Lc=ks[--Ms],ks[Ms]=null;for(;e===es;)es=Mn[--Rn],Mn[Rn]=null,Mr=Mn[--Rn],Mn[Rn]=null,kr=Mn[--Rn],Mn[Rn]=null}var xn=null,wn=null,it=!1,Kn=null;function SS(e,t){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function nv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xn=e,wn=ho(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xn=e,wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=es!==null?{id:kr,overflow:Mr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xn=e,wn=null,!0):!1;default:return!1}}function hh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ph(e){if(it){var t=wn;if(t){var n=t;if(!nv(e,t)){if(hh(e))throw Error(K(418));t=ho(n.nextSibling);var r=xn;t&&nv(e,t)?SS(r,n):(e.flags=e.flags&-4097|2,it=!1,xn=e)}}else{if(hh(e))throw Error(K(418));e.flags=e.flags&-4097|2,it=!1,xn=e}}}function rv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xn=e}function _l(e){if(e!==xn)return!1;if(!it)return rv(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ch(e.type,e.memoizedProps)),t&&(t=wn)){if(hh(e))throw bS(),Error(K(418));for(;t;)SS(e,t),t=ho(t.nextSibling)}if(rv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wn=ho(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wn=null}}else wn=xn?ho(e.stateNode.nextSibling):null;return!0}function bS(){for(var e=wn;e;)e=ho(e.nextSibling)}function fi(){wn=xn=null,it=!1}function Hp(e){Kn===null?Kn=[e]:Kn.push(e)}var bM=Br.ReactCurrentBatchConfig;function Ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function Nl(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ov(e){var t=e._init;return t(e._payload)}function ES(e){function t(g,v){if(e){var S=g.deletions;S===null?(g.deletions=[v],g.flags|=16):S.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function o(g,v){return g=yo(g,v),g.index=0,g.sibling=null,g}function s(g,v,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<v?(g.flags|=2,v):S):(g.flags|=2,v)):(g.flags|=1048576,v)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,v,S,E){return v===null||v.tag!==6?(v=Vd(S,g.mode,E),v.return=g,v):(v=o(v,S),v.return=g,v)}function l(g,v,S,E){var C=S.type;return C===Es?d(g,v,S.props.children,E,S.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Xr&&ov(C)===v.type)?(E=o(v,S.props),E.ref=Ui(g,v,S),E.return=g,E):(E=fc(S.type,S.key,S.props,null,g.mode,E),E.ref=Ui(g,v,S),E.return=g,E)}function c(g,v,S,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Bd(S,g.mode,E),v.return=g,v):(v=o(v,S.children||[]),v.return=g,v)}function d(g,v,S,E,C){return v===null||v.tag!==7?(v=Qo(S,g.mode,E,C),v.return=g,v):(v=o(v,S),v.return=g,v)}function u(g,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Vd(""+v,g.mode,S),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case El:return S=fc(v.type,v.key,v.props,null,g.mode,S),S.ref=Ui(g,null,v),S.return=g,S;case bs:return v=Bd(v,g.mode,S),v.return=g,v;case Xr:var E=v._init;return u(g,E(v._payload),S)}if(Qi(v)||Li(v))return v=Qo(v,g.mode,S,null),v.return=g,v;Nl(g,v)}return null}function h(g,v,S,E){var C=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:a(g,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case El:return S.key===C?l(g,v,S,E):null;case bs:return S.key===C?c(g,v,S,E):null;case Xr:return C=S._init,h(g,v,C(S._payload),E)}if(Qi(S)||Li(S))return C!==null?null:d(g,v,S,E,null);Nl(g,S)}return null}function w(g,v,S,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(v,g,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case El:return g=g.get(E.key===null?S:E.key)||null,l(v,g,E,C);case bs:return g=g.get(E.key===null?S:E.key)||null,c(v,g,E,C);case Xr:var T=E._init;return w(g,v,S,T(E._payload),C)}if(Qi(E)||Li(E))return g=g.get(S)||null,d(v,g,E,C,null);Nl(v,E)}return null}function y(g,v,S,E){for(var C=null,T=null,A=v,P=v=0,M=null;A!==null&&P<S.length;P++){A.index>P?(M=A,A=null):M=A.sibling;var I=h(g,A,S[P],E);if(I===null){A===null&&(A=M);break}e&&A&&I.alternate===null&&t(g,A),v=s(I,v,P),T===null?C=I:T.sibling=I,T=I,A=M}if(P===S.length)return n(g,A),it&&Fo(g,P),C;if(A===null){for(;P<S.length;P++)A=u(g,S[P],E),A!==null&&(v=s(A,v,P),T===null?C=A:T.sibling=A,T=A);return it&&Fo(g,P),C}for(A=r(g,A);P<S.length;P++)M=w(A,g,P,S[P],E),M!==null&&(e&&M.alternate!==null&&A.delete(M.key===null?P:M.key),v=s(M,v,P),T===null?C=M:T.sibling=M,T=M);return e&&A.forEach(function(O){return t(g,O)}),it&&Fo(g,P),C}function x(g,v,S,E){var C=Li(S);if(typeof C!="function")throw Error(K(150));if(S=C.call(S),S==null)throw Error(K(151));for(var T=C=null,A=v,P=v=0,M=null,I=S.next();A!==null&&!I.done;P++,I=S.next()){A.index>P?(M=A,A=null):M=A.sibling;var O=h(g,A,I.value,E);if(O===null){A===null&&(A=M);break}e&&A&&O.alternate===null&&t(g,A),v=s(O,v,P),T===null?C=O:T.sibling=O,T=O,A=M}if(I.done)return n(g,A),it&&Fo(g,P),C;if(A===null){for(;!I.done;P++,I=S.next())I=u(g,I.value,E),I!==null&&(v=s(I,v,P),T===null?C=I:T.sibling=I,T=I);return it&&Fo(g,P),C}for(A=r(g,A);!I.done;P++,I=S.next())I=w(A,g,P,I.value,E),I!==null&&(e&&I.alternate!==null&&A.delete(I.key===null?P:I.key),v=s(I,v,P),T===null?C=I:T.sibling=I,T=I);return e&&A.forEach(function(N){return t(g,N)}),it&&Fo(g,P),C}function b(g,v,S,E){if(typeof S=="object"&&S!==null&&S.type===Es&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case El:e:{for(var C=S.key,T=v;T!==null;){if(T.key===C){if(C=S.type,C===Es){if(T.tag===7){n(g,T.sibling),v=o(T,S.props.children),v.return=g,g=v;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Xr&&ov(C)===T.type){n(g,T.sibling),v=o(T,S.props),v.ref=Ui(g,T,S),v.return=g,g=v;break e}n(g,T);break}else t(g,T);T=T.sibling}S.type===Es?(v=Qo(S.props.children,g.mode,E,S.key),v.return=g,g=v):(E=fc(S.type,S.key,S.props,null,g.mode,E),E.ref=Ui(g,v,S),E.return=g,g=E)}return i(g);case bs:e:{for(T=S.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(g,v.sibling),v=o(v,S.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=Bd(S,g.mode,E),v.return=g,g=v}return i(g);case Xr:return T=S._init,b(g,v,T(S._payload),E)}if(Qi(S))return y(g,v,S,E);if(Li(S))return x(g,v,S,E);Nl(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(g,v.sibling),v=o(v,S),v.return=g,g=v):(n(g,v),v=Vd(S,g.mode,E),v.return=g,g=v),i(g)):n(g,v)}return b}var hi=ES(!0),CS=ES(!1),Fc=Po(null),Oc=null,Rs=null,Gp=null;function Kp(){Gp=Rs=Oc=null}function Yp(e){var t=Fc.current;ot(Fc),e._currentValue=t}function mh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ws(e,t){Oc=e,Gp=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(un=!0),e.firstContext=null)}function Fn(e){var t=e._currentValue;if(Gp!==e)if(e={context:e,memoizedValue:t,next:null},Rs===null){if(Oc===null)throw Error(K(308));Rs=e,Oc.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var Vo=null;function Qp(e){Vo===null?Vo=[e]:Vo.push(e)}function TS(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Qp(t)):(n.next=o.next,o.next=n),t.interleaved=n,Or(e,r)}function Or(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zr=!1;function Xp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function po(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Or(e,n)}return o=r.interleaved,o===null?(t.next=t,Qp(r)):(t.next=o.next,o.next=t),r.interleaved=t,Or(e,n)}function ic(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fp(e,n)}}function sv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jc(e,t,n,r){var o=e.updateQueue;Zr=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=o.baseState;i=0,d=c=l=null,a=s;do{var h=a.lane,w=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,x=a;switch(h=t,w=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){u=y.call(w,u,h);break e}u=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,h=typeof y=="function"?y.call(w,u,h):y,h==null)break e;u=gt({},u,h);break e;case 2:Zr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else w={eventTime:w,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=w,l=u):d=d.next=w,i|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(l=u),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);ns|=i,e.lanes=i,e.memoizedState=u}}function iv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(K(191,o));o.call(r)}}}var nl={},hr=Po(nl),ka=Po(nl),Ma=Po(nl);function Bo(e){if(e===nl)throw Error(K(174));return e}function Zp(e,t){switch(tt(Ma,t),tt(ka,e),tt(hr,nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yf(t,e)}ot(hr),tt(hr,t)}function pi(){ot(hr),ot(ka),ot(Ma)}function AS(e){Bo(Ma.current);var t=Bo(hr.current),n=Yf(t,e.type);t!==n&&(tt(ka,e),tt(hr,n))}function Jp(e){ka.current===e&&(ot(hr),ot(ka))}var dt=Po(0);function $c(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ld=[];function em(){for(var e=0;e<Ld.length;e++)Ld[e]._workInProgressVersionPrimary=null;Ld.length=0}var ac=Br.ReactCurrentDispatcher,Fd=Br.ReactCurrentBatchConfig,ts=0,mt=null,Mt=null,It=null,Uc=!1,la=!1,Ra=0,EM=0;function Bt(){throw Error(K(321))}function tm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function nm(e,t,n,r,o,s){if(ts=s,mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ac.current=e===null||e.memoizedState===null?AM:PM,e=n(r,o),la){s=0;do{if(la=!1,Ra=0,25<=s)throw Error(K(301));s+=1,It=Mt=null,t.updateQueue=null,ac.current=kM,e=n(r,o)}while(la)}if(ac.current=Vc,t=Mt!==null&&Mt.next!==null,ts=0,It=Mt=mt=null,Uc=!1,t)throw Error(K(300));return e}function rm(){var e=Ra!==0;return Ra=0,e}function sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?mt.memoizedState=It=e:It=It.next=e,It}function On(){if(Mt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=Mt.next;var t=It===null?mt.memoizedState:It.next;if(t!==null)It=t,Mt=e;else{if(e===null)throw Error(K(310));Mt=e,e={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},It===null?mt.memoizedState=It=e:It=It.next=e}return It}function Ia(e,t){return typeof t=="function"?t(e):t}function Od(e){var t=On(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=Mt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var d=c.lane;if((ts&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,i=r):l=l.next=u,mt.lanes|=d,ns|=d}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Zn(r,t.memoizedState)||(un=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,mt.lanes|=s,ns|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jd(e){var t=On(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);Zn(s,t.memoizedState)||(un=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function PS(){}function kS(e,t){var n=mt,r=On(),o=t(),s=!Zn(r.memoizedState,o);if(s&&(r.memoizedState=o,un=!0),r=r.queue,om(IS.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,_a(9,RS.bind(null,n,r,o,t),void 0,null),_t===null)throw Error(K(349));ts&30||MS(n,t,o)}return o}function MS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RS(e,t,n,r){t.value=n,t.getSnapshot=r,_S(t)&&NS(e)}function IS(e,t,n){return n(function(){_S(t)&&NS(e)})}function _S(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch{return!0}}function NS(e){var t=Or(e,1);t!==null&&Qn(t,e,1,-1)}function av(e){var t=sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=DM.bind(null,mt,e),[t.memoizedState,e]}function _a(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function LS(){return On().memoizedState}function lc(e,t,n,r){var o=sr();mt.flags|=e,o.memoizedState=_a(1|t,n,void 0,r===void 0?null:r)}function Cu(e,t,n,r){var o=On();r=r===void 0?null:r;var s=void 0;if(Mt!==null){var i=Mt.memoizedState;if(s=i.destroy,r!==null&&tm(r,i.deps)){o.memoizedState=_a(t,n,s,r);return}}mt.flags|=e,o.memoizedState=_a(1|t,n,s,r)}function lv(e,t){return lc(8390656,8,e,t)}function om(e,t){return Cu(2048,8,e,t)}function FS(e,t){return Cu(4,2,e,t)}function OS(e,t){return Cu(4,4,e,t)}function jS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $S(e,t,n){return n=n!=null?n.concat([e]):null,Cu(4,4,jS.bind(null,t,e),n)}function sm(){}function US(e,t){var n=On();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function VS(e,t){var n=On();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BS(e,t,n){return ts&21?(Zn(n,t)||(n=Gx(),mt.lanes|=n,ns|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,un=!0),e.memoizedState=n)}function CM(e,t){var n=Ke;Ke=n!==0&&4>n?n:4,e(!0);var r=Fd.transition;Fd.transition={};try{e(!1),t()}finally{Ke=n,Fd.transition=r}}function zS(){return On().memoizedState}function TM(e,t,n){var r=go(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qS(e))WS(t,n);else if(n=TS(e,t,n,r),n!==null){var o=nn();Qn(n,e,r,o),HS(n,t,r)}}function DM(e,t,n){var r=go(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qS(e))WS(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Zn(a,i)){var l=t.interleaved;l===null?(o.next=o,Qp(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=TS(e,t,o,r),n!==null&&(o=nn(),Qn(n,e,r,o),HS(n,t,r))}}function qS(e){var t=e.alternate;return e===mt||t!==null&&t===mt}function WS(e,t){la=Uc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function HS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fp(e,n)}}var Vc={readContext:Fn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},AM={readContext:Fn,useCallback:function(e,t){return sr().memoizedState=[e,t===void 0?null:t],e},useContext:Fn,useEffect:lv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,lc(4194308,4,jS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lc(4194308,4,e,t)},useInsertionEffect:function(e,t){return lc(4,2,e,t)},useMemo:function(e,t){var n=sr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=TM.bind(null,mt,e),[r.memoizedState,e]},useRef:function(e){var t=sr();return e={current:e},t.memoizedState=e},useState:av,useDebugValue:sm,useDeferredValue:function(e){return sr().memoizedState=e},useTransition:function(){var e=av(!1),t=e[0];return e=CM.bind(null,e[1]),sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mt,o=sr();if(it){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),_t===null)throw Error(K(349));ts&30||MS(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,lv(IS.bind(null,r,s,e),[e]),r.flags|=2048,_a(9,RS.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=sr(),t=_t.identifierPrefix;if(it){var n=Mr,r=kr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ra++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=EM++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},PM={readContext:Fn,useCallback:US,useContext:Fn,useEffect:om,useImperativeHandle:$S,useInsertionEffect:FS,useLayoutEffect:OS,useMemo:VS,useReducer:Od,useRef:LS,useState:function(){return Od(Ia)},useDebugValue:sm,useDeferredValue:function(e){var t=On();return BS(t,Mt.memoizedState,e)},useTransition:function(){var e=Od(Ia)[0],t=On().memoizedState;return[e,t]},useMutableSource:PS,useSyncExternalStore:kS,useId:zS,unstable_isNewReconciler:!1},kM={readContext:Fn,useCallback:US,useContext:Fn,useEffect:om,useImperativeHandle:$S,useInsertionEffect:FS,useLayoutEffect:OS,useMemo:VS,useReducer:jd,useRef:LS,useState:function(){return jd(Ia)},useDebugValue:sm,useDeferredValue:function(e){var t=On();return Mt===null?t.memoizedState=e:BS(t,Mt.memoizedState,e)},useTransition:function(){var e=jd(Ia)[0],t=On().memoizedState;return[e,t]},useMutableSource:PS,useSyncExternalStore:kS,useId:zS,unstable_isNewReconciler:!1};function qn(e,t){if(e&&e.defaultProps){t=gt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:gt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tu={isMounted:function(e){return(e=e._reactInternals)?cs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nn(),o=go(e),s=Ir(r,o);s.payload=t,n!=null&&(s.callback=n),t=po(e,s,o),t!==null&&(Qn(t,e,o,r),ic(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nn(),o=go(e),s=Ir(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=po(e,s,o),t!==null&&(Qn(t,e,o,r),ic(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nn(),r=go(e),o=Ir(n,r);o.tag=2,t!=null&&(o.callback=t),t=po(e,o,r),t!==null&&(Qn(t,e,r,n),ic(t,e,r))}};function cv(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!Ta(n,r)||!Ta(o,s):!0}function GS(e,t,n){var r=!1,o=So,s=t.contextType;return typeof s=="object"&&s!==null?s=Fn(s):(o=fn(t)?Jo:Qt.current,r=t.contextTypes,s=(r=r!=null)?di(e,o):So),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function uv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Tu.enqueueReplaceState(t,t.state,null)}function yh(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Xp(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Fn(s):(s=fn(t)?Jo:Qt.current,o.context=di(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(gh(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Tu.enqueueReplaceState(o,o.state,null),jc(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function mi(e,t){try{var n="",r=t;do n+=rk(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function $d(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var MM=typeof WeakMap=="function"?WeakMap:Map;function KS(e,t,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zc||(zc=!0,Ph=r),vh(e,t)},n}function YS(e,t,n){n=Ir(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){vh(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vh(e,t),typeof r!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function dv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new MM;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=qM.bind(null,e,t,n),t.then(e,e))}function fv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hv(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ir(-1,1),t.tag=2,po(n,t,1))),n.lanes|=1),e)}var RM=Br.ReactCurrentOwner,un=!1;function en(e,t,n,r){t.child=e===null?CS(t,null,n,r):hi(t,e.child,n,r)}function pv(e,t,n,r,o){n=n.render;var s=t.ref;return Ws(t,o),r=nm(e,t,n,r,s,o),n=rm(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,jr(e,t,o)):(it&&n&&qp(t),t.flags|=1,en(e,t,r,o),t.child)}function mv(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!hm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,QS(e,t,s,r,o)):(e=fc(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(i,r)&&e.ref===t.ref)return jr(e,t,o)}return t.flags|=1,e=yo(s,r),e.ref=t.ref,e.return=t,t.child=e}function QS(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(Ta(s,r)&&e.ref===t.ref)if(un=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(un=!0);else return t.lanes=e.lanes,jr(e,t,o)}return wh(e,t,n,r,o)}function XS(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(_s,yn),yn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tt(_s,yn),yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,tt(_s,yn),yn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,tt(_s,yn),yn|=r;return en(e,t,o,n),t.child}function ZS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wh(e,t,n,r,o){var s=fn(n)?Jo:Qt.current;return s=di(t,s),Ws(t,o),n=nm(e,t,n,r,s,o),r=rm(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,jr(e,t,o)):(it&&r&&qp(t),t.flags|=1,en(e,t,n,o),t.child)}function gv(e,t,n,r,o){if(fn(n)){var s=!0;_c(t)}else s=!1;if(Ws(t,o),t.stateNode===null)cc(e,t),GS(t,n,r),yh(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fn(c):(c=fn(n)?Jo:Qt.current,c=di(t,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&uv(t,i,r,c),Zr=!1;var h=t.memoizedState;i.state=h,jc(t,r,i,o),l=t.memoizedState,a!==r||h!==l||dn.current||Zr?(typeof d=="function"&&(gh(t,n,d,r),l=t.memoizedState),(a=Zr||cv(t,n,a,r,h,l,c))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,DS(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:qn(t.type,a),i.props=c,u=t.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=fn(n)?Jo:Qt.current,l=di(t,l));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==u||h!==l)&&uv(t,i,r,l),Zr=!1,h=t.memoizedState,i.state=h,jc(t,r,i,o);var y=t.memoizedState;a!==u||h!==y||dn.current||Zr?(typeof w=="function"&&(gh(t,n,w,r),y=t.memoizedState),(c=Zr||cv(t,n,c,r,h,y,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return xh(e,t,n,r,s,o)}function xh(e,t,n,r,o,s){ZS(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&tv(t,n,!1),jr(e,t,s);r=t.stateNode,RM.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=hi(t,e.child,null,s),t.child=hi(t,null,a,s)):en(e,t,a,s),t.memoizedState=r.state,o&&tv(t,n,!0),t.child}function JS(e){var t=e.stateNode;t.pendingContext?ev(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ev(e,t.context,!1),Zp(e,t.containerInfo)}function yv(e,t,n,r,o){return fi(),Hp(o),t.flags|=256,en(e,t,n,r),t.child}var Sh={dehydrated:null,treeContext:null,retryLane:0};function bh(e){return{baseLanes:e,cachePool:null,transitions:null}}function eb(e,t,n){var r=t.pendingProps,o=dt.current,s=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),tt(dt,o&1),e===null)return ph(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Pu(i,r,0,null),e=Qo(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=bh(n),t.memoizedState=Sh,e):im(t,i));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return IM(e,t,i,r,a,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=yo(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=yo(a,s):(s=Qo(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?bh(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Sh,r}return s=e.child,e=s.sibling,r=yo(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function im(e,t){return t=Pu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ll(e,t,n,r){return r!==null&&Hp(r),hi(t,e.child,null,n),e=im(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function IM(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=$d(Error(K(422))),Ll(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Pu({mode:"visible",children:r.children},o,0,null),s=Qo(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&hi(t,e.child,null,i),t.child.memoizedState=bh(i),t.memoizedState=Sh,s);if(!(t.mode&1))return Ll(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=$d(s,r,void 0),Ll(e,t,i,r)}if(a=(i&e.childLanes)!==0,un||a){if(r=_t,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Or(e,o),Qn(r,e,o,-1))}return fm(),r=$d(Error(K(421))),Ll(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=WM.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,wn=ho(o.nextSibling),xn=t,it=!0,Kn=null,e!==null&&(Mn[Rn++]=kr,Mn[Rn++]=Mr,Mn[Rn++]=es,kr=e.id,Mr=e.overflow,es=t),t=im(t,r.children),t.flags|=4096,t)}function vv(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mh(e.return,t,n)}function Ud(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function tb(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(en(e,t,r.children,n),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vv(e,n,t);else if(e.tag===19)vv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(tt(dt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&$c(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ud(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&$c(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ud(t,!0,n,null,s);break;case"together":Ud(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ns|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=yo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _M(e,t,n){switch(t.tag){case 3:JS(t),fi();break;case 5:AS(t);break;case 1:fn(t.type)&&_c(t);break;case 4:Zp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;tt(Fc,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(tt(dt,dt.current&1),t.flags|=128,null):n&t.child.childLanes?eb(e,t,n):(tt(dt,dt.current&1),e=jr(e,t,n),e!==null?e.sibling:null);tt(dt,dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tb(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),tt(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,XS(e,t,n)}return jr(e,t,n)}var nb,Eh,rb,ob;nb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Eh=function(){};rb=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Bo(hr.current);var s=null;switch(n){case"input":o=Wf(e,o),r=Wf(e,r),s=[];break;case"select":o=gt({},o,{value:void 0}),r=gt({},r,{value:void 0}),s=[];break;case"textarea":o=Kf(e,o),r=Kf(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rc)}Qf(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(va.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(va.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&rt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};ob=function(e,t,n,r){n!==r&&(t.flags|=4)};function Vi(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function NM(e,t,n){var r=t.pendingProps;switch(Wp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(t),null;case 1:return fn(t.type)&&Ic(),zt(t),null;case 3:return r=t.stateNode,pi(),ot(dn),ot(Qt),em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(_l(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Kn!==null&&(Rh(Kn),Kn=null))),Eh(e,t),zt(t),null;case 5:Jp(t);var o=Bo(Ma.current);if(n=t.type,e!==null&&t.stateNode!=null)rb(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return zt(t),null}if(e=Bo(hr.current),_l(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[cr]=t,r[Pa]=s,e=(t.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(o=0;o<Zi.length;o++)rt(Zi[o],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":Ay(r,s),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rt("invalid",r);break;case"textarea":ky(r,s),rt("invalid",r)}Qf(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Il(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Il(r.textContent,a,e),o=["children",""+a]):va.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&rt("scroll",r)}switch(n){case"input":Cl(r),Py(r,s,!0);break;case"textarea":Cl(r),My(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rc)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ix(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[cr]=t,e[Pa]=r,nb(e,t,!1,!1),t.stateNode=e;e:{switch(i=Xf(n,r),n){case"dialog":rt("cancel",e),rt("close",e),o=r;break;case"iframe":case"object":case"embed":rt("load",e),o=r;break;case"video":case"audio":for(o=0;o<Zi.length;o++)rt(Zi[o],e);o=r;break;case"source":rt("error",e),o=r;break;case"img":case"image":case"link":rt("error",e),rt("load",e),o=r;break;case"details":rt("toggle",e),o=r;break;case"input":Ay(e,r),o=Wf(e,r),rt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=gt({},r,{value:void 0}),rt("invalid",e);break;case"textarea":ky(e,r),o=Kf(e,r),rt("invalid",e);break;default:o=r}Qf(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Lx(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_x(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wa(e,l):typeof l=="number"&&wa(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(va.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rt("scroll",e):l!=null&&Mp(e,s,l,i))}switch(n){case"input":Cl(e),Py(e,r,!1);break;case"textarea":Cl(e),My(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xo(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Vs(e,!!r.multiple,s,!1):r.defaultValue!=null&&Vs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Rc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zt(t),null;case 6:if(e&&t.stateNode!=null)ob(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Bo(Ma.current),Bo(hr.current),_l(t)){if(r=t.stateNode,n=t.memoizedProps,r[cr]=t,(s=r.nodeValue!==n)&&(e=xn,e!==null))switch(e.tag){case 3:Il(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Il(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=t,t.stateNode=r}return zt(t),null;case 13:if(ot(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&wn!==null&&t.mode&1&&!(t.flags&128))bS(),fi(),t.flags|=98560,s=!1;else if(s=_l(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(K(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[cr]=t}else fi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zt(t),s=!1}else Kn!==null&&(Rh(Kn),Kn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?Rt===0&&(Rt=3):fm())),t.updateQueue!==null&&(t.flags|=4),zt(t),null);case 4:return pi(),Eh(e,t),e===null&&Da(t.stateNode.containerInfo),zt(t),null;case 10:return Yp(t.type._context),zt(t),null;case 17:return fn(t.type)&&Ic(),zt(t),null;case 19:if(ot(dt),s=t.memoizedState,s===null)return zt(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)Vi(s,!1);else{if(Rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=$c(e),i!==null){for(t.flags|=128,Vi(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return tt(dt,dt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Tt()>gi&&(t.flags|=128,r=!0,Vi(s,!1),t.lanes=4194304)}else{if(!r)if(e=$c(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Vi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!it)return zt(t),null}else 2*Tt()-s.renderingStartTime>gi&&n!==1073741824&&(t.flags|=128,r=!0,Vi(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Tt(),t.sibling=null,n=dt.current,tt(dt,r?n&1|2:n&1),t):(zt(t),null);case 22:case 23:return dm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yn&1073741824&&(zt(t),t.subtreeFlags&6&&(t.flags|=8192)):zt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function LM(e,t){switch(Wp(t),t.tag){case 1:return fn(t.type)&&Ic(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pi(),ot(dn),ot(Qt),em(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jp(t),null;case 13:if(ot(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));fi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ot(dt),null;case 4:return pi(),null;case 10:return Yp(t.type._context),null;case 22:case 23:return dm(),null;case 24:return null;default:return null}}var Fl=!1,Ht=!1,FM=typeof WeakSet=="function"?WeakSet:Set,le=null;function Is(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){St(e,t,r)}else n.current=null}function Ch(e,t,n){try{n()}catch(r){St(e,t,r)}}var wv=!1;function OM(e,t){if(ah=Pc,e=cS(),zp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,d=0,u=e,h=null;t:for(;;){for(var w;u!==n||o!==0&&u.nodeType!==3||(a=i+o),u!==s||r!==0&&u.nodeType!==3||(l=i+r),u.nodeType===3&&(i+=u.nodeValue.length),(w=u.firstChild)!==null;)h=u,u=w;for(;;){if(u===e)break t;if(h===n&&++c===o&&(a=i),h===s&&++d===r&&(l=i),(w=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lh={focusedElem:e,selectionRange:n},Pc=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,b=y.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:qn(t.type,x),b);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(E){St(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return y=wv,wv=!1,y}function ca(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Ch(t,n,s)}o=o.next}while(o!==r)}}function Du(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Th(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sb(e){var t=e.alternate;t!==null&&(e.alternate=null,sb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cr],delete t[Pa],delete t[dh],delete t[wM],delete t[xM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ib(e){return e.tag===5||e.tag===3||e.tag===4}function xv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ib(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rc));else if(r!==4&&(e=e.child,e!==null))for(Dh(e,t,n),e=e.sibling;e!==null;)Dh(e,t,n),e=e.sibling}function Ah(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ah(e,t,n),e=e.sibling;e!==null;)Ah(e,t,n),e=e.sibling}var Ft=null,Gn=!1;function Wr(e,t,n){for(n=n.child;n!==null;)ab(e,t,n),n=n.sibling}function ab(e,t,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:Ht||Is(n,t);case 6:var r=Ft,o=Gn;Ft=null,Wr(e,t,n),Ft=r,Gn=o,Ft!==null&&(Gn?(e=Ft,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(Gn?(e=Ft,n=n.stateNode,e.nodeType===8?_d(e.parentNode,n):e.nodeType===1&&_d(e,n),Ea(e)):_d(Ft,n.stateNode));break;case 4:r=Ft,o=Gn,Ft=n.stateNode.containerInfo,Gn=!0,Wr(e,t,n),Ft=r,Gn=o;break;case 0:case 11:case 14:case 15:if(!Ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Ch(n,t,i),o=o.next}while(o!==r)}Wr(e,t,n);break;case 1:if(!Ht&&(Is(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){St(n,t,a)}Wr(e,t,n);break;case 21:Wr(e,t,n);break;case 22:n.mode&1?(Ht=(r=Ht)||n.memoizedState!==null,Wr(e,t,n),Ht=r):Wr(e,t,n);break;default:Wr(e,t,n)}}function Sv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new FM),t.forEach(function(r){var o=HM.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Vn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Ft=a.stateNode,Gn=!1;break e;case 3:Ft=a.stateNode.containerInfo,Gn=!0;break e;case 4:Ft=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(Ft===null)throw Error(K(160));ab(s,i,o),Ft=null,Gn=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){St(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lb(t,e),t=t.sibling}function lb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vn(t,e),or(e),r&4){try{ca(3,e,e.return),Du(3,e)}catch(x){St(e,e.return,x)}try{ca(5,e,e.return)}catch(x){St(e,e.return,x)}}break;case 1:Vn(t,e),or(e),r&512&&n!==null&&Is(n,n.return);break;case 5:if(Vn(t,e),or(e),r&512&&n!==null&&Is(n,n.return),e.flags&32){var o=e.stateNode;try{wa(o,"")}catch(x){St(e,e.return,x)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Mx(o,s),Xf(a,i);var c=Xf(a,s);for(i=0;i<l.length;i+=2){var d=l[i],u=l[i+1];d==="style"?Lx(o,u):d==="dangerouslySetInnerHTML"?_x(o,u):d==="children"?wa(o,u):Mp(o,d,u,c)}switch(a){case"input":Hf(o,s);break;case"textarea":Rx(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Vs(o,!!s.multiple,w,!1):h!==!!s.multiple&&(s.defaultValue!=null?Vs(o,!!s.multiple,s.defaultValue,!0):Vs(o,!!s.multiple,s.multiple?[]:"",!1))}o[Pa]=s}catch(x){St(e,e.return,x)}}break;case 6:if(Vn(t,e),or(e),r&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(x){St(e,e.return,x)}}break;case 3:if(Vn(t,e),or(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ea(t.containerInfo)}catch(x){St(e,e.return,x)}break;case 4:Vn(t,e),or(e);break;case 13:Vn(t,e),or(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(cm=Tt())),r&4&&Sv(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ht=(c=Ht)||d,Vn(t,e),Ht=c):Vn(t,e),or(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(le=e,d=e.child;d!==null;){for(u=le=d;le!==null;){switch(h=le,w=h.child,h.tag){case 0:case 11:case 14:case 15:ca(4,h,h.return);break;case 1:Is(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(x){St(r,n,x)}}break;case 5:Is(h,h.return);break;case 22:if(h.memoizedState!==null){Ev(u);continue}}w!==null?(w.return=h,le=w):Ev(u)}d=d.sibling}e:for(d=null,u=e;;){if(u.tag===5){if(d===null){d=u;try{o=u.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nx("display",i))}catch(x){St(e,e.return,x)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(x){St(e,e.return,x)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Vn(t,e),or(e),r&4&&Sv(e);break;case 21:break;default:Vn(t,e),or(e)}}function or(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ib(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(wa(o,""),r.flags&=-33);var s=xv(e);Ah(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=xv(e);Dh(e,a,i);break;default:throw Error(K(161))}}catch(l){St(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jM(e,t,n){le=e,cb(e)}function cb(e,t,n){for(var r=(e.mode&1)!==0;le!==null;){var o=le,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Fl;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Ht;a=Fl;var c=Ht;if(Fl=i,(Ht=l)&&!c)for(le=o;le!==null;)i=le,l=i.child,i.tag===22&&i.memoizedState!==null?Cv(o):l!==null?(l.return=i,le=l):Cv(o);for(;s!==null;)le=s,cb(s),s=s.sibling;le=o,Fl=a,Ht=c}bv(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,le=s):bv(e)}}function bv(e){for(;le!==null;){var t=le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ht||Du(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ht)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:qn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&iv(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}iv(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&Ea(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ht||t.flags&512&&Th(t)}catch(h){St(t,t.return,h)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function Ev(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function Cv(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Du(4,t)}catch(l){St(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){St(t,o,l)}}var s=t.return;try{Th(t)}catch(l){St(t,s,l)}break;case 5:var i=t.return;try{Th(t)}catch(l){St(t,i,l)}}}catch(l){St(t,t.return,l)}if(t===e){le=null;break}var a=t.sibling;if(a!==null){a.return=t.return,le=a;break}le=t.return}}var $M=Math.ceil,Bc=Br.ReactCurrentDispatcher,am=Br.ReactCurrentOwner,_n=Br.ReactCurrentBatchConfig,Le=0,_t=null,Pt=null,jt=0,yn=0,_s=Po(0),Rt=0,Na=null,ns=0,Au=0,lm=0,ua=null,ln=null,cm=0,gi=1/0,Dr=null,zc=!1,Ph=null,mo=null,Ol=!1,ao=null,qc=0,da=0,kh=null,uc=-1,dc=0;function nn(){return Le&6?Tt():uc!==-1?uc:uc=Tt()}function go(e){return e.mode&1?Le&2&&jt!==0?jt&-jt:bM.transition!==null?(dc===0&&(dc=Gx()),dc):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:eS(e.type)),e):1}function Qn(e,t,n,r){if(50<da)throw da=0,kh=null,Error(K(185));Ja(e,n,r),(!(Le&2)||e!==_t)&&(e===_t&&(!(Le&2)&&(Au|=n),Rt===4&&eo(e,jt)),hn(e,r),n===1&&Le===0&&!(t.mode&1)&&(gi=Tt()+500,Eu&&ko()))}function hn(e,t){var n=e.callbackNode;bk(e,t);var r=Ac(e,e===_t?jt:0);if(r===0)n!==null&&_y(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_y(n),t===1)e.tag===0?SM(Tv.bind(null,e)):wS(Tv.bind(null,e)),yM(function(){!(Le&6)&&ko()}),n=null;else{switch(Kx(r)){case 1:n=Lp;break;case 4:n=Wx;break;case 16:n=Dc;break;case 536870912:n=Hx;break;default:n=Dc}n=yb(n,ub.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ub(e,t){if(uc=-1,dc=0,Le&6)throw Error(K(327));var n=e.callbackNode;if(Hs()&&e.callbackNode!==n)return null;var r=Ac(e,e===_t?jt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Wc(e,r);else{t=r;var o=Le;Le|=2;var s=fb();(_t!==e||jt!==t)&&(Dr=null,gi=Tt()+500,Yo(e,t));do try{BM();break}catch(a){db(e,a)}while(!0);Kp(),Bc.current=s,Le=o,Pt!==null?t=0:(_t=null,jt=0,t=Rt)}if(t!==0){if(t===2&&(o=nh(e),o!==0&&(r=o,t=Mh(e,o))),t===1)throw n=Na,Yo(e,0),eo(e,r),hn(e,Tt()),n;if(t===6)eo(e,r);else{if(o=e.current.alternate,!(r&30)&&!UM(o)&&(t=Wc(e,r),t===2&&(s=nh(e),s!==0&&(r=s,t=Mh(e,s))),t===1))throw n=Na,Yo(e,0),eo(e,r),hn(e,Tt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:Oo(e,ln,Dr);break;case 3:if(eo(e,r),(r&130023424)===r&&(t=cm+500-Tt(),10<t)){if(Ac(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){nn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=uh(Oo.bind(null,e,ln,Dr),t);break}Oo(e,ln,Dr);break;case 4:if(eo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Yn(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$M(r/1960))-r,10<r){e.timeoutHandle=uh(Oo.bind(null,e,ln,Dr),r);break}Oo(e,ln,Dr);break;case 5:Oo(e,ln,Dr);break;default:throw Error(K(329))}}}return hn(e,Tt()),e.callbackNode===n?ub.bind(null,e):null}function Mh(e,t){var n=ua;return e.current.memoizedState.isDehydrated&&(Yo(e,t).flags|=256),e=Wc(e,t),e!==2&&(t=ln,ln=n,t!==null&&Rh(t)),e}function Rh(e){ln===null?ln=e:ln.push.apply(ln,e)}function UM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Zn(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function eo(e,t){for(t&=~lm,t&=~Au,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yn(t),r=1<<n;e[n]=-1,t&=~r}}function Tv(e){if(Le&6)throw Error(K(327));Hs();var t=Ac(e,0);if(!(t&1))return hn(e,Tt()),null;var n=Wc(e,t);if(e.tag!==0&&n===2){var r=nh(e);r!==0&&(t=r,n=Mh(e,r))}if(n===1)throw n=Na,Yo(e,0),eo(e,t),hn(e,Tt()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oo(e,ln,Dr),hn(e,Tt()),null}function um(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(gi=Tt()+500,Eu&&ko())}}function rs(e){ao!==null&&ao.tag===0&&!(Le&6)&&Hs();var t=Le;Le|=1;var n=_n.transition,r=Ke;try{if(_n.transition=null,Ke=1,e)return e()}finally{Ke=r,_n.transition=n,Le=t,!(Le&6)&&ko()}}function dm(){yn=_s.current,ot(_s)}function Yo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gM(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(Wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ic();break;case 3:pi(),ot(dn),ot(Qt),em();break;case 5:Jp(r);break;case 4:pi();break;case 13:ot(dt);break;case 19:ot(dt);break;case 10:Yp(r.type._context);break;case 22:case 23:dm()}n=n.return}if(_t=e,Pt=e=yo(e.current,null),jt=yn=t,Rt=0,Na=null,lm=Au=ns=0,ln=ua=null,Vo!==null){for(t=0;t<Vo.length;t++)if(n=Vo[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Vo=null}return e}function db(e,t){do{var n=Pt;try{if(Kp(),ac.current=Vc,Uc){for(var r=mt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Uc=!1}if(ts=0,It=Mt=mt=null,la=!1,Ra=0,am.current=null,n===null||n.return===null){Rt=1,Na=t,Pt=null;break}e:{var s=e,i=n.return,a=n,l=t;if(t=jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=fv(i);if(w!==null){w.flags&=-257,hv(w,i,a,s,t),w.mode&1&&dv(s,c,t),t=w,l=c;var y=t.updateQueue;if(y===null){var x=new Set;x.add(l),t.updateQueue=x}else y.add(l);break e}else{if(!(t&1)){dv(s,c,t),fm();break e}l=Error(K(426))}}else if(it&&a.mode&1){var b=fv(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),hv(b,i,a,s,t),Hp(mi(l,a));break e}}s=l=mi(l,a),Rt!==4&&(Rt=2),ua===null?ua=[s]:ua.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=KS(s,l,t);sv(s,g);break e;case 1:a=l;var v=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(mo===null||!mo.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=YS(s,a,t);sv(s,E);break e}}s=s.return}while(s!==null)}pb(n)}catch(C){t=C,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function fb(){var e=Bc.current;return Bc.current=Vc,e===null?Vc:e}function fm(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),_t===null||!(ns&268435455)&&!(Au&268435455)||eo(_t,jt)}function Wc(e,t){var n=Le;Le|=2;var r=fb();(_t!==e||jt!==t)&&(Dr=null,Yo(e,t));do try{VM();break}catch(o){db(e,o)}while(!0);if(Kp(),Le=n,Bc.current=r,Pt!==null)throw Error(K(261));return _t=null,jt=0,Rt}function VM(){for(;Pt!==null;)hb(Pt)}function BM(){for(;Pt!==null&&!hk();)hb(Pt)}function hb(e){var t=gb(e.alternate,e,yn);e.memoizedProps=e.pendingProps,t===null?pb(e):Pt=t,am.current=null}function pb(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=LM(n,t),n!==null){n.flags&=32767,Pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rt=6,Pt=null;return}}else if(n=NM(n,t,yn),n!==null){Pt=n;return}if(t=t.sibling,t!==null){Pt=t;return}Pt=t=e}while(t!==null);Rt===0&&(Rt=5)}function Oo(e,t,n){var r=Ke,o=_n.transition;try{_n.transition=null,Ke=1,zM(e,t,n,r)}finally{_n.transition=o,Ke=r}return null}function zM(e,t,n,r){do Hs();while(ao!==null);if(Le&6)throw Error(K(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ek(e,s),e===_t&&(Pt=_t=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,yb(Dc,function(){return Hs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_n.transition,_n.transition=null;var i=Ke;Ke=1;var a=Le;Le|=4,am.current=null,OM(e,n),lb(n,e),cM(lh),Pc=!!ah,lh=ah=null,e.current=n,jM(n),pk(),Le=a,Ke=i,_n.transition=s}else e.current=n;if(Ol&&(Ol=!1,ao=e,qc=o),s=e.pendingLanes,s===0&&(mo=null),yk(n.stateNode),hn(e,Tt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(zc)throw zc=!1,e=Ph,Ph=null,e;return qc&1&&e.tag!==0&&Hs(),s=e.pendingLanes,s&1?e===kh?da++:(da=0,kh=e):da=0,ko(),null}function Hs(){if(ao!==null){var e=Kx(qc),t=_n.transition,n=Ke;try{if(_n.transition=null,Ke=16>e?16:e,ao===null)var r=!1;else{if(e=ao,ao=null,qc=0,Le&6)throw Error(K(331));var o=Le;for(Le|=4,le=e.current;le!==null;){var s=le,i=s.child;if(le.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(le=c;le!==null;){var d=le;switch(d.tag){case 0:case 11:case 15:ca(8,d,s)}var u=d.child;if(u!==null)u.return=d,le=u;else for(;le!==null;){d=le;var h=d.sibling,w=d.return;if(sb(d),d===c){le=null;break}if(h!==null){h.return=w,le=h;break}le=w}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}le=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,le=i;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ca(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,le=g;break e}le=s.return}}var v=e.current;for(le=v;le!==null;){i=le;var S=i.child;if(i.subtreeFlags&2064&&S!==null)S.return=i,le=S;else e:for(i=v;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Du(9,a)}}catch(C){St(a,a.return,C)}if(a===i){le=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,le=E;break e}le=a.return}}if(Le=o,ko(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(vu,e)}catch{}r=!0}return r}finally{Ke=n,_n.transition=t}}return!1}function Dv(e,t,n){t=mi(n,t),t=KS(e,t,1),e=po(e,t,1),t=nn(),e!==null&&(Ja(e,1,t),hn(e,t))}function St(e,t,n){if(e.tag===3)Dv(e,e,n);else for(;t!==null;){if(t.tag===3){Dv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mo===null||!mo.has(r))){e=mi(n,e),e=YS(t,e,1),t=po(t,e,1),e=nn(),t!==null&&(Ja(t,1,e),hn(t,e));break}}t=t.return}}function qM(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nn(),e.pingedLanes|=e.suspendedLanes&n,_t===e&&(jt&n)===n&&(Rt===4||Rt===3&&(jt&130023424)===jt&&500>Tt()-cm?Yo(e,0):lm|=n),hn(e,t)}function mb(e,t){t===0&&(e.mode&1?(t=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):t=1);var n=nn();e=Or(e,t),e!==null&&(Ja(e,t,n),hn(e,n))}function WM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mb(e,n)}function HM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),mb(e,n)}var gb;gb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||dn.current)un=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return un=!1,_M(e,t,n);un=!!(e.flags&131072)}else un=!1,it&&t.flags&1048576&&xS(t,Lc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cc(e,t),e=t.pendingProps;var o=di(t,Qt.current);Ws(t,n),o=nm(null,t,r,e,o,n);var s=rm();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fn(r)?(s=!0,_c(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Xp(t),o.updater=Tu,t.stateNode=o,o._reactInternals=t,yh(t,r,e,n),t=xh(null,t,r,!0,s,n)):(t.tag=0,it&&s&&qp(t),en(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cc(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=KM(r),e=qn(r,e),o){case 0:t=wh(null,t,r,e,n);break e;case 1:t=gv(null,t,r,e,n);break e;case 11:t=pv(null,t,r,e,n);break e;case 14:t=mv(null,t,r,qn(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),wh(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),gv(e,t,r,o,n);case 3:e:{if(JS(t),e===null)throw Error(K(387));r=t.pendingProps,s=t.memoizedState,o=s.element,DS(e,t),jc(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=mi(Error(K(423)),t),t=yv(e,t,r,n,o);break e}else if(r!==o){o=mi(Error(K(424)),t),t=yv(e,t,r,n,o);break e}else for(wn=ho(t.stateNode.containerInfo.firstChild),xn=t,it=!0,Kn=null,n=CS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fi(),r===o){t=jr(e,t,n);break e}en(e,t,r,n)}t=t.child}return t;case 5:return AS(t),e===null&&ph(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,ch(r,o)?i=null:s!==null&&ch(r,s)&&(t.flags|=32),ZS(e,t),en(e,t,i,n),t.child;case 6:return e===null&&ph(t),null;case 13:return eb(e,t,n);case 4:return Zp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hi(t,null,r,n):en(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),pv(e,t,r,o,n);case 7:return en(e,t,t.pendingProps,n),t.child;case 8:return en(e,t,t.pendingProps.children,n),t.child;case 12:return en(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,tt(Fc,r._currentValue),r._currentValue=i,s!==null)if(Zn(s.value,i)){if(s.children===o.children&&!dn.current){t=jr(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ir(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),mh(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(K(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),mh(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}en(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ws(t,n),o=Fn(o),r=r(o),t.flags|=1,en(e,t,r,n),t.child;case 14:return r=t.type,o=qn(r,t.pendingProps),o=qn(r.type,o),mv(e,t,r,o,n);case 15:return QS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qn(r,o),cc(e,t),t.tag=1,fn(r)?(e=!0,_c(t)):e=!1,Ws(t,n),GS(t,r,o),yh(t,r,o,n),xh(null,t,r,!0,e,n);case 19:return tb(e,t,n);case 22:return XS(e,t,n)}throw Error(K(156,t.tag))};function yb(e,t){return qx(e,t)}function GM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,t,n,r){return new GM(e,t,n,r)}function hm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KM(e){if(typeof e=="function")return hm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ip)return 11;if(e===_p)return 14}return 2}function yo(e,t){var n=e.alternate;return n===null?(n=In(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fc(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")hm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Es:return Qo(n.children,o,s,t);case Rp:i=8,o|=8;break;case Vf:return e=In(12,n,t,o|2),e.elementType=Vf,e.lanes=s,e;case Bf:return e=In(13,n,t,o),e.elementType=Bf,e.lanes=s,e;case zf:return e=In(19,n,t,o),e.elementType=zf,e.lanes=s,e;case Ax:return Pu(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tx:i=10;break e;case Dx:i=9;break e;case Ip:i=11;break e;case _p:i=14;break e;case Xr:i=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=In(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Qo(e,t,n,r){return e=In(7,e,r,t),e.lanes=n,e}function Pu(e,t,n,r){return e=In(22,e,r,t),e.elementType=Ax,e.lanes=n,e.stateNode={isHidden:!1},e}function Vd(e,t,n){return e=In(6,e,null,t),e.lanes=n,e}function Bd(e,t,n){return t=In(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function YM(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function pm(e,t,n,r,o,s,i,a,l){return e=new YM(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=In(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xp(s),e}function QM(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vb(e){if(!e)return So;e=e._reactInternals;e:{if(cs(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(fn(n))return vS(e,n,t)}return t}function wb(e,t,n,r,o,s,i,a,l){return e=pm(n,r,!0,e,o,s,i,a,l),e.context=vb(null),n=e.current,r=nn(),o=go(n),s=Ir(r,o),s.callback=t??null,po(n,s,o),e.current.lanes=o,Ja(e,o,r),hn(e,r),e}function ku(e,t,n,r){var o=t.current,s=nn(),i=go(o);return n=vb(n),t.context===null?t.context=n:t.pendingContext=n,t=Ir(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=po(o,t,i),e!==null&&(Qn(e,o,i,s),ic(e,o,i)),i}function Hc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Av(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mm(e,t){Av(e,t),(e=e.alternate)&&Av(e,t)}function XM(){return null}var xb=typeof reportError=="function"?reportError:function(e){console.error(e)};function gm(e){this._internalRoot=e}Mu.prototype.render=gm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));ku(e,t,null,null)};Mu.prototype.unmount=gm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rs(function(){ku(null,e,null,null)}),t[Fr]=null}};function Mu(e){this._internalRoot=e}Mu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jr.length&&t!==0&&t<Jr[n].priority;n++);Jr.splice(n,0,e),n===0&&Jx(e)}};function ym(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ru(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pv(){}function ZM(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Hc(i);s.call(c)}}var i=wb(t,r,e,0,null,!1,!1,"",Pv);return e._reactRootContainer=i,e[Fr]=i.current,Da(e.nodeType===8?e.parentNode:e),rs(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=Hc(l);a.call(c)}}var l=pm(e,0,!1,null,null,!1,!1,"",Pv);return e._reactRootContainer=l,e[Fr]=l.current,Da(e.nodeType===8?e.parentNode:e),rs(function(){ku(t,l,n,r)}),l}function Iu(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=Hc(i);a.call(l)}}ku(t,i,e,o)}else i=ZM(n,t,e,o,r);return Hc(i)}Yx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xi(t.pendingLanes);n!==0&&(Fp(t,n|1),hn(t,Tt()),!(Le&6)&&(gi=Tt()+500,ko()))}break;case 13:rs(function(){var r=Or(e,1);if(r!==null){var o=nn();Qn(r,e,1,o)}}),mm(e,1)}};Op=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var n=nn();Qn(t,e,134217728,n)}mm(e,134217728)}};Qx=function(e){if(e.tag===13){var t=go(e),n=Or(e,t);if(n!==null){var r=nn();Qn(n,e,t,r)}mm(e,t)}};Xx=function(){return Ke};Zx=function(e,t){var n=Ke;try{return Ke=e,t()}finally{Ke=n}};Jf=function(e,t,n){switch(t){case"input":if(Hf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=bu(r);if(!o)throw Error(K(90));kx(r),Hf(r,o)}}}break;case"textarea":Rx(e,n);break;case"select":t=n.value,t!=null&&Vs(e,!!n.multiple,t,!1)}};jx=um;$x=rs;var JM={usingClientEntryPoint:!1,Events:[tl,As,bu,Fx,Ox,um]},Bi={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eR={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bx(e),e===null?null:e.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||XM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{vu=jl.inject(eR),fr=jl}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JM;Cn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ym(t))throw Error(K(200));return QM(e,t,null,n)};Cn.createRoot=function(e,t){if(!ym(e))throw Error(K(299));var n=!1,r="",o=xb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=pm(e,1,!1,null,null,n,!1,r,o),e[Fr]=t.current,Da(e.nodeType===8?e.parentNode:e),new gm(t)};Cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Bx(t),e=e===null?null:e.stateNode,e};Cn.flushSync=function(e){return rs(e)};Cn.hydrate=function(e,t,n){if(!Ru(t))throw Error(K(200));return Iu(null,e,t,!0,n)};Cn.hydrateRoot=function(e,t,n){if(!ym(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=xb;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=wb(t,null,e,1,n??null,o,!1,s,i),e[Fr]=t.current,Da(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Mu(t)};Cn.render=function(e,t,n){if(!Ru(t))throw Error(K(200));return Iu(null,e,t,!1,n)};Cn.unmountComponentAtNode=function(e){if(!Ru(e))throw Error(K(40));return e._reactRootContainer?(rs(function(){Iu(null,null,e,!1,function(){e._reactRootContainer=null,e[Fr]=null})}),!0):!1};Cn.unstable_batchedUpdates=um;Cn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ru(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Iu(e,t,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sb)}catch(e){console.error(e)}}Sb(),Sx.exports=Cn;var rl=Sx.exports;const tR=Ep(rl);var bb,kv=rl;bb=kv.createRoot,kv.hydrateRoot;function nR(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,o,s,i=[],a="",l=e.split("/");for(l[0]||l.shift();o=l.shift();)n=o[0],n==="*"?(i.push(n),a+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),s=o.indexOf(".",1),i.push(o.substring(1,~r?r:~s?s:o.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+o.substring(s))):a+="/"+o;return{keys:i,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}var Eb={exports:{}},Cb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yi=f;function rR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oR=typeof Object.is=="function"?Object.is:rR,sR=yi.useState,iR=yi.useEffect,aR=yi.useLayoutEffect,lR=yi.useDebugValue;function cR(e,t){var n=t(),r=sR({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return aR(function(){o.value=n,o.getSnapshot=t,zd(o)&&s({inst:o})},[e,n,t]),iR(function(){return zd(o)&&s({inst:o}),e(function(){zd(o)&&s({inst:o})})},[e]),lR(n),n}function zd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oR(e,n)}catch{return!0}}function uR(e,t){return t()}var dR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uR:cR;Cb.useSyncExternalStore=yi.useSyncExternalStore!==void 0?yi.useSyncExternalStore:dR;Eb.exports=Cb;var fR=Eb.exports;const hR=wx.useInsertionEffect,pR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mR=pR?f.useLayoutEffect:f.useEffect,gR=hR||mR,Tb=e=>{const t=f.useRef([e,(...n)=>t[0](...n)]).current;return gR(()=>{t[0]=e}),t[1]},yR="popstate",vm="pushState",wm="replaceState",vR="hashchange",Mv=[yR,vm,wm,vR],wR=e=>{for(const t of Mv)addEventListener(t,e);return()=>{for(const t of Mv)removeEventListener(t,e)}},Db=(e,t)=>fR.useSyncExternalStore(wR,e,t),xR=()=>location.search,SR=({ssrSearch:e=""}={})=>Db(xR,()=>e),Rv=()=>location.pathname,bR=({ssrPath:e}={})=>Db(Rv,e?()=>e:Rv),ER=(e,{replace:t=!1,state:n=null}={})=>history[t?wm:vm](n,"",e),CR=(e={})=>[bR(e),ER],Iv=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Iv]>"u"){for(const e of[vm,wm]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Iv,{value:!0})}const TR=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Ab=(e="")=>e==="/"?"":e,DR=(e,t)=>e[0]==="~"?e.slice(1):Ab(t)+e,AR=(e="",t)=>TR(_v(Ab(e)),_v(t)),_v=e=>{try{return decodeURI(e)}catch{return e}},Pb={hook:CR,searchHook:SR,parser:nR,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},kb=f.createContext(Pb),ol=()=>f.useContext(kb),Mb={},Rb=f.createContext(Mb),PR=()=>f.useContext(Rb),_u=e=>{const[t,n]=e.hook(e);return[AR(e.base,t),Tb((r,o)=>n(DR(r,e.base),o))]},xm=()=>_u(ol()),Ib=(e,t,n,r)=>{const{pattern:o,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),i=o.exec(n)||[],[a,...l]=i;return a!==void 0?[!0,(()=>{const c=s!==!1?Object.fromEntries(s.map((u,h)=>[u,l[h]])):i.groups;let d={...l};return c&&Object.assign(d,c),d})(),...r?[a]:[]]:[!1,null]},_b=({children:e,...t})=>{var d,u;const n=ol(),r=t.hook?Pb:n;let o=r;const[s,i]=((d=t.ssrPath)==null?void 0:d.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=s),t.hrefs=t.hrefs??((u=t.hook)==null?void 0:u.hrefs);let a=f.useRef({}),l=a.current,c=l;for(let h in r){const w=h==="base"?r[h]+(t[h]||""):t[h]||r[h];l===c&&w!==c[h]&&(a.current=c={...c}),c[h]=w,w!==r[h]&&(o=c)}return f.createElement(kb.Provider,{value:o,children:e})},Nv=({children:e,component:t},n)=>t?f.createElement(t,{params:n}):typeof e=="function"?e(n):e,kR=e=>{let t=f.useRef(Mb),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},zi=({path:e,nest:t,match:n,...r})=>{const o=ol(),[s]=_u(o),[i,a,l]=n??Ib(o.parser,e,s,t),c=kR({...PR(),...a});if(!i)return null;const d=l?f.createElement(_b,{base:l},Nv(r,c)):Nv(r,c);return f.createElement(Rb.Provider,{value:c,children:d})},MR=f.forwardRef((e,t)=>{const n=ol(),[r,o]=_u(n),{to:s="",href:i=s,onClick:a,asChild:l,children:c,className:d,replace:u,state:h,...w}=e,y=Tb(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(a==null||a(b),b.defaultPrevented||(b.preventDefault(),o(i,e)))}),x=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return l&&f.isValidElement(c)?f.cloneElement(c,{onClick:y,href:x}):f.createElement("a",{...w,onClick:y,href:x,className:d!=null&&d.call?d(r===i):d,children:c,ref:t})}),Nb=e=>Array.isArray(e)?e.flatMap(t=>Nb(t&&t.type===f.Fragment?t.props.children:t)):[e],RR=({children:e,location:t})=>{const n=ol(),[r]=_u(n);for(const o of Nb(e)){let s=0;if(f.isValidElement(o)&&(s=Ib(n.parser,o.props.path,t||r,o.props.nest))[0])return f.cloneElement(o,{match:s})}return null};var Nu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lu=typeof window>"u"||"Deno"in globalThis;function Wn(){}function IR(e,t){return typeof e=="function"?e(t):e}function _R(e){return typeof e=="number"&&e>=0&&e!==1/0}function NR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Lv(e,t){return typeof e=="function"?e(t):e}function LR(e,t){return typeof e=="function"?e(t):e}function Fv(e,t){const{type:n="all",exact:r,fetchStatus:o,predicate:s,queryKey:i,stale:a}=e;if(i){if(r){if(t.queryHash!==Sm(i,t.options))return!1}else if(!Fa(t.queryKey,i))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||o&&o!==t.state.fetchStatus||s&&!s(t))}function Ov(e,t){const{exact:n,status:r,predicate:o,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(La(t.options.mutationKey)!==La(s))return!1}else if(!Fa(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||o&&!o(t))}function Sm(e,t){return((t==null?void 0:t.queryKeyHashFn)||La)(e)}function La(e){return JSON.stringify(e,(t,n)=>Ih(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function Fa(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Fa(e[n],t[n])):!1}function Lb(e,t){if(e===t)return e;const n=jv(e)&&jv(t);if(n||Ih(e)&&Ih(t)){const r=n?e:Object.keys(e),o=r.length,s=n?t:Object.keys(t),i=s.length,a=n?[]:{};let l=0;for(let c=0;c<i;c++){const d=n?c:s[c];(!n&&r.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(a[d]=void 0,l++):(a[d]=Lb(e[d],t[d]),a[d]===e[d]&&e[d]!==void 0&&l++)}return o===i&&l===o?e:a}return t}function jv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ih(e){if(!$v(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!$v(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function $v(e){return Object.prototype.toString.call(e)==="[object Object]"}function FR(e){return new Promise(t=>{setTimeout(t,e)})}function OR(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Lb(e,t):t}function jR(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function $R(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var bm=Symbol();function Fb(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===bm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Wo,to,ti,tx,UR=(tx=class extends Nu{constructor(){super();ze(this,Wo);ze(this,to);ze(this,ti);Pe(this,ti,t=>{if(!Lu&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){V(this,to)||this.setEventListener(V(this,ti))}onUnsubscribe(){var t;this.hasListeners()||((t=V(this,to))==null||t.call(this),Pe(this,to,void 0))}setEventListener(t){var n;Pe(this,ti,t),(n=V(this,to))==null||n.call(this),Pe(this,to,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){V(this,Wo)!==t&&(Pe(this,Wo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof V(this,Wo)=="boolean"?V(this,Wo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Wo=new WeakMap,to=new WeakMap,ti=new WeakMap,tx),Ob=new UR,ni,no,ri,nx,VR=(nx=class extends Nu{constructor(){super();ze(this,ni,!0);ze(this,no);ze(this,ri);Pe(this,ri,t=>{if(!Lu&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){V(this,no)||this.setEventListener(V(this,ri))}onUnsubscribe(){var t;this.hasListeners()||((t=V(this,no))==null||t.call(this),Pe(this,no,void 0))}setEventListener(t){var n;Pe(this,ri,t),(n=V(this,no))==null||n.call(this),Pe(this,no,t(this.setOnline.bind(this)))}setOnline(t){V(this,ni)!==t&&(Pe(this,ni,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return V(this,ni)}},ni=new WeakMap,no=new WeakMap,ri=new WeakMap,nx),Gc=new VR;function BR(){let e,t;const n=new Promise((o,s)=>{e=o,t=s});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),e(o)},n.reject=o=>{r({status:"rejected",reason:o}),t(o)},n}function zR(e){return Math.min(1e3*2**e,3e4)}function jb(e){return(e??"online")==="online"?Gc.isOnline():!0}var $b=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function qd(e){return e instanceof $b}function Ub(e){let t=!1,n=0,r=!1,o;const s=BR(),i=x=>{var b;r||(h(new $b(x)),(b=e.abort)==null||b.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>Ob.isFocused()&&(e.networkMode==="always"||Gc.isOnline())&&e.canRun(),d=()=>jb(e.networkMode)&&e.canRun(),u=x=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,x),o==null||o(),s.resolve(x))},h=x=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,x),o==null||o(),s.reject(x))},w=()=>new Promise(x=>{var b;o=g=>{(r||c())&&x(g)},(b=e.onPause)==null||b.call(e)}).then(()=>{var x;o=void 0,r||(x=e.onContinue)==null||x.call(e)}),y=()=>{if(r)return;let x;const b=n===0?e.initialPromise:void 0;try{x=b??e.fn()}catch(g){x=Promise.reject(g)}Promise.resolve(x).then(u).catch(g=>{var T;if(r)return;const v=e.retry??(Lu?0:3),S=e.retryDelay??zR,E=typeof S=="function"?S(n,g):S,C=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,g);if(t||!C){h(g);return}n++,(T=e.onFail)==null||T.call(e,n,g),FR(E).then(()=>c()?void 0:w()).then(()=>{t?h(g):y()})})};return{promise:s,cancel:i,continue:()=>(o==null||o(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?y():w().then(y),s)}}function qR(){let e=[],t=0,n=a=>{a()},r=a=>{a()},o=a=>setTimeout(a,0);const s=a=>{t?e.push(a):o(()=>{n(a)})},i=()=>{const a=e;e=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||i()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var tn=qR(),Ho,rx,Vb=(rx=class{constructor(){ze(this,Ho)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_R(this.gcTime)&&Pe(this,Ho,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Lu?1/0:5*60*1e3))}clearGcTimeout(){V(this,Ho)&&(clearTimeout(V(this,Ho)),Pe(this,Ho,void 0))}},Ho=new WeakMap,rx),oi,si,kn,qt,Qa,Go,Hn,Tr,ox,WR=(ox=class extends Vb{constructor(t){super();ze(this,Hn);ze(this,oi);ze(this,si);ze(this,kn);ze(this,qt);ze(this,Qa);ze(this,Go);Pe(this,Go,!1),Pe(this,Qa,t.defaultOptions),this.setOptions(t.options),this.observers=[],Pe(this,kn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Pe(this,oi,GR(this.options)),this.state=t.state??V(this,oi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=V(this,qt))==null?void 0:t.promise}setOptions(t){this.options={...V(this,Qa),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,kn).remove(this)}setData(t,n){const r=OR(this.state.data,t,this.options);return Vt(this,Hn,Tr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Vt(this,Hn,Tr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,o;const n=(r=V(this,qt))==null?void 0:r.promise;return(o=V(this,qt))==null||o.cancel(t),n?n.then(Wn).catch(Wn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,oi))}isActive(){return this.observers.some(t=>LR(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!NR(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=V(this,qt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=V(this,qt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),V(this,kn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(V(this,qt)&&(V(this,Go)?V(this,qt).cancel({revert:!0}):V(this,qt).cancelRetry()),this.scheduleGc()),V(this,kn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Vt(this,Hn,Tr).call(this,{type:"invalidate"})}fetch(t,n){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(V(this,qt))return V(this,qt).continueRetry(),V(this,qt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,o=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(Pe(this,Go,!0),r.signal)})},s=()=>{const u=Fb(this.options,n),h={queryKey:this.queryKey,meta:this.meta};return o(h),Pe(this,Go,!1),this.options.persister?this.options.persister(u,h,this):u(h)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};o(i),(l=this.options.behavior)==null||l.onFetch(i,this),Pe(this,si,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=i.fetchOptions)==null?void 0:c.meta))&&Vt(this,Hn,Tr).call(this,{type:"fetch",meta:(d=i.fetchOptions)==null?void 0:d.meta});const a=u=>{var h,w,y,x;qd(u)&&u.silent||Vt(this,Hn,Tr).call(this,{type:"error",error:u}),qd(u)||((w=(h=V(this,kn).config).onError)==null||w.call(h,u,this),(x=(y=V(this,kn).config).onSettled)==null||x.call(y,this.state.data,u,this)),this.scheduleGc()};return Pe(this,qt,Ub({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:u=>{var h,w,y,x;if(u===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(b){a(b);return}(w=(h=V(this,kn).config).onSuccess)==null||w.call(h,u,this),(x=(y=V(this,kn).config).onSettled)==null||x.call(y,u,this.state.error,this),this.scheduleGc()},onError:a,onFail:(u,h)=>{Vt(this,Hn,Tr).call(this,{type:"failed",failureCount:u,error:h})},onPause:()=>{Vt(this,Hn,Tr).call(this,{type:"pause"})},onContinue:()=>{Vt(this,Hn,Tr).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),V(this,qt).start()}},oi=new WeakMap,si=new WeakMap,kn=new WeakMap,qt=new WeakMap,Qa=new WeakMap,Go=new WeakMap,Hn=new WeakSet,Tr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...HR(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return qd(o)&&o.revert&&V(this,si)?{...V(this,si),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),V(this,kn).notify({query:this,type:"updated",action:t})})},ox);function HR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jb(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function GR(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ir,sx,KR=(sx=class extends Nu{constructor(t={}){super();ze(this,ir);this.config=t,Pe(this,ir,new Map)}build(t,n,r){const o=n.queryKey,s=n.queryHash??Sm(o,n);let i=this.get(s);return i||(i=new WR({cache:this,queryKey:o,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(o)}),this.add(i)),i}add(t){V(this,ir).has(t.queryHash)||(V(this,ir).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=V(this,ir).get(t.queryHash);n&&(t.destroy(),n===t&&V(this,ir).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return V(this,ir).get(t)}getAll(){return[...V(this,ir).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Fv(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Fv(t,r)):n}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ir=new WeakMap,sx),ar,Jt,Ko,lr,Kr,ix,YR=(ix=class extends Vb{constructor(t){super();ze(this,lr);ze(this,ar);ze(this,Jt);ze(this,Ko);this.mutationId=t.mutationId,Pe(this,Jt,t.mutationCache),Pe(this,ar,[]),this.state=t.state||QR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){V(this,ar).includes(t)||(V(this,ar).push(t),this.clearGcTimeout(),V(this,Jt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Pe(this,ar,V(this,ar).filter(n=>n!==t)),this.scheduleGc(),V(this,Jt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){V(this,ar).length||(this.state.status==="pending"?this.scheduleGc():V(this,Jt).remove(this))}continue(){var t;return((t=V(this,Ko))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,s,i,a,l,c,d,u,h,w,y,x,b,g,v,S,E,C,T,A;Pe(this,Ko,Ub({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,M)=>{Vt(this,lr,Kr).call(this,{type:"failed",failureCount:P,error:M})},onPause:()=>{Vt(this,lr,Kr).call(this,{type:"pause"})},onContinue:()=>{Vt(this,lr,Kr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,Jt).canRun(this)}));const n=this.state.status==="pending",r=!V(this,Ko).canStart();try{if(!n){Vt(this,lr,Kr).call(this,{type:"pending",variables:t,isPaused:r}),await((s=(o=V(this,Jt).config).onMutate)==null?void 0:s.call(o,t,this));const M=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,t));M!==this.state.context&&Vt(this,lr,Kr).call(this,{type:"pending",context:M,variables:t,isPaused:r})}const P=await V(this,Ko).start();return await((c=(l=V(this,Jt).config).onSuccess)==null?void 0:c.call(l,P,t,this.state.context,this)),await((u=(d=this.options).onSuccess)==null?void 0:u.call(d,P,t,this.state.context)),await((w=(h=V(this,Jt).config).onSettled)==null?void 0:w.call(h,P,null,this.state.variables,this.state.context,this)),await((x=(y=this.options).onSettled)==null?void 0:x.call(y,P,null,t,this.state.context)),Vt(this,lr,Kr).call(this,{type:"success",data:P}),P}catch(P){try{throw await((g=(b=V(this,Jt).config).onError)==null?void 0:g.call(b,P,t,this.state.context,this)),await((S=(v=this.options).onError)==null?void 0:S.call(v,P,t,this.state.context)),await((C=(E=V(this,Jt).config).onSettled)==null?void 0:C.call(E,void 0,P,this.state.variables,this.state.context,this)),await((A=(T=this.options).onSettled)==null?void 0:A.call(T,void 0,P,t,this.state.context)),P}finally{Vt(this,lr,Kr).call(this,{type:"error",error:P})}}finally{V(this,Jt).runNext(this)}}},ar=new WeakMap,Jt=new WeakMap,Ko=new WeakMap,lr=new WeakSet,Kr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tn.batch(()=>{V(this,ar).forEach(r=>{r.onMutationUpdate(t)}),V(this,Jt).notify({mutation:this,type:"updated",action:t})})},ix);function QR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var gn,Xa,ax,XR=(ax=class extends Nu{constructor(t={}){super();ze(this,gn);ze(this,Xa);this.config=t,Pe(this,gn,new Map),Pe(this,Xa,Date.now())}build(t,n,r){const o=new YR({mutationCache:this,mutationId:++Sl(this,Xa)._,options:t.defaultMutationOptions(n),state:r});return this.add(o),o}add(t){const n=$l(t),r=V(this,gn).get(n)??[];r.push(t),V(this,gn).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=$l(t);if(V(this,gn).has(n)){const o=(r=V(this,gn).get(n))==null?void 0:r.filter(s=>s!==t);o&&(o.length===0?V(this,gn).delete(n):V(this,gn).set(n,o))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=V(this,gn).get($l(t)))==null?void 0:r.find(o=>o.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=V(this,gn).get($l(t)))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...V(this,gn).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Ov(n,r))}findAll(t={}){return this.getAll().filter(n=>Ov(t,n))}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Wn))))}},gn=new WeakMap,Xa=new WeakMap,ax);function $l(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Uv(e){return{onFetch:(t,n)=>{var d,u,h,w,y;const r=t.options,o=(h=(u=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:h.direction,s=((w=t.state.data)==null?void 0:w.pages)||[],i=((y=t.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let x=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},g=Fb(t.options,t.fetchOptions),v=async(S,E,C)=>{if(x)return Promise.reject();if(E==null&&S.pages.length)return Promise.resolve(S);const T={queryKey:t.queryKey,pageParam:E,direction:C?"backward":"forward",meta:t.options.meta};b(T);const A=await g(T),{maxPages:P}=t.options,M=C?$R:jR;return{pages:M(S.pages,A,P),pageParams:M(S.pageParams,E,P)}};if(o&&s.length){const S=o==="backward",E=S?ZR:Vv,C={pages:s,pageParams:i},T=E(r,C);a=await v(C,T,S)}else{const S=e??s.length;do{const E=l===0?i[0]??r.initialPageParam:Vv(r,a);if(l>0&&E==null)break;a=await v(a,E),l++}while(l<S)}return a};t.options.persister?t.fetchFn=()=>{var x,b;return(b=(x=t.options).persister)==null?void 0:b.call(x,c,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Vv(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function ZR(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var wt,ro,oo,ii,ai,so,li,ci,lx,JR=(lx=class{constructor(e={}){ze(this,wt);ze(this,ro);ze(this,oo);ze(this,ii);ze(this,ai);ze(this,so);ze(this,li);ze(this,ci);Pe(this,wt,e.queryCache||new KR),Pe(this,ro,e.mutationCache||new XR),Pe(this,oo,e.defaultOptions||{}),Pe(this,ii,new Map),Pe(this,ai,new Map),Pe(this,so,0)}mount(){Sl(this,so)._++,V(this,so)===1&&(Pe(this,li,Ob.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,wt).onFocus())})),Pe(this,ci,Gc.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,wt).onOnline())})))}unmount(){var e,t;Sl(this,so)._--,V(this,so)===0&&((e=V(this,li))==null||e.call(this),Pe(this,li,void 0),(t=V(this,ci))==null||t.call(this),Pe(this,ci,void 0))}isFetching(e){return V(this,wt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return V(this,ro).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=V(this,wt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=V(this,wt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Lv(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return V(this,wt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=V(this,wt).get(r.queryHash),s=o==null?void 0:o.state.data,i=IR(t,s);if(i!==void 0)return V(this,wt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return tn.batch(()=>V(this,wt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=V(this,wt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=V(this,wt);tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=V(this,wt),r={type:"active",...e};return tn.batch(()=>(n.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=tn.batch(()=>V(this,wt).findAll(e).map(o=>o.cancel(n)));return Promise.all(r).then(Wn).catch(Wn)}invalidateQueries(e={},t={}){return tn.batch(()=>{if(V(this,wt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=tn.batch(()=>V(this,wt).findAll(e).filter(o=>!o.isDisabled()).map(o=>{let s=o.fetch(void 0,n);return n.throwOnError||(s=s.catch(Wn)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Wn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=V(this,wt).build(this,t);return n.isStaleByTime(Lv(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Wn).catch(Wn)}fetchInfiniteQuery(e){return e.behavior=Uv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Wn).catch(Wn)}ensureInfiniteQueryData(e){return e.behavior=Uv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Gc.isOnline()?V(this,ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,wt)}getMutationCache(){return V(this,ro)}getDefaultOptions(){return V(this,oo)}setDefaultOptions(e){Pe(this,oo,e)}setQueryDefaults(e,t){V(this,ii).set(La(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...V(this,ii).values()];let n={};return t.forEach(r=>{Fa(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){V(this,ai).set(La(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...V(this,ai).values()];let n={};return t.forEach(r=>{Fa(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...V(this,oo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Sm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===bm&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...V(this,oo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){V(this,wt).clear(),V(this,ro).clear()}},wt=new WeakMap,ro=new WeakMap,oo=new WeakMap,ii=new WeakMap,ai=new WeakMap,so=new WeakMap,li=new WeakMap,ci=new WeakMap,lx),eI=f.createContext(void 0),tI=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),p.jsx(eI.Provider,{value:e,children:t}));async function nI(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}const rI=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await nI(n),await n.json())},oI=new JR({defaultOptions:{queries:{queryFn:rI({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),sI=1,iI=1e6;let Wd=0;function aI(){return Wd=(Wd+1)%Number.MAX_SAFE_INTEGER,Wd.toString()}const Hd=new Map,Bv=e=>{if(Hd.has(e))return;const t=setTimeout(()=>{Hd.delete(e),fa({type:"REMOVE_TOAST",toastId:e})},iI);Hd.set(e,t)},lI=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,sI)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Bv(n):e.toasts.forEach(r=>{Bv(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},hc=[];let pc={toasts:[]};function fa(e){pc=lI(pc,e),hc.forEach(t=>{t(pc)})}function cI({...e}){const t=aI(),n=o=>fa({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>fa({type:"DISMISS_TOAST",toastId:t});return fa({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function sl(){const[e,t]=f.useState(pc);return f.useEffect(()=>(hc.push(t),()=>{const n=hc.indexOf(t);n>-1&&hc.splice(n,1)}),[e]),{...e,toast:cI,dismiss:n=>fa({type:"DISMISS_TOAST",toastId:n})}}function re(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function zv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Fu(...e){return t=>{let n=!1;const r=e.map(o=>{const s=zv(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():zv(e[o],null)}}}}function Ie(...e){return f.useCallback(Fu(...e),e)}function uI(e,t){const n=f.createContext(t),r=s=>{const{children:i,...a}=s,l=f.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function o(s){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,o]}function pn(e,t=[]){let n=[];function r(s,i){const a=f.createContext(i),l=n.length;n=[...n,i];const c=u=>{var g;const{scope:h,children:w,...y}=u,x=((g=h==null?void 0:h[e])==null?void 0:g[l])||a,b=f.useMemo(()=>y,Object.values(y));return p.jsx(x.Provider,{value:b,children:w})};c.displayName=s+"Provider";function d(u,h){var x;const w=((x=h==null?void 0:h[e])==null?void 0:x[l])||a,y=f.useContext(w);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${u}\` must be used within \`${s}\``)}return[c,d]}const o=()=>{const s=n.map(i=>f.createContext(i));return function(a){const l=(a==null?void 0:a[e])||s;return f.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,dI(o,...t)]}function dI(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...a,...u}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function vi(e){const t=hI(e),n=f.forwardRef((r,o)=>{const{children:s,...i}=r,a=f.Children.toArray(s),l=a.find(pI);if(l){const c=l.props.children,d=a.map(u=>u===l?f.Children.count(c)>1?f.Children.only(null):f.isValidElement(c)?c.props.children:null:u);return p.jsx(t,{...i,ref:o,children:f.isValidElement(c)?f.cloneElement(c,void 0,d):null})}return p.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var fI=vi("Slot");function hI(e){const t=f.forwardRef((n,r)=>{const{children:o,...s}=n;if(f.isValidElement(o)){const i=gI(o),a=mI(s,o.props);return o.type!==f.Fragment&&(a.ref=r?Fu(r,i):i),f.cloneElement(o,a)}return f.Children.count(o)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Bb=Symbol("radix.slottable");function zb(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Bb,t}function pI(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Bb}function mI(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function gI(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ou(e){const t=e+"CollectionProvider",[n,r]=pn(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:b,children:g}=x,v=At.useRef(null),S=At.useRef(new Map).current;return p.jsx(o,{scope:b,itemMap:S,collectionRef:v,children:g})};i.displayName=t;const a=e+"CollectionSlot",l=vi(a),c=At.forwardRef((x,b)=>{const{scope:g,children:v}=x,S=s(a,g),E=Ie(b,S.collectionRef);return p.jsx(l,{ref:E,children:v})});c.displayName=a;const d=e+"CollectionItemSlot",u="data-radix-collection-item",h=vi(d),w=At.forwardRef((x,b)=>{const{scope:g,children:v,...S}=x,E=At.useRef(null),C=Ie(b,E),T=s(d,g);return At.useEffect(()=>(T.itemMap.set(E,{ref:E,...S}),()=>void T.itemMap.delete(E))),p.jsx(h,{[u]:"",ref:C,children:v})});w.displayName=d;function y(x){const b=s(e+"CollectionConsumer",x);return At.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const S=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(b.itemMap.values()).sort((T,A)=>S.indexOf(T.ref.current)-S.indexOf(A.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:i,Slot:c,ItemSlot:w},y,r]}var yI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Se=yI.reduce((e,t)=>{const n=vi(`Primitive.${t}`),r=f.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Em(e,t){e&&rl.flushSync(()=>e.dispatchEvent(t))}function ft(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function vI(e,t=globalThis==null?void 0:globalThis.document){const n=ft(e);f.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var wI="DismissableLayer",_h="dismissableLayer.update",xI="dismissableLayer.pointerDownOutside",SI="dismissableLayer.focusOutside",qv,qb=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),il=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=e,c=f.useContext(qb),[d,u]=f.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=f.useState({}),y=Ie(t,A=>u(A)),x=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(b),v=d?x.indexOf(d):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=v>=g,C=EI(A=>{const P=A.target,M=[...c.branches].some(I=>I.contains(P));!E||M||(o==null||o(A),i==null||i(A),A.defaultPrevented||a==null||a())},h),T=CI(A=>{const P=A.target;[...c.branches].some(I=>I.contains(P))||(s==null||s(A),i==null||i(A),A.defaultPrevented||a==null||a())},h);return vI(A=>{v===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},h),f.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(qv=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),Wv(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=qv)}},[d,h,n,c]),f.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),Wv())},[d,c]),f.useEffect(()=>{const A=()=>w({});return document.addEventListener(_h,A),()=>document.removeEventListener(_h,A)},[]),p.jsx(Se.div,{...l,ref:y,style:{pointerEvents:S?E?"auto":"none":void 0,...e.style},onFocusCapture:re(e.onFocusCapture,T.onFocusCapture),onBlurCapture:re(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:re(e.onPointerDownCapture,C.onPointerDownCapture)})});il.displayName=wI;var bI="DismissableLayerBranch",Wb=f.forwardRef((e,t)=>{const n=f.useContext(qb),r=f.useRef(null),o=Ie(t,r);return f.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(Se.div,{...e,ref:o})});Wb.displayName=bI;function EI(e,t=globalThis==null?void 0:globalThis.document){const n=ft(e),r=f.useRef(!1),o=f.useRef(()=>{});return f.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){Hb(xI,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function CI(e,t=globalThis==null?void 0:globalThis.document){const n=ft(e),r=f.useRef(!1);return f.useEffect(()=>{const o=s=>{s.target&&!r.current&&Hb(SI,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Wv(){const e=new CustomEvent(_h);document.dispatchEvent(e)}function Hb(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Em(o,s):o.dispatchEvent(s)}var TI=il,DI=Wb,jn=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},AI="Portal",ju=f.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,s]=f.useState(!1);jn(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?tR.createPortal(p.jsx(Se.div,{...r,ref:t}),i):null});ju.displayName=AI;function PI(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var mn=e=>{const{present:t,children:n}=e,r=kI(t),o=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),s=Ie(r.ref,MI(o));return typeof n=="function"||r.isPresent?f.cloneElement(o,{ref:s}):null};mn.displayName="Presence";function kI(e){const[t,n]=f.useState(),r=f.useRef({}),o=f.useRef(e),s=f.useRef("none"),i=e?"mounted":"unmounted",[a,l]=PI(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const c=Ul(r.current);s.current=a==="mounted"?c:"none"},[a]),jn(()=>{const c=r.current,d=o.current;if(d!==e){const h=s.current,w=Ul(c);e?l("MOUNT"):w==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&h!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),jn(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,u=w=>{const x=Ul(r.current).includes(w.animationName);if(w.target===t&&x&&(l("ANIMATION_END"),!o.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},h=w=>{w.target===t&&(s.current=Ul(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:f.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Ul(e){return(e==null?void 0:e.animationName)||"none"}function MI(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function wr({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=RI({defaultProp:t,onChange:n}),s=e!==void 0,i=s?e:r,a=ft(n),l=f.useCallback(c=>{if(s){const u=typeof c=="function"?c(e):c;u!==e&&a(u)}else o(c)},[s,e,o,a]);return[i,l]}function RI({defaultProp:e,onChange:t}){const n=f.useState(e),[r]=n,o=f.useRef(r),s=ft(t);return f.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var II="VisuallyHidden",$u=f.forwardRef((e,t)=>p.jsx(Se.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));$u.displayName=II;var _I=$u,Cm="ToastProvider",[Tm,NI,LI]=Ou("Toast"),[Gb,C3]=pn("Toast",[LI]),[FI,Uu]=Gb(Cm),Kb=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:i}=e,[a,l]=f.useState(null),[c,d]=f.useState(0),u=f.useRef(!1),h=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cm}\`. Expected non-empty \`string\`.`),p.jsx(Tm.Provider,{scope:t,children:p.jsx(FI,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:f.useCallback(()=>d(w=>w+1),[]),onToastRemove:f.useCallback(()=>d(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:i})})};Kb.displayName=Cm;var Yb="ToastViewport",OI=["F8"],Nh="toast.viewportPause",Lh="toast.viewportResume",Qb=f.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=OI,label:o="Notifications ({hotkey})",...s}=e,i=Uu(Yb,n),a=NI(n),l=f.useRef(null),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),h=Ie(t,u,i.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;f.useEffect(()=>{const b=g=>{var S;r.length!==0&&r.every(E=>g[E]||g.code===E)&&((S=u.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),f.useEffect(()=>{const b=l.current,g=u.current;if(y&&b&&g){const v=()=>{if(!i.isClosePausedRef.current){const T=new CustomEvent(Nh);g.dispatchEvent(T),i.isClosePausedRef.current=!0}},S=()=>{if(i.isClosePausedRef.current){const T=new CustomEvent(Lh);g.dispatchEvent(T),i.isClosePausedRef.current=!1}},E=T=>{!b.contains(T.relatedTarget)&&S()},C=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",v),b.addEventListener("focusout",E),b.addEventListener("pointermove",v),b.addEventListener("pointerleave",C),window.addEventListener("blur",v),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",v),b.removeEventListener("focusout",E),b.removeEventListener("pointermove",v),b.removeEventListener("pointerleave",C),window.removeEventListener("blur",v),window.removeEventListener("focus",S)}}},[y,i.isClosePausedRef]);const x=f.useCallback(({tabbingDirection:b})=>{const v=a().map(S=>{const E=S.ref.current,C=[E,...QI(E)];return b==="forwards"?C:C.reverse()});return(b==="forwards"?v.reverse():v).flat()},[a]);return f.useEffect(()=>{const b=u.current;if(b){const g=v=>{var C,T,A;const S=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!S){const P=document.activeElement,M=v.shiftKey;if(v.target===b&&M){(C=c.current)==null||C.focus();return}const N=x({tabbingDirection:M?"backwards":"forwards"}),U=N.findIndex(j=>j===P);Gd(N.slice(U+1))?v.preventDefault():M?(T=c.current)==null||T.focus():(A=d.current)==null||A.focus()}};return b.addEventListener("keydown",g),()=>b.removeEventListener("keydown",g)}},[a,x]),p.jsxs(DI,{ref:l,role:"region","aria-label":o.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&p.jsx(Fh,{ref:c,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"forwards"});Gd(b)}}),p.jsx(Tm.Slot,{scope:n,children:p.jsx(Se.ol,{tabIndex:-1,...s,ref:h})}),y&&p.jsx(Fh,{ref:d,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"backwards"});Gd(b)}})]})});Qb.displayName=Yb;var Xb="ToastFocusProxy",Fh=f.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,s=Uu(Xb,n);return p.jsx($u,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:i=>{var c;const a=i.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});Fh.displayName=Xb;var Vu="Toast",jI="toast.swipeStart",$I="toast.swipeMove",UI="toast.swipeCancel",VI="toast.swipeEnd",Zb=f.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:s,...i}=e,[a=!0,l]=wr({prop:r,defaultProp:o,onChange:s});return p.jsx(mn,{present:n||a,children:p.jsx(qI,{open:a,...i,ref:t,onClose:()=>l(!1),onPause:ft(e.onPause),onResume:ft(e.onResume),onSwipeStart:re(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:re(e.onSwipeMove,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:re(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:re(e.onSwipeEnd,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});Zb.displayName=Vu;var[BI,zI]=Gb(Vu,{onClose(){}}),qI=f.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:s,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:w,...y}=e,x=Uu(Vu,n),[b,g]=f.useState(null),v=Ie(t,j=>g(j)),S=f.useRef(null),E=f.useRef(null),C=o||x.duration,T=f.useRef(0),A=f.useRef(C),P=f.useRef(0),{onToastAdd:M,onToastRemove:I}=x,O=ft(()=>{var q;(b==null?void 0:b.contains(document.activeElement))&&((q=x.viewport)==null||q.focus()),i()}),N=f.useCallback(j=>{!j||j===1/0||(window.clearTimeout(P.current),T.current=new Date().getTime(),P.current=window.setTimeout(O,j))},[O]);f.useEffect(()=>{const j=x.viewport;if(j){const q=()=>{N(A.current),c==null||c()},_=()=>{const L=new Date().getTime()-T.current;A.current=A.current-L,window.clearTimeout(P.current),l==null||l()};return j.addEventListener(Nh,_),j.addEventListener(Lh,q),()=>{j.removeEventListener(Nh,_),j.removeEventListener(Lh,q)}}},[x.viewport,C,l,c,N]),f.useEffect(()=>{s&&!x.isClosePausedRef.current&&N(C)},[s,C,x.isClosePausedRef,N]),f.useEffect(()=>(M(),()=>I()),[M,I]);const U=f.useMemo(()=>b?sE(b):null,[b]);return x.viewport?p.jsxs(p.Fragment,{children:[U&&p.jsx(WI,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),p.jsx(BI,{scope:n,onClose:O,children:rl.createPortal(p.jsx(Tm.ItemSlot,{scope:n,children:p.jsx(TI,{asChild:!0,onEscapeKeyDown:re(a,()=>{x.isFocusedToastEscapeKeyDownRef.current||O(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Se.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...y,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:re(e.onKeyDown,j=>{j.key==="Escape"&&(a==null||a(j.nativeEvent),j.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:re(e.onPointerDown,j=>{j.button===0&&(S.current={x:j.clientX,y:j.clientY})}),onPointerMove:re(e.onPointerMove,j=>{if(!S.current)return;const q=j.clientX-S.current.x,_=j.clientY-S.current.y,L=!!E.current,k=["left","right"].includes(x.swipeDirection),R=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,F=k?R(0,q):0,W=k?0:R(0,_),J=j.pointerType==="touch"?10:2,be={x:F,y:W},se={originalEvent:j,delta:be};L?(E.current=be,Vl($I,u,se,{discrete:!1})):Hv(be,x.swipeDirection,J)?(E.current=be,Vl(jI,d,se,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(q)>J||Math.abs(_)>J)&&(S.current=null)}),onPointerUp:re(e.onPointerUp,j=>{const q=E.current,_=j.target;if(_.hasPointerCapture(j.pointerId)&&_.releasePointerCapture(j.pointerId),E.current=null,S.current=null,q){const L=j.currentTarget,k={originalEvent:j,delta:q};Hv(q,x.swipeDirection,x.swipeThreshold)?Vl(VI,w,k,{discrete:!0}):Vl(UI,h,k,{discrete:!0}),L.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),WI=e=>{const{__scopeToast:t,children:n,...r}=e,o=Uu(Vu,t),[s,i]=f.useState(!1),[a,l]=f.useState(!1);return KI(()=>i(!0)),f.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(ju,{asChild:!0,children:p.jsx($u,{...r,children:s&&p.jsxs(p.Fragment,{children:[o.label," ",n]})})})},HI="ToastTitle",Jb=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return p.jsx(Se.div,{...r,ref:t})});Jb.displayName=HI;var GI="ToastDescription",eE=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return p.jsx(Se.div,{...r,ref:t})});eE.displayName=GI;var tE="ToastAction",nE=f.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?p.jsx(oE,{altText:n,asChild:!0,children:p.jsx(Dm,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${tE}\`. Expected non-empty \`string\`.`),null)});nE.displayName=tE;var rE="ToastClose",Dm=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,o=zI(rE,n);return p.jsx(oE,{asChild:!0,children:p.jsx(Se.button,{type:"button",...r,ref:t,onClick:re(e.onClick,o.onClose)})})});Dm.displayName=rE;var oE=f.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...o}=e;return p.jsx(Se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function sE(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),YI(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...sE(r))}}),t}function Vl(e,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Em(o,s):o.dispatchEvent(s)}var Hv=(e,t,n=0)=>{const r=Math.abs(e.x),o=Math.abs(e.y),s=r>o;return t==="left"||t==="right"?s&&r>n:!s&&o>n};function KI(e=()=>{}){const t=ft(e);jn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function YI(e){return e.nodeType===e.ELEMENT_NODE}function QI(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Gd(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var XI=Kb,iE=Qb,aE=Zb,lE=Jb,cE=eE,uE=nE,dE=Dm;function fE(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=fE(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function hE(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=fE(e))&&(r&&(r+=" "),r+=t);return r}const Gv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Kv=hE,al=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Kv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(c=>{const d=n==null?void 0:n[c],u=s==null?void 0:s[c];if(d===null)return null;const h=Gv(d)||Gv(u);return o[c][h]}),a=n&&Object.entries(n).reduce((c,d)=>{let[u,h]=d;return h===void 0||(c[u]=h),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:u,className:h,...w}=d;return Object.entries(w).every(y=>{let[x,b]=y;return Array.isArray(b)?b.includes({...s,...a}[x]):{...s,...a}[x]===b})?[...c,u,h]:c},[]);return Kv(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pE=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>f.createElement("svg",{ref:l,...JI,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:pE("lucide",o),...a},[...i.map(([c,d])=>f.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(e,t)=>{const n=f.forwardRef(({className:r,...o},s)=>f.createElement(e_,{ref:s,iconNode:t,className:pE(`lucide-${ZI(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=Fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Fe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Fe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Fe("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Fe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Fe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Fe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Fe("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Fe("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Fe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=Fe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=Fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=Fe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=Fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=Fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=Fe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Fe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=Fe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=Fe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=Fe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Pm="-",E_=e=>{const t=T_(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(Pm);return a[0]===""&&a.length!==1&&a.shift(),bE(a,t)||C_(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},bE=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?bE(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(Pm);return(i=t.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},Qv=/^\[(.+)\]$/,C_=e=>{if(Qv.test(e)){const t=Qv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},T_=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return A_(Object.entries(e.classGroups),n).forEach(([s,i])=>{Oh(i,r,s,t)}),r},Oh=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:Xv(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(D_(o)){Oh(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{Oh(i,Xv(t,s),n,r)})})},Xv=(e,t)=>{let n=e;return t.split(Pm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},D_=e=>e.isThemeGetter,A_=(e,t)=>t?e.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[t+i,a])):s);return[n,o]}):e,P_=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},EE="!",k_=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,o=t[0],s=t.length,i=a=>{const l=[];let c=0,d=0,u;for(let b=0;b<a.length;b++){let g=a[b];if(c===0){if(g===o&&(r||a.slice(b,b+s)===t)){l.push(a.slice(d,b)),d=b+s;continue}if(g==="/"){u=b;continue}}g==="["?c++:g==="]"&&c--}const h=l.length===0?a:a.substring(d),w=h.startsWith(EE),y=w?h.substring(1):h,x=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:y,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:i}):i},M_=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},R_=e=>({cache:P_(e.cacheSize),parseClassName:k_(e),...E_(e)}),I_=/\s+/,__=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,s=[],i=e.trim().split(I_);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:w}=n(c);let y=!!w,x=r(y?h.substring(0,w):h);if(!x){if(!y){a=c+(a.length>0?" "+a:a);continue}if(x=r(h),!x){a=c+(a.length>0?" "+a:a);continue}y=!1}const b=M_(d).join(":"),g=u?b+EE:b,v=g+x;if(s.includes(v))continue;s.push(v);const S=o(x,y);for(let E=0;E<S.length;++E){const C=S[E];s.push(g+C)}a=c+(a.length>0?" "+a:a)}return a};function N_(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=CE(t))&&(r&&(r+=" "),r+=n);return r}const CE=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=CE(e[r]))&&(n&&(n+=" "),n+=t);return n};function L_(e,...t){let n,r,o,s=i;function i(l){const c=t.reduce((d,u)=>u(d),e());return n=R_(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=__(l,n);return o(l,d),d}return function(){return s(N_.apply(null,arguments))}}const nt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},TE=/^\[(?:([a-z-]+):)?(.+)\]$/i,F_=/^\d+\/\d+$/,O_=new Set(["px","full","screen"]),j_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,U_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,V_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,B_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Cr=e=>Gs(e)||O_.has(e)||F_.test(e),Hr=e=>ki(e,"length",Q_),Gs=e=>!!e&&!Number.isNaN(Number(e)),Kd=e=>ki(e,"number",Gs),qi=e=>!!e&&Number.isInteger(Number(e)),z_=e=>e.endsWith("%")&&Gs(e.slice(0,-1)),Ae=e=>TE.test(e),Gr=e=>j_.test(e),q_=new Set(["length","size","percentage"]),W_=e=>ki(e,q_,DE),H_=e=>ki(e,"position",DE),G_=new Set(["image","url"]),K_=e=>ki(e,G_,Z_),Y_=e=>ki(e,"",X_),Wi=()=>!0,ki=(e,t,n)=>{const r=TE.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},Q_=e=>$_.test(e)&&!U_.test(e),DE=()=>!1,X_=e=>V_.test(e),Z_=e=>B_.test(e),J_=()=>{const e=nt("colors"),t=nt("spacing"),n=nt("blur"),r=nt("brightness"),o=nt("borderColor"),s=nt("borderRadius"),i=nt("borderSpacing"),a=nt("borderWidth"),l=nt("contrast"),c=nt("grayscale"),d=nt("hueRotate"),u=nt("invert"),h=nt("gap"),w=nt("gradientColorStops"),y=nt("gradientColorStopPositions"),x=nt("inset"),b=nt("margin"),g=nt("opacity"),v=nt("padding"),S=nt("saturate"),E=nt("scale"),C=nt("sepia"),T=nt("skew"),A=nt("space"),P=nt("translate"),M=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ae,t],N=()=>[Ae,t],U=()=>["",Cr,Hr],j=()=>["auto",Gs,Ae],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],_=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Ae],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Gs,Ae];return{cacheSize:500,separator:":",theme:{colors:[Wi],spacing:[Cr,Hr],blur:["none","",Gr,Ae],brightness:W(),borderColor:[e],borderRadius:["none","","full",Gr,Ae],borderSpacing:N(),borderWidth:U(),contrast:W(),grayscale:R(),hueRotate:W(),invert:R(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[z_,Hr],inset:O(),margin:O(),opacity:W(),padding:N(),saturate:W(),scale:W(),sepia:R(),skew:W(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Ae]}],container:["container"],columns:[{columns:[Gr]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Ae]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qi,Ae]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ae]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",qi,Ae]}],"grid-cols":[{"grid-cols":[Wi]}],"col-start-end":[{col:["auto",{span:["full",qi,Ae]},Ae]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[Wi]}],"row-start-end":[{row:["auto",{span:[qi,Ae]},Ae]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ae]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...k()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...k(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...k(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ae,t]}],"min-w":[{"min-w":[Ae,t,"min","max","fit"]}],"max-w":[{"max-w":[Ae,t,"none","full","min","max","fit","prose",{screen:[Gr]},Gr]}],h:[{h:[Ae,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ae,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ae,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ae,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Gr,Hr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kd]}],"font-family":[{font:[Wi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ae]}],"line-clamp":[{"line-clamp":["none",Gs,Kd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Cr,Ae]}],"list-image":[{"list-image":["none",Ae]}],"list-style-type":[{list:["none","disc","decimal",Ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Cr,Hr]}],"underline-offset":[{"underline-offset":["auto",Cr,Ae]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),H_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",W_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},K_]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[..._(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:_()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",..._()]}],"outline-offset":[{"outline-offset":[Cr,Ae]}],"outline-w":[{outline:[Cr,Hr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Cr,Hr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Gr,Y_]}],"shadow-color":[{shadow:[Wi]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Gr,Ae]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[S]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ae]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ae]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[qi,Ae]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Cr,Hr,Kd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},eN=L_(J_);function ne(...e){return eN(hE(e))}function tN(e){var o,s;if(!e)return"";const t=e.trim().split(" ").filter(i=>i.length>0);if(t.length===0)return"";if(t.length===1)return t[0].substring(0,2).toUpperCase();const n=((o=t[0])==null?void 0:o[0])??"",r=((s=t[t.length-1])==null?void 0:s[0])??"";return(n+r).toUpperCase()}const nN=XI,AE=f.forwardRef(({className:e,...t},n)=>p.jsx(iE,{ref:n,className:ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));AE.displayName=iE.displayName;const rN=al("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),PE=f.forwardRef(({className:e,variant:t,...n},r)=>p.jsx(aE,{ref:r,className:ne(rN({variant:t}),e),...n}));PE.displayName=aE.displayName;const oN=f.forwardRef(({className:e,...t},n)=>p.jsx(uE,{ref:n,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));oN.displayName=uE.displayName;const kE=f.forwardRef(({className:e,...t},n)=>p.jsx(dE,{ref:n,className:ne("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:p.jsx(Bu,{className:"h-4 w-4"})}));kE.displayName=dE.displayName;const ME=f.forwardRef(({className:e,...t},n)=>p.jsx(lE,{ref:n,className:ne("text-sm font-semibold",e),...t}));ME.displayName=lE.displayName;const RE=f.forwardRef(({className:e,...t},n)=>p.jsx(cE,{ref:n,className:ne("text-sm opacity-90",e),...t}));RE.displayName=cE.displayName;function sN(){const{toasts:e}=sl();return p.jsxs(nN,{children:[e.map(function({id:t,title:n,description:r,action:o,...s}){return p.jsxs(PE,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(ME,{children:n}),r&&p.jsx(RE,{children:r})]}),o,p.jsx(kE,{})]},t)}),p.jsx(AE,{})]})}var iN=wx[" useId ".trim().toString()]||(()=>{}),aN=0;function Xo(e){const[t,n]=f.useState(iN());return jn(()=>{n(r=>r??String(aN++))},[e]),t?`radix-${t}`:""}const lN=["top","right","bottom","left"],bo=Math.min,vn=Math.max,Kc=Math.round,Bl=Math.floor,pr=e=>({x:e,y:e}),cN={left:"right",right:"left",bottom:"top",top:"bottom"},uN={start:"end",end:"start"};function jh(e,t,n){return vn(e,bo(t,n))}function $r(e,t){return typeof e=="function"?e(t):e}function Ur(e){return e.split("-")[0]}function Mi(e){return e.split("-")[1]}function km(e){return e==="x"?"y":"x"}function Mm(e){return e==="y"?"height":"width"}function Eo(e){return["top","bottom"].includes(Ur(e))?"y":"x"}function Rm(e){return km(Eo(e))}function dN(e,t,n){n===void 0&&(n=!1);const r=Mi(e),o=Rm(e),s=Mm(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=Yc(i)),[i,Yc(i)]}function fN(e){const t=Yc(e);return[$h(e),t,$h(t)]}function $h(e){return e.replace(/start|end/g,t=>uN[t])}function hN(e,t,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?s:i;default:return[]}}function pN(e,t,n,r){const o=Mi(e);let s=hN(Ur(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map($h)))),s}function Yc(e){return e.replace(/left|right|bottom|top/g,t=>cN[t])}function mN(e){return{top:0,right:0,bottom:0,left:0,...e}}function IE(e){return typeof e!="number"?mN(e):{top:e,right:e,bottom:e,left:e}}function Qc(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Zv(e,t,n){let{reference:r,floating:o}=e;const s=Eo(t),i=Rm(t),a=Mm(i),l=Ur(t),c=s==="y",d=r.x+r.width/2-o.width/2,u=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let w;switch(l){case"top":w={x:d,y:r.y-o.height};break;case"bottom":w={x:d,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:u};break;case"left":w={x:r.x-o.width,y:u};break;default:w={x:r.x,y:r.y}}switch(Mi(t)){case"start":w[i]-=h*(n&&c?-1:1);break;case"end":w[i]+=h*(n&&c?-1:1);break}return w}const gN=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:u}=Zv(c,r,l),h=r,w={},y=0;for(let x=0;x<a.length;x++){const{name:b,fn:g}=a[x],{x:v,y:S,data:E,reset:C}=await g({x:d,y:u,initialPlacement:r,placement:h,strategy:o,middlewareData:w,rects:c,platform:i,elements:{reference:e,floating:t}});d=v??d,u=S??u,w={...w,[b]:{...w[b],...E}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(c=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:d,y:u}=Zv(c,h,l)),x=-1)}return{x:d,y:u,placement:h,strategy:o,middlewareData:w}};async function Oa(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:w=0}=$r(t,e),y=IE(w),b=a[h?u==="floating"?"reference":"floating":u],g=Qc(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=u==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},C=Qc(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:S,strategy:l}):v);return{top:(g.top-C.top+y.top)/E.y,bottom:(C.bottom-g.bottom+y.bottom)/E.y,left:(g.left-C.left+y.left)/E.x,right:(C.right-g.right+y.right)/E.x}}const yN=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:d=0}=$r(e,t)||{};if(c==null)return{};const u=IE(d),h={x:n,y:r},w=Rm(o),y=Mm(w),x=await i.getDimensions(c),b=w==="y",g=b?"top":"left",v=b?"bottom":"right",S=b?"clientHeight":"clientWidth",E=s.reference[y]+s.reference[w]-h[w]-s.floating[y],C=h[w]-s.reference[w],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let A=T?T[S]:0;(!A||!await(i.isElement==null?void 0:i.isElement(T)))&&(A=a.floating[S]||s.floating[y]);const P=E/2-C/2,M=A/2-x[y]/2-1,I=bo(u[g],M),O=bo(u[v],M),N=I,U=A-x[y]-O,j=A/2-x[y]/2+P,q=jh(N,j,U),_=!l.arrow&&Mi(o)!=null&&j!==q&&s.reference[y]/2-(j<N?I:O)-x[y]/2<0,L=_?j<N?j-N:j-U:0;return{[w]:h[w]+L,data:{[w]:q,centerOffset:j-q-L,..._&&{alignmentOffset:L}},reset:_}}}),vN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...b}=$r(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=Ur(o),v=Eo(a),S=Ur(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=h||(S||!x?[Yc(a)]:fN(a)),T=y!=="none";!h&&T&&C.push(...pN(a,x,y,E));const A=[a,...C],P=await Oa(t,b),M=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&M.push(P[g]),u){const j=dN(o,i,E);M.push(P[j[0]],P[j[1]])}if(I=[...I,{placement:o,overflows:M}],!M.every(j=>j<=0)){var O,N;const j=(((O=s.flip)==null?void 0:O.index)||0)+1,q=A[j];if(q)return{data:{index:j,overflows:I},reset:{placement:q}};let _=(N=I.filter(L=>L.overflows[0]<=0).sort((L,k)=>L.overflows[1]-k.overflows[1])[0])==null?void 0:N.placement;if(!_)switch(w){case"bestFit":{var U;const L=(U=I.filter(k=>{if(T){const R=Eo(k.placement);return R===v||R==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(R=>R>0).reduce((R,F)=>R+F,0)]).sort((k,R)=>k[1]-R[1])[0])==null?void 0:U[0];L&&(_=L);break}case"initialPlacement":_=a;break}if(o!==_)return{reset:{placement:_}}}return{}}}};function Jv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ew(e){return lN.some(t=>e[t]>=0)}const wN=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=$r(e,t);switch(r){case"referenceHidden":{const s=await Oa(t,{...o,elementContext:"reference"}),i=Jv(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ew(i)}}}case"escaped":{const s=await Oa(t,{...o,altBoundary:!0}),i=Jv(s,n.floating);return{data:{escapedOffsets:i,escaped:ew(i)}}}default:return{}}}}};async function xN(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Ur(n),a=Mi(n),l=Eo(n)==="y",c=["left","top"].includes(i)?-1:1,d=s&&l?-1:1,u=$r(t,e);let{mainAxis:h,crossAxis:w,alignmentAxis:y}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof y=="number"&&(w=a==="end"?y*-1:y),l?{x:w*d,y:h*c}:{x:h*c,y:w*d}}const SN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,l=await xN(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},bN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:b=>{let{x:g,y:v}=b;return{x:g,y:v}}},...l}=$r(e,t),c={x:n,y:r},d=await Oa(t,l),u=Eo(Ur(o)),h=km(u);let w=c[h],y=c[u];if(s){const b=h==="y"?"top":"left",g=h==="y"?"bottom":"right",v=w+d[b],S=w-d[g];w=jh(v,w,S)}if(i){const b=u==="y"?"top":"left",g=u==="y"?"bottom":"right",v=y+d[b],S=y-d[g];y=jh(v,y,S)}const x=a.fn({...t,[h]:w,[u]:y});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[h]:s,[u]:i}}}}}},EN=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=$r(e,t),d={x:n,y:r},u=Eo(o),h=km(u);let w=d[h],y=d[u];const x=$r(a,t),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const S=h==="y"?"height":"width",E=s.reference[h]-s.floating[S]+b.mainAxis,C=s.reference[h]+s.reference[S]-b.mainAxis;w<E?w=E:w>C&&(w=C)}if(c){var g,v;const S=h==="y"?"width":"height",E=["top","left"].includes(Ur(o)),C=s.reference[u]-s.floating[S]+(E&&((g=i.offset)==null?void 0:g[u])||0)+(E?0:b.crossAxis),T=s.reference[u]+s.reference[S]+(E?0:((v=i.offset)==null?void 0:v[u])||0)-(E?b.crossAxis:0);y<C?y=C:y>T&&(y=T)}return{[h]:w,[u]:y}}}},CN=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:l=()=>{},...c}=$r(e,t),d=await Oa(t,c),u=Ur(o),h=Mi(o),w=Eo(o)==="y",{width:y,height:x}=s.floating;let b,g;u==="top"||u==="bottom"?(b=u,g=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(g=u,b=h==="end"?"top":"bottom");const v=x-d.top-d.bottom,S=y-d.left-d.right,E=bo(x-d[b],v),C=bo(y-d[g],S),T=!t.middlewareData.shift;let A=E,P=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=v),T&&!h){const I=vn(d.left,0),O=vn(d.right,0),N=vn(d.top,0),U=vn(d.bottom,0);w?P=y-2*(I!==0||O!==0?I+O:vn(d.left,d.right)):A=x-2*(N!==0||U!==0?N+U:vn(d.top,d.bottom))}await l({...t,availableWidth:P,availableHeight:A});const M=await i.getDimensions(a.floating);return y!==M.width||x!==M.height?{reset:{rects:!0}}:{}}}};function zu(){return typeof window<"u"}function Ri(e){return _E(e)?(e.nodeName||"").toLowerCase():"#document"}function Sn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xr(e){var t;return(t=(_E(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _E(e){return zu()?e instanceof Node||e instanceof Sn(e).Node:!1}function Jn(e){return zu()?e instanceof Element||e instanceof Sn(e).Element:!1}function vr(e){return zu()?e instanceof HTMLElement||e instanceof Sn(e).HTMLElement:!1}function tw(e){return!zu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Sn(e).ShadowRoot}function ll(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=er(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function TN(e){return["table","td","th"].includes(Ri(e))}function qu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Im(e){const t=_m(),n=Jn(e)?er(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function DN(e){let t=Co(e);for(;vr(t)&&!wi(t);){if(Im(t))return t;if(qu(t))return null;t=Co(t)}return null}function _m(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wi(e){return["html","body","#document"].includes(Ri(e))}function er(e){return Sn(e).getComputedStyle(e)}function Wu(e){return Jn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Co(e){if(Ri(e)==="html")return e;const t=e.assignedSlot||e.parentNode||tw(e)&&e.host||xr(e);return tw(t)?t.host:t}function NE(e){const t=Co(e);return wi(t)?e.ownerDocument?e.ownerDocument.body:e.body:vr(t)&&ll(t)?t:NE(t)}function ja(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=NE(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=Sn(o);if(s){const a=Uh(i);return t.concat(i,i.visualViewport||[],ll(o)?o:[],a&&n?ja(a):[])}return t.concat(o,ja(o,[],n))}function Uh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function LE(e){const t=er(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=vr(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=Kc(n)!==s||Kc(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function Nm(e){return Jn(e)?e:e.contextElement}function Ks(e){const t=Nm(e);if(!vr(t))return pr(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=LE(t);let i=(s?Kc(n.width):n.width)/r,a=(s?Kc(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const AN=pr(0);function FE(e){const t=Sn(e);return!_m()||!t.visualViewport?AN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function PN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Sn(e)?!1:t}function os(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Nm(e);let i=pr(1);t&&(r?Jn(r)&&(i=Ks(r)):i=Ks(e));const a=PN(s,n,r)?FE(s):pr(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,d=o.width/i.x,u=o.height/i.y;if(s){const h=Sn(s),w=r&&Jn(r)?Sn(r):r;let y=h,x=Uh(y);for(;x&&r&&w!==y;){const b=Ks(x),g=x.getBoundingClientRect(),v=er(x),S=g.left+(x.clientLeft+parseFloat(v.paddingLeft))*b.x,E=g.top+(x.clientTop+parseFloat(v.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,u*=b.y,l+=S,c+=E,y=Sn(x),x=Uh(y)}}return Qc({width:d,height:u,x:l,y:c})}function Lm(e,t){const n=Wu(e).scrollLeft;return t?t.left+n:os(xr(e)).left+n}function OE(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:Lm(e,r)),s=r.top+t.scrollTop;return{x:o,y:s}}function kN(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=xr(r),a=t?qu(t.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=pr(1);const d=pr(0),u=vr(r);if((u||!u&&!s)&&((Ri(r)!=="body"||ll(i))&&(l=Wu(r)),vr(r))){const w=os(r);c=Ks(r),d.x=w.x+r.clientLeft,d.y=w.y+r.clientTop}const h=i&&!u&&!s?OE(i,l,!0):pr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}}function MN(e){return Array.from(e.getClientRects())}function RN(e){const t=xr(e),n=Wu(e),r=e.ownerDocument.body,o=vn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=vn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Lm(e);const a=-n.scrollTop;return er(r).direction==="rtl"&&(i+=vn(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function IN(e,t){const n=Sn(e),r=xr(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=_m();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function _N(e,t){const n=os(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=vr(e)?Ks(e):pr(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function nw(e,t,n){let r;if(t==="viewport")r=IN(e,n);else if(t==="document")r=RN(xr(e));else if(Jn(t))r=_N(t,n);else{const o=FE(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Qc(r)}function jE(e,t){const n=Co(e);return n===t||!Jn(n)||wi(n)?!1:er(n).position==="fixed"||jE(n,t)}function NN(e,t){const n=t.get(e);if(n)return n;let r=ja(e,[],!1).filter(a=>Jn(a)&&Ri(a)!=="body"),o=null;const s=er(e).position==="fixed";let i=s?Co(e):e;for(;Jn(i)&&!wi(i);){const a=er(i),l=Im(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||ll(i)&&!l&&jE(e,i))?r=r.filter(d=>d!==i):o=a,i=Co(i)}return t.set(e,r),r}function LN(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?qu(t)?[]:NN(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,d)=>{const u=nw(t,d,o);return c.top=vn(u.top,c.top),c.right=bo(u.right,c.right),c.bottom=bo(u.bottom,c.bottom),c.left=vn(u.left,c.left),c},nw(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function FN(e){const{width:t,height:n}=LE(e);return{width:t,height:n}}function ON(e,t,n){const r=vr(t),o=xr(t),s=n==="fixed",i=os(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=pr(0);if(r||!r&&!s)if((Ri(t)!=="body"||ll(o))&&(a=Wu(t)),r){const h=os(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else o&&(l.x=Lm(o));const c=o&&!r&&!s?OE(o,a):pr(0),d=i.left+a.scrollLeft-l.x-c.x,u=i.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:i.width,height:i.height}}function Yd(e){return er(e).position==="static"}function rw(e,t){if(!vr(e)||er(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return xr(e)===n&&(n=n.ownerDocument.body),n}function $E(e,t){const n=Sn(e);if(qu(e))return n;if(!vr(e)){let o=Co(e);for(;o&&!wi(o);){if(Jn(o)&&!Yd(o))return o;o=Co(o)}return n}let r=rw(e,t);for(;r&&TN(r)&&Yd(r);)r=rw(r,t);return r&&wi(r)&&Yd(r)&&!Im(r)?n:r||DN(e)||n}const jN=async function(e){const t=this.getOffsetParent||$E,n=this.getDimensions,r=await n(e.floating);return{reference:ON(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $N(e){return er(e).direction==="rtl"}const UN={convertOffsetParentRelativeRectToViewportRelativeRect:kN,getDocumentElement:xr,getClippingRect:LN,getOffsetParent:$E,getElementRects:jN,getClientRects:MN,getDimensions:FN,getScale:Ks,isElement:Jn,isRTL:$N};function UE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function VN(e,t){let n=null,r;const o=xr(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:w}=c;if(a||t(),!h||!w)return;const y=Bl(u),x=Bl(o.clientWidth-(d+h)),b=Bl(o.clientHeight-(u+w)),g=Bl(d),S={rootMargin:-y+"px "+-x+"px "+-b+"px "+-g+"px",threshold:vn(0,bo(1,l))||1};let E=!0;function C(T){const A=T[0].intersectionRatio;if(A!==l){if(!E)return i();A?i(!1,A):r=setTimeout(()=>{i(!1,1e-7)},1e3)}A===1&&!UE(c,e.getBoundingClientRect())&&i(),E=!1}try{n=new IntersectionObserver(C,{...S,root:o.ownerDocument})}catch{n=new IntersectionObserver(C,S)}n.observe(e)}return i(!0),s}function BN(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Nm(e),d=o||s?[...c?ja(c):[],...ja(t)]:[];d.forEach(g=>{o&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const u=c&&a?VN(c,n):null;let h=-1,w=null;i&&(w=new ResizeObserver(g=>{let[v]=g;v&&v.target===c&&w&&(w.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=w)==null||S.observe(t)})),n()}),c&&!l&&w.observe(c),w.observe(t));let y,x=l?os(e):null;l&&b();function b(){const g=os(e);x&&!UE(x,g)&&n(),x=g,y=requestAnimationFrame(b)}return n(),()=>{var g;d.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),u==null||u(),(g=w)==null||g.disconnect(),w=null,l&&cancelAnimationFrame(y)}}const zN=SN,qN=bN,WN=vN,HN=CN,GN=wN,ow=yN,KN=EN,YN=(e,t,n)=>{const r=new Map,o={platform:UN,...n},s={...o.platform,_c:r};return gN(e,t,{...o,platform:s})};var mc=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Xc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Xc(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Xc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function VE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function sw(e,t){const n=VE(e);return Math.round(t*n)/n}function Qd(e){const t=f.useRef(e);return mc(()=>{t.current=e}),t}function QN(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[d,u]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,w]=f.useState(r);Xc(h,r)||w(r);const[y,x]=f.useState(null),[b,g]=f.useState(null),v=f.useCallback(k=>{k!==T.current&&(T.current=k,x(k))},[]),S=f.useCallback(k=>{k!==A.current&&(A.current=k,g(k))},[]),E=s||y,C=i||b,T=f.useRef(null),A=f.useRef(null),P=f.useRef(d),M=l!=null,I=Qd(l),O=Qd(o),N=Qd(c),U=f.useCallback(()=>{if(!T.current||!A.current)return;const k={placement:t,strategy:n,middleware:h};O.current&&(k.platform=O.current),YN(T.current,A.current,k).then(R=>{const F={...R,isPositioned:N.current!==!1};j.current&&!Xc(P.current,F)&&(P.current=F,rl.flushSync(()=>{u(F)}))})},[h,t,n,O,N]);mc(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,u(k=>({...k,isPositioned:!1})))},[c]);const j=f.useRef(!1);mc(()=>(j.current=!0,()=>{j.current=!1}),[]),mc(()=>{if(E&&(T.current=E),C&&(A.current=C),E&&C){if(I.current)return I.current(E,C,U);U()}},[E,C,U,I,M]);const q=f.useMemo(()=>({reference:T,floating:A,setReference:v,setFloating:S}),[v,S]),_=f.useMemo(()=>({reference:E,floating:C}),[E,C]),L=f.useMemo(()=>{const k={position:n,left:0,top:0};if(!_.floating)return k;const R=sw(_.floating,d.x),F=sw(_.floating,d.y);return a?{...k,transform:"translate("+R+"px, "+F+"px)",...VE(_.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:F}},[n,a,_.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:U,refs:q,elements:_,floatingStyles:L}),[d,U,q,_,L])}const XN=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ow({element:r.current,padding:o}).fn(n):{}:r?ow({element:r,padding:o}).fn(n):{}}}},ZN=(e,t)=>({...zN(e),options:[e,t]}),JN=(e,t)=>({...qN(e),options:[e,t]}),eL=(e,t)=>({...KN(e),options:[e,t]}),tL=(e,t)=>({...WN(e),options:[e,t]}),nL=(e,t)=>({...HN(e),options:[e,t]}),rL=(e,t)=>({...GN(e),options:[e,t]}),oL=(e,t)=>({...XN(e),options:[e,t]});var sL="Arrow",BE=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return p.jsx(Se.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});BE.displayName=sL;var iL=BE;function Fm(e){const[t,n]=f.useState(void 0);return jn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Om="Popper",[zE,Hu]=pn(Om),[aL,qE]=zE(Om),WE=e=>{const{__scopePopper:t,children:n}=e,[r,o]=f.useState(null);return p.jsx(aL,{scope:t,anchor:r,onAnchorChange:o,children:n})};WE.displayName=Om;var HE="PopperAnchor",GE=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=qE(HE,n),i=f.useRef(null),a=Ie(t,i);return f.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:p.jsx(Se.div,{...o,ref:a})});GE.displayName=HE;var jm="PopperContent",[lL,cL]=zE(jm),KE=f.forwardRef((e,t)=>{var ge,ie,ke,qe,Ce,oe;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:h=!1,updatePositionStrategy:w="optimized",onPlaced:y,...x}=e,b=qE(jm,n),[g,v]=f.useState(null),S=Ie(t,xe=>v(xe)),[E,C]=f.useState(null),T=Fm(E),A=(T==null?void 0:T.width)??0,P=(T==null?void 0:T.height)??0,M=r+(s!=="center"?"-"+s:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(c)?c:[c],N=O.length>0,U={padding:I,boundary:O.filter(dL),altBoundary:N},{refs:j,floatingStyles:q,placement:_,isPositioned:L,middlewareData:k}=QN({strategy:"fixed",placement:M,whileElementsMounted:(...xe)=>BN(...xe,{animationFrame:w==="always"}),elements:{reference:b.anchor},middleware:[ZN({mainAxis:o+P,alignmentAxis:i}),l&&JN({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?eL():void 0,...U}),l&&tL({...U}),nL({...U,apply:({elements:xe,rects:ae,availableWidth:_e,availableHeight:at})=>{const{width:yt,height:Nt}=ae.reference,lt=xe.floating.style;lt.setProperty("--radix-popper-available-width",`${_e}px`),lt.setProperty("--radix-popper-available-height",`${at}px`),lt.setProperty("--radix-popper-anchor-width",`${yt}px`),lt.setProperty("--radix-popper-anchor-height",`${Nt}px`)}}),E&&oL({element:E,padding:a}),fL({arrowWidth:A,arrowHeight:P}),h&&rL({strategy:"referenceHidden",...U})]}),[R,F]=XE(_),W=ft(y);jn(()=>{L&&(W==null||W())},[L,W]);const J=(ge=k.arrow)==null?void 0:ge.x,be=(ie=k.arrow)==null?void 0:ie.y,se=((ke=k.arrow)==null?void 0:ke.centerOffset)!==0,[Ye,te]=f.useState();return jn(()=>{g&&te(window.getComputedStyle(g).zIndex)},[g]),p.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:L?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ye,"--radix-popper-transform-origin":[(qe=k.transformOrigin)==null?void 0:qe.x,(Ce=k.transformOrigin)==null?void 0:Ce.y].join(" "),...((oe=k.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(lL,{scope:n,placedSide:R,onArrowChange:C,arrowX:J,arrowY:be,shouldHideArrow:se,children:p.jsx(Se.div,{"data-side":R,"data-align":F,...x,ref:S,style:{...x.style,animation:L?void 0:"none"}})})})});KE.displayName=jm;var YE="PopperArrow",uL={top:"bottom",right:"left",bottom:"top",left:"right"},QE=f.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=cL(YE,r),i=uL[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(iL,{...o,ref:n,style:{...o.style,display:"block"}})})});QE.displayName=YE;function dL(e){return e!==null}var fL=e=>({name:"transformOrigin",options:e,fn(t){var b,g,v;const{placement:n,rects:r,middlewareData:o}=t,i=((b=o.arrow)==null?void 0:b.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,d]=XE(n),u={start:"0%",center:"50%",end:"100%"}[d],h=(((g=o.arrow)==null?void 0:g.x)??0)+a/2,w=(((v=o.arrow)==null?void 0:v.y)??0)+l/2;let y="",x="";return c==="bottom"?(y=i?u:`${h}px`,x=`${-l}px`):c==="top"?(y=i?u:`${h}px`,x=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,x=i?u:`${w}px`):c==="left"&&(y=`${r.floating.width+l}px`,x=i?u:`${w}px`),{data:{x:y,y:x}}}});function XE(e){const[t,n="center"]=e.split("-");return[t,n]}var ZE=WE,JE=GE,eC=KE,tC=QE,[Gu,T3]=pn("Tooltip",[Hu]),Ku=Hu(),nC="TooltipProvider",hL=700,Vh="tooltip.open",[pL,$m]=Gu(nC),rC=e=>{const{__scopeTooltip:t,delayDuration:n=hL,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=e,i=f.useRef(!0),a=f.useRef(!1),l=f.useRef(0);return f.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(pL,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:f.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:s})};rC.displayName=nC;var Yu="Tooltip",[mL,Qu]=Gu(Yu),oC=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o=!1,onOpenChange:s,disableHoverableContent:i,delayDuration:a}=e,l=$m(Yu,e.__scopeTooltip),c=Ku(t),[d,u]=f.useState(null),h=Xo(),w=f.useRef(0),y=i??l.disableHoverableContent,x=a??l.delayDuration,b=f.useRef(!1),[g=!1,v]=wr({prop:r,defaultProp:o,onChange:A=>{A?(l.onOpen(),document.dispatchEvent(new CustomEvent(Vh))):l.onClose(),s==null||s(A)}}),S=f.useMemo(()=>g?b.current?"delayed-open":"instant-open":"closed",[g]),E=f.useCallback(()=>{window.clearTimeout(w.current),w.current=0,b.current=!1,v(!0)},[v]),C=f.useCallback(()=>{window.clearTimeout(w.current),w.current=0,v(!1)},[v]),T=f.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>{b.current=!0,v(!0),w.current=0},x)},[x,v]);return f.useEffect(()=>()=>{w.current&&(window.clearTimeout(w.current),w.current=0)},[]),p.jsx(ZE,{...c,children:p.jsx(mL,{scope:t,contentId:h,open:g,stateAttribute:S,trigger:d,onTriggerChange:u,onTriggerEnter:f.useCallback(()=>{l.isOpenDelayedRef.current?T():E()},[l.isOpenDelayedRef,T,E]),onTriggerLeave:f.useCallback(()=>{y?C():(window.clearTimeout(w.current),w.current=0)},[C,y]),onOpen:E,onClose:C,disableHoverableContent:y,children:n})})};oC.displayName=Yu;var Bh="TooltipTrigger",sC=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Qu(Bh,n),s=$m(Bh,n),i=Ku(n),a=f.useRef(null),l=Ie(t,a,o.onTriggerChange),c=f.useRef(!1),d=f.useRef(!1),u=f.useCallback(()=>c.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),p.jsx(JE,{asChild:!0,...i,children:p.jsx(Se.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:re(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),d.current=!0)}),onPointerLeave:re(e.onPointerLeave,()=>{o.onTriggerLeave(),d.current=!1}),onPointerDown:re(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:re(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:re(e.onBlur,o.onClose),onClick:re(e.onClick,o.onClose)})})});sC.displayName=Bh;var gL="TooltipPortal",[D3,yL]=Gu(gL,{forceMount:void 0}),xi="TooltipContent",iC=f.forwardRef((e,t)=>{const n=yL(xi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=e,i=Qu(xi,e.__scopeTooltip);return p.jsx(mn,{present:r||i.open,children:i.disableHoverableContent?p.jsx(aC,{side:o,...s,ref:t}):p.jsx(vL,{side:o,...s,ref:t})})}),vL=f.forwardRef((e,t)=>{const n=Qu(xi,e.__scopeTooltip),r=$m(xi,e.__scopeTooltip),o=f.useRef(null),s=Ie(t,o),[i,a]=f.useState(null),{trigger:l,onClose:c}=n,d=o.current,{onPointerInTransitChange:u}=r,h=f.useCallback(()=>{a(null),u(!1)},[u]),w=f.useCallback((y,x)=>{const b=y.currentTarget,g={x:y.clientX,y:y.clientY},v=EL(g,b.getBoundingClientRect()),S=CL(g,v),E=TL(x.getBoundingClientRect()),C=AL([...S,...E]);a(C),u(!0)},[u]);return f.useEffect(()=>()=>h(),[h]),f.useEffect(()=>{if(l&&d){const y=b=>w(b,d),x=b=>w(b,l);return l.addEventListener("pointerleave",y),d.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",x)}}},[l,d,w,h]),f.useEffect(()=>{if(i){const y=x=>{const b=x.target,g={x:x.clientX,y:x.clientY},v=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),S=!DL(g,i);v?h():S&&(h(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,d,i,c,h]),p.jsx(aC,{...e,ref:s})}),[wL,xL]=Gu(Yu,{isInside:!1}),SL=zb("TooltipContent"),aC=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=e,l=Qu(xi,n),c=Ku(n),{onClose:d}=l;return f.useEffect(()=>(document.addEventListener(Vh,d),()=>document.removeEventListener(Vh,d)),[d]),f.useEffect(()=>{if(l.trigger){const u=h=>{const w=h.target;w!=null&&w.contains(l.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,d]),p.jsx(il,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:p.jsxs(eC,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(SL,{children:r}),p.jsx(wL,{scope:n,isInside:!0,children:p.jsx(_I,{id:l.contentId,role:"tooltip",children:o||r})})]})})});iC.displayName=xi;var lC="TooltipArrow",bL=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Ku(n);return xL(lC,n).isInside?null:p.jsx(tC,{...o,...r,ref:t})});bL.displayName=lC;function EL(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function CL(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function TL(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function DL(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s].x,l=t[s].y,c=t[i].x,d=t[i].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(o=!o)}return o}function AL(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),PL(t)}function PL(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var kL=rC,ML=oC,RL=sC,cC=iC;const uC=kL,IL=ML,_L=RL,dC=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(cC,{ref:r,sideOffset:t,className:ne("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));dC.displayName=cC.displayName;const Um=f.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ne("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Um.displayName="Card";const NL=f.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ne("flex flex-col space-y-1.5 p-6",e),...t}));NL.displayName="CardHeader";const LL=f.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ne("text-2xl font-semibold leading-none tracking-tight",e),...t}));LL.displayName="CardTitle";const FL=f.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));FL.displayName="CardDescription";const Vm=f.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ne("p-6 pt-0",e),...t}));Vm.displayName="CardContent";const OL=f.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:ne("flex items-center p-6 pt-0",e),...t}));OL.displayName="CardFooter";function jL(){return p.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:p.jsx(Um,{className:"w-full max-w-md mx-4",children:p.jsxs(Vm,{className:"pt-6",children:[p.jsxs("div",{className:"flex mb-4 gap-2",children:[p.jsx(vE,{className:"h-8 w-8 text-red-500"}),p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),p.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Bm=al("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ge=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},s)=>{const i=r?fI:"button";return p.jsx(i,{className:ne(Bm({variant:t,size:n,className:e})),ref:s,...o})});Ge.displayName="Button";const Xd=e=>e.map(t=>typeof t=="object"?JSON.stringify(t):t),m={log:(...e)=>{typeof console<"u"&&console.log&&console.log("[Phojo]",...Xd(e))},warn:(...e)=>{typeof console<"u"&&console.warn&&console.warn("[Phojo WARN]",...Xd(e))},error:(...e)=>{typeof console<"u"&&console.error&&console.error("[Phojo ERROR]",...Xd(e))}};var fC={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,u,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var w=new o(d,u||l,h),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],w]:l._events[y].push(w):(l._events[y]=w,l._eventsCount++),l}function i(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,u;if(this._eventsCount===0)return c;for(u in d=this._events)t.call(d,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,w=u.length,y=new Array(w);h<w;h++)y[h]=u[h].fn;return y},a.prototype.listenerCount=function(c){var d=n?n+c:c,u=this._events[d];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,d,u,h,w,y){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],g=arguments.length,v,S;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),g){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,u),!0;case 4:return b.fn.call(b.context,d,u,h),!0;case 5:return b.fn.call(b.context,d,u,h,w),!0;case 6:return b.fn.call(b.context,d,u,h,w,y),!0}for(S=1,v=new Array(g-1);S<g;S++)v[S-1]=arguments[S];b.fn.apply(b.context,v)}else{var E=b.length,C;for(S=0;S<E;S++)switch(b[S].once&&this.removeListener(c,b[S].fn,void 0,!0),g){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,u);break;case 4:b[S].fn.call(b[S].context,d,u,h);break;default:if(!v)for(C=1,v=new Array(g-1);C<g;C++)v[C-1]=arguments[C];b[S].fn.apply(b[S].context,v)}}return!0},a.prototype.on=function(c,d,u){return s(this,c,d,u,!1)},a.prototype.once=function(c,d,u){return s(this,c,d,u,!0)},a.prototype.removeListener=function(c,d,u,h){var w=n?n+c:c;if(!this._events[w])return this;if(!d)return i(this,w),this;var y=this._events[w];if(y.fn)y.fn===d&&(!h||y.once)&&(!u||y.context===u)&&i(this,w);else{for(var x=0,b=[],g=y.length;x<g;x++)(y[x].fn!==d||h&&!y[x].once||u&&y[x].context!==u)&&b.push(y[x]);b.length?this._events[w]=b.length===1?b[0]:b:i(this,w)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&i(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(fC);var $L=fC.exports;const UL=Ep($L),VL="401z949o3txi3r0",ps="/Photos",Ys="/Metadata",zh="images.json";function Ss(e,t){const n=t.toString().padStart(2,"0");return`${e}-${n}-entries.json`}const hC=Ys.startsWith("/")?Ys.replace("//","/"):`/${Ys}`.replace("//","/"),pC=`${hC}/${zh}`.replace("//","/");function BL(e,t){const n=Ss(e,t);return`${hC}/${n}`.replace("//","/")}function Si(e){return e&&typeof e=="object"&&typeof e.status=="number"&&typeof e.error=="object"}function mC(e){var t;if(Si(e)){const n=e.error;if(typeof(n==null?void 0:n.error_summary)=="string"&&n.error_summary.startsWith("path/not_found")||(n==null?void 0:n[".tag"])==="path"&&((t=n==null?void 0:n.path)==null?void 0:t[".tag"])==="not_found")return!0}return!1}function zL(e,t){var n;return(e==null?void 0:e[".tag"])==="path_lookup"&&((n=e==null?void 0:e.path_lookup)==null?void 0:n[".tag"])===t}function qL(e,t){var n;return(e==null?void 0:e[".tag"])==="path"&&((n=e==null?void 0:e.path)==null?void 0:n[".tag"])===t}async function gC(e,t,n){let r=null;try{m.log(`Attempting to download ${t}...`);const s=(await e.filesDownload({path:t})).result.fileBlob;if(!s)return m.warn(`${t} download response did not contain a fileBlob. Returning empty array.`),[];if(r=await s.text(),!r||r.trim()==="")return m.log(`${t} is empty or contains only whitespace. Returning empty array.`),[];const i=JSON.parse(r);return m.log(`Successfully parsed ${i.length} items from ${t}.`),i.map(a=>{const l={...a};return l.photos=Array.isArray(a.photos)?a.photos:[],n.forEach(c=>{const d=c;if(l[d])try{l[d]=new Date(l[d]),isNaN(l[d].getTime())&&(m.warn(`Parsed invalid date for field ${String(c)}:`,a[d]),l[d]=new Date(0))}catch(u){m.warn(`Failed parse date field ${String(c)}:`,l[d],u),l[d]=new Date(0)}else(c==="createdAt"||c==="updatedAt")&&(l[d]=new Date(0))}),typeof a.usageCount=="number"?l.usageCount=a.usageCount:typeof l.usageCount>"u"&&"photoFilename"in l&&(l.usageCount=0),l})}catch(o){if(o instanceof SyntaxError&&r!==null)return m.error(`Failed to parse JSON content from ${t}. Content: "${r.substring(0,100)}..."`,o),[];if(mC(o))return m.warn(`${t} not found during download attempt (409 conflict likely). Returning empty array.`),[];throw Si(o)?m.error(`Dropbox API Error downloading ${t}: Status ${o.status}`,o.error):m.error(`Non-API/Non-parsing Error loading ${t}:`,o),new Error(`Failed to download or parse data from ${t}.`)}}async function WL(e,t,n,r){try{const o=n.map(a=>{const l={...a};return r.forEach(c=>{const d=c;l[d]instanceof Date?isNaN(l[d].getTime())?(m.warn(`Attempted to save invalid date for field ${String(c)}, setting to null.`),l[d]=null):l[d]=l[d].toISOString():(l[d]===null||l[d]===void 0)&&(l[d]=null)}),l.photos=Array.isArray(l.photos)?l.photos:[],"crop"in l&&l.crop===void 0&&(l.crop=null),l}),s=JSON.stringify(o,null,2),i=new Blob([s],{type:"application/json"});m.log(`Attempting to upload ${t} (${(s.length/1024).toFixed(2)} KB)...`),await e.filesUpload({path:t,contents:i,mode:{".tag":"overwrite"},autorename:!1,mute:!0}),m.log(`${t} saved successfully.`)}catch(o){throw Si(o)?m.error(`Dropbox API Error saving ${t}: Status ${o.status}`,o.error):m.error(`Non-API Error saving ${t}:`,o),new Error(`Failed to save data to ${t} in Dropbox.`)}}async function iw(e,t,n){const r=BL(t,n);return m.log(`Calling loadJsonFile for ${r} (existence check assumed done).`),gC(e,r,["createdAt","updatedAt"])}async function HL(e){return gC(e,pC,["createdAt"])}async function GL(e,t){await WL(e,pC,t,["createdAt"])}async function KL(e,t,n){var i,a;if(!t)return!1;const r=n.startsWith("/")?n:`/${n}`,s=`${r.endsWith("/")?r.slice(0,-1):r}/${t}`.replace("//","/");try{return m.log(`Attempting to delete photo from Dropbox path: ${s}`),await e.filesDeleteV2({path:s}),m.log(`Photo deleted successfully from Dropbox: ${t}`),!0}catch(l){return Si(l)&&(zL(l.error,"not_found")||qL(l.error,"not_found")||l.status===409&&((a=(i=l.error)==null?void 0:i.error_summary)!=null&&a.includes("path_lookup/not_found")))?(m.warn(`deletePhoto: File not found at ${s}. Assuming already deleted.`),!0):(Si(l)?m.error(`Dropbox API Error deleting photo ${s}: Status ${l.status}`,l.error):m.error(`Non-API Error deleting photo ${s}:`,l),!1)}}function YL(e){return Array.from(new Uint8Array(e)).map(t=>t.toString(16).padStart(2,"0")).join("")}async function QL(e){try{const t=await crypto.subtle.digest("SHA-256",e);return YL(t)}catch(t){throw m.error("Error calculating array buffer hash:",t),new Error("Could not calculate hash from array buffer.")}}async function aw(e){try{const t=await e.arrayBuffer();return QL(t)}catch(t){throw m.error("Error calculating file hash:",t),new Error("Could not calculate file hash.")}}const zl="PhojoCacheDB",lw=5,cn="entries",mr="imageMetadata",Qs="photoBlobs",ur="cacheStatus",Xs="saveQueue",Zs="actionLog",Zd="entriesSnapshot",Jd="metadataSnapshot",ef="snapshotMetadata",cw="phojo_device_id";let Dn=null;function zm(){return new Promise((e,t)=>{if(Dn&&Dn.objectStoreNames.length>0){e(Dn);return}m.log(`[IDB] Opening database ${zl} version ${lw}...`);const n=indexedDB.open(zl,lw);n.onerror=r=>{var o;m.error("[IDB] Database error:",n.error),t(`IndexedDB error: ${(o=n.error)==null?void 0:o.message}`)},n.onsuccess=r=>{m.log(`[IDB] Database ${zl} opened successfully.`),Dn=n.result,Dn.onclose=()=>{m.warn("[IDB] Database connection closed unexpectedly."),Dn=null},Dn.onversionchange=()=>{m.warn("[IDB] Database version change detected. Closing connection."),Dn==null||Dn.close(),Dn=null},e(Dn)},n.onupgradeneeded=r=>{m.log(`[IDB] Upgrading database from version ${r.oldVersion} to ${r.newVersion}.`);const o=n.result,s=r.oldVersion||0;if(s<2&&s>0){m.log("[IDB] Old schema detected, will delete database and recreate with new schema."),o.close();const a=indexedDB.deleteDatabase(zl);a.onsuccess=()=>{m.log("[IDB] Database deleted successfully. App will retry opening.")},a.onerror=()=>{m.error("[IDB] Failed to delete database during migration:",a.error)},a.onblocked=()=>{m.warn("[IDB] Database deletion blocked. Please close all other tabs using this app.")};return}if(!o.objectStoreNames.contains(cn))o.createObjectStore(cn).createIndex("byDate","date",{unique:!1}),m.log(`[IDB] Object store created: ${cn} with index 'byDate'`);else if(s<2){const a=n.transaction.objectStore(cn);a.indexNames.contains("byDate")||(a.createIndex("byDate","date",{unique:!1}),m.log(`[IDB] Added 'byDate' index to ${cn} store`))}if(o.objectStoreNames.contains(mr)||(o.createObjectStore(mr),m.log(`[IDB] Object store created: ${mr}`)),o.objectStoreNames.contains(Qs)||(o.createObjectStore(Qs),m.log(`[IDB] Object store created: ${Qs}`)),!o.objectStoreNames.contains(ur))o.createObjectStore(ur).createIndex("lastAccessed","lastAccessed",{unique:!1}),m.log(`[IDB] Object store created: ${ur} with index 'lastAccessed'`);else if(s<2){const a=n.transaction.objectStore(ur);a.indexNames.contains("lastAccessed")||(a.createIndex("lastAccessed","lastAccessed",{unique:!1}),m.log(`[IDB] Re-created 'lastAccessed' index on ${ur}`))}if(o.objectStoreNames.contains(Xs)||(o.createObjectStore(Xs),m.log(`[IDB] Object store created: ${Xs}`)),!o.objectStoreNames.contains(Zs)){const a=o.createObjectStore(Zs);a.createIndex("status_timestamp",["status","timestamp"],{unique:!1}),a.createIndex("operationId","operationId",{unique:!1}),m.log(`[IDB] Object store created: ${Zs} with indexes`)}s<5&&(o.objectStoreNames.contains(Zd)||(o.createObjectStore(Zd),m.log(`[IDB] Object store created: ${Zd}`)),o.objectStoreNames.contains(Jd)||(o.createObjectStore(Jd),m.log(`[IDB] Object store created: ${Jd}`)),o.objectStoreNames.contains(ef)||(o.createObjectStore(ef),m.log(`[IDB] Object store created: ${ef}`))),m.log("[IDB] Database upgrade complete.")},n.onblocked=()=>{m.warn("[IDB] Database open request blocked, possibly due to open connections in other tabs."),t(new Error("IndexedDB open request blocked. Please close other tabs using this app and retry."))}})}async function tr(e,t,n){const r=await zm();return new Promise((o,s)=>{let i=null;try{i=r.transaction(e,t);const a=i.objectStore(e);i.onerror=l=>{m.error(`[IDB] Transaction error on store ${e}:`,i==null?void 0:i.error),s((i==null?void 0:i.error)||new Error("Unknown transaction error"))},i.onabort=l=>{m.warn(`[IDB] Transaction aborted on store ${e}:`,i==null?void 0:i.error),s((i==null?void 0:i.error)||new Error("Transaction aborted"))},n(a).then(o).catch(l=>{m.error(`[IDB] Error during transaction action on store ${e}:`,l),s(l)})}catch(a){m.error(`[IDB] Failed to initiate transaction on store ${e}:`,a),s(a)}})}async function Nn(e,t,n){await tr(e,"readwrite",r=>new Promise((o,s)=>{const i=r.put(n,t);i.onsuccess=()=>o(),i.onerror=()=>s(i.error)})),m.log(`[IDB] Data put successful for key '${String(t)}' in store '${e}'.`)}async function cl(e,t){return tr(e,"readonly",n=>new Promise((r,o)=>{const s=n.get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>o(s.error)}))}async function Pr(e,t){await tr(e,"readwrite",n=>new Promise((r,o)=>{const s=n.delete(t);s.onsuccess=()=>r(),s.onerror=()=>o(s.error)})),m.log(`[IDB] Data delete successful for key '${String(t)}' in store '${e}'.`)}async function XL(e){await tr(e,"readwrite",t=>new Promise((n,r)=>{const o=t.clear();o.onsuccess=()=>n(),o.onerror=()=>r(o.error)})),m.log(`[IDB] Store '${e}' cleared successfully.`)}async function ZL(e){return tr(ur,"readonly",t=>new Promise((n,r)=>{try{const s=t.index("lastAccessed").openCursor(),i=[];s.onsuccess=a=>{const l=a.target.result;if(l){const c=l.primaryKey,d=l.value;i.push({key:c,lastAccessed:d.lastAccessed,type:d.type}),i.length<e?l.continue():n(i)}else n(i)},s.onerror=()=>{m.error("[IDB] Error querying by lastAccessed:",s.error),r(s.error)}}catch(o){m.error("[IDB] Error setting up index query:",o),r(o)}}))}async function Zc(e,t){const n=t.toString().padStart(2,"0"),r=`${e}-${n}-01`,o=new Date(e,t,0).getDate(),s=`${e}-${n}-${o.toString().padStart(2,"0")}`;return tr(cn,"readonly",async i=>new Promise((a,l)=>{try{const c=i.index("byDate"),d=IDBKeyRange.bound(r,s),u=c.getAll(d);u.onsuccess=()=>{const h=u.result;if(h&&h.length>0){const w=h.map(y=>({...y,createdAt:y.createdAt instanceof Date?y.createdAt:new Date(y.createdAt||0),updatedAt:y.updatedAt instanceof Date?y.updatedAt:new Date(y.updatedAt||0)}));a(w)}else a(void 0)},u.onerror=()=>{m.error(`[IDB] Failed to query entries for ${e}-${n}:`,u.error),l(u.error)}}catch(c){m.error("[IDB] Error querying entries by date:",c),l(c)}}))}async function JL(e){return tr(cn,"readwrite",async t=>new Promise((n,r)=>{try{if(e.length===0){n();return}let o=0;for(const s of e){const i={...s,createdAt:s.createdAt instanceof Date?s.createdAt.toISOString():s.createdAt,updatedAt:s.updatedAt instanceof Date?s.updatedAt.toISOString():s.updatedAt},a=t.put(i,s.id);a.onerror=()=>{m.error(`[IDB] Failed to store entry ${s.id}:`,a.error),r(a.error)},a.onsuccess=()=>{o++,o===e.length&&(m.log(`[IDB] Successfully cached ${e.length} entries.`),n())}}}catch(o){m.error("[IDB] Error caching entries:",o),r(o)}}))}async function tf(){return tr(mr,"readonly",async e=>new Promise((t,n)=>{const r=e.getAll();r.onsuccess=()=>{const o=r.result;if(o&&o.length>0){const s=o.map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:new Date(i.createdAt||0)}));t(s)}else t(void 0)},r.onerror=()=>{m.error("[IDB] Failed to get all metadata:",r.error),n(r.error)}}))}async function eF(){return tr(cn,"readonly",async e=>new Promise((t,n)=>{const r=e.getAll();r.onsuccess=()=>{const o=r.result;if(o&&o.length>0){const s=o.map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:new Date(i.createdAt||0),updatedAt:i.updatedAt instanceof Date?i.updatedAt:new Date(i.updatedAt||0)}));t(s)}else t(void 0)},r.onerror=()=>{m.error("[IDB] Failed to get all entries:",r.error),n(r.error)}}))}async function tF(e){return tr(mr,"readwrite",async t=>new Promise((n,r)=>{try{if(e.length===0){n();return}let o=0;for(const s of e){const i={...s,createdAt:s.createdAt instanceof Date?s.createdAt.toISOString():s.createdAt},a=t.put(i,s.id);a.onerror=()=>{m.error(`[IDB] Failed to store metadata ${s.id}:`,a.error),r(a.error)},a.onsuccess=()=>{o++,o===e.length&&(m.log(`[IDB] Successfully cached ${e.length} metadata entries.`),n())}}}catch(o){m.error("[IDB] Error caching metadata:",o),r(o)}}))}async function nF(e){return e?Pr(mr,e):XL(mr)}async function Io(e){return cl(Qs,e)}async function _o(e,t,n){const r=Date.now();await Nn(Qs,e,{blob:t,timestamp:r,lastAccessed:r,type:n}),await Nn(ur,e,{lastAccessed:r,size:t.size,type:n})}async function Ns(e){await Promise.all([Pr(Qs,e),Pr(ur,e)])}async function ql(e){const t=await cl(ur,e);if(!t){m.warn(`[IDB] Cannot update access time for ${e}, no cache status found.`);return}t.lastAccessed=Date.now(),await Nn(ur,e,t)}async function Hi(e){m.log(`[IDB] Adding action to save queue. Type: ${e.type}, Entity: ${e.entity}`),await Nn(Xs,e.actionId,e)}async function yC(){return m.log("[IDB] Getting all items from save queue"),tr(Xs,"readonly",async e=>new Promise((t,n)=>{const r=e.getAll();r.onsuccess=()=>{var s;const o=((s=r.result)==null?void 0:s.filter(sF))??[];m.log(`[IDB] Retrieved ${o.length} valid items from save queue`),t(o)},r.onerror=()=>{m.error("[IDB] Error getting items from save queue:",r.error),n(r.error)}}))}async function rF(e){m.log(`[IDB] Updating action in save queue. ID: ${e.actionId}, Status: ${e.status}`),await Nn(Xs,e.actionId,e)}async function oF(){const e=await yC();let t=0;for(const n of e)if(n.status==="syncing"){const r={...n,status:"pending"};await rF(r),t++}t>0&&m.log(`[IDB] Marked ${t} 'syncing' actions as 'pending'.`)}async function Jc(){return(await yC()).filter(n=>n.status==="pending"||n.status==="failed").sort((n,r)=>n.timestamp-r.timestamp)}function sF(e){var r;if(typeof e!="object"||e===null)return m.warn("[IDB Validator] Item is not an object or is null."),!1;const t=e;if(typeof t.actionId!="string"||typeof t.timestamp!="number"||typeof t.retryCount!="number"||!["pending","syncing","failed"].includes(t.status??"")||typeof t.entity!="string"||typeof t.type!="string"||typeof t.payload!="object"||t.payload===null)return m.warn("[IDB Validator] Base fields check failed.",{actionId:typeof t.actionId,timestamp:typeof t.timestamp,retryCount:typeof t.retryCount,status:t.status,entity:typeof t.entity,type:typeof t.type,payload:typeof t.payload}),!1;const n=t.payload;switch(t.entity){case"entry":switch(t.type){case"create":case"update":if(typeof n.entry!="object"||n.entry===null||typeof n.entry.id!="string"||typeof n.entry.date!="string"||typeof n.year!="number"||typeof n.month!="number"||n.isDateChange!==void 0&&typeof n.isDateChange!="boolean"||n.oldYear!==void 0&&typeof n.oldYear!="number"||n.oldMonth!==void 0&&typeof n.oldMonth!="number")return m.warn("[IDB Validator] Entry create/update payload check failed.",n),!1;break;case"delete":if(typeof n.entryId!="string"||typeof n.year!="number"||typeof n.month!="number"||typeof n.entryDate!="string")return m.warn("[IDB Validator] Entry delete payload check failed.",n),!1;break;default:return m.warn(`[IDB Validator] Invalid type '${t.type}' for entity 'entry'.`),!1}break;case"photoMetadata":switch(t.type){case"create":case"update":if(!Array.isArray(n.metadata)||n.metadata.length>0&&typeof((r=n.metadata[0])==null?void 0:r.id)!="string")return m.warn("[IDB Validator] Metadata create/update payload check failed.",n),!1;break;case"delete":if(typeof n.metadataId!="string")return m.warn("[IDB Validator] Metadata delete payload check failed.",n),!1;break;default:return m.warn(`[IDB Validator] Invalid type '${t.type}' for entity 'photoMetadata'.`),!1}break;case"photoUpload":switch(t.type){case"create":if(typeof n.contentHash!="string"||typeof n.photoFilename!="string"||typeof n.folder!="string")return m.warn("[IDB Validator] Photo upload payload check failed.",n),!1;break;default:return m.warn(`[IDB Validator] Invalid type '${t.type}' for entity 'photoUpload'.`),!1}break;default:return m.warn(`[IDB Validator] Invalid entity '${t.entity}'.`),!1}return!0}zm().catch(e=>m.error("[IDB] Initial DB open failed:",e));async function vC(e,t,n,r){if(!t||!e){m.log("[SyncService] Cannot trigger processing: "+(t?"No Dropbox client":"Offline"));return}await wC();const o=await Jc();o.length>0&&(m.log(`[SyncService] Still ${o.length} pending actions after processing, processing again`),await vC(e,t))}function uw(e,t){if(!t||!e){m.log("[SyncService] Cannot trigger background sync: "+(t?"No Dropbox client":"Offline"));return}vC(e,t).catch(n=>{m.error("[SyncService] Background sync process error:",n)}),m.log("[SyncService] Background sync process started")}async function wC(e,t,n,r){{m.log("Old sync queue processing is disabled.");return}}const xC=.8,iF=.7,aF=10;async function qh(){try{if(!navigator.storage||!navigator.storage.estimate)return m.warn("[StorageMgr] navigator.storage.estimate not supported"),null;const e=await navigator.storage.estimate();if(!e.quota||!e.usage)return m.warn("[StorageMgr] Storage estimate missing quota or usage"),null;const t=e.usage/e.quota;return m.log(`[StorageMgr] Storage usage: ${e.usage} / ${e.quota} bytes (${(t*100).toFixed(2)}%)`),{usageBytes:e.usage,quotaBytes:e.quota,usagePercentage:t}}catch(e){return m.error("[StorageMgr] Error getting storage estimate:",e),null}}async function dw(e,t=!0){try{const n=await ZL(e);if(t){const r=n.filter(s=>s.type==="full").map(s=>s.key),o=n.filter(s=>s.type==="thumb").map(s=>s.key);return[...r,...o].slice(0,e)}return n.map(r=>r.key)}catch(n){return m.error("[StorageMgr] Error getting oldest blobs:",n),[]}}async function eu(e){try{let t=0,n=!0;if(typeof e=="number"&&e>0){const o=await dw(e);return o.length>0?(m.log(`[StorageMgr] Forced pruning ${o.length} blobs`),await Promise.all(o.map(s=>Ns(s))),o.length):0}const r=await qh();if(!r||r.usagePercentage<xC)return m.log("[StorageMgr] Current storage usage is below threshold, no pruning needed"),0;for(;n;){const o=await dw(aF);if(o.length===0){m.log("[StorageMgr] No more blobs to prune");break}m.log(`[StorageMgr] Pruning batch of ${o.length} blobs`),await Promise.all(o.map(i=>Ns(i))),t+=o.length;const s=await qh();!s||s.usagePercentage<=iF?(m.log(`[StorageMgr] Reached target usage: ${(s==null?void 0:s.usagePercentage.toFixed(2))||"unknown"}`),n=!1):t>=50&&(m.warn("[StorageMgr] Reached safety limit of 50 items, stopping pruning"),n=!1)}return m.log(`[StorageMgr] Pruning complete. Removed ${t} items`),t}catch(t){return m.error("[StorageMgr] Error during pruning:",t),0}}async function nf(){try{const e=await qh();if(!e)return;if(e.usagePercentage>=xC){m.warn(`[StorageMgr] Storage usage high (${(e.usagePercentage*100).toFixed(2)}%). Running pruning...`);const t=await eu();m.log(`[StorageMgr] Automatic pruning complete. Removed ${t} items.`)}}catch(e){m.error("[StorageMgr] Error in automatic pruning check:",e)}}async function rf(e,t=256){return new Promise((n,r)=>{const o=new Image,s=URL.createObjectURL(e);o.onload=()=>{try{URL.revokeObjectURL(s);let i=o.width,a=o.height;const l=i/a;i>a&&i>t?(i=t,a=Math.round(i/l)):a>t&&(a=t,i=Math.round(a*l));const c=document.createElement("canvas");c.width=i,c.height=a;const d=c.getContext("2d");if(!d){r(new Error("Failed to get canvas context"));return}d.imageSmoothingQuality="high",d.drawImage(o,0,0,i,a),c.toBlob(u=>{u?(m.log(`[ImageUtils] Generated thumbnail: ${i}x${a} (original: ${o.width}x${o.height})`),n(u)):r(new Error("Failed to generate thumbnail blob"))},e.type,.85)}catch(i){m.error("[ImageUtils] Error generating thumbnail:",i),r(i)}},o.onerror=()=>{URL.revokeObjectURL(s),r(new Error("Failed to load image for thumbnail generation"))},o.src=s})}class lo{constructor(){this.urlMap=new Map}static getInstance(){return lo.instance||(lo.instance=new lo),lo.instance}createUrl(t,n){let r=this.urlMap.get(t);return r?(m.log(`[BlobMgr] [URL REUSE] Reusing existing URL for hash ${t}: ${r}`,{action:"createUrl_reuse",contentHash:t,mapSize:this.urlMap.size,timestamp:Date.now()}),r):(r=URL.createObjectURL(n),this.urlMap.set(t,r),m.log(`[BlobMgr] [URL CREATION] Created URL for hash ${t}: ${r}`,{action:"createUrl_new",contentHash:t,blobType:n.type,blobSize:n.size,mapSize:this.urlMap.size,timestamp:Date.now()}),r)}getUrl(t){const n=this.urlMap.get(t)||null;return m.log(`[BlobMgr] [URL ACCESS] GetUrl for hash ${t}: ${n?"found":"not found"}`,{action:"getUrl",contentHash:t,found:!!n,mapSize:this.urlMap.size,timestamp:Date.now()}),n}revokeUrl(t){const n=this.urlMap.get(t);if(n){m.log(`[BlobMgr] [URL REVOCATION] Revoking URL for hash ${t}: ${n}`,{action:"revokeUrl",contentHash:t,mapSize:this.urlMap.size,timestamp:Date.now(),stackTrace:new Error().stack});try{URL.revokeObjectURL(n),m.log(`[BlobMgr] [URL REVOCATION] Successfully revoked URL for hash ${t}`)}catch(r){m.error(`[BlobMgr] [URL REVOCATION] Error revoking URL for hash ${t}:`,r)}this.urlMap.delete(t),m.log(`[BlobMgr] [URL LIFECYCLE] Removed URL from map for hash ${t}. Map size now: ${this.urlMap.size}`)}else m.warn(`[BlobMgr] [URL REVOCATION] Attempted to revoke URL for hash ${t}, but no URL was found`)}revokeAllUrls(){const t=this.urlMap.size;m.log(`[BlobMgr] [URL BULK REVOCATION] Revoking all ${t} URLs.`,{action:"revokeAllUrls",mapSize:t,timestamp:Date.now(),hashList:Array.from(this.urlMap.keys()),stackTrace:new Error().stack}),this.urlMap.forEach((n,r)=>{try{m.log(`[BlobMgr] [URL BULK REVOCATION] Revoking URL for hash ${r}: ${n}`),URL.revokeObjectURL(n)}catch(o){m.error(`[BlobMgr] [URL BULK REVOCATION] Error revoking URL for hash ${r}:`,o)}}),this.urlMap.clear(),m.log(`[BlobMgr] [URL LIFECYCLE] Cleared all ${t} URLs from map. Map size now: ${this.urlMap.size}`)}}const Lt=[];for(let e=0;e<256;++e)Lt.push((e+256).toString(16).slice(1));function lF(e,t=0){return(Lt[e[t+0]]+Lt[e[t+1]]+Lt[e[t+2]]+Lt[e[t+3]]+"-"+Lt[e[t+4]]+Lt[e[t+5]]+"-"+Lt[e[t+6]]+Lt[e[t+7]]+"-"+Lt[e[t+8]]+Lt[e[t+9]]+"-"+Lt[e[t+10]]+Lt[e[t+11]]+Lt[e[t+12]]+Lt[e[t+13]]+Lt[e[t+14]]+Lt[e[t+15]]).toLowerCase()}let of;const cF=new Uint8Array(16);function uF(){if(!of){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");of=crypto.getRandomValues.bind(crypto)}return of(cF)}const dF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fw={randomUUID:dF};function ul(e,t,n){var o;if(fw.randomUUID&&!t&&!e)return fw.randomUUID();e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??uF();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,lF(r)}function SC(){const e=localStorage.getItem(cw);if(!e){const t=ul();return localStorage.setItem(cw,t),t}return e}function hw(){return{clientLastUpdated:Date.now(),newVersion:ul(),deviceId:SC()}}function pw(){return{clientLastUpdated:Date.now(),lastUpdatedByDeviceId:SC(),version:ul()}}async function ms(e){const t=ul(),n={...e,actionId:t};return await Nn(Zs,t,n),m.log(`[ActionLog] Added action ${t} of type ${e.type}`),n}async function fF(){return hF("pending_sync")}async function hF(e){try{const t=await zm();return new Promise((n,r)=>{const o=t.transaction(Zs,"readonly"),i=o.objectStore(Zs).index("status_timestamp"),a=IDBKeyRange.only([e]),l=i.openCursor(a),c=[];l.onsuccess=d=>{const u=d.target.result;u?(c.push(u.value),u.continue()):(c.sort((h,w)=>h.timestamp-w.timestamp),n(c))},l.onerror=()=>{r(l.error)},o.onerror=()=>{r(o.error)}})}catch(t){return m.error("[ActionLog] Error getting actions by status:",t),[]}}function Wh(){return ul()}function gs(e,t){return{type:e,operationId:t||Wh(),timestamp:Date.now(),status:"pending_sync",retryCount:0}}const bC="entriesSnapshot",EC="metadataSnapshot",CC="snapshotMetadata";async function pF(e,t){const n=`${e}-${t.toString().padStart(2,"0")}`;return cl(bC,n)}async function mF(e,t,n,r,o){const s=`${e}-${t.toString().padStart(2,"0")}`;await Nn(bC,s,n),await TC(s,{versionId:r,serverLastModified:o}),m.log(`[SnapshotUtils] Saved entries snapshot for ${s} with version ${r}`)}async function gF(){return cl(EC,"images_json_snapshot")}async function yF(e,t,n){await Nn(EC,"images_json_snapshot",e),await TC("images_json_snapshot",{versionId:t,serverLastModified:n}),m.log(`[SnapshotUtils] Saved metadata snapshot with version ${t}`)}async function vF(e){return cl(CC,e)}async function TC(e,t){await Nn(CC,e,t)}class wF{constructor(){this.cachedState={entries:new Map,entriesByMonth:new Map,metadata:new Map}}async initialize(){m.log("[LocalStateManager] Initializing local state..."),this.cachedState.entries.clear(),this.cachedState.entriesByMonth.clear(),this.cachedState.metadata.clear(),await this.loadMetadataSnapshot(),await this.loadAllEntriesSnapshots(),await this.replayPendingActions(),m.log("[LocalStateManager] Local state initialized successfully")}getEntriesForMonth(t,n){const r=`${t}-${n.toString().padStart(2,"0")}`;return this.cachedState.entriesByMonth.get(r)||[]}getAllMetadata(){return Array.from(this.cachedState.metadata.values())}getEntryById(t){return this.cachedState.entries.get(t)}getMetadataById(t){return this.cachedState.metadata.get(t)}async applyAction(t){await this.processAction(t)}async loadMetadataSnapshot(){const t=await gF();t?(t.forEach(n=>{this.cachedState.metadata.set(n.id,n)}),m.log(`[LocalStateManager] Loaded metadata snapshot with ${t.length} items`)):m.log("[LocalStateManager] No metadata snapshot found")}async loadAllEntriesSnapshots(){const t=new Date().getFullYear();let n=0;for(let r=t-5;r<=t+1;r++)for(let o=1;o<=12;o++){const s=await pF(r,o);if(s&&s.length>0){const i=`${r}-${o.toString().padStart(2,"0")}`;this.cachedState.entriesByMonth.set(i,s),s.forEach(a=>{this.cachedState.entries.set(a.id,a)}),n++}}m.log(`[LocalStateManager] Loaded ${n} entry snapshots`)}async replayPendingActions(){const t=await fF();if(t.length===0){m.log("[LocalStateManager] No pending actions to replay");return}m.log(`[LocalStateManager] Replaying ${t.length} pending actions`);const n=new Map;t.forEach(o=>{const s=o.operationId;n.has(s)||n.set(s,[]),n.get(s).push(o)});const r=Array.from(n.entries()).sort((o,s)=>{const i=Math.min(...o[1].map(l=>l.timestamp)),a=Math.min(...s[1].map(l=>l.timestamp));return i-a});for(const[o,s]of r){const i=this.sortActionsByDependencyOrder(s);for(const a of i)await this.processAction(a)}m.log("[LocalStateManager] Finished replaying pending actions")}sortActionsByDependencyOrder(t){const n={"PHOTO_BLOB.UPLOAD":1,"PHOTO_METADATA.CREATE":2,"PHOTO_METADATA.UPDATE":3,"ENTRY.CREATE":4,"ENTRY.UPDATE_FIELDS":5,"ENTRY.MOVE":6,"ENTRY.DELETE":7,"PHOTO_METADATA.DELETE":8,"PHOTO_BLOB.DELETE":9};return[...t].sort((r,o)=>{const s=n[r.type]||999,i=n[o.type]||999;return s-i})}async processAction(t){switch(m.log(`[LocalStateManager] Processing action ${t.actionId} of type ${t.type}`),t.type){case"ENTRY.CREATE":this.processEntryCreateAction(t);break;case"ENTRY.UPDATE_FIELDS":this.processEntryUpdateFieldsAction(t);break;case"ENTRY.DELETE":this.processEntryDeleteAction(t);break;case"PHOTO_METADATA.CREATE":this.processPhotoMetadataCreateAction(t);break;case"PHOTO_METADATA.DELETE":this.processPhotoMetadataDeleteAction(t);break;default:m.warn(`[LocalStateManager] Unhandled action type: ${t.type}`)}}processEntryCreateAction(t){const n=t.payload.entryData;this.cachedState.entries.set(n.id,n);const r=new Date(n.date),o=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}`,s=this.cachedState.entriesByMonth.get(o)||[];s.push(n),this.cachedState.entriesByMonth.set(o,s),m.log(`[LocalStateManager] Added new entry ${n.id} to month ${o}`)}processEntryUpdateFieldsAction(t){const{entryId:n,updates:r,modificationMetadata:o,originalDateIfMoved:s}=t.payload,i=this.cachedState.entries.get(n);if(!i){m.warn(`[LocalStateManager] Cannot update entry ${n}, not found in local state`);return}const a={...i,...r,clientLastUpdated:o.clientLastUpdated,version:o.newVersion,lastUpdatedByDeviceId:o.deviceId};if(s){const l=new Date(s),c=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`,u=(this.cachedState.entriesByMonth.get(c)||[]).filter(x=>x.id!==n);this.cachedState.entriesByMonth.set(c,u);const h=new Date(a.date),w=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`,y=this.cachedState.entriesByMonth.get(w)||[];y.push(a),this.cachedState.entriesByMonth.set(w,y),m.log(`[LocalStateManager] Moved entry ${n} from month ${c} to ${w}`)}else{const l=new Date(a.date),c=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`,u=(this.cachedState.entriesByMonth.get(c)||[]).map(h=>h.id===n?a:h);this.cachedState.entriesByMonth.set(c,u),m.log(`[LocalStateManager] Updated entry ${n} in month ${c}`)}this.cachedState.entries.set(n,a)}processEntryDeleteAction(t){const{entryId:n,entryDate:r}=t.payload;this.cachedState.entries.delete(n);const o=new Date(r),s=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`,a=(this.cachedState.entriesByMonth.get(s)||[]).filter(l=>l.id!==n);this.cachedState.entriesByMonth.set(s,a),m.log(`[LocalStateManager] Deleted entry ${n} from month ${s}`)}processPhotoMetadataCreateAction(t){const n=t.payload.metadataItem;this.cachedState.metadata.set(n.id,n),m.log(`[LocalStateManager] Added new metadata for photo ${n.id}`)}processPhotoMetadataDeleteAction(t){const{photoId:n}=t.payload;this.cachedState.metadata.delete(n),m.log(`[LocalStateManager] Deleted metadata for photo ${n}`)}}class xF{constructor(t){this.localStateManager=new wF,this.initialized=!1,this.eventEmitter=t}async initialize(){this.initialized||(await this.localStateManager.initialize(),this.initialized=!0)}getEntriesForMonth(t,n){return this.initialized?this.localStateManager.getEntriesForMonth(t,n):(m.warn("[ClientStateManager] Not initialized when trying to get entries"),[])}getAllMetadata(){return this.initialized?this.localStateManager.getAllMetadata():(m.warn("[ClientStateManager] Not initialized when trying to get metadata"),[])}async applyAction(t){await this.localStateManager.applyAction(t),this.emitUpdateEventsForAction(t)}async updateEntriesSnapshot(t,n,r,o,s){await mF(t,n,r,o,s),await this.initialize(),this.eventEmitter.emit(zo.ENTRIES_UPDATED,t,n)}async updateMetadataSnapshot(t,n,r){await yF(t,n,r),await this.initialize(),this.eventEmitter.emit(zo.METADATA_UPDATED)}async getSnapshotMetadata(t){return vF(t)}emitUpdateEventsForAction(t){switch(t.type){case"ENTRY.CREATE":case"ENTRY.UPDATE_FIELDS":case"ENTRY.DELETE":if(t.targetFile){const n=t.targetFile.match(/^(\d{4})-(\d{2})-entries\.json$/);if(n){const r=parseInt(n[1],10),o=parseInt(n[2],10);this.eventEmitter.emit(zo.ENTRIES_UPDATED,r,o)}}break;case"PHOTO_METADATA.CREATE":case"PHOTO_METADATA.DELETE":this.eventEmitter.emit(zo.METADATA_UPDATED);break}}}var zo=(e=>(e.ENTRIES_UPDATED="entries_updated",e.METADATA_UPDATED="metadata_updated",e))(zo||{});const Gi=30*60*1e3,ys=Ys.startsWith("/")?Ys.replace("//","/"):`/${Ys}`.replace("//","/"),sf=e=>e.isNew===!0;class SF{constructor(t){this.blobUrlManager=lo.getInstance(),this.folderListCache=new Map,this.prefetchPromises=new Map,this.eventEmitter=new UL,this.useSnapshotBasedState=!0,this.dbx=t,this.stateManager=new xF(this.eventEmitter),this.stateManager.initialize().catch(n=>{m.error("[PhotoJournalClient] Failed to initialize state manager:",n)})}getLastMetadataFetchTime(){const t=localStorage.getItem("lastMetadataFetchTime");return t?Number(t):0}setLastMetadataFetchTime(t){localStorage.setItem("lastMetadataFetchTime",t.toString())}getLastEntriesFetchTime(t,n){const r=this.getMonthCacheKey(t,n),o=localStorage.getItem(`${r}-lastFetchTime`);return o?Number(o):0}setLastEntriesFetchTime(t,n,r){const o=this.getMonthCacheKey(t,n);localStorage.setItem(`${o}-lastFetchTime`,r.toString())}on(t,n){this.eventEmitter.on(t,n)}off(t,n){this.eventEmitter.off(t,n)}getMonthCacheKey(t,n){return`${t}-${n}`}getBlobUrl(t,n="full"){const r=n==="full"?t:`${t}-thumb`;return this.blobUrlManager.getUrl(r)}revokeBlobUrl(t,n=!0){this.blobUrlManager.revokeUrl(t),n&&this.blobUrlManager.revokeUrl(`${t}-thumb`)}clearAllBlobUrls(){this.blobUrlManager.revokeAllUrls()}async invalidateEntriesCache(t,n){const r=this.getMonthCacheKey(t,n);localStorage.removeItem(`${r}-lastFetchTime`),this.invalidateFolderListCache(ys)}async invalidateImagesMetadataCache(){this.invalidateFolderListCache(ys),m.log("[Cache] Invalidated IDB metadata")}setFolderListCache(t,n){this.folderListCache.set(t,{data:n,timestamp:Date.now()}),m.log(`[MemCache] Set folder list for ${t}. Count: ${n.length}`)}getFolderListFromCache(t){const n=this.folderListCache.get(t);return n&&Date.now()-n.timestamp<Gi?(m.log(`[MemCache] Hit folder list for ${t}`),n.data):(m.log(`[MemCache] Miss/Expired folder list for ${t}`),this.folderListCache.delete(t),null)}invalidateFolderListCache(t){this.folderListCache.delete(t),m.log(`[MemCache] Invalidated folder list for ${t}`)}async listFolder(t){if(!this.dbx){m.warn(`[Dropbox] Cannot list folder ${t}: Dropbox client not available.`);const r=this.getFolderListFromCache(t);return r?(m.warn(`[Dropbox] Returning cached folder list for ${t} while offline.`),r):(m.warn(`[Dropbox] No cached folder list found for ${t} while offline. Returning empty.`),[])}const n=this.getFolderListFromCache(t);if(n)return n;m.log(`[Dropbox] Listing folder: ${t}`);try{const o=(await this.dbx.filesListFolder({path:t})).result.entries;return this.setFolderListCache(t,o),m.log(`[Dropbox] Listed ${o.length} items in ${t}`),o}catch(r){if(mC(r))return m.warn(`[Dropbox] Folder not found during listFolder: ${t}`),this.setFolderListCache(t,[]),[];throw Si(r)?m.error(`Dropbox API Error listing folder ${t}: Status ${r.status}`,r.error):m.error(`Non-API Error listing folder ${t}:`,r),r}}async listEntryFiles(){m.log("[Client] listEntryFiles called.");try{const n=(await this.listFolder(ys)).filter(r=>{var o;return r[".tag"]==="file"&&((o=r.name)==null?void 0:o.match(/^\d{4}-\d{2}-entries\.json$/))}).map(r=>r.name);return m.log(`[Client] listEntryFiles found ${n.length} files.`),n}catch(t){return m.error("[Client] Failed to list entry files:",t),null}}async fetchEntriesForMonth(t,n,r){const o=this.getMonthCacheKey(t,n);m.log(`[Client] fetchEntriesForMonth called for ${o}. Online: ${r}`);try{if(this.useSnapshotBasedState){const l=this.stateManager.getEntriesForMonth(t,n);m.log(`[Client] Using snapshot-based state for ${o}. Found ${l.length} entries.`);const c=Date.now()-this.getLastEntriesFetchTime(t,n)<Gi;return r&&!c&&this.dbx&&this.syncEntriesWithServer(t,n,l).catch(d=>{m.error(`[Client] Background entries sync failed for ${o}:`,d)}),l}const s=await Zc(t,n),i=s&&s.length>0;i?m.log(`[Cache] Using IDB entries for ${o}. Found ${s.length} entries.`):m.log(`[Cache] No IDB entries found for ${o}.`);const a=Date.now()-this.getLastEntriesFetchTime(t,n)<Gi;return r&&!a&&this.dbx&&this.syncEntriesWithServer(t,n,s||[]).catch(l=>{m.error(`[Client] Background entries sync failed for ${o}:`,l)}),i?this.parseEntryDates(s):[]}catch(s){m.error(`[Client] Error in fetchEntriesForMonth for ${o}:`,s);try{if(this.useSnapshotBasedState){const i=this.stateManager.getEntriesForMonth(t,n);return m.warn(`Entries fetch failed, falling back to snapshot-based state for ${o}`),i}else{const i=await Zc(t,n);if(i&&i.length>0)return m.warn(`Entries fetch failed, falling back to stale cache for ${o}`),this.parseEntryDates(i)}}catch(i){m.error(`[Cache] Error accessing entries cache after fetch failure for ${o}:`,i)}throw s}return[]}async syncEntriesWithServer(t,n,r){if(!this.dbx)throw new Error("Cannot sync entries: Dropbox client not initialized");const o=this.getMonthCacheKey(t,n);m.log(`[Background Sync] Starting background sync for ${o}`);try{const s=Ss(t,n),a=(await this.listFolder(ys)).find(h=>h[".tag"]==="file"&&h.name===s),l=!!a;let c=[],d=null,u=null;if(!l)m.log(`[Background Sync] File ${s} does not exist on Dropbox.`);else{const h=a;if(d=h.content_hash||h.id||String(Date.now()),u=h.server_modified?new Date(h.server_modified).getTime():Date.now(),this.useSnapshotBasedState){const x=`${t}-${n.toString().padStart(2,"0")}`,b=await this.stateManager.getSnapshotMetadata(x);if(b&&b.versionId===d){m.log(`[Background Sync] Snapshot for ${o} is already up to date (version ${d})`),this.setLastEntriesFetchTime(t,n,Date.now());return}}m.log(`[Background Sync] Fetching entries from Dropbox for ${o}...`);const w=await iw(this.dbx,t,n);c=this.parseEntryDates(w),m.log(`[Background Sync] Fetched ${c.length} entries from Dropbox for ${o}.`),this.useSnapshotBasedState&&d&&(m.log(`[Background Sync] Saving entries snapshot for ${o} with version ${d}`),await this.stateManager.updateEntriesSnapshot(t,n,c,d,u||Date.now()));const y=[...c].sort((x,b)=>new Date(x.date).getTime()-new Date(b.date).getTime()||x.createdAt.getTime()-b.createdAt.getTime());m.log(`[Background Sync] Storing ${y.length} entries in local cache (legacy)`),await JL(y),this.useSnapshotBasedState||this.checkForOrphanedEntries(c,r)}this.setLastEntriesFetchTime(t,n,Date.now()),c.length!==r.length&&(m.log("[Background Sync] Entries changed, triggering refresh"),this.eventEmitter.emit("entries_updated",t,n)),m.log(`[Background Sync] Completed for ${o}`)}catch(s){throw m.error(`[Background Sync] Failed for ${o}:`,s),s}}async checkForOrphanedEntries(t,n){const r=new Set(t.map(s=>s.id)),o=n.filter(s=>!r.has(s.id));if(o.length>0){m.log(`[Background Sync] Found ${o.length} entries deleted on Dropbox`);const s=await Jc();for(const i of o)s.some(l=>l.entity==="entry"&&l.type!=="delete"&&l.payload.entry.id===i.id)?m.log(`[Background Sync] Not deleting entry ${i.id} - has pending changes`):(m.log(`[Background Sync] Deleting orphaned entry ${i.id} from local cache`),await Pr(cn,i.id))}}async syncMetadataWithServer(t){if(!this.dbx)throw new Error("Cannot sync metadata: Dropbox client not initialized");m.log("[Background Sync] Starting metadata background sync");try{const n=zh,o=(await this.listFolder(ys)).find(d=>d[".tag"]==="file"&&d.name===n);if(!o){m.log(`[Background Sync] Metadata file ${n} does not exist on Dropbox.`);return}const s=o,i=s.content_hash||s.id||String(Date.now()),a=s.server_modified?new Date(s.server_modified).getTime():Date.now();if(this.useSnapshotBasedState){const d=await this.stateManager.getSnapshotMetadata("images_json_snapshot");if(d&&d.versionId===i){m.log(`[Background Sync] Metadata snapshot is already up to date (version ${i})`),this.setLastMetadataFetchTime(Date.now());return}}m.log("[Background Sync] Fetching image metadata from Dropbox...");const l=await HL(this.dbx),c=this.parseMetadataDates(l);m.log(`[Background Sync] Fetched ${c.length} metadata entries from Dropbox.`),this.useSnapshotBasedState&&i&&(m.log(`[Background Sync] Saving metadata snapshot with version ${i}`),await this.stateManager.updateMetadataSnapshot(c,i,a)),this.useSnapshotBasedState||this.checkForOrphanedMetadata(c,t),m.log(`[Background Sync] Storing ${c.length} metadata entries in local cache (legacy)`),await tF(c),this.setLastMetadataFetchTime(Date.now()),c.length!==t.length&&(m.log("[Background Sync] Metadata changed, triggering refresh"),this.eventEmitter.emit("metadata_updated")),m.log("[Background Sync] Metadata sync completed")}catch(n){throw m.error("[Background Sync] Metadata sync failed:",n),n}}async checkForOrphanedMetadata(t,n){const r=new Map(t.map(s=>[s.id,s])),o=n.filter(s=>!r.has(s.id));if(o.length>0){m.log(`[Background Sync] Found ${o.length} metadata entries deleted on Dropbox`);const s=await Jc();for(const i of o)s.some(l=>l.entity==="photoMetadata"&&l.type!=="delete"&&l.payload.metadata.find(c=>c.id===i.id))?m.log(`[Background Sync] Not deleting metadata ${i.id} - has pending changes`):(m.log(`[Background Sync] Deleting orphaned metadata ${i.id} from local cache`),await Pr(mr,i.id))}}async fetchImagesMetadata(t){m.log(`[Client] fetchImagesMetadata called. Online: ${t}`);try{if(this.useSnapshotBasedState){const s=this.stateManager.getAllMetadata();m.log(`[Client] Using snapshot-based state for metadata. Found ${s.length} entries.`);const i=Date.now()-this.getLastMetadataFetchTime()<Gi;return t&&!i&&this.dbx&&this.syncMetadataWithServer(s).catch(a=>{m.error("[Client] Background metadata sync failed:",a)}),s}const n=await tf(),r=n&&n.length>0;r?m.log(`[Cache] Using IDB metadata. Found ${n.length} entries.`):m.log("[Cache] No IDB metadata found.");const o=Date.now()-this.getLastMetadataFetchTime()<Gi;return t&&!o&&this.dbx&&this.syncMetadataWithServer(n||[]).catch(s=>{m.error("[Client] Background metadata sync failed:",s)}),r?this.parseMetadataDates(n||[]):[]}catch(n){m.error("[Client] Error in fetchImagesMetadata:",n);try{if(this.useSnapshotBasedState){const r=this.stateManager.getAllMetadata();return m.warn("Metadata fetch failed, falling back to snapshot-based state"),r}else{const r=await tf();if(r&&r.length>0)return m.warn("Metadata fetch failed, falling back to stale cache"),this.parseMetadataDates(r)}}catch(r){m.error("[Cache] Error accessing metadata cache after fetch failure:",r)}throw n}}async getPhotoThumbnailUrl(t,n,r){if(!t)return m.warn(`[Client] Cannot get thumbnail URL: contentHash missing for photoId ${n}`),null;const o=`${t}-thumb`,s=this.blobUrlManager.getUrl(o);if(s)return ql(o).catch(a=>m.warn(`[IDB] Failed background update access time for ${o}:`,a)),s;try{const a=await Io(o);if(a)return m.log(`[Cache] Found thumbnail in IDB for hash ${o}.`),await ql(o),this.blobUrlManager.createUrl(o,a.blob);const l=await Io(t);if(l){m.log(`[Cache] Found full blob in IDB for hash ${t}. Generating thumbnail...`);try{const c=await rf(l.blob);return m.log(`[Cache] Generated thumbnail for hash ${t}. Caching...`),await _o(o,c,"thumb"),this.blobUrlManager.createUrl(o,c)}catch(c){return m.error(`[Cache] Error generating thumbnail for hash ${t}:`,c),this.getPhotoBlobUrl(t,n,r)}}}catch(a){m.error(`[Cache] Error checking IDB for thumbnail hash ${o}:`,a)}if(!r)return m.log(`[Client] Thumbnail not cached for hash ${t} and offline. Trying full image.`),this.getPhotoBlobUrl(t,n,r);const i=await this.getPhotoBlobUrl(t,n,r);if(i)try{const a=await Io(t);if(a){m.log(`[Cache] Full image now available for hash ${t}. Generating thumbnail...`);const l=await rf(a.blob);return m.log(`[Cache] Generated thumbnail for hash ${t} after download. Caching...`),await _o(o,l,"thumb"),this.blobUrlManager.createUrl(o,l)}}catch(a){return m.error(`[Cache] Error generating thumbnail after download for hash ${t}:`,a),i}return null}async getPhotoBlobUrl(t,n,r){if(!t)return m.warn(`[Client] Cannot get blob URL: contentHash missing for photoId ${n}`),null;const o=this.blobUrlManager.getUrl(t);if(o)return m.log(`[Memory] Found cached URL for hash ${t}`),ql(t).catch(s=>m.warn(`[IDB] Failed background update access time for ${t}:`,s)),o;try{const s=await Io(t);if(s)return m.log(`[Cache] Found blob in IDB for hash ${t}.`),await ql(t),this.generateThumbnailInBackground(t,s.blob),this.blobUrlManager.createUrl(t,s.blob)}catch(s){m.error(`[Cache] Error checking IDB for blob hash ${t}:`,s)}if(!r)return m.log(`[Client] Blob not cached for hash ${t} and offline.`),null;if(!this.dbx)return m.error(`[Client] Cannot download blob hash ${t}: Online but Dropbox client not available.`),null;m.log(`[Client] Blob not cached for hash ${t}. Fetching from Dropbox...`);try{const i=(await this.fetchImagesMetadata(r)).find(h=>{var w;return((w=h.photoMetadata)==null?void 0:w.contentHash)===t});if(!(i!=null&&i.photoFilename))return m.warn(`[Client] Cannot fetch blob: Metadata or filename missing for contentHash ${t} (photoId: ${n})`),null;const a=i.photoFilename,l=`${ps}/${a}`.replace("//","/");m.log(`[Dropbox] Downloading blob for file: ${l}`);const d=(await this.dbx.filesDownload({path:l})).result.fileBlob;if(!d)return m.error(`[Dropbox] Download response for ${l} did not contain a fileBlob.`),null;m.log(`[Cache] Downloaded blob for hash ${t}. Size: ${d.size}`);const u=this.blobUrlManager.createUrl(t,d);try{await _o(t,d,"full"),this.generateThumbnailInBackground(t,d),m.log(`[Cache] Successfully cached blob for hash ${t}`)}catch(h){if(h instanceof DOMException&&h.name==="QuotaExceededError"){m.warn(`[Cache] Storage quota exceeded while caching blob ${t}. Triggering pruning...`);try{await eu(10),await _o(t,d,"full"),this.generateThumbnailInBackground(t,d),m.log(`[Cache] Successfully cached blob after pruning for hash ${t}`)}catch(w){m.error(`[Cache] Failed to prune and retry caching for ${t}:`,w)}}else m.error(`[Cache] Error caching blob for hash ${t}:`,h)}return u}catch(s){return m.error(`[Client] Failed to fetch/cache blob for hash ${t} (photoId: ${n}):`,s),null}}async saveEntry(t,n,r){var T,A,P,M,I,O,N;if(m.log(`[Client] saveEntry called. Online: ${r}. Edit mode: ${!!n}`),!t.date)throw new Error("Entry date is missing.");let o=await this.fetchImagesMetadata(r);const s=[],i=!!n,a=[],l=new Set((n==null?void 0:n.photos.map(U=>U.photoId))??[]),c=[];i&&l.forEach(U=>{t.photos.some(q=>!sf(q)&&q.photoId===U)||m.log(`[Save] Photo ${U} removed from entry`)});const d=new Date(t.date.toISOString().split("T")[0]+"T00:00:00Z"),u=d.getUTCFullYear(),h=d.getUTCMonth()+1;let w=null,y=null;if(n){const U=new Date(n.date+"T00:00:00Z");w=U.getUTCFullYear(),y=U.getUTCMonth()+1}const x=i&&(u!==w||h!==y);for(const U of t.photos){let j=null,q,_=null,L=!1;if(sf(U)){const k=U.file;q=U.crop,_=await aw(k);const R=o.find(F=>{var W;return((W=F.photoMetadata)==null?void 0:W.contentHash)===_});if(R)j=R.id,m.log(`[Save] Hash collision for ${k.name}. Using existing ID: ${j}`),l.has(j)||(L=!0),await Io(_)||c.push({hash:_,blob:k});else{m.log(`[Save] Uploading new photo: ${k.name}`);const F=Date.now(),W=crypto.randomUUID().substring(0,8),J=k.name.replace(/[^a-zA-Z0-9.]/g,"_"),be=`${F}_${W}_${J}`,se={id:crypto.randomUUID(),photoFilename:be,photoMetadata:{filename:k.name,mimeType:k.type,width:(T=U.originalDimensions)==null?void 0:T.width,height:(A=U.originalDimensions)==null?void 0:A.height,exifDate:((P=U.exifData)==null?void 0:P.exifDate)??null,contentHash:_},createdAt:new Date},Ye=crypto.randomUUID(),te={actionId:Ye,type:"create",entity:"photoUpload",payload:{contentHash:_,photoFilename:be,folder:ps},timestamp:Date.now(),retryCount:0,status:"pending"};await Hi(te),m.log(`[Save] Photo upload added to sync queue. ActionId: ${Ye}, Hash: ${_}`),j=se.id,o.push(se),a.push(se),await Nn(mr,se.id,se),L=!0,c.push({hash:_,blob:k}),m.log(`[Save] New photo uploaded. ID: ${j}, Hash: ${_}`)}}else{j=U.photoId,q=U.crop;const k=o.find(R=>R.id===j);_=((M=k==null?void 0:k.photoMetadata)==null?void 0:M.contentHash)??null,(!i||!l.has(j))&&(L=!0),_&&(await Io(_)||m.warn(`[Save] Existing photo blob missing from cache for hash: ${_} (ID: ${j})`)),m.log(`[Save] Keeping existing photo ID: ${j}. Is addition? ${L}. Hash: ${_}`)}j&&s.push({photoId:j,crop:q})}for(const{hash:U,blob:j}of c)await _o(U,j,"full");const b=t.date.toISOString().split("T")[0],g=new Date;let v;n?v={...n,date:b,content:t.content,photos:s,updatedAt:g}:v={id:crypto.randomUUID(),date:b,content:t.content,photos:s,createdAt:g,updatedAt:g};const S=Wh();m.log(`[Save] Using operationId: ${S} for all actions in this operation`);const E=[];for(const U of t.photos)if(sf(U)){const j=await aw(U.file),q=Date.now(),_=crypto.randomUUID().substring(0,8),L=U.file.name.replace(/[^a-zA-Z0-9.]/g,"_"),k=`${q}_${_}_${L}`,F={...gs("PHOTO_BLOB.UPLOAD",S),actionId:crypto.randomUUID(),payload:{localBlobKey:j,cloudPhotoFilename:k},targetPhotoFolder:ps};E.push(ms(F)),m.log(`[Save] Photo blob upload action logged for ${k}. Hash: ${j}`);const W=gs("PHOTO_METADATA.CREATE",S),J=pw(),be={id:crypto.randomUUID(),photoFilename:k,photoMetadata:{filename:U.file.name,mimeType:U.file.type,width:(I=U.originalDimensions)==null?void 0:I.width,height:(O=U.originalDimensions)==null?void 0:O.height,exifDate:((N=U.exifData)==null?void 0:N.exifDate)??null,contentHash:j},createdAt:new Date,...J},se={...W,actionId:crypto.randomUUID(),payload:{metadataItem:be},targetFile:zh};E.push(ms(se)),m.log(`[Save] Photo metadata create action logged for ID: ${be.id}`)}await this.invalidateEntriesCache(u,h);const C=pw();if(v={...v,...C},x&&w!==null&&y!==null){m.log(`[Save] Deleting entry ${v.id} from local database due to date change`),await Pr(cn,v.id),m.log(`[Save] Adding entry ${v.id} to local database due to date change`),await Nn(cn,v.id,v);const U=gs("ENTRY.UPDATE_FIELDS",S),j=hw(),q={...U,actionId:crypto.randomUUID(),payload:{entryId:v.id,updates:{date:v.date,content:v.content,photos:v.photos},newMainUpdatedAt:v.updatedAt.getTime(),modificationMetadata:j,originalDateIfMoved:n==null?void 0:n.date},targetFile:Ss(u,h)};E.push(ms(q)),m.log(`[Save] Entry update (date change) action logged for ID: ${v.id}`);const _=crypto.randomUUID(),L={actionId:_,type:"update",entity:"entry",payload:{entry:v,year:w,month:y,isDateChange:!0,oldYear:w,oldMonth:y},timestamp:Date.now(),retryCount:0,status:"pending"};await Hi(L),m.log(`[Save] Date change original month update added to sync queue (backward compat). ActionId: ${_}`)}else{if(m.log(`[Save] Saving entry ${v.id} to local database`),await Nn(cn,v.id,v),n){const q=gs("ENTRY.UPDATE_FIELDS",S),_=hw(),L={...q,actionId:crypto.randomUUID(),payload:{entryId:v.id,updates:{content:v.content,photos:v.photos},newMainUpdatedAt:v.updatedAt.getTime(),modificationMetadata:_},targetFile:Ss(u,h)};E.push(ms(L)),m.log(`[Save] Entry update action logged for ID: ${v.id}`)}else{const _={...gs("ENTRY.CREATE",S),actionId:crypto.randomUUID(),payload:{entryData:v},targetFile:Ss(u,h)};E.push(ms(_)),m.log(`[Save] Entry create action logged for ID: ${v.id}`)}const U=crypto.randomUUID(),j={actionId:U,type:n?"update":"create",entity:"entry",payload:{entry:v,year:u,month:h},timestamp:Date.now(),retryCount:0,status:"pending"};await Hi(j),m.log(`[Save] Entry save added to sync queue (backward compat). ActionId: ${U}, ID: ${v.id}`)}if(a.length>0){m.log(`[Save] Queueing metadata update with ${a.length} entries`);const U=crypto.randomUUID(),j={actionId:U,type:"create",entity:"photoMetadata",payload:{metadata:a},timestamp:Date.now(),retryCount:0,status:"pending"};await Hi(j),m.log(`[Save] Metadata update added to sync queue (backward compat). ActionId: ${U}`)}await Promise.all(E),m.log(`[Save] All action log entries created for operation: ${S}`),r&&this.dbx&&(m.log("[Save] Online mode - triggering immediate processing of save queue in background"),uw(this.dbx,r))}parseEntryDates(t){return t.map(n=>({...n,photos:Array.isArray(n.photos)?n.photos:[],createdAt:n.createdAt instanceof Date?n.createdAt:new Date(n.createdAt||0),updatedAt:n.updatedAt instanceof Date?n.updatedAt:new Date(n.updatedAt||0)}))}parseMetadataDates(t){return t.map(n=>({...n,createdAt:n.createdAt instanceof Date?n.createdAt:new Date(n.createdAt||0)}))}async generateThumbnailInBackground(t,n){const r=`${t}-thumb`;try{if(await Io(r)){m.log(`[Background] Thumbnail already exists for hash ${t}.`);return}m.log(`[Background] Generating thumbnail for hash ${t}...`);const s=await rf(n);m.log(`[Background] Caching new thumbnail for hash ${t}.`);try{await _o(r,s,"thumb")}catch(i){if(i instanceof DOMException&&i.name==="QuotaExceededError"){m.warn(`[Background] Storage quota exceeded while caching thumbnail ${r}. Triggering pruning...`);try{await eu(10),await _o(r,s,"thumb"),m.log(`[Background] Successfully cached thumbnail after pruning: ${r}`)}catch(a){m.error(`[Background] Failed to prune and retry caching thumbnail for ${r}:`,a)}}else m.error(`[Background] Error caching thumbnail for hash ${r}:`,i)}}catch(o){m.error(`[Background] Failed to generate/cache thumbnail for hash ${t}:`,o)}}async cleanupOrphanedPhotos(t){if(!this.dbx){m.warn("[Cleanup] Cannot cleanup photos: Dropbox client not available.");return}m.log("[Cleanup] Fetching all entries to calculate orphaned photos");const n=await this.listEntryFiles();if(!n){m.warn("[Cleanup] Could not retrieve entry files list, aborting orphaned photo cleanup");return}const r=new Set;for(const s of n)try{const i=s.match(/^(\d{4})-(\d{2})-entries\.json$/);if(!i)continue;const a=parseInt(i[1],10),l=parseInt(i[2],10),c=await iw(this.dbx,a,l);m.log(`[Cleanup] Loaded ${c.length} entries from ${s}`);for(const d of c)for(const u of d.photos||[])u.photoId&&r.add(u.photoId)}catch(i){m.error(`[Cleanup] Error processing entries file ${s}:`,i)}m.log(`[Cleanup] Found ${r.size} photos in use across all entries`);const o=t.filter(s=>!r.has(s.id));if(o.length>0){m.log(`[Cleanup] Found ${o.length} orphaned photos not used in any entry. Attempting deletion.`);const s=5,i=500,a=[];for(let c=0;c<o.length;c+=s)a.push(o.slice(c,c+s));for(let c=0;c<a.length;c++){const d=a[c];c>0&&(m.log(`[Cleanup] Pausing before next batch of ${d.length} photos`),await new Promise(h=>setTimeout(h,i)));const u=d.map(async h=>{var w;if(h.photoFilename)try{if(m.log(`[Cleanup] Deleting orphaned photo file: ${h.photoFilename} (ID: ${h.id})`),await KL(this.dbx,h.photoFilename,ps)){m.log(`[Cleanup] Successfully deleted file ${h.photoFilename}`);const x=(w=h.photoMetadata)==null?void 0:w.contentHash;x&&(await Ns(x),await Ns(`${x}-thumb`),this.blobUrlManager.revokeUrl(x),this.blobUrlManager.revokeUrl(`${x}-thumb`))}}catch(y){m.error(`[Cleanup] Error deleting orphaned photo file ${h.photoFilename}:`,y)}else m.warn(`[Cleanup] Cannot delete photo ID ${h.id}, filename missing.`);return h});await Promise.all(u),m.log(`[Cleanup] Completed batch ${c+1} of ${a.length}`)}m.log("[Cleanup] Orphaned photo file deletion attempt complete.");const l=t.filter(c=>r.has(c.id));await GL(this.dbx,l);for(const c of o)nF(c.id)}else m.log("[Cleanup] No photos with usage count <= 0 found in current state.")}async syncDeletionsFromDropbox(){if(m.log("[Deletion Sync] Starting synchronization of deletions from Dropbox"),!this.dbx){m.warn("[Deletion Sync] Cannot sync deletions: Dropbox client not available");return}try{const[t,n]=await Promise.allSettled([this.syncPhotosDeletions(),this.syncEntriesDeletions()]);t.status==="fulfilled"?m.log("[Deletion Sync] Photo deletions sync completed successfully"):m.error("[Deletion Sync] Photo deletions sync failed:",t.reason),n.status==="fulfilled"?m.log("[Deletion Sync] Entry deletions sync completed successfully"):m.error("[Deletion Sync] Entry deletions sync failed:",n.reason),m.log("[Deletion Sync] Synchronization of deletions completed")}catch(t){m.error("[Deletion Sync] Error during deletion sync:",t)}}async syncPhotosDeletions(){var s;if(m.log("[Deletion Sync] Checking for photo deletions"),!this.dbx)throw new Error("Dropbox client not available");const n=(await this.listFolder(ps)).filter(i=>i[".tag"]==="file").map(i=>i.name);m.log(`[Deletion Sync] Found ${n.length} photos in Dropbox`);const r=await tf();if(!r||r.length===0){m.log("[Deletion Sync] No local metadata to check");return}m.log(`[Deletion Sync] Checking ${r.length} local metadata entries against Dropbox photos`);const o=r.filter(i=>i.photoFilename&&!n.includes(i.photoFilename));if(o.length===0){m.log("[Deletion Sync] No orphaned photo metadata found");return}m.log(`[Deletion Sync] Found ${o.length} orphaned metadata entries to delete`);for(const i of o)m.log(`[Deletion Sync] Deleting orphaned metadata for photo ${i.photoFilename}`),await Pr(mr,i.id),(s=i.photoMetadata)!=null&&s.contentHash&&(await Ns(i.photoMetadata.contentHash),await Ns(`${i.photoMetadata.contentHash}-thumb`));m.log("[Deletion Sync] Photo deletion sync completed")}async syncEntriesDeletions(){if(m.log("[Deletion Sync] Checking for entry file deletions"),!this.dbx)throw new Error("Dropbox client not available");const n=(await this.listFolder(ys)).filter(s=>{var i;return s[".tag"]==="file"&&((i=s.name)==null?void 0:i.match(/^\d{4}-\d{2}-entries\.json$/))}).map(s=>s.name);m.log(`[Deletion Sync] Found ${n.length} entry files in Dropbox`);const r=await eF();if(!r||r.length===0){m.log("[Deletion Sync] No local entries to check");return}m.log(`[Deletion Sync] Checking ${r.length} local entries against Dropbox files`);const o=new Map;for(const s of r){const i=s.date.substring(0,7),a=o.get(i)||[];a.push(s),o.set(i,a)}for(const[s,i]of o.entries()){const a=`${s}-entries.json`;n.includes(a)||(m.log(`[Deletion Sync] Entry file ${a} not found in Dropbox. Deleting ${i.length} local entries`),await Promise.all(i.map(l=>Pr(cn,l.id))))}m.log("[Deletion Sync] Entry deletion sync completed")}async deleteEntry(t,n,r,o){m.log(`[Delete] deleteEntry called for ${t}. Online: ${o}`);try{const i=(await this.fetchEntriesForMonth(n,r,o)).find(y=>y.id===t);if(!i){m.warn(`[Delete] Entry ${t} not found in month ${n}-${r} cache`);return}const a=Wh();m.log(`[Delete] Using operationId: ${a}`),m.log(`[Delete] Deleting entry ${t} from local database`),await Pr(cn,t);const l=i.photos.map(y=>y.photoId),c=gs("ENTRY.DELETE",a),d=Ss(n,r),u={...c,actionId:crypto.randomUUID(),payload:{entryId:t,entryDate:i.date,originalPhotoIds:l},targetFile:d,targetPhotoFolder:ps};await ms(u),m.log(`[Delete] Entry deletion added to action log. ActionId: ${u.actionId}, ID: ${t}`);const h=crypto.randomUUID(),w={actionId:h,type:"delete",entity:"entry",payload:{entryId:t,year:n,month:r,entryDate:i.date},timestamp:Date.now(),retryCount:0,status:"pending"};await Hi(w),m.log(`[Delete] Entry deletion added to sync queue (backward compat). ActionId: ${h}, ID: ${t}`),await this.invalidateEntriesCache(n,r),o&&this.dbx&&(m.log("[Delete] Online mode - triggering immediate processing of save queue in background"),uw(this.dbx,o)),m.log("[Delete] deleteEntry operation completed.")}catch(s){throw m.error("[Delete] Error deleting entry:",s),s}}triggerPrefetch(t,n,r){if(!r){m.log("[Prefetch] Skipping prefetch while offline.");return}m.log(`[Prefetch] Triggered for current month ${t}-${n+1}`),[-1,1].forEach(s=>{let i=t,a=n+s;a<0?(a=11,i--):a>11&&(a=0,i++);const l=this.getMonthCacheKey(i,a);if(!this.prefetchPromises.has(l)){m.log(`[Prefetch] Queueing entries for ${l}`);const c=this.fetchEntriesForMonth(i,a,!0).catch(d=>m.error(`[Prefetch] Failed for entries ${l}:`,d)).finally(()=>this.prefetchPromises.delete(l));this.prefetchPromises.set(l,c)}});const o="metadata";if(!this.prefetchPromises.has(o)){m.log("[Prefetch] Queueing metadata.");const s=this.fetchImagesMetadata(!0).catch(i=>m.error("[Prefetch] Metadata failed:",i)).finally(()=>this.prefetchPromises.delete(o));this.prefetchPromises.set(o,s)}}}var bF="rpc",EF="upload",CF="download",af="app",lf="user",cf="team",TF="noauth",DF="cookie",tu="dropboxapi.com",mw="dropbox.com",Hh={api:"api",notify:"bolt",content:"api-content"},D={};D.accountSetProfilePhoto=function(e){return this.request("account/set_profile_photo",e,"user","api","rpc","account_info.write")};D.authTokenFromOauth1=function(e){return this.request("auth/token/from_oauth1",e,"app","api","rpc",null)};D.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};D.checkApp=function(e){return this.request("check/app",e,"app","api","rpc",null)};D.checkUser=function(e){return this.request("check/user",e,"user","api","rpc","account_info.read")};D.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};D.contactsDeleteManualContactsBatch=function(e){return this.request("contacts/delete_manual_contacts_batch",e,"user","api","rpc","contacts.write")};D.filePropertiesPropertiesAdd=function(e){return this.request("file_properties/properties/add",e,"user","api","rpc","files.metadata.write")};D.filePropertiesPropertiesOverwrite=function(e){return this.request("file_properties/properties/overwrite",e,"user","api","rpc","files.metadata.write")};D.filePropertiesPropertiesRemove=function(e){return this.request("file_properties/properties/remove",e,"user","api","rpc","files.metadata.write")};D.filePropertiesPropertiesSearch=function(e){return this.request("file_properties/properties/search",e,"user","api","rpc","files.metadata.read")};D.filePropertiesPropertiesSearchContinue=function(e){return this.request("file_properties/properties/search/continue",e,"user","api","rpc","files.metadata.read")};D.filePropertiesPropertiesUpdate=function(e){return this.request("file_properties/properties/update",e,"user","api","rpc","files.metadata.write")};D.filePropertiesTemplatesAddForTeam=function(e){return this.request("file_properties/templates/add_for_team",e,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesAddForUser=function(e){return this.request("file_properties/templates/add_for_user",e,"user","api","rpc","files.metadata.write")};D.filePropertiesTemplatesGetForTeam=function(e){return this.request("file_properties/templates/get_for_team",e,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesGetForUser=function(e){return this.request("file_properties/templates/get_for_user",e,"user","api","rpc","files.metadata.read")};D.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};D.filePropertiesTemplatesRemoveForTeam=function(e){return this.request("file_properties/templates/remove_for_team",e,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesRemoveForUser=function(e){return this.request("file_properties/templates/remove_for_user",e,"user","api","rpc","files.metadata.write")};D.filePropertiesTemplatesUpdateForTeam=function(e){return this.request("file_properties/templates/update_for_team",e,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesUpdateForUser=function(e){return this.request("file_properties/templates/update_for_user",e,"user","api","rpc","files.metadata.write")};D.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};D.fileRequestsCreate=function(e){return this.request("file_requests/create",e,"user","api","rpc","file_requests.write")};D.fileRequestsDelete=function(e){return this.request("file_requests/delete",e,"user","api","rpc","file_requests.write")};D.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};D.fileRequestsGet=function(e){return this.request("file_requests/get",e,"user","api","rpc","file_requests.read")};D.fileRequestsListV2=function(e){return this.request("file_requests/list_v2",e,"user","api","rpc","file_requests.read")};D.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};D.fileRequestsListContinue=function(e){return this.request("file_requests/list/continue",e,"user","api","rpc","file_requests.read")};D.fileRequestsUpdate=function(e){return this.request("file_requests/update",e,"user","api","rpc","file_requests.write")};D.filesAlphaGetMetadata=function(e){return this.request("files/alpha/get_metadata",e,"user","api","rpc","files.metadata.read")};D.filesAlphaUpload=function(e){return this.request("files/alpha/upload",e,"user","content","upload","files.content.write")};D.filesCopyV2=function(e){return this.request("files/copy_v2",e,"user","api","rpc","files.content.write")};D.filesCopy=function(e){return this.request("files/copy",e,"user","api","rpc","files.content.write")};D.filesCopyBatchV2=function(e){return this.request("files/copy_batch_v2",e,"user","api","rpc","files.content.write")};D.filesCopyBatch=function(e){return this.request("files/copy_batch",e,"user","api","rpc","files.content.write")};D.filesCopyBatchCheckV2=function(e){return this.request("files/copy_batch/check_v2",e,"user","api","rpc","files.content.write")};D.filesCopyBatchCheck=function(e){return this.request("files/copy_batch/check",e,"user","api","rpc","files.content.write")};D.filesCopyReferenceGet=function(e){return this.request("files/copy_reference/get",e,"user","api","rpc","files.content.write")};D.filesCopyReferenceSave=function(e){return this.request("files/copy_reference/save",e,"user","api","rpc","files.content.write")};D.filesCreateFolderV2=function(e){return this.request("files/create_folder_v2",e,"user","api","rpc","files.content.write")};D.filesCreateFolder=function(e){return this.request("files/create_folder",e,"user","api","rpc","files.content.write")};D.filesCreateFolderBatch=function(e){return this.request("files/create_folder_batch",e,"user","api","rpc","files.content.write")};D.filesCreateFolderBatchCheck=function(e){return this.request("files/create_folder_batch/check",e,"user","api","rpc","files.content.write")};D.filesDeleteV2=function(e){return this.request("files/delete_v2",e,"user","api","rpc","files.content.write")};D.filesDelete=function(e){return this.request("files/delete",e,"user","api","rpc","files.content.write")};D.filesDeleteBatch=function(e){return this.request("files/delete_batch",e,"user","api","rpc","files.content.write")};D.filesDeleteBatchCheck=function(e){return this.request("files/delete_batch/check",e,"user","api","rpc","files.content.write")};D.filesDownload=function(e){return this.request("files/download",e,"user","content","download","files.content.read")};D.filesDownloadZip=function(e){return this.request("files/download_zip",e,"user","content","download","files.content.read")};D.filesExport=function(e){return this.request("files/export",e,"user","content","download","files.content.read")};D.filesGetFileLockBatch=function(e){return this.request("files/get_file_lock_batch",e,"user","api","rpc","files.content.read")};D.filesGetMetadata=function(e){return this.request("files/get_metadata",e,"user","api","rpc","files.metadata.read")};D.filesGetPreview=function(e){return this.request("files/get_preview",e,"user","content","download","files.content.read")};D.filesGetTemporaryLink=function(e){return this.request("files/get_temporary_link",e,"user","api","rpc","files.content.read")};D.filesGetTemporaryUploadLink=function(e){return this.request("files/get_temporary_upload_link",e,"user","api","rpc","files.content.write")};D.filesGetThumbnail=function(e){return this.request("files/get_thumbnail",e,"user","content","download","files.content.read")};D.filesGetThumbnailV2=function(e){return this.request("files/get_thumbnail_v2",e,"app, user","content","download","files.content.read")};D.filesGetThumbnailBatch=function(e){return this.request("files/get_thumbnail_batch",e,"user","content","rpc","files.content.read")};D.filesListFolder=function(e){return this.request("files/list_folder",e,"app, user","api","rpc","files.metadata.read")};D.filesListFolderContinue=function(e){return this.request("files/list_folder/continue",e,"app, user","api","rpc","files.metadata.read")};D.filesListFolderGetLatestCursor=function(e){return this.request("files/list_folder/get_latest_cursor",e,"user","api","rpc","files.metadata.read")};D.filesListFolderLongpoll=function(e){return this.request("files/list_folder/longpoll",e,"noauth","notify","rpc","files.metadata.read")};D.filesListRevisions=function(e){return this.request("files/list_revisions",e,"user","api","rpc","files.metadata.read")};D.filesLockFileBatch=function(e){return this.request("files/lock_file_batch",e,"user","api","rpc","files.content.write")};D.filesMoveV2=function(e){return this.request("files/move_v2",e,"user","api","rpc","files.content.write")};D.filesMove=function(e){return this.request("files/move",e,"user","api","rpc","files.content.write")};D.filesMoveBatchV2=function(e){return this.request("files/move_batch_v2",e,"user","api","rpc","files.content.write")};D.filesMoveBatch=function(e){return this.request("files/move_batch",e,"user","api","rpc","files.content.write")};D.filesMoveBatchCheckV2=function(e){return this.request("files/move_batch/check_v2",e,"user","api","rpc","files.content.write")};D.filesMoveBatchCheck=function(e){return this.request("files/move_batch/check",e,"user","api","rpc","files.content.write")};D.filesPaperCreate=function(e){return this.request("files/paper/create",e,"user","api","upload","files.content.write")};D.filesPaperUpdate=function(e){return this.request("files/paper/update",e,"user","api","upload","files.content.write")};D.filesPermanentlyDelete=function(e){return this.request("files/permanently_delete",e,"user","api","rpc","files.permanent_delete")};D.filesPropertiesAdd=function(e){return this.request("files/properties/add",e,"user","api","rpc","files.metadata.write")};D.filesPropertiesOverwrite=function(e){return this.request("files/properties/overwrite",e,"user","api","rpc","files.metadata.write")};D.filesPropertiesRemove=function(e){return this.request("files/properties/remove",e,"user","api","rpc","files.metadata.write")};D.filesPropertiesTemplateGet=function(e){return this.request("files/properties/template/get",e,"user","api","rpc","files.metadata.read")};D.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};D.filesPropertiesUpdate=function(e){return this.request("files/properties/update",e,"user","api","rpc","files.metadata.write")};D.filesRestore=function(e){return this.request("files/restore",e,"user","api","rpc","files.content.write")};D.filesSaveUrl=function(e){return this.request("files/save_url",e,"user","api","rpc","files.content.write")};D.filesSaveUrlCheckJobStatus=function(e){return this.request("files/save_url/check_job_status",e,"user","api","rpc","files.content.write")};D.filesSearch=function(e){return this.request("files/search",e,"user","api","rpc","files.metadata.read")};D.filesSearchV2=function(e){return this.request("files/search_v2",e,"user","api","rpc","files.metadata.read")};D.filesSearchContinueV2=function(e){return this.request("files/search/continue_v2",e,"user","api","rpc","files.metadata.read")};D.filesTagsAdd=function(e){return this.request("files/tags/add",e,"user","api","rpc","files.metadata.write")};D.filesTagsGet=function(e){return this.request("files/tags/get",e,"user","api","rpc","files.metadata.read")};D.filesTagsRemove=function(e){return this.request("files/tags/remove",e,"user","api","rpc","files.metadata.write")};D.filesUnlockFileBatch=function(e){return this.request("files/unlock_file_batch",e,"user","api","rpc","files.content.write")};D.filesUpload=function(e){return this.request("files/upload",e,"user","content","upload","files.content.write")};D.filesUploadSessionAppendV2=function(e){return this.request("files/upload_session/append_v2",e,"user","content","upload","files.content.write")};D.filesUploadSessionAppend=function(e){return this.request("files/upload_session/append",e,"user","content","upload","files.content.write")};D.filesUploadSessionFinish=function(e){return this.request("files/upload_session/finish",e,"user","content","upload","files.content.write")};D.filesUploadSessionFinishBatch=function(e){return this.request("files/upload_session/finish_batch",e,"user","api","rpc","files.content.write")};D.filesUploadSessionFinishBatchV2=function(e){return this.request("files/upload_session/finish_batch_v2",e,"user","api","rpc","files.content.write")};D.filesUploadSessionFinishBatchCheck=function(e){return this.request("files/upload_session/finish_batch/check",e,"user","api","rpc","files.content.write")};D.filesUploadSessionStart=function(e){return this.request("files/upload_session/start",e,"user","content","upload","files.content.write")};D.filesUploadSessionStartBatch=function(e){return this.request("files/upload_session/start_batch",e,"user","api","rpc","files.content.write")};D.openidUserinfo=function(e){return this.request("openid/userinfo",e,"user","api","rpc","openid")};D.paperDocsArchive=function(e){return this.request("paper/docs/archive",e,"user","api","rpc","files.content.write")};D.paperDocsCreate=function(e){return this.request("paper/docs/create",e,"user","api","upload","files.content.write")};D.paperDocsDownload=function(e){return this.request("paper/docs/download",e,"user","api","download","files.content.read")};D.paperDocsFolderUsersList=function(e){return this.request("paper/docs/folder_users/list",e,"user","api","rpc","sharing.read")};D.paperDocsFolderUsersListContinue=function(e){return this.request("paper/docs/folder_users/list/continue",e,"user","api","rpc","sharing.read")};D.paperDocsGetFolderInfo=function(e){return this.request("paper/docs/get_folder_info",e,"user","api","rpc","sharing.read")};D.paperDocsList=function(e){return this.request("paper/docs/list",e,"user","api","rpc","files.metadata.read")};D.paperDocsListContinue=function(e){return this.request("paper/docs/list/continue",e,"user","api","rpc","files.metadata.read")};D.paperDocsPermanentlyDelete=function(e){return this.request("paper/docs/permanently_delete",e,"user","api","rpc","files.permanent_delete")};D.paperDocsSharingPolicyGet=function(e){return this.request("paper/docs/sharing_policy/get",e,"user","api","rpc","sharing.read")};D.paperDocsSharingPolicySet=function(e){return this.request("paper/docs/sharing_policy/set",e,"user","api","rpc","sharing.write")};D.paperDocsUpdate=function(e){return this.request("paper/docs/update",e,"user","api","upload","files.content.write")};D.paperDocsUsersAdd=function(e){return this.request("paper/docs/users/add",e,"user","api","rpc","sharing.write")};D.paperDocsUsersList=function(e){return this.request("paper/docs/users/list",e,"user","api","rpc","sharing.read")};D.paperDocsUsersListContinue=function(e){return this.request("paper/docs/users/list/continue",e,"user","api","rpc","sharing.read")};D.paperDocsUsersRemove=function(e){return this.request("paper/docs/users/remove",e,"user","api","rpc","sharing.write")};D.paperFoldersCreate=function(e){return this.request("paper/folders/create",e,"user","api","rpc","files.content.write")};D.sharingAddFileMember=function(e){return this.request("sharing/add_file_member",e,"user","api","rpc","sharing.write")};D.sharingAddFolderMember=function(e){return this.request("sharing/add_folder_member",e,"user","api","rpc","sharing.write")};D.sharingCheckJobStatus=function(e){return this.request("sharing/check_job_status",e,"user","api","rpc","sharing.write")};D.sharingCheckRemoveMemberJobStatus=function(e){return this.request("sharing/check_remove_member_job_status",e,"user","api","rpc","sharing.write")};D.sharingCheckShareJobStatus=function(e){return this.request("sharing/check_share_job_status",e,"user","api","rpc","sharing.write")};D.sharingCreateSharedLink=function(e){return this.request("sharing/create_shared_link",e,"user","api","rpc","sharing.write")};D.sharingCreateSharedLinkWithSettings=function(e){return this.request("sharing/create_shared_link_with_settings",e,"user","api","rpc","sharing.write")};D.sharingGetFileMetadata=function(e){return this.request("sharing/get_file_metadata",e,"user","api","rpc","sharing.read")};D.sharingGetFileMetadataBatch=function(e){return this.request("sharing/get_file_metadata/batch",e,"user","api","rpc","sharing.read")};D.sharingGetFolderMetadata=function(e){return this.request("sharing/get_folder_metadata",e,"user","api","rpc","sharing.read")};D.sharingGetSharedLinkFile=function(e){return this.request("sharing/get_shared_link_file",e,"user","content","download","sharing.read")};D.sharingGetSharedLinkMetadata=function(e){return this.request("sharing/get_shared_link_metadata",e,"app, user","api","rpc","sharing.read")};D.sharingGetSharedLinks=function(e){return this.request("sharing/get_shared_links",e,"user","api","rpc","sharing.read")};D.sharingListFileMembers=function(e){return this.request("sharing/list_file_members",e,"user","api","rpc","sharing.read")};D.sharingListFileMembersBatch=function(e){return this.request("sharing/list_file_members/batch",e,"user","api","rpc","sharing.read")};D.sharingListFileMembersContinue=function(e){return this.request("sharing/list_file_members/continue",e,"user","api","rpc","sharing.read")};D.sharingListFolderMembers=function(e){return this.request("sharing/list_folder_members",e,"user","api","rpc","sharing.read")};D.sharingListFolderMembersContinue=function(e){return this.request("sharing/list_folder_members/continue",e,"user","api","rpc","sharing.read")};D.sharingListFolders=function(e){return this.request("sharing/list_folders",e,"user","api","rpc","sharing.read")};D.sharingListFoldersContinue=function(e){return this.request("sharing/list_folders/continue",e,"user","api","rpc","sharing.read")};D.sharingListMountableFolders=function(e){return this.request("sharing/list_mountable_folders",e,"user","api","rpc","sharing.read")};D.sharingListMountableFoldersContinue=function(e){return this.request("sharing/list_mountable_folders/continue",e,"user","api","rpc","sharing.read")};D.sharingListReceivedFiles=function(e){return this.request("sharing/list_received_files",e,"user","api","rpc","sharing.read")};D.sharingListReceivedFilesContinue=function(e){return this.request("sharing/list_received_files/continue",e,"user","api","rpc","sharing.read")};D.sharingListSharedLinks=function(e){return this.request("sharing/list_shared_links",e,"user","api","rpc","sharing.read")};D.sharingModifySharedLinkSettings=function(e){return this.request("sharing/modify_shared_link_settings",e,"user","api","rpc","sharing.write")};D.sharingMountFolder=function(e){return this.request("sharing/mount_folder",e,"user","api","rpc","sharing.write")};D.sharingRelinquishFileMembership=function(e){return this.request("sharing/relinquish_file_membership",e,"user","api","rpc","sharing.write")};D.sharingRelinquishFolderMembership=function(e){return this.request("sharing/relinquish_folder_membership",e,"user","api","rpc","sharing.write")};D.sharingRemoveFileMember=function(e){return this.request("sharing/remove_file_member",e,"user","api","rpc","sharing.write")};D.sharingRemoveFileMember2=function(e){return this.request("sharing/remove_file_member_2",e,"user","api","rpc","sharing.write")};D.sharingRemoveFolderMember=function(e){return this.request("sharing/remove_folder_member",e,"user","api","rpc","sharing.write")};D.sharingRevokeSharedLink=function(e){return this.request("sharing/revoke_shared_link",e,"user","api","rpc","sharing.write")};D.sharingSetAccessInheritance=function(e){return this.request("sharing/set_access_inheritance",e,"user","api","rpc","sharing.write")};D.sharingShareFolder=function(e){return this.request("sharing/share_folder",e,"user","api","rpc","sharing.write")};D.sharingTransferFolder=function(e){return this.request("sharing/transfer_folder",e,"user","api","rpc","sharing.write")};D.sharingUnmountFolder=function(e){return this.request("sharing/unmount_folder",e,"user","api","rpc","sharing.write")};D.sharingUnshareFile=function(e){return this.request("sharing/unshare_file",e,"user","api","rpc","sharing.write")};D.sharingUnshareFolder=function(e){return this.request("sharing/unshare_folder",e,"user","api","rpc","sharing.write")};D.sharingUpdateFileMember=function(e){return this.request("sharing/update_file_member",e,"user","api","rpc","sharing.write")};D.sharingUpdateFolderMember=function(e){return this.request("sharing/update_folder_member",e,"user","api","rpc","sharing.write")};D.sharingUpdateFolderPolicy=function(e){return this.request("sharing/update_folder_policy",e,"user","api","rpc","sharing.write")};D.teamDevicesListMemberDevices=function(e){return this.request("team/devices/list_member_devices",e,"team","api","rpc","sessions.list")};D.teamDevicesListMembersDevices=function(e){return this.request("team/devices/list_members_devices",e,"team","api","rpc","sessions.list")};D.teamDevicesListTeamDevices=function(e){return this.request("team/devices/list_team_devices",e,"team","api","rpc","sessions.list")};D.teamDevicesRevokeDeviceSession=function(e){return this.request("team/devices/revoke_device_session",e,"team","api","rpc","sessions.modify")};D.teamDevicesRevokeDeviceSessionBatch=function(e){return this.request("team/devices/revoke_device_session_batch",e,"team","api","rpc","sessions.modify")};D.teamFeaturesGetValues=function(e){return this.request("team/features/get_values",e,"team","api","rpc","team_info.read")};D.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};D.teamGroupsCreate=function(e){return this.request("team/groups/create",e,"team","api","rpc","groups.write")};D.teamGroupsDelete=function(e){return this.request("team/groups/delete",e,"team","api","rpc","groups.write")};D.teamGroupsGetInfo=function(e){return this.request("team/groups/get_info",e,"team","api","rpc","groups.read")};D.teamGroupsJobStatusGet=function(e){return this.request("team/groups/job_status/get",e,"team","api","rpc","groups.write")};D.teamGroupsList=function(e){return this.request("team/groups/list",e,"team","api","rpc","groups.read")};D.teamGroupsListContinue=function(e){return this.request("team/groups/list/continue",e,"team","api","rpc","groups.read")};D.teamGroupsMembersAdd=function(e){return this.request("team/groups/members/add",e,"team","api","rpc","groups.write")};D.teamGroupsMembersList=function(e){return this.request("team/groups/members/list",e,"team","api","rpc","groups.read")};D.teamGroupsMembersListContinue=function(e){return this.request("team/groups/members/list/continue",e,"team","api","rpc","groups.read")};D.teamGroupsMembersRemove=function(e){return this.request("team/groups/members/remove",e,"team","api","rpc","groups.write")};D.teamGroupsMembersSetAccessType=function(e){return this.request("team/groups/members/set_access_type",e,"team","api","rpc","groups.write")};D.teamGroupsUpdate=function(e){return this.request("team/groups/update",e,"team","api","rpc","groups.write")};D.teamLegalHoldsCreatePolicy=function(e){return this.request("team/legal_holds/create_policy",e,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsGetPolicy=function(e){return this.request("team/legal_holds/get_policy",e,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsListHeldRevisions=function(e){return this.request("team/legal_holds/list_held_revisions",e,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsListHeldRevisionsContinue=function(e){return this.request("team/legal_holds/list_held_revisions_continue",e,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsListPolicies=function(e){return this.request("team/legal_holds/list_policies",e,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsReleasePolicy=function(e){return this.request("team/legal_holds/release_policy",e,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsUpdatePolicy=function(e){return this.request("team/legal_holds/update_policy",e,"team","api","rpc","team_data.governance.write")};D.teamLinkedAppsListMemberLinkedApps=function(e){return this.request("team/linked_apps/list_member_linked_apps",e,"team","api","rpc","sessions.list")};D.teamLinkedAppsListMembersLinkedApps=function(e){return this.request("team/linked_apps/list_members_linked_apps",e,"team","api","rpc","sessions.list")};D.teamLinkedAppsListTeamLinkedApps=function(e){return this.request("team/linked_apps/list_team_linked_apps",e,"team","api","rpc","sessions.list")};D.teamLinkedAppsRevokeLinkedApp=function(e){return this.request("team/linked_apps/revoke_linked_app",e,"team","api","rpc","sessions.modify")};D.teamLinkedAppsRevokeLinkedAppBatch=function(e){return this.request("team/linked_apps/revoke_linked_app_batch",e,"team","api","rpc","sessions.modify")};D.teamMemberSpaceLimitsExcludedUsersAdd=function(e){return this.request("team/member_space_limits/excluded_users/add",e,"team","api","rpc","members.write")};D.teamMemberSpaceLimitsExcludedUsersList=function(e){return this.request("team/member_space_limits/excluded_users/list",e,"team","api","rpc","members.read")};D.teamMemberSpaceLimitsExcludedUsersListContinue=function(e){return this.request("team/member_space_limits/excluded_users/list/continue",e,"team","api","rpc","members.read")};D.teamMemberSpaceLimitsExcludedUsersRemove=function(e){return this.request("team/member_space_limits/excluded_users/remove",e,"team","api","rpc","members.write")};D.teamMemberSpaceLimitsGetCustomQuota=function(e){return this.request("team/member_space_limits/get_custom_quota",e,"team","api","rpc","members.read")};D.teamMemberSpaceLimitsRemoveCustomQuota=function(e){return this.request("team/member_space_limits/remove_custom_quota",e,"team","api","rpc","members.write")};D.teamMemberSpaceLimitsSetCustomQuota=function(e){return this.request("team/member_space_limits/set_custom_quota",e,"team","api","rpc","members.read")};D.teamMembersAddV2=function(e){return this.request("team/members/add_v2",e,"team","api","rpc","members.write")};D.teamMembersAdd=function(e){return this.request("team/members/add",e,"team","api","rpc","members.write")};D.teamMembersAddJobStatusGetV2=function(e){return this.request("team/members/add/job_status/get_v2",e,"team","api","rpc","members.write")};D.teamMembersAddJobStatusGet=function(e){return this.request("team/members/add/job_status/get",e,"team","api","rpc","members.write")};D.teamMembersDeleteProfilePhotoV2=function(e){return this.request("team/members/delete_profile_photo_v2",e,"team","api","rpc","members.write")};D.teamMembersDeleteProfilePhoto=function(e){return this.request("team/members/delete_profile_photo",e,"team","api","rpc","members.write")};D.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};D.teamMembersGetInfoV2=function(e){return this.request("team/members/get_info_v2",e,"team","api","rpc","members.read")};D.teamMembersGetInfo=function(e){return this.request("team/members/get_info",e,"team","api","rpc","members.read")};D.teamMembersListV2=function(e){return this.request("team/members/list_v2",e,"team","api","rpc","members.read")};D.teamMembersList=function(e){return this.request("team/members/list",e,"team","api","rpc","members.read")};D.teamMembersListContinueV2=function(e){return this.request("team/members/list/continue_v2",e,"team","api","rpc","members.read")};D.teamMembersListContinue=function(e){return this.request("team/members/list/continue",e,"team","api","rpc","members.read")};D.teamMembersMoveFormerMemberFiles=function(e){return this.request("team/members/move_former_member_files",e,"team","api","rpc","members.write")};D.teamMembersMoveFormerMemberFilesJobStatusCheck=function(e){return this.request("team/members/move_former_member_files/job_status/check",e,"team","api","rpc","members.write")};D.teamMembersRecover=function(e){return this.request("team/members/recover",e,"team","api","rpc","members.delete")};D.teamMembersRemove=function(e){return this.request("team/members/remove",e,"team","api","rpc","members.delete")};D.teamMembersRemoveJobStatusGet=function(e){return this.request("team/members/remove/job_status/get",e,"team","api","rpc","members.delete")};D.teamMembersSecondaryEmailsAdd=function(e){return this.request("team/members/secondary_emails/add",e,"team","api","rpc","members.write")};D.teamMembersSecondaryEmailsDelete=function(e){return this.request("team/members/secondary_emails/delete",e,"team","api","rpc","members.write")};D.teamMembersSecondaryEmailsResendVerificationEmails=function(e){return this.request("team/members/secondary_emails/resend_verification_emails",e,"team","api","rpc","members.write")};D.teamMembersSendWelcomeEmail=function(e){return this.request("team/members/send_welcome_email",e,"team","api","rpc","members.write")};D.teamMembersSetAdminPermissionsV2=function(e){return this.request("team/members/set_admin_permissions_v2",e,"team","api","rpc","members.write")};D.teamMembersSetAdminPermissions=function(e){return this.request("team/members/set_admin_permissions",e,"team","api","rpc","members.write")};D.teamMembersSetProfileV2=function(e){return this.request("team/members/set_profile_v2",e,"team","api","rpc","members.write")};D.teamMembersSetProfile=function(e){return this.request("team/members/set_profile",e,"team","api","rpc","members.write")};D.teamMembersSetProfilePhotoV2=function(e){return this.request("team/members/set_profile_photo_v2",e,"team","api","rpc","members.write")};D.teamMembersSetProfilePhoto=function(e){return this.request("team/members/set_profile_photo",e,"team","api","rpc","members.write")};D.teamMembersSuspend=function(e){return this.request("team/members/suspend",e,"team","api","rpc","members.write")};D.teamMembersUnsuspend=function(e){return this.request("team/members/unsuspend",e,"team","api","rpc","members.write")};D.teamNamespacesList=function(e){return this.request("team/namespaces/list",e,"team","api","rpc","team_data.member")};D.teamNamespacesListContinue=function(e){return this.request("team/namespaces/list/continue",e,"team","api","rpc","team_data.member")};D.teamPropertiesTemplateAdd=function(e){return this.request("team/properties/template/add",e,"team","api","rpc","files.team_metadata.write")};D.teamPropertiesTemplateGet=function(e){return this.request("team/properties/template/get",e,"team","api","rpc","files.team_metadata.write")};D.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};D.teamPropertiesTemplateUpdate=function(e){return this.request("team/properties/template/update",e,"team","api","rpc","files.team_metadata.write")};D.teamReportsGetActivity=function(e){return this.request("team/reports/get_activity",e,"team","api","rpc","team_info.read")};D.teamReportsGetDevices=function(e){return this.request("team/reports/get_devices",e,"team","api","rpc","team_info.read")};D.teamReportsGetMembership=function(e){return this.request("team/reports/get_membership",e,"team","api","rpc","team_info.read")};D.teamReportsGetStorage=function(e){return this.request("team/reports/get_storage",e,"team","api","rpc","team_info.read")};D.teamSharingAllowlistAdd=function(e){return this.request("team/sharing_allowlist/add",e,"team","api","rpc","team_info.write")};D.teamSharingAllowlistList=function(e){return this.request("team/sharing_allowlist/list",e,"team","api","rpc","team_info.read")};D.teamSharingAllowlistListContinue=function(e){return this.request("team/sharing_allowlist/list/continue",e,"team","api","rpc","team_info.read")};D.teamSharingAllowlistRemove=function(e){return this.request("team/sharing_allowlist/remove",e,"team","api","rpc","team_info.write")};D.teamTeamFolderActivate=function(e){return this.request("team/team_folder/activate",e,"team","api","rpc","team_data.content.write")};D.teamTeamFolderArchive=function(e){return this.request("team/team_folder/archive",e,"team","api","rpc","team_data.content.write")};D.teamTeamFolderArchiveCheck=function(e){return this.request("team/team_folder/archive/check",e,"team","api","rpc","team_data.content.write")};D.teamTeamFolderCreate=function(e){return this.request("team/team_folder/create",e,"team","api","rpc","team_data.content.write")};D.teamTeamFolderGetInfo=function(e){return this.request("team/team_folder/get_info",e,"team","api","rpc","team_data.content.read")};D.teamTeamFolderList=function(e){return this.request("team/team_folder/list",e,"team","api","rpc","team_data.content.read")};D.teamTeamFolderListContinue=function(e){return this.request("team/team_folder/list/continue",e,"team","api","rpc","team_data.content.read")};D.teamTeamFolderPermanentlyDelete=function(e){return this.request("team/team_folder/permanently_delete",e,"team","api","rpc","team_data.content.write")};D.teamTeamFolderRename=function(e){return this.request("team/team_folder/rename",e,"team","api","rpc","team_data.content.write")};D.teamTeamFolderUpdateSyncSettings=function(e){return this.request("team/team_folder/update_sync_settings",e,"team","api","rpc","team_data.content.write")};D.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};D.teamLogGetEvents=function(e){return this.request("team_log/get_events",e,"team","api","rpc","events.read")};D.teamLogGetEventsContinue=function(e){return this.request("team_log/get_events/continue",e,"team","api","rpc","events.read")};D.usersFeaturesGetValues=function(e){return this.request("users/features/get_values",e,"user","api","rpc","account_info.read")};D.usersGetAccount=function(e){return this.request("users/get_account",e,"user","api","rpc","sharing.read")};D.usersGetAccountBatch=function(e){return this.request("users/get_account_batch",e,"user","api","rpc","sharing.read")};D.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};D.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function AF(e){var t="000".concat(e.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(t)}var uf=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tu,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r?(n!==tu&&Hh[t]!==void 0&&(t=Hh[t],r="-"),"https://".concat(t).concat(r).concat(n,"/2/")):"https://".concat(n,"/2/")},PF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mw;return t!==mw&&(t="meta-".concat(t)),"https://".concat(t,"/oauth2/authorize")},gw=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tu,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r="api";return t!==tu&&(r=Hh[r],n="-"),"https://".concat(r).concat(n).concat(t,"/oauth2/token")};function yw(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,AF)}function kF(e){return new Date(Date.now()+e*1e3)}function vw(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof AP>"u"||typeof window<"u"}function df(){return typeof window<"u"}function ff(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function Wl(e){var t=e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return t}function gc(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gc=function(n){return typeof n}:gc=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gc(e)}function MF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}function IF(e){var t=DC();return function(){var r=Ua(e),o;if(t){var s=Ua(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return _F(this,o)}}function _F(e,t){return t&&(gc(t)==="object"||typeof t=="function")?t:NF(e)}function NF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gh(e){var t=typeof Map=="function"?new Map:void 0;return Gh=function(r){if(r===null||!LF(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,o)}function o(){return yc(r,arguments,Ua(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),$a(o,r)},Gh(e)}function yc(e,t,n){return DC()?yc=Reflect.construct:yc=function(o,s,i){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(o,a),c=new l;return i&&$a(c,i.prototype),c},yc.apply(null,arguments)}function DC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function LF(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function $a(e,t){return $a=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},$a(e,t)}function Ua(e){return Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ua(e)}var FF=function(e){RF(n,e);var t=IF(n);function n(r,o,s){var i;return MF(this,n),i=t.call(this,"Response failed with a ".concat(r," code")),i.name="DropboxResponseError",i.status=r,i.headers=o,i.error=s,i}return n}(Gh(Error));function OF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var AC=function e(t,n,r){OF(this,e),this.status=t,this.headers=n,this.result=r};function PC(e){return e.text().then(function(t){var n;try{n=JSON.parse(t)}catch{n=t}throw new FF(e.status,e.headers,n)})}function nu(e){return e.ok?e.text().then(function(t){var n;try{n=JSON.parse(t)}catch{n=t}return new AC(e.status,e.headers,n)}):PC(e)}function jF(e){return e.ok?new Promise(function(t){vw()?e.blob().then(function(n){return t(n)}):e.buffer().then(function(n){return t(n)})}).then(function(t){var n=JSON.parse(e.headers.get("dropbox-api-result"));return vw()?n.fileBlob=t:n.fileBinary=t,new AC(e.status,e.headers,n)}):PC(e)}function $F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VF(e,t,n){return t&&UF(e.prototype,t),e}var Hl,No,hf,BF=300*1e3,ww=128,zF=["legacy","offline","online"],qF=["code","token"],WF=["none","user","team"],kC=function(){function e(t){$F(this,e),t=t||{},df()?(Hl=window.fetch.bind(window),No=window.crypto||window.msCrypto):ff()?(Hl=self.fetch.bind(self),No=self.crypto):(Hl=require("node-fetch"),No=require("crypto")),typeof TextEncoder>"u"?hf=require("util").TextEncoder:hf=TextEncoder,this.fetch=t.fetch||Hl,this.accessToken=t.accessToken,this.accessTokenExpiresAt=t.accessTokenExpiresAt,this.refreshToken=t.refreshToken,this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.domain=t.domain,this.domainDelimiter=t.domainDelimiter,this.customHeaders=t.customHeaders,this.dataOnBody=t.dataOnBody}return VF(e,[{key:"setAccessToken",value:function(n){this.accessToken=n}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(n){this.clientId=n}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(n){this.clientSecret=n}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(n){this.refreshToken=n}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(n){this.accessTokenExpiresAt=n}},{key:"setCodeVerifier",value:function(n){this.codeVerifier=n}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var n=this,r=new hf,o=r.encode(this.codeVerifier),s;if(df()||ff())return No.subtle.digest("SHA-256",o).then(function(a){var l=btoa(String.fromCharCode.apply(null,new Uint8Array(a)));s=Wl(l).substr(0,128),n.codeChallenge=s});var i=No.createHash("sha256").update(o).digest();return s=Wl(i),this.codeChallenge=s,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var n;if(df()||ff()){var r=new Uint8Array(ww),o=No.getRandomValues(r),s=btoa(o);n=Wl(s).substr(0,128)}else{var i=No.randomBytes(ww);n=Wl(i).substr(0,128)}return this.codeVerifier=n,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(n,r){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,d=this.getClientId(),u=PF(this.domain);if(!d)throw new Error("A client id is required. You can set the client id using .setClientId().");if(s!=="code"&&!n)throw new Error("A redirect uri is required.");if(!qF.includes(s))throw new Error("Authorization type must be code or token");if(i&&!zF.includes(i))throw new Error("Token Access Type must be legacy, offline, or online");if(a&&!(a instanceof Array))throw new Error("Scope must be an array of strings");if(!WF.includes(l))throw new Error("includeGrantedScopes must be none, user, or team");var h;return s==="code"?h="".concat(u,"?response_type=code&client_id=").concat(d):h="".concat(u,"?response_type=token&client_id=").concat(d),n&&(h+="&redirect_uri=".concat(n)),r&&(h+="&state=".concat(r)),i&&(h+="&token_access_type=".concat(i)),a&&(h+="&scope=".concat(a.join(" "))),l!=="none"&&(h+="&include_granted_scopes=".concat(l)),c?this.generatePKCECodes().then(function(){return h+="&code_challenge_method=S256",h+="&code_challenge=".concat(o.codeChallenge),h}):Promise.resolve(h)}},{key:"getAccessTokenFromCode",value:function(n,r){var o=this.getClientId(),s=this.getClientSecret();if(!o)throw new Error("A client id is required. You can set the client id using .setClientId().");var i=gw(this.domain,this.domainDelimiter);if(i+="?grant_type=authorization_code",i+="&code=".concat(r),i+="&client_id=".concat(o),s)i+="&client_secret=".concat(s);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");i+="&code_verifier=".concat(this.codeVerifier)}n&&(i+="&redirect_uri=".concat(n));var a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(i,a).then(function(l){return nu(l)})}},{key:"checkAndRefreshAccessToken",value:function(){var n=this.getRefreshToken()&&this.getClientId(),r=!this.getAccessTokenExpiresAt()||new Date(Date.now()+BF)>=this.getAccessTokenExpiresAt(),o=!this.getAccessToken();return(r||o)&&n?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=this.getClientId(),s=this.getClientSecret();if(!o)throw new Error("A client id is required. You can set the client id using .setClientId().");if(r&&!(r instanceof Array))throw new Error("Scope must be an array of strings");var i=gw(this.domain,this.domainDelimiter),a={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var l={grant_type:"refresh_token",client_id:o,refresh_token:this.getRefreshToken()};s&&(l.client_secret=s),r&&(l.scope=r.join(" ")),a.body=l}else i+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),i+="&client_id=".concat(o),s&&(i+="&client_secret=".concat(s)),r&&(i+="&scope=".concat(r.join(" ")));return this.fetch(i,a).then(function(c){return nu(c)}).then(function(c){n.setAccessToken(c.result.access_token),n.setAccessTokenExpiresAt(kF(c.result.expires_in))})}}]),e}();function HF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KF(e,t,n){return t&&GF(e.prototype,t),e}var YF=typeof btoa>"u"?function(e){return Buffer.from(e).toString("base64")}:btoa,xw=function(){function e(t){HF(this,e),t=t||{},t.auth?this.auth=t.auth:this.auth=new kC(t),this.fetch=t.fetch||this.auth.fetch,this.selectUser=t.selectUser,this.selectAdmin=t.selectAdmin,this.pathRoot=t.pathRoot,this.domain=t.domain||this.auth.domain,this.domainDelimiter=t.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=t.customHeaders||this.auth.customHeaders,Object.assign(this,D)}return KF(e,[{key:"request",value:function(n,r,o,s,i){switch(i){case bF:return this.rpcRequest(n,r,o,s);case CF:return this.downloadRequest(n,r,o,s);case EF:return this.uploadRequest(n,r,o,s);default:throw new Error("Invalid request style: ".concat(i))}}},{key:"rpcRequest",value:function(n,r,o,s){var i=this;return this.auth.checkAndRefreshAccessToken().then(function(){var a={method:"POST",body:r?JSON.stringify(r):null,headers:{}};return r&&(a.headers["Content-Type"]="application/json"),i.setAuthHeaders(o,a),i.setCommonHeaders(a),a}).then(function(a){return i.fetch(uf(s,i.domain,i.domainDelimiter)+n,a)}).then(function(a){return nu(a)})}},{key:"downloadRequest",value:function(n,r,o,s){var i=this;return this.auth.checkAndRefreshAccessToken().then(function(){var a={method:"POST",headers:{"Dropbox-API-Arg":yw(r)}};return i.setAuthHeaders(o,a),i.setCommonHeaders(a),a}).then(function(a){return i.fetch(uf(s,i.domain,i.domainDelimiter)+n,a)}).then(function(a){return jF(a)})}},{key:"uploadRequest",value:function(n,r,o,s){var i=this;return this.auth.checkAndRefreshAccessToken().then(function(){var a=r.contents;delete r.contents;var l={body:a,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":yw(r)}};return i.setAuthHeaders(o,l),i.setCommonHeaders(l),l}).then(function(a){return i.fetch(uf(s,i.domain,i.domainDelimiter)+n,a)}).then(function(a){return nu(a)})}},{key:"setAuthHeaders",value:function(n,r){if(n.split(",").length>1){var o=n.replace(" ","").split(",");o.includes(lf)&&this.auth.getAccessToken()?n=lf:o.includes(cf)&&this.auth.getAccessToken()?n=cf:o.includes(af)&&(n=af)}switch(n){case af:if(this.auth.clientId&&this.auth.clientSecret){var s=YF("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));r.headers.Authorization="Basic ".concat(s)}break;case cf:case lf:this.auth.getAccessToken()&&(r.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case TF:case DF:break;default:throw new Error("Unhandled auth type: ".concat(n))}}},{key:"setCommonHeaders",value:function(n){var r=this;if(this.selectUser&&(n.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(n.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(n.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var o=Object.keys(this.customHeaders);o.forEach(function(s){n.headers[s]=r.customHeaders[s]})}}}]),e}();function QF(e){return e&&typeof e=="object"&&typeof e.status=="number"&&(e.status===401||e.status===400)&&typeof e.error=="object"}function XF(){const[e,t]=f.useState(null),[n,r]=f.useState(!1),[o,s]=f.useState(!0),[i,a]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(null),h=f.useCallback(()=>{m.log("Initiating Dropbox auth redirect."),c(null),s(!0);try{const b=new kC({clientId:VL}),g=window.location.origin+window.location.pathname;b.getAuthenticationUrl(g,void 0,"token").then(v=>{m.log("Generated auth URL, redirecting..."),window.location.href=String(v)}).catch(v=>{m.error("Dropbox auth URL generation failed:",v),c(new Error("Could not initiate Dropbox connection.")),s(!1)})}catch(b){m.error("Dropbox auth initialization failed:",b),c(new Error("Could not initialize Dropbox connection.")),s(!1)}},[]);f.useCallback(()=>{m.warn("Clearing stored token and redirecting to auth..."),localStorage.removeItem("dropboxToken"),r(!1),t(null),u(null),c(null),h()},[h]);const w=f.useCallback((b,g=!1)=>{m.log(`[useDropboxAuth initializeAndVerify] Verifying token... (Reverify attempt: ${g})`),!n&&!g?(m.log("[useDropboxAuth initializeAndVerify] Setting isLoadingAuth = true (initial attempt)."),s(!0)):g&&(m.log("[useDropboxAuth initializeAndVerify] Skipping isLoadingAuth = true (background re-verify)."),a(!0)),c(null);const v=new xw({accessToken:b});let S=!0;return v.usersGetCurrentAccount().then(E=>{if(!S)return;const C=E.result;t(v),r(!0),u(C),c(null),m.log("[useDropboxAuth initializeAndVerify] Token verified. User:",C.name.display_name)}).catch(E=>{if(S)if(m.error("[useDropboxAuth initializeAndVerify] Token verification failed:",E),r(!1),t(null),u(null),QF(E))m.warn("[useDropboxAuth initializeAndVerify] Authentication error detected. Clearing token."),localStorage.removeItem("dropboxToken"),c(new Error("Dropbox session invalid. Please log in again."));else{m.warn("[useDropboxAuth initializeAndVerify] Non-authentication error during verification. Token kept.");const C=E instanceof Error?E.message:String(E);c(new Error(`Failed to verify Dropbox connection: ${C}`))}}).finally(()=>{S&&(m.log("[useDropboxAuth initializeAndVerify] Setting loading states false (finally)."),s(!1),g&&a(!1))}),()=>{S=!1}},[n]);f.useEffect(()=>{m.log("[useDropboxAuth useEffect] Running effect.");let b,v=new URLSearchParams(window.location.hash.substring(1)).get("access_token");const S=localStorage.getItem("dropboxToken");let E=null;return v?(m.log("[useDropboxAuth useEffect] Found access token in URL hash."),localStorage.setItem("dropboxToken",v),E=v,m.log("[useDropboxAuth useEffect] Clearing access token from URL hash."),window.history.replaceState({},document.title,window.location.pathname+window.location.search)):S&&(m.log("[useDropboxAuth useEffect] Found stored access token in localStorage."),E=S),E?b=w(E,!1):(m.log("[useDropboxAuth useEffect] No access token found."),r(!1),t(null),u(null),c(null),s(!1)),()=>{b==null||b(),m.log("[useDropboxAuth useEffect] Cleanup.")}},[w]);const y=f.useCallback(()=>{m.log("[useDropboxAuth tryVerifyStoredToken] Attempting explicit re-verification...");const b=localStorage.getItem("dropboxToken");b&&!n&&!o&&!i?w(b,!0):m.log("[useDropboxAuth tryVerifyStoredToken] Skipped. Conditions not met:",{storedToken:!!b,isAuthenticated:n,isLoadingAuth:o,isVerifyingInBackground:i})},[n,o,i,w]);return{dbx:e,isAuthenticated:n,isLoadingAuth:o,isVerifyingInBackground:i,authError:l,userInfo:d,handleDropboxAuthRedirect:h,logout:()=>{m.log("Logging out.");const b=localStorage.getItem("dropboxToken");localStorage.removeItem("dropboxToken"),r(!1),t(null),u(null),c(null),s(!1),a(!1),b&&new xw({accessToken:b}).authTokenRevoke().then(()=>m.log("Dropbox token revoked successfully.")).catch(v=>m.error("Failed to revoke Dropbox token:",v))},tryVerifyStoredToken:y}}function ZF(e,t){const[n,r]=f.useState(e),[o,s]=f.useState(t),[i,a]=f.useState(0),[l,c]=f.useState(!1),d=f.useCallback((g,v)=>{const S=new Date(v,g-1),E=new Date(o,n-1);S>E?a(1):S<E?a(-1):a(0),r(g),s(v)},[n,o]),u=f.useCallback(()=>{let g=n,v=o;g===1?(v--,g=12):g--,d(g,v)},[n,o,d]),h=f.useCallback(()=>{let g=n,v=o;g===12?(v++,g=1):g++,d(g,v)},[n,o,d]),w=f.useCallback((g,v)=>{d(g,v),c(!1)},[d]),y=f.useCallback(g=>{g>0?h():g<0&&u()},[h,u]),x=f.useCallback(()=>c(!0),[]),b=f.useCallback(()=>c(!1),[]);return{currentMonth:n,currentYear:o,swipeDirection:i,isMonthYearPickerOpen:l,goToPreviousMonth:u,goToNextMonth:h,handleMonthYearSelect:w,handleCalendarSwipe:y,openMonthYearPicker:x,closeMonthYearPicker:b,setSwipeDirection:a}}function JF(){const[e,t]=f.useState(!1),[n,r]=f.useState([]),[o,s]=f.useState(new Date),[i,a]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback((y,x)=>{s(y),r(x),a(!1),t(!0)},[]),u=f.useCallback(y=>{c(y),a(!0)},[]),h=f.useCallback(()=>{t(!1),r([])},[]),w=f.useCallback(()=>{a(!1),c(null)},[]);return{isViewEntryModalOpen:e,selectedBasicEntriesForModal:n,entryDateForModal:o,openViewEntriesModal:d,closeViewModal:h,isDeleteDialogOpen:i,entryToDeleteId:l,openDeleteConfirmation:u,closeDeleteDialog:w}}const pf=()=>window.location.hash.replace(/^#/,"").split(/[?&]/)[0]||"/",Kh=()=>{const[e,t]=f.useState(pf());f.useEffect(()=>{const r=()=>{const o=pf();o!==e&&t(o)};return window.addEventListener("hashchange",r),()=>{window.removeEventListener("hashchange",r)}},[e]);const n=f.useCallback((r,{replace:o=!1}={})=>{const i=`#${r.startsWith("/")?r:`/${r}`}`,a=window.location.hash||"#/";i!==a&&(o?window.location.replace(i):window.location.hash=i)},[]);return f.useEffect(()=>{let r=window.location.hash;const o=setInterval(()=>{const s=window.location.hash;if(s!==r){const i=pf();i!==e&&t(i),r=s}},250);return()=>{clearInterval(o)}},[e]),[e,n]},Yh=()=>Ls.getInstance();class Ls{constructor(){this.listeners=new Map,this.swController=null,this.messageQueue=[],this.isListenerAttached=!1,this.handleControllerChange=()=>{m.log("[SWHandler] Service Worker controller changed."),this.swController=navigator.serviceWorker.controller,this.attachMessageListener()},this.handleIncomingMessage=t=>{const n=t.data;if(!n||!n.type){m.warn("[SWHandler] Received SW message with no data or type",t.data);return}this.dispatchMessage(n)},m.log("[SWHandler] Initializing ServiceWorkerMessageHandler..."),this.readyPromise=this.initializeServiceWorker()}static getInstance(){return Ls.instance||(Ls.instance=new Ls),Ls.instance}async initializeServiceWorker(){if(typeof window>"u"||!("serviceWorker"in navigator)){m.warn("[SWHandler] Service Worker API not supported in this environment.");return}try{const t=await navigator.serviceWorker.ready;return m.log("[SWHandler] Service Worker is ready."),this.swController=t.active||navigator.serviceWorker.controller,this.attachMessageListener(),navigator.serviceWorker.addEventListener("controllerchange",this.handleControllerChange),this.messageQueue.forEach(n=>this.dispatchMessage(n)),this.messageQueue=[],t}catch(t){m.error("[SWHandler] Service Worker registration failed:",t);return}}attachMessageListener(){!this.isListenerAttached&&navigator.serviceWorker&&(navigator.serviceWorker.addEventListener("message",this.handleIncomingMessage),this.isListenerAttached=!0,m.log("[SWHandler] Global message listener attached to navigator.serviceWorker."))}dispatchMessage(t){m.log(`[SWHandler] Dispatching message of type: ${t.type}`,t);const n=this.listeners.get(t.type);n?n.forEach(r=>{try{r(t)}catch(o){m.error(`[SWHandler] Error in callback for message type ${t.type}:`,o)}}):m.log(`[SWHandler] No listeners registered for message type: ${t.type}`)}registerListener(t,n){return this.readyPromise.then(r=>{r?(this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n),m.log(`[SWHandler] Listener registered for type: ${t}`)):(m.warn(`[SWHandler] SW not ready, listener for ${t} not actively registered yet, but queued.`),this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n))}).catch(r=>{m.error(`[SWHandler] Error during SW readiness check for listener registration (${t}):`,r)}),()=>{this.unregisterListener(t,n)}}unregisterListener(t,n){const r=this.listeners.get(t);r&&(r.delete(n),m.log(`[SWHandler] Listener unregistered for type: ${t}`),r.size===0&&(this.listeners.delete(t),m.log(`[SWHandler] All listeners for type ${t} removed.`)))}async sendMessageToSW(t){if(await this.readyPromise,this.swController)try{m.log("[SWHandler] Sending message to SW:",t),this.swController.postMessage(t)}catch(n){throw m.error("[SWHandler] Error sending message to SW:",n),n}else throw m.error("[SWHandler] Service Worker controller not available. Cannot send message:",t),new Error("Service Worker controller not available to send message.")}async getController(){return await this.readyPromise,this.swController}cleanup(){this.isListenerAttached&&navigator.serviceWorker&&(navigator.serviceWorker.removeEventListener("message",this.handleIncomingMessage),navigator.serviceWorker.removeEventListener("controllerchange",this.handleControllerChange),this.isListenerAttached=!1,m.log("[SWHandler] Global message listener removed.")),this.listeners.clear()}}const MC=f.createContext(void 0),eO=({children:e})=>{const{toast:t}=sl(),[,n]=Kh(),r=f.useRef(!0),o=XF(),s=ZF(new Date().getMonth()+1,new Date().getFullYear()),i=JF(),[a,l]=f.useState(null),[c,d]=f.useState(!1),[u,h]=f.useState(navigator.onLine),w=f.useRef(u),[y,x]=f.useState([]),[b,g]=f.useState(!1),[v,S]=f.useState([]),[E,C]=f.useState(!1),[T,A]=f.useState(null),[P,M]=f.useState(null),[I,O]=f.useState(null),[N,U]=f.useState(!1),[j,q]=f.useState("calendar"),[_,L]=f.useState(null),[k,R]=f.useState(null),F=lo.getInstance(),[W,J]=f.useState(!1),[be,se]=f.useState(0),[Ye,te]=f.useState(null);f.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),f.useEffect(()=>{if(!c||!a)return;m.log("[AppContext] Setting up periodic storage check and pruning"),nf().catch(Y=>{m.error("[AppContext] Periodic storage check/prune error:",Y)});const G=setInterval(()=>{r.current&&(m.log("[AppContext] Running periodic storage check and pruning"),nf().catch(Y=>{m.error("[AppContext] Periodic storage check/prune error:",Y)}))},5*60*1e3);return()=>{clearInterval(G)}},[c,a]),f.useEffect(()=>{const G=()=>r.current&&h(!0),Y=()=>r.current&&h(!1);return window.addEventListener("online",G),window.addEventListener("offline",Y),m.log(`[AppContext] Initial network status: ${navigator.onLine?"ONLINE":"OFFLINE"}`),w.current=navigator.onLine,()=>{window.removeEventListener("online",G),window.removeEventListener("offline",Y),F.revokeAllUrls()}},[F]),f.useEffect(()=>{!w.current&&u&&(m.log("[AppContext] Detected transition from offline to online."),!o.isAuthenticated&&!o.isLoadingAuth&&!o.isVerifyingInBackground?(m.log("[AppContext] Not authenticated and not loading/verifying, attempting token re-verification..."),o.tryVerifyStoredToken()):m.log("[AppContext] Skipping token re-verification.",{isAuthenticated:o.isAuthenticated,isLoadingAuth:o.isLoadingAuth,isVerifyingInBackground:o.isVerifyingInBackground})),w.current=u},[u,o.isAuthenticated,o.isLoadingAuth,o.tryVerifyStoredToken,o.isVerifyingInBackground]),f.useEffect(()=>{const G=Y=>{const Q=Y;Q.message&&Q.message.includes("QuotaExceededError")&&(m.error("[AppContext] Storage quota exceeded. Attempting to free up space..."),eu(20).catch(De=>{m.error("[AppContext] Failed to prune cache:",De)})),Q.message&&Q.message.includes("IndexedDB")&&(m.error("[AppContext] IndexedDB error detected:",Q.message),t({title:"Database Error",description:"There was a problem with the app database. Please reload the page.",variant:"destructive"}))};return window.addEventListener("error",G),()=>{window.removeEventListener("error",G)}},[t]),f.useEffect(()=>{d(!1),o.isLoadingAuth?(m.log("[AppContext] Auth still loading, client not initialized yet."),l(null),d(!1)):(m.log("[AppContext] Auth loading finished. Initializing PhotoClient..."),(async()=>{try{const Y=new SF(o.dbx);Y.on(zo.ENTRIES_UPDATED,Q=>{m.log(`[AppContext] Entries updated event received for ${Q.year}-${Q.month}`),Q.year===s.currentYear&&Q.month===s.currentMonth&&(m.log("[AppContext] Updated entries are for current month, refreshing UI"),x(Q.entries))}),Y.on(zo.METADATA_UPDATED,Q=>{m.log("[AppContext] Metadata updated event received"),S(Q.metadata)}),l(Y),d(!0),m.log("[AppContext] PhotoClient initialized with event listeners."),u&&o.isAuthenticated&&(m.log("[AppContext] Triggering background deletion sync with Dropbox..."),Y.syncDeletionsFromDropbox().catch(Q=>{m.error("[AppContext] Background deletion sync failed:",Q)})),await oF(),C(!0),O(null);try{const Q=await Y.fetchImagesMetadata(u);r.current&&S(Q),m.log(`[AppContext] Initial metadata fetch/load success. Count: ${Q.length}`)}catch(Q){m.error("[AppContext] Err fetch/load initial metadata:",Q),r.current&&O(Q instanceof Error?Q:new Error("Failed metadata load"))}finally{r.current&&C(!1)}nf().catch(Q=>{m.error("[AppContext] Initial storage check/prune error:",Q)})}catch(Y){m.error("[AppContext] Failed to initialize PhotoJournalClient:",Y),l(null),d(!1),t({title:"Client Error",description:"Failed to initialize the application. Please try again.",variant:"destructive"})}})())},[o.isLoadingAuth,o.dbx,u]),f.useEffect(()=>{if(c&&a){g(!0),A(null);const G=s.currentYear,Y=s.currentMonth;m.log(`[AppContext] Fetching entries effect triggered for ${G}-${Y+1}. Online: ${u}`),a.fetchEntriesForMonth(G,Y,u).then(Q=>{m.log(`[AppContext] Fetched/Loaded ${Q.length} entries for ${G}-${Y+1}`),r.current&&(x(Q),u&&o.isAuthenticated&&a.triggerPrefetch(G,Y,u))}).catch(Q=>{m.error(`[AppContext] Err fetch/load entries for ${G}-${Y+1}:`,Q),r.current&&A(Q instanceof Error?Q:new Error("Failed entries load"))}).finally(()=>{m.log(`[AppContext] Finished fetching/loading entries for ${G}-${Y+1}. isLoadingEntries: false`),r.current&&g(!1)})}else x([]),g(!1),A(null),m.log("[AppContext] Client not ready, skipping entry fetch.")},[c,a,s.currentYear,s.currentMonth,u,o.isAuthenticated]),f.useCallback(()=>{F.revokeAllUrls(),o.logout(),R(null),x([]),S([]),l(null),d(!1)},[o,F]),f.useEffect(()=>{M(null)},[o.isAuthenticated,o.dbx,s.currentYear,s.currentMonth]),f.useEffect(()=>{o.authError&&t({title:"Auth Error",description:o.authError.message,variant:"destructive"})},[o.authError,t]),f.useEffect(()=>{I&&t({title:"Metadata Error",description:I.message,variant:"destructive"})},[I,t]),f.useEffect(()=>{T&&t({title:"Entries Error",description:T.message,variant:"destructive"})},[T,t]),f.useEffect(()=>{P&&t({title:"Operation Error",description:P.message,variant:"destructive"})},[P,t]),f.useEffect(()=>{const G=window.location.hash,Y=G.match(/shareKey=([\w-]+)/);if(Y&&Y[1]){const Q=Y[1];m.log(`[App Context] Share detected via hash, setting shareKeyForForm: ${Q}`),L(Q),n("/entry",{replace:!0})}else G.includes("/phojo/")&&(m.log(`[App Context] Detected incorrect hash path: ${G}, redirecting to root`),n("/",{replace:!0}))},[n]);const ge=f.useCallback(()=>{m.log("[AppContext] Clearing shareKeyForForm"),L(null)},[]),ie=Yh();f.useEffect(()=>{},[t,n,_,ge]);const ke=f.useCallback(G=>{const Y={type:"DELETE_STORED_FILES",key:G};m.log(`[App Context] Requesting SW to delete stored files with key: ${G}`),ie.sendMessageToSW(Y).catch(Q=>{m.warn(`[App Context] Failed to send DELETE_STORED_FILES message to SW for key ${G}:`,Q)})},[]),qe=f.useCallback(async(G,Y)=>{if(!c||!a||!G)return null;try{return await a.getPhotoBlobUrl(G,Y,u)}catch(Q){return m.error(`getPhotoBlobUrl Error for hash ${G} (ID ${Y}):`,Q),null}},[a,c,u]),Ce=f.useCallback(async(G,Y)=>{if(!c||!a||!G)return null;try{return await a.getPhotoThumbnailUrl(G,Y,u)}catch(Q){return m.error(`getPhotoThumbnailUrl Error for hash ${G} (ID ${Y}):`,Q),null}},[a,c,u]),oe=f.useCallback(async G=>{if(!c||!a)throw new Error("Client not ready");let Y=[];try{Y=await a.fetchImagesMetadata(u),r.current&&v.length===0&&Y.length>0&&S(Y)}catch(Ee){m.error("getCombinedEntryDetails: Failed to fetch/refresh metadata:",Ee),Y=v}const Q=(G.photos||[]).map(async Ee=>{let Ue=null,Ve=null;const $=Y.find(ce=>ce.id===Ee.photoId),z=($==null?void 0:$.photoMetadata)??null,B=($==null?void 0:$.photoFilename)??null,H=z==null?void 0:z.contentHash;if(!H)m.warn(`Metadata or contentHash missing for photoId: ${Ee.photoId}`);else{const[ce,ye]=await Promise.all([qe(H,Ee.photoId),Ce(H,Ee.photoId)]);Ue=ce,Ve=ye}return{...Ee,photoUrl:Ue,thumbnailUrl:Ve,photoMetadata:z,photoFilename:B}}),De=await Promise.all(Q);return{...G,photos:De}},[a,c,v,u,qe]),xe=f.useCallback(async()=>{if(j!=="calendar"||!r.current||!c||!a)return;let G=0;const Y=3;let Q=document.querySelectorAll(".day-with-image");for(;Q.length===0&&G<Y;){m.log(`[loadDayBackgrounds] No day elements found, retrying (${G+1}/${Y})...`);const B=200*Math.pow(2,G);await new Promise(H=>setTimeout(H,B)),Q=document.querySelectorAll(".day-with-image"),G++}if(y.length===0||Q.length===0){m.warn("[loadDayBackgrounds] No entries or day elements after retries, aborting.");return}const De=new Map;y.forEach(B=>{if(B.photos&&B.photos.length>0){const H=De.get(B.date),ce=B.createdAt instanceof Date?B.createdAt:new Date(B.createdAt),ye=(H==null?void 0:H.createdAt)instanceof Date?H.createdAt:new Date(0);(!H||ce.getTime()>ye.getTime())&&De.set(B.date,B)}});let Ee=[];try{Ee=await a.fetchImagesMetadata(u),r.current&&v.length===0&&Ee.length>0&&S(Ee)}catch(B){m.error("[loadDayBackgrounds] Failed fetch/load metadata:",B),Ee=v}const Ue=(B,H,ce)=>{var Qe;if(!r.current)return;const ye=H.crop,fe=ce==null?void 0:ce.width,Re=ce==null?void 0:ce.height,Be=(Qe=B.parentElement)==null?void 0:Qe.getBoundingClientRect(),Ze=(Be==null?void 0:Be.width)??0;if(ye&&fe&&Re&&fe>0&&Re>0&&ye.w>0&&Ze>0){const He=Ze/ye.w,Dt=fe*He,Xt=Re*He,Ut=-ye.x*He,bt=-ye.y*He;Object.assign(B.style,{width:`${Dt}px`,height:`${Xt}px`,transform:`translate(${Ut}px, ${bt}px)`,objectFit:"initial",objectPosition:"initial",opacity:""})}else Object.assign(B.style,{width:"100%",height:"100%",transform:"",objectFit:"cover",objectPosition:"center center",opacity:""});requestAnimationFrame(()=>{r.current&&B.classList.add("img-loaded")})},Ve=B=>{B.src&&B.src.startsWith("blob:")&&F.revokeUrl(B.getAttribute("data-content-hash")??""),B.removeAttribute("src"),Object.assign(B.style,{width:"",height:"",transform:"",objectPosition:"",opacity:""}),B.classList.remove("img-loaded"),B.removeAttribute("data-photo-id"),B.removeAttribute("data-content-hash")},$=new Set;Q.forEach(B=>{var Be,Ze;const H=B.getAttribute("data-day");if(!H)return;const ye=new Date(Date.UTC(s.currentYear,s.currentMonth-1,parseInt(H))).toISOString().split("T")[0],fe=De.get(ye),Re=(Be=fe==null?void 0:fe.photos)==null?void 0:Be[0];if(Re!=null&&Re.photoId){const Qe=Ee.find(Dt=>Dt.id===Re.photoId),He=(Ze=Qe==null?void 0:Qe.photoMetadata)==null?void 0:Ze.contentHash;He&&$.add(He)}}),document.querySelectorAll(".calendar-day-img.img-loaded").forEach(B=>{const H=B,ce=H.getAttribute("data-content-hash");ce&&!$.has(ce)&&Ve(H)});const z=Array.from(Q).map(async B=>{var Xt,Ut;const H=B.getAttribute("data-day");if(!H)return;const ye=new Date(Date.UTC(s.currentYear,s.currentMonth-1,parseInt(H))).toISOString().split("T")[0],fe=B.querySelector(".calendar-day-img");if(!fe)return;const Re=De.get(ye),Be=(Xt=Re==null?void 0:Re.photos)==null?void 0:Xt[0],Ze=(Be==null?void 0:Be.photoId)??null,Qe=Ze?Ee.find(bt=>bt.id===Ze):null,He=((Ut=Qe==null?void 0:Qe.photoMetadata)==null?void 0:Ut.contentHash)??null,Dt=fe.getAttribute("data-content-hash");if(Dt&&Dt!==He&&Ve(fe),He&&a&&Dt!==He&&Ze&&Be&&(Qe!=null&&Qe.photoMetadata)){fe.setAttribute("data-photo-id",Ze),fe.setAttribute("data-content-hash",He);let bt=null;const st=Be.crop,Ro=Qe.photoMetadata.width||0,br=Qe.photoMetadata.height||0,wl=st.w*st.h/(Ro*br);(wl<.3||st.w<300||st.h<300)&&Ro>0?(m.log(`[loadDayBackgrounds] Using full image for day ${H} (crop ratio: ${wl.toFixed(2)})`),bt=await qe(He,Ze)):bt=await Ce(He,Ze),bt&&r.current&&fe.getAttribute("data-content-hash")===He?(fe.src=bt,Ue(fe,Be,Qe.photoMetadata)):r.current&&fe.getAttribute("data-content-hash")===He&&Ve(fe)}else!He&&Dt&&Ve(fe)});await Promise.all(z)},[a,c,y,s,v,j,u,qe,Ce,F]);f.useEffect(()=>{let G=null;return j==="calendar"&&c&&a?G=setTimeout(()=>{r.current&&(m.log("[AppContext] Triggering loadDayBackgrounds from effect."),xe())},500):document.querySelectorAll(".calendar-day-img").forEach(Y=>{const Q=Y;Q.src&&Q.src.startsWith("blob:")&&F.revokeUrl(Q.getAttribute("data-content-hash")??""),Q.removeAttribute("src"),Object.assign(Q.style,{width:"",height:"",transform:"",objectPosition:"",opacity:""}),Q.classList.remove("img-loaded"),Q.removeAttribute("data-photo-id"),Q.removeAttribute("data-content-hash")}),()=>{G&&clearTimeout(G)}},[xe,j,F,y,v,c,a]);const ae=f.useCallback(G=>{const Q=new Date(Date.UTC(s.currentYear,s.currentMonth-1,G)).toISOString().split("T")[0];return y.filter(De=>De.date===Q)},[y,s.currentMonth,s.currentYear]),_e=f.useCallback(G=>y.find(Y=>Y.id===G),[y]),at=f.useCallback(async G=>{if(m.log(`[AppContext] loadSpecificEntry called for ID: ${G}`),!c||!a)return m.warn("[AppContext] loadSpecificEntry: PhotoClient not ready."),null;const Y=_e(G);if(Y)return Y;m.log(`[AppContext] loadSpecificEntry: Entry ${G} not in current month. Searching...`);try{const Q=await a.listEntryFiles();if(!Q)return m.warn("[AppContext] loadSpecificEntry: Could not list entry files (possibly offline)."),null;for(const De of Q){const Ee=De.match(/^(\d{4})-(\d{2})-entries\.json$/);if(Ee){const Ue=parseInt(Ee[1],10),Ve=parseInt(Ee[2],10)-1;if(Ue===s.currentYear&&Ve===s.currentMonth)continue;const z=(await a.fetchEntriesForMonth(Ue,Ve,u)).find(B=>B.id===G);if(z)return m.log(`[AppContext] loadSpecificEntry: Entry ${G} found in ${Ue}-${Ve+1}`),z}}}catch(Q){m.error("[AppContext] loadSpecificEntry: Error searching other months:",Q)}return m.warn(`[AppContext] loadSpecificEntry: Entry ${G} not found in any month.`),null},[a,c,_e,s.currentYear,s.currentMonth,u]),yt=f.useCallback(async G=>{if(m.log(`[AppContext handleDayClick] START - Day: ${G}, isClientReady: ${c}, isOnline: ${u}`),!c||!a){m.log("[AppContext handleDayClick] EXIT - Client not ready");return}const Y=ae(G),Q=new Date(Date.UTC(s.currentYear,s.currentMonth-1,G));if(m.log(`[AppContext handleDayClick] Day: ${G}, Entries found: ${Y.length}`),Y.length>0)m.log("[AppContext handleDayClick] Opening view modal."),i.openViewEntriesModal(Q,Y);else{const De=Q.toISOString().split("T")[0];m.log("[AppContext handleDayClick] Navigating to /entry/new for date:",De),n(`/entry/new?date=${De}`)}},[a,c,s.currentMonth,s.currentYear,ae,i.openViewEntriesModal,n,u,t]),Nt=f.useCallback(G=>{n(`/entry/edit/${G}`)},[n]),lt=f.useCallback(G=>{i.openDeleteConfirmation(G)},[i.openDeleteConfirmation]),vt=f.useCallback(async(G,Y)=>{if(G.content=G.content.trim(),!c||!a)return M(new Error("Client not ready.")),!1;const Q=!o.isAuthenticated||!u;Q&&u&&m.log("[AppContext] User is online but not authenticated. Treating as offline mode."),U(!0),M(null),A(null);try{const De=G.date.getUTCFullYear(),Ee=G.date.getUTCMonth()+1;let Ue=null,Ve=null;if(Y){const H=new Date(Y.date+"T00:00:00Z");Ue=H.getUTCFullYear(),Ve=H.getUTCMonth()+1}m.log(`[AppContext] Saving entry using offline-first approach. Online: ${u}, Effectively Offline: ${Q}`),await a.saveEntry(G,Y,!Q),Q&&t({title:u?"Saved Locally":"Saved Offline",description:u?"Entry saved locally and will sync when you log in.":"Entry saved locally and will sync when online.",variant:"default"});let $=v,z=y,B=null;try{const H=await Zc(De,Ee);if(H&&H.length>0&&(z=H),Y&&(Ue!==De||Ve!==Ee)&&Ue===s.currentYear&&Ve===s.currentMonth){const ce=await Zc(Ue,Ve);ce&&ce.length>0&&(B=ce)}}catch(H){m.error("[AppContext] Error fetching cached entries after offline save:",H)}return r.current&&(S($),De===s.currentYear&&Ee===s.currentMonth?x(z):B!==null&&x(B),(De!==s.currentYear||Ee!==s.currentMonth)&&s.handleMonthYearSelect(Ee,De),n("/")),!0}catch(De){return m.error("[AppContext] Save Err: Failed save entry:",De),r.current&&M(De instanceof Error?De:new Error("Failed to save entry")),!1}finally{r.current&&U(!1)}},[a,c,v,s,n,o.isAuthenticated,i,u,t,y]),an=f.useCallback(async()=>{if(!c||!i.entryToDeleteId||!a)return;(!o.isAuthenticated||!u)&&u&&m.log("[AppContext] User is online but not authenticated. Treating as offline mode for deletion."),U(!0),M(null),A(null);try{const Y=i.entryToDeleteId,Q=_e(Y);if(Q){const De=new Date(Q.date+"T00:00:00Z"),Ee=De.getUTCFullYear(),Ue=De.getUTCMonth()+1;m.log(`[AppContext] Deleting entry using offline-first approach. Online: ${u}`),await a.deleteEntry(Y,Ee,Ue,u),u||t({title:"Deleted Offline",description:"Entry deleted locally and will sync when online.",variant:"default"})}else{m.error(`Delete Error: Could not find entry source for ID ${Y}`);const De=await at(Y);if(!De){M(new Error("Could not find entry to delete")),U(!1),i.closeDeleteDialog();return}const Ee=new Date(De.date+"T00:00:00Z"),Ue=Ee.getUTCFullYear(),Ve=Ee.getUTCMonth()+1;if(m.log(`[AppContext] Deleting entry using offline-first approach. Online: ${u}`),await a.deleteEntry(Y,Ue,Ve,u),u||t({title:"Deleted Offline",description:"Entry deleted locally and will sync when online.",variant:"default"}),Ue===s.currentYear&&Ve===s.currentMonth){const $=await a.fetchEntriesForMonth(s.currentYear,s.currentMonth,u);r.current&&x($)}}if(i.closeDeleteDialog(),i.closeViewModal(),x(De=>De.filter(Ee=>Ee.id!==Y)),u){const De=await a.fetchImagesMetadata(u).catch(Ee=>(m.error("Delete Success: Failed post-delete metadata refresh:",Ee),v));r.current&&S(De)}}catch(Y){m.error("[AppContext] Delete Error:",Y),r.current&&M(Y instanceof Error?Y:new Error("Failed to delete entry"))}finally{r.current&&U(!1)}},[a,c,i,y,s,_e,at,o.isAuthenticated,u,t,v]),kt=f.useCallback(async()=>{try{if(r.current){const G=await Jc();se(G.length)}}catch(G){m.error("[AppContext] Error getting pending sync count:",G)}},[]),Te=f.useCallback(async()=>{if(W){m.log("[AppContext] Sync already in progress, skipping new sync request");return}!u||!o.isAuthenticated||!c||!a||(await kt(),be!=0&&(r.current&&(J(!0),te(null)),wC(o.dbx).catch(G=>{m.error("[AppContext] Error processing save queue:",G),r.current&&te(G instanceof Error?G:new Error("Failed to sync changes"))}).finally(()=>{kt(),r.current&&J(!1)})))},[o.dbx,o.isAuthenticated,c,u,a,t,kt,be,W]);f.useEffect(()=>{kt();const G=setInterval(()=>{kt()},3e4);return()=>clearInterval(G)},[kt]),f.useEffect(()=>{u&&!w.current&&o.isAuthenticated?(m.log("[AppContext] Coming back online, triggering background sync"),Te()):kt(),w.current=u},[u,o.isAuthenticated,Te,kt]),f.useEffect(()=>{u&&c&&a&&(m.log("[AppContext] Checking for items in save queue due to client ready"),Te())},[c,a,u,Te]);const We={...o,dbx:o.dbx,isVerifyingInBackground:o.isVerifyingInBackground,photoClient:a,isClientReady:c,isOnline:u,currentMonth:s.currentMonth,currentYear:s.currentYear,swipeDirection:s.swipeDirection,isSyncing:W,pendingSyncCount:be,syncError:Ye,triggerBackgroundSync:Te,isMonthYearPickerOpen:s.isMonthYearPickerOpen,goToPreviousMonth:s.goToPreviousMonth,goToNextMonth:s.goToNextMonth,handleMonthYearSelect:s.handleMonthYearSelect,handleCalendarSwipe:s.handleCalendarSwipe,openMonthYearPicker:s.openMonthYearPicker,closeMonthYearPicker:s.closeMonthYearPicker,setSwipeDirection:s.setSwipeDirection,monthViewType:j,setMonthViewType:q,currentMonthEntries:y,isLoadingEntries:b,imagesMetadata:v,isLoadingImagesMeta:E,entriesError:T,operationError:P,imagesMetaError:I,setEntriesError:A,setImagesMetaError:O,clearOperationError:()=>M(null),isViewEntryModalOpen:i.isViewEntryModalOpen,selectedBasicEntriesForModal:i.selectedBasicEntriesForModal,viewEntryModalDate:i.entryDateForModal,openViewEntriesModal:i.openViewEntriesModal,closeViewModal:i.closeViewModal,isDeleteDialogOpen:i.isDeleteDialogOpen,entryToDeleteId:i.entryToDeleteId,openDeleteConfirmation:i.openDeleteConfirmation,closeDeleteDialog:i.closeDeleteDialog,isSaving:N,handleSaveEntry:vt,handleDeleteEntry:an,loadDayBackgrounds:xe,getPhotoBlobUrl:qe,getPhotoThumbnailUrl:Ce,getCombinedEntryDetails:oe,getEntriesForDay:ae,getEntryById:_e,loadSpecificEntry:at,handleDayClick:yt,handleEditRequest:Nt,handleDeleteRequest:lt,shareKeyForForm:_,clearShareKeyForForm:ge,deleteSharedFilesFromStorage:ke,navigate:n};return p.jsx(MC.Provider,{value:We,children:e})};function nr(){const e=f.useContext(MC);if(e===void 0)throw new Error("useAppContext must be used within an AppProvider");return e}const tO=al("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function nO({className:e,variant:t,...n}){return p.jsx("div",{className:ne(tO({variant:t}),e),...n})}function rO(){const{isOnline:e,isSyncing:t,pendingSyncCount:n,syncError:r,triggerBackgroundSync:o}=nr();if(!e||!t&&n===0&&!r)return null;let s=Yv,i="",a="",l="outline";return r?(s=SE,i="Sync Error",a=`Error during sync: ${r.message}`,l="destructive"):t?(s=y_,i="Syncing...",a="Synchronizing your changes with Dropbox",l="outline"):n>0&&(s=Yv,i=`${n} Pending`,a=`${n} ${n===1?"change":"changes"} pending synchronization`,l="secondary"),p.jsx(uC,{children:p.jsxs(IL,{children:[p.jsx(_L,{asChild:!0,children:p.jsxs(Ge,{variant:l,size:"sm",className:"h-8 px-2 flex items-center gap-1.5",onClick:()=>e&&o(),disabled:!e||t,children:[p.jsx(s,{className:ne("h-4 w-4",t&&"animate-pulse")}),p.jsx("span",{className:"text-xs",children:i}),n>0&&!t&&p.jsx(nO,{variant:"secondary",className:"h-5 w-5 p-0 flex items-center justify-center rounded-full text-[10px] font-semibold",children:n})]})}),p.jsxs(dC,{children:[p.jsx("p",{children:a}),!t&&e&&n>0&&p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Click to sync now"})]})]})})}var oO=f.createContext(void 0);function dl(e){const t=f.useContext(oO);return e||t||"ltr"}var mf="rovingFocusGroup.onEntryFocus",sO={bubbles:!1,cancelable:!0},Xu="RovingFocusGroup",[Qh,RC,iO]=Ou(Xu),[aO,Zu]=pn(Xu,[iO]),[lO,cO]=aO(Xu),IC=f.forwardRef((e,t)=>p.jsx(Qh.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Qh.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(uO,{...e,ref:t})})}));IC.displayName=Xu;var uO=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=e,h=f.useRef(null),w=Ie(t,h),y=dl(s),[x=null,b]=wr({prop:i,defaultProp:a,onChange:l}),[g,v]=f.useState(!1),S=ft(c),E=RC(n),C=f.useRef(!1),[T,A]=f.useState(0);return f.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(mf,S),()=>P.removeEventListener(mf,S)},[S]),p.jsx(lO,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:x,onItemFocus:f.useCallback(P=>b(P),[b]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>A(P=>P+1),[]),onFocusableItemRemove:f.useCallback(()=>A(P=>P-1),[]),children:p.jsx(Se.div,{tabIndex:g||T===0?-1:0,"data-orientation":r,...u,ref:w,style:{outline:"none",...e.style},onMouseDown:re(e.onMouseDown,()=>{C.current=!0}),onFocus:re(e.onFocus,P=>{const M=!C.current;if(P.target===P.currentTarget&&M&&!g){const I=new CustomEvent(mf,sO);if(P.currentTarget.dispatchEvent(I),!I.defaultPrevented){const O=E().filter(_=>_.focusable),N=O.find(_=>_.active),U=O.find(_=>_.id===x),q=[N,U,...O].filter(Boolean).map(_=>_.ref.current);LC(q,d)}}C.current=!1}),onBlur:re(e.onBlur,()=>v(!1))})})}),_C="RovingFocusGroupItem",NC=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=e,a=Xo(),l=s||a,c=cO(_C,n),d=c.currentTabStopId===l,u=RC(n),{onFocusableItemAdd:h,onFocusableItemRemove:w}=c;return f.useEffect(()=>{if(r)return h(),()=>w()},[r,h,w]),p.jsx(Qh.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:p.jsx(Se.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...i,ref:t,onMouseDown:re(e.onMouseDown,y=>{r?c.onItemFocus(l):y.preventDefault()}),onFocus:re(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:re(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){c.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const x=hO(y,c.orientation,c.dir);if(x!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let g=u().filter(v=>v.focusable).map(v=>v.ref.current);if(x==="last")g.reverse();else if(x==="prev"||x==="next"){x==="prev"&&g.reverse();const v=g.indexOf(y.currentTarget);g=c.loop?pO(g,v+1):g.slice(v+1)}setTimeout(()=>LC(g))}})})})});NC.displayName=_C;var dO={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fO(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function hO(e,t,n){const r=fO(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return dO[r]}function LC(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function pO(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var FC=IC,OC=NC,mO="Toggle",qm=f.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...s}=e,[i=!1,a]=wr({prop:n,onChange:o,defaultProp:r});return p.jsx(Se.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:re(e.onClick,()=>{e.disabled||a(!i)})})});qm.displayName=mO;var jC=qm,Ii="ToggleGroup",[$C,A3]=pn(Ii,[Zu]),UC=Zu(),Wm=At.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return p.jsx(gO,{...o,ref:t})}if(n==="multiple"){const o=r;return p.jsx(yO,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Ii}\``)});Wm.displayName=Ii;var[VC,BC]=$C(Ii),gO=At.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,a]=wr({prop:n,defaultProp:r,onChange:o});return p.jsx(VC,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:a,onItemDeactivate:At.useCallback(()=>a(""),[a]),children:p.jsx(zC,{...s,ref:t})})}),yO=At.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i=[],a]=wr({prop:n,defaultProp:r,onChange:o}),l=At.useCallback(d=>a((u=[])=>[...u,d]),[a]),c=At.useCallback(d=>a((u=[])=>u.filter(h=>h!==d)),[a]);return p.jsx(VC,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:l,onItemDeactivate:c,children:p.jsx(zC,{...s,ref:t})})});Wm.displayName=Ii;var[vO,wO]=$C(Ii),zC=At.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:s,dir:i,loop:a=!0,...l}=e,c=UC(n),d=dl(i),u={role:"group",dir:d,...l};return p.jsx(vO,{scope:n,rovingFocus:o,disabled:r,children:o?p.jsx(FC,{asChild:!0,...c,orientation:s,dir:d,loop:a,children:p.jsx(Se.div,{...u,ref:t})}):p.jsx(Se.div,{...u,ref:t})})}),ru="ToggleGroupItem",qC=At.forwardRef((e,t)=>{const n=BC(ru,e.__scopeToggleGroup),r=wO(ru,e.__scopeToggleGroup),o=UC(e.__scopeToggleGroup),s=n.value.includes(e.value),i=r.disabled||e.disabled,a={...e,pressed:s,disabled:i},l=At.useRef(null);return r.rovingFocus?p.jsx(OC,{asChild:!0,...o,focusable:!i,active:s,ref:l,children:p.jsx(Sw,{...a,ref:t})}):p.jsx(Sw,{...a,ref:t})});qC.displayName=ru;var Sw=At.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,s=BC(ru,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=s.type==="single"?i:void 0;return p.jsx(qm,{...a,...o,ref:t,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}})}),WC=Wm,HC=qC;const GC=al("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),xO=f.forwardRef(({className:e,variant:t,size:n,...r},o)=>p.jsx(jC,{ref:o,className:ne(GC({variant:t,size:n,className:e})),...r}));xO.displayName=jC.displayName;const KC=f.createContext({size:"default",variant:"default"}),YC=f.forwardRef(({className:e,variant:t,size:n,children:r,...o},s)=>p.jsx(WC,{ref:s,className:ne("flex items-center justify-center gap-1",e),...o,children:p.jsx(KC.Provider,{value:{variant:t,size:n},children:r})}));YC.displayName=WC.displayName;const Xh=f.forwardRef(({className:e,children:t,variant:n,size:r,...o},s)=>{const i=f.useContext(KC);return p.jsx(HC,{ref:s,className:ne(GC({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});Xh.displayName=HC.displayName;var SO=(e,t,n,r,o,s,i,a)=>{let l=document.documentElement,c=["light","dark"];function d(w){(Array.isArray(e)?e:[e]).forEach(y=>{let x=y==="class",b=x&&s?o.map(g=>s[g]||g):o;x?(l.classList.remove(...b),l.classList.add(s&&s[w]?s[w]:w)):l.setAttribute(y,w)}),u(w)}function u(w){a&&c.includes(w)&&(l.style.colorScheme=w)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let w=localStorage.getItem(t)||n,y=i&&w==="system"?h():w;d(y)}catch{}},bw=["light","dark"],QC="(prefers-color-scheme: dark)",bO=typeof window>"u",Hm=f.createContext(void 0),EO={setTheme:e=>{},themes:[]},Gm=()=>{var e;return(e=f.useContext(Hm))!=null?e:EO},CO=e=>f.useContext(Hm)?f.createElement(f.Fragment,null,e.children):f.createElement(DO,{...e}),TO=["light","dark"],DO=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:o="theme",themes:s=TO,defaultTheme:i=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d,scriptProps:u})=>{let[h,w]=f.useState(()=>PO(o,i)),[y,x]=f.useState(()=>h==="system"?gf():h),b=l?Object.values(l):s,g=f.useCallback(C=>{let T=C;if(!T)return;C==="system"&&n&&(T=gf());let A=l?l[T]:T,P=t?kO(d):null,M=document.documentElement,I=O=>{O==="class"?(M.classList.remove(...b),A&&M.classList.add(A)):O.startsWith("data-")&&(A?M.setAttribute(O,A):M.removeAttribute(O))};if(Array.isArray(a)?a.forEach(I):I(a),r){let O=bw.includes(i)?i:null,N=bw.includes(T)?T:O;M.style.colorScheme=N}P==null||P()},[d]),v=f.useCallback(C=>{let T=typeof C=="function"?C(h):C;w(T);try{localStorage.setItem(o,T)}catch{}},[h]),S=f.useCallback(C=>{let T=gf(C);x(T),h==="system"&&n&&!e&&g("system")},[h,e]);f.useEffect(()=>{let C=window.matchMedia(QC);return C.addListener(S),S(C),()=>C.removeListener(S)},[S]),f.useEffect(()=>{let C=T=>{T.key===o&&(T.newValue?w(T.newValue):v(i))};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[v]),f.useEffect(()=>{g(e??h)},[e,h]);let E=f.useMemo(()=>({theme:h,setTheme:v,forcedTheme:e,resolvedTheme:h==="system"?y:h,themes:n?[...s,"system"]:s,systemTheme:n?y:void 0}),[h,v,e,y,n,s]);return f.createElement(Hm.Provider,{value:E},f.createElement(AO,{forcedTheme:e,storageKey:o,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:l,themes:s,nonce:d,scriptProps:u}),c)},AO=f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,themes:a,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,t,s,e,a,i,r,o]).slice(1,-1);return f.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${SO.toString()})(${d})`}})}),PO=(e,t)=>{if(bO)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},kO=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},gf=e=>(e||(e=window.matchMedia(QC)),e.matches?"dark":"light"),Km="Avatar",[MO,P3]=pn(Km),[RO,XC]=MO(Km),ZC=f.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,s]=f.useState("idle");return p.jsx(RO,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:p.jsx(Se.span,{...r,ref:t})})});ZC.displayName=Km;var JC="AvatarImage",e1=f.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=e,i=XC(JC,n),a=IO(r,s),l=ft(c=>{o(c),i.onImageLoadingStatusChange(c)});return jn(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?p.jsx(Se.img,{...s,ref:t,src:r}):null});e1.displayName=JC;var t1="AvatarFallback",n1=f.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,s=XC(t1,n),[i,a]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&s.imageLoadingStatus!=="loaded"?p.jsx(Se.span,{...o,ref:t}):null});n1.displayName=t1;function Ew(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function IO(e,{referrerPolicy:t,crossOrigin:n}){const r=NO(),o=f.useRef(null),s=r?(o.current||(o.current=new window.Image),o.current):null,[i,a]=f.useState(()=>Ew(s,e));return jn(()=>{a(Ew(s,e))},[s,e]),jn(()=>{const l=u=>()=>{a(u)};if(!s)return;const c=l("loaded"),d=l("error");return s.addEventListener("load",c),s.addEventListener("error",d),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",c),s.removeEventListener("error",d)}},[s,n,t]),i}function _O(){return()=>{}}function NO(){return f.useSyncExternalStore(_O,()=>!0,()=>!1)}var r1=ZC,o1=e1,s1=n1;const i1=f.forwardRef(({className:e,...t},n)=>p.jsx(r1,{ref:n,className:ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));i1.displayName=r1.displayName;const LO=f.forwardRef(({className:e,...t},n)=>p.jsx(o1,{ref:n,className:ne("aspect-square h-full w-full",e),...t}));LO.displayName=o1.displayName;const a1=f.forwardRef(({className:e,...t},n)=>p.jsx(s1,{ref:n,className:ne("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));a1.displayName=s1.displayName;var yf=0;function l1(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Cw()),document.body.insertAdjacentElement("beforeend",e[1]??Cw()),yf++,()=>{yf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),yf--}},[])}function Cw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var vf="focusScope.autoFocusOnMount",wf="focusScope.autoFocusOnUnmount",Tw={bubbles:!1,cancelable:!0},FO="FocusScope",Ym=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[a,l]=f.useState(null),c=ft(o),d=ft(s),u=f.useRef(null),h=Ie(t,x=>l(x)),w=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let x=function(S){if(w.paused||!a)return;const E=S.target;a.contains(E)?u.current=E:Yr(u.current,{select:!0})},b=function(S){if(w.paused||!a)return;const E=S.relatedTarget;E!==null&&(a.contains(E)||Yr(u.current,{select:!0}))},g=function(S){if(document.activeElement===document.body)for(const C of S)C.removedNodes.length>0&&Yr(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const v=new MutationObserver(g);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),v.disconnect()}}},[r,a,w.paused]),f.useEffect(()=>{if(a){Aw.add(w);const x=document.activeElement;if(!a.contains(x)){const g=new CustomEvent(vf,Tw);a.addEventListener(vf,c),a.dispatchEvent(g),g.defaultPrevented||(OO(BO(c1(a)),{select:!0}),document.activeElement===x&&Yr(a))}return()=>{a.removeEventListener(vf,c),setTimeout(()=>{const g=new CustomEvent(wf,Tw);a.addEventListener(wf,d),a.dispatchEvent(g),g.defaultPrevented||Yr(x??document.body,{select:!0}),a.removeEventListener(wf,d),Aw.remove(w)},0)}}},[a,c,d,w]);const y=f.useCallback(x=>{if(!n&&!r||w.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,g=document.activeElement;if(b&&g){const v=x.currentTarget,[S,E]=jO(v);S&&E?!x.shiftKey&&g===E?(x.preventDefault(),n&&Yr(S,{select:!0})):x.shiftKey&&g===S&&(x.preventDefault(),n&&Yr(E,{select:!0})):g===v&&x.preventDefault()}},[n,r,w.paused]);return p.jsx(Se.div,{tabIndex:-1,...i,ref:h,onKeyDown:y})});Ym.displayName=FO;function OO(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Yr(r,{select:t}),document.activeElement!==n)return}function jO(e){const t=c1(e),n=Dw(t,e),r=Dw(t.reverse(),e);return[n,r]}function c1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Dw(e,t){for(const n of e)if(!$O(n,{upTo:t}))return n}function $O(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function UO(e){return e instanceof HTMLInputElement&&"select"in e}function Yr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&UO(e)&&t&&e.select()}}var Aw=VO();function VO(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Pw(e,t),e.unshift(t)},remove(t){var n;e=Pw(e,t),(n=e[0])==null||n.resume()}}}function Pw(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function BO(e){return e.filter(t=>t.tagName!=="A")}var zO=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},vs=new WeakMap,Gl=new WeakMap,Kl={},xf=0,u1=function(e){return e&&(e.host||u1(e.parentNode))},qO=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=u1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},WO=function(e,t,n,r){var o=qO(t,Array.isArray(e)?e:[e]);Kl[n]||(Kl[n]=new WeakMap);var s=Kl[n],i=[],a=new Set,l=new Set(o),c=function(u){!u||a.has(u)||(a.add(u),c(u.parentNode))};o.forEach(c);var d=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(h){if(a.has(h))d(h);else try{var w=h.getAttribute(r),y=w!==null&&w!=="false",x=(vs.get(h)||0)+1,b=(s.get(h)||0)+1;vs.set(h,x),s.set(h,b),i.push(h),x===1&&y&&Gl.set(h,!0),b===1&&h.setAttribute(n,"true"),y||h.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",h,g)}})};return d(t),a.clear(),xf++,function(){i.forEach(function(u){var h=vs.get(u)-1,w=s.get(u)-1;vs.set(u,h),s.set(u,w),h||(Gl.has(u)||u.removeAttribute(r),Gl.delete(u)),w||u.removeAttribute(n)}),xf--,xf||(vs=new WeakMap,vs=new WeakMap,Gl=new WeakMap,Kl={})}},d1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=zO(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),WO(r,o,n,"aria-hidden")):function(){return null}},dr=function(){return dr=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},dr.apply(this,arguments)};function f1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function HO(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var vc="right-scroll-bar-position",wc="width-before-scroll-bar",GO="with-scroll-bars-hidden",KO="--removed-body-scroll-bar-size";function Sf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YO(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var QO=typeof window<"u"?f.useLayoutEffect:f.useEffect,kw=new WeakMap;function XO(e,t){var n=YO(null,function(r){return e.forEach(function(o){return Sf(o,r)})});return QO(function(){var r=kw.get(n);if(r){var o=new Set(r),s=new Set(e),i=n.current;o.forEach(function(a){s.has(a)||Sf(a,null)}),s.forEach(function(a){o.has(a)||Sf(a,i)})}kw.set(n,e)},[e]),n}function ZO(e){return e}function JO(e,t){t===void 0&&(t=ZO);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var d=i;i=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){i.push(d),c()},filter:function(d){return i=i.filter(d),n}}}};return o}function ej(e){e===void 0&&(e={});var t=JO(null);return t.options=dr({async:!0,ssr:!1},e),t}var h1=function(e){var t=e.sideCar,n=f1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,dr({},n))};h1.isSideCarExport=!0;function tj(e,t){return e.useMedium(t),h1}var p1=ej(),bf=function(){},Ju=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:bf,onWheelCapture:bf,onTouchMoveCapture:bf}),o=r[0],s=r[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,h=e.sideCar,w=e.noIsolation,y=e.inert,x=e.allowPinchZoom,b=e.as,g=b===void 0?"div":b,v=e.gapMode,S=f1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,C=XO([n,t]),T=dr(dr({},S),o);return f.createElement(f.Fragment,null,d&&f.createElement(E,{sideCar:p1,removeScrollBar:c,shards:u,noIsolation:w,inert:y,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:v}),i?f.cloneElement(f.Children.only(a),dr(dr({},T),{ref:C})):f.createElement(g,dr({},T,{className:l,ref:C}),a))});Ju.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ju.classNames={fullWidth:wc,zeroRight:vc};var nj=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rj(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=nj();return t&&e.setAttribute("nonce",t),e}function oj(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function sj(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ij=function(){var e=0,t=null;return{add:function(n){e==0&&(t=rj())&&(oj(t,n),sj(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},aj=function(){var e=ij();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},m1=function(){var e=aj(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},lj={left:0,top:0,right:0,gap:0},Ef=function(e){return parseInt(e||"",10)||0},cj=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Ef(n),Ef(r),Ef(o)]},uj=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return lj;var t=cj(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},dj=m1(),Js="data-scroll-locked",fj=function(e,t,n,r){var o=e.left,s=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(GO,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Js,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(vc," .").concat(vc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wc," .").concat(wc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Js,`] {
    `).concat(KO,": ").concat(a,`px;
  }
`)},Mw=function(){var e=parseInt(document.body.getAttribute(Js)||"0",10);return isFinite(e)?e:0},hj=function(){f.useEffect(function(){return document.body.setAttribute(Js,(Mw()+1).toString()),function(){var e=Mw()-1;e<=0?document.body.removeAttribute(Js):document.body.setAttribute(Js,e.toString())}},[])},pj=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;hj();var s=f.useMemo(function(){return uj(o)},[o]);return f.createElement(dj,{styles:fj(s,!t,o,n?"":"!important")})},Zh=!1;if(typeof window<"u")try{var Yl=Object.defineProperty({},"passive",{get:function(){return Zh=!0,!0}});window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{Zh=!1}var ws=Zh?{passive:!1}:!1,mj=function(e){return e.tagName==="TEXTAREA"},g1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!mj(e)&&n[t]==="visible")},gj=function(e){return g1(e,"overflowY")},yj=function(e){return g1(e,"overflowX")},Rw=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=y1(e,r);if(o){var s=v1(e,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vj=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},wj=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},y1=function(e,t){return e==="v"?gj(t):yj(t)},v1=function(e,t){return e==="v"?vj(t):wj(t)},xj=function(e,t){return e==="h"&&t==="rtl"?-1:1},Sj=function(e,t,n,r,o){var s=xj(e,window.getComputedStyle(t).direction),i=s*r,a=n.target,l=t.contains(a),c=!1,d=i>0,u=0,h=0;do{var w=v1(e,a),y=w[0],x=w[1],b=w[2],g=x-b-s*y;(y||g)&&y1(e,a)&&(u+=g,h+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&(Math.abs(u)<1||!o)||!d&&(Math.abs(h)<1||!o))&&(c=!0),c},Ql=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Iw=function(e){return[e.deltaX,e.deltaY]},_w=function(e){return e&&"current"in e?e.current:e},bj=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ej=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Cj=0,xs=[];function Tj(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),o=f.useState(Cj++)[0],s=f.useState(m1)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var x=HO([e.lockRef.current],(e.shards||[]).map(_w),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=f.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var g=Ql(x),v=n.current,S="deltaX"in x?x.deltaX:v[0]-g[0],E="deltaY"in x?x.deltaY:v[1]-g[1],C,T=x.target,A=Math.abs(S)>Math.abs(E)?"h":"v";if("touches"in x&&A==="h"&&T.type==="range")return!1;var P=Rw(A,T);if(!P)return!0;if(P?C=A:(C=A==="v"?"h":"v",P=Rw(A,T)),!P)return!1;if(!r.current&&"changedTouches"in x&&(S||E)&&(r.current=C),!C)return!0;var M=r.current||C;return Sj(M,b,x,M==="h"?S:E,!0)},[]),l=f.useCallback(function(x){var b=x;if(!(!xs.length||xs[xs.length-1]!==s)){var g="deltaY"in b?Iw(b):Ql(b),v=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&bj(C.delta,g)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var S=(i.current.shards||[]).map(_w).filter(Boolean).filter(function(C){return C.contains(b.target)}),E=S.length>0?a(b,S[0]):!i.current.noIsolation;E&&b.cancelable&&b.preventDefault()}}},[]),c=f.useCallback(function(x,b,g,v){var S={name:x,delta:b,target:g,should:v,shadowParent:Dj(g)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(E){return E!==S})},1)},[]),d=f.useCallback(function(x){n.current=Ql(x),r.current=void 0},[]),u=f.useCallback(function(x){c(x.type,Iw(x),x.target,a(x,e.lockRef.current))},[]),h=f.useCallback(function(x){c(x.type,Ql(x),x.target,a(x,e.lockRef.current))},[]);f.useEffect(function(){return xs.push(s),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,ws),document.addEventListener("touchmove",l,ws),document.addEventListener("touchstart",d,ws),function(){xs=xs.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,ws),document.removeEventListener("touchmove",l,ws),document.removeEventListener("touchstart",d,ws)}},[]);var w=e.removeScrollBar,y=e.inert;return f.createElement(f.Fragment,null,y?f.createElement(s,{styles:Ej(o)}):null,w?f.createElement(pj,{gapMode:e.gapMode}):null)}function Dj(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Aj=tj(p1,Tj);var Qm=f.forwardRef(function(e,t){return f.createElement(Ju,dr({},e,{ref:t,sideCar:Aj}))});Qm.classNames=Ju.classNames;var Jh=["Enter"," "],Pj=["ArrowDown","PageUp","Home"],w1=["ArrowUp","PageDown","End"],kj=[...Pj,...w1],Mj={ltr:[...Jh,"ArrowRight"],rtl:[...Jh,"ArrowLeft"]},Rj={ltr:["ArrowLeft"],rtl:["ArrowRight"]},fl="Menu",[Va,Ij,_j]=Ou(fl),[us,x1]=pn(fl,[_j,Hu,Zu]),ed=Hu(),S1=Zu(),[Nj,ds]=us(fl),[Lj,hl]=us(fl),b1=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=e,a=ed(t),[l,c]=f.useState(null),d=f.useRef(!1),u=ft(s),h=dl(o);return f.useEffect(()=>{const w=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),p.jsx(ZE,{...a,children:p.jsx(Nj,{scope:t,open:n,onOpenChange:u,content:l,onContentChange:c,children:p.jsx(Lj,{scope:t,onClose:f.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:h,modal:i,children:r})})})};b1.displayName=fl;var Fj="MenuAnchor",Xm=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ed(n);return p.jsx(JE,{...o,...r,ref:t})});Xm.displayName=Fj;var Zm="MenuPortal",[Oj,E1]=us(Zm,{forceMount:void 0}),C1=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=ds(Zm,t);return p.jsx(Oj,{scope:t,forceMount:n,children:p.jsx(mn,{present:n||s.open,children:p.jsx(ju,{asChild:!0,container:o,children:r})})})};C1.displayName=Zm;var Ln="MenuContent",[jj,Jm]=us(Ln),T1=f.forwardRef((e,t)=>{const n=E1(Ln,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=ds(Ln,e.__scopeMenu),i=hl(Ln,e.__scopeMenu);return p.jsx(Va.Provider,{scope:e.__scopeMenu,children:p.jsx(mn,{present:r||s.open,children:p.jsx(Va.Slot,{scope:e.__scopeMenu,children:i.modal?p.jsx($j,{...o,ref:t}):p.jsx(Uj,{...o,ref:t})})})})}),$j=f.forwardRef((e,t)=>{const n=ds(Ln,e.__scopeMenu),r=f.useRef(null),o=Ie(t,r);return f.useEffect(()=>{const s=r.current;if(s)return d1(s)},[]),p.jsx(eg,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:re(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Uj=f.forwardRef((e,t)=>{const n=ds(Ln,e.__scopeMenu);return p.jsx(eg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Vj=vi("MenuContent.ScrollLock"),eg=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:w,disableOutsideScroll:y,...x}=e,b=ds(Ln,n),g=hl(Ln,n),v=ed(n),S=S1(n),E=Ij(n),[C,T]=f.useState(null),A=f.useRef(null),P=Ie(t,A,b.onContentChange),M=f.useRef(0),I=f.useRef(""),O=f.useRef(0),N=f.useRef(null),U=f.useRef("right"),j=f.useRef(0),q=y?Qm:f.Fragment,_=y?{as:Vj,allowPinchZoom:!0}:void 0,L=R=>{var ge,ie;const F=I.current+R,W=E().filter(ke=>!ke.disabled),J=document.activeElement,be=(ge=W.find(ke=>ke.ref.current===J))==null?void 0:ge.textValue,se=W.map(ke=>ke.textValue),Ye=Jj(se,F,be),te=(ie=W.find(ke=>ke.textValue===Ye))==null?void 0:ie.ref.current;(function ke(qe){I.current=qe,window.clearTimeout(M.current),qe!==""&&(M.current=window.setTimeout(()=>ke(""),1e3))})(F),te&&setTimeout(()=>te.focus())};f.useEffect(()=>()=>window.clearTimeout(M.current),[]),l1();const k=f.useCallback(R=>{var W,J;return U.current===((W=N.current)==null?void 0:W.side)&&t2(R,(J=N.current)==null?void 0:J.area)},[]);return p.jsx(jj,{scope:n,searchRef:I,onItemEnter:f.useCallback(R=>{k(R)&&R.preventDefault()},[k]),onItemLeave:f.useCallback(R=>{var F;k(R)||((F=A.current)==null||F.focus(),T(null))},[k]),onTriggerLeave:f.useCallback(R=>{k(R)&&R.preventDefault()},[k]),pointerGraceTimerRef:O,onPointerGraceIntentChange:f.useCallback(R=>{N.current=R},[]),children:p.jsx(q,{..._,children:p.jsx(Ym,{asChild:!0,trapped:o,onMountAutoFocus:re(s,R=>{var F;R.preventDefault(),(F=A.current)==null||F.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:p.jsx(il,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:w,children:p.jsx(FC,{asChild:!0,...S,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:T,onEntryFocus:re(l,R=>{g.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(eC,{role:"menu","aria-orientation":"vertical","data-state":V1(b.open),"data-radix-menu-content":"",dir:g.dir,...v,...x,ref:P,style:{outline:"none",...x.style},onKeyDown:re(x.onKeyDown,R=>{const W=R.target.closest("[data-radix-menu-content]")===R.currentTarget,J=R.ctrlKey||R.altKey||R.metaKey,be=R.key.length===1;W&&(R.key==="Tab"&&R.preventDefault(),!J&&be&&L(R.key));const se=A.current;if(R.target!==se||!kj.includes(R.key))return;R.preventDefault();const te=E().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);w1.includes(R.key)&&te.reverse(),Xj(te)}),onBlur:re(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(M.current),I.current="")}),onPointerMove:re(e.onPointerMove,Ba(R=>{const F=R.target,W=j.current!==R.clientX;if(R.currentTarget.contains(F)&&W){const J=R.clientX>j.current?"right":"left";U.current=J,j.current=R.clientX}}))})})})})})})});T1.displayName=Ln;var Bj="MenuGroup",tg=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Se.div,{role:"group",...r,ref:t})});tg.displayName=Bj;var zj="MenuLabel",D1=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Se.div,{...r,ref:t})});D1.displayName=zj;var ou="MenuItem",Nw="menu.itemSelect",td=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=f.useRef(null),i=hl(ou,e.__scopeMenu),a=Jm(ou,e.__scopeMenu),l=Ie(t,s),c=f.useRef(!1),d=()=>{const u=s.current;if(!n&&u){const h=new CustomEvent(Nw,{bubbles:!0,cancelable:!0});u.addEventListener(Nw,w=>r==null?void 0:r(w),{once:!0}),Em(u,h),h.defaultPrevented?c.current=!1:i.onClose()}};return p.jsx(A1,{...o,ref:l,disabled:n,onClick:re(e.onClick,d),onPointerDown:u=>{var h;(h=e.onPointerDown)==null||h.call(e,u),c.current=!0},onPointerUp:re(e.onPointerUp,u=>{var h;c.current||(h=u.currentTarget)==null||h.click()}),onKeyDown:re(e.onKeyDown,u=>{const h=a.searchRef.current!=="";n||h&&u.key===" "||Jh.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});td.displayName=ou;var A1=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,i=Jm(ou,n),a=S1(n),l=f.useRef(null),c=Ie(t,l),[d,u]=f.useState(!1),[h,w]=f.useState("");return f.useEffect(()=>{const y=l.current;y&&w((y.textContent??"").trim())},[s.children]),p.jsx(Va.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:p.jsx(OC,{asChild:!0,...a,focusable:!r,children:p.jsx(Se.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:re(e.onPointerMove,Ba(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(e.onPointerLeave,Ba(y=>i.onItemLeave(y))),onFocus:re(e.onFocus,()=>u(!0)),onBlur:re(e.onBlur,()=>u(!1))})})})}),qj="MenuCheckboxItem",P1=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return p.jsx(_1,{scope:e.__scopeMenu,checked:n,children:p.jsx(td,{role:"menuitemcheckbox","aria-checked":su(n)?"mixed":n,...o,ref:t,"data-state":rg(n),onSelect:re(o.onSelect,()=>r==null?void 0:r(su(n)?!0:!n),{checkForDefaultPrevented:!1})})})});P1.displayName=qj;var k1="MenuRadioGroup",[Wj,Hj]=us(k1,{value:void 0,onValueChange:()=>{}}),M1=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=ft(r);return p.jsx(Wj,{scope:e.__scopeMenu,value:n,onValueChange:s,children:p.jsx(tg,{...o,ref:t})})});M1.displayName=k1;var R1="MenuRadioItem",I1=f.forwardRef((e,t)=>{const{value:n,...r}=e,o=Hj(R1,e.__scopeMenu),s=n===o.value;return p.jsx(_1,{scope:e.__scopeMenu,checked:s,children:p.jsx(td,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":rg(s),onSelect:re(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});I1.displayName=R1;var ng="MenuItemIndicator",[_1,Gj]=us(ng,{checked:!1}),N1=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=Gj(ng,n);return p.jsx(mn,{present:r||su(s.checked)||s.checked===!0,children:p.jsx(Se.span,{...o,ref:t,"data-state":rg(s.checked)})})});N1.displayName=ng;var Kj="MenuSeparator",L1=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});L1.displayName=Kj;var Yj="MenuArrow",F1=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ed(n);return p.jsx(tC,{...o,...r,ref:t})});F1.displayName=Yj;var Qj="MenuSub",[k3,O1]=us(Qj),Ji="MenuSubTrigger",j1=f.forwardRef((e,t)=>{const n=ds(Ji,e.__scopeMenu),r=hl(Ji,e.__scopeMenu),o=O1(Ji,e.__scopeMenu),s=Jm(Ji,e.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const u=a.current;return()=>{window.clearTimeout(u),l(null)}},[a,l]),p.jsx(Xm,{asChild:!0,...c,children:p.jsx(A1,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":V1(n.open),...e,ref:Fu(t,o.onTriggerChange),onClick:u=>{var h;(h=e.onClick)==null||h.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:re(e.onPointerMove,Ba(u=>{s.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:re(e.onPointerLeave,Ba(u=>{var w,y;d();const h=(w=n.content)==null?void 0:w.getBoundingClientRect();if(h){const x=(y=n.content)==null?void 0:y.dataset.side,b=x==="right",g=b?-5:5,v=h[b?"left":"right"],S=h[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:u.clientX+g,y:u.clientY},{x:v,y:h.top},{x:S,y:h.top},{x:S,y:h.bottom},{x:v,y:h.bottom}],side:x}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(u),u.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:re(e.onKeyDown,u=>{var w;const h=s.searchRef.current!=="";e.disabled||h&&u.key===" "||Mj[r.dir].includes(u.key)&&(n.onOpenChange(!0),(w=n.content)==null||w.focus(),u.preventDefault())})})})});j1.displayName=Ji;var $1="MenuSubContent",U1=f.forwardRef((e,t)=>{const n=E1(Ln,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=ds(Ln,e.__scopeMenu),i=hl(Ln,e.__scopeMenu),a=O1($1,e.__scopeMenu),l=f.useRef(null),c=Ie(t,l);return p.jsx(Va.Provider,{scope:e.__scopeMenu,children:p.jsx(mn,{present:r||s.open,children:p.jsx(Va.Slot,{scope:e.__scopeMenu,children:p.jsx(eg,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var u;i.isUsingKeyboardRef.current&&((u=l.current)==null||u.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:re(e.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:re(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:re(e.onKeyDown,d=>{var w;const u=d.currentTarget.contains(d.target),h=Rj[i.dir].includes(d.key);u&&h&&(s.onOpenChange(!1),(w=a.trigger)==null||w.focus(),d.preventDefault())})})})})})});U1.displayName=$1;function V1(e){return e?"open":"closed"}function su(e){return e==="indeterminate"}function rg(e){return su(e)?"indeterminate":e?"checked":"unchecked"}function Xj(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Zj(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Jj(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=Zj(e,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function e2(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s].x,l=t[s].y,c=t[i].x,d=t[i].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(o=!o)}return o}function t2(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return e2(n,t)}function Ba(e){return t=>t.pointerType==="mouse"?e(t):void 0}var n2=b1,r2=Xm,o2=C1,s2=T1,i2=tg,a2=D1,l2=td,c2=P1,u2=M1,d2=I1,f2=N1,h2=L1,p2=F1,m2=j1,g2=U1,og="DropdownMenu",[y2,M3]=pn(og,[x1]),sn=x1(),[v2,B1]=y2(og),z1=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=sn(t),c=f.useRef(null),[d=!1,u]=wr({prop:o,defaultProp:s,onChange:i});return p.jsx(v2,{scope:t,triggerId:Xo(),triggerRef:c,contentId:Xo(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:a,children:p.jsx(n2,{...l,open:d,onOpenChange:u,dir:r,modal:a,children:n})})};z1.displayName=og;var q1="DropdownMenuTrigger",W1=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,s=B1(q1,n),i=sn(n);return p.jsx(r2,{asChild:!0,...i,children:p.jsx(Se.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Fu(t,s.triggerRef),onPointerDown:re(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:re(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});W1.displayName=q1;var w2="DropdownMenuPortal",H1=e=>{const{__scopeDropdownMenu:t,...n}=e,r=sn(t);return p.jsx(o2,{...r,...n})};H1.displayName=w2;var G1="DropdownMenuContent",K1=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=B1(G1,n),s=sn(n),i=f.useRef(!1);return p.jsx(s2,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:t,onCloseAutoFocus:re(e.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:re(e.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!o.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});K1.displayName=G1;var x2="DropdownMenuGroup",S2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(i2,{...o,...r,ref:t})});S2.displayName=x2;var b2="DropdownMenuLabel",Y1=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(a2,{...o,...r,ref:t})});Y1.displayName=b2;var E2="DropdownMenuItem",Q1=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(l2,{...o,...r,ref:t})});Q1.displayName=E2;var C2="DropdownMenuCheckboxItem",X1=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(c2,{...o,...r,ref:t})});X1.displayName=C2;var T2="DropdownMenuRadioGroup",D2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(u2,{...o,...r,ref:t})});D2.displayName=T2;var A2="DropdownMenuRadioItem",Z1=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(d2,{...o,...r,ref:t})});Z1.displayName=A2;var P2="DropdownMenuItemIndicator",J1=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(f2,{...o,...r,ref:t})});J1.displayName=P2;var k2="DropdownMenuSeparator",eT=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(h2,{...o,...r,ref:t})});eT.displayName=k2;var M2="DropdownMenuArrow",R2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(p2,{...o,...r,ref:t})});R2.displayName=M2;var I2="DropdownMenuSubTrigger",tT=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(m2,{...o,...r,ref:t})});tT.displayName=I2;var _2="DropdownMenuSubContent",nT=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sn(n);return p.jsx(g2,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nT.displayName=_2;var N2=z1,L2=W1,F2=H1,rT=K1,oT=Y1,sT=Q1,iT=X1,aT=Z1,lT=J1,cT=eT,uT=tT,dT=nT;const sg=N2,ig=L2,O2=f.forwardRef(({className:e,inset:t,children:n,...r},o)=>p.jsxs(uT,{ref:o,className:ne("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,p.jsx(yE,{className:"ml-auto"})]}));O2.displayName=uT.displayName;const j2=f.forwardRef(({className:e,...t},n)=>p.jsx(dT,{ref:n,className:ne("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));j2.displayName=dT.displayName;const nd=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(F2,{children:p.jsx(rT,{ref:r,sideOffset:t,className:ne("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));nd.displayName=rT.displayName;const ss=f.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(sT,{ref:r,className:ne("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));ss.displayName=sT.displayName;const $2=f.forwardRef(({className:e,children:t,checked:n,...r},o)=>p.jsxs(iT,{ref:o,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(lT,{children:p.jsx(gE,{className:"h-4 w-4"})})}),t]}));$2.displayName=iT.displayName;const U2=f.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(aT,{ref:r,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(lT,{children:p.jsx(o_,{className:"h-2 w-2 fill-current"})})}),t]}));U2.displayName=aT.displayName;const fT=f.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(oT,{ref:r,className:ne("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));fT.displayName=oT.displayName;const ep=f.forwardRef(({className:e,...t},n)=>p.jsx(cT,{ref:n,className:ne("-mx-1 my-1 h-px bg-muted",e),...t}));ep.displayName=cT.displayName;function hT(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ag="Switch",[V2,R3]=pn(ag),[B2,z2]=V2(ag),pT=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l="on",onCheckedChange:c,form:d,...u}=e,[h,w]=f.useState(null),y=Ie(t,S=>w(S)),x=f.useRef(!1),b=h?d||!!h.closest("form"):!0,[g=!1,v]=wr({prop:o,defaultProp:s,onChange:c});return p.jsxs(B2,{scope:n,checked:g,disabled:a,children:[p.jsx(Se.button,{type:"button",role:"switch","aria-checked":g,"aria-required":i,"data-state":yT(g),"data-disabled":a?"":void 0,disabled:a,value:l,...u,ref:y,onClick:re(e.onClick,S=>{v(E=>!E),b&&(x.current=S.isPropagationStopped(),x.current||S.stopPropagation())})}),b&&p.jsx(q2,{control:h,bubbles:!x.current,name:r,value:l,checked:g,required:i,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});pT.displayName=ag;var mT="SwitchThumb",gT=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,o=z2(mT,n);return p.jsx(Se.span,{"data-state":yT(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});gT.displayName=mT;var q2=e=>{const{control:t,checked:n,bubbles:r=!0,...o}=e,s=f.useRef(null),i=hT(n),a=Fm(t);return f.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&u){const h=new Event("click",{bubbles:r});u.call(l,n),l.dispatchEvent(h)}},[i,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function yT(e){return e?"checked":"unchecked"}var vT=pT,W2=gT;const wT=f.forwardRef(({className:e,...t},n)=>p.jsx(vT,{className:ne("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:p.jsx(W2,{className:ne("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));wT.displayName=vT.displayName;function H2(){const{userInfo:e,isLoadingAuth:t,logout:n}=nr(),{theme:r,setTheme:o,resolvedTheme:s}=Gm(),i=s==="dark";if(t||!e)return p.jsx(Ge,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8",disabled:!0,children:p.jsx(Gt,{className:"h-4 w-4 animate-spin"})});const a=l=>{o(l?"dark":"light")};return p.jsxs(sg,{children:[p.jsx(ig,{asChild:!0,children:p.jsx(Ge,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:p.jsx(i1,{className:"h-8 w-8",children:p.jsx(a1,{children:tN(e.name.display_name)})})})}),p.jsxs(nd,{className:"w-56",align:"end",forceMount:!0,children:[p.jsx(fT,{className:"font-normal",children:p.jsxs("div",{className:"flex flex-col space-y-1",children:[p.jsx("p",{className:"text-sm font-medium leading-none",children:e.name.display_name}),p.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),p.jsx(ep,{}),p.jsx(ss,{className:"cursor-pointer",onSelect:l=>l.preventDefault(),children:p.jsxs("div",{className:"flex items-center justify-between w-full",children:[p.jsxs("div",{className:"flex items-center",children:[i?p.jsx(m_,{className:"mr-2 h-4 w-4"}):p.jsx(w_,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Dark Mode"})]}),p.jsx(wT,{checked:i,onCheckedChange:a,"aria-label":"Toggle dark mode"})]})}),p.jsx(ep,{}),p.jsxs(ss,{onClick:n,className:"cursor-pointer text-destructive focus:text-destructive",children:[p.jsx(f_,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Log out"})]})]})]})}function G2(){const{isAuthenticated:e,isLoadingAuth:t,isVerifyingInBackground:n,handleDropboxAuthRedirect:r,monthViewType:o,setMonthViewType:s,isOnline:i,authError:a}=nr();Gm();const[,l]=xm(),{toast:c}=sl(),d=f.useRef(null),u=i&&!e&&!t&&!n;f.useEffect(()=>{m.log("[Header] setLocation instance type:",typeof l)},[l]);const h=y=>{m.log("[Header] New Entry Link clicked. Href:",y.currentTarget.href)},w=y=>{const x=y.target.files;if(x&&x.length>0){const b=Array.from(x),g=b.filter(S=>!S.type.startsWith("image/"));g.length>0&&c({title:"Invalid File Type",description:`Only image files are allowed. ${g.map(S=>S.name).join(", ")} ${g.length===1?"was":"were"} ignored.`,variant:"destructive"});const v=b.filter(S=>S.type.startsWith("image/"));if(v.length>0){const S=crypto.randomUUID();m.log(`[Header] Storing ${v.length} files with service worker using key: ${S}`),navigator.serviceWorker&&navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"STORE_FILES",key:S,files:v}),setTimeout(()=>{l(`/entry#shareKey=${S}`)},100)):(m.error("[Header] Service worker not available"),c({title:"Error",description:"Could not process files. Please try again.",variant:"destructive"}))}else m.log("[Header] No valid image files selected.")}else m.log("[Header] No files selected.");y.target&&(y.target.value="")};return p.jsxs("header",{className:ne("fixed top-0 left-0 right-0 z-10 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-md border-b",i?u&&a?"border-destructive dark:border-destructive":"border-neutral-200 dark:border-neutral-800":"border-orange-400 dark:border-orange-600"),children:[!i&&p.jsxs("div",{className:"absolute top-full left-0 right-0 bg-orange-100 dark:bg-orange-900 border-b border-orange-400 dark:border-orange-600 text-orange-700 dark:text-orange-200 px-4 py-1 text-xs flex items-center justify-center z-10",children:[p.jsx(x_,{className:"h-3 w-3 mr-1.5"}),"Offline Mode."]}),u&&p.jsxs("div",{className:ne("absolute top-full left-0 right-0 border-b px-4 py-1.5 text-xs flex items-center justify-center z-10",a?"bg-destructive/10 border-destructive text-destructive dark:bg-destructive/20":"bg-primary/10 border-primary/50 text-primary dark:bg-primary/20"),children:[p.jsx(vE,{className:"h-4 w-4 mr-2 flex-shrink-0"}),p.jsx("span",{className:"flex-grow text-center",children:a?`Connection error: ${a.message}`:"Connect to Dropbox to sync and save entries."}),p.jsxs(Ge,{size:"sm",variant:a?"destructive":"default",className:"h-6 px-2 py-0.5 text-xs ml-3 flex-shrink-0",onClick:r,children:[p.jsx(d_,{className:"h-3 w-3 mr-1"}),"Connect"]})]}),p.jsx("input",{type:"file",ref:d,onChange:w,multiple:!0,accept:"image/*",className:"hidden","aria-hidden":"true"}),p.jsxs("div",{className:ne("container mx-auto flex items-center justify-between h-16 px-4"),children:[p.jsx("div",{className:"flex items-center",children:p.jsx("img",{src:"./logo.svg",alt:"Phojo Logo",className:"h-6 w-auto mr-2"})}),p.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[p.jsxs(YC,{type:"single",size:"sm",value:o,onValueChange:y=>{y&&s(y)},className:"bg-muted p-0.5 rounded-md","aria-label":"View type",children:[p.jsx(Xh,{value:"calendar","aria-label":"Calendar view",className:"h-7 w-7 px-1 data-[state=on]:bg-background data-[state=on]:shadow-sm",children:p.jsx(i_,{className:"h-4 w-4"})}),p.jsx(Xh,{value:"list","aria-label":"List view",className:"h-7 w-7 px-1 data-[state=on]:bg-background data-[state=on]:shadow-sm",children:p.jsx(u_,{className:"h-4 w-4"})})]}),p.jsx(rO,{}),e&&p.jsxs(p.Fragment,{children:[!1,p.jsx(MR,{href:"/entry/new",onClick:h,children:p.jsx(Ge,{size:"icon",className:"h-8 w-8","aria-label":"New Entry",disabled:!i,title:i?"New Entry":"New entry disabled while offline",children:p.jsx(g_,{className:"h-4 w-4"})})}),p.jsx(H2,{})]})]})]})]})}function K2(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}function rd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const tp=e=>Array.isArray(e);function xT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function za(e){return typeof e=="string"||Array.isArray(e)}function Lw(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function lg(e,t,n,r){if(typeof t=="function"){const[o,s]=Lw(r);t=t(n!==void 0?n:e.custom,o,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,s]=Lw(r);t=t(n!==void 0?n:e.custom,o,s)}return t}function od(e,t,n){const r=e.getProps();return lg(r,t,n!==void 0?n:r.custom,e)}const cg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ug=["initial",...cg],pl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fs=new Set(pl),_r=e=>e*1e3,Nr=e=>e/1e3,Y2={type:"spring",stiffness:500,damping:25,restSpeed:10},Q2=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),X2={type:"keyframes",duration:.8},Z2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J2=(e,{keyframes:t})=>t.length>2?X2:fs.has(e)?e.startsWith("scale")?Q2(t[1]):Y2:Z2;function dg(e,t){return e?e[t]||e.default||e:void 0}const e$={skipAnimations:!1,useManualTiming:!1},t$=e=>e!==null;function sd(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(t$),s=t&&n!=="loop"&&t%2===1?0:o.length-1;return!s||r===void 0?o[s]:r}const Yt=e=>e;let np=Yt;function n$(e){let t=new Set,n=new Set,r=!1,o=!1;const s=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),e()),c(i)}const l={schedule:(c,d=!1,u=!1)=>{const w=u&&r?t:n;return d&&s.add(c),w.has(c)||w.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(i=c,r){o=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(a),r=!1,o&&(o=!1,l.process(c))}};return l}const Xl=["read","resolveKeyframes","update","preRender","render","postRender"],r$=40;function ST(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=Xl.reduce((g,v)=>(g[v]=n$(s),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:u,postRender:h}=i,w=()=>{const g=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(g-o.timestamp,r$),1),o.timestamp=g,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),d.process(o),u.process(o),h.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(w))},y=()=>{n=!0,r=!0,o.isProcessing||e(w)};return{schedule:Xl.reduce((g,v)=>{const S=i[v];return g[v]=(E,C=!1,T=!1)=>(n||y(),S.schedule(E,C,T)),g},{}),cancel:g=>{for(let v=0;v<Xl.length;v++)i[Xl[v]].cancel(g)},state:o,steps:i}}const{schedule:Xe,cancel:To,state:Ot,steps:Cf}=ST(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yt,!0),bT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,o$=1e-7,s$=12;function i$(e,t,n,r,o){let s,i,a=0;do i=t+(n-t)/2,s=bT(i,r,o)-e,s>0?n=i:t=i;while(Math.abs(s)>o$&&++a<s$);return i}function ml(e,t,n,r){if(e===t&&n===r)return Yt;const o=s=>i$(s,0,1,e,n);return s=>s===0||s===1?s:bT(o(s),t,r)}const ET=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,CT=e=>t=>1-e(1-t),TT=ml(.33,1.53,.69,.99),fg=CT(TT),DT=ET(fg),AT=e=>(e*=2)<1?.5*fg(e):.5*(2-Math.pow(2,-10*(e-1))),hg=e=>1-Math.sin(Math.acos(e)),PT=CT(hg),kT=ET(hg),MT=e=>/^0[^.\s]+$/u.test(e);function a$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||MT(e):!0}const RT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),IT=e=>t=>typeof t=="string"&&t.startsWith(e),_T=IT("--"),l$=IT("var(--"),pg=e=>l$(e)?c$.test(e.split("/*")[0].trim()):!1,c$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,u$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function d$(e){const t=u$.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function NT(e,t,n=1){const[r,o]=d$(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const i=s.trim();return RT(i)?parseFloat(i):i}return pg(o)?NT(o,t,n+1):o}const Vr=(e,t,n)=>n>t?t:n<e?e:n,_i={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},qa={..._i,transform:e=>Vr(0,1,e)},Zl={..._i,default:1},gl=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Qr=gl("deg"),gr=gl("%"),pe=gl("px"),f$=gl("vh"),h$=gl("vw"),Fw={...gr,parse:e=>gr.parse(e)/100,transform:e=>gr.transform(e*100)},p$=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ow=e=>e===_i||e===pe,jw=(e,t)=>parseFloat(e.split(", ")[t]),$w=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return jw(o[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?jw(s[1],e):0}},m$=new Set(["x","y","z"]),g$=pl.filter(e=>!m$.has(e));function y$(e){const t=[];return g$.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const bi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:$w(4,13),y:$w(5,14)};bi.translateX=bi.x;bi.translateY=bi.y;const LT=e=>t=>t.test(e),v$={test:e=>e==="auto",parse:e=>e},FT=[_i,pe,gr,Qr,h$,f$,v$],Uw=e=>FT.find(LT(e)),Zo=new Set;let rp=!1,op=!1;function OT(){if(op){const e=Array.from(Zo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=y$(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}op=!1,rp=!1,Zo.forEach(e=>e.complete()),Zo.clear()}function jT(){Zo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(op=!0)})}function w$(){jT(),OT()}class mg{constructor(t,n,r,o,s,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Zo.add(this),rp||(rp=!0,Xe.read(jT),Xe.resolveKeyframes(OT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const i=o==null?void 0:o.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),o&&i===void 0&&o.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Zo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Zo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ha=e=>Math.round(e*1e5)/1e5,gg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function x$(e){return e==null}const S$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yg=(e,t)=>n=>!!(typeof n=="string"&&S$.test(n)&&n.startsWith(e)||t&&!x$(n)&&Object.prototype.hasOwnProperty.call(n,t)),$T=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(gg);return{[e]:parseFloat(o),[t]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},b$=e=>Vr(0,255,e),Tf={..._i,transform:e=>Math.round(b$(e))},qo={test:yg("rgb","red"),parse:$T("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Tf.transform(e)+", "+Tf.transform(t)+", "+Tf.transform(n)+", "+ha(qa.transform(r))+")"};function E$(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const sp={test:yg("#"),parse:E$,transform:qo.transform},Fs={test:yg("hsl","hue"),parse:$T("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+gr.transform(ha(t))+", "+gr.transform(ha(n))+", "+ha(qa.transform(r))+")"},Wt={test:e=>qo.test(e)||sp.test(e)||Fs.test(e),parse:e=>qo.test(e)?qo.parse(e):Fs.test(e)?Fs.parse(e):sp.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?qo.transform(e):Fs.transform(e)},C$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function T$(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(gg))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(C$))===null||n===void 0?void 0:n.length)||0)>0}const UT="number",VT="color",D$="var",A$="var(",Vw="${}",P$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wa(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=t.replace(P$,l=>(Wt.test(l)?(r.color.push(s),o.push(VT),n.push(Wt.parse(l))):l.startsWith(A$)?(r.var.push(s),o.push(D$),n.push(l)):(r.number.push(s),o.push(UT),n.push(parseFloat(l))),++s,Vw)).split(Vw);return{values:n,split:a,indexes:r,types:o}}function BT(e){return Wa(e).values}function zT(e){const{split:t,types:n}=Wa(e),r=t.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=t[i],o[i]!==void 0){const a=n[i];a===UT?s+=ha(o[i]):a===VT?s+=Wt.transform(o[i]):s+=o[i]}return s}}const k$=e=>typeof e=="number"?0:e;function M$(e){const t=BT(e);return zT(e)(t.map(k$))}const Do={test:T$,parse:BT,createTransformer:zT,getAnimatableNone:M$},R$=new Set(["brightness","contrast","saturate","opacity"]);function I$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(gg)||[];if(!r)return e;const o=n.replace(r,"");let s=R$.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+o+")"}const _$=/\b([a-z-]*)\(.*?\)/gu,ip={...Do,getAnimatableNone:e=>{const t=e.match(_$);return t?t.map(I$).join(" "):e}},N$={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe},L$={rotate:Qr,rotateX:Qr,rotateY:Qr,rotateZ:Qr,scale:Zl,scaleX:Zl,scaleY:Zl,scaleZ:Zl,skew:Qr,skewX:Qr,skewY:Qr,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:qa,originX:Fw,originY:Fw,originZ:pe},Bw={..._i,transform:Math.round},vg={...N$,...L$,zIndex:Bw,size:pe,fillOpacity:qa,strokeOpacity:qa,numOctaves:Bw},F$={...vg,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:ip,WebkitFilter:ip},wg=e=>F$[e];function qT(e,t){let n=wg(e);return n!==ip&&(n=Do),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const O$=new Set(["auto","none","0"]);function j$(e,t,n){let r=0,o;for(;r<e.length&&!o;){const s=e[r];typeof s=="string"&&!O$.has(s)&&Wa(s).values.length&&(o=e[r]),r++}if(o&&n)for(const s of t)e[s]=qT(n,o)}class WT extends mg{constructor(t,n,r,o,s){super(t,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),pg(c))){const d=NT(c,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!p$.has(r)||t.length!==2)return;const[o,s]=t,i=Uw(o),a=Uw(s);if(i!==a)if(Ow(i)&&Ow(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)a$(t[o])&&r.push(o);r.length&&j$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=o.length-1,a=o[i];o[i]=bi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function xg(e){return typeof e=="function"}let xc;function $$(){xc=void 0}const yr={now:()=>(xc===void 0&&yr.set(Ot.isProcessing||e$.useManualTiming?Ot.timestamp:performance.now()),xc),set:e=>{xc=e,queueMicrotask($$)}},zw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Do.test(e)||e==="0")&&!e.startsWith("url("));function U$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function V$(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],i=zw(o,t),a=zw(s,t);return!i||!a?!1:U$(e)||(n==="spring"||xg(n))&&r}const B$=40;class HT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=yr.now(),this.options={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>B$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&w$(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=yr.now(),this.hasAttemptedResolve=!0;const{name:r,type:o,velocity:s,delay:i,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!V$(t,r,o,s))if(i)this.options.duration=0;else{l==null||l(sd(t,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ei=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},GT=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let s=0;s<o;s++)r+=e(Ei(0,o-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function KT(e,t){return t?e*(1e3/t):0}const z$=5;function YT(e,t,n){const r=Math.max(t-z$,0);return KT(n-e(r),t-r)}const xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Df=.001;function q$({duration:e=xt.duration,bounce:t=xt.bounce,velocity:n=xt.velocity,mass:r=xt.mass}){let o,s,i=1-t;i=Vr(xt.minDamping,xt.maxDamping,i),e=Vr(xt.minDuration,xt.maxDuration,Nr(e)),i<1?(o=c=>{const d=c*i,u=d*e,h=d-n,w=ap(c,i),y=Math.exp(-u);return Df-h/w*y},s=c=>{const u=c*i*e,h=u*n+n,w=Math.pow(i,2)*Math.pow(c,2)*e,y=Math.exp(-u),x=ap(Math.pow(c,2),i);return(-o(c)+Df>0?-1:1)*((h-w)*y)/x}):(o=c=>{const d=Math.exp(-c*e),u=(c-n)*e+1;return-Df+d*u},s=c=>{const d=Math.exp(-c*e),u=(n-c)*(e*e);return d*u});const a=5/e,l=H$(o,s,a);if(e=_r(e),isNaN(l))return{stiffness:xt.stiffness,damping:xt.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:e}}}const W$=12;function H$(e,t,n){let r=n;for(let o=1;o<W$;o++)r=r-e(r)/t(r);return r}function ap(e,t){return e*Math.sqrt(1-t*t)}const lp=2e4;function QT(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<lp;)t+=n,r=e.next(t);return t>=lp?1/0:t}const G$=["duration","bounce"],K$=["stiffness","damping","mass"];function qw(e,t){return t.some(n=>e[n]!==void 0)}function Y$(e){let t={velocity:xt.velocity,stiffness:xt.stiffness,damping:xt.damping,mass:xt.mass,isResolvedFromDuration:!1,...e};if(!qw(e,K$)&&qw(e,G$))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,s=2*Vr(.05,1,1-e.bounce)*Math.sqrt(o);t={...t,mass:xt.mass,stiffness:o,damping:s}}else{const n=q$(e);t={...t,...n,mass:xt.mass},t.isResolvedFromDuration=!0}return t}function XT(e=xt.visualDuration,t=xt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:w}=Y$({...n,velocity:-Nr(n.velocity||0)}),y=h||0,x=c/(2*Math.sqrt(l*d)),b=i-s,g=Nr(Math.sqrt(l/d)),v=Math.abs(b)<5;r||(r=v?xt.restSpeed.granular:xt.restSpeed.default),o||(o=v?xt.restDelta.granular:xt.restDelta.default);let S;if(x<1){const C=ap(g,x);S=T=>{const A=Math.exp(-x*g*T);return i-A*((y+x*g*b)/C*Math.sin(C*T)+b*Math.cos(C*T))}}else if(x===1)S=C=>i-Math.exp(-g*C)*(b+(y+g*b)*C);else{const C=g*Math.sqrt(x*x-1);S=T=>{const A=Math.exp(-x*g*T),P=Math.min(C*T,300);return i-A*((y+x*g*b)*Math.sinh(P)+C*b*Math.cosh(P))/C}}const E={calculatedDuration:w&&u||null,next:C=>{const T=S(C);if(w)a.done=C>=u;else{let A=0;x<1&&(A=C===0?_r(y):YT(S,C,T));const P=Math.abs(A)<=r,M=Math.abs(i-T)<=o;a.done=P&&M}return a.value=a.done?i:T,a},toString:()=>{const C=Math.min(QT(E),lp),T=GT(A=>E.next(C*A).value,C,30);return C+"ms "+T}};return E}function Ww({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},w=P=>a!==void 0&&P<a||l!==void 0&&P>l,y=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let x=n*t;const b=u+x,g=i===void 0?b:i(b);g!==b&&(x=g-u);const v=P=>-x*Math.exp(-P/r),S=P=>g+v(P),E=P=>{const M=v(P),I=S(P);h.done=Math.abs(M)<=c,h.value=h.done?g:I};let C,T;const A=P=>{w(h.value)&&(C=P,T=XT({keyframes:[h.value,y(h.value)],velocity:YT(S,P,h.value),damping:o,stiffness:s,restDelta:c,restSpeed:d}))};return A(0),{calculatedDuration:null,next:P=>{let M=!1;return!T&&C===void 0&&(M=!0,E(P),A(P)),C!==void 0&&P>=C?T.next(P-C):(!M&&E(P),h)}}}const Q$=ml(.42,0,1,1),X$=ml(0,0,.58,1),ZT=ml(.42,0,.58,1),Z$=e=>Array.isArray(e)&&typeof e[0]!="number",Sg=e=>Array.isArray(e)&&typeof e[0]=="number",Hw={linear:Yt,easeIn:Q$,easeInOut:ZT,easeOut:X$,circIn:hg,circInOut:kT,circOut:PT,backIn:fg,backInOut:DT,backOut:TT,anticipate:AT},Gw=e=>{if(Sg(e)){np(e.length===4);const[t,n,r,o]=e;return ml(t,n,r,o)}else if(typeof e=="string")return np(Hw[e]!==void 0),Hw[e];return e},J$=(e,t)=>n=>t(e(n)),vo=(...e)=>e.reduce(J$),ht=(e,t,n)=>e+(t-e)*n;function Af(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function eU({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,s=0,i=0;if(!t)o=s=i=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=Af(l,a,e+1/3),s=Af(l,a,e),i=Af(l,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function iu(e,t){return n=>n>0?t:e}const Pf=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},tU=[sp,qo,Fs],nU=e=>tU.find(t=>t.test(e));function Kw(e){const t=nU(e);if(!t)return!1;let n=t.parse(e);return t===Fs&&(n=eU(n)),n}const Yw=(e,t)=>{const n=Kw(e),r=Kw(t);if(!n||!r)return iu(e,t);const o={...n};return s=>(o.red=Pf(n.red,r.red,s),o.green=Pf(n.green,r.green,s),o.blue=Pf(n.blue,r.blue,s),o.alpha=ht(n.alpha,r.alpha,s),qo.transform(o))},cp=new Set(["none","hidden"]);function rU(e,t){return cp.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function oU(e,t){return n=>ht(e,t,n)}function bg(e){return typeof e=="number"?oU:typeof e=="string"?pg(e)?iu:Wt.test(e)?Yw:aU:Array.isArray(e)?JT:typeof e=="object"?Wt.test(e)?Yw:sU:iu}function JT(e,t){const n=[...e],r=n.length,o=e.map((s,i)=>bg(s)(s,t[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function sU(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=bg(e[o])(e[o],t[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function iU(e,t){var n;const r=[],o={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][o[i]],l=(n=e.values[a])!==null&&n!==void 0?n:0;r[s]=l,o[i]++}return r}const aU=(e,t)=>{const n=Do.createTransformer(t),r=Wa(e),o=Wa(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?cp.has(e)&&!o.values.length||cp.has(t)&&!r.values.length?rU(e,t):vo(JT(iU(r,o),o.values),n):iu(e,t)};function eD(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ht(e,t,n):bg(e)(e,t)}function lU(e,t,n){const r=[],o=n||eD,s=e.length-1;for(let i=0;i<s;i++){let a=o(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||Yt:t;a=vo(l,a)}r.push(a)}return r}function cU(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const s=e.length;if(np(s===t.length),s===1)return()=>t[0];if(s===2&&e[0]===e[1])return()=>t[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=lU(t,r,o),a=i.length,l=c=>{let d=0;if(a>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const u=Ei(e[d],e[d+1],c);return i[d](u)};return n?c=>l(Vr(e[0],e[s-1],c)):l}function uU(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Ei(0,t,r);e.push(ht(n,1,o))}}function dU(e){const t=[0];return uU(t,e.length-1),t}function fU(e,t){return e.map(n=>n*t)}function hU(e,t){return e.map(()=>t||ZT).splice(0,e.length-1)}function au({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=Z$(r)?r.map(Gw):Gw(r),s={done:!1,value:t[0]},i=fU(n&&n.length===t.length?n:dU(t),e),a=cU(i,t,{ease:Array.isArray(o)?o:hU(t,o)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const pU=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Xe.update(t,!0),stop:()=>To(t),now:()=>Ot.isProcessing?Ot.timestamp:yr.now()}},mU={decay:Ww,inertia:Ww,tween:au,keyframes:au,spring:XT},gU=e=>e/100;class Eg extends HT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:o,keyframes:s}=this.options,i=(o==null?void 0:o.KeyframeResolver)||mg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new i(s,a,n,r,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=this.options,a=xg(n)?n:mU[n]||au;let l,c;a!==au&&typeof t[0]!="number"&&(l=vo(gU,eD(t[0],t[1])),t=[0,100]);const d=a({...this.options,keyframes:t});s==="mirror"&&(c=a({...this.options,keyframes:[...t].reverse(),velocity:-i})),d.calculatedDuration===null&&(d.calculatedDuration=QT(d));const{calculatedDuration:u}=d,h=u+o,w=h*(r+1)-o;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:u,resolvedDuration:h,totalDuration:w}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:o,generator:s,mirroredGenerator:i,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:u}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:w,repeatType:y,repeatDelay:x,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>d;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let S=this.currentTime,E=s;if(w){const P=Math.min(this.currentTime,d)/u;let M=Math.floor(P),I=P%1;!I&&P>=1&&(I=1),I===1&&M--,M=Math.min(M,w+1),!!(M%2)&&(y==="reverse"?(I=1-I,x&&(I-=x/u)):y==="mirror"&&(E=i)),S=Vr(0,1,I)*u}const C=v?{done:!1,value:l[0]}:E.next(S);a&&(C.value=a(C.value));let{done:T}=C;!v&&c!==null&&(T=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return A&&o!==void 0&&(C.value=sd(l,this.options,o)),b&&b(C.value),A&&this.finish(),C}get duration(){const{resolved:t}=this;return t?Nr(t.calculatedDuration):0}get time(){return Nr(this.currentTime)}set time(t){t=_r(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Nr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=pU,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const yU=new Set(["opacity","clipPath","filter","transform"]);function Cg(e){let t;return()=>(t===void 0&&(t=e()),t)}const vU={linearEasing:void 0};function wU(e,t){const n=Cg(e);return()=>{var r;return(r=vU[t])!==null&&r!==void 0?r:n()}}const lu=wU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function tD(e){return!!(typeof e=="function"&&lu()||!e||typeof e=="string"&&(e in up||lu())||Sg(e)||Array.isArray(e)&&e.every(tD))}const ea=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,up={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ea([0,.65,.55,1]),circOut:ea([.55,0,1,.45]),backIn:ea([.31,.01,.66,-.59]),backOut:ea([.33,1.53,.69,.99])};function nD(e,t){if(e)return typeof e=="function"&&lu()?GT(e,t):Sg(e)?ea(e):Array.isArray(e)?e.map(n=>nD(n,t)||up.easeOut):up[e]}function xU(e,t,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const d=nD(a,o);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:r,duration:o,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"})}function Qw(e,t){e.timeline=t,e.onfinish=null}const SU=Cg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),cu=10,bU=2e4;function EU(e){return xg(e.type)||e.type==="spring"||!tD(e.ease)}function CU(e,t){const n=new Eg({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const o=[];let s=0;for(;!r.done&&s<bU;)r=n.sample(s),o.push(r.value),s+=cu;return{times:void 0,keyframes:o,duration:s-cu,ease:"linear"}}const rD={anticipate:AT,backInOut:DT,circInOut:kT};function TU(e){return e in rD}class Xw extends HT{constructor(t){super(t);const{name:n,motionValue:r,element:o,keyframes:s}=this.options;this.resolver=new WT(s,(i,a)=>this.onKeyframesResolved(i,a),n,r,o),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:o=300,times:s,ease:i,type:a,motionValue:l,name:c,startTime:d}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof i=="string"&&lu()&&TU(i)&&(i=rD[i]),EU(this.options)){const{onComplete:h,onUpdate:w,motionValue:y,element:x,...b}=this.options,g=CU(t,b);t=g.keyframes,t.length===1&&(t[1]=t[0]),o=g.duration,s=g.times,i=g.ease,a="keyframes"}const u=xU(l.owner.current,c,t,{...this.options,duration:o,times:s,ease:i});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(Qw(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;l.set(sd(t,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:o,times:s,type:a,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Nr(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Nr(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=_r(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Yt;const{animation:r}=n;Qw(r,t)}return Yt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:o,type:s,ease:i,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:u,element:h,...w}=this.options,y=new Eg({...w,keyframes:r,duration:o,type:s,ease:i,times:a,isGenerator:!0}),x=_r(this.time);c.setWithVelocity(y.sample(x-cu).value,y.sample(x).value,cu)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:o,repeatType:s,damping:i,type:a}=t;return SU()&&r&&yU.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!o&&s!=="mirror"&&i!==0&&a!=="inertia"}}const DU=Cg(()=>window.ScrollTimeline!==void 0);class AU{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(o=>DU()&&o.attachTimeline?o.attachTimeline(t):n(o));return()=>{r.forEach((o,s)=>{o&&o(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function PU({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const Tg=(e,t,n,r={},o,s)=>i=>{const a=dg(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-_r(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:h=>{t.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:o};PU(a)||(d={...d,...J2(e,d)}),d.duration&&(d.duration=_r(d.duration)),d.repeatDelay&&(d.repeatDelay=_r(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let u=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(u=!0)),u&&!s&&t.get()!==void 0){const h=sd(d.keyframes,a);if(h!==void 0)return Xe.update(()=>{d.onUpdate(h),d.onComplete()}),new AU([])}return!s&&Xw.supports(d)?new Xw(d):new Eg(d)},kU=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),MU=e=>tp(e)?e[e.length-1]||0:e;function Dg(e,t){e.indexOf(t)===-1&&e.push(t)}function Ag(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Pg{constructor(){this.subscriptions=[]}add(t){return Dg(this.subscriptions,t),()=>Ag(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zw=30,RU=e=>!isNaN(parseFloat(e));class IU{constructor(t,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{const s=yr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=yr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=RU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Pg);const r=this.events[t].add(n);return t==="change"?()=>{r(),Xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=yr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Zw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zw);return KT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ha(e,t){return new IU(e,t)}function _U(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ha(n))}function NU(e,t){const n=od(e,t);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=MU(s[i]);_U(e,i,a)}}const kg=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),LU="framerAppearId",oD="data-"+kg(LU);function sD(e){return e.props[oD]}const Kt=e=>!!(e&&e.getVelocity);function FU(e){return!!(Kt(e)&&e.add)}function dp(e,t){const n=e.getValue("willChange");if(FU(n))return n.add(t)}function OU({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function iD(e,t,{delay:n=0,transitionOverride:r,type:o}={}){var s;let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(i=r);const c=[],d=o&&e.animationState&&e.animationState.getState()[o];for(const u in l){const h=e.getValue(u,(s=e.latestValues[u])!==null&&s!==void 0?s:null),w=l[u];if(w===void 0||d&&OU(d,u))continue;const y={delay:n,...dg(i||{},u)};let x=!1;if(window.MotionHandoffAnimation){const g=sD(e);if(g){const v=window.MotionHandoffAnimation(g,u,Xe);v!==null&&(y.startTime=v,x=!0)}}dp(e,u),h.start(Tg(u,h,w,e.shouldReduceMotion&&fs.has(u)?{type:!1}:y,e,x));const b=h.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{Xe.update(()=>{a&&NU(e,a)})}),c}function fp(e,t,n={}){var r;const o=od(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(s=n.transitionOverride);const i=o?()=>Promise.all(iD(e,o,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=s;return jU(e,t,d+c,u,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function jU(e,t,n=0,r=0,o=1,s){const i=[],a=(e.variantChildren.size-1)*r,l=o===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(e.variantChildren).sort($U).forEach((c,d)=>{c.notify("AnimationStart",t),i.push(fp(c,t,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(i)}function $U(e,t){return e.sortNodePosition(t)}function UU(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(s=>fp(e,s,n));r=Promise.all(o)}else if(typeof t=="string")r=fp(e,t,n);else{const o=typeof t=="function"?od(e,t,n.custom):t;r=Promise.all(iD(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const VU=ug.length;function aD(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?aD(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<VU;n++){const r=ug[n],o=e.props[r];(za(o)||o===!1)&&(t[r]=o)}return t}const BU=[...cg].reverse(),zU=cg.length;function qU(e){return t=>Promise.all(t.map(({animation:n,options:r})=>UU(e,n,r)))}function WU(e){let t=qU(e),n=Jw(),r=!0;const o=l=>(c,d)=>{var u;const h=od(e,d,l==="exit"?(u=e.presenceContext)===null||u===void 0?void 0:u.custom:void 0);if(h){const{transition:w,transitionEnd:y,...x}=h;c={...c,...x,...y}}return c};function s(l){t=l(e)}function i(l){const{props:c}=e,d=aD(e.parent)||{},u=[],h=new Set;let w={},y=1/0;for(let b=0;b<zU;b++){const g=BU[b],v=n[g],S=c[g]!==void 0?c[g]:d[g],E=za(S),C=g===l?v.isActive:null;C===!1&&(y=b);let T=S===d[g]&&S!==c[g]&&E;if(T&&r&&e.manuallyAnimateOnMount&&(T=!1),v.protectedKeys={...w},!v.isActive&&C===null||!S&&!v.prevProp||rd(S)||typeof S=="boolean")continue;const A=HU(v.prevProp,S);let P=A||g===l&&v.isActive&&!T&&E||b>y&&E,M=!1;const I=Array.isArray(S)?S:[S];let O=I.reduce(o(g),{});C===!1&&(O={});const{prevResolvedValues:N={}}=v,U={...N,...O},j=L=>{P=!0,h.has(L)&&(M=!0,h.delete(L)),v.needsAnimating[L]=!0;const k=e.getValue(L);k&&(k.liveStyle=!1)};for(const L in U){const k=O[L],R=N[L];if(w.hasOwnProperty(L))continue;let F=!1;tp(k)&&tp(R)?F=!xT(k,R):F=k!==R,F?k!=null?j(L):h.add(L):k!==void 0&&h.has(L)?j(L):v.protectedKeys[L]=!0}v.prevProp=S,v.prevResolvedValues=O,v.isActive&&(w={...w,...O}),r&&e.blockInitialAnimation&&(P=!1),P&&(!(T&&A)||M)&&u.push(...I.map(L=>({animation:L,options:{type:g}})))}if(h.size){const b={};h.forEach(g=>{const v=e.getBaseTarget(g),S=e.getValue(g);S&&(S.liveStyle=!0),b[g]=v??null}),u.push({animation:b})}let x=!!u.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(u):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(h=>{var w;return(w=h.animationState)===null||w===void 0?void 0:w.setActive(l,c)}),n[l].isActive=c;const u=i(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Jw(),r=!0}}}function HU(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!xT(t,e):!1}function Lo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jw(){return{animate:Lo(!0),whileInView:Lo(),whileHover:Lo(),whileTap:Lo(),whileDrag:Lo(),whileFocus:Lo(),exit:Lo()}}class Mo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class GU extends Mo{constructor(t){super(t),t.animationState||(t.animationState=WU(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();rd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let KU=0;class YU extends Mo{constructor(){super(...arguments),this.id=KU++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const QU={animation:{Feature:GU},exit:{Feature:YU}};function XU(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let o=document;const s=(r=void 0)!==null&&r!==void 0?r:o.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Bn={x:!1,y:!1};function lD(){return Bn.x||Bn.y}function e0(e){return t=>{t.pointerType==="touch"||lD()||e(t)}}function ZU(e,t,n={}){const r=new AbortController,o={passive:!0,...n,signal:r.signal},s=e0(i=>{const{target:a}=i,l=t(i);if(!l||!a)return;const c=e0(d=>{l(d),a.removeEventListener("pointerleave",c)});a.addEventListener("pointerleave",c,o)});return XU(e).forEach(i=>{i.addEventListener("pointerenter",s,o)}),()=>r.abort()}function JU(e){return e==="x"||e==="y"?Bn[e]?null:(Bn[e]=!0,()=>{Bn[e]=!1}):Bn.x||Bn.y?null:(Bn.x=Bn.y=!0,()=>{Bn.x=Bn.y=!1})}const cD=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function yl(e){return{point:{x:e.pageX,y:e.pageY}}}const eV=e=>t=>cD(t)&&e(t,yl(t));function Rr(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function wo(e,t,n,r){return Rr(e,t,eV(n),r)}const t0=(e,t)=>Math.abs(e-t);function tV(e,t){const n=t0(e.x,t.x),r=t0(e.y,t.y);return Math.sqrt(n**2+r**2)}class uD{constructor(t,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Mf(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,w=tV(u.offset,{x:0,y:0})>=3;if(!h&&!w)return;const{point:y}=u,{timestamp:x}=Ot;this.history.push({...y,timestamp:x});const{onStart:b,onMove:g}=this.handlers;h||(b&&b(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=kf(h,this.transformPagePoint),Xe.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{this.end();const{onEnd:w,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Mf(u.type==="pointercancel"?this.lastMoveEventInfo:kf(h,this.transformPagePoint),this.history);this.startEvent&&w&&w(u,b),y&&y(u,b)},!cD(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=yl(t),a=kf(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ot;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,Mf(a,this.history)),this.removeListeners=vo(wo(this.contextWindow,"pointermove",this.handlePointerMove),wo(this.contextWindow,"pointerup",this.handlePointerUp),wo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),To(this.updatePoint)}}function kf(e,t){return t?{point:t(e.point)}:e}function n0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Mf({point:e},t){return{point:e,delta:n0(e,dD(t)),offset:n0(e,nV(t)),velocity:rV(t,.1)}}function nV(e){return e[0]}function dD(e){return e[e.length-1]}function rV(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=dD(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>_r(t)));)n--;if(!r)return{x:0,y:0};const s=Nr(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Os(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const fD=1e-4,oV=1-fD,sV=1+fD,hD=.01,iV=0-hD,aV=0+hD;function En(e){return e.max-e.min}function lV(e,t,n){return Math.abs(e-t)<=n}function r0(e,t,n,r=.5){e.origin=r,e.originPoint=ht(t.min,t.max,e.origin),e.scale=En(n)/En(t),e.translate=ht(n.min,n.max,e.origin)-e.originPoint,(e.scale>=oV&&e.scale<=sV||isNaN(e.scale))&&(e.scale=1),(e.translate>=iV&&e.translate<=aV||isNaN(e.translate))&&(e.translate=0)}function pa(e,t,n,r){r0(e.x,t.x,n.x,r?r.originX:void 0),r0(e.y,t.y,n.y,r?r.originY:void 0)}function o0(e,t,n){e.min=n.min+t.min,e.max=e.min+En(t)}function cV(e,t,n){o0(e.x,t.x,n.x),o0(e.y,t.y,n.y)}function s0(e,t,n){e.min=t.min-n.min,e.max=e.min+En(t)}function ma(e,t,n){s0(e.x,t.x,n.x),s0(e.y,t.y,n.y)}function uV(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ht(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ht(n,e,r.max):Math.min(e,n)),e}function i0(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function dV(e,{top:t,left:n,bottom:r,right:o}){return{x:i0(e.x,n,o),y:i0(e.y,t,r)}}function a0(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function fV(e,t){return{x:a0(e.x,t.x),y:a0(e.y,t.y)}}function hV(e,t){let n=.5;const r=En(e),o=En(t);return o>r?n=Ei(t.min,t.max-r,e.min):r>o&&(n=Ei(e.min,e.max-o,t.min)),Vr(0,1,n)}function pV(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const hp=.35;function mV(e=hp){return e===!1?e=0:e===!0&&(e=hp),{x:l0(e,"left","right"),y:l0(e,"top","bottom")}}function l0(e,t,n){return{min:c0(e,t),max:c0(e,n)}}function c0(e,t){return typeof e=="number"?e:e[t]||0}const u0=()=>({translate:0,scale:1,origin:0,originPoint:0}),js=()=>({x:u0(),y:u0()}),d0=()=>({min:0,max:0}),Ct=()=>({x:d0(),y:d0()});function Pn(e){return[e("x"),e("y")]}function pD({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function gV({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function yV(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Rf(e){return e===void 0||e===1}function pp({scale:e,scaleX:t,scaleY:n}){return!Rf(e)||!Rf(t)||!Rf(n)}function jo(e){return pp(e)||mD(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function mD(e){return f0(e.x)||f0(e.y)}function f0(e){return e&&e!=="0%"}function uu(e,t,n){const r=e-n,o=t*r;return n+o}function h0(e,t,n,r,o){return o!==void 0&&(e=uu(e,o,r)),uu(e,n,r)+t}function mp(e,t=0,n=1,r,o){e.min=h0(e.min,t,n,r,o),e.max=h0(e.max,t,n,r,o)}function gD(e,{x:t,y:n}){mp(e.x,t.translate,t.scale,t.originPoint),mp(e.y,n.translate,n.scale,n.originPoint)}const p0=.999999999999,m0=1.0000000000001;function vV(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Us(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,gD(e,i)),r&&jo(s.latestValues)&&Us(e,s.latestValues))}t.x<m0&&t.x>p0&&(t.x=1),t.y<m0&&t.y>p0&&(t.y=1)}function $s(e,t){e.min=e.min+t,e.max=e.max+t}function g0(e,t,n,r,o=.5){const s=ht(e.min,e.max,o);mp(e,t,n,s,r)}function Us(e,t){g0(e.x,t.x,t.scaleX,t.scale,t.originX),g0(e.y,t.y,t.scaleY,t.scale,t.originY)}function yD(e,t){return pD(yV(e.getBoundingClientRect(),t))}function wV(e,t,n){const r=yD(e,n),{scroll:o}=t;return o&&($s(r.x,o.offset.x),$s(r.y,o.offset.y)),r}const vD=({current:e})=>e?e.ownerDocument.defaultView:null,xV=new WeakMap;class SV{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ct(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yl(d).point)},s=(d,u)=>{const{drag:h,dragPropagation:w,onDragStart:y}=this.getProps();if(h&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=JU(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pn(b=>{let g=this.getAxisMotionValue(b).get()||0;if(gr.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const S=v.layout.layoutBox[b];S&&(g=En(S)*(parseFloat(g)/100))}}this.originPoint[b]=g}),y&&Xe.postRender(()=>y(d,u)),dp(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},i=(d,u)=>{const{dragPropagation:h,dragDirectionLock:w,onDirectionLock:y,onDrag:x}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=u;if(w&&this.currentDirection===null){this.currentDirection=bV(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",u.point,b),this.updateAxis("y",u.point,b),this.visualElement.render(),x&&x(d,u)},a=(d,u)=>this.stop(d,u),l=()=>Pn(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new uD(t,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:vD(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&Xe.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!Jl(t,o,this.currentDirection))return;const s=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=uV(i,this.constraints[t],this.elastic[t])),s.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&Os(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=dV(o.layoutBox,n):this.constraints=!1,this.elastic=mV(r),s!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Pn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=pV(o.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Os(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=wV(r,o.root,this.visualElement.getTransformPagePoint());let i=fV(o.layout.layoutBox,s);if(n){const a=n(gV(i));this.hasMutatedConstraints=!!a,a&&(i=pD(a))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Pn(d=>{if(!Jl(d,n,this.currentDirection))return;let u=l&&l[d]||{};i&&(u={min:0,max:0});const h=o?200:1e6,w=o?40:1e7,y={type:"inertia",velocity:r?t[d]:0,bounceStiffness:h,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return dp(this.visualElement,t),r.start(Tg(t,r,0,n,this.visualElement,!1))}stopAnimation(){Pn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Pn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Pn(n=>{const{drag:r}=this.getProps();if(!Jl(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(t[n]-ht(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Os(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Pn(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=hV({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pn(i=>{if(!Jl(i,t,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(ht(l,c,o[i]))})}addListeners(){if(!this.visualElement.current)return;xV.set(this.visualElement,this);const t=this.visualElement.current,n=wo(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Os(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Xe.read(r);const i=Rr(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Pn(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=hp,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function Jl(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function bV(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class EV extends Mo{constructor(t){super(t),this.removeGroupControls=Yt,this.removeListeners=Yt,this.controls=new SV(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const y0=e=>(t,n)=>{e&&Xe.postRender(()=>e(t,n))};class CV extends Mo{constructor(){super(...arguments),this.removePointerDownListener=Yt}onPointerDown(t){this.session=new uD(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vD(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:y0(t),onStart:y0(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&Xe.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=wo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const id=f.createContext(null);function TV(){const e=f.useContext(id);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,o=f.useId();f.useEffect(()=>r(o),[]);const s=f.useCallback(()=>n&&n(o),[o,n]);return!t&&n?[!1,s]:[!0]}const Mg=f.createContext({}),wD=f.createContext({}),Sc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function v0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ki={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(pe.test(e))e=parseFloat(e);else return e;const n=v0(e,t.target.x),r=v0(e,t.target.y);return`${n}% ${r}%`}},DV={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=Do.parse(e);if(o.length>5)return r;const s=Do.createTransformer(e),i=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;o[0+i]/=a,o[1+i]/=l;const c=ht(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=c),typeof o[3+i]=="number"&&(o[3+i]/=c),s(o)}},du={};function AV(e){Object.assign(du,e)}const{schedule:Rg,cancel:I3}=ST(queueMicrotask,!1);class PV extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=t;AV(kV),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Sc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,i=r.projection;return i&&(i.isPresent=s,o||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?i.promote():i.relegate()||Xe.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Rg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function xD(e){const[t,n]=TV(),r=f.useContext(Mg);return p.jsx(PV,{...e,layoutGroup:r,switchLayoutGroup:f.useContext(wD),isPresent:t,safeToRemove:n})}const kV={borderRadius:{...Ki,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ki,borderTopRightRadius:Ki,borderBottomLeftRadius:Ki,borderBottomRightRadius:Ki,boxShadow:DV},SD=["TopLeft","TopRight","BottomLeft","BottomRight"],MV=SD.length,w0=e=>typeof e=="string"?parseFloat(e):e,x0=e=>typeof e=="number"||pe.test(e);function RV(e,t,n,r,o,s){o?(e.opacity=ht(0,n.opacity!==void 0?n.opacity:1,IV(r)),e.opacityExit=ht(t.opacity!==void 0?t.opacity:1,0,_V(r))):s&&(e.opacity=ht(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<MV;i++){const a=`border${SD[i]}Radius`;let l=S0(t,a),c=S0(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||x0(l)===x0(c)?(e[a]=Math.max(ht(w0(l),w0(c),r),0),(gr.test(c)||gr.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=ht(t.rotate||0,n.rotate||0,r))}function S0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const IV=bD(0,.5,PT),_V=bD(.5,.95,Yt);function bD(e,t,n){return r=>r<e?0:r>t?1:n(Ei(e,t,r))}function b0(e,t){e.min=t.min,e.max=t.max}function An(e,t){b0(e.x,t.x),b0(e.y,t.y)}function E0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function C0(e,t,n,r,o){return e-=t,e=uu(e,1/n,r),o!==void 0&&(e=uu(e,1/o,r)),e}function NV(e,t=0,n=1,r=.5,o,s=e,i=e){if(gr.test(t)&&(t=parseFloat(t),t=ht(i.min,i.max,t/100)-i.min),typeof t!="number")return;let a=ht(s.min,s.max,r);e===s&&(a-=t),e.min=C0(e.min,t,n,a,o),e.max=C0(e.max,t,n,a,o)}function T0(e,t,[n,r,o],s,i){NV(e,t[n],t[r],t[o],t.scale,s,i)}const LV=["x","scaleX","originX"],FV=["y","scaleY","originY"];function D0(e,t,n,r){T0(e.x,t,LV,n?n.x:void 0,r?r.x:void 0),T0(e.y,t,FV,n?n.y:void 0,r?r.y:void 0)}function A0(e){return e.translate===0&&e.scale===1}function ED(e){return A0(e.x)&&A0(e.y)}function P0(e,t){return e.min===t.min&&e.max===t.max}function OV(e,t){return P0(e.x,t.x)&&P0(e.y,t.y)}function k0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function CD(e,t){return k0(e.x,t.x)&&k0(e.y,t.y)}function M0(e){return En(e.x)/En(e.y)}function R0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class jV{constructor(){this.members=[]}add(t){Dg(this.members,t),t.scheduleRender()}remove(t){if(Ag(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $V(e,t,n){let r="";const o=e.x.translate/t.x,s=e.y.translate/t.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:u,rotateY:h,skewX:w,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `),w&&(r+=`skewX(${w}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const UV=(e,t)=>e.depth-t.depth;class VV{constructor(){this.children=[],this.isDirty=!1}add(t){Dg(this.children,t),this.isDirty=!0}remove(t){Ag(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(UV),this.isDirty=!1,this.children.forEach(t)}}function bc(e){const t=Kt(e)?e.get():e;return kU(t)?t.toValue():t}function BV(e,t){const n=yr.now(),r=({timestamp:o})=>{const s=o-n;s>=t&&(To(r),e(s-t))};return Xe.read(r,!0),()=>To(r)}function zV(e){return e instanceof SVGElement&&e.tagName!=="svg"}function qV(e,t,n){const r=Kt(e)?e:Ha(e);return r.start(Tg("",r,t,n)),r.animation}const $o={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ta=typeof window<"u"&&window.MotionDebug!==void 0,If=["","X","Y","Z"],WV={visibility:"hidden"},I0=1e3;let HV=0;function _f(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function TD(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=sD(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Xe,!(o||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&TD(r)}function DD({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=t==null?void 0:t()){this.id=HV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ta&&($o.totalNodes=$o.resolvedTargetDeltas=$o.recalculatedProjection=0),this.nodes.forEach(YV),this.nodes.forEach(eB),this.nodes.forEach(tB),this.nodes.forEach(QV),ta&&window.MotionDebug.record($o)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new VV)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Pg),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zV(i),this.instance=i;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),e){let u;const h=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=BV(h,250),Sc.hasAnimatedSinceResize&&(Sc.hasAnimatedSinceResize=!1,this.nodes.forEach(N0))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeTargetChanged:w,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||iB,{onLayoutAnimationStart:b,onLayoutAnimationComplete:g}=d.getProps(),v=!this.targetLayout||!CD(this.targetLayout,y)||w,S=!h&&w;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,S);const E={...dg(x,"layout"),onPlay:b,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||N0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,To(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nB),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&TD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_0);return}this.isUpdating||this.nodes.forEach(ZV),this.isUpdating=!1,this.nodes.forEach(JV),this.nodes.forEach(GV),this.nodes.forEach(KV),this.clearAllSnapshots();const a=yr.now();Ot.delta=Vr(0,1e3/60,a-Ot.timestamp),Ot.timestamp=a,Ot.isProcessing=!0,Cf.update.process(Ot),Cf.preRender.process(Ot),Cf.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Rg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XV),this.sharedNodes.forEach(rB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!ED(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;i&&(a||jo(this.latestValues)||d)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),aB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:a}=this.options;if(!a)return Ct();const l=a.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(lB))){const{scroll:d}=this.root;d&&($s(l.x,d.offset.x),$s(l.y,d.offset.y))}return l}removeElementScroll(i){var a;const l=Ct();if(An(l,i),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&An(l,i),$s(l.x,u.offset.x),$s(l.y,u.offset.y))}return l}applyTransform(i,a=!1){const l=Ct();An(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Us(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),jo(d.latestValues)&&Us(l,d.latestValues)}return jo(this.latestValues)&&Us(l,this.latestValues),l}removeTransform(i){const a=Ct();An(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!jo(c.latestValues))continue;pp(c.latestValues)&&c.updateSnapshot();const d=Ct(),u=c.measurePageBox();An(d,u),D0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return jo(this.latestValues)&&D0(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Ot.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ct(),this.relativeTargetOrigin=Ct(),ma(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ct(),this.targetWithTransforms=Ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):An(this.target,this.layout.layoutBox),gD(this.target,this.targetDelta)):An(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ct(),this.relativeTargetOrigin=Ct(),ma(this.relativeTargetOrigin,this.target,w.target),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ta&&$o.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||pp(this.parent.latestValues)||mD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;An(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,w=this.treeScale.y;vV(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ct());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E0(this.prevProjectionDelta.x,this.projectionDelta.x),E0(this.prevProjectionDelta.y,this.projectionDelta.y)),pa(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==w||!R0(this.projectionDelta.x,this.prevProjectionDelta.x)||!R0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),ta&&$o.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=js(),this.projectionDelta=js(),this.projectionDeltaWithTransform=js()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=js();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Ct(),w=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=w!==y,b=this.getStack(),g=!b||b.members.length<=1,v=!!(x&&!g&&this.options.crossfade===!0&&!this.path.some(sB));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const C=E/1e3;L0(u.x,i.x,C),L0(u.y,i.y,C),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ma(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oB(this.relativeTarget,this.relativeTargetOrigin,h,C),S&&OV(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Ct()),An(S,this.relativeTarget)),x&&(this.animationValues=d,RV(d,c,this.latestValues,C,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(To(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xe.update(()=>{Sc.hasAnimatedSinceResize=!0,this.currentAnimation=qV(0,I0,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(I0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&AD(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ct();const u=En(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+u;const h=En(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}An(a,l),Us(a,d),pa(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new jV),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&_f("z",i,c,this.animationValues);for(let d=0;d<If.length;d++)_f(`rotate${If[d]}`,i,c,this.animationValues),_f(`skew${If[d]}`,i,c,this.animationValues);i.render();for(const d in c)i.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);i.scheduleRender()}getProjectionStyles(i){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return WV;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=bc(i==null?void 0:i.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=bc(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!jo(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const h=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=$V(this.projectionDeltaWithTransform,this.treeScale,h),d&&(c.transform=d(h,c.transform));const{x:w,y}=this.projectionDelta;c.transformOrigin=`${w.origin*100}% ${y.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in du){if(h[x]===void 0)continue;const{correct:b,applyTo:g}=du[x],v=c.transform==="none"?h[x]:b(h[x],u);if(g){const S=g.length;for(let E=0;E<S;E++)c[g[E]]=v}else c[x]=v}return this.options.layoutId&&(c.pointerEvents=u===this?bc(i==null?void 0:i.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(_0),this.root.sharedNodes.clear()}}}function GV(e){e.updateLayout()}function KV(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;s==="size"?Pn(u=>{const h=i?n.measuredBox[u]:n.layoutBox[u],w=En(h);h.min=r[u].min,h.max=h.min+w}):AD(s,n.layoutBox,r)&&Pn(u=>{const h=i?n.measuredBox[u]:n.layoutBox[u],w=En(r[u]);h.max=h.min+w,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+w)});const a=js();pa(a,r,n.layoutBox);const l=js();i?pa(l,e.applyTransform(o,!0),n.measuredBox):pa(l,r,n.layoutBox);const c=!ED(a);let d=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:w}=u;if(h&&w){const y=Ct();ma(y,n.layoutBox,h.layoutBox);const x=Ct();ma(x,r,w.layoutBox),CD(y,x)||(d=!0),u.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function YV(e){ta&&$o.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function QV(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function XV(e){e.clearSnapshot()}function _0(e){e.clearMeasurements()}function ZV(e){e.isLayoutDirty=!1}function JV(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function N0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function eB(e){e.resolveTargetDelta()}function tB(e){e.calcProjection()}function nB(e){e.resetSkewAndRotation()}function rB(e){e.removeLeadSnapshot()}function L0(e,t,n){e.translate=ht(t.translate,0,n),e.scale=ht(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function F0(e,t,n,r){e.min=ht(t.min,n.min,r),e.max=ht(t.max,n.max,r)}function oB(e,t,n,r){F0(e.x,t.x,n.x,r),F0(e.y,t.y,n.y,r)}function sB(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const iB={duration:.45,ease:[.4,0,.1,1]},O0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),j0=O0("applewebkit/")&&!O0("chrome/")?Math.round:Yt;function $0(e){e.min=j0(e.min),e.max=j0(e.max)}function aB(e){$0(e.x),$0(e.y)}function AD(e,t,n){return e==="position"||e==="preserve-aspect"&&!lV(M0(t),M0(n),.2)}function lB(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const cB=DD({attachResizeListener:(e,t)=>Rr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Nf={current:void 0},PD=DD({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Nf.current){const e=new cB({});e.mount(window),e.setOptions({layoutScroll:!0}),Nf.current=e}return Nf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),uB={pan:{Feature:CV},drag:{Feature:EV,ProjectionNode:PD,MeasureLayout:xD}};function U0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n);const o=r[n?"onHoverStart":"onHoverEnd"];o&&Xe.postRender(()=>o(t,yl(t)))}class dB extends Mo{mount(){const{current:t,props:n}=this.node;t&&(this.unmount=ZU(t,r=>(U0(this.node,r,!0),o=>U0(this.node,o,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class fB extends Mo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vo(Rr(this.node.current,"focus",()=>this.onFocus()),Rr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kD=(e,t)=>t?e===t?!0:kD(e,t.parentElement):!1;function Lf(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,yl(n))}class hB extends Mo{constructor(){super(...arguments),this.removeStartListeners=Yt,this.removeEndListeners=Yt,this.removeAccessibleListeners=Yt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=wo(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:u}=this.node.getProps(),h=!u&&!kD(this.node.current,a.target)?d:c;h&&Xe.update(()=>h(a,l))},{passive:!(r.onTap||r.onPointerUp)}),i=wo(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=vo(s,i),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const i=a=>{a.key!=="Enter"||!this.checkPressEnd()||Lf("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Xe.postRender(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=Rr(this.node.current,"keyup",i),Lf("down",(a,l)=>{this.startPress(a,l)})},n=Rr(this.node.current,"keydown",t),r=()=>{this.isPressing&&Lf("cancel",(s,i)=>this.cancelPress(s,i))},o=Rr(this.node.current,"blur",r);this.removeAccessibleListeners=vo(n,o)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Xe.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!lD()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Xe.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=wo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Rr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=vo(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const gp=new WeakMap,Ff=new WeakMap,pB=e=>{const t=gp.get(e.target);t&&t(e)},mB=e=>{e.forEach(pB)};function gB({root:e,...t}){const n=e||document;Ff.has(n)||Ff.set(n,{});const r=Ff.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(mB,{root:e,...t})),r[o]}function yB(e,t,n){const r=gB(t);return gp.set(e,n),r.observe(e),()=>{gp.delete(e),r.unobserve(e)}}const vB={some:0,all:1};class wB extends Mo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:vB[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),h=c?d:u;h&&h(l)};return yB(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(xB(t,n))&&this.startObserver()}unmount(){}}function xB({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SB={inView:{Feature:wB},tap:{Feature:hB},focus:{Feature:fB},hover:{Feature:dB}},bB={layout:{ProjectionNode:PD,MeasureLayout:xD}},Ig=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ad=f.createContext({}),_g=typeof window<"u",MD=_g?f.useLayoutEffect:f.useEffect,RD=f.createContext({strict:!1});function EB(e,t,n,r,o){var s,i;const{visualElement:a}=f.useContext(ad),l=f.useContext(RD),c=f.useContext(id),d=f.useContext(Ig).reducedMotion,u=f.useRef();r=r||l.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const h=u.current,w=f.useContext(wD);h&&!h.projection&&o&&(h.type==="html"||h.type==="svg")&&CB(u.current,n,o,w);const y=f.useRef(!1);f.useInsertionEffect(()=>{h&&y.current&&h.update(n,c)});const x=n[oD],b=f.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,x)));return MD(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Rg.render(h.render),b.current&&h.animationState&&h.animationState.animateChanges())}),f.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,x)}),b.current=!1))}),h}function CB(e,t,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ID(e.parent)),e.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&Os(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function ID(e){if(e)return e.options.allowProjection!==!1?e.projection:ID(e.parent)}function TB(e,t,n){return f.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Os(n)&&(n.current=r))},[t])}function ld(e){return rd(e.animate)||ug.some(t=>za(e[t]))}function _D(e){return!!(ld(e)||e.variants)}function DB(e,t){if(ld(e)){const{initial:n,animate:r}=e;return{initial:n===!1||za(n)?n:void 0,animate:za(r)?r:void 0}}return e.inherit!==!1?t:{}}function AB(e){const{initial:t,animate:n}=DB(e,f.useContext(ad));return f.useMemo(()=>({initial:t,animate:n}),[V0(t),V0(n)])}function V0(e){return Array.isArray(e)?e.join(" "):e}const B0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ci={};for(const e in B0)Ci[e]={isEnabled:t=>B0[e].some(n=>!!t[n])};function PB(e){for(const t in e)Ci[t]={...Ci[t],...e[t]}}const kB=Symbol.for("motionComponentSymbol");function MB({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:o}){e&&PB(e);function s(a,l){let c;const d={...f.useContext(Ig),...a,layoutId:RB(a)},{isStatic:u}=d,h=AB(a),w=r(a,u);if(!u&&_g){IB();const y=_B(d);c=y.MeasureLayout,h.visualElement=EB(o,w,d,t,y.ProjectionNode)}return p.jsxs(ad.Provider,{value:h,children:[c&&h.visualElement?p.jsx(c,{visualElement:h.visualElement,...d}):null,n(o,a,TB(w,h.visualElement,l),w,u,h.visualElement)]})}const i=f.forwardRef(s);return i[kB]=o,i}function RB({layoutId:e}){const t=f.useContext(Mg).id;return t&&e!==void 0?t+"-"+e:e}function IB(e,t){f.useContext(RD).strict}function _B(e){const{drag:t,layout:n}=Ci;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const NB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ng(e){return typeof e!="string"||e.includes("-")?!1:!!(NB.indexOf(e)>-1||/[A-Z]/u.test(e))}function ND(e,{style:t,vars:n},r,o){Object.assign(e.style,t,o&&o.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const LD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FD(e,t,n,r){ND(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(LD.has(o)?o:kg(o),t.attrs[o])}function OD(e,{layout:t,layoutId:n}){return fs.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!du[e]||e==="opacity")}function Lg(e,t,n){var r;const{style:o}=e,s={};for(const i in o)(Kt(o[i])||t.style&&Kt(t.style[i])||OD(i,e)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[i]=o[i]);return s}function jD(e,t,n){const r=Lg(e,t,n);for(const o in e)if(Kt(e[o])||Kt(t[o])){const s=pl.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=e[o]}return r}function Fg(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}function LB({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,o,s){const i={latestValues:FB(r,o,s,e),renderState:t()};return n&&(i.mount=a=>n(r,a,i)),i}const $D=e=>(t,n)=>{const r=f.useContext(ad),o=f.useContext(id),s=()=>LB(e,t,r,o);return n?s():Fg(s)};function FB(e,t,n,r){const o={},s=r(e,{});for(const h in s)o[h]=bc(s[h]);let{initial:i,animate:a}=e;const l=ld(e),c=_D(e);t&&c&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const u=d?a:i;if(u&&typeof u!="boolean"&&!rd(u)){const h=Array.isArray(u)?u:[u];for(let w=0;w<h.length;w++){const y=lg(e,h[w]);if(y){const{transitionEnd:x,transition:b,...g}=y;for(const v in g){let S=g[v];if(Array.isArray(S)){const E=d?S.length-1:0;S=S[E]}S!==null&&(o[v]=S)}for(const v in x)o[v]=x[v]}}}return o}const Og=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),UD=()=>({...Og(),attrs:{}}),VD=(e,t)=>t&&typeof e=="number"?t.transform(e):e,OB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jB=pl.length;function $B(e,t,n){let r="",o=!0;for(let s=0;s<jB;s++){const i=pl[s],a=e[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=VD(a,vg[i]);if(!l){o=!1;const d=OB[i]||i;r+=`${d}(${c}) `}n&&(t[i]=c)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function jg(e,t,n){const{style:r,vars:o,transformOrigin:s}=e;let i=!1,a=!1;for(const l in t){const c=t[l];if(fs.has(l)){i=!0;continue}else if(_T(l)){o[l]=c;continue}else{const d=VD(c,vg[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(t.transform||(i||n?r.transform=$B(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}function z0(e,t,n){return typeof e=="string"?e:pe.transform(t+n*e)}function UB(e,t,n){const r=z0(t,e.x,e.width),o=z0(n,e.y,e.height);return`${r} ${o}`}const VB={offset:"stroke-dashoffset",array:"stroke-dasharray"},BB={offset:"strokeDashoffset",array:"strokeDasharray"};function zB(e,t,n=1,r=0,o=!0){e.pathLength=1;const s=o?VB:BB;e[s.offset]=pe.transform(-r);const i=pe.transform(t),a=pe.transform(n);e[s.array]=`${i} ${a}`}function $g(e,{attrX:t,attrY:n,attrScale:r,originX:o,originY:s,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},d,u){if(jg(e,c,u),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:w,dimensions:y}=e;h.transform&&(y&&(w.transform=h.transform),delete h.transform),y&&(o!==void 0||s!==void 0||w.transform)&&(w.transformOrigin=UB(y,o!==void 0?o:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&zB(h,i,a,l,!1)}const Ug=e=>typeof e=="string"&&e.toLowerCase()==="svg",qB={useVisualState:$D({scrapeMotionValuesFromProps:jD,createRenderState:UD,onMount:(e,t,{renderState:n,latestValues:r})=>{Xe.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Xe.render(()=>{$g(n,r,Ug(t.tagName),e.transformTemplate),FD(t,n)})}})},WB={useVisualState:$D({scrapeMotionValuesFromProps:Lg,createRenderState:Og})};function BD(e,t,n){for(const r in t)!Kt(t[r])&&!OD(r,n)&&(e[r]=t[r])}function HB({transformTemplate:e},t){return f.useMemo(()=>{const n=Og();return jg(n,t,e),Object.assign({},n.vars,n.style)},[t])}function GB(e,t){const n=e.style||{},r={};return BD(r,n,e),Object.assign(r,HB(e,t)),r}function KB(e,t){const n={},r=GB(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const YB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||YB.has(e)}let zD=e=>!fu(e);function QB(e){e&&(zD=t=>t.startsWith("on")?!fu(t):e(t))}try{QB(require("@emotion/is-prop-valid").default)}catch{}function XB(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(zD(o)||n===!0&&fu(o)||!t&&!fu(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function ZB(e,t,n,r){const o=f.useMemo(()=>{const s=UD();return $g(s,t,Ug(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};BD(s,e.style,e),o.style={...s,...o.style}}return o}function JB(e=!1){return(n,r,o,{latestValues:s},i)=>{const l=(Ng(n)?ZB:KB)(r,s,i,n),c=XB(r,typeof n=="string",e),d=n!==f.Fragment?{...c,...l,ref:o}:{},{children:u}=r,h=f.useMemo(()=>Kt(u)?u.get():u,[u]);return f.createElement(n,{...d,children:h})}}function ez(e,t){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...Ng(r)?qB:WB,preloadedFeatures:e,useRender:JB(o),createVisualElement:t,Component:r};return MB(i)}}const yp={current:null},qD={current:!1};function tz(){if(qD.current=!0,!!_g)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>yp.current=e.matches;e.addListener(t),t()}else yp.current=!1}function nz(e,t,n){for(const r in t){const o=t[r],s=n[r];if(Kt(o))e.addValue(r,o);else if(Kt(s))e.addValue(r,Ha(o,{owner:e}));else if(s!==o)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=e.getStaticValue(r);e.addValue(r,Ha(i!==void 0?i:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const q0=new WeakMap,rz=[...FT,Wt,Do],oz=e=>rz.find(LT(e)),W0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sz{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=yr.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Xe.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=ld(n),this.isVariantNode=_D(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in u){const w=u[h];l[h]!==void 0&&Kt(w)&&w.set(l[h],!1)}}mount(t){this.current=t,q0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),qD.current||tz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){q0.delete(this.current),this.projection&&this.projection.unmount(),To(this.notifyUpdate),To(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=fs.has(t),o=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Xe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ci){const n=Ci[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ct()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<W0.length;r++){const o=W0[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=t[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=nz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ha(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(RT(o)||MT(o))?o=parseFloat(o):!oz(o)&&Do.test(n)&&(o=qT(t,n)),this.setBaseTarget(t,Kt(o)?o.get():o)),Kt(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const i=lg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(o=i[t])}if(r&&o!==void 0)return o;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Kt(s)?s:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Pg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class WD extends sz{constructor(){super(...arguments),this.KeyframeResolver=WT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function iz(e){return window.getComputedStyle(e)}class az extends WD{constructor(){super(...arguments),this.type="html",this.renderInstance=ND}readValueFromInstance(t,n){if(fs.has(n)){const r=wg(n);return r&&r.default||0}else{const r=iz(t),o=(_T(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return yD(t,n)}build(t,n,r){jg(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Lg(t,n,r)}}class lz extends WD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ct}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(fs.has(n)){const r=wg(n);return r&&r.default||0}return n=LD.has(n)?n:kg(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return jD(t,n,r)}build(t,n,r){$g(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,o){FD(t,n,r,o)}mount(t){this.isSVGTag=Ug(t.tagName),super.mount(t)}}const cz=(e,t)=>Ng(e)?new lz(t):new az(t,{allowProjection:e!==f.Fragment}),uz=ez({...QU,...SB,...uB,...bB},cz),cd=K2(uz);class dz extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function fz({children:e,isPresent:t}){const n=f.useId(),r=f.useRef(null),o=f.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=f.useContext(Ig);return f.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=o.current;if(t||!r.current||!i||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),p.jsx(dz,{isPresent:t,childRef:r,sizeRef:o,children:f.cloneElement(e,{ref:r})})}const hz=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i})=>{const a=Fg(pz),l=f.useId(),c=f.useCallback(u=>{a.set(u,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),d=f.useMemo(()=>({id:l,initial:t,isPresent:n,custom:o,onExitComplete:c,register:u=>(a.set(u,!1),()=>a.delete(u))}),s?[Math.random(),c]:[n,c]);return f.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[n]),f.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),i==="popLayout"&&(e=p.jsx(fz,{isPresent:n,children:e})),p.jsx(id.Provider,{value:d,children:e})};function pz(){return new Map}const ec=e=>e.key||"";function H0(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const Vg=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:s=!0,mode:i="sync"})=>{const a=f.useMemo(()=>H0(e),[e]),l=a.map(ec),c=f.useRef(!0),d=f.useRef(a),u=Fg(()=>new Map),[h,w]=f.useState(a),[y,x]=f.useState(a);MD(()=>{c.current=!1,d.current=a;for(let v=0;v<y.length;v++){const S=ec(y[v]);l.includes(S)?u.delete(S):u.get(S)!==!0&&u.set(S,!1)}},[y,l.length,l.join("-")]);const b=[];if(a!==h){let v=[...a];for(let S=0;S<y.length;S++){const E=y[S],C=ec(E);l.includes(C)||(v.splice(S,0,E),b.push(E))}i==="wait"&&b.length&&(v=b),x(H0(v)),w(a);return}const{forceRender:g}=f.useContext(Mg);return p.jsx(p.Fragment,{children:y.map(v=>{const S=ec(v),E=a===y||l.includes(S),C=()=>{if(u.has(S))u.set(S,!0);else return;let T=!0;u.forEach(A=>{A||(T=!1)}),T&&(g==null||g(),x(d.current),o&&o())};return p.jsx(hz,{isPresent:E,initial:!c.current||r?void 0:!1,custom:E?void 0:n,presenceAffectsLayout:s,mode:i,onExitComplete:E?void 0:C,children:v},S)})})};function mz({day:e,hasPhotoEntries:t,entryCount:n,onClick:r}){const o=`calendar-day aspect-square relative p-1 transition-colors duration-200 rounded-lg select-none cursor-pointer bg-white dark:bg-neutral-800 shadow-sm hover:shadow-md hover:bg-neutral-50 dark:hover:bg-neutral-700 overflow-hidden ${t?"day-with-image":""}`;return p.jsxs(cd.div,{className:o,onClick:r,"data-day":e,layout:!0,whileTap:{scale:.95},children:[t&&p.jsx("img",{alt:"",className:"calendar-day-img absolute top-0 left-0 rounded-lg z-0 max-w-none",loading:"lazy"}),p.jsxs("div",{className:"day-content relative z-10 flex flex-col h-full justify-between",children:[p.jsx("div",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200 self-start",children:e}),n>0&&p.jsx("div",{className:"mt-auto self-end w-full px-0.5 pb-0.5",children:p.jsxs("div",{className:"flex justify-end items-center space-x-1",children:[n===1&&p.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),n>1&&p.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 bg-primary/80 text-primary-foreground rounded-full leading-none",children:n})]})})]})]})}function gz(){const{currentMonth:e,currentYear:t,currentMonthEntries:n,swipeDirection:r,handleDayClick:o,handleCalendarSwipe:s,loadDayBackgrounds:i}=nr(),a=50,l=.3,c={enter:y=>({x:y>0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0}),center:{x:0,opacity:1,position:"relative",width:"100%",transition:{duration:.4,ease:[.4,0,.2,1]}},exit:y=>({x:y<0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0})},d=(y,x)=>{const{offset:b,velocity:g}=x;b.x>a||g.x>l&&b.x>10?s(-1):(b.x<-a||g.x<-l&&b.x<-10)&&s(1)},u=f.useCallback(y=>{const b=new Date(Date.UTC(t,e-1,y)).toISOString().split("T")[0],g=n.filter(S=>S.date===b);return{hasPhotoEntries:g.some(S=>S.photos&&S.photos.length>0),entryCount:g.length}},[n,e,t]),h=f.useCallback(()=>{const y=new Date(t,e-1,0).getDate(),x=new Date(t,e-1,1).getDay(),b=Array(x).fill(null).map((v,S)=>({type:"empty",index:S})),g=Array.from({length:y},(v,S)=>({type:"day",day:S+1}));return[...b,...g]},[e,t]),w=()=>{i()};return p.jsxs("div",{className:"relative overflow-hidden",children:[p.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(y=>p.jsx("div",{className:"text-center text-xs font-medium text-neutral-500 dark:text-neutral-400 py-2",children:y},y))}),p.jsxs("div",{className:"relative min-h-[300px] md:min-h-[500px]",children:[" ",p.jsx(Vg,{initial:!1,custom:r,mode:"wait",children:p.jsx(cd.div,{custom:r,variants:c,initial:"enter",animate:"center",exit:"exit",onAnimationComplete:w,className:"grid grid-cols-7 gap-1 md:gap-2 touch-none",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.15,onDragEnd:d,style:{willChange:"transform"},children:h().map(y=>{const x=g=>g.type==="day",b=x(y)?`day-${y.day}`:`empty-${y.index}`;if(x(y)){const{hasPhotoEntries:g,entryCount:v}=u(y.day);return p.jsx(mz,{day:y.day,hasPhotoEntries:g,entryCount:v,onClick:()=>o(y.day)},b)}else return p.jsx("div",{className:"aspect-square relative p-1 bg-transparent"},b)})},`${t}-${e}`)})]})]})}function yz(){const{currentMonth:e,currentYear:t,goToPreviousMonth:n,goToNextMonth:r,openMonthYearPicker:o}=nr(),s=new Date(t,e-1).toLocaleString("default",{month:"long"});return p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx(Ge,{variant:"outline",size:"icon",onClick:n,"aria-label":"Previous Month",className:"w-9 h-9",children:p.jsx(r_,{className:"h-4 w-4"})}),p.jsxs(Ge,{variant:"ghost",onClick:o,className:"font-medium text-lg px-2",children:[p.jsx(n_,{className:"h-4 w-4 mr-2"}),s," ",t]}),p.jsx(Ge,{variant:"outline",size:"icon",onClick:r,"aria-label":"Next Month",className:"w-9 h-9",children:p.jsx(yE,{className:"h-4 w-4"})})]})}function Bg(e,[t,n]){return Math.min(n,Math.max(t,e))}function vz(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var zg="ScrollArea",[HD,N3]=pn(zg),[wz,$n]=HD(zg),GD=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[a,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState(null),[w,y]=f.useState(null),[x,b]=f.useState(null),[g,v]=f.useState(0),[S,E]=f.useState(0),[C,T]=f.useState(!1),[A,P]=f.useState(!1),M=Ie(t,O=>l(O)),I=dl(o);return p.jsx(wz,{scope:n,type:r,dir:I,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:d,content:u,onContentChange:h,scrollbarX:w,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:T,scrollbarY:x,onScrollbarYChange:b,scrollbarYEnabled:A,onScrollbarYEnabledChange:P,onCornerWidthChange:v,onCornerHeightChange:E,children:p.jsx(Se.div,{dir:I,...i,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});GD.displayName=zg;var KD="ScrollAreaViewport",YD=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,i=$n(KD,n),a=f.useRef(null),l=Ie(t,a,i.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),p.jsx(Se.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});YD.displayName=KD;var Sr="ScrollAreaScrollbar",qg=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=$n(Sr,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,a=e.orientation==="horizontal";return f.useEffect(()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)}),[a,s,i]),o.type==="hover"?p.jsx(xz,{...r,ref:t,forceMount:n}):o.type==="scroll"?p.jsx(Sz,{...r,ref:t,forceMount:n}):o.type==="auto"?p.jsx(QD,{...r,ref:t,forceMount:n}):o.type==="always"?p.jsx(Wg,{...r,ref:t}):null});qg.displayName=Sr;var xz=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=$n(Sr,e.__scopeScrollArea),[s,i]=f.useState(!1);return f.useEffect(()=>{const a=o.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),i(!0)},d=()=>{l=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),p.jsx(mn,{present:n||s,children:p.jsx(QD,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Sz=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=$n(Sr,e.__scopeScrollArea),s=e.orientation==="horizontal",i=dd(()=>l("SCROLL_END"),100),[a,l]=vz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,o.scrollHideDelay,l]),f.useEffect(()=>{const c=o.viewport,d=s?"scrollLeft":"scrollTop";if(c){let u=c[d];const h=()=>{const w=c[d];u!==w&&(l("SCROLL"),i()),u=w};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[o.viewport,s,l,i]),p.jsx(mn,{present:n||a!=="hidden",children:p.jsx(Wg,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:re(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:re(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),QD=f.forwardRef((e,t)=>{const n=$n(Sr,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=f.useState(!1),a=e.orientation==="horizontal",l=dd(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?c:d)}},10);return Ti(n.viewport,l),Ti(n.content,l),p.jsx(mn,{present:r||s,children:p.jsx(Wg,{"data-state":s?"visible":"hidden",...o,ref:t})})}),Wg=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=$n(Sr,e.__scopeScrollArea),s=f.useRef(null),i=f.useRef(0),[a,l]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=tA(a.viewport,a.content),d={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function u(h,w){return Az(h,i.current,a,w)}return n==="horizontal"?p.jsx(bz,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollLeft,w=G0(h,a,o.dir);s.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=u(h,o.dir))}}):n==="vertical"?p.jsx(Ez,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollTop,w=G0(h,a);s.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=u(h))}}):null}),bz=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=$n(Sr,e.__scopeScrollArea),[i,a]=f.useState(),l=f.useRef(null),c=Ie(t,l,s.onScrollbarXChange);return f.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(ZD,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ud(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(s.viewport){const h=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),rA(h,u)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:pu(i.paddingLeft),paddingEnd:pu(i.paddingRight)}})}})}),Ez=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=$n(Sr,e.__scopeScrollArea),[i,a]=f.useState(),l=f.useRef(null),c=Ie(t,l,s.onScrollbarYChange);return f.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(ZD,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ud(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(s.viewport){const h=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),rA(h,u)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:pu(i.paddingTop),paddingEnd:pu(i.paddingBottom)}})}})}),[Cz,XD]=HD(Sr),ZD=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...h}=e,w=$n(Sr,n),[y,x]=f.useState(null),b=Ie(t,M=>x(M)),g=f.useRef(null),v=f.useRef(""),S=w.viewport,E=r.content-r.viewport,C=ft(d),T=ft(l),A=dd(u,10);function P(M){if(g.current){const I=M.clientX-g.current.left,O=M.clientY-g.current.top;c({x:I,y:O})}}return f.useEffect(()=>{const M=I=>{const O=I.target;(y==null?void 0:y.contains(O))&&C(I,E)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[S,y,E,C]),f.useEffect(T,[r,T]),Ti(y,A),Ti(w.content,A),p.jsx(Cz,{scope:n,scrollbar:y,hasThumb:o,onThumbChange:ft(s),onThumbPointerUp:ft(i),onThumbPositionChange:T,onThumbPointerDown:ft(a),children:p.jsx(Se.div,{...h,ref:b,style:{position:"absolute",...h.style},onPointerDown:re(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),g.current=y.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),P(M))}),onPointerMove:re(e.onPointerMove,P),onPointerUp:re(e.onPointerUp,M=>{const I=M.target;I.hasPointerCapture(M.pointerId)&&I.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=v.current,w.viewport&&(w.viewport.style.scrollBehavior=""),g.current=null})})})}),hu="ScrollAreaThumb",JD=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=XD(hu,e.__scopeScrollArea);return p.jsx(mn,{present:n||o.hasThumb,children:p.jsx(Tz,{ref:t,...r})})}),Tz=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=$n(hu,n),i=XD(hu,n),{onThumbPositionChange:a}=i,l=Ie(t,u=>i.onThumbChange(u)),c=f.useRef(void 0),d=dd(()=>{c.current&&(c.current(),c.current=void 0)},100);return f.useEffect(()=>{const u=s.viewport;if(u){const h=()=>{if(d(),!c.current){const w=Pz(u,a);c.current=w,a()}};return a(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,d,a]),p.jsx(Se.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:re(e.onPointerDownCapture,u=>{const w=u.target.getBoundingClientRect(),y=u.clientX-w.left,x=u.clientY-w.top;i.onThumbPointerDown({x:y,y:x})}),onPointerUp:re(e.onPointerUp,i.onThumbPointerUp)})});JD.displayName=hu;var Hg="ScrollAreaCorner",eA=f.forwardRef((e,t)=>{const n=$n(Hg,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Dz,{...e,ref:t}):null});eA.displayName=Hg;var Dz=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=$n(Hg,n),[s,i]=f.useState(0),[a,l]=f.useState(0),c=!!(s&&a);return Ti(o.scrollbarX,()=>{var u;const d=((u=o.scrollbarX)==null?void 0:u.offsetHeight)||0;o.onCornerHeightChange(d),l(d)}),Ti(o.scrollbarY,()=>{var u;const d=((u=o.scrollbarY)==null?void 0:u.offsetWidth)||0;o.onCornerWidthChange(d),i(d)}),c?p.jsx(Se.div,{...r,ref:t,style:{width:s,height:a,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function pu(e){return e?parseInt(e,10):0}function tA(e,t){const n=e/t;return isNaN(n)?0:n}function ud(e){const t=tA(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Az(e,t,n,r="ltr"){const o=ud(n),s=o/2,i=t||s,a=o-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,u=r==="ltr"?[0,d]:[d*-1,0];return nA([l,c],u)(e)}function G0(e,t,n="ltr"){const r=ud(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,i]:[i*-1,0],c=Bg(e,l);return nA([0,i],[0,a])(c)}function nA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function rA(e,t){return e>0&&e<t}var Pz=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&t(),n=s,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function dd(e,t){const n=ft(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ti(e,t){const n=ft(t);jn(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var oA=GD,kz=YD,Mz=eA;const sA=f.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(oA,{ref:r,className:ne("relative overflow-hidden",e),...n,children:[p.jsx(kz,{className:"h-full w-full rounded-[inherit]",children:t}),p.jsx(iA,{}),p.jsx(Mz,{})]}));sA.displayName=oA.displayName;const iA=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>p.jsx(qg,{ref:r,orientation:t,className:ne("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:p.jsx(JD,{className:"relative flex-1 rounded-full bg-border"})}));iA.displayName=qg.displayName;const Rz=e=>{if(!e)return 18;const t=window.getComputedStyle(e),n=t.lineHeight;if(n==="normal"){const r=parseFloat(t.fontSize);return Math.floor(r*1.3)}return parseFloat(n)},aA=({text:e,linesToShow:t=4,className:n})=>{const[r,o]=f.useState(!1),[s,i]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=f.useRef(null),u=f.useCallback(()=>{const w=c.current,y=d.current;if(y){const x=Rz(y),b=x*t,v=y.scrollHeight>b+x*.5;l(v),i(w&&!r?w.scrollHeight>w.clientHeight+2||v:!1),w&&!r&&v?(w.style.maxHeight=`${b}px`,w.style.overflow="hidden"):w&&(w.style.maxHeight="",w.style.overflow="")}},[t,r]);f.useLayoutEffect(()=>{u()},[e,t,u]),f.useEffect(()=>{const w=c.current;if(!w)return;const y=new ResizeObserver(()=>{u()});return y.observe(w),()=>y.disconnect()},[u]);const h=()=>{o(!r)};return p.jsxs("div",{children:[p.jsx("p",{ref:d,className:ne("text-sm font-sans whitespace-pre-wrap break-words invisible absolute -z-10",n),"aria-hidden":"true",children:e||""}),p.jsxs("p",{ref:c,"data-testid":"truncated-text-content",className:ne("text-sm text-foreground font-sans whitespace-pre-wrap break-words relative transition-[max-height]",!r&&a?"overflow-hidden":"",n),children:[e||"",!r&&s&&p.jsx("span",{className:"absolute bottom-0 left-0 w-full h-4 bg-gradient-to-t from-background to-transparent pointer-events-none"})]}),a&&p.jsx(Ge,{variant:"link",className:"p-0 h-auto text-xs text-muted-foreground hover:text-primary mt-1",onClick:h,children:r?"(less)":"(more)"})]})};function Iz(e){return Object.prototype.toString.call(e)==="[object Object]"}function K0(e){return Iz(e)||Array.isArray(e)}function _z(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Gg(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const o=JSON.stringify(Object.keys(e.breakpoints||{})),s=JSON.stringify(Object.keys(t.breakpoints||{}));return o!==s?!1:n.every(i=>{const a=e[i],l=t[i];return typeof a=="function"?`${a}`==`${l}`:!K0(a)||!K0(l)?a===l:Gg(a,l)})}function Y0(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function Nz(e,t){if(e.length!==t.length)return!1;const n=Y0(e),r=Y0(t);return n.every((o,s)=>{const i=r[s];return Gg(o,i)})}function Kg(e){return typeof e=="number"}function vp(e){return typeof e=="string"}function fd(e){return typeof e=="boolean"}function Q0(e){return Object.prototype.toString.call(e)==="[object Object]"}function pt(e){return Math.abs(e)}function Yg(e){return Math.sign(e)}function ga(e,t){return pt(e-t)}function Lz(e,t){if(e===0||t===0||pt(e)<=pt(t))return 0;const n=ga(pt(e),pt(t));return pt(n/e)}function Fz(e){return Math.round(e*100)/100}function Ga(e){return Ka(e).map(Number)}function Xn(e){return e[vl(e)]}function vl(e){return Math.max(0,e.length-1)}function Qg(e,t){return t===vl(e)}function X0(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function Ka(e){return Object.keys(e)}function lA(e,t){return[e,t].reduce((n,r)=>(Ka(r).forEach(o=>{const s=n[o],i=r[o],a=Q0(s)&&Q0(i);n[o]=a?lA(s,i):i}),n),{})}function wp(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Oz(e,t){const n={start:r,center:o,end:s};function r(){return 0}function o(l){return s(l)/2}function s(l){return t-l}function i(l,c){return vp(e)?n[e](l):e(t,l,c)}return{measure:i}}function Ya(){let e=[];function t(o,s,i,a={passive:!0}){let l;if("addEventListener"in o)o.addEventListener(s,i,a),l=()=>o.removeEventListener(s,i,a);else{const c=o;c.addListener(i),l=()=>c.removeListener(i)}return e.push(l),r}function n(){e=e.filter(o=>o())}const r={add:t,clear:n};return r}function jz(e,t,n,r){const o=Ya(),s=1e3/60;let i=null,a=0,l=0;function c(){o.add(e,"visibilitychange",()=>{e.hidden&&y()})}function d(){w(),o.clear()}function u(b){if(!l)return;i||(i=b,n(),n());const g=b-i;for(i=b,a+=g;a>=s;)n(),a-=s;const v=a/s;r(v),l&&(l=t.requestAnimationFrame(u))}function h(){l||(l=t.requestAnimationFrame(u))}function w(){t.cancelAnimationFrame(l),i=null,a=0,l=0}function y(){i=null,a=0}return{init:c,destroy:d,start:h,stop:w,update:n,render:r}}function $z(e,t){const n=t==="rtl",r=e==="y",o=r?"y":"x",s=r?"x":"y",i=!r&&n?-1:1,a=d(),l=u();function c(y){const{height:x,width:b}=y;return r?x:b}function d(){return r?"top":n?"right":"left"}function u(){return r?"bottom":n?"left":"right"}function h(y){return y*i}return{scroll:o,cross:s,startEdge:a,endEdge:l,measureSize:c,direction:h}}function is(e=0,t=0){const n=pt(e-t);function r(c){return c<e}function o(c){return c>t}function s(c){return r(c)||o(c)}function i(c){return s(c)?r(c)?e:t:c}function a(c){return n?c-n*Math.ceil((c-t)/n):c}return{length:n,max:t,min:e,constrain:i,reachedAny:s,reachedMax:o,reachedMin:r,removeOffset:a}}function cA(e,t,n){const{constrain:r}=is(0,e),o=e+1;let s=i(t);function i(h){return n?pt((o+h)%o):r(h)}function a(){return s}function l(h){return s=i(h),u}function c(h){return d().set(a()+h)}function d(){return cA(e,a(),n)}const u={get:a,set:l,add:c,clone:d};return u}function Uz(e,t,n,r,o,s,i,a,l,c,d,u,h,w,y,x,b,g,v){const{cross:S,direction:E}=e,C=["INPUT","SELECT","TEXTAREA"],T={passive:!1},A=Ya(),P=Ya(),M=is(50,225).constrain(w.measure(20)),I={mouse:300,touch:400},O={mouse:500,touch:600},N=y?43:25;let U=!1,j=0,q=0,_=!1,L=!1,k=!1,R=!1;function F(oe){if(!v)return;function xe(_e){(fd(v)||v(oe,_e))&&te(_e)}const ae=t;A.add(ae,"dragstart",_e=>_e.preventDefault(),T).add(ae,"touchmove",()=>{},T).add(ae,"touchend",()=>{}).add(ae,"touchstart",xe).add(ae,"mousedown",xe).add(ae,"touchcancel",ie).add(ae,"contextmenu",ie).add(ae,"click",ke,!0)}function W(){A.clear(),P.clear()}function J(){const oe=R?n:t;P.add(oe,"touchmove",ge,T).add(oe,"touchend",ie).add(oe,"mousemove",ge,T).add(oe,"mouseup",ie)}function be(oe){const xe=oe.nodeName||"";return C.includes(xe)}function se(){return(y?O:I)[R?"mouse":"touch"]}function Ye(oe,xe){const ae=u.add(Yg(oe)*-1),_e=d.byDistance(oe,!y).distance;return y||pt(oe)<M?_e:b&&xe?_e*.5:d.byIndex(ae.get(),0).distance}function te(oe){const xe=wp(oe,r);R=xe,k=y&&xe&&!oe.buttons&&U,U=ga(o.get(),i.get())>=2,!(xe&&oe.button!==0)&&(be(oe.target)||(_=!0,s.pointerDown(oe),c.useFriction(0).useDuration(0),o.set(i),J(),j=s.readPoint(oe),q=s.readPoint(oe,S),h.emit("pointerDown")))}function ge(oe){if(!wp(oe,r)&&oe.touches.length>=2)return ie(oe);const ae=s.readPoint(oe),_e=s.readPoint(oe,S),at=ga(ae,j),yt=ga(_e,q);if(!L&&!R&&(!oe.cancelable||(L=at>yt,!L)))return ie(oe);const Nt=s.pointerMove(oe);at>x&&(k=!0),c.useFriction(.3).useDuration(.75),a.start(),o.add(E(Nt)),oe.preventDefault()}function ie(oe){const ae=d.byDistance(0,!1).index!==u.get(),_e=s.pointerUp(oe)*se(),at=Ye(E(_e),ae),yt=Lz(_e,at),Nt=N-10*yt,lt=g+yt/50;L=!1,_=!1,P.clear(),c.useDuration(Nt).useFriction(lt),l.distance(at,!y),R=!1,h.emit("pointerUp")}function ke(oe){k&&(oe.stopPropagation(),oe.preventDefault(),k=!1)}function qe(){return _}return{init:F,destroy:W,pointerDown:qe}}function Vz(e,t){let r,o;function s(u){return u.timeStamp}function i(u,h){const y=`client${(h||e.scroll)==="x"?"X":"Y"}`;return(wp(u,t)?u:u.touches[0])[y]}function a(u){return r=u,o=u,i(u)}function l(u){const h=i(u)-i(o),w=s(u)-s(r)>170;return o=u,w&&(r=u),h}function c(u){if(!r||!o)return 0;const h=i(o)-i(r),w=s(u)-s(r),y=s(u)-s(o)>170,x=h/w;return w&&!y&&pt(x)>.1?x:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:i}}function Bz(){function e(n){const{offsetTop:r,offsetLeft:o,offsetWidth:s,offsetHeight:i}=n;return{top:r,right:o+s,bottom:r+i,left:o,width:s,height:i}}return{measure:e}}function zz(e){function t(r){return e*(r/100)}return{measure:t}}function qz(e,t,n,r,o,s,i){const a=[e].concat(r);let l,c,d=[],u=!1;function h(b){return o.measureSize(i.measure(b))}function w(b){if(!s)return;c=h(e),d=r.map(h);function g(v){for(const S of v){if(u)return;const E=S.target===e,C=r.indexOf(S.target),T=E?c:d[C],A=h(E?e:r[C]);if(pt(A-T)>=.5){b.reInit(),t.emit("resize");break}}}l=new ResizeObserver(v=>{(fd(s)||s(b,v))&&g(v)}),n.requestAnimationFrame(()=>{a.forEach(v=>l.observe(v))})}function y(){u=!0,l&&l.disconnect()}return{init:w,destroy:y}}function Wz(e,t,n,r,o,s){let i=0,a=0,l=o,c=s,d=e.get(),u=0;function h(){const T=r.get()-e.get(),A=!l;let P=0;return A?(i=0,n.set(r),e.set(r),P=T):(n.set(e),i+=T/l,i*=c,d+=i,e.add(i),P=d-u),a=Yg(P),u=d,C}function w(){const T=r.get()-t.get();return pt(T)<.001}function y(){return l}function x(){return a}function b(){return i}function g(){return S(o)}function v(){return E(s)}function S(T){return l=T,C}function E(T){return c=T,C}const C={direction:x,duration:y,velocity:b,seek:h,settled:w,useBaseFriction:v,useBaseDuration:g,useFriction:E,useDuration:S};return C}function Hz(e,t,n,r,o){const s=o.measure(10),i=o.measure(50),a=is(.1,.99);let l=!1;function c(){return!(l||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function d(w){if(!c())return;const y=e.reachedMin(t.get())?"min":"max",x=pt(e[y]-t.get()),b=n.get()-t.get(),g=a.constrain(x/i);n.subtract(b*g),!w&&pt(b)<s&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function u(w){l=!w}return{shouldConstrain:c,constrain:d,toggleActive:u}}function Gz(e,t,n,r,o){const s=is(-t+e,0),i=u(),a=d(),l=h();function c(y,x){return ga(y,x)<=1}function d(){const y=i[0],x=Xn(i),b=i.lastIndexOf(y),g=i.indexOf(x)+1;return is(b,g)}function u(){return n.map((y,x)=>{const{min:b,max:g}=s,v=s.constrain(y),S=!x,E=Qg(n,x);return S?g:E||c(b,v)?b:c(g,v)?g:v}).map(y=>parseFloat(y.toFixed(3)))}function h(){if(t<=e+o)return[s.max];if(r==="keepSnaps")return i;const{min:y,max:x}=a;return i.slice(y,x)}return{snapsContained:l,scrollContainLimit:a}}function Kz(e,t,n){const r=t[0],o=n?r-e:Xn(t);return{limit:is(o,r)}}function Yz(e,t,n,r){const s=t.min+.1,i=t.max+.1,{reachedMin:a,reachedMax:l}=is(s,i);function c(h){return h===1?l(n.get()):h===-1?a(n.get()):!1}function d(h){if(!c(h))return;const w=e*(h*-1);r.forEach(y=>y.add(w))}return{loop:d}}function Qz(e){const{max:t,length:n}=e;function r(s){const i=s-t;return n?i/-n:0}return{get:r}}function Xz(e,t,n,r,o){const{startEdge:s,endEdge:i}=e,{groupSlides:a}=o,l=u().map(t.measure),c=h(),d=w();function u(){return a(r).map(x=>Xn(x)[i]-x[0][s]).map(pt)}function h(){return r.map(x=>n[s]-x[s]).map(x=>-pt(x))}function w(){return a(c).map(x=>x[0]).map((x,b)=>x+l[b])}return{snaps:c,snapsAligned:d}}function Zz(e,t,n,r,o,s){const{groupSlides:i}=o,{min:a,max:l}=r,c=d();function d(){const h=i(s),w=!e||t==="keepSnaps";return n.length===1?[s]:w?h:h.slice(a,l).map((y,x,b)=>{const g=!x,v=Qg(b,x);if(g){const S=Xn(b[0])+1;return X0(S)}if(v){const S=vl(s)-Xn(b)[0]+1;return X0(S,Xn(b)[0])}return y})}return{slideRegistry:c}}function Jz(e,t,n,r,o){const{reachedAny:s,removeOffset:i,constrain:a}=r;function l(y){return y.concat().sort((x,b)=>pt(x)-pt(b))[0]}function c(y){const x=e?i(y):a(y),b=t.map((v,S)=>({diff:d(v-x,0),index:S})).sort((v,S)=>pt(v.diff)-pt(S.diff)),{index:g}=b[0];return{index:g,distance:x}}function d(y,x){const b=[y,y+n,y-n];if(!e)return y;if(!x)return l(b);const g=b.filter(v=>Yg(v)===x);return g.length?l(g):Xn(b)-n}function u(y,x){const b=t[y]-o.get(),g=d(b,x);return{index:y,distance:g}}function h(y,x){const b=o.get()+y,{index:g,distance:v}=c(b),S=!e&&s(b);if(!x||S)return{index:g,distance:y};const E=t[g]-v,C=y+d(E,0);return{index:g,distance:C}}return{byDistance:h,byIndex:u,shortcut:d}}function e4(e,t,n,r,o,s,i){function a(u){const h=u.distance,w=u.index!==t.get();s.add(h),h&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),w&&(n.set(t.get()),t.set(u.index),i.emit("select"))}function l(u,h){const w=o.byDistance(u,h);a(w)}function c(u,h){const w=t.clone().set(u),y=o.byIndex(w.get(),h);a(y)}return{distance:l,index:c}}function t4(e,t,n,r,o,s,i,a){const l={passive:!0,capture:!0};let c=0;function d(w){if(!a)return;function y(x){if(new Date().getTime()-c>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const v=n.findIndex(S=>S.includes(x));Kg(v)&&(o.useDuration(0),r.index(v,0),i.emit("slideFocus"))}s.add(document,"keydown",u,!1),t.forEach((x,b)=>{s.add(x,"focus",g=>{(fd(a)||a(w,g))&&y(b)},l)})}function u(w){w.code==="Tab"&&(c=new Date().getTime())}return{init:d}}function na(e){let t=e;function n(){return t}function r(l){t=i(l)}function o(l){t+=i(l)}function s(l){t-=i(l)}function i(l){return Kg(l)?l:l.get()}return{get:n,set:r,add:o,subtract:s}}function uA(e,t){const n=e.scroll==="x"?i:a,r=t.style;let o=null,s=!1;function i(h){return`translate3d(${h}px,0px,0px)`}function a(h){return`translate3d(0px,${h}px,0px)`}function l(h){if(s)return;const w=Fz(e.direction(h));w!==o&&(r.transform=n(w),o=w)}function c(h){s=!h}function d(){s||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:d,to:l,toggleActive:c}}function n4(e,t,n,r,o,s,i,a,l){const d=Ga(o),u=Ga(o).reverse(),h=g().concat(v());function w(A,P){return A.reduce((M,I)=>M-o[I],P)}function y(A,P){return A.reduce((M,I)=>w(M,P)>0?M.concat([I]):M,[])}function x(A){return s.map((P,M)=>({start:P-r[M]+.5+A,end:P+t-.5+A}))}function b(A,P,M){const I=x(P);return A.map(O=>{const N=M?0:-n,U=M?n:0,j=M?"end":"start",q=I[O][j];return{index:O,loopPoint:q,slideLocation:na(-1),translate:uA(e,l[O]),target:()=>a.get()>q?N:U}})}function g(){const A=i[0],P=y(u,A);return b(P,n,!1)}function v(){const A=t-i[0]-1,P=y(d,A);return b(P,-n,!0)}function S(){return h.every(({index:A})=>{const P=d.filter(M=>M!==A);return w(P,t)<=.1})}function E(){h.forEach(A=>{const{target:P,translate:M,slideLocation:I}=A,O=P();O!==I.get()&&(M.to(O),I.set(O))})}function C(){h.forEach(A=>A.translate.clear())}return{canLoop:S,clear:C,loop:E,loopPoints:h}}function r4(e,t,n){let r,o=!1;function s(l){if(!n)return;function c(d){for(const u of d)if(u.type==="childList"){l.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(d=>{o||(fd(n)||n(l,d))&&c(d)}),r.observe(e,{childList:!0})}function i(){r&&r.disconnect(),o=!0}return{init:s,destroy:i}}function o4(e,t,n,r){const o={};let s=null,i=null,a,l=!1;function c(){a=new IntersectionObserver(y=>{l||(y.forEach(x=>{const b=t.indexOf(x.target);o[b]=x}),s=null,i=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(y=>a.observe(y))}function d(){a&&a.disconnect(),l=!0}function u(y){return Ka(o).reduce((x,b)=>{const g=parseInt(b),{isIntersecting:v}=o[g];return(y&&v||!y&&!v)&&x.push(g),x},[])}function h(y=!0){if(y&&s)return s;if(!y&&i)return i;const x=u(y);return y&&(s=x),y||(i=x),x}return{init:c,destroy:d,get:h}}function s4(e,t,n,r,o,s){const{measureSize:i,startEdge:a,endEdge:l}=e,c=n[0]&&o,d=y(),u=x(),h=n.map(i),w=b();function y(){if(!c)return 0;const v=n[0];return pt(t[a]-v[a])}function x(){if(!c)return 0;const v=s.getComputedStyle(Xn(r));return parseFloat(v.getPropertyValue(`margin-${l}`))}function b(){return n.map((v,S,E)=>{const C=!S,T=Qg(E,S);return C?h[S]+d:T?h[S]+u:E[S+1][a]-v[a]}).map(pt)}return{slideSizes:h,slideSizesWithGaps:w,startGap:d,endGap:u}}function i4(e,t,n,r,o,s,i,a,l){const{startEdge:c,endEdge:d,direction:u}=e,h=Kg(n);function w(g,v){return Ga(g).filter(S=>S%v===0).map(S=>g.slice(S,S+v))}function y(g){return g.length?Ga(g).reduce((v,S,E)=>{const C=Xn(v)||0,T=C===0,A=S===vl(g),P=o[c]-s[C][c],M=o[c]-s[S][d],I=!r&&T?u(i):0,O=!r&&A?u(a):0,N=pt(M-O-(P+I));return E&&N>t+l&&v.push(S),A&&v.push(g.length),v},[]).map((v,S,E)=>{const C=Math.max(E[S-1]||0);return g.slice(C,v)}):[]}function x(g){return h?w(g,n):y(g)}return{groupSlides:x}}function a4(e,t,n,r,o,s,i){const{align:a,axis:l,direction:c,startIndex:d,loop:u,duration:h,dragFree:w,dragThreshold:y,inViewThreshold:x,slidesToScroll:b,skipSnaps:g,containScroll:v,watchResize:S,watchSlides:E,watchDrag:C,watchFocus:T}=s,A=2,P=Bz(),M=P.measure(t),I=n.map(P.measure),O=$z(l,c),N=O.measureSize(M),U=zz(N),j=Oz(a,N),q=!u&&!!v,_=u||!!v,{slideSizes:L,slideSizesWithGaps:k,startGap:R,endGap:F}=s4(O,M,I,n,_,o),W=i4(O,N,b,u,M,I,R,F,A),{snaps:J,snapsAligned:be}=Xz(O,j,M,I,W),se=-Xn(J)+Xn(k),{snapsContained:Ye,scrollContainLimit:te}=Gz(N,se,be,v,A),ge=q?Ye:be,{limit:ie}=Kz(se,ge,u),ke=cA(vl(ge),d,u),qe=ke.clone(),Ce=Ga(n),oe=({dragHandler:Ue,scrollBody:Ve,scrollBounds:$,options:{loop:z}})=>{z||$.constrain(Ue.pointerDown()),Ve.seek()},xe=({scrollBody:Ue,translate:Ve,location:$,offsetLocation:z,previousLocation:B,scrollLooper:H,slideLooper:ce,dragHandler:ye,animation:fe,eventHandler:Re,scrollBounds:Be,options:{loop:Ze}},Qe)=>{const He=Ue.settled(),Dt=!Be.shouldConstrain(),Xt=Ze?He:He&&Dt,Ut=Xt&&!ye.pointerDown();Ut&&fe.stop();const bt=$.get()*Qe+B.get()*(1-Qe);z.set(bt),Ze&&(H.loop(Ue.direction()),ce.loop()),Ve.to(z.get()),Ut&&Re.emit("settle"),Xt||Re.emit("scroll")},ae=jz(r,o,()=>oe(Ee),Ue=>xe(Ee,Ue)),_e=.68,at=ge[ke.get()],yt=na(at),Nt=na(at),lt=na(at),vt=na(at),an=Wz(yt,lt,Nt,vt,h,_e),kt=Jz(u,ge,se,ie,vt),Te=e4(ae,ke,qe,an,kt,vt,i),We=Qz(ie),G=Ya(),Y=o4(t,n,i,x),{slideRegistry:Q}=Zz(q,v,ge,te,W,Ce),De=t4(e,n,Q,Te,an,G,i,T),Ee={ownerDocument:r,ownerWindow:o,eventHandler:i,containerRect:M,slideRects:I,animation:ae,axis:O,dragHandler:Uz(O,e,r,o,vt,Vz(O,o),yt,ae,Te,an,kt,ke,i,U,w,y,g,_e,C),eventStore:G,percentOfView:U,index:ke,indexPrevious:qe,limit:ie,location:yt,offsetLocation:lt,previousLocation:Nt,options:s,resizeHandler:qz(t,i,o,n,O,S,P),scrollBody:an,scrollBounds:Hz(ie,lt,vt,an,U),scrollLooper:Yz(se,ie,lt,[yt,lt,Nt,vt]),scrollProgress:We,scrollSnapList:ge.map(We.get),scrollSnaps:ge,scrollTarget:kt,scrollTo:Te,slideLooper:n4(O,N,se,L,k,J,ge,lt,n),slideFocus:De,slidesHandler:r4(t,i,E),slidesInView:Y,slideIndexes:Ce,slideRegistry:Q,slidesToScroll:W,target:vt,translate:uA(O,t)};return Ee}function l4(){let e={},t;function n(c){t=c}function r(c){return e[c]||[]}function o(c){return r(c).forEach(d=>d(t,c)),l}function s(c,d){return e[c]=r(c).concat([d]),l}function i(c,d){return e[c]=r(c).filter(u=>u!==d),l}function a(){e={}}const l={init:n,emit:o,off:i,on:s,clear:a};return l}const c4={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function u4(e){function t(s,i){return lA(s,i||{})}function n(s){const i=s.breakpoints||{},a=Ka(i).filter(l=>e.matchMedia(l).matches).map(l=>i[l]).reduce((l,c)=>t(l,c),{});return t(s,a)}function r(s){return s.map(i=>Ka(i.breakpoints||{})).reduce((i,a)=>i.concat(a),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function d4(e){let t=[];function n(s,i){return t=i.filter(({options:a})=>e.optionsAtMedia(a).active!==!1),t.forEach(a=>a.init(s,e)),i.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){t=t.filter(s=>s.destroy())}return{init:n,destroy:r}}function mu(e,t,n){const r=e.ownerDocument,o=r.defaultView,s=u4(o),i=d4(s),a=Ya(),l=l4(),{mergeOptions:c,optionsAtMedia:d,optionsMediaQueries:u}=s,{on:h,off:w,emit:y}=l,x=O;let b=!1,g,v=c(c4,mu.globalOptions),S=c(v),E=[],C,T,A;function P(){const{container:Ce,slides:oe}=S;T=(vp(Ce)?e.querySelector(Ce):Ce)||e.children[0];const ae=vp(oe)?T.querySelectorAll(oe):oe;A=[].slice.call(ae||T.children)}function M(Ce){const oe=a4(e,T,A,r,o,Ce,l);if(Ce.loop&&!oe.slideLooper.canLoop()){const xe=Object.assign({},Ce,{loop:!1});return M(xe)}return oe}function I(Ce,oe){b||(v=c(v,Ce),S=d(v),E=oe||E,P(),g=M(S),u([v,...E.map(({options:xe})=>xe)]).forEach(xe=>a.add(xe,"change",O)),S.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(qe),g.eventHandler.init(qe),g.resizeHandler.init(qe),g.slidesHandler.init(qe),g.options.loop&&g.slideLooper.loop(),T.offsetParent&&A.length&&g.dragHandler.init(qe),C=i.init(qe,E)))}function O(Ce,oe){const xe=W();N(),I(c({startIndex:xe},Ce),oe),l.emit("reInit")}function N(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),i.destroy(),a.clear()}function U(){b||(b=!0,a.clear(),N(),l.emit("destroy"),l.clear())}function j(Ce,oe,xe){!S.active||b||(g.scrollBody.useBaseFriction().useDuration(oe===!0?0:S.duration),g.scrollTo.index(Ce,xe||0))}function q(Ce){const oe=g.index.add(1).get();j(oe,Ce,-1)}function _(Ce){const oe=g.index.add(-1).get();j(oe,Ce,1)}function L(){return g.index.add(1).get()!==W()}function k(){return g.index.add(-1).get()!==W()}function R(){return g.scrollSnapList}function F(){return g.scrollProgress.get(g.offsetLocation.get())}function W(){return g.index.get()}function J(){return g.indexPrevious.get()}function be(){return g.slidesInView.get()}function se(){return g.slidesInView.get(!1)}function Ye(){return C}function te(){return g}function ge(){return e}function ie(){return T}function ke(){return A}const qe={canScrollNext:L,canScrollPrev:k,containerNode:ie,internalEngine:te,destroy:U,off:w,on:h,emit:y,plugins:Ye,previousScrollSnap:J,reInit:x,rootNode:ge,scrollNext:q,scrollPrev:_,scrollProgress:F,scrollSnapList:R,scrollTo:j,selectedScrollSnap:W,slideNodes:ke,slidesInView:be,slidesNotInView:se};return I(t,n),setTimeout(()=>l.emit("init"),0),qe}mu.globalOptions=void 0;function Xg(e={},t=[]){const n=f.useRef(e),r=f.useRef(t),[o,s]=f.useState(),[i,a]=f.useState(),l=f.useCallback(()=>{o&&o.reInit(n.current,r.current)},[o]);return f.useEffect(()=>{Gg(n.current,e)||(n.current=e,l())},[e,l]),f.useEffect(()=>{Nz(r.current,t)||(r.current=t,l())},[t,l]),f.useEffect(()=>{if(_z()&&i){mu.globalOptions=Xg.globalOptions;const c=mu(i,n.current,r.current);return s(c),()=>c.destroy()}else s(void 0)},[i,s]),[a,o]}Xg.globalOptions=void 0;const dA=f.createContext(null);function hd(){const e=f.useContext(dA);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const fA=f.forwardRef(({orientation:e="horizontal",opts:t,setApi:n,plugins:r,className:o,children:s,...i},a)=>{const[l,c]=Xg({...t,axis:e==="horizontal"?"x":"y"},r),[d,u]=f.useState(!1),[h,w]=f.useState(!1),y=f.useCallback(v=>{v&&(u(v.canScrollPrev()),w(v.canScrollNext()))},[]),x=f.useCallback(()=>{c==null||c.scrollPrev()},[c]),b=f.useCallback(()=>{c==null||c.scrollNext()},[c]),g=f.useCallback(v=>{v.key==="ArrowLeft"?(v.preventDefault(),x()):v.key==="ArrowRight"&&(v.preventDefault(),b())},[x,b]);return f.useEffect(()=>{!c||!n||n(c)},[c,n]),f.useEffect(()=>{if(c)return y(c),c.on("reInit",y),c.on("select",y),()=>{c==null||c.off("select",y)}},[c,y]),p.jsx(dA.Provider,{value:{carouselRef:l,api:c,opts:t,orientation:e||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:x,scrollNext:b,canScrollPrev:d,canScrollNext:h},children:p.jsx("div",{ref:a,onKeyDownCapture:g,className:ne("relative",o),role:"region","aria-roledescription":"carousel",...i,children:s})})});fA.displayName="Carousel";const hA=f.forwardRef(({className:e,...t},n)=>{const{carouselRef:r,orientation:o}=hd();return p.jsx("div",{ref:r,className:"overflow-hidden",children:p.jsx("div",{ref:n,className:ne("flex",o==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});hA.displayName="CarouselContent";const pA=f.forwardRef(({className:e,...t},n)=>{const{orientation:r}=hd();return p.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:ne("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...t})});pA.displayName="CarouselItem";const mA=f.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},o)=>{const{orientation:s,scrollPrev:i,canScrollPrev:a}=hd();return p.jsxs(Ge,{ref:o,variant:t,size:n,className:ne("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:i,...r,children:[p.jsx(mE,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Previous slide"})]})});mA.displayName="CarouselPrevious";const gA=f.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},o)=>{const{orientation:s,scrollNext:i,canScrollNext:a}=hd();return p.jsxs(Ge,{ref:o,variant:t,size:n,className:ne("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:i,...r,children:[p.jsx(t_,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Next slide"})]})});gA.displayName="CarouselNext";const yA=({imageUrl:e,thumbnailUrl:t,cropData:n,photoMetadata:r,altText:o="Cropped image",className:s,imgClassName:i,enableLoadingState:a=!0,onFullImageLoaded:l})=>{const[c,d]=f.useState({}),[u,h]=f.useState("idle"),[w,y]=f.useState({width:0,height:0}),[x,b]=f.useState(null),[g,v]=f.useState(!1),S=f.useRef(null),E=f.useRef(null),C=f.useCallback(()=>{if(S.current){const M=S.current.offsetWidth,I=S.current.offsetHeight;M>0&&I>0?y({width:M,height:I}):M>0&&y({width:M,height:M})}},[]);f.useEffect(()=>{const M=S.current;if(!M)return;const I=new ResizeObserver(C);return I.observe(M),C(),()=>{I.unobserve(M)}},[C]),f.useEffect(()=>{t&&u!=="loaded"?(b(t),v(!0),u!=="loading"&&h("loading")):e?g||(b(e),u!=="loading"&&u!=="loaded"&&h("loading")):(b(null),v(!1),h("idle"))},[e,t,u,g]),f.useEffect(()=>{if(g&&e&&t){const M=new Image,I=()=>{b(e),v(!1),h("loaded"),l&&l()},O=()=>{m.error("Failed to load full image in background:",e)};return M.onload=I,M.onerror=O,M.src=e,()=>{M.onload=null,M.onerror=null}}},[e,t,g,l]),f.useEffect(()=>{d((()=>{const I=u==="loaded",O={position:"absolute",top:0,left:0,opacity:I?1:0,transition:"opacity 0.3s ease-in-out",pointerEvents:I?"auto":"none",objectFit:"cover",objectPosition:"center center",width:"100%",height:"100%",transform:"none",maxWidth:"none",maxHeight:"none"};if(!n||!(r!=null&&r.width)||!(r!=null&&r.height)||w.width<=0||n.w<=0||n.h<=0||r.width<=0||r.height<=0)return O;const{width:N,height:U}=r,q=w.width/n.w,_=N*q,L=U*q,k=-n.x*q,R=-n.y*q;return isNaN(_)||isNaN(L)||isNaN(k)||isNaN(R)?(m.warn("NaN detected during style calculation",{scale:q,naturalW:N,naturalH:U,cropData:n}),O):{...O,width:`${_}px`,height:`${L}px`,transform:`translate(${k}px, ${R}px)`,objectFit:"initial",objectPosition:"initial",willChange:"transform, opacity",transition:u==="loaded"?"opacity 0.3s ease-in-out, transform 0.3s ease-out":"opacity 0.3s ease-in-out"}})())},[n,r,u,w]);const T=f.useCallback(()=>{E.current&&E.current.getAttribute("src")===x&&x&&(h("loaded"),!g&&l&&l())},[x,g,l]),A=f.useCallback(()=>{if(E.current&&E.current.getAttribute("src")===x&&x){if(m.error("Failed to load image in CroppedImageViewer:",x),g&&e){b(e),v(!1);return}if(!g&&t){m.log("Full image failed to load. Falling back to thumbnail:",t),b(t),v(!0);return}h("error")}},[x,e,t,g]),P=a&&(u==="loading"||u==="error");return p.jsxs("div",{ref:S,"data-testid":"image-container",className:ne("relative w-full h-full overflow-hidden bg-muted",s),children:[P&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 bg-muted/50",children:u==="loading"?p.jsx(Gt,{className:"h-5 w-5 animate-spin text-muted-foreground"}):null}),p.jsx("img",{ref:E,src:x??"",alt:o,style:c,className:ne("block",i,g?"thumbnail-quality":"full-quality"),onLoad:T,onError:A,loading:"lazy"})]})},f4=({photo:e,thumbnailUrl:t})=>{const[n,r]=f.useState(!1),[o,s]=f.useState("idle"),i=f.useRef(null),a=f.useRef(null),{photoUrl:l,crop:c,photoMetadata:d}=e,u=!!(l||t);f.useEffect(()=>{s(u?"loading":"idle"),r(!1)},[l,t,u]);const h=()=>{(o==="loaded"||o==="loading")&&r(b=>!b)},w=f.useCallback(()=>{var b,g;((b=a.current)==null?void 0:b.src)===l&&l?(m.log(`[SinglePhotoDisplay] Image loaded: ${l}`),s("loaded")):m.log(`[SinglePhotoDisplay] Image load ignored (stale or no URL): loaded=${(g=a.current)==null?void 0:g.src}, current=${l}`)},[l]),y=f.useCallback(()=>{var b,g;((b=a.current)==null?void 0:b.src)===l&&l?(m.error("[SinglePhotoDisplay] Failed to load image:",l),s("error")):m.log(`[SinglePhotoDisplay] Image error ignored (stale or no URL): errorSrc=${(g=a.current)==null?void 0:g.src}, current=${l}`)},[l]),x=o==="idle"||o==="loading";return p.jsxs("div",{ref:i,className:"relative w-full h-full aspect-square overflow-hidden bg-muted cursor-pointer",onClick:h,title:o==="loaded"?n?"Show cropped image":"Show full image":"",children:[x&&u&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 bg-muted/50",children:p.jsx(Gt,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),o==="error"&&!(l&&t)&&!x&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 bg-muted",children:p.jsx(l_,{className:"h-8 w-8 text-destructive/50"})}),p.jsx("div",{className:ne("absolute inset-0 z-0 transition-opacity duration-300",n?"opacity-0 pointer-events-none":"opacity-100"),children:p.jsx(yA,{imageUrl:l,thumbnailUrl:t,cropData:c,photoMetadata:d,altText:"Cropped entry photo",className:"w-full h-full",enableLoadingState:!1,onFullImageLoaded:()=>{o!=="loaded"&&s("loaded")}})}),p.jsx("div",{className:ne("absolute inset-0 z-10 flex items-center justify-center transition-opacity duration-300",n?"opacity-100":"opacity-0 pointer-events-none"),children:l&&p.jsx("img",{src:l,alt:"Full entry photo",className:"block max-w-full max-h-full object-contain",loading:"lazy"})}),l&&p.jsx("img",{ref:a,src:l,alt:"",onLoad:w,onError:y,style:{display:"none"},loading:"eager"},l),o==="loaded"&&p.jsx("div",{className:"absolute bottom-2 right-2 z-30 bg-black/50 text-white rounded-full p-1.5 pointer-events-none",children:n?p.jsx(p_,{size:16}):p.jsx(h_,{size:16})})]})},vA=({entry:e})=>{var a;const[t,n]=f.useState(),[r,o]=f.useState(0),[s,i]=f.useState(0);return f.useEffect(()=>{if(t)return i(t.scrollSnapList().length),o(t.selectedScrollSnap()+1),t.on("select",()=>{t&&o(t.selectedScrollSnap()+1)}),()=>{t==null||t.off("select",()=>{})}},[t]),f.useEffect(()=>{var l,c;i(((l=e.photos)==null?void 0:l.length)??0),o(((c=e.photos)==null?void 0:c.length)>0?1:0),t==null||t.scrollTo(0,!0)},[e.id,(a=e.photos)==null?void 0:a.length,t]),f.useEffect(()=>{t==null||t.scrollTo(0,!1)},[t]),!e.photos||e.photos.length===0?null:p.jsx("div",{className:ne("relative w-full max-w-md aspect-square overflow-hidden rounded-md"),children:p.jsxs(fA,{setApi:n,className:"w-full h-full",children:[p.jsx(hA,{className:"h-full",children:e.photos.map((l,c)=>p.jsx(pA,{className:"h-full",children:p.jsx(f4,{photo:l,thumbnailUrl:l.thumbnailUrl})},`${e.id}-${l.photoId}-${c}`))}),s>1&&p.jsxs(p.Fragment,{children:[p.jsx(mA,{className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 h-8 w-8 bg-black/50 text-white hover:bg-black/70 border-none disabled:hidden"}),p.jsx(gA,{className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 h-8 w-8 bg-black/50 text-white hover:bg-black/70 border-none disabled:hidden"}),p.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 z-10 bg-black/60 text-white text-xs px-2 py-0.5 rounded-full pointer-events-none",children:[r," / ",s]})]})]})})},h4=e=>new Date(e+"T00:00:00Z").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"});function p4(){const{currentMonthEntries:e,isLoadingEntries:t,handleEditRequest:n,handleDeleteRequest:r,getCombinedEntryDetails:o,currentYear:s,currentMonth:i,swipeDirection:a,handleCalendarSwipe:l}=nr(),[c,d]=f.useState(new Map),[u,h]=f.useState(new Map),w=f.useRef(null),y=50,x=.3,b={enter:S=>({x:S>0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0}),center:{x:0,opacity:1,position:"relative",width:"100%",transition:{duration:.4,ease:[.4,0,.2,1]}},exit:S=>({x:S<0?"100%":"-100%",opacity:0,position:"absolute",width:"100%",top:0,transition:{duration:.3,ease:[.4,0,.2,1]}})},g=(S,E)=>{const{offset:C,velocity:T}=E;let A=S.target;for(;A&&A!==w.current;){if(A.classList.contains("ignore-list-swipe")){m.log("List swipe ignored, started on carousel.");return}A=A.parentElement}C.x>y||T.x>x&&C.x>10?l(-1):(C.x<-y||T.x<-x&&C.x<-10)&&l(1)},v=f.useMemo(()=>[...e].sort((S,E)=>{const C=new Date(S.date).getTime(),T=new Date(E.date).getTime();if(C!==T)return C-T;const A=S.createdAt instanceof Date?S.createdAt.getTime():Date.parse(S.createdAt),P=E.createdAt instanceof Date?E.createdAt.getTime():Date.parse(E.createdAt);return A-P}),[e]);return f.useEffect(()=>{let S=!0;return d(new Map),h(new Map),e.forEach(E=>{h(C=>new Map(C).set(E.id,!0)),o(E).then(C=>{S&&d(T=>new Map(T).set(E.id,C))}).catch(C=>{m.error(`Error fetching details for entry ${E.id}:`,C)}).finally(()=>{S&&h(C=>new Map(C).set(E.id,!1))})}),()=>{S=!1}},[e,o]),t?p.jsxs("div",{className:"flex items-center justify-center h-[calc(100%-40px)]",children:[" ",p.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"})]}):v.length===0&&!t?p.jsxs("div",{className:"text-center p-10 text-muted-foreground h-[calc(100%-40px)] flex items-center justify-center",children:[" ","No entries found for this month."]}):p.jsxs(sA,{className:"h-full",children:[" ",p.jsxs("div",{ref:w,className:"relative overflow-hidden h-full",children:[" ",p.jsx(Vg,{initial:!1,custom:a,mode:"wait",children:p.jsx(cd.div,{custom:a,variants:b,initial:"enter",animate:"center",exit:"exit",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.15,onDragEnd:g,className:"space-y-4 p-1 pr-1 h-full touch-pan-y",style:{willChange:"transform"},children:v.map(S=>{const C=c.get(S.id)||{...S,photos:(S.photos||[]).map(T=>({...T,photoUrl:void 0,photoMetadata:void 0,photoFilename:void 0}))};return p.jsxs(Um,{className:"overflow-hidden bg-card shadow-sm",children:[p.jsx("div",{className:"flex justify-center w-full border-b dark:border-neutral-700 ignore-list-swipe",onPointerDown:T=>T.stopPropagation(),onTouchStart:T=>T.stopPropagation(),children:p.jsx(vA,{entry:C})}),p.jsxs(Vm,{className:"p-3",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-foreground flex-shrink-0 pr-2",children:h4(S.date)}),p.jsxs(sg,{children:[p.jsx(ig,{asChild:!0,children:p.jsx(Ge,{variant:"ghost",size:"icon",className:"h-7 w-7 flex-shrink-0 text-muted-foreground hover:text-foreground",onClick:T=>T.stopPropagation(),"aria-label":"Entry options",children:p.jsx(wE,{className:"h-4 w-4"})})}),p.jsxs(nd,{align:"end",children:[p.jsxs(ss,{onClick:T=>{T.stopPropagation(),n(S.id)},children:[p.jsx(xE,{className:"mr-2 h-4 w-4"})," Edit"]}),p.jsxs(ss,{onClick:T=>{T.stopPropagation(),r(S.id)},className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[p.jsx(Am,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),p.jsx(aA,{text:S.content,linesToShow:4})]})]},S.id)})},`${s}-${i}-list`)})]})]})}var Zg="Dialog",[wA,xA]=pn(Zg),[m4,rr]=wA(Zg),SA=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,a=f.useRef(null),l=f.useRef(null),[c=!1,d]=wr({prop:r,defaultProp:o,onChange:s});return p.jsx(m4,{scope:t,triggerRef:a,contentRef:l,contentId:Xo(),titleId:Xo(),descriptionId:Xo(),open:c,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(u=>!u),[d]),modal:i,children:n})};SA.displayName=Zg;var bA="DialogTrigger",EA=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(bA,n),s=Ie(t,o.triggerRef);return p.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ty(o.open),...r,ref:s,onClick:re(e.onClick,o.onOpenToggle)})});EA.displayName=bA;var Jg="DialogPortal",[g4,CA]=wA(Jg,{forceMount:void 0}),TA=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=rr(Jg,t);return p.jsx(g4,{scope:t,forceMount:n,children:f.Children.map(r,i=>p.jsx(mn,{present:n||s.open,children:p.jsx(ju,{asChild:!0,container:o,children:i})}))})};TA.displayName=Jg;var gu="DialogOverlay",DA=f.forwardRef((e,t)=>{const n=CA(gu,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=rr(gu,e.__scopeDialog);return s.modal?p.jsx(mn,{present:r||s.open,children:p.jsx(v4,{...o,ref:t})}):null});DA.displayName=gu;var y4=vi("DialogOverlay.RemoveScroll"),v4=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(gu,n);return p.jsx(Qm,{as:y4,allowPinchZoom:!0,shards:[o.contentRef],children:p.jsx(Se.div,{"data-state":ty(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),as="DialogContent",AA=f.forwardRef((e,t)=>{const n=CA(as,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=rr(as,e.__scopeDialog);return p.jsx(mn,{present:r||s.open,children:s.modal?p.jsx(w4,{...o,ref:t}):p.jsx(x4,{...o,ref:t})})});AA.displayName=as;var w4=f.forwardRef((e,t)=>{const n=rr(as,e.__scopeDialog),r=f.useRef(null),o=Ie(t,n.contentRef,r);return f.useEffect(()=>{const s=r.current;if(s)return d1(s)},[]),p.jsx(PA,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:re(e.onFocusOutside,s=>s.preventDefault())})}),x4=f.forwardRef((e,t)=>{const n=rr(as,e.__scopeDialog),r=f.useRef(!1),o=f.useRef(!1);return p.jsx(PA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),PA=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=e,a=rr(as,n),l=f.useRef(null),c=Ie(t,l);return l1(),p.jsxs(p.Fragment,{children:[p.jsx(Ym,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:p.jsx(il,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":ty(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(b4,{titleId:a.titleId}),p.jsx(C4,{contentRef:l,descriptionId:a.descriptionId})]})]})}),ey="DialogTitle",kA=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(ey,n);return p.jsx(Se.h2,{id:o.titleId,...r,ref:t})});kA.displayName=ey;var MA="DialogDescription",RA=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(MA,n);return p.jsx(Se.p,{id:o.descriptionId,...r,ref:t})});RA.displayName=MA;var IA="DialogClose",_A=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=rr(IA,n);return p.jsx(Se.button,{type:"button",...r,ref:t,onClick:re(e.onClick,()=>o.onOpenChange(!1))})});_A.displayName=IA;function ty(e){return e?"open":"closed"}var NA="DialogTitleWarning",[S4,LA]=uI(NA,{contentName:as,titleName:ey,docsSlug:"dialog"}),b4=({titleId:e})=>{const t=LA(NA),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},E4="DialogDescriptionWarning",C4=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${LA(E4).contentName}}.`;return f.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},FA=SA,T4=EA,OA=TA,ny=DA,ry=AA,oy=kA,sy=RA,iy=_A;const jA=FA,D4=OA,$A=f.forwardRef(({className:e,...t},n)=>p.jsx(ny,{ref:n,className:ne("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));$A.displayName=ny.displayName;const ay=f.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(D4,{children:[p.jsx($A,{}),p.jsxs(ry,{ref:r,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,p.jsxs(iy,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(Bu,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ay.displayName=ry.displayName;const ly=({className:e,...t})=>p.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ly.displayName="DialogHeader";const cy=f.forwardRef(({className:e,...t},n)=>p.jsx(oy,{ref:n,className:ne("text-lg font-semibold leading-none tracking-tight",e),...t}));cy.displayName=oy.displayName;const UA=f.forwardRef(({className:e,...t},n)=>p.jsx(sy,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));UA.displayName=sy.displayName;function VA({className:e,...t}){return p.jsx("div",{className:ne("animate-pulse rounded-md bg-muted",e),...t})}const Z0=e=>({...e,photos:(e.photos||[]).map(t=>({...t,photoUrl:void 0,photoMetadata:void 0,photoFilename:void 0}))});function A4(){const{isViewEntryModalOpen:e,closeViewModal:t,selectedBasicEntriesForModal:n,viewEntryModalDate:r,handleEditRequest:o,handleDeleteRequest:s,getCombinedEntryDetails:i}=nr(),[,a]=xm(),[l,c]=f.useState(new Map),[d,u]=f.useState(!1),[h,w]=f.useState(new Set),y=f.useRef(!0),[x,b]=f.useState([]),g=f.useMemo(()=>[...n].sort((S,E)=>{const C=S.createdAt instanceof Date?S.createdAt.getTime():Date.parse(S.createdAt),T=E.createdAt instanceof Date?E.createdAt.getTime():Date.parse(E.createdAt);return C-T}),[n]);f.useEffect(()=>{if(y.current=!0,e&&g.length>0){b(g),u(!0),c(new Map),w(new Set);const S=g.map(E=>i(E).then(C=>{y.current&&c(T=>new Map(T).set(E.id,C))}).catch(C=>{m.error(`Error fetching details for entry ${E.id} in modal:`,C),y.current&&(w(T=>new Set(T).add(E.id)),c(T=>new Map(T).set(E.id,Z0(E))))}));Promise.allSettled(S).finally(()=>{y.current&&u(!1)})}else e||(c(new Map),u(!1),w(new Set));return()=>{y.current=!1}},[e,g,i]);const v=()=>{t(),a("/entry/new")};return p.jsx(jA,{open:e,onOpenChange:t,children:p.jsxs(ay,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[p.jsx(ly,{className:"flex-shrink-0 border-b pb-3",children:p.jsxs(cy,{children:["Entries for ",r.toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"})]})}),p.jsx("div",{className:"py-4 overflow-y-auto flex-grow custom-scrollbar pr-2 -mr-2",children:g.length===0&&!d&&x.length===0?p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-muted-foreground mb-4",children:"No entries for this date"}),p.jsx(Ge,{onClick:v,children:"Create New Entry"})]}):p.jsx("div",{className:"space-y-6",children:(g.length>0?g:x).map((S,E)=>{const C=l.get(S.id),T=d&&!C,A=h.has(S.id),P=C||Z0(S);return p.jsxs("div",{className:"border dark:border-neutral-700 rounded-lg overflow-hidden shadow-sm bg-card",children:[p.jsx("div",{className:"flex justify-center w-full border-b dark:border-neutral-700 ignore-list-swipe",children:T?p.jsx(VA,{className:"aspect-square w-full max-w-md bg-muted"}):p.jsx(vA,{entry:P})}),p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("p",{className:"text-sm text-muted-foreground",children:[(S.createdAt instanceof Date?S.createdAt:new Date(S.createdAt)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),S.createdAt!==S.updatedAt&&p.jsx("span",{className:"italic text-xs",children:" (edited)"})]}),!d&&p.jsxs(sg,{children:[p.jsx(ig,{asChild:!0,children:p.jsx(Ge,{variant:"ghost",className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:p.jsx(wE,{className:"h-4 w-4"})})}),p.jsxs(nd,{align:"end",children:[p.jsxs(ss,{onClick:()=>o(S.id),children:[p.jsx(xE,{className:"mr-2 h-4 w-4"})," Edit"]}),p.jsxs(ss,{onClick:()=>s(S.id),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[p.jsx(Am,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]}),p.jsx(aA,{text:S.content,linesToShow:4}),A&&p.jsx("p",{className:"text-xs text-destructive mt-1",children:"Error loading photo details for this entry."})]})]},S.id+"-"+E)})})}),!d&&(g.length>0||x.length>0)&&p.jsx("div",{className:"flex justify-end mt-4 border-t dark:border-neutral-700 pt-4 flex-shrink-0",children:p.jsx(Ge,{onClick:v,children:"Add Another Entry"})})]})})}var BA="AlertDialog",[P4,L3]=pn(BA,[xA]),zr=xA(),zA=e=>{const{__scopeAlertDialog:t,...n}=e,r=zr(t);return p.jsx(FA,{...r,...n,modal:!0})};zA.displayName=BA;var k4="AlertDialogTrigger",M4=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=zr(n);return p.jsx(T4,{...o,...r,ref:t})});M4.displayName=k4;var R4="AlertDialogPortal",qA=e=>{const{__scopeAlertDialog:t,...n}=e,r=zr(t);return p.jsx(OA,{...r,...n})};qA.displayName=R4;var I4="AlertDialogOverlay",WA=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=zr(n);return p.jsx(ny,{...o,...r,ref:t})});WA.displayName=I4;var ei="AlertDialogContent",[_4,N4]=P4(ei),L4=zb("AlertDialogContent"),HA=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,s=zr(n),i=f.useRef(null),a=Ie(t,i),l=f.useRef(null);return p.jsx(S4,{contentName:ei,titleName:GA,docsSlug:"alert-dialog",children:p.jsx(_4,{scope:n,cancelRef:l,children:p.jsxs(ry,{role:"alertdialog",...s,...o,ref:a,onOpenAutoFocus:re(o.onOpenAutoFocus,c=>{var d;c.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[p.jsx(L4,{children:r}),p.jsx(O4,{contentRef:i})]})})})});HA.displayName=ei;var GA="AlertDialogTitle",KA=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=zr(n);return p.jsx(oy,{...o,...r,ref:t})});KA.displayName=GA;var YA="AlertDialogDescription",QA=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=zr(n);return p.jsx(sy,{...o,...r,ref:t})});QA.displayName=YA;var F4="AlertDialogAction",XA=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=zr(n);return p.jsx(iy,{...o,...r,ref:t})});XA.displayName=F4;var ZA="AlertDialogCancel",JA=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=N4(ZA,n),s=zr(n),i=Ie(t,o);return p.jsx(iy,{...s,...r,ref:i})});JA.displayName=ZA;var O4=({contentRef:e})=>{const t=`\`${ei}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ei}\` by passing a \`${YA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ei}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},j4=zA,$4=qA,eP=WA,tP=HA,nP=XA,rP=JA,oP=KA,sP=QA;const iP=j4,U4=$4,aP=f.forwardRef(({className:e,...t},n)=>p.jsx(eP,{className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));aP.displayName=eP.displayName;const uy=f.forwardRef(({className:e,...t},n)=>p.jsxs(U4,{children:[p.jsx(aP,{}),p.jsx(tP,{ref:n,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));uy.displayName=tP.displayName;const dy=({className:e,...t})=>p.jsx("div",{className:ne("flex flex-col space-y-2 text-center sm:text-left",e),...t});dy.displayName="AlertDialogHeader";const fy=({className:e,...t})=>p.jsx("div",{className:ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});fy.displayName="AlertDialogFooter";const hy=f.forwardRef(({className:e,...t},n)=>p.jsx(oP,{ref:n,className:ne("text-lg font-semibold",e),...t}));hy.displayName=oP.displayName;const py=f.forwardRef(({className:e,...t},n)=>p.jsx(sP,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));py.displayName=sP.displayName;const my=f.forwardRef(({className:e,...t},n)=>p.jsx(nP,{ref:n,className:ne(Bm(),e),...t}));my.displayName=nP.displayName;const gy=f.forwardRef(({className:e,...t},n)=>p.jsx(rP,{ref:n,className:ne(Bm({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));gy.displayName=rP.displayName;function V4(){const{isDeleteDialogOpen:e,closeDeleteDialog:t,handleDeleteEntry:n,isSaving:r}=nr(),o=async()=>{await n()};return p.jsx(iP,{open:e,onOpenChange:t,children:p.jsxs(uy,{children:[p.jsxs(dy,{children:[p.jsx(hy,{children:"Delete Entry"}),p.jsx(py,{children:"Are you sure you want to delete this entry? This action cannot be undone."})]}),p.jsxs(fy,{children:[p.jsx(gy,{disabled:r,children:"Cancel"}),p.jsx(my,{onClick:s=>{s.preventDefault(),o()},disabled:r,className:"bg-red-500 hover:bg-red-600 focus:ring-red-500",children:r?"Deleting...":"Delete"})]})]})})}var B4="Label",lP=f.forwardRef((e,t)=>p.jsx(Se.label,{...e,ref:t,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=e.onMouseDown)==null||o.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));lP.displayName=B4;var cP=lP;const z4=al("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pd=f.forwardRef(({className:e,...t},n)=>p.jsx(cP,{ref:n,className:ne(z4(),e),...t}));pd.displayName=cP.displayName;function q4({onFilesSelect:e,disabled:t=!1,className:n,children:r,maxFiles:o=10,currentFileCount:s=0}){const i=f.useRef(null),{toast:a}=sl(),l=f.useCallback(async y=>{if(!y||y.length===0)return;const x=Array.from(y),b=[],g=[];let v=!0;if(s+x.length>o){a({title:"Too many files",description:`You can only add ${o-s} more photo(s).`,variant:"destructive"}),i.current&&(i.current.value="");return}for(const S of x){if(!S.type.startsWith("image/")){a({title:"Invalid File Type",description:`"${S.name}" is not a supported image file.`,variant:"destructive"}),v=!1;continue}try{const E=URL.createObjectURL(S);b.push(S),g.push(E)}catch(E){m.error("Error creating object URL:",E),a({title:"Processing Error",description:`Could not process file: ${S.name}`,variant:"destructive"}),v=!1,g.forEach(URL.revokeObjectURL),i.current&&(i.current.value="");return}}b.length>0?e(b,g):!v&&g.length>0&&g.forEach(URL.revokeObjectURL),v&&i.current&&(i.current.value="")},[e,a,o,s]),c=f.useCallback(y=>{t||l(y.target.files)},[t,l]),d=f.useCallback(y=>{t||(y.preventDefault(),y.stopPropagation(),l(y.dataTransfer.files))},[t,l]),u=y=>{t||(y.preventDefault(),y.stopPropagation())},h=f.useCallback(()=>{var y;t||(y=i.current)==null||y.click()},[t]),w=r?At.isValidElement(r)?At.cloneElement(r,{onClick:h}):p.jsx("div",{onClick:h,children:r}):p.jsxs("div",{className:ne("mt-2 flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-6 transition-colors",t?"cursor-not-allowed bg-muted/50 border-gray-300 dark:border-gray-700":"border-gray-300 dark:border-gray-700 cursor-pointer hover:border-primary hover:bg-accent",n),onDragOver:u,onDrop:d,onClick:h,children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`mb-2 h-10 w-10 ${t?"text-gray-300 dark:text-gray-600":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),p.jsxs("p",{className:`mb-2 text-center text-sm ${t?"text-gray-400 dark:text-gray-500":"text-gray-500 dark:text-gray-400"}`,children:[p.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag & drop"]}),p.jsx("p",{className:`text-xs ${t?"text-gray-400 dark:text-gray-500":"text-gray-500 dark:text-gray-400"}`,children:"PNG, JPG (Multiple allowed)"})]});return p.jsxs("div",{className:ne(!r&&"w-full",n),children:[p.jsx("input",{ref:i,type:"file",accept:"image/png, image/jpeg, image/jpg",className:"hidden",onChange:c,disabled:t,multiple:!0}),w]})}const ya=10,zn=e=>e.isNew===!0,uP=e=>e.isNew===!1,W4=e=>{if(!e)return 8;try{const t=window.getComputedStyle(e),n=t.getPropertyValue("gap")||t.getPropertyValue("column-gap")||"8px";return parseInt(n,10)||8}catch{return 8}};function H4({photos:e,setPhotos:t,isBusy:n,isLoadingInitial:r,initialPhotoCount:o,onOpenCropper:s,onRemovePhoto:i,onFilesSelect:a,originalBlobUrlsRef:l,existingPhotoMetaRef:c,processingQueueLength:d,currentQueueIndex:u,isProcessingQueueItem:h}){const w=f.useRef(null),y=f.useRef(null),[x,b]=f.useState(null),[g,v]=f.useState(null),S=f.useRef([]),E=f.useRef(null),C=f.useRef(null);f.useEffect(()=>{S.current=S.current.slice(0,e.length)},[e.length]);const T=()=>{C.current&&(C.current.style.display="none"),v(null)},A=_=>{const L=C.current,k=E.current;if(!L||!k||_<0||_>e.length){T();return}if(_===g&&L.style.display!=="none")return;v(_);const R=W4(k);let F=null,W=!1;if(_===e.length?(F=S.current[e.length-1],W=!0):(F=S.current[_],W=!1),F){const J=F.getBoundingClientRect(),be=F.offsetTop;let se;W?se=F.offsetLeft+J.width+R/2:se=F.offsetLeft-R/2,L.style.display="block",L.style.top=`${be}px`,L.style.left=`${se}px`,L.style.height=`${J.height}px`}else T()},P=(_,L)=>{if(w.current=L,b(L),T(),_.dataTransfer)try{_.dataTransfer.effectAllowed="move"}catch{}},M=(_,L)=>{if(_.preventDefault(),w.current===null||w.current===L){y.current=null,T();return}y.current=L;const k=S.current[L];if(k){const R=k.getBoundingClientRect(),F=R.left+R.width/2,J=_.clientX<F?L:L+1;A(J)}},I=_=>{E.current&&!E.current.contains(_.relatedTarget)&&(y.current=null,T())},O=()=>{let _=g;w.current!==null&&_!==null&&_>w.current&&_--,w.current!==null&&_!==null&&w.current!==_&&t(L=>{const k=[...L],R=k.splice(w.current,1)[0];return k.splice(_,0,R),k}),w.current=null,y.current=null,b(null),T()},N=(_,L)=>{w.current=L,b(L),T()},U=_=>{if(w.current===null)return;_.cancelable&&_.preventDefault();const L=_.touches[0],k=document.elementFromPoint(L.clientX,L.clientY),R=k==null?void 0:k.closest('[draggable="true"]');if(R){const F=S.current.indexOf(R);if(F!==-1&&F!==w.current){y.current=F;const W=R.getBoundingClientRect(),J=W.left+W.width/2,se=L.clientX<J?F:F+1;A(se);return}}y.current=null,T()},j=()=>{let _=g;w.current!==null&&_!==null&&_>w.current&&_--,w.current!==null&&_!==null&&w.current!==_&&t(L=>{const k=[...L],R=k.splice(w.current,1)[0];return k.splice(_,0,R),k}),w.current=null,y.current=null,b(null),T()},q=!n&&e.length>1;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs(pd,{children:["Photos (",e.length,"/",ya,")"," ",q&&p.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(Drag to reorder)"})]}),e.length===0&&!r&&d===0&&p.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Add photos below."}),r&&p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:[...Array(o||2)].map((_,L)=>p.jsx(VA,{className:"h-16 w-16 rounded aspect-square"},L))}),p.jsxs("div",{ref:E,className:"relative grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",onDragLeave:I,onTouchStart:_=>{},onTouchMove:U,onTouchEnd:j,onTouchCancel:j,children:[p.jsx("div",{ref:C,className:"drop-indicator"}),e.map((_,L)=>{var be;const k=zn(_)?_.localId:_.photoId,R=l.current.get(k),F=_.crop;let W=null;zn(_)?_.originalDimensions&&(W={filename:_.file.name,mimeType:_.file.type,width:_.originalDimensions.width,height:_.originalDimensions.height,exifDate:(be=_.exifData)==null?void 0:be.exifDate}):uP(_)&&(W=c.current.get(_.photoId)??null);const J=!!R;return p.jsxs("div",{ref:se=>S.current[L]=se,draggable:q,onDragStart:se=>q&&P(se,L),onDragOver:se=>q&&M(se,L),onDragEnd:q?O:void 0,onTouchStart:se=>q&&N(se,L),className:ne("relative group aspect-square border rounded bg-muted overflow-hidden touch-manipulation",q?"cursor-grab active:cursor-grabbing":"cursor-default",x===L?"opacity-50 scale-95 shadow-lg z-10":"opacity-100 z-0","transition-all duration-150 ease-in-out"),children:[p.jsx(yA,{imageUrl:R,thumbnailUrl:R,cropData:F,photoMetadata:W,altText:`Photo ${L+1} thumbnail`,className:"rounded",enableLoadingState:!!R&&R.startsWith("blob:")}),p.jsxs("div",{className:ne("absolute inset-0 bg-black/40 flex items-center justify-center space-x-1 rounded transition-opacity duration-150","opacity-100 hover:opacity-80",n&&"opacity-0 pointer-events-none"),children:[p.jsx(Ge,{type:"button",variant:"outline",size:"icon",className:"h-6 w-6 bg-white/80 hover:bg-white",title:"Edit Crop",onClick:se=>{se.stopPropagation(),!n&&J?s(L):J||m.warn(`Cannot open cropper: original URL missing for ${k}`)},disabled:n||!J,children:p.jsx(s_,{className:"h-3 w-3"})}),p.jsx(Ge,{type:"button",variant:"destructive",size:"icon",className:"h-6 w-6",title:"Remove Photo",onClick:se=>{se.stopPropagation(),n||i(L)},disabled:n,children:p.jsx(Am,{className:"h-3 w-3"})})]}),q&&p.jsx("div",{className:"absolute top-1 left-1 opacity-0 group-hover:opacity-50 transition-opacity cursor-grab p-0.5 bg-black/30 rounded-sm",style:{pointerEvents:"none"},children:p.jsx(a_,{className:"h-3 w-3 text-white"})})]},k+"-"+L)}),e.length<ya&&p.jsx(q4,{onFilesSelect:a,disabled:n,className:"aspect-square h-full w-full p-0 m-0",maxFiles:ya,currentFileCount:e.length,children:p.jsx("button",{type:"button",className:"w-full h-full flex flex-col items-center justify-center border-2 border-dashed border-muted-foreground/50 rounded hover:border-primary hover:bg-accent transition-colors disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:border-muted-foreground/50 disabled:hover:bg-transparent",disabled:n,"aria-label":"Add photo",children:h?p.jsx(Gt,{className:"h-5 w-5 animate-spin text-muted-foreground"}):p.jsxs(p.Fragment,{children:[p.jsx(c_,{className:"h-5 w-5 text-muted-foreground mb-1"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Add"})]})})})]}),u!==null&&u<d&&!n&&p.jsxs("div",{className:"mt-2 text-sm text-muted-foreground flex items-center",children:[p.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"})," Processing photo ",u+1," of"," ",d,"..."]})]})}function G4({date:e,onDateChange:t,showExifWarning:n,initialExifDate:r,onUseExifDate:o,isBusy:s}){return p.jsxs("div",{className:"space-y-2",children:[p.jsx(pd,{htmlFor:"date",children:"Date"}),p.jsx("input",{id:"date",type:"date",className:"input-basic",value:e.toISOString().split("T")[0],onChange:t,disabled:s}),n&&r&&p.jsxs("div",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400 flex items-center space-x-1",children:[p.jsx(SE,{className:"h-3 w-3 flex-shrink-0"}),p.jsxs("span",{children:["First photo date (",r,") differs."]}),p.jsx("button",{type:"button",onClick:o,className:"underline cursor-pointer text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:"Use photo date"})]})]})}const dP=f.forwardRef(({className:e,...t},n)=>p.jsx("textarea",{className:ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));dP.displayName="Textarea";function K4({content:e,setContent:t,isBusy:n,onKeyDown:r,textAreaRef:o}){return p.jsxs("div",{className:"space-y-2",children:[p.jsx(pd,{htmlFor:"content",children:"Content"}),p.jsx(dP,{ref:o,id:"content",placeholder:"Write thoughts...",className:"min-h-[120px]",value:e,onChange:s=>t(s.target.value),disabled:n,onKeyDown:r})]})}function Y4({isBusy:e,isSaving:t,isEditMode:n,canSave:r,onCancel:o,onSave:s}){return p.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 border-t pt-4 mt-4",children:[p.jsx(Ge,{variant:"outline",onClick:o,disabled:e,children:"Cancel"}),p.jsx(Ge,{onClick:s,disabled:e||t||!r,children:t?p.jsxs(p.Fragment,{children:[p.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):n?"Update Entry":"Save Entry"})]})}function Q4(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}function X4(e=2e3,t=new Date().getFullYear()+5){const n=[];for(let r=e;r<=t;r++)n.push(r);return n}function Z4(){const{isMonthYearPickerOpen:e,closeMonthYearPicker:t,handleMonthYearSelect:n,currentMonth:r,currentYear:o}=nr(),[s,i]=f.useState(r),[a,l]=f.useState(o);f.useEffect(()=>{e&&(i(r),l(o))},[e,r,o]);const c=Q4(),d=X4(2e3,new Date().getFullYear()+5),u=()=>{n(s,a)};return p.jsx(jA,{open:e,onOpenChange:t,children:p.jsxs(ay,{className:"sm:max-w-md",children:[p.jsxs(ly,{children:[p.jsx(cy,{children:"Select Month and Year"}),p.jsx(UA,{children:"Choose the month and year you want to navigate to"})]}),p.jsx("div",{className:"grid gap-4 py-4",children:p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"month-select",className:"text-sm font-medium",children:"Month"}),p.jsx("select",{id:"month-select",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:s,onChange:h=>i(parseInt(h.target.value)),children:c.map((h,w)=>p.jsx("option",{value:w+1,children:h},w))})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"year-select",className:"text-sm font-medium",children:"Year"}),p.jsx("select",{id:"year-select",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:a,onChange:h=>l(parseInt(h.target.value)),children:d.map(h=>p.jsx("option",{value:h,children:h},h))})]})]})}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx(Ge,{variant:"outline",onClick:t,children:"Cancel"}),p.jsx(Ge,{onClick:u,children:"Apply"})]})]})})}function J4(){const{isAuthenticated:e,isLoadingAuth:t,isVerifyingInBackground:n,authError:r,handleDropboxAuthRedirect:o,monthViewType:s,isLoadingEntries:i,isLoadingImagesMeta:a,isSaving:l,operationError:c,clearOperationError:d,isOnline:u}=nr();Gm(),xm();const h=l,w=l?"Saving...":"",y={enter:{opacity:0,transition:{duration:.15}},center:{opacity:1,transition:{duration:.2,delay:.1}},exit:{opacity:0,transition:{duration:.15}}};if(t)return p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"})});const x=u&&!e&&!t&&!n,b=x?"pt-24":u?"pt-16":"pt-20";return p.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex flex-col",children:[p.jsx(G2,{}),h&&p.jsxs("div",{className:ne("fixed left-1/2 transform -translate-x-1/2 z-20 bg-background/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg border flex items-center text-sm text-muted-foreground",x?"top-24":u?"top-16":"top-20","mt-2"),children:[p.jsx(Gt,{className:"h-4 w-4 animate-spin mr-2"}),p.jsx("span",{children:w})]}),c&&!h&&p.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded flex justify-between items-center max-w-sm shadow-md z-50",children:[p.jsxs("span",{children:["Error: ",c.message]}),p.jsx("button",{onClick:d,className:"ml-3 font-bold","aria-label":"Close",children:p.jsx(Bu,{className:"h-4 w-4"})})]}),p.jsxs("main",{className:ne("container mx-auto px-4 pb-4 flex-grow flex flex-col overflow-hidden",b),children:[p.jsx(yz,{}),p.jsx("div",{className:"mx-auto max-w-3xl w-full flex-grow flex flex-col overflow-hidden",children:p.jsx("div",{className:"flex-grow overflow-hidden relative",children:p.jsx(Vg,{initial:!1,mode:"wait",children:p.jsx(cd.div,{variants:y,initial:"enter",animate:"center",exit:"exit",className:"absolute inset-0 view-container",children:p.jsx("div",{className:"h-full",children:s==="calendar"?p.jsx(gz,{}):p.jsx(p4,{})})},s)})})})]}),p.jsx(Z4,{}),p.jsx(A4,{}),p.jsx(V4,{})]})}var fP=["PageUp","PageDown"],hP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ni="Slider",[xp,e3,t3]=Ou(Ni),[mP,F3]=pn(Ni,[t3]),[n3,md]=mP(Ni),gP=f.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:s=1,orientation:i="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:u=()=>{},onValueCommit:h=()=>{},inverted:w=!1,form:y,...x}=e,b=f.useRef(new Set),g=f.useRef(0),S=i==="horizontal"?r3:o3,[E=[],C]=wr({prop:d,defaultProp:c,onChange:O=>{var U;(U=[...b.current][g.current])==null||U.focus(),u(O)}}),T=f.useRef(E);function A(O){const N=c3(E,O);I(O,N)}function P(O){I(O,g.current)}function M(){const O=T.current[g.current];E[g.current]!==O&&h(E)}function I(O,N,{commit:U}={commit:!1}){const j=h3(s),q=p3(Math.round((O-r)/s)*s+r,j),_=Bg(q,[r,o]);C((L=[])=>{const k=a3(L,_,N);if(f3(k,l*s)){g.current=k.indexOf(_);const R=String(k)!==String(L);return R&&U&&h(k),R?k:L}else return L})}return p.jsx(n3,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:o,valueIndexToChangeRef:g,thumbs:b.current,values:E,orientation:i,form:y,children:p.jsx(xp.Provider,{scope:e.__scopeSlider,children:p.jsx(xp.Slot,{scope:e.__scopeSlider,children:p.jsx(S,{"aria-disabled":a,"data-disabled":a?"":void 0,...x,ref:t,onPointerDown:re(x.onPointerDown,()=>{a||(T.current=E)}),min:r,max:o,inverted:w,onSlideStart:a?void 0:A,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&I(r,0,{commit:!0}),onEndKeyDown:()=>!a&&I(o,E.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:N})=>{if(!a){const q=fP.includes(O.key)||O.shiftKey&&hP.includes(O.key)?10:1,_=g.current,L=E[_],k=s*q*N;I(L+k,_,{commit:!0})}}})})})})});gP.displayName=Ni;var[yP,vP]=mP(Ni,{startEdge:"left",endEdge:"right",size:"width",direction:1}),r3=f.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=e,[u,h]=f.useState(null),w=Ie(t,S=>h(S)),y=f.useRef(void 0),x=dl(o),b=x==="ltr",g=b&&!s||!b&&s;function v(S){const E=y.current||u.getBoundingClientRect(),C=[0,E.width],A=yy(C,g?[n,r]:[r,n]);return y.current=E,A(S-E.left)}return p.jsx(yP,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:p.jsx(wP,{dir:x,"data-orientation":"horizontal",...d,ref:w,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const E=v(S.clientX);i==null||i(E)},onSlideMove:S=>{const E=v(S.clientX);a==null||a(E)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:S=>{const C=pP[g?"from-left":"from-right"].includes(S.key);c==null||c({event:S,direction:C?-1:1})}})})}),o3=f.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onStepKeyDown:l,...c}=e,d=f.useRef(null),u=Ie(t,d),h=f.useRef(void 0),w=!o;function y(x){const b=h.current||d.current.getBoundingClientRect(),g=[0,b.height],S=yy(g,w?[r,n]:[n,r]);return h.current=b,S(x-b.top)}return p.jsx(yP,{scope:e.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1,children:p.jsx(wP,{"data-orientation":"vertical",...c,ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const b=y(x.clientY);s==null||s(b)},onSlideMove:x=>{const b=y(x.clientY);i==null||i(b)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:x=>{const g=pP[w?"from-bottom":"from-top"].includes(x.key);l==null||l({event:x,direction:g?-1:1})}})})}),wP=f.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:a,onStepKeyDown:l,...c}=e,d=md(Ni,n);return p.jsx(Se.span,{...c,ref:t,onKeyDown:re(e.onKeyDown,u=>{u.key==="Home"?(i(u),u.preventDefault()):u.key==="End"?(a(u),u.preventDefault()):fP.concat(hP).includes(u.key)&&(l(u),u.preventDefault())}),onPointerDown:re(e.onPointerDown,u=>{const h=u.target;h.setPointerCapture(u.pointerId),u.preventDefault(),d.thumbs.has(h)?h.focus():r(u)}),onPointerMove:re(e.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&o(u)}),onPointerUp:re(e.onPointerUp,u=>{const h=u.target;h.hasPointerCapture(u.pointerId)&&(h.releasePointerCapture(u.pointerId),s(u))})})}),xP="SliderTrack",SP=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=md(xP,n);return p.jsx(Se.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});SP.displayName=xP;var Sp="SliderRange",bP=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=md(Sp,n),s=vP(Sp,n),i=f.useRef(null),a=Ie(t,i),l=o.values.length,c=o.values.map(h=>CP(h,o.min,o.max)),d=l>1?Math.min(...c):0,u=100-Math.max(...c);return p.jsx(Se.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:a,style:{...e.style,[s.startEdge]:d+"%",[s.endEdge]:u+"%"}})});bP.displayName=Sp;var bp="SliderThumb",EP=f.forwardRef((e,t)=>{const n=e3(e.__scopeSlider),[r,o]=f.useState(null),s=Ie(t,a=>o(a)),i=f.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return p.jsx(s3,{...e,ref:s,index:i})}),s3=f.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...s}=e,i=md(bp,n),a=vP(bp,n),[l,c]=f.useState(null),d=Ie(t,v=>c(v)),u=l?i.form||!!l.closest("form"):!0,h=Fm(l),w=i.values[r],y=w===void 0?0:CP(w,i.min,i.max),x=l3(r,i.values.length),b=h==null?void 0:h[a.size],g=b?u3(b,y,a.direction):0;return f.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${y}% + ${g}px)`},children:[p.jsx(xp.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(Se.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":i.min,"aria-valuenow":w,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...s,ref:d,style:w===void 0?{display:"none"}:e.style,onFocus:re(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),u&&p.jsx(i3,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:w},r)]})});EP.displayName=bp;var i3=e=>{const{value:t,...n}=e,r=f.useRef(null),o=hT(t);return f.useEffect(()=>{const s=r.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==t&&l){const c=new Event("input",{bubbles:!0});l.call(s,t),s.dispatchEvent(c)}},[o,t]),p.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function a3(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,s)=>o-s)}function CP(e,t,n){const s=100/(n-t)*(e-t);return Bg(s,[0,100])}function l3(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function c3(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function u3(e,t,n){const r=e/2,s=yy([0,50],[0,r]);return(r-s(t)*n)*n}function d3(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function f3(e,t){if(t>0){const n=d3(e);return Math.min(...n)>=t}return!0}function yy(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function h3(e){return(String(e).split(".")[1]||"").length}function p3(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var TP=gP,m3=SP,g3=bP,y3=EP;const DP=f.forwardRef(({className:e,...t},n)=>p.jsxs(TP,{ref:n,className:ne("relative flex w-full touch-none select-none items-center",e),...t,children:[p.jsx(m3,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:p.jsx(g3,{className:"absolute h-full bg-primary"})}),p.jsx(y3,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));DP.displayName=TP.displayName;const et=250,J0=200;function v3({imageUrl:e,onCropComplete:t,onCancel:n,initialCropData:r,initialImageDimensions:o}){const s=f.useRef(null),i=f.useRef(null),a=f.useRef(null),l=f.useRef(!1),c=f.useRef(!1),d=f.useRef(null),u=f.useRef(null),[h,w]=f.useState({x:0,y:0,scale:1}),[y,x]=f.useState(o||{width:0,height:0}),[b,g]=f.useState(!1),[v,S]=f.useState(!1),[E,C]=f.useState(!1),[T,A]=f.useState(.1),[P,M]=f.useState(5),[I,O]=f.useState(!1),[N,U]=f.useState({x:0,y:0,pinchDistance:void 0,imageX:0,imageY:0}),[j,q]=f.useState(null),[_,L]=f.useState(null),[k,R]=f.useState(null),[F,W]=f.useState(null),J=b&&v,be=e!==u.current&&!J,se=$=>$&&typeof $=="object"&&"x"in $&&"y"in $&&"w"in $&&"h"in $&&typeof $.x=="number"&&typeof $.y=="number"&&typeof $.w=="number"&&typeof $.h=="number"&&$.w>0&&$.h>0&&$.w===$.h,Ye=f.useCallback(($,z)=>$<=0||z<=0||et<=0?.1:Math.max(et/$,et/z),[]),te=f.useCallback(($,z)=>$<=0||z<=0||et<=0||J0<=0?5:Math.max(Math.max(et/$,et/z),et/J0),[]),ge=f.useCallback(($,z,B)=>{const H=s.current;if(!b||y.width<=0||y.height<=0)return{x:$,y:z};const ce=(H==null?void 0:H.clientWidth)??0,ye=(H==null?void 0:H.clientHeight)??0;if(ce<=0||ye<=0)return{x:$,y:z};const fe=y.width*B,Re=y.height*B,Be=(ce-et)/2,Ze=(ye-et)/2,Qe=Be,He=Be+et-fe,Dt=Ze,Xt=Ze+et-Re,Ut=fe<et?Be+(et-fe)/2:Math.min(Qe,Math.max(He,$)),bt=Re<et?Ze+(et-Re)/2:Math.min(Dt,Math.max(Xt,z));return{x:Ut,y:bt}},[b,y]),ie=f.useCallback(($,z)=>{if(!b||!l.current||v||y.width<=0||y.height<=0)return;const B=y.width,H=y.height,ce=Ye(B,H),ye=te(B,H);A(ce),M(ye);let fe,Re,Be;if(se(r)){fe=et/r.w,fe=Math.max(ce,Math.min(ye,fe));const He=($-et)/2,Dt=(z-et)/2;Re=He-r.x*fe,Be=Dt-r.y*fe}else fe=Math.max(et/B,et/H),fe=Math.max(ce,fe),Re=($-B*fe)/2,Be=(z-H*fe)/2;const Qe={...ge(Re,Be,fe),scale:fe};w(Qe),S(!0),c.current=!0},[b,v,y,r,Ye,te,ge]);f.useEffect(()=>(l.current=!0,()=>{l.current=!1,d.current&&d.current.disconnect()}),[]),f.useEffect(()=>{e!==u.current&&(m.log(`[ImprovedImageCropper] Image URL changed: ${u.current||"none"}  ${e}`),g(!1),S(!1),c.current=!1,L(u.current),R(h),W(y),u.current=e,m.log("[ImprovedImageCropper] Reset loader state and stored previous image state"))},[e,h,y]),f.useEffect(()=>{u.current!==e?(u.current&&v?(L(u.current),R(h),W(y)):(L(null),R(null),W(null)),g(!1),S(!1),x(o||{width:0,height:0}),w({x:0,y:0,scale:1}),A(.1),M(5),c.current=!1,C(!1),u.current=e):o&&!v&&(o.width!==y.width||o.height!==y.height)&&x(o)},[e,o]);const ke=f.useCallback(()=>{const $=i.current;if(m.log(`[ImprovedImageCropper] handleImageLoad called for image: ${e}`),!$){m.warn("[ImprovedImageCropper] Image ref is null in handleImageLoad");return}if(!l.current){m.warn("[ImprovedImageCropper] Component unmounted during image load");return}if($.src!==e){m.warn(`[ImprovedImageCropper] Image src mismatch: ${$.src} vs ${e}`);return}const z=$.naturalWidth,B=$.naturalHeight;if(m.log(`[ImprovedImageCropper] Image loaded with dimensions: ${z}${B}`),z<=0||B<=0){m.error(`[ImprovedImageCropper] Image has invalid dimensions on load: ${z}${B}`),g(!1),S(!1);return}(y.width!==z||y.height!==B)&&(m.log(`[ImprovedImageCropper] Updating image dimensions: ${y.width}${y.height}  ${z}${B}`),x({width:z,height:B})),g(!0),m.log("[ImprovedImageCropper] Image successfully loaded and ready")},[e,y]),qe=f.useCallback(()=>{const $=i.current;!$||!l.current||$.src!==e||(m.error(`[Cropper] Image failed to load internally: ${e}`),g(!1),S(!1))},[e]);f.useEffect(()=>{const $=s.current;if($&&b&&!v){const z=ce=>{if(!(!l.current||v))for(const ye of ce){const{width:fe,height:Re}=ye.contentRect||{width:ye.target.clientWidth,height:ye.target.clientHeight};fe>0&&Re>0?ie(fe,Re):m.warn("[Cropper] ResizeObserver triggered with zero dimensions.")}};d.current&&d.current.disconnect(),d.current=new ResizeObserver(z),d.current.observe($);const B=$.clientWidth,H=$.clientHeight;return B>0&&H>0&&ie(B,H),()=>{d.current&&d.current.disconnect(),d.current=null}}else d.current&&(d.current.disconnect(),d.current=null)},[b,v,ie]),f.useEffect(()=>{if(b&&v){const{x:$,y:z,scale:B}=h,H=ge($,z,B);(H.x!==$||H.y!==z)&&w(ce=>({...ce,...H}))}},[h.scale,b,v,ge,h.x,h.y]);const Ce=f.useCallback(($,z,B)=>{!J||!s.current||w(H=>{let ce=H.scale*$;if(ce=Math.max(T,Math.min(P,ce)),ce===H.scale)return H;const ye=(z-H.x)/H.scale,fe=(B-H.y)/H.scale,Re=z-ye*ce,Be=B-fe*ce;return{scale:ce,...ge(Re,Be,ce)}})},[J,T,P,ge]),oe=($,z,B)=>{!J||E||(O(!0),U({x:$,y:z,pinchDistance:B,imageX:h.x,imageY:h.y}),q(B??null))},xe=($,z,B)=>{if(!(!I||!J||!s.current)){if(B!==void 0&&j!==null){const H=B/j,ce=s.current.getBoundingClientRect(),ye=N.x-ce.left,fe=N.y-ce.top;Ce(H,ye,fe),q(B)}else if(j===null){const H=$-N.x,ce=z-N.y,ye=N.imageX+H,fe=N.imageY+ce;w(Re=>({...Re,...ge(ye,fe,Re.scale)}))}}},ae=()=>{I&&(O(!1),q(null))},_e=$=>oe($.clientX,$.clientY),at=$=>xe($.clientX,$.clientY),yt=$=>{if($.touches.length===2){const z=$.touches[0],B=$.touches[1],H=Math.hypot(B.clientX-z.clientX,B.clientY-z.clientY),ce=(z.clientX+B.clientX)/2,ye=(z.clientY+B.clientY)/2;oe(ce,ye,H)}else $.touches.length===1&&oe($.touches[0].clientX,$.touches[0].clientY)},Nt=$=>{if(I)if($.cancelable&&$.preventDefault(),$.touches.length===2){const z=$.touches[0],B=$.touches[1],H=Math.hypot(B.clientX-z.clientX,B.clientY-z.clientY),ce=(z.clientX+B.clientX)/2,ye=(z.clientY+B.clientY)/2;xe(ce,ye,H)}else $.touches.length===1&&xe($.touches[0].clientX,$.touches[0].clientY)},lt=f.useCallback($=>{if(!J||!s.current||E)return;$.preventDefault();const z=s.current.getBoundingClientRect(),B=$.clientX-z.left,H=$.clientY-z.top,ye=1+$.deltaY*-.005;Ce(ye,B,H)},[J,E,Ce]);f.useEffect(()=>{if(I)return window.addEventListener("mousemove",at),window.addEventListener("touchmove",Nt,{passive:!1}),window.addEventListener("mouseup",ae),window.addEventListener("touchend",ae),window.addEventListener("touchcancel",ae),()=>{window.removeEventListener("mousemove",at),window.removeEventListener("touchmove",Nt),window.removeEventListener("mouseup",ae),window.removeEventListener("touchend",ae),window.removeEventListener("touchcancel",ae)}},[I,Nt]),f.useEffect(()=>{const $=s.current;if($&&J)return $.addEventListener("wheel",lt,{passive:!1}),()=>$.removeEventListener("wheel",lt)},[J,lt]);const vt=f.useCallback($=>{if(!s.current||!J||($=Math.max(T,Math.min(P,$)),$===h.scale))return;const z=s.current,B=z.clientWidth/2,H=z.clientHeight/2;Ce($/h.scale,B,H)},[J,T,P,h.scale,Ce]),an=()=>vt(h.scale*1.15),kt=()=>vt(h.scale/1.15),Te=$=>vt($[0]),We=()=>{if(S(!1),c.current=!1,w({x:0,y:0,scale:1}),s.current&&b){const $=s.current.clientWidth,z=s.current.clientHeight;$>0&&z>0&&ie($,z)}},G=()=>{m.log("[ImprovedImageCropper] performCrop called");const $=s.current,z=i.current;if(m.log("[ImprovedImageCropper] Checking crop preconditions:",{hasContainer:!!$,isInitialized:v,hasCurrentImage:!!z,naturalWidth:z==null?void 0:z.naturalWidth,naturalHeight:z==null?void 0:z.naturalHeight,imageUrl:e}),!$||!v||!z||!z.naturalWidth||!z.naturalHeight||z.naturalWidth<=0||z.naturalHeight<=0){m.error("[ImprovedImageCropper] Cannot crop: Preconditions fail");return}m.log("[ImprovedImageCropper] Starting crop processing"),C(!0);try{const B=$.clientWidth,H=$.clientHeight;m.log(`[ImprovedImageCropper] Container dimensions: ${B}${H}`);const ce=(B-et)/2,ye=(H-et)/2;m.log(`[ImprovedImageCropper] Frame position: (${ce}, ${ye})`);const fe=ce-h.x,Re=ye-h.y,Be=fe/h.scale,Ze=Re/h.scale;m.log(`[ImprovedImageCropper] Source position (original): (${Be}, ${Ze})`);const Qe=et/h.scale,He=et/h.scale;m.log(`[ImprovedImageCropper] Source dimensions (original): ${Qe}${He}`);const Dt=Math.max(0,Be),Xt=Math.max(0,Ze),Ut=Math.min(Qe,z.naturalWidth-Dt),bt=Math.min(He,z.naturalHeight-Xt);if(m.log(`[ImprovedImageCropper] Clamped source: (${Dt}, ${Xt}, ${Ut}, ${bt})`),Ut<=0||bt<=0){const br=`Crop area zero/negative: W=${Ut}, H=${bt}`;throw m.error(`[ImprovedImageCropper] ${br}`),new Error(br)}let st={x:Math.round(Dt),y:Math.round(Xt),w:Math.round(Ut),h:Math.round(bt)};m.log(`[ImprovedImageCropper] Initial crop data: (${st.x}, ${st.y}, ${st.w}, ${st.h})`);const Ro=Math.min(st.w,st.h);if(st.w=Ro,st.h=Ro,m.log(`[ImprovedImageCropper] Final square crop data: (${st.x}, ${st.y}, ${st.w}, ${st.h})`),st.w<=0){const br=`Final crop width <= 0: ${st.w}`;throw m.error(`[ImprovedImageCropper] ${br}`),new Error(br)}l.current?(m.log("[ImprovedImageCropper] Component still mounted, calling onCropComplete with final crop data"),t(st)):m.warn("[ImprovedImageCropper] Component unmounted, skipping onCropComplete call")}catch(B){m.error("[ImprovedImageCropper] Error during cropping:",B),B instanceof Error&&(m.error(`[ImprovedImageCropper] Error message: ${B.message}`),m.error(`[ImprovedImageCropper] Error stack: ${B.stack}`))}finally{l.current&&(m.log("[ImprovedImageCropper] Setting isProcessing to false"),C(!1))}},Y=be||!v&&!E,Q=!v&&!E,De=!v||E,Ee={position:"absolute",top:0,left:0,maxWidth:"none",maxHeight:"none",willChange:"transform, opacity"},Ue={...Ee,transform:`translate(${h.x}px, ${h.y}px) scale(${h.scale})`,opacity:v?1:0,transition:I?"none":"transform 0.1s linear",zIndex:2},Ve={...Ee,transform:k?`translate(${k.x}px, ${k.y}px) scale(${k.scale})`:"translate(0px, 0px) scale(1)",opacity:v?0:1,pointerEvents:"none",zIndex:1};return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"text-center mb-2 flex-shrink-0 relative h-8",children:[p.jsx("h3",{className:"text-lg font-medium absolute left-1/2 top-0 transform -translate-x-1/2",children:"Adjust Image"}),E&&p.jsx("div",{className:"absolute top-0 right-0 mr-2 mt-1 z-30",children:p.jsx(Gt,{className:"h-5 w-5 animate-spin text-muted-foreground"})})]}),p.jsxs("div",{ref:s,className:ne("relative overflow-hidden bg-checkerboard rounded-lg flex-grow w-full","min-h-[250px] select-none touch-none","border border-muted",I?"cursor-grabbing":"cursor-grab"),onMouseDown:_e,onTouchStart:yt,children:[_&&k&&F&&p.jsx("img",{ref:a,src:_,alt:"",className:"absolute transform-gpu origin-top-left block",style:Ve,draggable:!1,width:F.width,height:F.height},_+"-prev"),p.jsx("img",{ref:i,src:e,alt:"Crop preview",className:"absolute transform-gpu origin-top-left block",style:Ue,onLoad:ke,onError:qe,draggable:!1,loading:"eager"},e),Y&&p.jsx("div",{className:"absolute inset-0 z-[5] flex items-center justify-center bg-black/20 pointer-events-none",children:p.jsx(Gt,{className:"h-8 w-8 animate-spin text-white/80"})}),p.jsxs("div",{className:"absolute inset-0 z-[3] pointer-events-none flex items-center justify-center","aria-hidden":"true",children:[" ",p.jsx("div",{className:"absolute inset-0",style:{boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}})," ",p.jsx("div",{className:"absolute border border-white rounded",style:{width:`${et}px`,height:`${et}px`,boxShadow:"0 0 0 9999px transparent"}})," "]})]}),p.jsxs("div",{className:"mt-6 space-y-5 flex-shrink-0",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs(Ge,{type:"button",variant:"outline",size:"icon",onClick:kt,disabled:!J||E||h.scale<=T,className:"h-9 w-9 flex-shrink-0","aria-label":"Zoom out",children:[" ",p.jsx(b_,{className:"h-4 w-4"})," "]}),p.jsx(DP,{value:[h.scale],min:T,max:P,step:(P-T)/100,onValueChange:Te,className:"flex-grow",disabled:!J||E,"aria-label":"Zoom slider"}),p.jsxs(Ge,{type:"button",variant:"outline",size:"icon",onClick:an,disabled:!J||E||h.scale>=P,className:"h-9 w-9 flex-shrink-0","aria-label":"Zoom in",children:[" ",p.jsx(S_,{className:"h-4 w-4"})," "]})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsxs(Ge,{type:"button",variant:"outline",onClick:n,disabled:E,children:[" ","Cancel"," "]}),p.jsxs("div",{className:"space-x-2",children:[p.jsxs(Ge,{type:"button",variant:"ghost",onClick:We,disabled:!J||E,className:"px-3",children:[" ",p.jsx(v_,{className:"h-4 w-4 mr-2"})," Reset"," "]}),p.jsx(Ge,{type:"button",variant:"default",onClick:G,disabled:De,className:"px-4 w-[110px]",children:E?p.jsxs(p.Fragment,{children:[" ",p.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"})," Applying..."," "]}):Q?p.jsxs(p.Fragment,{children:[" ",p.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"})," Loading..."," "]}):p.jsxs(p.Fragment,{children:[" ",p.jsx(gE,{className:"h-4 w-4 mr-2"})," Apply"," "]})})]})]})]})]})}async function Of(e){return new Promise((t,n)=>{m.log("[getImageDimensions] Starting dimension extraction",{type:typeof e,isFile:e instanceof File,fileDetails:e instanceof File?{name:e.name,size:e.size,type:e.type}:"Not a file"});const r=new Image;if(r.onload=()=>{m.log(`[getImageDimensions] Image loaded successfully with dimensions: ${r.naturalWidth}x${r.naturalHeight}`),r.naturalWidth>0&&r.naturalHeight>0?t({width:r.naturalWidth,height:r.naturalHeight}):(m.error("[getImageDimensions] Image loaded with zero dimensions"),n(new Error("Image loaded with zero dimensions.")))},r.onerror=o=>{m.error("[getImageDimensions] Image loading error:",o),n(new Error("Failed to load image to get dimensions."))},typeof e=="string")m.log(`[getImageDimensions] Processing string URL: ${e.substring(0,50)}...`),r.src=e;else if(e instanceof File){m.log(`[getImageDimensions] Processing File object: ${e.name}, size: ${e.size}, type: ${e.type}`);const o=new FileReader;o.onload=s=>{var i;if(m.log("[getImageDimensions] FileReader load successful"),(i=s.target)!=null&&i.result){const a=s.target.result;m.log(`[getImageDimensions] Data URL created, length: ${a.length}, setting as img.src`),r.src=a}else m.error("[getImageDimensions] FileReader result is empty"),n(new Error("FileReader result is empty."))},o.onerror=s=>{m.error("[getImageDimensions] FileReader error:",s),n(new Error("Failed to read file."))},m.log("[getImageDimensions] Calling reader.readAsDataURL on file"),o.readAsDataURL(e)}else m.error("[getImageDimensions] Invalid input type"),n(new Error("Invalid input for getImageDimensions"))})}const w3=e=>{if(!e||typeof e!="string")return null;try{const t=e.split(" ");if(t.length<1)return null;const n=t[0].replace(/:/g,"-");return/^\d{4}-\d{2}-\d{2}$/.test(n)?n:null}catch(t){return m.error("Error parsing EXIF date string:",t),null}};function jf(e){return new Promise(t=>{if(!window.EXIF){m.warn("EXIF library not loaded."),t({exifDate:null});return}let n=!1;const r=setTimeout(()=>{n||(m.warn("EXIF extraction timed out."),n=!0,t({exifDate:null}))},2500);try{window.EXIF.getData(e,function(){if(!n){clearTimeout(r),n=!0;try{const o=window.EXIF.getTag(this,"DateTimeOriginal")||window.EXIF.getTag(this,"DateTimeDigitized"),s=w3(o);t({exifDate:s})}catch(o){m.error("Error reading EXIF tags:",o),t({exifDate:null})}}})}catch(o){n||(clearTimeout(r),n=!0,m.error("Error initiating EXIF.getData:",o),t({exifDate:null}))}})}function ex({open:e,onOpenChange:t,onConfirm:n,title:r,description:o,confirmText:s="Confirm",cancelText:i="Cancel",isConfirming:a=!1}){const l=c=>{c.preventDefault(),a||n()};return p.jsx(iP,{open:e,onOpenChange:t,children:p.jsxs(uy,{children:[p.jsxs(dy,{children:[p.jsx(hy,{children:r}),p.jsx(py,{children:o})]}),p.jsxs(fy,{children:[p.jsx(gy,{disabled:a,children:i}),p.jsxs(my,{onClick:l,disabled:a,className:"bg-red-500 hover:bg-red-600 focus:ring-red-500",children:[a?p.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}):null,a?"Confirming...":s]})]})]})})}const x3=(e,t,n)=>{if(e<=1)return;const r=[];new Set([...Object.keys(t),...Object.keys(n)]).forEach(s=>{const i=t[s],a=n[s];if(i!==a){let l="ref changed";typeof a!="object"&&typeof a!="function"&&(l=`value changed: ${i} -> ${a}`),r.push({key:s,change:l,prev:i,current:a})}}),r.length>0&&m.warn(`[EntryForm Init Effect init-${e}] Re-running due to changed dependencies:`,r.map(s=>s.key))};function $f({entryId:e}){const t=nr(),{handleSaveEntry:n,getEntryById:r,loadSpecificEntry:o,getPhotoBlobUrl:s,imagesMetadata:i,isSaving:a,shareKeyForForm:l,clearShareKeyForForm:c,deleteSharedFilesFromStorage:d,isAuthenticated:u,isLoadingAuth:h,navigate:w,isLoadingImagesMeta:y,isClientReady:x,isOnline:b}=t,{toast:g}=sl(),[v,S]=f.useState(!1),[E,C]=f.useState(null),[T,A]=f.useState(()=>{const X=window.location.hash.split("?")[1];let ee=null;if(X)try{ee=new URLSearchParams(X).get("date")}catch{}if(ee&&/^\d{4}-\d{2}-\d{2}$/.test(ee))return m.log(`[EntryForm State Init] Initializing date from param: ${ee}`),new Date(ee+"T00:00:00Z");{m.log("[EntryForm State Init] Initializing date to today (UTC).");const ue=new Date;return new Date(Date.UTC(ue.getFullYear(),ue.getMonth(),ue.getDate()))}}),[P,M]=f.useState(!1),[I,O]=f.useState(""),[N,U]=f.useState([]),[j,q]=f.useState(!1),[_,L]=f.useState(null),[k,R]=f.useState(!1),[F,W]=f.useState(null),[J,be]=f.useState(null),[se,Ye]=f.useState(!0),[te,ge]=f.useState([]),[ie,ke]=f.useState(null),[qe,Ce]=f.useState(!1),[oe,xe]=f.useState(null),[ae,_e]=f.useState(null),[at,yt]=f.useState(!1),[Nt,lt]=f.useState(!1),[vt,an]=f.useState(new Map),kt=f.useRef(null),Te=f.useRef(!0),We=f.useRef(new Map),G=f.useRef(new Map),Y=f.useRef(null),Q=f.useRef(!1),De=f.useRef(null),Ee=f.useRef(!1),Ue=f.useRef(0),Ve=f.useRef({}),$=f.useRef(null);lo.getInstance();const z=!!e,B=ie!==null&&ie<te.length,H=a||B||qe,ce=!se&&!H&&!a&&!h&&N.length>0&&!k&&te.length===0&&at,ye=f.useMemo(()=>{const Z=E?E.date:T.toISOString().split("T")[0],X=E?E.content:"",ee=E?E.photos:[],ue=new Set(ee.map(de=>de.photoId));return{date:Z,content:X,photoIds:ue}},[E,T]);f.useEffect(()=>{if(se||h||y){yt(!1);return}const Z=T.toISOString().split("T")[0]!==ye.date,X=I!==ye.content,ee=new Set(N.map(ve=>zn(ve)?ve.localId:ve.photoId)),ue=ye.photoIds;let de=ee.size!==ue.size;if(!de){for(const ve of ee)ue.has(ve)||(de=!0);if(!de)for(const ve of ue)ee.has(ve)||(de=!0)}let me=!1;if(E&&!de){for(const ve of N)if(!zn(ve)){const we=E.photos.find(he=>he.photoId===ve.photoId);if(we&&(ve.crop.x!==we.crop.x||ve.crop.y!==we.crop.y||ve.crop.w!==we.crop.w||ve.crop.h!==we.crop.h)){me=!0;break}}}if(z)yt(Z||X||de||me);else{const ve=(()=>{const Oe=window.location.hash.split("?")[1];let je=null;if(Oe)try{je=new URLSearchParams(Oe).get("date")}catch{}if(je&&/^\d{4}-\d{2}-\d{2}$/.test(je))return je;{const $e=new Date;return new Date(Date.UTC($e.getFullYear(),$e.getMonth(),$e.getDate())).toISOString().split("T")[0]}})(),we=T.toISOString().split("T")[0]!==ve;yt(I.trim()!==""||N.length>0||we)}},[T,I,N,ye.date,ye.content,ye.photoIds,z,se,h,y,E]);const fe=f.useCallback(async Z=>{if(!Te.current||Z>=te.length)return;const X=te[Z];if(!X||vt.has(X.localId))return;Y.current&&Y.current.abort();const ee=new AbortController;Y.current=ee;try{const[ue,de]=await Promise.all([Of(X.file),jf(X.file)]);if(ee.signal.aborted||!Te.current)return;an(me=>new Map(me).set(X.localId,{dims:ue,exif:de}))}catch(ue){ue.name==="AbortError"||Te.current&&m.error(`[Prefetch] Error pre-fetching data for index ${Z}, file: ${X.file.name}`,ue)}finally{Y.current===ee&&(Y.current=null)}},[te,vt]),Re=f.useCallback((Z,X=[],ee=!1)=>{if(!Z||Z.length===0){m.warn("[EntryForm] No files selected");return}m.log("[EntryForm handleFilesSelect] Processing files",{fileCount:Z.length,previewUrlCount:X.length,isFromSharedFiles:ee,blobUrlsCount:We.current.size});const ue=ya-N.length-te.length;if(m.log(`[EntryForm] Available slots: ${ue} (MAX_PHOTOS: ${ya}, current photos: ${N.length}, queue: ${te.length})`),Z.length>ue&&(m.warn(`[EntryForm] Too many files (${Z.length}), limiting to ${ue}`),g({title:"Too many files",description:`You can only add ${ue} more photo(s). Some files were ignored.`,variant:"destructive"}),typeof URL.revokeObjectURL=="function"&&(m.log(`[EntryForm] Revoking excess blob URLs (${X.length-ue})`),X.slice(ue).forEach(me=>{m.log(`[EntryForm] Revoking excess blob URL: ${me}`),URL.revokeObjectURL(me)})),Z=Z.slice(0,ue),X=X.slice(0,ue),Z.length===0)){m.warn("[EntryForm] No files left after limiting");return}const de=Z.map((me,ve)=>{const we=crypto.randomUUID(),he=X[ve];return m.log(`[EntryForm] Processing file for queue: ${me.name}, type: ${me.type}, size: ${me.size}`),m.log(`[EntryForm] Generated localId: ${we} for blob URL: ${he}`),(!he||!he.startsWith("blob:"))&&m.error(`[EntryForm] Invalid blob URL for file ${me.name}: ${he}`),ee&&m.log(`[EntryForm] Using existing blob URL for shared file: ${he}`),We.current.set(we,he),m.log(`[EntryForm] Stored in originalBlobUrlsRef. Current count: ${We.current.size}`),{file:me,previewUrl:he,localId:we}});m.log(`[EntryForm] Created ${de.length} new queue items`),ge(me=>{const ve=[...me,...de];return m.log(`[EntryForm] ProcessingQueue updated: ${me.length}  ${ve.length} items`),ie===null&&ve.length>0?(m.log("[EntryForm] Starting queue processing - setting currentQueueIndex to 0"),ke(0),ve.length>1&&(m.log("[EntryForm] Prefetching next item at index 1"),fe(1))):m.log(`[EntryForm] Queue processing already in progress, currentQueueIndex: ${ie}`),ve})},[N.length,te.length,g,ie,fe,We]);f.useEffect(()=>{const Z={entryId:e,isAuthenticated:u,isLoadingAuth:h,isClientReady:x,isLoadingImagesMeta:y,isOnline:b,navigate:w,toast:g,getEntryById:r,loadSpecificEntry:o,getPhotoBlobUrl:s,imagesMetadata:i==null?void 0:i.length,initialEntryId:E==null?void 0:E.id};Ue.current++;const X=Ue.current,ee=`init-${X}`;if(x3(X,Ve.current,Z),(X===1||e!==Ve.current.entryId)&&(Ee.current=!1),!(!h&&x&&!y)){Ye(!0),Ve.current=Z;return}Te.current=!0,yt(!1);const de=()=>{const he=Ue.current;if(m.log(`[EntryForm Init Effect ${he}] Dependency check complete. Current state:`,{isEditMode:z,isAuthenticated:u,isLoadingAuth:h,isClientReady:x,isLoadingImagesMeta:y,isRequestingSharedFiles:v,isLoadingData:se,photos:N.length}),l&&!Q.current){C(null),O(""),q(!1),L(null),Ce(!1),xe(null),_e(null);return}C(null),O(""),U([]),q(!1),L(null),R(!1),W(null),J&&m.log(`[EntryForm Init Effect ${he}] Clearing cropperImageUrl: ${J}`),be(null),Ce(!1),xe(null),_e(null),an(new Map)},me=async he=>{if(m.log(`[EntryForm Init Effect ${ee}] Populate form for entry ID:`,he.id),!Te.current)return;let Oe=new Date(he.date+"T00:00:00Z");if(A(Oe),O(he.content),C({...he}),M(!0),m.log(`[EntryForm Init Effect ${ee}] Basic form fields populated. isDateSetByUserIntent: true`),U([]),he.photos&&he.photos.length>0){m.log(`[EntryForm Init Effect ${ee}] Loading ${he.photos.length} photos.`),(!i||i.length===0)&&m.warn(`[EntryForm Init Effect ${ee}] Missing imagesMetadata.`);const je=he.photos.map(async $e=>{const Je=(i||[]).find(Zt=>Zt.id===$e.photoId),Ne=(Je==null?void 0:Je.photoMetadata)??null,ct=Ne==null?void 0:Ne.contentHash;let ut=null;try{if(ut=await s(ct,$e.photoId),!Te.current)return null;ut?(We.current.set($e.photoId,ut),Ne&&G.current.set($e.photoId,Ne)):m.warn(`[EntryForm Init Effect ${ee}] No preview URL for photo ${$e.photoId}`)}catch(Zt){m.error(`[EntryForm Init Effect ${ee}] Failed getting preview link for photo ${$e.photoId}:`,Zt)}const Et=ut===null?void 0:ut;return Et?{...$e,isNew:!1,localPreviewUrl:Et}:null});try{const $e=await Promise.all(je);if(!Te.current)return;const Je=$e.filter(Ne=>Ne!==null);if(m.log(`[EntryForm Init Effect ${ee}] Setting ${Je.length} photos.`),U(Je),Je.length>0){const Ne=G.current.get(Je[0].photoId),ct=(Ne==null?void 0:Ne.exifDate)??null;m.log(`[EntryForm Init Edit] Storing initial EXIF date: ${ct}`),L(ct);const ut=Oe.toISOString().split("T")[0];let Et=!1,Zt="";if(ct){const[Er,Un,qr]=ct.split("-").map(Number);!isNaN(Er)&&!isNaN(Un)&&!isNaN(qr)&&(Zt=new Date(Date.UTC(Er,Un-1,qr)).toISOString().split("T")[0],Et=ut!==Zt)}m.log(`[EntryForm Init Edit] Comparing Form UTC: ${ut} vs EXIF as UTC: ${Zt||"N/A"}. Show warning: ${Et}`),q(Et)}else m.log("[EntryForm Init Edit] No photos, setting initial EXIF null."),L(null),q(!1)}catch($e){m.error(`[EntryForm Init Effect ${ee}] Error loading initial photo details:`,$e),Te.current&&U([])}}else m.log(`[EntryForm Init Effect ${ee}] Entry has no photos.`),U([]),L(null),q(!1);m.log(`[EntryForm Init Effect ${ee}] populateForm finished.`)},ve=async()=>{if(Ee.current){Ye(!1);return}Ye(!0),de();try{if(z&&e){m.log(`[EntryForm Init Effect ${ee}] EDIT MODE: Initializing for entry ID: ${e}`);let he=null;if(he=r(e)||null,he||(m.log(`[EntryForm Init Effect ${ee}] EDIT MODE: Not in context, loading...`),he=await o(e)),he&&Te.current)await me(he),Ee.current=!0;else if(Te.current){m.error(`[EntryForm Init Effect ${ee}] EDIT MODE: Entry ${e} not found. Redirecting.`),g({title:"Error",description:"Entry not found.",variant:"destructive"}),w("/");return}}else{m.log(`[EntryForm Init Effect ${ee}] NEW MODE: Initializing.`);const Oe=window.location.hash.split("?")[1];let je=null;if(Oe)try{je=new URLSearchParams(Oe).get("date")}catch{}let $e=!1,Je;if(je&&/^\d{4}-\d{2}-\d{2}$/.test(je))Je=new Date(je+"T00:00:00Z"),$e=!0,m.log(`[EntryForm Init Effect ${ee}] NEW MODE: Date from param: ${je}. User intent: true.`);else{const Ne=new Date;Je=new Date(Date.UTC(Ne.getFullYear(),Ne.getMonth(),Ne.getDate())),$e=!1,m.log(`[EntryForm Init Effect ${ee}] NEW MODE: Date defaulted to today. User intent: false.`)}A(Je),M($e),C(null),Ee.current=!0}}finally{Te.current&&Ye(!1)}};return l&&!Q.current&&te.length===0?(m.log(`[EntryForm Init Effect ${ee}] Skipping initializeForm() due to pending shared files that need processing first`),m.log(`[EntryForm Init Effect ${ee}] Setting isLoadingData to false to allow Shared Files Effect to run`),Ye(!1)):ve(),Ve.current=Z,()=>{m.log(`[EntryForm Cleanup ${ee}] Cleanup running. CurrentState:`,{isMounted:Te.current,queueItems:te.length,shareKey:l?"present":"none",hasProcessedSharedFiles:Q.current,blobUrlCount:We.current.size,currentQueueIndex:ie,cleanupTimeMs:Date.now()}),te.length>0&&m.log(`[EntryForm Cleanup ${ee}]  ATTENTION: Setting isMountedRef.current=false during active queue processing!`,{queueLength:te.length,currentQueueIndex:ie,shareKey:l?"present":"none"}),Te.current=!1,Y.current&&(Y.current.abort(),Y.current=null);const he=te.length>0,Oe=l&&!Q.current;if(he||Oe){m.log(`[EntryForm Cleanup ${ee}] Skipping URL revocation due to active processing (queue: ${te.length}, shareKey: ${l?"present":"none"})`);return}}},[e,u,h,x,y,l]),f.useEffect(()=>{m.log(`[EntryForm Cleanup] Revoking ${We.current.size} URLs:`,Array.from(We.current.entries()).map(([Z,X])=>({id:Z,url:X}))),We.current.forEach((Z,X)=>{try{Z&&Z.startsWith("blob:")&&(m.log(`[EntryForm Cleanup] Revoking URL for id ${X}: ${Z}`),URL.revokeObjectURL(Z))}catch(ee){m.error(`[EntryForm Cleanup] Error revoking URL: ${ee}`)}}),We.current.clear(),G.current.clear(),c()},[]),f.useEffect(()=>{const Z=Date.now();if(m.log(`[ShareKey Effect ${Z}] Running check.`,{isEditMode:z,shareKeyForForm:l,isClientReady:x,isRequestingSharedFiles:v,isLoadingData:se,photos:N.length,isMounted:Te.current}),z||!l||!x||v||se){m.log(`[ShareKey Effect ${Z}] Skipping due to conditions not met`,{isEditMode:z,hasShareKey:!!l,isClientReady:x,isRequestingSharedFiles:v,isLoadingData:se,blockingCondition:z?"isEditMode":l?x?v?"alreadyRequesting":se?"isLoadingData":"unknown":"clientNotReady":"noShareKey"});return}m.log(`[ShareKey Effect] Detected shareKeyForForm: ${l}, requesting files`),S(!0);const X=Yh(),ee={type:"GET_STORED_FILES",key:l};return X.sendMessageToSW(ee).catch(ue=>{m.error("[ShareKey Effect] Failed to send GET_STORED_FILES to SW:",ue),g({title:"Share Error",description:"Could not request shared files from service worker.",variant:"destructive"}),S(!1)}),()=>{m.log("[ShareKey Effect] Cleaning up EntryForm SW message listeners.")}},[l,x,se]),f.useEffect(()=>{const Z=de=>{if(!de){m.warn("[ShareKey Effect] Received empty SW message");return}if(m.log(`[ShareKey Effect] Received SW message type: ${de.type}`,{key:de.key,filesCount:de.files?de.files.length:"none",error:de.error||"none"}),de.type==="STORED_FILES_DATA"&&de.files)if(S(!1),de.files.length>0){m.log(`[ShareKey Effect] Received ${de.files.length} shared files:`,{types:de.files.map(ve=>ve.type),sizes:de.files.map(ve=>ve.size),names:de.files.map(ve=>ve.name)});const me=de.files.map(ve=>URL.createObjectURL(ve));$.current=l,De.current=de.files,Q.current=!0,Re(de.files,me,!0)}else m.warn("[ShareKey Effect] Received empty files array"),g({title:"Share Info",description:"No shared files found to process.",variant:"default"});else de.type==="STORED_FILES_ERROR"&&(S(!1),m.error(`[ShareKey Effect] Error receiving files: ${de.error}`),g({title:"Share Error",description:`Failed to load shared files: ${de.error}`,variant:"destructive"}))},X=Yh(),ee=X.registerListener("STORED_FILES_DATA",Z),ue=X.registerListener("STORED_FILES_ERROR",Z);return()=>{ee(),ue()}},[]),f.useEffect(()=>{const Z=Date.now(),X=$.current!==null&&te.length>0;if(m.log(`[Queue Effect ${Z}] Checking processing conditions:`,{isProcessingQueue:B,isMounted:Te.current,isProcessingSharedFiles:X,currentQueueIndex:ie,queueLength:te.length,pendingShareKey:$.current,originalBlobUrlsCount:We.current.size}),!B||!Te.current&&!X){m.log(`[Queue Effect ${Z}] Queue processing skipped`,{skipReason:B?!Te.current&&!X?"not mounted and not shared files":"unknown":"isProcessingQueue is false",isProcessingQueue:B,isMounted:Te.current,isProcessingSharedFiles:X,currentQueueIndex:ie,queueLength:te.length,pendingShareKey:$.current});return}X&&m.log("[Queue Effect] Processing shared file queue items",{pendingShareKey:$.current,queueLength:te.length}),m.log(`[Queue Effect] Processing queue item at index ${ie} of ${te.length}`);const ee=te[ie];if(!ee){m.error(`[Queue Effect] No item found at index ${ie} in queue of length ${te.length}`),te.length>0&&ie!==null&&(m.warn("[Queue Effect] Invalid queue state detected, resetting queue"),ke(null),ge([]),k&&R(!1));return}m.log(`[Queue Effect] Found item to process: file=${ee.file.name}, localId=${ee.localId}, blob=${ee.previewUrl}`),(async()=>{if(!Te.current){m.warn("[Queue Effect] Component unmounted during processing");return}const de=ee,{file:me,previewUrl:ve,localId:we}=de;m.log(`[Queue Effect] Processing file: ${me.name}, type: ${me.type}, size: ${me.size}`),m.log(`[Queue Effect] Using blob URL: ${ve}`);let he=null;vt.has(we)?(m.log(`[Queue Effect] Using pre-fetched data for ${we}`),he=vt.get(we),an(Oe=>{const je=new Map(Oe);return je.delete(we),je})):m.log(`[Queue Effect] No pre-fetched data available for ${we}, will fetch now`);try{m.log(`[Queue Effect] Fetching image dimensions and EXIF data for ${me.name}`);const{dims:Oe,exif:je}=he??await(async()=>{m.log(`[Queue Effect] Fetching data now for ${me.name}`);const ut=await Of(me),Et=await jf(me);return m.log(`[Queue Effect] Got dimensions: ${ut.width}${ut.height} and EXIF data:`,Et),{dims:ut,exif:Et}})();if(!Te.current){m.warn("[Queue Effect] Component unmounted during data fetch");return}m.log(`[Queue Effect] Calculating initial crop for ${me.name}`);const $e=Math.min(Oe.width,Oe.height),Je={x:Math.round((Oe.width-$e)/2),y:Math.round((Oe.height-$e)/2),w:Math.round($e),h:Math.round($e)};m.log(`[Queue Effect] Initial crop calculated: x=${Je.x}, y=${Je.y}, w=${Je.w}, h=${Je.h}`);const Ne={isNew:!0,file:me,originalDimensions:Oe,exifData:je,localPreviewUrl:ve,localId:we};if(m.log(`[Queue Effect] Created newPhotoBase object with localId: ${we}`),m.log(`[Queue Effect] Date Logic check - photos: ${N.length}, initialExifDate: ${_}, isEditMode: ${z}`),N.length===0&&!_&&!z){m.log("[Queue Effect - DATE LOGIC] Processing date logic for first photo in new entry");const ut=je.exifDate;let Et=!1;if(m.log(`[Queue Effect - DATE LOGIC 1] First photo. isDateSetByUserIntent=${P}. Storing initial EXIF date string: ${ut}`),L(ut),ut){m.log(`[Queue Effect - DATE LOGIC] Found EXIF date: ${ut}, parsing components`);const[Zt,Er,Un]=ut.split("-").map(Number);if(m.log(`[Queue Effect - DATE LOGIC] Parsed components: year=${Zt}, month=${Er}, day=${Un}`),!isNaN(Zt)&&!isNaN(Er)&&!isNaN(Un)){const qr=new Date(Date.UTC(Zt,Er-1,Un)),xl=qr.toISOString().split("T")[0],wy=T.toISOString().split("T")[0];m.log(`[Queue Effect - DATE LOGIC] Valid date components, created UTC date: ${xl}`),P?(m.log(`[Queue Effect - DATE LOGIC 2a] User date intent=true. Comparing Form UTC: ${wy} vs EXIF as UTC: ${xl}`),Et=xl!==wy,m.log(`[Queue Effect - DATE LOGIC 3a] Setting warning: ${Et}`)):(m.log(`[Queue Effect - DATE LOGIC 2b] User date intent=false. Setting date to EXIF date: ${xl}`),A(qr),Et=!1,m.log("[Queue Effect - DATE LOGIC 3b] Setting warning: false (auto-set)"))}else m.warn(`[Queue Effect] Invalid date components parsed from EXIF: ${ut}. Setting warning false.`),Et=!1}else m.log("[Queue Effect - DATE LOGIC 2c] No EXIF date found. Setting warning false."),Et=!1;m.log(`[Queue Effect - DATE LOGIC 4] Setting final warning state to: ${Et}`),q(Et)}else m.log("[Queue Effect - DATE LOGIC] Skipping date logic - not first photo or in edit mode");_e(Ne),W(null),be(ve),k||R(!0);const ct=ie+1;ct<te.length&&fe(ct)}catch(Oe){if(m.error(`[Queue Effect] Error processing queue item ${ie}:`,Oe),g({title:"Error Processing Photo",description:`Could not process: ${me.name}. ${Oe instanceof Error?Oe.message:"Unknown error"}`,variant:"destructive"}),typeof URL.revokeObjectURL=="function")try{URL.revokeObjectURL(ve)}catch{}if(We.current.delete(we),Te.current){const je=ie!==null?ie+1:null;je!==null&&je<te.length?ke(je):(m.log("[Queue Effect] Last item failed. Resetting queue."),ke(null),ge([]),k&&R(!1))}}})()},[ie,te,vt,k,fe,N.length,_,z,T,g,P]),f.useEffect(()=>{if(!B||!Te.current){m.log("[Queue Effect] Queue processing skipped",{isProcessingQueue:B,isMounted:Te.current,currentQueueIndex:ie,queueLength:te.length});return}m.log(`[Queue Effect] Processing queue item at index ${ie} of ${te.length}`);const Z=te[ie];if(!Z){m.error(`[Queue Effect] No item found at index ${ie} in queue of length ${te.length}`),te.length>0&&ie!==null&&(m.warn("[Queue Effect] Invalid queue state detected, resetting queue"),ke(null),ge([]),k&&R(!1));return}m.log(`[Queue Effect] Found item to process: file=${Z.file.name}, localId=${Z.localId}, blob=${Z.previewUrl}`),(async()=>{if(!Te.current){m.warn("[Queue Effect] Component unmounted during processing");return}const ee=Z,{file:ue,previewUrl:de,localId:me}=ee;m.log(`[Queue Effect] Processing file: ${ue.name}, type: ${ue.type}, size: ${ue.size}`),m.log(`[Queue Effect] Using blob URL: ${de}`);let ve=null;vt.has(me)?(m.log(`[Queue Effect] Using pre-fetched data for ${me}`),ve=vt.get(me),an(we=>{const he=new Map(we);return he.delete(me),he})):m.log(`[Queue Effect] No pre-fetched data available for ${me}, will fetch now`);try{m.log(`[Queue Effect] Fetching image dimensions and EXIF data for ${ue.name}`);const{dims:we,exif:he}=ve??await(async()=>{m.log(`[Queue Effect] Fetching data now for ${ue.name}`);const Ne=await Of(ue),ct=await jf(ue);return m.log(`[Queue Effect] Got dimensions: ${Ne.width}${Ne.height} and EXIF data:`,ct),{dims:Ne,exif:ct}})();if(!Te.current){m.warn("[Queue Effect] Component unmounted during data fetch");return}m.log(`[Queue Effect] Calculating initial crop for ${ue.name}`);const Oe=Math.min(we.width,we.height),je={x:Math.round((we.width-Oe)/2),y:Math.round((we.height-Oe)/2),w:Math.round(Oe),h:Math.round(Oe)};m.log(`[Queue Effect] Initial crop calculated: x=${je.x}, y=${je.y}, w=${je.w}, h=${je.h}`);const $e={isNew:!0,file:ue,originalDimensions:we,exifData:he,localPreviewUrl:de,localId:me};if(m.log(`[Queue Effect] Created newPhotoBase object with localId: ${me}`),m.log(`[Queue Effect] Date Logic check - photos: ${N.length}, initialExifDate: ${_}, isEditMode: ${z}`),N.length===0&&!_&&!z){m.log("[Queue Effect - DATE LOGIC] Processing date logic for first photo in new entry");const Ne=he.exifDate;let ct=!1;if(m.log(`[Queue Effect - DATE LOGIC 1] First photo. isDateSetByUserIntent=${P}. Storing initial EXIF date string: ${Ne}`),L(Ne),Ne){m.log(`[Queue Effect - DATE LOGIC] Found EXIF date: ${Ne}, parsing components`);const[ut,Et,Zt]=Ne.split("-").map(Number);if(m.log(`[Queue Effect - DATE LOGIC] Parsed components: year=${ut}, month=${Et}, day=${Zt}`),!isNaN(ut)&&!isNaN(Et)&&!isNaN(Zt)){const Er=new Date(Date.UTC(ut,Et-1,Zt)),Un=Er.toISOString().split("T")[0],qr=T.toISOString().split("T")[0];m.log(`[Queue Effect - DATE LOGIC] Valid date components, created UTC date: ${Un}`),P?(m.log(`[Queue Effect - DATE LOGIC 2a] User date intent=true. Comparing Form UTC: ${qr} vs EXIF as UTC: ${Un}`),ct=Un!==qr,m.log(`[Queue Effect - DATE LOGIC 3a] Setting warning: ${ct}`)):(m.log(`[Queue Effect - DATE LOGIC 2b] User date intent=false. Setting date to EXIF date: ${Un}`),A(Er),ct=!1,m.log("[Queue Effect - DATE LOGIC 3b] Setting warning: false (auto-set)"))}else m.warn(`[Queue Effect] Invalid date components parsed from EXIF: ${Ne}. Setting warning false.`),ct=!1}else m.log("[Queue Effect - DATE LOGIC 2c] No EXIF date found. Setting warning false."),ct=!1;m.log(`[Queue Effect - DATE LOGIC 4] Setting final warning state to: ${ct}`),q(ct)}else m.log("[Queue Effect - DATE LOGIC] Skipping date logic - not first photo or in edit mode");_e($e),W(null),be(de),k||R(!0);const Je=ie+1;Je<te.length&&fe(Je)}catch(we){if(m.error(`[Queue Effect] Error processing queue item ${ie}:`,we),g({title:"Error Processing Photo",description:`Could not process: ${ue.name}. ${we instanceof Error?we.message:"Unknown error"}`,variant:"destructive"}),typeof URL.revokeObjectURL=="function")try{URL.revokeObjectURL(de)}catch{}if(We.current.delete(me),Te.current){const he=ie!==null?ie+1:null;he!==null&&he<te.length?ke(he):(m.log("[Queue Effect] Last item failed. Resetting queue."),ke(null),ge([]),k&&R(!1))}}})()},[ie,te,vt,k,fe,N.length,_,z,T,g,P]);const Be=f.useCallback(Z=>{if(!Te.current){m.warn("[EntryForm] handleCropComplete called but component unmounted");return}if(m.log("[EntryForm] handleCropComplete called with crop data:",{newCropData:Z,hasPendingNewPhotoData:!!ae,photoIndexToCrop:F,pendingPhotoLocalId:ae==null?void 0:ae.localId,pendingPhotoInfo:ae?{fileName:ae.file.name,fileType:ae.file.type,fileSize:ae.file.size,dimensions:`${ae.originalDimensions.width}${ae.originalDimensions.height}`,localPreviewUrl:ae.localPreviewUrl}:"none"}),ae){m.log(`[EntryForm] Processing pending new photo with localId: ${ae.localId}`);const ee={...ae,crop:Z};m.log(`[EntryForm] Adding new photo to photos array, current count: ${N.length}`),U(ue=>[...ue,ee]),_e(null),m.log("[EntryForm] Set pendingNewPhotoData to null")}else F!==null&&(m.log(`[EntryForm] Updating crop for existing photo at index: ${F}`),U(ee=>ee.map((ue,de)=>de===F?{...ue,crop:Z}:ue)));W(null);const X=ie!==null?ie+1:null;m.log(`[EntryForm] Crop complete. Next queue index: ${X}. Queue length: ${te.length}`),X!==null&&X<te.length?(m.log(`[EntryForm] Moving to next item in queue (index ${X}), cropper stays open`),ke(X)):(m.log("[EntryForm] Queue processing finished. Clearing queue and closing cropper"),ke(null),ge([]),R(!1)),X!==null&&X<te.length||(m.log("[EntryForm] Scheduling focus on content textarea"),setTimeout(()=>{kt.current?(kt.current.focus(),m.log("[EntryForm] Content textarea focused")):m.warn("[EntryForm] Content textarea ref not available")},50))},[ie,te.length,ae,F,N.length]),Ze=f.useCallback(()=>{if(!Te.current){m.warn("[EntryForm] handleCropCancel called but component unmounted");return}if(m.log("[EntryForm] handleCropCancel called:",{hasPendingNewPhotoData:!!ae,photoIndexToCrop:F,currentQueueIndex:ie,processingQueueLength:te.length}),ae){if(m.log(`[EntryForm] Discarding pending new photo with localId: ${ae.localId}`,{fileName:ae.file.name,fileSize:ae.file.size,fileType:ae.file.type,localPreviewUrl:ae.localPreviewUrl}),typeof URL.revokeObjectURL=="function"){m.log(`[EntryForm] [BLOB URL REVOCATION] Revoking blob URL on CROP CANCEL for localId ${ae.localId}: ${ae.localPreviewUrl}`,{revocationReason:"cropCancel",blobUrlsBeforeCount:We.current.size});try{URL.revokeObjectURL(ae.localPreviewUrl),m.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked URL for ${ae.localId}`)}catch(X){m.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking URL: ${X}`)}}m.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing URL from originalBlobUrlsRef for localId: ${ae.localId}`),We.current.delete(ae.localId),m.log(`[EntryForm] [BLOB URL LIFECYCLE] BlobUrls count after deletion: ${We.current.size}`),_e(null)}W(null);const Z=ie!==null?ie+1:null;Z!==null&&Z<te.length?ke(Z):(ke(null),ge([]),R(!1)),Z!==null&&Z<te.length||setTimeout(()=>{var X;return(X=kt.current)==null?void 0:X.focus()},50)},[ie,te.length,ae,F]),Qe=f.useCallback(Z=>{const X=N[Z];if(!X||B||H){m.warn(`[EntryForm] openCropperForPhoto prevented for index ${Z}.`,{isProcessingQueue:B,isBusy:H});return}const ee=zn(X)?X.localId:X.photoId;m.log(`[EntryForm] [BLOB URL USAGE] openCropperForPhoto retrieving URL for index ${Z}`,{photoId:ee,isNewPhoto:zn(X),photoType:zn(X)?"newPhoto":"existingPhoto",blobUrlsCount:We.current.size,photoCount:N.length});const ue=We.current.get(ee);ue?(m.log(`[EntryForm] [BLOB URL USAGE] Found URL for photo ID ${ee}: ${ue}`),W(Z),_e(null),be(ue),R(!0)):(g({title:"Cannot Edit Crop",description:"Original image data is missing or invalid.",variant:"destructive"}),m.warn(`[EntryForm] Cannot open cropper: original URL missing/invalid for photo index ${Z}, id ${ee}`))},[N,B,H,g]),He=f.useCallback(Z=>{xe(Z),Ce(!0)},[]),Dt=f.useCallback(()=>{var ve;if(oe===null)return;const Z=oe,X=N[Z];if(!X){m.warn(`[EntryForm] Photo to remove at index ${Z} not found.`),Ce(!1),xe(null);return}const ee=zn(X)?X.localId:X.photoId,ue=Z===0;let de=[];m.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing photo id ${ee}`,{wasFirstPhoto:ue,photoType:zn(X)?"newPhoto":"existingPhoto",currentPhotosCount:N.length,currentBlobUrlsCount:We.current.size});const me=We.current.get(ee);if(typeof URL.revokeObjectURL=="function"&&me){m.log(`[EntryForm] [BLOB URL REVOCATION] Revoking original URL on REMOVE CONFIRM for ${ee}: ${me}`,{revocationReason:"photoRemoval",blobUrlsBeforeCount:We.current.size});try{URL.revokeObjectURL(me),m.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked original URL for ${ee}`)}catch(we){m.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking original URL on remove: ${we}`)}}if(typeof URL.revokeObjectURL=="function"&&X.localPreviewUrl&&X.localPreviewUrl.startsWith("blob:")&&X.localPreviewUrl!==me){m.log(`[EntryForm] [BLOB URL REVOCATION] Revoking preview URL on REMOVE CONFIRM for ${ee}: ${X.localPreviewUrl}`,{revocationReason:"photoRemoval",isDifferentFromOriginal:!0});try{URL.revokeObjectURL(X.localPreviewUrl),m.log(`[EntryForm] [BLOB URL REVOCATION] Successfully revoked preview URL for ${ee}`)}catch(we){m.error(`[EntryForm] [BLOB URL REVOCATION] Error revoking preview URL on remove: ${we}`)}}if(m.log(`[EntryForm] [BLOB URL LIFECYCLE] Removing entries from refs for id: ${ee}`),U(we=>(de=we.filter((he,Oe)=>Oe!==Z),de)),ue&&Te.current){const we=de.length>0?de[0]:null;let he=null;if(we)if(zn(we))he=((ve=we.exifData)==null?void 0:ve.exifDate)??null;else{const Je=G.current.get(we.photoId);he=(Je==null?void 0:Je.exifDate)??null}m.log(`[Remove Photo - DATE CHECK 1] First photo removed. New initial EXIF date string: ${he}`),L(he);const Oe=T.toISOString().split("T")[0];let je=!1,$e="";if(he){const[Je,Ne,ct]=he.split("-").map(Number);!isNaN(Je)&&!isNaN(Ne)&&!isNaN(ct)&&($e=new Date(Date.UTC(Je,Ne-1,ct)).toISOString().split("T")[0],je=Oe!==$e)}m.log(`[Remove Photo - DATE CHECK 2] Comparing Form UTC: ${Oe} vs New EXIF as UTC: ${$e||"N/A"}. Show warning: ${je}`),q(je)}Ce(!1),xe(null)},[oe,N,T]),Xt=f.useCallback(()=>{if(_){m.log(`[EntryForm] handleUseExifDate called. Setting date to EXIF: ${_}.`);const[Z,X,ee]=_.split("-").map(Number);A(new Date(Date.UTC(Z,X-1,ee))),m.log("[EntryForm] handleUseExifDate setting warning to false."),q(!1)}},[_]),Ut=f.useCallback(Z=>{try{const X=new Date(Z.target.value+"T00:00:00Z");if(isNaN(X.getTime()))m.warn("[EntryForm] Invalid date input received:",Z.target.value);else{A(X);const ee=X.toISOString().split("T")[0];let ue=!1,de="";if(_){const[me,ve,we]=_.split("-").map(Number);!isNaN(me)&&!isNaN(ve)&&!isNaN(we)&&(de=new Date(Date.UTC(me,ve-1,we)).toISOString().split("T")[0],ue=ee!==de)}m.log(`[handleDateChange - DATE CHECK 1] Date changed to ${Z.target.value}. Comparing New Form UTC: ${ee} vs Initial EXIF as UTC: ${de||"N/A"}. Show warning: ${ue}`),q(ue)}}catch(X){m.error("[EntryForm] Error processing date change:",X)}},[_]),bt=f.useCallback(async()=>{if(m.log("[EntryForm] handleSave called.",{isBusy:H,canSave:ce}),H||!ce){m.warn("[EntryForm] Save prevented:",{isBusy:H,canSave:ce});return}const X=await n({date:T,content:I,photos:N},E);X&&Te.current?(yt(!1),$.current&&(m.log(`[EntryForm] Save successful, cleaning up shared files with key: ${$.current}`),d($.current),$.current=null)):X||m.warn("[EntryForm] Save failed (returned false).")},[H,ce,T,I,N,n,E]),st=f.useCallback(()=>{k?Ze():at?lt(!0):w("/")},[k,at,w,Ze]),Ro=f.useCallback(()=>{lt(!1),yt(!1),$.current&&(m.log(`[EntryForm] Canceling entry, cleaning up shared files with key: ${$.current}`),d($.current),$.current=null),w("/")},[w]),br=f.useCallback(Z=>{Z.key==="Enter"&&(Z.metaKey||Z.ctrlKey)&&(Z.preventDefault(),ce&&!H&&bt())},[ce,H,bt]);if(h&&!u)return m.log("[EntryForm Render] Rendering Loading (Auth)..."),p.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[" ",p.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"})," "]});if(se)return m.log("[EntryForm Render] Rendering Loading (Data)..."),p.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[" ",p.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"})," "]});m.log("[EntryForm Render] Rendering main content. State:",{isCropperOpen:k,isEditMode:z,photoCount:N.length,queueLength:te.length,currentQueueIndex:ie,isLoadingData:se,isBusy:H,formDateUTC:T.toISOString().split("T")[0],initialExifDate:_,showExifDateMismatchWarning:j,isDateSetByUserIntent:P});const wl=()=>{var Z;if(k&&J){const X=ae??(F!==null?N[F]:null),ee=X&&"crop"in X?X.crop:void 0;let ue;if(ae&&ae.originalDimensions)ue=ae.originalDimensions;else if(F!==null&&uP(N[F])){const de=G.current.get(N[F].photoId);de!=null&&de.width&&(de!=null&&de.height)&&(ue={width:de.width,height:de.height})}else F!==null&&zn(N[F])&&(ue=N[F].originalDimensions);return p.jsx("div",{className:"p-4 md:p-6 flex-grow overflow-hidden flex flex-col",children:p.jsx(v3,{imageUrl:J,onCropComplete:Be,onCancel:Ze,initialCropData:ee,initialImageDimensions:ue})})}else return p.jsxs("div",{className:"space-y-4 p-6 flex-grow overflow-y-auto custom-scrollbar",children:[p.jsx(H4,{photos:N,setPhotos:U,isBusy:H,isLoadingInitial:!1,initialPhotoCount:((Z=E==null?void 0:E.photos)==null?void 0:Z.length)??0,onOpenCropper:Qe,onRemovePhoto:He,onFilesSelect:Re,originalBlobUrlsRef:We,existingPhotoMetaRef:G,processingQueueLength:te.length,currentQueueIndex:ie,isProcessingQueueItem:B}),N.length>0&&p.jsxs(p.Fragment,{children:[p.jsx(G4,{date:T,onDateChange:Ut,showExifWarning:j,initialExifDate:_,onUseExifDate:Xt,isBusy:H}),p.jsx(K4,{content:I,setContent:O,isBusy:H,onKeyDown:br,textAreaRef:kt})]})]})},vy=()=>k?`Adjust Photo${te.length>0&&ie!==null?` (${ie+1}/${te.length})`:""}`:z?"Edit Entry":"New Entry";return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex flex-col min-h-screen",children:[p.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md border-b p-4 flex items-center justify-between",children:[p.jsxs(Ge,{variant:"ghost",size:"icon",onClick:st,disabled:H&&!k,"aria-label":k?"Cancel Crop":"Go Back",children:[" ",p.jsx(mE,{className:"h-5 w-5"})," "]}),p.jsx("h1",{className:"text-lg font-semibold",children:vy()}),p.jsxs(Ge,{variant:"ghost",size:"icon",onClick:st,disabled:H&&!k,"aria-label":"Close",children:[" ",p.jsx(Bu,{className:"h-5 w-5"})," "]})]}),p.jsxs("main",{className:"flex flex-col flex-grow overflow-hidden",children:[wl(),!k&&p.jsx("div",{className:"p-4 border-t",children:p.jsx(Y4,{isBusy:H,isSaving:a,isEditMode:z,canSave:ce,onCancel:st,onSave:bt})})]})]}),p.jsx(ex,{open:qe,onOpenChange:Ce,onConfirm:Dt,title:"Remove Photo?",description:"Are you sure you want to remove this photo from the entry?",confirmText:"Remove",isConfirming:a}),p.jsx(ex,{open:Nt,onOpenChange:lt,onConfirm:Ro,title:"Discard Changes?",description:"You have unsaved changes. Are you sure you want to discard them and go back?",confirmText:"Discard"})]})}function S3(){return m.log("[App] Using hook:",Kh),p.jsx(tI,{client:oI,children:p.jsx(eO,{children:p.jsxs(uC,{children:[p.jsx(_b,{hook:Kh,children:p.jsxs(RR,{children:[p.jsx(zi,{path:"/",component:J4}),p.jsx(zi,{path:"/entry",children:p.jsx($f,{})}),p.jsx(zi,{path:"/entry/new",children:p.jsx($f,{})}),p.jsx(zi,{path:"/entry/edit/:id",children:e=>p.jsx($f,{entryId:e.id})}),p.jsx(zi,{children:()=>p.jsx(jL,{})})]})}),p.jsx(sN,{})]})})})}bb(document.getElementById("root")).render(p.jsx(CO,{attribute:"class",children:p.jsx(S3,{})}))});export default b3();
